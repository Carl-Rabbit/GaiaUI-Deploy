{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/core/entities/spec/Timing.js","webpack:///./src/components/editor/ControlPanel/TextPanel.vue?93de","webpack:///./src/views/webpage/GalleryView.vue?cec4","webpack:///./src/components/editor/AniSVGContainer.vue?b680","webpack:///./src/views/EditorView.vue?70ff","webpack:///./src/core/entities/spec/animation/NativeAnimation.js","webpack:///./src/App.vue?2352","webpack:///./src/components/editor/ExportSVGContainer.vue?e7dc","webpack:///./src/components/editor/SVGContainer.vue?1d28","webpack:///./src/core/entities/spec/BaseTemplate.js","webpack:///./src/views/TestView.vue?6827","webpack:///./src/core/entities/spec/transform/FilterTransform.js","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///./src/App.vue?4c4f","webpack:///./src/App.vue?3746","webpack:///./src/views/TestView.vue","webpack:///./src/utils/lasso/lasso.js","webpack:///src/views/TestView.vue","webpack:///./src/views/TestView.vue?bc0b","webpack:///./src/views/TestView.vue?e93b","webpack:///./src/views/EditorView.vue","webpack:///./src/components/editor/ControlPanel/ContrlPanel.vue","webpack:///./src/components/editor/ControlPanel/TimelinePanel.vue","webpack:///src/components/editor/ControlPanel/TimelinePanel.vue","webpack:///./src/components/editor/ControlPanel/TimelinePanel.vue?3c18","webpack:///./src/components/editor/ControlPanel/TimelinePanel.vue?651b","webpack:///./src/components/editor/ControlPanel/TextPanel.vue","webpack:///./src/utils/common/SeletionToolType.js","webpack:///src/components/editor/ControlPanel/TextPanel.vue","webpack:///./src/components/editor/ControlPanel/TextPanel.vue?6f7e","webpack:///./src/components/editor/ControlPanel/TextPanel.vue?74aa","webpack:///src/components/editor/ControlPanel/ContrlPanel.vue","webpack:///./src/components/editor/ControlPanel/ContrlPanel.vue?3277","webpack:///./src/components/editor/ControlPanel/ContrlPanel.vue?4950","webpack:///./src/components/editor/SVGContainer.vue","webpack:///src/components/editor/SVGContainer.vue","webpack:///./src/components/editor/SVGContainer.vue?e815","webpack:///./src/components/editor/SVGContainer.vue?8110","webpack:///./src/components/editor/AniSVGContainer.vue","webpack:///src/components/editor/AniSVGContainer.vue","webpack:///./src/components/editor/AniSVGContainer.vue?0618","webpack:///./src/components/editor/AniSVGContainer.vue?d29d","webpack:///./src/components/editor/AsidePanel/DebugPanel.vue","webpack:///./src/core/utils/DomUtils.js","webpack:///src/components/editor/AsidePanel/DebugPanel.vue","webpack:///./src/components/editor/AsidePanel/DebugPanel.vue?c87d","webpack:///./src/components/editor/AsidePanel/DebugPanel.vue?81d4","webpack:///./src/components/editor/ProjSelPanel/ProjSelectionPanel.vue","webpack:///./src/components/editor/ProjSelPanel/SvgPreviewer.vue","webpack:///src/components/editor/ProjSelPanel/SvgPreviewer.vue","webpack:///./src/components/editor/ProjSelPanel/SvgPreviewer.vue?6170","webpack:///./src/components/editor/ProjSelPanel/SvgPreviewer.vue?2ce4","webpack:///src/components/editor/ProjSelPanel/ProjSelectionPanel.vue","webpack:///./src/components/editor/ProjSelPanel/ProjSelectionPanel.vue?974e","webpack:///./src/components/editor/ProjSelPanel/ProjSelectionPanel.vue?a4f1","webpack:///./src/components/editor/ExportSVGContainer.vue","webpack:///./src/utils/output/ExportUtils.js","webpack:///./src/core/entities/spec/ChartShotAnimation.js","webpack:///./src/core/parser/TransformParser.js","webpack:///./src/core/parser/TargetParser.js","webpack:///./src/core/entities/spec/animation/SyncAnimation.js","webpack:///./src/core/entities/spec/animation/ConcatAnimation.js","webpack:///./src/core/entities/spec/animation/GroupAnimation.js","webpack:///./src/core/entities/spec/animation/TemplateUsage.js","webpack:///./src/core/parser/AnimationParser.js","webpack:///./src/core/utils/JsonUtils.js","webpack:///./src/core/entities/spec/animation/EmptyAnimation.js","webpack:///./src/core/entities/spec/template/JsonTemplate.js","webpack:///./src/core/parser/ParamDefinitionParser.js","webpack:///./src/core/parser/TemplateParser.js","webpack:///./src/core/parser/ChartShotAnimationParser.js","webpack:///./src/core/parser/Parser.js","webpack:///./src/core/entities/context/Context.js","webpack:///./src/core/entities/context/RenderContext.js","webpack:///./src/core/generator/BaseTargetModel.js","webpack:///./src/core/generator/target-model/SimpleTargetModel.js","webpack:///./src/core/generator/Generator.js","webpack:///./src/core/library/TemplateLibrary.js","webpack:///./src/core/const/PreviewerType.js","webpack:///./src/core/const/AnimationType.js","webpack:///./src/core/previewer/PreviewWrapper.js","webpack:///./src/core/previewer/PreviewerManager.js","webpack:///./src/core/build-in/templates/general/FadeInTemplate.js","webpack:///./src/core/const/Direction.js","webpack:///./src/core/build-in/templates/general/GrowTemplate.js","webpack:///./src/core/build-in/templates/general/MoveToTemplate.js","webpack:///./src/core/build-in/templates/general/MoveFromTemplate.js","webpack:///./src/core/build-in/templates/general/FloatTemplate.js","webpack:///./src/core/build-in/templates/general/BasicZoomTemplate.js","webpack:///./src/core/build-in/templates/general/ZoomTemplate.js","webpack:///./src/core/build-in/templates/general/WipeTemplate.js","webpack:///./src/core/const/Data.js","webpack:///./src/core/build-in/templates/general/ChangeColorTemplate.js","webpack:///./src/core/build-in/templates/path/ShowPathTemplate.js","webpack:///./src/utils/common/ArrayUtils.js","webpack:///./src/core/build-in/templates/general/HighlightTemplate.js","webpack:///./src/core/build-in/templates/camera/CameraZoomTemplate.js","webpack:///./src/core/build-in/templates/general/ZoomExitTemplate.json5","webpack:///./src/core/build-in/templates/general/BasicZoomExitTemplate.json5","webpack:///./src/core/build-in/templates/general/FadeOutTemplate.js","webpack:///./src/core/build-in/templates/text/TitleTemplate.js","webpack:///./src/core/build-in/templates/chart/ChartWithoutMarkFloatInTemplate.js","webpack:///./src/core/build-in/templates/chart/ChartWithoutMarkFadeInTemplate.json5","webpack:///./src/core/build-in/templates/bar-chart/BarChartEnterTemplate.js","webpack:///./src/core/build-in/templates/bar-chart/BarChartWithLegendEnterTemplate.js","webpack:///./src/core/build-in/templates/circle-chart/CircleChartWithLegendEnterTemplate.js","webpack:///./src/core/build-in/templates/line-chart/LineChartEnterTemplate.js","webpack:///./src/core/build-in/templates/line-chart/LineChartbyLegendTemplate.js","webpack:///./src/core/build-in/templates/line-chart/LineChartbyOrderTemplate.js","webpack:///./src/core/build-in/templates/pie-chart/PieChartEnterTemplate.js","webpack:///./src/core/build-in/templates/bar-chart/BarEnterTemplate.js","webpack:///./src/core/build-in/templates/bar-chart/BarWithLegendEnterTemplate.js","webpack:///./src/core/build-in/templates/bar-chart/BarSymbolLabelEnterTemplate.js","webpack:///./src/core/build-in/templates/circle-chart/CircleEnterTemplate.js","webpack:///./src/core/build-in/templates/circle-chart/CircleWithLegendEnterTemplate.js","webpack:///./src/core/build-in/templates/circle-chart/CircleChartEnterTemplate.js","webpack:///./src/core/utils/SvgUtils.js","webpack:///./src/core/build-in/templates/bar-chart/GrowBarTemplate.js","webpack:///./src/core/build-in/templates/line-chart/LineEnterTemplate.js","webpack:///./src/core/build-in/templates/line-chart/LinebyLegendTemplate.js","webpack:///./src/core/build-in/templates/line-chart/LinebyOrderTemplate.js","webpack:///./src/core/build-in/templates/line-chart/LineHighlightTemplate.js","webpack:///./src/core/build-in/templates/pie-chart/PieWithLegendEnterTemplate.js","webpack:///./src/core/build-in/templates/annotation/ShowAnnoZoomTemplate.js","webpack:///./src/core/build-in/templates/annotation/ShowArrowLabelAnnoTemplate.js","webpack:///./src/core/build-in/templates/general/CircleTemplate.js","webpack:///./src/core/build-in/templates/general/FadeInThenFadeOutTemplate.json5","webpack:///./src/core/build-in/templates/text/DynamicNumberTemplate.js","webpack:///./src/core/build-in/templates/general/ZoomInThenZoomOutTemplate.js","webpack:///./src/core/build-in/templates/general/CustomEffectTemplate.js","webpack:///./src/core/build-in/templates/general/FadeTemplate.js","webpack:///./src/core/build-in/templates/general/ZoomEnterTemplate.json5","webpack:///./src/core/build-in/templates/general/BasicZoomEnterTemplate.json5","webpack:///./src/core/build-in/templates/bar-chart/BarSymbolLabelBounceTemplate.js","webpack:///./src/core/build-in/templates/bar-chart/BarChartWithAxisLabelEnterTemplate.js","webpack:///./src/core/build-in/templates/general/MoveTemplate.js","webpack:///./src/core/build-in/templates/general/WheelTemplate.js","webpack:///./src/core/build-in/templates/path/DrawPathTemplate.js","webpack:///./src/core/build-in/templates/pie-chart/HighlightSectorTemplate.js","webpack:///./src/core/build-in/templates/pie-chart/ArcWheelWithLegendTemplate.js","webpack:///./src/core/build-in/templates/text/ShowDynamicNumberTemplate.js","webpack:///./src/core/build-in/templates/annotation/ShowAnnoAutoEffectTemplate.js","webpack:///./src/core/build-in/templates/camera/CameraMoveTemplate.js","webpack:///./src/core/build-in/templates/pie-chart/SimpleSectorWheelTemplate.js","webpack:///./src/core/build-in/templates/general/FlyInTemplate.js","webpack:///./src/core/build-in/templates/general/HideTemplate.js","webpack:///./src/core/build-in/templates/general/EmptyTemplate.js","webpack:///./src/core/build-in/templates/text/ShowNumber.json5","webpack:///./src/core/build-in/index.js","webpack:///./src/core/previewer/build-in-wrapper/general/FadeWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/general/BasicZoomEnterWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/general/BasicZoomExitWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/general/BasicZoomWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/general/ChangeColorWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/general/CustomEffectWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/general/FadeInWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/general/FadeOutWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/general/FloatWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/general/FlyinWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/general/GrowWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/general/MoveWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/general/MoveFromWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/general/MoveToWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/general/WipeWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/general/ZoomEnterWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/general/ZoomExitWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/general/ZoomWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/annotation/ZoomInThenZoomOutWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/annotation/ShowArrowLabelAnnoWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/camera/CameraZoomWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/camera/CameraMoveWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/bar-chart/BarChartEnterWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/bar-chart/BarSymbolLabelEnterWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/bar-chart/BarSymbolLabelBounceWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/bar-chart/BarEnterWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/bar-chart/BarChartWithLegendEnterWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/bar-chart/BarWithLegendEnterWrapper.js","webpack:///./src/core/build-in/templates/chart/ChartWithoutMarkFadeIn2Template.js","webpack:///./src/core/previewer/build-in-wrapper/chart/ChartWithoutMarkFadeInWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/chart/ChartWithoutMarkFloatInWrapper.js","webpack:///./src/core/build-in/templates/general/FadeInThenFadeOutTemplate.js","webpack:///./src/core/previewer/build-in-wrapper/general/FadeInThenFadeOutWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/general/CircleWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/path/ShowPathWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/general/HighlightWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/circle-chart/CircleChartEnterWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/circle-chart/CircleEnterWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/circle-chart/CircleChartWithLegendEnterWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/circle-chart/CircleWithLegendEnterWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/arc-chart/PieChartEnterWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/arc-chart/PieWithLegendEnterWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/arc-chart/SectorHighlightWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/Text/TitleWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/Text/ShowDynamicNumberWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/line-chart/LineChartbyLegendEnterWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/line-chart/LinebyLegendEnterWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/line-chart/LineChartbyOrderEnterWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/line-chart/LinebyOrderEnterWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/line-chart/LineChartEnterWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/line-chart/LineEnterWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/line-chart/LineHighlightWrapper.js","webpack:///./src/core/previewer/build-in-wrapper/index.js","webpack:///./src/core/previewer/BasePreviewer.js","webpack:///./src/core/previewer/template-previewer/BlankPreviewer.js","webpack:///./src/core/previewer/template-previewer/GeneralPreviewer.js","webpack:///./src/core/previewer/template-previewer/MovePreviewer.js","webpack:///./src/core/previewer/template-previewer/AnnotationArrowPreviewer.js","webpack:///./src/core/previewer/template-previewer/CameraPreviewer.js","webpack:///./src/core/utils/ChartLayout.js","webpack:///./src/core/previewer/template-previewer/BarChartPreviewer.js","webpack:///./src/core/previewer/template-previewer/BarChartWithLegendPreviewer.js","webpack:///./src/core/previewer/template-previewer/ChartFrameworkPreviewer.js","webpack:///./src/core/previewer/template-previewer/CirclePreviewer.js","webpack:///./src/core/previewer/template-previewer/CircleWithLegendPreviewer.js","webpack:///./src/core/previewer/template-previewer/ArcPreviewer.js","webpack:///./src/core/previewer/template-previewer/ArcWithLegendPreviewer.js","webpack:///./src/core/previewer/template-previewer/TextPreviewer.js","webpack:///./src/core/previewer/template-previewer/TitlePreviewer.js","webpack:///./src/core/previewer/template-previewer/LinePreviewer.js","webpack:///./src/core/previewer/template-previewer/LineWithLegendPreviewer.js","webpack:///./src/core/previewer/template-previewer/PathPreviewer.js","webpack:///./src/core/previewer/template-previewer/HighlightPreviewer.js","webpack:///./src/core/previewer/template-previewer/index.js","webpack:///./src/utils/common/ObjectUtils.js","webpack:///./src/core/compiler/Compiler.js","webpack:///./src/core/const/ComponentType.js","webpack:///./src/core/filters/BaseFilter.js","webpack:///./src/core/filters/MarkFilter/MarkBarWithAxisLabelFilter.js","webpack:///./src/core/filters/MarkFilter/MarkBarWithLegendFilter.js","webpack:///./src/core/filters/MarkFilter/MarkLineFilter.js","webpack:///./src/core/filters/MarkFilter/MarkLinesByLegendFilter.js","webpack:///./src/core/filters/MarkFilter/MarkLinesByOrderFilter.js","webpack:///./src/core/filters/MarkFilter/MarkScatterChartFilter.js","webpack:///./src/core/filters/MarkFilter/MarkScatterFilter.js","webpack:///./src/core/filters/MarkFilter/MarkScatterWithLegendFilter.js","webpack:///./src/core/filters/MarkFilter/MarkBarFilter.js","webpack:///./src/core/filters/MarkFilter/MarkBarBounceFilter.js","webpack:///./src/core/filters/MarkFilter/MarkPieFilter.js","webpack:///./src/core/filters/MarkFilter/MarkPieWithLegendFilter.js","webpack:///./src/core/filters/MarkFilter/MarkSectorHighlightFilter.js","webpack:///./src/core/filters/MarkFilter/MarkLineHighlightFilter.js","webpack:///./src/core/filters/GeneralFilter/GeneralFadeInFilter.js","webpack:///./src/core/filters/GeneralFilter/GeneralGrowFilter.js","webpack:///./src/core/filters/GeneralFilter/GeneralFloatFilter.js","webpack:///./src/core/filters/GeneralFilter/GeneralZoomEnterFilter.js","webpack:///./src/core/filters/GeneralFilter/GeneralChangeColorFilter.js","webpack:///./src/core/filters/GeneralFilter/GeneralShowPathFilter.js","webpack:///./src/core/filters/GeneralFilter/GeneralHighlightFilter.js","webpack:///./src/core/filters/GeneralFilter/GeneralCameraZoomFilter.js","webpack:///./src/core/filters/GeneralFilter/GeneralCameraMoveFilter.js","webpack:///./src/core/filters/GeneralFilter/GeneralMoveToFilter.js","webpack:///./src/core/filters/GeneralFilter/GeneralMoveFromFilter.js","webpack:///./src/core/filters/GeneralFilter/GeneralZoomExitFilter.js","webpack:///./src/core/filters/GeneralFilter/GeneralFadeOutFilter.js","webpack:///./src/core/filters/GeneralFilter/GeneralFlyinFilter.js","webpack:///./src/core/filters/AnnotationFilter/AnnotationZoomInThenZoomOutFilter.js","webpack:///./src/core/filters/AnnotationFilter/AnnotationShowArrowLabelAnnotationFilter.js","webpack:///./src/core/filters/AnnotationFilter/AnnotationFadeInFadeOutFilter.js","webpack:///./src/core/filters/AnnotationFilter/AnnotationDynamicNumFilter.js","webpack:///./src/core/filters/ChartFilter/ChartTitleFilter.js","webpack:///./src/core/filters/ChartFilter/ChartAxisFloatInFilter.js","webpack:///./src/core/filters/ChartFilter/ChartAxisFadeInFilter.js","webpack:///./src/core/filters/ChartFilter/ChartBarChartFilter.js","webpack:///./src/core/filters/ChartFilter/ChartBarChartWithLegendFilter.js","webpack:///./src/core/filters/ChartFilter/ChartScatterChartWithLegendFilter.js","webpack:///./src/core/filters/ChartFilter/ChartLineChartFilter.js","webpack:///./src/core/filters/ChartFilter/ChartLineChartByLegendFilter.js","webpack:///./src/core/filters/ChartFilter/ChartLineChartByOrderFilter.js","webpack:///./src/core/filters/index.js","webpack:///./src/core/index.js","webpack:///src/components/editor/ExportSVGContainer.vue","webpack:///./src/components/editor/ExportSVGContainer.vue?23ba","webpack:///./src/components/editor/ExportSVGContainer.vue?c885","webpack:///src/views/EditorView.vue","webpack:///./src/views/EditorView.vue?2e99","webpack:///./src/views/EditorView.vue?a45d","webpack:///./src/views/webpage/HomepageView.vue","webpack:///./src/components/webpage/common/PageHeader.vue","webpack:///src/components/webpage/common/PageHeader.vue","webpack:///./src/components/webpage/common/PageHeader.vue?6153","webpack:///./src/components/webpage/common/PageHeader.vue?ffc2","webpack:///./src/components/webpage/common/PageFooter.vue","webpack:///src/components/webpage/common/PageFooter.vue","webpack:///./src/components/webpage/common/PageFooter.vue?a9ac","webpack:///./src/components/webpage/common/PageFooter.vue?77b5","webpack:///src/views/webpage/HomepageView.vue","webpack:///./src/views/webpage/HomepageView.vue?a556","webpack:///./src/views/webpage/HomepageView.vue?f452","webpack:///./src/views/webpage/GalleryView.vue","webpack:///src/views/webpage/GalleryView.vue","webpack:///./src/views/webpage/GalleryView.vue?b029","webpack:///./src/views/webpage/GalleryView.vue?214b","webpack:///./src/views/webpage/ExampleView.vue","webpack:///src/views/webpage/ExampleView.vue","webpack:///./src/views/webpage/ExampleView.vue?37af","webpack:///./src/views/webpage/ExampleView.vue?c4c3","webpack:///./src/router/index.js","webpack:///./src/service/nlpService.js","webpack:///./src/utils/common/copy.js","webpack:///./src/utils/audio/AudioUtils.js","webpack:///./src/utils/target/TargetUtils.js","webpack:///./src/store/modules/editor.js","webpack:///./src/service/projService.js","webpack:///./src/assets/projects.json5","webpack:///./src/utils/target/VegaTargetUtils.js","webpack:///./src/store/modules/resource.js","webpack:///./src/core/target/TargetUtils.js","webpack:///./src/store/modules/target.js","webpack:///./src/utils/common/Scene.js","webpack:///./src/store/modules/project.js","webpack:///./src/store/index.js","webpack:///./src/main.js","webpack:///../node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack:///../node_modules/@babel/runtime/helpers/esm/createClass.js","webpack:///../src/session/CompileExec.ts","webpack:///../node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack:///../node_modules/@babel/runtime/helpers/esm/inherits.js","webpack:///../node_modules/@babel/runtime/helpers/esm/typeof.js","webpack:///../node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","webpack:///../node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","webpack:///../node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","webpack:///../src/module/Package.ts","webpack:///../node_modules/lodash/_freeGlobal.js","webpack:///../node_modules/lodash/_root.js","webpack:///../node_modules/lodash/_Symbol.js","webpack:///../node_modules/lodash/_getRawTag.js","webpack:///../node_modules/lodash/_objectToString.js","webpack:///../node_modules/lodash/_baseGetTag.js","webpack:///../node_modules/lodash/isArray.js","webpack:///../node_modules/lodash/isObjectLike.js","webpack:///../node_modules/lodash/isString.js","webpack:///../src/module/ProtoManager.ts","webpack:///../src/core/library/Library.ts","webpack:///../src/core/library/TemplateLibrary.ts","webpack:///../src/core/utils/Logger.ts","webpack:///../node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack:///../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack:///../node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///../node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack:///../node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///../node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:///../src/core/utils/TreeUtils.ts","webpack:///../node_modules/zod/lib/index.mjs","webpack:///../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack:///../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack:///../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack:///../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack:///../src/parser/json/animation/ParamUsageSpec.ts","webpack:///../src/parser/json/animation/TargetSpec.ts","webpack:///../src/parser/json/animation/YoyoSpec.ts","webpack:///../src/parser/json/animation/AniUnitSpec.ts","webpack:///../src/parser/json/animation/ImportSpec.ts","webpack:///../src/parser/json/animation/ParamSpec.ts","webpack:///../src/parser/json/animation/AniClassSpec.ts","webpack:///../node_modules/@babel/runtime/helpers/esm/isNativeFunction.js","webpack:///../node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","webpack:///../node_modules/@babel/runtime/helpers/esm/construct.js","webpack:///../node_modules/@babel/runtime/helpers/esm/wrapNativeSuper.js","webpack:///../src/core/utils/error/BaseError.ts","webpack:///../src/core/utils/error/UnresolvedError.ts","webpack:///../src/core/ast/target/Transform.ts","webpack:///../src/core/ast/target/trans/FilterTransform.ts","webpack:///../src/core/ast/target/trans/SortTransform.ts","webpack:///../src/core/ast/target/trans/SelectTransform.ts","webpack:///../src/core/ast/target/trans/SelectAllTransform.ts","webpack:///../src/core/ast/target/trans/SliceTransform.ts","webpack:///../node_modules/lodash/isObject.js","webpack:///../node_modules/lodash/isFunction.js","webpack:///../src/core/ast/target/trans/FilterExprTransform.ts","webpack:///../src/core/ast/target/Target.ts","webpack:///../node_modules/lodash/_listCacheClear.js","webpack:///../node_modules/lodash/eq.js","webpack:///../node_modules/lodash/_assocIndexOf.js","webpack:///../node_modules/lodash/_listCacheDelete.js","webpack:///../node_modules/lodash/_listCacheGet.js","webpack:///../node_modules/lodash/_listCacheHas.js","webpack:///../node_modules/lodash/_listCacheSet.js","webpack:///../node_modules/lodash/_ListCache.js","webpack:///../node_modules/lodash/_stackClear.js","webpack:///../node_modules/lodash/_stackDelete.js","webpack:///../node_modules/lodash/_stackGet.js","webpack:///../node_modules/lodash/_stackHas.js","webpack:///../node_modules/lodash/_coreJsData.js","webpack:///../node_modules/lodash/_isMasked.js","webpack:///../node_modules/lodash/_toSource.js","webpack:///../node_modules/lodash/_baseIsNative.js","webpack:///../node_modules/lodash/_getValue.js","webpack:///../node_modules/lodash/_getNative.js","webpack:///../node_modules/lodash/_Map.js","webpack:///../node_modules/lodash/_nativeCreate.js","webpack:///../node_modules/lodash/_hashClear.js","webpack:///../node_modules/lodash/_hashDelete.js","webpack:///../node_modules/lodash/_hashGet.js","webpack:///../node_modules/lodash/_hashHas.js","webpack:///../node_modules/lodash/_hashSet.js","webpack:///../node_modules/lodash/_Hash.js","webpack:///../node_modules/lodash/_mapCacheClear.js","webpack:///../node_modules/lodash/_isKeyable.js","webpack:///../node_modules/lodash/_getMapData.js","webpack:///../node_modules/lodash/_mapCacheDelete.js","webpack:///../node_modules/lodash/_mapCacheGet.js","webpack:///../node_modules/lodash/_mapCacheHas.js","webpack:///../node_modules/lodash/_mapCacheSet.js","webpack:///../node_modules/lodash/_MapCache.js","webpack:///../node_modules/lodash/_stackSet.js","webpack:///../node_modules/lodash/_Stack.js","webpack:///../node_modules/lodash/_arrayEach.js","webpack:///../node_modules/lodash/_defineProperty.js","webpack:///../node_modules/lodash/_baseAssignValue.js","webpack:///../node_modules/lodash/_assignValue.js","webpack:///../node_modules/lodash/_copyObject.js","webpack:///../node_modules/lodash/_baseTimes.js","webpack:///../node_modules/lodash/_baseIsArguments.js","webpack:///../node_modules/lodash/isArguments.js","webpack:///../node_modules/lodash/stubFalse.js","webpack:///../node_modules/lodash/isBuffer.js","webpack:///../node_modules/lodash/_isIndex.js","webpack:///../node_modules/lodash/isLength.js","webpack:///../node_modules/lodash/_baseIsTypedArray.js","webpack:///../node_modules/lodash/_baseUnary.js","webpack:///../node_modules/lodash/_nodeUtil.js","webpack:///../node_modules/lodash/isTypedArray.js","webpack:///../node_modules/lodash/_arrayLikeKeys.js","webpack:///../node_modules/lodash/_isPrototype.js","webpack:///../node_modules/lodash/_overArg.js","webpack:///../node_modules/lodash/_nativeKeys.js","webpack:///../node_modules/lodash/_baseKeys.js","webpack:///../node_modules/lodash/isArrayLike.js","webpack:///../node_modules/lodash/keys.js","webpack:///../node_modules/lodash/_baseAssign.js","webpack:///../node_modules/lodash/_nativeKeysIn.js","webpack:///../node_modules/lodash/_baseKeysIn.js","webpack:///../node_modules/lodash/keysIn.js","webpack:///../node_modules/lodash/_baseAssignIn.js","webpack:///../node_modules/lodash/_cloneBuffer.js","webpack:///../node_modules/lodash/_copyArray.js","webpack:///../node_modules/lodash/_arrayFilter.js","webpack:///../node_modules/lodash/stubArray.js","webpack:///../node_modules/lodash/_getSymbols.js","webpack:///../node_modules/lodash/_copySymbols.js","webpack:///../node_modules/lodash/_arrayPush.js","webpack:///../node_modules/lodash/_getPrototype.js","webpack:///../node_modules/lodash/_getSymbolsIn.js","webpack:///../node_modules/lodash/_copySymbolsIn.js","webpack:///../node_modules/lodash/_baseGetAllKeys.js","webpack:///../node_modules/lodash/_getAllKeys.js","webpack:///../node_modules/lodash/_getAllKeysIn.js","webpack:///../node_modules/lodash/_DataView.js","webpack:///../node_modules/lodash/_Promise.js","webpack:///../node_modules/lodash/_Set.js","webpack:///../node_modules/lodash/_WeakMap.js","webpack:///../node_modules/lodash/_getTag.js","webpack:///../node_modules/lodash/_initCloneArray.js","webpack:///../node_modules/lodash/_Uint8Array.js","webpack:///../node_modules/lodash/_cloneArrayBuffer.js","webpack:///../node_modules/lodash/_cloneDataView.js","webpack:///../node_modules/lodash/_cloneRegExp.js","webpack:///../node_modules/lodash/_cloneSymbol.js","webpack:///../node_modules/lodash/_cloneTypedArray.js","webpack:///../node_modules/lodash/_initCloneByTag.js","webpack:///../node_modules/lodash/_baseCreate.js","webpack:///../node_modules/lodash/_initCloneObject.js","webpack:///../node_modules/lodash/_baseIsMap.js","webpack:///../node_modules/lodash/isMap.js","webpack:///../node_modules/lodash/_baseIsSet.js","webpack:///../node_modules/lodash/isSet.js","webpack:///../node_modules/lodash/_baseClone.js","webpack:///../node_modules/lodash/cloneDeep.js","webpack:///../src/core/ast/animation/other/Timing.ts","webpack:///../src/module/Proto.ts","webpack:///../src/core/utils/error/ResolveError.ts","webpack:///../node_modules/nanoid/url-alphabet/index.js","webpack:///../node_modules/nanoid/index.js","webpack:///../node_modules/lodash/isNumber.js","webpack:///../node_modules/lodash/_arrayMap.js","webpack:///../node_modules/lodash/isSymbol.js","webpack:///../node_modules/lodash/_isKey.js","webpack:///../node_modules/lodash/memoize.js","webpack:///../node_modules/lodash/_memoizeCapped.js","webpack:///../node_modules/lodash/_stringToPath.js","webpack:///../node_modules/lodash/_baseToString.js","webpack:///../node_modules/lodash/toString.js","webpack:///../node_modules/lodash/_castPath.js","webpack:///../node_modules/lodash/last.js","webpack:///../node_modules/lodash/_toKey.js","webpack:///../node_modules/lodash/_baseGet.js","webpack:///../node_modules/lodash/_baseSlice.js","webpack:///../node_modules/lodash/_parent.js","webpack:///../node_modules/lodash/_baseUnset.js","webpack:///../node_modules/lodash/isPlainObject.js","webpack:///../node_modules/lodash/_customOmitClone.js","webpack:///../node_modules/lodash/_isFlattenable.js","webpack:///../node_modules/lodash/_baseFlatten.js","webpack:///../node_modules/lodash/flatten.js","webpack:///../node_modules/lodash/_apply.js","webpack:///../node_modules/lodash/_overRest.js","webpack:///../node_modules/lodash/constant.js","webpack:///../node_modules/lodash/identity.js","webpack:///../node_modules/lodash/_baseSetToString.js","webpack:///../node_modules/lodash/_shortOut.js","webpack:///../node_modules/lodash/_setToString.js","webpack:///../node_modules/lodash/_flatRest.js","webpack:///../node_modules/lodash/omit.js","webpack:///../src/core/ast/animation/logical/LogicalAnimation.ts","webpack:///../src/core/ast/animation/other/Import.ts","webpack:///../src/core/utils/error/ParseError.ts","webpack:///../src/parser/json/ParseContext.ts","webpack:///../src/core/ast/animation/logical/LeafAnimation.ts","webpack:///../src/module/CommonPackage.ts","webpack:///../src/core/ast/animation/logical/impl/RefAnimation.ts","webpack:///../src/parser/BaseSpecParser.ts","webpack:///../src/core/ast/target/TargetType.ts","webpack:///../src/core/ast/template/BaseTemplate.ts","webpack:///../src/core/ast/template/CompositeTemplate.ts","webpack:///../src/core/ast/template/JsonCompositeTemplate.ts","webpack:///../src/core/ast/animation/logical/AryAnimation.ts","webpack:///../node_modules/lodash/_baseRest.js","webpack:///../node_modules/lodash/_baseProperty.js","webpack:///../node_modules/lodash/isArrayLikeObject.js","webpack:///../node_modules/lodash/unzip.js","webpack:///../node_modules/lodash/zip.js","webpack:///../src/core/ast/animation/logical/impl/SyncAnimation.ts","webpack:///../node_modules/lodash/isBoolean.js","webpack:///../node_modules/lodash/_baseSet.js","webpack:///../node_modules/lodash/_basePickBy.js","webpack:///../node_modules/lodash/_baseHasIn.js","webpack:///../node_modules/lodash/_hasPath.js","webpack:///../node_modules/lodash/hasIn.js","webpack:///../node_modules/lodash/_basePick.js","webpack:///../node_modules/lodash/pick.js","webpack:///../src/parser/json/target/TargetTypeSpec.ts","webpack:///../src/core/ast/animation/logical/impl/ConcatAnimation.ts","webpack:///../src/core/ast/target/Binder.ts","webpack:///../src/parser/json/target/BinderSpec.ts","webpack:///../src/core/ast/target/trans/AtTransform.ts","webpack:///../src/core/ast/target/trans/GroupTransform.ts","webpack:///../src/core/ast/animation/logical/UnaryAnimation.ts","webpack:///../src/core/ast/animation/logical/impl/ForeachAnimation.ts","webpack:///../src/parser/json/JsonSpecParser.ts","webpack:///../src/core/exec/resolve/ResolveRule.ts","webpack:///../src/core/ast/animation/logical/utils/LogicalAnimationUtils.ts","webpack:///../src/core/exec/resolve/rules/ResolveRef.ts","webpack:///../src/core/exec/resolve/ResolveContext.ts","webpack:///../src/core/ast/target/TargetSelection.ts","webpack:///../src/core/exec/resolve/rules/ResolveTarget.ts","webpack:///../src/core/exec/resolve/rules/ResolveTiming.ts","webpack:///../src/core/exec/resolve/rules/ResolveForeach.ts","webpack:///../src/core/exec/resolve/Resolver.ts","webpack:///../node_modules/@babel/runtime/helpers/esm/superPropBase.js","webpack:///../node_modules/@babel/runtime/helpers/esm/get.js","webpack:///../src/core/exec/synthesis/SynthesisContext.ts","webpack:///../src/core/exec/synthesis/Synthesizer.ts","webpack:///../src/core/exec/synthesis/SynthesisRule.ts","webpack:///../src/core/exec/synthesis/rules/MappingRule.ts","webpack:///../src/core/ast/animation/physical/PhysicalAnimation.ts","webpack:///../src/preset/gsap/GsapPhysicalAnimation.ts","webpack:///../src/preset/gsap/impl/common/SyncImpl.ts","webpack:///../src/preset/gsap/impl/common/ConcatImpl.ts","webpack:///../src/preset/gsap/impl/svg/common/CustomImpl.ts","webpack:///../src/preset/gsap/impl/svg/common/EmptyImpl.ts","webpack:///../src/preset/gsap/impl/svg/common/FadeImpl.ts","webpack:///../src/core/utils/SvgUtils.ts","webpack:///../src/preset/gsap/impl/svg/common/WipeImpl.ts","webpack:///../src/preset/gsap/impl/svg/common/MoveImpl.ts","webpack:///../src/preset/gsap/impl/svg/common/ZoomImpl.ts","webpack:///../node_modules/gsap/utils/paths.js","webpack:///../node_modules/gsap/CustomEase.js","webpack:///../src/preset/gsap/impl/svg/text/TypeImpl.ts","webpack:///../src/preset/gsap/impl/svg/common/CutImpl.ts","webpack:///../src/preset/gsap/impl/svg/common/GrowImpl.ts","webpack:///../src/preset/gsap/impl/svg/common/ChangeColorImpl.ts","webpack:///../src/preset/gsap/impl/svg/path/DisplayPathImpl.ts","webpack:///../src/core/ast/target/TypeModelTree.ts","webpack:///../src/core/utils/DomUtils.ts","webpack:///../src/core/ast/target/TargetModel.ts","webpack:///../src/core/ast/target/impl/svg/BaseSVGTargetModel.ts","webpack:///../src/preset/gsap/impl/svg/annotation/CircleImpl.ts","webpack:///../src/preset/gsap/impl/svg/common/WheelImpl.ts","webpack:///../src/preset/gsap/impl/svg/path/PathDrawImpl.ts","webpack:///../src/preset/gsap/impl/svg/common/SectorWheelImpl.ts","webpack:///../src/preset/gsap/impl/svg/common/FloatImpl.ts","webpack:///../src/preset/gsap/impl/svg/common/FlyImpl.ts","webpack:///../src/preset/gsap/impl/svg/common/HighlightImpl.ts","webpack:///../src/preset/gsap/impl/svg/text/DynamicNumberImpl.ts","webpack:///../src/preset/gsap/impl/svg/common/SetImpl.ts","webpack:///../src/preset/gsap/impl/svg/path/LineFlowImpl.ts","webpack:///../src/preset/gsap/impl/svg/camera/CameraImpl.ts","webpack:///../src/preset/gsap/GsapSynthesizer.ts","webpack:///../src/core/library/TypeLibrary.ts","webpack:///../src/preset/target/index.ts","webpack:///../src/core/ast/animation/logical/impl/EffectAnimation.ts","webpack:///../src/core/ast/template/EffectTemplate.ts","webpack:///../src/preset/template/common/CustomTemplate.ts","webpack:///../src/preset/template/common/FadeTemplate.ts","webpack:///../src/preset/template/common/WipeTemplate.ts","webpack:///../src/preset/template/common/MoveTemplate.ts","webpack:///../src/preset/template/common/ZoomTemplate.ts","webpack:///../src/preset/template/text/TypeTemplate.ts","webpack:///../src/preset/template/common/CutTemplate.ts","webpack:///../src/preset/template/common/CutInTemplate.ts","webpack:///../src/preset/template/common/CutOutTemplate.ts","webpack:///../src/preset/template/common/GrowTemplate.ts","webpack:///../src/preset/template/common/ChangeColorTemplate.ts","webpack:///../src/preset/template/common/MoveFromTemplate.ts","webpack:///../src/preset/template/common/MoveToTemplate.ts","webpack:///../src/preset/template/common/WheelTemplate.ts","webpack:///../src/preset/template/bar-chart/BarLabelEnterTemplate.ts","webpack:///../src/preset/template/path/DisplayPathTemplate.ts","webpack:///../src/preset/template/path/PathDrawTemplate.ts","webpack:///../src/preset/template/annotation/CircleTemplate.ts","webpack:///../src/preset/template/common/WipeInTemplate.ts","webpack:///../src/preset/template/common/WipeOutTemplate.ts","webpack:///../src/preset/template/common/ZoomInTemplate.ts","webpack:///../src/preset/template/common/ZoomOutTemplate.ts","webpack:///../src/preset/template/common/EmptyTemplate.ts","webpack:///../src/preset/template/pie-chart/SectorWheelTemplate.ts","webpack:///../src/preset/template/common/FloatTemplate.ts","webpack:///../src/preset/template/common/FlyTemplate.ts","webpack:///../src/preset/template/common/HighlightTemplate.ts","webpack:///../src/preset/template/text/DynamicNumberTemplate.ts","webpack:///../src/preset/template/common/SetTemplate.ts","webpack:///../src/preset/template/path/LineFlowTemplate.ts","webpack:///../src/preset/template/camera/CameraTemplate.ts","webpack:///../src/preset/template/index.ts","webpack:///../src/core/ast/target/impl/svg/BSVGTargetModel.ts","webpack:///../src/core/ast/target/impl/svg/SSVGTargetModel.ts","webpack:///../src/session/GaiaSession.ts","webpack:///./src/core/entities/spec/template/NativeTemplate.js","webpack:///./src/core/build-in/templates/pie-chart/SectorWheelTemplate.js","webpack:///./src/views/webpage/ExampleView.vue?cc99","webpack:///./src/core/entities/spec/Target.js","webpack:///./src/components/editor/AsidePanel/DebugPanel.vue?6aaf","webpack:///./src/views/webpage/HomepageView.vue?a9d0","webpack:///./src/core/utils/uuid.js","webpack:///./src/utils/common/uuid.js","webpack:///./src/components/webpage/common/PageFooter.vue?67a3","webpack:///./src/core/entities/spec/transform/SortTransform.js","webpack:///./src/components/editor/ControlPanel/ContrlPanel.vue?06b2","webpack:///./src/core/entities/spec/parameter/ParamDefinition.js","webpack:///./src/core/const/Element.js","webpack:///./src/core/entities/spec/parameter/ParamType.js","webpack:///./src/components/editor/ProjSelPanel/ProjSelectionPanel.vue?d01d","webpack:///./src/core/entities/spec/BaseTransform.js","webpack:///./src/components/webpage/common/PageHeader.vue?bb51","webpack:///./src/core/entities/spec/BaseAnimation.js","webpack:///./src/components/editor/ControlPanel/TimelinePanel.vue?ee8e"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","Timing","constructor","_defineProperty","timing","start","offset","duration","yoyo","undefined","json","num","parseFloat","isNaN","assign","getDefaultYoyo","repeat","delay","keys","getComputedTiming","computedTiming","getDefaultTiming","this","forEach","startPlusOffset","_this$start","_this$offset","NativeAnimation","BaseAnimation","settings","super","type","setTarget","target","updateTarget","setTiming","updateTiming","getDefaultSettings","updateSettings","set","computePossibleElements","context","glyphs","getGlyphs","Set","computeDuration","_this$timing","animation","repeatDelay","clear","kill","BaseTemplate","templateName","computeUUID","parameters","clone","obj","instantiate","toCheck","defaultSettings","isValid","console","warn","createAnimation","paramName","defaultValue","parseSettingsJSON","paramType","ParamType","NUMBER","STRING","getParamValue","getParamValues","paramNames","Array","isArray","ret","every","required","FilterTransform","BaseTransform","expr","execute","selection","replaceAll","nodes","keepArray","map","__node__","__index__","eval","filter","render","_vm","_c","_self","attrs","staticRenderFns","component","staticClass","lasso","targetArea","items","d3","closePathDistance","closePathSelect","isPathClosed","hoverSelect","on","draw","end","_this","tpath","origin","torigin","drawnCoords","g","append","attr","dyn_path","close_path","origin_node","dragAction","dragstart","dragmove","dragend","event","e","__lasso","possible","selected","loopSelect","box","getBoundingClientRect","lassoPoint","Math","round","left","width","top","height","x","y","sourceEvent","touches","clientX","clientY","tx","ty","distance","sqrt","pow","close_draw_path","classifyPoint","_","arguments","possibleItems","selectedItems","notPossibleItems","notSelectedItems","types","indexOf","components","methods","initLasso","fill","random","w","h","svg","$el","select","circles","selectAll","enter","d3Lasso","lassoStart","classed","lassoDraw","lassoEnd","mounted","computed","$event","keyCode","altKey","clickLeftCollapseButton","style","headerHeight","staticStyle","clickHeaderText","_v","openProjSelPanel","saveSpec","showCode","ref","audioSrc","directives","rawName","isExportingFiles","expression","asideWidth","debugPanelHeight","asideWidthCache","svgHeight","clearSelection","aniStatus","visibility","footerHeight","controlPanelWidth","bottom","bottomResizerMousedown","projSelPanelVisible","closeProjSelPanel","runIcon","switchRunningState","_s","running","stopAndSeekToZero","audioCompiling","timelineMode","tlContainerWidth","showTimeline","emptyHeight","compile","handleAniChange","timelineWidth","marks","disabled","formatTooltip","changeTime","model","time","callback","$$v","handleTimeChange","panelHeight","wheelHandler","onmousewheel","class","cursorInRange","cursorLeft","documentScrollLeft","moveTimeCursor","getTimeString","cursor","updateDocumentScrollLeft","mousedownTimeline","mouseupTimeline","mousemoveTimeline","_l","rowMapList","rowMap","rowIdx","rowHeight","ItemType","HIDDEN","vItem","itemIdx","uuid","rectHeight","startX","background","getColor","getVItemTitle","getDurationString","clickVItem","color","getAnimationIcon","SHOWN","mouseenter","mouseleave","mousedown","dragButtonWidth","clipPath","isFadeColor","originItem","dragEdge","right","mouseOn","movingVItem","marginTop","newItem","use","_e","visRows","FontAwesomeIcon","props","tipHeight","inMoving","shownVisRows","hiddenVisRows","iconLeft","faFlag","moveTimeline","moveTimelineX","moveTimelineY","$store","commit","deltaY","$notify","title","document","getElementById","onmousemove","max","min","onmouseup","$emit","stopPropagation","element","disX","offsetLeft","disY","findIndex","row","includes","changeIconLeft","moveCnt","timelineScale","invert","castedLeft","rowCnt","timelineRows","rowOffset","floor","curRow","moveVItemBetweenRow","itemId","id","extend","item","deleteVItem","itemForSettings","highlightItem","ifOverlap","overlapItems","overlapVisRows","flatIcons","init","clicked","flat","direction","log","endX","castedDuration","oldRowIdx","newRowIdx","oldRow","newRow","compress","dragover","preventDefault","drop","tlRow","dataTransfer","getData","querySelector","computeVisRows","_item$timing$offset","computedTotalDuration","visItem","faStar","initialRefSrc","storeVItemTitle","vItemTitle","toFixed","updateCursorPositionByTime","index","scrollLeft","changeLeft","changeTop","timelineScroller","timerowScroller","scrollTop","getCoverItems","visRow","hasHighlightItem","watch","timelineRenderSign","newV","mapState","sceneEl","state","durationMap","animationStyle","useToAniMap","Map","shown","hidden","click","inEditMode","textPanelText","audioRunning","showToolbox","timeStampTop","timeStampLeft","timeStamp","words","wordObj","wordIdx","refInFor","wordIdxIcons","iconObj","iconIdx","clickIcon","mouseenterIcon","mouseleaveIcon","animationTypeToColor","animationTypeToIcon","keywordIcons","keywordIconStyle","icon","highlightWordIndex","inSelectedRange","audioWordIndex","isLinkedWord","word","selectedStart","selectedEnd","linkedStart","linkedEnd","SelectionToolType","NORMAL","RECT","LASSO","CLICK","COMP","textChanged","isSelecting","textPanelWords","isTargetButtonClicked","animationButtonsTop","animationButtonsLeft","animationTargets","justHoveredIcon","animationActions","isPreviewingIcon","isEditingIcon","iconHasChanged","isEditingText","textHasChanged","changeHighlightItemInTextPanel","isCreatingItem","handleSelect","keyPath","shortNotify","msg","inRange","bound1","bound2","_ref","_this$useToAniMap$ico","ani_type","_ref2","_this$useToAniMap$ico2","$refs","textPanel","keyup","leave","out","save","$confirm","confirmButtonText","cancelButtonText","distinguishCancelAndClose","then","catch","action","changeTextContent","innerText","split","idx","handleKeyDelete","textpanel","aniIcons","getElementsByClassName","aniIconIds","from","wordIconIdx","startIdx","thisId","find","keyIcons","wordTargetIconPos","keyIconIds","work","transcriptSrc","clickTargetButton","editingEle","startTime","computeTopLeft","createNewItem","minWordIdx","maxWordIdx","endTime","beforeState","$nextTick","aniName","aniType","commitSelectedChange","selectedTargets","tempAnimationName","computeAniTarget","toFitDuration","aniSettings","targets","selectionTool","hovered","fromOther","endIdx","mouseenterIconHandler","aniPlaying","mouseleaveIconHandler","timeStampOffset","textpanelPosition","wordPosition","wordToEndTime","wordToStartTime","startTimeToWord","parseInt","endTimeToWord","updateIconTiming","createAnimationAction","createAniActionsBytimelineRows","_timing$duration","_timing$start","_timing$offset","initAniActions","sequence","_ref3","_items$sequence$sync","_items$sequence","_items$sequence2","sync","concat","newIcon","renewAniIconByItem","aniIcon","handleOutsideResize","windowWidth","leftPanelWidth","targetPanelWidth","tableSelectionChangeSign","projectId","clearTextHighlightSign","itemUpdateTuple","act","newVal","oldVal","clickIconSignal","animationName","currentMode","mapGetters","_this$itemForSettings","_this$itemForSettings2","editor","TimelinePanel","TextPanel","animationRate","needAudio","needCompile","audioReadyCallback","audioNotification","updateAudioNotificationTimeout","showAnimationPane","notification","onUpdateFunc","timeline","progress","bigCallback","compileSuccess","getAudio","handleTextChange","audioReady","useAudio","audioEl","currentTime","changeEditMode","resetScene","loadExample","deleteAniItem","stopLeave","nodeName","parentNode","blur","getWordLinking","dispatch","getNLPResult","transcript","restart","changeTimelineDisplay","updateTimelineMarks","tickFactor","tickNum","ticks","tickFormat","timeTicks","pause","resume","play","val","changeRate","rate","timeScale","playbackRate","exception","error","changeTimelineMode","recomputeHeight","optionEl","clientHeight","controllerInitSign","audioDuration","clearTimeout","setTimeout","aniChangeSign","nlpLoading","nlpLinking","refresh","showPotential","linkButtonIcon","nlpButtonIcon","linked","editModeDisabled","showAniItemButton","scene","loadSVG","innerHTML","svgStr","_gsap","removeAttribute","svgRenderSign","_state$scene$svgStr","_state$scene","querySelectorAll","el","remove","aniSvgRenderSign","activePaneName","changeTab","paneHeight","slot","animationText","cmOptions","animationTextChange","isSpecTextValid","specTextErrorMsg","templateText","templateTextChange","binderText","readOnly","virtualModelText","cmHTMLOptions","getFormattedXmlString","getFormattedXmlStringHelper","indent","indentation","attributes","replace","join","openTag","tagName","toLowerCase","closeTag","innerContent","childNodes","node","Element","textContent","str","trim","codemirror","templateContentDialogVisible","tabSize","theme","lineNumbers","lineWrapping","matchBrackets","gutters","foldGutter","line","codeUpdateTimeoutId","htmlMode","styleActiveLine","autoCloseTags","resourceText","isHardChangeResource","isHardChangeTemplate","isHardChangeAnimation","updateMark","emptyAnimation","currentChange","currentPage","tabObj","_this$$refs$resourceT","_this$$refs$templateT","_this$$refs$animation","_this$$refs$binderTex","_this$$refs$virtualMo","resourceTextEditor","templateTextEditor","animationTextEditor","binderTextEditor","virtualModelTextEditor","resourceTextChange","codeEditor","JSON5","parse","getValue","errorMsg","message","clickFilter","relatedTargets","fullTargetList","enableFilterChange","enableFilter","resourceJSONRenderSign","templateJSONRenderSign","newStr","stringify","templateJSON","setValue","animationJSONRenderSign","animationJSON","binderJSON","targetModel","vm","virtualModel","lines","children","child","cm","doc","size","lineText","getLine","toFold","foldCode","resourceJSON","activeFilters","filterTable","filters","numFilterPerRow","paneWidth","handleFile","uploadFile","fileFilter","projectGroups","projGroup","projects","project","padding","nativeOn","handleProjectClick","label","customCharts","created","staticSvgMap","innerSvg","getAttribute","setAttribute","staticSvgMapSign","SvgPreviewer","param","svgUrl","URL","createObjectURL","file","axios","rep","srcId","$message","res","isSVG","resource","projectList","groups","groupName2idx","groupName","group","has","order","sort","a","b","svgStringArrayToMP4","svgStringArray","audioBuffer","framerate","bufferList","svgToPngBuffer","pngListToMP4","canvas","createElement","ctx","getContext","canvg","Canvg","fromString","pngDataUrl","toDataURL","stop","dataUriToBuffer","pngList","_result$MEMFS$0$data","_result$MEMFS$","fileSys","png","Uint8Array","wavArray","getWavArray","stdout","stderr","exitCode","ffmpeg","MEMFS","print","printErr","onExit","code","sample","numOfChan","numberOfChannels","buffer","ArrayBuffer","view","DataView","channels","pos","setUint16","setUint32","sampleRate","getChannelData","setInt16","download","buff","filename","url","Blob","link","display","href","body","appendChild","removeChild","ChartShotAnimation","TransformParser","fromJSON","SortTransform","resultArray","TargetParser","Target","getDefaultTarget","NormalTarget","transform","fromObjectOrArray","SyncAnimation","ani","_ani$timing$start","_ani$timing$offset","subDuration","deriveBy","subSet","deriveByWithoutTransform","add","_this$timing2","tl","gsap","subTl","ConcatAnimation","_ani$timing$offset2","GroupAnimation","TemplateUsage","useTemplate","_ani$computeDuration","instantiateUsingTemplate","template","getTemplate","AnimationParser","reviver","createSequenceAnimation","createTemplateUsage","_json$timing","subObj","grouping","_json$timing2","_json$settings","traversalObject","func","traversalObjectRecursively","terminate","deepCopy","copy","JsonUtils","EmptyAnimation","JsonTemplate","JSON","current","parent","match","substr","ParamDefinitionParser","ParamDefinition","TemplateParser","ChartShotAnimationParser","templates","Parser","Context","renderContext","parentSelection","parentTarget","fakeRender","derive","getSelection","_this$parentTarget$se","_this$parentTarget","selector","getSelectionWithoutTransform","cloneNode","getExclusiveGlyphs","rootSel","getBBoxPosition","glyph","_root_sel$select$node","_glyph$_original$CTM","_glyph$_original","root_sel","svg_sel","root_point","createSVGPoint","glyph_ctm","_original","CTM","getCTM","glyph_point","matrixTransform","glyph_bbox","getBBox","getGlyphsWithoutTransform","templateLib","getRootSel","getDefsSel","getRootSvg","RenderContext","defsSel","globalSelection","createRootContext","clean","empty","MASK_CLASS","ANNOTATION_CLASS","BaseTargetModel","SimpleTargetModel","trans","Generator","animationSpec","generate","rootContext","TemplateLibrary","buildInTemplateMap","templateMap","registerBuildInTemplate","registerBuildInTemplates","registerTemplate","registerTemplates","_this$templateMap$get","getAllBuildInTemplates","values","getAllCustomTemplate","reset","PreviewerType","CUSTOM","TITLE","BLANK","GENERAL","HIGHLIGHT","MOVE","PATH","TEXT","CAMERA","ANNOTATION_ARROW","BAR_CHART","BAR_CHART_WITH_LEGEND","CIRCLE_CHART","CIRCLE_CHART_WITH_LEGEND","PIE_CHART","PIE_WITH_LEGEND","LINE_CHART","LINE_CHART_WITH_LEGEND","CHART_FRAMEWORK","AnimationType","ENTER","EXIT","ANNOTATION","OTHER","PreviewWrapper","previewerType","animationType","templateLabels","templateSettings","staticProgress","previewSettings","getTemplateName","getTemplateType","getTemplateParameters","createPreviewAnimation","PreviewerManager","previewWrapperMap","previewerMap","registerPreviewWrapper","wrapper","registerPreviewer","previewer","createDefaultPreviewer","getDefaultWrapper","_this$previewWrapperM","FadeInTemplate","NativeTemplate","fadeType","Direction","TOP","BOTTOM","LEFT","RIGHT","CENTER","UNKNOWN","AUTO","GrowTemplate","GrowAnimation","ease","stagger","tw","createTwForOneGlyph","position","bbox","attrName","transFactorX","transFactorY","transformOrigin","fromVars","MoveToTemplate","ANY","OBJECT","toVars","MoveFromTemplate","FloatTemplate","FloatAnimation","enterOrExit","factor","vars","opacity","to","BasicZoomTemplate","BasicZoomAnimation","scale","ZoomTemplate","fade","zoom","WipeTemplate","WipeAnimation","defs","mask","addMaskRectToGlyph","createTwForMask","_glyph$getAttribute","maskId","wipeRectSel","strokeWidth","each","_this$getAttribute","tempWidth","newMaskRect","offsetFactorX","offsetFactorY","_yoyo$delay","_yoyo$repeat","ORIGINAL_DATA_STORE_PREFIX","ORIGINAL_FILL_ALIAS","ChangeColorTemplate","ChangeColorAnimation","yoyoVars","originalColorAttrName","curFill","ShowPathTemplate","BOOLEAN","ShowPathAnimation","displayTime","reverseDirection","len","getTotalLength","fromTo","strokeDashoffset","removeItem","array","getLastItem","subArray","step","intersect","array1","array2","ArrayUtils","HighlightTemplate","HighlightAnimation","selectGlyphs","selectType","classList","CameraZoomTemplate","CameraMoveAnimation","scaleFactor","zoomEase","fadeEase","FadeOutTemplate","TitleTemplate","titleFadeIn","ChartWithoutMarkFloatInTemplate","xAxisSymbolFadeIn","xAxisGrow","yAxisGrow","labelFadeIn","tickFadeIn","BarChartEnterTemplate","chartFadeIn","barGrow","barLabelFadeIn","BarChartWithLegendEnterTemplate","legendFadeIn","CircleChartWithLegendEnterTemplate","circleFadeIn","circleLabelFadeIn","LineChartEnterTemplate","lineWipe","LineChartbyLegendTemplate","LineChartbyOrderTemplate","PieChartEnterTemplate","sectorWheel","drawPath","labelFloat","BarEnterTemplate","growBar","BarWithLegendEnterTemplate","BarSymbolLabelEnterTemplate","symbolZoomEnter","axisLabelFadeIn","CircleEnterTemplate","CircleWithLegendEnterTemplate","CircleChartEnterTemplate","getPosition","rootPoint","ctm","elPoint","getSvgBox","GrowBarTemplate","GrowBarAnimation","inferDirection","bars","xAxisElements","inferDirectionByBarsAndAxis","inferDirectionByBars","barArray","barBoxes","SvgUtils","x0List","x1List","y0List","y1List","varianceList","lst","getVariance","minVal","xElArray","xElBoxes","sumX","reduce","sumY","avgX","avgY","lst1","getMSE","lst2","sum","avg","LineEnterTemplate","LinebyLegendTemplate","LinebyOrderTemplate","LineHighlightTemplate","PieWithLegendEnterTemplate","legendFlyIn","ShowAnnoZoomTemplate","zoomEnter","zoomExit","ShowArrowLabelAnnoTemplate","arrowFloatEnter","fadeOut","CircleTemplate","CircleAnimation","circle","el_sel","DynamicNumberTemplate","DynamicNumberAnimation","formatter","newFormatter","computedStart","computedEnd","tempNumObj","tempNum","onUpdate","text","ZoomInThenZoomOutTemplate","zoomIn","zoomOut","CustomEffectTemplate","STRING_OR_ARRAY","CustomEffectAnimation","attrArray","fromArray","toArray","merge","k","FadeTemplate","FadeAnimation","BarSymbolLabelBounceTemplate","barBonce","barLabelBource","BarChartWithAxisLabelEnterTemplate","MoveTemplate","MoveAnimation","WheelTemplate","WheelAnimation","grouped","clip","addClipPathToEntirety","createTwForClipEntirety","addClipPathToGlyph","createTwForClip","clipId","CLIP_PATH_CLASS","wheelPathSel","newClipPath","_glyph$getAttribute2","startAngle","sweepAngle","arc","finalSweepAngle","_this$getAttribute2","cx","cy","rx","ry","updatePath","path","getArcPath","_glyphs$getAttribute","_this$getAttribute3","isClosed","largeArc","a1","PI","a2","x1","sin","y1","cos","x2","y2","DrawPathTemplate","DrawPathAnimation","HighlightSectorTemplate","annoLabelDynamicNumber","ArcWheelWithLegendTemplate","arcWheel","centerSelector","endAngle","ShowDynamicNumberTemplate","fadeIn","dynamicNumber","params","ShowAnnoAutoEffectTemplate","ShowAnnoAutoEffectAnimation","CameraMoveTemplate","translateX","translateY","SimpleSectorWheelTemplate","SingleSectorWheelAnimation","args","centerObjs","Infinity","startDegree","endDegree","FlyInTemplate","rootBBox","HideTemplate","HideAnimation","EmptyTemplate","buildInTemplates","ZoomEnterTemplate","ZoomExitTemplate","BasicZoomEnterTemplate","BasicZoomExitTemplate","FadeInThenFadeOutTemplate","ChartWithoutMarkFadeInTemplate","SectorWheelTemplate","ShowNumber","fadeWrapper","basicZoomEnterWrapper","basicZoomExitWrapper","basicZoomWrapper","changeColorWrapper","customEffectWrapper","fadeInWrapper","fadeOutWrapper","floatWrapper","flyinWrapper","growWrapper","moveWrapper","moveFromWrapper","moveToWrapper","wipeWrapper","zoomEnterWrapper","zoomExitWrapper","zoomWrapper","showAnnoZoomWrapper","showArrowLabelAnnoWrapper","cameraZoomWrapper","cameraMoveWrapper","barChartEnterWrapper","barSymbolLabelEnterWrapper","barSymbolLabelBounceWrapper","barEnterWrapper","barChartWithLegendEnterWrapper","barWithLegendEnterWrapper","ChartWithoutMarkFadeIn2Template","chartWithoutMarkFadeInWrapper","chartWithoutMarkFloatInWrapper","fadeInThenFadeOutWrapper","circleWrapper","showPathWrapper","highlightWrapper","CircleChartEnterWrapper","CircleEnterWrapper","CircleChartWithLegendEnterWrapper","CircleWithLegendEnterWrapper","PieChartEnterWrapper","PieWithLegendEnterWrapper","SectorHighlightWrapper","TitleWrapper","ShowDynamicNumberWrapper","LineChartbyLegendEnterWrapper","LinebyLegendEnterWrapper","LineChartbyOrderEnterWrapper","LinebyOrderEnterWrapper","LineChartEnterWrapper","LineEnterWrapper","LineHighlightWrapper","buildInWrappers","BasePreviewer","previewWrapper","previewerContext","getCanvasSize","getDuration","BlankPreviewer","GeneralPreviewer","barWidth","barGap","barHeightList","graphWidth","numTexts","chartGrp","barGrp","MovePreviewer","radius","AnnotationArrowPreviewer","annoGrp","bar1TopX","bar2TopY","CameraPreviewer","ChartLayout","topRatio","bottomRatio","leftRatio","rightRatio","initLayout","chartHeight","chartWidth","BarChartPreviewer","yLabels","layout","barWidthRatio","barHeightRatio","xScale","domain","range","yScale","axisGrp","xAxisGrp","bandwidth","yAxisGrp","markGrp","titleGrp","BarChartWithLegendPreviewer","data0","markGrp1","markGrp2","legendGrp","ChartFrameworkPreviewer","CirclePreviewer","scatterdata","xLabels","CircleWithLegendPreviewer","scatterdata1","scatterdata2","tamarkGrp","tbmarkGrp","ArcPreviewer","dataset","outerRadius","innerRadius","piedata","colorlist","padAngle","arcs","arcslabel","centroid","ArcWithLegendPreviewer","TextPreviewer","annotationGrp","TitlePreviewer","LinePreviewer","labelGrp","scatterGrp","lineGrp","LineWithLegendPreviewer","data1","data2","scatter1Grp","scatter2Grp","line1Grp","line2Grp","PathPreviewer","HighlightPreviewer","buildInPreviewers","ObjectUtils","UserException","Compiler","parser","previewerManager","elementOrSelector","variable","createReplacedAnimationJSON","generator","resultTimeline","autoRemoveChildren","originalRoot","retJSON","ComponentType","MARK","CHART","BaseFilter","hardElement","softElement","componentType","effectList","getName","getHardElement","getSoftElement","getComponentType","getAnimationType","getEffectList","ele","clist","some","hasLabel","cl","isWanted","elementList","elements","elem","elArr","shouldAppear","isMeetOr","barWithAxisLabelFilter","barWithLegendFilter","lineFilter","linesByLegendFilter","linesByOrderFilter","scatterChartFilter","scatterFilter","scatterWithLegendFilter","barFilter","barBounceFilter","pieFilter","pieWithLegendFilter","sectorHighlightFilter","lineHighlightFilter","fadeInFilter","growFilter","floatFilter","zoomEnterFilter","changeColorFilter","showPathFilter","highLightFilter","cameraZoomFilter","cameraMoveFilter","moveToFilter","moveFromFilter","zoomExitFilter","fadeOutFilter","flyinFilter","showAnnotationZoomFilter","showArrowLabelAnnotationFilter","fadeInFadeOutFilter","dynamicNumFilter","titleFilter","axisFloatInFilter","axisFadeInFilter","barChartFilter","barChartWithLegendFilter","scatterChartWithLegendFilter","lineChartFilter","lineChartByLegendFilter","lineChartByOrderFilter","buildInFilters","compiler","getPreviewerManager","resetTemplateLib","getTemplateClass","getTemplateInfoList","isBuildIn","aniChart","totalTime","curTime","svgList","exportVideo","collectFrames","chart","startCollect","totalDuration","collectCurrentFrame","moveToNext","convertFramesToVideo","maxWidth","maxHeight","wFactor","hFactor","generateAndDownload","mp4","ExportUtils","exportSign","ExportSVGContainer","DebugPanel","SVGContainer","ControlPanel","AniSVGContainer","ProjSelectionPanel","asideWidthArray","asideWidthScale","activeSidePanel","footerRatio","targetDisabled","_this$$route$query$ex","$route","query","initAsideWidthScale","setupLeftResizer","setupLeftMiddleResizer","mainContainer","lastCall","Date","now","onresize","windowHeight","$router","exportClick","isRenewedOption","renewedOptions","disableTargetButton","enableTargetButton","getTTSResult","that","resize","inEl","moving","onmouseenter","onmouseleave","onmousedown","curX","rect","topPercentage","lastUpdate","nowY","nowRatio","changeDebugPanelStatus","changeRightPanel","undo","redo","exitEditor","examples","sampleFileOptions","optionGroups","groupMap","options","newOptions","clickHome","clickGallery","clickLaunch","PageFooter","PageHeader","clickBack","chartType","galleryInfo","videoName","projectIndex","galleryList","_this$galleryList$fin","info","routes","EditorView","TestView","HomepageView","GalleryView","ExampleView","redirect","VueRouter","baseURL","queryNLPParseResult","payload","errorCallBack","post","queryNLPGenerateResult","generateTranscript","cb","sdk","require","subscriptionKey","serviceRegion","speechConfig","SpeechConfig","fromSubscription","synthesizer","SpeechSynthesizer","startIndices","preTime","wordBoundary","audioOffset","speakerTag","textOffset","speakTextAsync","reason","ResultReason","SynthesizingAudioCompleted","errorDetails","close","audioContext","AudioContext","decodeAudioData","audioData","err","trace","dataURItoBlob","dataURI","mimeString","byteString","atob","arrayBuffer","intArray","charCodeAt","async","blobToAudioBuffer","blob","Promise","resolve","AudioBuffer","audioCtx","computeAudioDuration","copy3Sec","totFrameCount","copyFrameCount","newAudioBuffer","createBuffer","tempArray","Float32Array","channel","copyFromChannel","copyToChannel","extend1Sec","concatAudio","audioBuffers","extendTimes","ab","bufferOffset","srcFrameCount","audioBufferToBlob","abuffer","AudioUtils","updateSVGModel","chartId","DOMParser","parseFromString","domElList","domEl","elId","contains","getElements","newSvgStr","domElToString","tmp","clazz","clazzList","tag","TargetUtils","indicesToString","indices","indicesDictToTargetPos","indices_dict","faLink","TargetPosToindicesDict","iconPos","getUseToAniMap","wrappers","enableDrag","svgEl","aniSceneEl","aniSvgEl","selectionSvgEl","main","animationId2jsonItem","previewAniJSON","timelinePanelEl","textPanelEl","targetPanelEl","textPanelEmpty","mainContainerEl","toolboxEl","submitToolboxEl","staticToolboxEl","oldTimelineScale","tlContainerWidthBuffer","groupedTargetsMap","selectionConfirm","stopConfirm","selectionLeave","hideToolbox","Enter","faSignInAlt","Emphasis","Exit","faSignOutAlt","Annotate","Other","faBars","templateStyle","Chart","faChartLine","Mark","faMapMarkerAlt","Annotation","faTag","settingPanelVisible","exportSvgEl","exportSceneEl","getters","svgPanelInSelecting","actions","dataGroup","target_model","resp","errorResp","Notification","AnimationJSON","mutations","changeAniStatus","status","changeWindowSize","clientWidth","changeLeftPanelWidth","changeHeaderHeight","changeFooterHeight","changeScene","changeSceneById","scenes","changetextPanelText","changeRefresh","mountSceneElement","mountAniSceneElement","mountSvgElement","mountSelectionSvgElement","mountAniSvgElement","mountAudioElement","mountMainContainer","mountTb","tbEl","mountToolbox","mountStaticToolbox","changeTempAnimationSelection","changeItemForSettings","updateItemType","changeItemSettings","setting","changeMode","changeFilterSwitch","initToolboxPos","moveToolbox","faEle","faPos","initLinking","linking","initWorkspace","_this$scene","_state$scene3","_rawTrans$results","_state$scene4","_state$scene5","indice_dict","_state$scene2","_json$charts","_json$templates","_json$binder","_json$animation","spec","charts","binder","DefaultSession","getTargetModel","nullAnimation","rawTrans","results","alternatives","alt","audioStr","audioBlob","newAudioBlob","changeTargetBinder","changeTargetModel","updateAudio","audioPromise","resetEditor","updateChartSize","aniSvg","updateEditorUsingResourcesJSON","updateEditorUsingTemplateJSON","registerOrUpdateTemplates","updateEditorUsingAnimationJSON","logical","resolveJson","jsonItem","substring","emitAniChangeSign","changeSpecTextValidState","mountTimelinePanel","mountTextPanel","mountTargetPanel","compileJson","totDuration","addPause","seek","computeTimelineRows","getStartTime","getEndTime","o1","o2","conflictLists","hasConflict","conflictItemIdx","computeWordIdxTargets","changeSvgRenderSign","changeAniSvgRenderSign","changeExportSign","setIsExportingFiles","addWordTarget","duplicateLink","editWordTarget","deleteWordTarget","changeTlContainerWidth","containerWidth","changeTimelineWidth","updateTimelineScale","updateTimelineScaleByAudio","updateTimelineSvg","axis","axisContainer","updateItemTiming","temp","appendTimelineItem","Error","appendItemByTextView","_state$animationJSON","_state$animationJSON$","updateItemByTextView","deleteItemByIcon","updateItemTimingByIcon","deleteItem","changeSettingPanelVisible","visible","changeClearTextHighlightSign","changeHighlightItem","changeClickIconSignal","updateVisTimeline","maxTime","_item$timing$offset2","_item$timing","updateAniJSONUsingTimelineRows","_state$animationJSON2","_state$animationJSON3","_a$timing$offset","_a$timing","_b$timing$offset","_b$timing","updateItemRow","_item$timing$start","_item$timing2","_item$timing$offset3","_item$timing3","updateItemSettings","newItemInfo","changeItemUpdateTuple","changeAnimationJSONRenderSign","changeNLPLoading","loading","changeNLPLinking","changeSelectionTool","showToolBox","registerSelectionConfirm","clearSelectionConfirm","registerSelectionLeave","clearSelectionLeave","updateElementClasses","stashScene","targetItemKeys","setAudioSrc","setAudioReadyFunc","removeEventListener","addEventListener","setAudioBuffer","changeUseAudio","changeShowPotential","changeAudioReady","isReady","fixScrollPos","commonDomain","newRange","revokeObjectURL","namespaced","queryProjectSpec","fileName","queryStaticSVG","queryTranscript","queryStaticAudio","queryTargetModel","PROJECT_LIST","projectSpec","svgStrMap","audioStrMap","transcriptMap","targetModelMap","extraProjectSpecMap","linkingMap","queryAllSceneData","projSpec","promiseList","svgFileName","audioFileName","audio","all","fakeProjectSpec","root","projectFileName","addProject","no","projectIdSet","newProjectId","unshift","changeProjectId","initResources","changeProjectSpec","addSVGStr","addStaticSVGStr","changeStaticSvgMapSign","addAudioStr","addTranscript","addTargetModel","addLinking","registerAudioEl","getDefaultTargetTree","nodeId","addLeafChildren","childClassesList","classes","TargetTreeNode","mark","legend","xAxis","yAxis","setFullClassesRecursively","toJSON","parentStr","fullClasses","isLeaf","mainClassSet","dataGroupUpdateKeyword","fullTargetLoadSign","dataGroupChangeSign","dataGroupClearSign","svgSelectionChangeSign","visibilityChangeSign","new_counter","dragDropSVG","targetTree","isDragging","initTargetModel","reverse","cls","counters","_counters$get","mainClass","tgt_data","related_targets","keyword","String","updateDataGroup","oldkeyword","changeFullTargetLoadSign","changeSelectedTargets","changeSelectedTargetsById","targetIds","idSet","changeSelectedTargetsByIcon","changeActiveFilters","changeTableSelectionSign","changeDataGroupSign","changeDataGroupKeyword","resetDataGroupKeyword","changeSvgSelectionChangeSign","changeVisibilityChangeSign","changeDragDropSVG","changeCursorPosition","setTargetType","targetIdList","targetNode","setTargetClass","targetClass","changeVisibility","showIdList","hideIdList","showIdSet","hideIdSet","Scene","isInitialized","selectedScene","canvasHeight","canvasWidth","canvasRenderSign","createAudioSrc","audioBlobList","audioBufferList","sceneIndex","initProjectView","sceneSpec","changeSelectedScene","addScene","newScene","createTimeline","onCompleteFunc","eventCallback","alert","createAnimationJSON","sceneSVGList","sceneContainerId","subSync","changeCanvasRenderSign","setSceneAudioDuration","playAnimation","pauseAnimation","restartAnimation","Vue","Vuex","Store","strict","eventBus","config","productionTip","ElementUI","locale","VueCodeMirror","$saveAs","saveAs","App","router","store","$mount","_classCallCheck","instance","Constructor","TypeError","_defineProperties","descriptor","configurable","writable","_createClass","protoProps","staticProps","CompileExec","session","input","_resolved","_planned","_generated","_unresolved","_targetModel","resolver","_resolver","_synthesizer","templateLibrary","plan","resolved","planned","_setPrototypeOf","setPrototypeOf","__proto__","_inherits","subClass","superClass","_typeof","iterator","_assertThisInitialized","self","ReferenceError","_possibleConstructorReturn","_getPrototypeOf","getPrototypeOf","Package","classMap","subPackageMap","packageName","proto","clsName","_a","pkg","pkgName","freeGlobal$1","commonjsGlobal","_freeGlobal","freeGlobal","freeSelf","root$8","Function","_root","root$7","Symbol$6","_Symbol$1","Symbol$5","objectProto$d","hasOwnProperty$a","nativeObjectToString$1","toString","symToStringTag$1","getRawTag$1","isOwn","unmasked","_getRawTag","objectProto$c","nativeObjectToString","objectToString$1","_objectToString","Symbol$4","getRawTag","objectToString","nullTag","undefinedTag","symToStringTag","baseGetTag$9","_baseGetTag","isArray$9","isArray_1","isObjectLike$b","isObjectLike_1","baseGetTag$8","isArray$8","isObjectLike$a","stringTag$3","isString","isString_1","ProtoManager","rootPackage","createDefaultPackage","_protoSize","_step","pathArr","isString$1","splitPath","curPkg","_iterator","_createForOfIteratorHelper$d","done","subPkg","querySubPackage","createPackage","addSubPackage","f","protoName","queryPackage","queryProto","fullName","registerProto","unregisterProto","queryProtoByFullName","success","pop","suffix","candidates","findProto","endsWith","candidateInDefaultPkg","queryAllProto","queryAllProtoHelper","querySubPackages","dfs","valid","Library","protoManager","protoSize","_this2","registerOrUpdateProto","queryProtoByPackage","_Library","_super","_createSuper$1t","LogLevel","_defineProperty$1","_arrayLikeToArray$d","arr","arr2","_arrayWithoutHoles","_iterableToArray","iter","_unsupportedIterableToArray$d","minLen","test","_nonIterableSpread","_toConsumableArray","toTreeString","toTreeStringHelper","prefix","isLast","isRoot","oneLineString","toOneLineString","visitChildren","isLastChild","childPrefix","childLines","Logger","logManager","caller","manager","_len","_key","TRACE","_len2","_key2","DEBUG","_len3","_key3","INFO","_len4","_key4","WARN","_len5","_key5","ERROR","level","_len6","_key6","it","before","after","rule","ruleName","debug","LoggerManagerClass","logLevel","_records","record","timestamp","logLevel2Rank","logLevel2Method","log2Str","toLocaleString","_LoggerManagerClass$l","_LoggerManagerClass$l2","LoggerManager","util","objectUtil","_arrayWithHoles","_iterableToArrayLimit","_i","_arr","_n","_d","next","_nonIterableRest","_slicedToArray","assertIs","_arg","assertNever","_x","joinValues","separator","assertEqual","arrayToEnum","getValidEnumValues","validKeys","objectKeys","filtered","objectValues","checker","isInteger","Number","isFinite","jsonStringifyReplacer","mergeShapes","first","second","ZodParsedType","getParsedType","string","nan","number","boolean","function","bigint","symbol","null","promise","date","unknown","ZodIssueCode","quotelessJson","ZodError","issues","addIssue","sub","addIssues","subs","actualProto","format","_mapper","mapper","issue","fieldErrors","_errors","processError","unionErrors","returnTypeError","argumentsError","curr","terminal","flatten","formErrors","errorMap","_ctx","invalid_type","received","expected","invalid_literal","unrecognized_keys","invalid_union","invalid_union_discriminator","invalid_enum_value","invalid_arguments","invalid_return_type","invalid_date","invalid_string","validation","startsWith","too_small","exact","inclusive","minimum","too_big","maximum","custom","invalid_intersection_types","not_multiple_of","multipleOf","not_finite","defaultError","overrideErrorMap","setErrorMap","getErrorMap","makeIssue","errorMaps","issueData","fullPath","fullIssue","errorMessage","maps","EMPTY_PATH","addIssueToContext","common","contextualErrorMap","schemaErrorMap","ParseStatus","dirty","abort","arrayValue","INVALID","pairs","syncPairs","pair","mergeObjectSync","finalObject","alwaysSet","freeze","DIRTY","OK","isAborted","isDirty","isAsync","errorUtil","errToObj","ParseInputLazyPath","_cachedPath","_path","handleResult","_error","processCreateParams","invalid_type_error","required_error","description","customMap","iss","ZodType","def","spa","safeParseAsync","_def","safeParse","parseAsync","refine","refinement","superRefine","optional","nullable","nullish","or","and","brand","default","describe","pipe","isNullable","isOptional","_getType","_getOrReturnCtx","parsedType","_processInputParams","_parseSync","_parse","_parseAsync","maybeAsyncResult","check","getIssueProperties","_refinement","setError","refinementData","ZodEffects","schema","typeName","ZodFirstPartyTypeKind","effect","ZodOptional","ZodNullable","ZodArray","ZodPromise","option","ZodUnion","incoming","ZodIntersection","defaultValueFunc","ZodDefault","innerType","ZodBranded","catchValueFunc","ZodCatch","catchValue","This","ZodPipeline","cuidRegex","cuid2Regex","ulidRegex","uuidRegex","emailRegex","emojiRegex","ipv4Regex","ipv6Regex","datetimeRegex","precision","RegExp","isValidIP","ip","version","ZodString","_regex","regex","nonempty","checks","kind","toUpperCase","coerce","tooBig","tooSmall","lastIndex","testResult","_addCheck","email","emoji","cuid","cuid2","ulid","datetime","minLength","maxLength","ch","floatSafeRemainder","valDecCount","stepDecCount","decCount","valInt","stepInt","ZodNumber","gte","lte","setLimit","gt","lt","int","positive","negative","nonpositive","nonnegative","finite","safe","MIN_SAFE_INTEGER","MAX_SAFE_INTEGER","ZodBigInt","BigInt","ZodBoolean","Boolean","ZodDate","getTime","minDate","maxDate","ZodSymbol","ZodUndefined","ZodNull","ZodAny","_any","ZodUnknown","_unknown","ZodNever","never","ZodVoid","void","exactLength","mergeArray","deepPartialify","ZodObject","newShape","shape","fieldSchema","unwrap","ZodTuple","_cached","nonstrict","passthrough","augment","_getCached","shapeKeys","extraKeys","catchall","unknownKeys","keyValidator","_b","strip","augmentation","merging","merged","setKey","pick","omit","deepPartial","partial","newField","keyof","createZodEnum","strictCreate","lazycreate","handleResults","childCtx","getDiscriminator","ZodLazy","ZodLiteral","ZodEnum","ZodNativeEnum","enum","ZodDiscriminatedUnion","discriminator","discriminatorValue","optionsMap","discriminatorValues","mergeValues","aType","bType","bKeys","sharedKeys","newObj","sharedValue","newArray","itemA","itemB","handleParsed","parsedLeft","parsedRight","rest","itemIndex","schemas","ZodRecord","keyType","valueType","mergeObjectAsync","third","ZodMap","entries","finalMap","ZodSet","minSize","maxSize","finalizeSet","parsedSet","ZodFunction","validate","implement","makeArgsIssue","makeReturnsIssue","returns","fn","parsedArgs","parsedReturns","returnType","validatedFunc","strictImplement","lazySchema","expectedValues","enumValues","extract","exclude","opt","nativeEnumValues","promisified","sourceType","processed","checkCtx","arg","fatal","executeRefinement","acc","inner","base","createWithPreprocess","preprocess","removeDefault","newCtx","removeCatch","ZodNaN","BRAND","handleAsync","inResult","in","_fatal","p2","late","instanceOfType","stringType","numberType","nanType","bigIntType","booleanType","dateType","symbolType","undefinedType","nullType","anyType","unknownType","neverType","voidType","arrayType","objectType","strictObjectType","unionType","discriminatedUnionType","intersectionType","tupleType","recordType","mapType","setType","functionType","lazyType","literalType","enumType","nativeEnumType","promiseType","effectsType","optionalType","nullableType","preprocessType","pipelineType","ostring","onumber","oboolean","NEVER","z","defaultErrorMap","ZodTransformer","Schema","ZodSchema","any","discriminatedUnion","intersection","lazy","literal","nativeEnum","pipeline","strictObject","transformer","tuple","union","ParamUsageSpec","FilterSpec","FilterExprSpec","filterExpr","SelectSpec","SelectAllSpec","SortSpec","sortBy","GroupSpec","groupBy","SliceSpec","AtSpec","at","TransformSpec","TargetSpec","YoyoSpec","AniUnitBaseSpec","SyncSpec","AniUnitSpec","SyncSpecWithParam","AniUnitSpecWithParam","ConcatSpec","ConcatSpecWithParam","RefSpec","ChildSpec","ChildSpecWithParam","ForeachSpec","foreach","ForeachSpecWithParam","WildcardPattern","FullNamePattern","ImportSpec","as","NumberParamSpec","private","StringParamSpec","BoolParamSpec","AniUnitArrayParamSpec","AniUnitParamSpec","TargetParamSpec","TransformParamSpec","YoyoParamSpec","ParamSpec","AniClassSpec","package","import","targetType","_isNativeFunction","_isNativeReflectConstruct$1t","Reflect","construct","sham","Proxy","valueOf","_construct","Parent","Class","_wrapNativeSuper","_cache","Wrapper","BaseError","_Error","_createSuper$1s","UnresolvedError","_BaseError","_createSuper$1r","field","Transform","_Transform","_createSuper$1q","_createSuper$1p","logger","keyMap","mapperEval$1","isArray$a","keyA","keyB","idxA","idxB","__key__","__el__","__idx__","__collection__","__model__","getLogger","SelectTransform","_createSuper$1o","SelectAllTransform","_createSuper$1n","SliceTransform","_createSuper$1m","isObject$6","isObject_1","baseGetTag$7","isObject$5","asyncTag","funcTag$2","genTag$1","proxyTag","isFunction$2","isFunction_1","FilterExprTransform","_createSuper$1l","predicate","vNode","vNodes","predicateEval","isFunction$3","__predicate__","transforms","_selection","other","_this$transforms","tran","build","listCacheClear$1","__data__","_listCacheClear","eq$2","eq_1","eq$1","assocIndexOf$4","_assocIndexOf","assocIndexOf$3","arrayProto","listCacheDelete$1","_listCacheDelete","assocIndexOf$2","listCacheGet$1","_listCacheGet","assocIndexOf$1","listCacheHas$1","_listCacheHas","assocIndexOf","listCacheSet$1","_listCacheSet","listCacheClear","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","ListCache$4","entry","_ListCache","ListCache$3","stackClear$1","_stackClear","stackDelete$1","_stackDelete","stackGet$1","_stackGet","stackHas$1","_stackHas","root$6","coreJsData$1","_coreJsData","coreJsData","maskSrcKey","uid","exec","IE_PROTO","isMasked$1","_isMasked","funcProto$2","funcToString$2","toSource$2","_toSource","isFunction$1","isMasked","isObject$4","toSource$1","reRegExpChar","reIsHostCtor","funcProto$1","objectProto$b","funcToString$1","hasOwnProperty$9","reIsNative","baseIsNative$1","pattern","_baseIsNative","getValue$1","_getValue","baseIsNative","getNative$7","_getNative","getNative$6","root$5","Map$5","_Map","getNative$5","nativeCreate$4","_nativeCreate","nativeCreate$3","hashClear$1","_hashClear","hashDelete$1","_hashDelete","nativeCreate$2","HASH_UNDEFINED$1","objectProto$a","hasOwnProperty$8","hashGet$1","_hashGet","nativeCreate$1","objectProto$9","hasOwnProperty$7","hashHas$1","_hashHas","nativeCreate","HASH_UNDEFINED","hashSet$1","_hashSet","hashClear","hashDelete","hashGet","hashHas","hashSet","Hash$1","_Hash","Hash","ListCache$2","Map$4","mapCacheClear$1","_mapCacheClear","isKeyable$1","_isKeyable","isKeyable","getMapData$4","_getMapData","getMapData$3","mapCacheDelete$1","_mapCacheDelete","getMapData$2","mapCacheGet$1","_mapCacheGet","getMapData$1","mapCacheHas$1","_mapCacheHas","getMapData","mapCacheSet$1","_mapCacheSet","mapCacheClear","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","MapCache$2","_MapCache","ListCache$1","Map$3","MapCache$1","LARGE_ARRAY_SIZE","stackSet$1","_stackSet","ListCache","stackClear","stackDelete","stackGet","stackHas","stackSet","Stack$1","_Stack","arrayEach$1","iteratee","_arrayEach","getNative$4","defineProperty$2","defineProperty$1","baseAssignValue$2","_baseAssignValue","baseAssignValue$1","eq","objectProto$8","hasOwnProperty$6","assignValue$3","objValue","_assignValue","assignValue$2","baseAssignValue","copyObject$5","source","customizer","isNew","newValue","_copyObject","baseTimes$2","_baseTimes","baseGetTag$6","isObjectLike$9","argsTag$2","baseIsArguments$1","_baseIsArguments","baseIsArguments","isObjectLike$8","objectProto$7","hasOwnProperty$5","propertyIsEnumerable$1","propertyIsEnumerable","isArguments$3","isArguments_1","stubFalse","stubFalse_1","freeExports","nodeType","freeModule","moduleExports","Buffer","nativeIsBuffer","isBuffer","MAX_SAFE_INTEGER$1","reIsUint","isIndex$3","_isIndex","isLength$3","isLength_1","baseGetTag$5","isLength$2","isObjectLike$7","argsTag$1","arrayTag$1","boolTag$3","dateTag$2","errorTag$1","funcTag$1","mapTag$4","numberTag$3","objectTag$3","regexpTag$2","setTag$4","stringTag$2","weakMapTag$2","arrayBufferTag$2","dataViewTag$3","float32Tag$2","float64Tag$2","int8Tag$2","int16Tag$2","int32Tag$2","uint8Tag$2","uint8ClampedTag$2","uint16Tag$2","uint32Tag$2","typedArrayTags","baseIsTypedArray$1","_baseIsTypedArray","baseUnary$3","_baseUnary","freeProcess","process","nodeUtil","binding","baseIsTypedArray","baseUnary$2","nodeUtil$2","_nodeUtilExports","nodeIsTypedArray","isTypedArray","isTypedArray$1","isTypedArray_1","baseTimes$1","isArguments$2","isArray$7","isBuffer$1","isBufferExports","isIndex$2","objectProto$6","hasOwnProperty$4","arrayLikeKeys$2","inherited","isArr","isArg","isBuff","isType","skipIndexes","_arrayLikeKeys","objectProto$5","isPrototype$3","Ctor","_isPrototype","overArg$2","_overArg","overArg$1","nativeKeys$1","_nativeKeys","isPrototype$2","nativeKeys","objectProto$4","hasOwnProperty$3","baseKeys$1","_baseKeys","isFunction","isLength$1","isArrayLike$3","isArrayLike_1","arrayLikeKeys$1","baseKeys","isArrayLike$2","keys$3","keys_1","copyObject$4","keys$2","baseAssign$1","_baseAssign","nativeKeysIn$1","_nativeKeysIn","isObject$3","isPrototype$1","nativeKeysIn","objectProto$3","hasOwnProperty$2","baseKeysIn$1","isProto","_baseKeysIn","arrayLikeKeys","baseKeysIn","isArrayLike$1","keysIn$3","keysIn_1","copyObject$3","keysIn$2","baseAssignIn$1","_baseAssignIn","allocUnsafe","cloneBuffer","isDeep","copyArray$1","_copyArray","arrayFilter$2","resIndex","_arrayFilter","stubArray$2","stubArray_1","arrayFilter$1","stubArray$1","objectProto$2","nativeGetSymbols$1","getOwnPropertySymbols","getSymbols$3","_getSymbols","copyObject$2","getSymbols$2","copySymbols$1","_copySymbols","arrayPush$3","_arrayPush","overArg","getPrototype$3","_getPrototype","arrayPush$2","getPrototype$2","getSymbols$1","stubArray","nativeGetSymbols","getSymbolsIn$2","_getSymbolsIn","copyObject$1","getSymbolsIn$1","copySymbolsIn$1","_copySymbolsIn","arrayPush$1","isArray$6","baseGetAllKeys$2","keysFunc","symbolsFunc","_baseGetAllKeys","baseGetAllKeys$1","getSymbols","keys$1","getAllKeys$1","_getAllKeys","baseGetAllKeys","getSymbolsIn","keysIn$1","getAllKeysIn$2","_getAllKeysIn","getNative$3","root$4","DataView$1","_DataView","getNative$2","root$3","Promise$2","_Promise","getNative$1","root$2","Set$2","_Set","getNative","root$1","WeakMap$1","_WeakMap","Map$2","Promise$1","Set$1","WeakMap","baseGetTag$4","toSource","mapTag$3","objectTag$2","promiseTag","setTag$3","weakMapTag$1","dataViewTag$2","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","getTag$3","ctorString","_getTag","objectProto$1","hasOwnProperty$1","initCloneArray$1","_initCloneArray","Uint8Array$1","_Uint8Array","cloneArrayBuffer$3","byteLength","_cloneArrayBuffer","cloneArrayBuffer$2","cloneDataView$1","dataView","byteOffset","_cloneDataView","reFlags","cloneRegExp$1","regexp","_cloneRegExp","Symbol$3","symbolProto$1","symbolValueOf","cloneSymbol$1","_cloneSymbol","cloneArrayBuffer$1","cloneTypedArray$1","typedArray","_cloneTypedArray","cloneArrayBuffer","cloneDataView","cloneRegExp","cloneSymbol","cloneTypedArray","boolTag$2","dateTag$1","mapTag$2","numberTag$2","regexpTag$1","setTag$2","stringTag$1","symbolTag$2","arrayBufferTag$1","dataViewTag$1","float32Tag$1","float64Tag$1","int8Tag$1","int16Tag$1","int32Tag$1","uint8Tag$1","uint8ClampedTag$1","uint16Tag$1","uint32Tag$1","initCloneByTag$1","_initCloneByTag","isObject$2","objectCreate","baseCreate$1","_baseCreate","baseCreate","getPrototype$1","isPrototype","initCloneObject$1","_initCloneObject","getTag$2","isObjectLike$6","mapTag$1","baseIsMap$1","_baseIsMap","baseIsMap","baseUnary$1","nodeUtil$1","nodeIsMap","isMap","isMap$1","isMap_1","getTag$1","isObjectLike$5","setTag$1","baseIsSet$1","_baseIsSet","baseIsSet","baseUnary","nodeIsSet","isSet","isSet$1","isSet_1","Stack","arrayEach","assignValue$1","baseAssign","baseAssignIn","_cloneBufferExports","copyArray","copySymbols","copySymbolsIn","getAllKeys","getAllKeysIn$1","getTag","initCloneArray","initCloneByTag","initCloneObject","isArray$5","isObject$1","keysIn","CLONE_DEEP_FLAG$2","CLONE_FLAT_FLAG$1","CLONE_SYMBOLS_FLAG$2","argsTag","arrayTag","boolTag$1","dateTag","errorTag","funcTag","genTag","mapTag","numberTag$1","objectTag$1","regexpTag","setTag","stringTag","symbolTag$1","weakMapTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","cloneableTags","baseClone$2","bitmask","stack","isFlat","isFull","isFunc","stacked","subValue","_baseClone","baseClone$1","CLONE_DEEP_FLAG$1","CLONE_SYMBOLS_FLAG$1","cloneDeep","cloneDeep_1","cloneDeep$1","PType","Proto","ResolveError","_createSuper$1k","urlAlphabet","POOL_SIZE_MULTIPLIER","pool","poolOffset","fillPool","bytes","crypto","randomFillSync","nanoid","baseGetTag$3","isObjectLike$4","numberTag","isNumber","isNumber_1","arrayMap$3","_arrayMap","baseGetTag$2","isObjectLike$3","symbolTag","isSymbol$3","isSymbol_1","isArray$4","isSymbol$2","reIsDeepProp","reIsPlainProp","isKey$1","_isKey","MapCache","FUNC_ERROR_TEXT","memoize$1","memoized","cache","Cache","memoize_1","memoize","MAX_MEMOIZE_SIZE","memoizeCapped$1","_memoizeCapped","memoizeCapped","rePropName","reEscapeChar","stringToPath$1","quote","subString","_stringToPath","Symbol$2","arrayMap$2","isArray$3","isSymbol$1","INFINITY$1","symbolProto","symbolToString","baseToString$1","_baseToString","baseToString","toString$1","toString_1","isArray$2","isKey","stringToPath","castPath$6","_castPath","last$1","last_1","isSymbol","INFINITY","toKey$4","_toKey","castPath$5","toKey$3","baseGet$2","_baseGet","baseSlice$1","_baseSlice","baseGet$1","baseSlice","parent$1","_parent","castPath$4","last","toKey$2","baseUnset$1","_baseUnset","baseGetTag$1","getPrototype","isObjectLike$2","objectTag","funcProto","objectProto","funcToString","objectCtorString","isPlainObject$1","isPlainObject_1","isPlainObject","customOmitClone$1","_customOmitClone","Symbol$1","isArguments$1","isArray$1","spreadableSymbol","isConcatSpreadable","isFlattenable$1","_isFlattenable","arrayPush","isFlattenable","baseFlatten$1","depth","isStrict","_baseFlatten","baseFlatten","flatten$1","flatten_1","apply$1","thisArg","_apply","nativeMax$1","overRest$2","otherArgs","_overRest","constant$1","constant_1","identity$2","identity_1","constant","identity$1","baseSetToString$1","_baseSetToString","HOT_COUNT","HOT_SPAN","nativeNow","shortOut$1","count","lastCalled","stamp","remaining","_shortOut","baseSetToString","shortOut","setToString$2","_setToString","overRest$1","setToString$1","flatRest$2","_flatRest","arrayMap$1","baseClone","baseUnset","castPath$3","copyObject","customOmitClone","flatRest$1","getAllKeysIn","CLONE_DEEP_FLAG","CLONE_FLAT_FLAG","CLONE_SYMBOLS_FLAG","paths","omit_1","AniPropSchema","isNumber$1","LogicalAnimation","_Proto","_createSuper$1j","meta","_props","_templateSrc","_refSrc","computedDuration","_meta","_rawProps","parseProps","imports","propSchema","refSrc","templateSrc","prop","cxt","dur","_this$timing$yoyo","staggerCnt","getTargetStr","getTimingStr","getPropsStr","transformsStr","elementsStr","attrList","attrStr","v","otherProps","omit$1","otherPropStr","_ref4","isObject$7","Import","_clazz","_pkg","ParseError","_createSuper$1i","errors","ParseContext","processStack","keyWithDollar","assert","getProcessPath","attribute","withIndex","pathItem","LeafAniProps","LeafAnimation","_LogicalAnimation","_createSuper$1h","defaultDuration","GAIA_COMMON_PKG","RefAnimationProps","RefAnimation","_LeafAnimation","_createSuper$1g","refProps","refOrProps","createRef","RefBuilder","_id","_target","_timing","Ref","builder","BaseSpecParser","TargetTypeComponent","TargetType","_createSuper$1f","_name","_packageName","_ref$imports","_ref$classList","_ref$components","_createSuper$1e","AnimationTemplate","CompositeTemplate","_BaseTemplate","_createSuper$1d","parsedProps","JsonCompositeTemplate","_CompositeTemplate","_createSuper$1c","parseContext","compileExec","parseAnimation","concatAtFront","rewriteBy","AryPropSchema","animations","AryAnimation","_createSuper$1b","_foreachSrc","src","identity","overRest","setToString","baseRest$1","_baseRest","baseProperty$1","_baseProperty","isArrayLike","isObjectLike$1","isArrayLikeObject$1","isArrayLikeObject_1","arrayFilter","arrayMap","baseProperty","baseTimes","isArrayLikeObject","nativeMax","unzip$1","unzip_1","baseRest","unzip","zip","zip_1","SyncPropSchema","_AryAnimation","_createSuper$1a","scaleRate","_createForOfIteratorHelper$c","zip$1","offsets","_step$value","rescale","oldAnimation","foreachSrc","foreachStagger","otherPropsStr","cloned","setForeachSrc","createSync","animationsOrProps","SyncBuilder","_animations","Sync","baseGetTag","isObjectLike","boolTag","isBoolean","isBoolean_1","assignValue","castPath$2","isIndex$1","isObject","toKey$1","baseSet$1","nested","_baseSet","baseGet","baseSet","castPath$1","basePickBy$1","_basePickBy","baseHasIn$1","_baseHasIn","castPath","isArguments","isIndex","isLength","toKey","hasPath$1","hasFunc","_hasPath","baseHasIn","hasPath","hasIn$1","hasIn_1","basePickBy","hasIn","basePick$1","_basePick","basePick","flatRest","pick_1","TargetTypeComponentSpec","TargetTypeSpec","ConcatPropSchema","_createSuper$19","lastEnd","_createForOfIteratorHelper$b","createConcat","ConcatBuilder","Concat","Binder","rules","BinderRule","dataList","BinderRuleSpec","BinderSpec","AtTransform","_createSuper$18","GroupTransform","_createSuper$17","mapperEval","__groupBy__","UnaryAnimationProps","UnaryAnimation","_createSuper$16","ForeachPropSchema","ForeachAnimation","_UnaryAnimation","_createSuper$15","JsonSpecParser","_BaseSpecParser","_createSuper$14","buildWithPath","parsed","parseImports","otherParamSchema","visitParams","withProcessPath","visitAniUnit","visitTypeComponent","_this3","_loop","importItem","parseOneImportItem","_this4","propSchemaRaw","visitParam","_parsed","_parsed2","isBoolean$1","_parsed3","_this5","tryParamReplace","rawTarget","visitTarget","rawTimingProps","pick$1","timingProps","_value","_value2","_value3","_value4","_value5","_value6","_Object$keys","_value7","_createForOfIteratorHelper$a","_trans","createTransform","_trans2","resultOrder","_slice","_slice2","_value8","matches","_step2","_iterator2","buildSingleBind","buildBatchBind","ResolveRule","preorderTraversal","preorderTraversalHelper","fastStop","_createForOfIteratorHelper$9","childFastStop","postorderTraversal","postorderTraversalHelper","transformDown","transformDownHelper","newNode","newChild","_step3","_iterator3","_newChild","LogicalAnimationUtils","ResolveRef","_ResolveRule","_createSuper$13","cur","setSrc","ResolveContext","CHECK_PARAMETERS","TargetSelection","_realElements","_createForOfIteratorHelper$8","vElParent","childVElGroups","selectorOrPredicate","childVNodes","comparator","newGroups","creator","DEFAULT_GROUP_CREATOR","_step2$value","groupList","newGroup","getRealElementByVNode","createVirtualGroup","newEl","ResolveTarget","_createSuper$12","sel","rootSelection","_createForOfIteratorHelper$7","newSel","applyTransform","applyTransformForeach","_parent$foreachSrc$pr","_step4","initialSel","groupTransform","groupSel","selections","_iterator4","groupEl","_newSel","newResolved","setChildren","_step5","_iterator5","ResolveTiming","_createSuper$11","computeTotalDuration","givenDuration","ResolveForeach","_createSuper$10","Resolver","extraRules","getDefaultBatch","resolveContext","_createForOfIteratorHelper$6","getBatch","_superPropBase","_get","receiver","desc","getOwnPropertyDescriptor","SynthesisContext","Synthesizer","getDefaultRules","_createForOfIteratorHelper$5","targetName","ruleMap","getRuleMap","physicalAnimation","transformUp","physical","transformUpHelper","SynthesisRule","MappingRule","_SynthesisRule","_createSuper$$","physicalAnimationClass","PhysicalAnimation","_logical","realElements","doGenerate","GsapPhysicalAnimation","_PhysicalAnimation","_createSuper$_","mergeVars","_vars","runBackwards","SyncImpl","_GsapPhysicalAnimatio","_createSuper$Z","gsap$1","ConcatImpl","_createSuper$Y","CustomImpl","_createSuper$X","createTw","_this$props","EmptyImpl","_createSuper$W","dummyEl","getDummyEl","FadeImpl","_createSuper$V","_getPosition","posX","posY","_element$getBBox","boxX","boxY","createOrGetG","createG","createElementNS","insertBefore","getRelativeBox","_el$getBBox","getStrokeWidth","totalHeight","totalWidth","childStrokeWidth","WipeImpl","_createSuper$U","_getRelativeBox","_this$getOffsetFactor","getOffsetFactorMatrix","_this$getOffsetFactor2","_this$getOffsetFactor3","ltx","lty","_this$getOffsetFactor4","rtx","rty","_this$getOffsetFactor5","lbx","lby","_this$getOffsetFactor6","rbx","rby","hiddenClipPath","shownClipPath","MoveImpl","_createSuper$T","saveOriginalBox","mergeYoyo","mergeDuration","_fromVars","_toVars","ZoomImpl","_createSuper$S","_svgPathExp","_scientific","_DEG2RAD","_sin","_cos","_abs","abs","_sqrt","_isNumber","_roundingNum","_round$1","transformRawPath","rawPath","segment","_dirty","arcToSegment","lastX","lastY","angle","largeArcFlag","sweepFlag","angleRad","cosAngle","sinAngle","TWOPI","dx2","dy2","x1_sq","y1_sq","radiiCheck","rx_sq","ry_sq","sq","coef","cx1","cy1","sx2","sy2","ux","uy","vx","vy","angleStart","acos","angleExtent","segments","ceil","angleIncrement","controlLength","ma","mb","mc","md","stringToRawPath","command","isRelative","startY","difX","difY","beziers","prevCommand","flag1","flag2","relativeX","relativeY","twoThirds","points","sx","sy","ex","ey","closed","charAt","totalPoints","rawPathToString","sl","_coreInitted","_getGSAP","registerPlugin","_initCore","registerEase","CustomEase","_bigNum","_round","_numExp","_needsParsingExp","_findMinimum","_normalize","originY","_bezierToPoints","x3","y3","x4","y4","threshold","x12","y12","x23","y23","x34","y34","x123","y123","x234","y234","x1234","y1234","dx","dy","d2","setData","_proto","inc","point","prevPoint","closest","lookup","fast","nx","getSVGData","register","core","parseEase","slope","prevX","prevY","utils","TypeImpl","_createSuper$R","SVGTextElement","SVGTSpanElement","hasAttribute","SPLIT_MARK","splitText","tspanList","tspan","generateFade","generateShow","textEl","childElementCount","_createForOfIteratorHelper$4","_chars","_char","subTspan","chars","_char2","_this$props2","typeStagger","_this$props3","CutImpl","_createSuper$Q","getOrigin","gClipPath","gTransform","moveVars","getMoveVars","GrowImpl","_createSuper$P","_gsap$fromTo","_Object$assign","_gsap$fromTo2","_Object$assign2","_this$getTransformPar","getTransformParam","ChangeColorImpl","_createSuper$O","finalVars","isLineLike","DisplayPathImpl","_createSuper$N","aniTime","SVGGeometryElement","strokeWith","marge","TypeModelTreeNode","componentLink","_classList","fullClassList","domElToStr","TargetModel","rootTargetType","typeModelTree","typeModelNodeMap","typeModelDom","realElementIdSet","initRootType","processIdSet","initTypeModelTree","initTypeModelDom","initVirtualModelBackbone","completeVirtualModel","targetLibrary","typeLibrary","nodeMap","samePackageImport","expandTreeNode","createCaller","setImport","setAllImport","_createForOfIteratorHelper$3","typeResult","safeGet","getTypeNodeId","vGroup","_Object$entries","_Object$entries$_i","processNode","parentVEl","childClassList","vGroupList","queryOneVGroup","vGroupToTypeNode","targetEl","getRealElementById","BaseSVGTargetModel","_TargetModel","_createSuper$M","el2","getElBox","saveOriginalData","getOriginalData","SVGGraphicsElement","vEl","CircleImpl","_createSuper$L","svgModel","stroke","addCircle","originalBox","getOriginalBox","ellipse","WheelImpl","_createSuper$K","_model$getElBox","hiddenSweepAngle","shownSweepAngle","PathDrawImpl","_createSuper$J","SectorWheelImpl","_createSuper$I","centerPos","computeSizeWithPos","computeSizeWithTarget","centerElements","centerTarget","centerSel","_innerSvg$viewBox$bas","viewBox","baseVal","_centerPos$split$map","_centerPos$split$map2","targetX","targetY","FloatImpl","_createSuper$H","_this$getParam","getParam","FlyImpl","_createSuper$G","distX","distY","_model$getCanvasSize","svgWidth","HighlightImpl","_createSuper$F","contrastTarget","contrastElements","contrastOpacity","gOpacity","DynamicNumberImpl","_createSuper$E","numStart","numEnd","_group","SetImpl","_createSuper$D","LineFlowImpl","_createSuper$C","dash","times","CameraImpl","_createSuper$B","_toVars2","toOrFrom","reverseSign","GsapSynthesizer","_Synthesizer","_createSuper$A","TypeLibrary","_createSuper$z","TypeLibraryCaller","_instance","_aliasMap","_importMap","isPackageImport","getByPackage","_createForOfIteratorHelper$2","_type","_this$safeGet","alias","_result","getPresetTypes","parseTargetType","Any","Circle","Image","Line","Path","Rect","_Symbol","Text","Background","Axis","Legend","Grid","BarChart","BarMark","PieChart","PieMark","LineChart","LineMark","Map$1","TornadoChart","TornadoMark","IsotypeChart","IsotypeMark","ScatterPlot","ScatterPlotMark","MixedChart","TlBackground","LinearTimeline","LinearTimelineUnit","EffectPropSchema","EffectAnimation","_createSuper$y","EffectTemplate","_createSuper$x","_this$meta","CustomPropSchema","CustomTemplate","_EffectTemplate","_createSuper$w","FadePropSchema","_createSuper$v","WipePropSchema","_createSuper$u","MovePropSchema","_createSuper$t","ZoomPropSchema","_createSuper$s","TypePropSchema","TypeTemplate","_createSuper$r","CutPropSchema","CutTemplate","_createSuper$q","CutInPropSchema","CutInTemplate","_createSuper$p","CutOutPropSchema","CutOutTemplate","_createSuper$o","GrowPropSchema","_createSuper$n","ChangeColorPropSchema","_createSuper$m","MoveFromPropSchema","_createSuper$l","MoveToPropSchema","_createSuper$k","WheelPropSchema","_createSuper$j","BarLabelEnterPropSchema","BarLabelEnterTemplate","_createSuper$i","barWipe","DisplayPathPropSchema","DisplayPathTemplate","_createSuper$h","DisplayPathEffect","_EffectAnimation","_super2","getBlinkDuration","PathDrawPropSchema","PathDrawTemplate","_createSuper$g","CirclePropSchema","_createSuper$f","CircleEffect","WipeInPropSchema","WipeInTemplate","_createSuper$e","WipeOutPropSchema","WipeOutTemplate","_createSuper$d","ZoomInPropSchema","ZoomInTemplate","_createSuper$c","ZoomOutPropSchema","ZoomOutTemplate","_createSuper$b","EmptyPropSchema","_createSuper$a","SectorWheelPropSchema","_createSuper$9","FloatPropSchema","_createSuper$8","FlyPropSchema","FlyTemplate","_createSuper$7","HighlightPropSchema","_createSuper$6","DynamicNumberPropSchema","_createSuper$5","SetPropSchema","SetTemplate","_createSuper$4","LineFlowPropSchema","LineFlowTemplate","_createSuper$3","CameraPropSchema","CameraTemplate","_createSuper$2","CameraEffect","getPresetTemplates","BSVGTargetModel","_BaseSVGTargetModel","_createSuper$1","vNodeId2RealId","idCnt","getNextId","_createForOfIteratorHelper$1","finalId","isElIdValid","isRuleIdValid","typeNode","queryOneTypeNode","_vEl","createVirtualElement","_typeNode","virtualElements","realId","SSVGTargetModel","_createSuper","targetTypeName","rootEl","TARGET_TYPE_ATTR","TYPE_ATTR","typeSelector","dataStr","DATA_ATTR","CLASS_ATTR","extraClassList","GaiaSession","targetModelFactory","parseBinder","resolverFactory","synthesizerFactory","getAll","records","specOrTemplate","registerOrUpdate","parseTemplate","specList","_createForOfIteratorHelper","registerOrUpdateTemplate","unregister","specOrType","registerOrUpdateType","unresolved","quickExec","targetArgs","fullyExec","setResolver","setSynthesizer","generated","GaiaSessionBuilder","_session","_parser","factory","_templateLibrary","_typeLibrary","_document","SectorWheelAnimation","valueMapper","extraDegree","tot","sums","startDegrees","endDegrees","hexDigits","compareFunc","__expr__","__order__","indexMap","n1","n2","isAcceptable","ARRAY","NUMBER_OR_ARRAY"],"mappings":"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GACA,QACA,GCPS8V,GAAuB,IAAI1V,GACpC,IAAI0I,GACJnK,GAAce,UACdK,GAAcC,MACd,GACA,GACA,SACA,GCPS+V,GAA4B,IAAI3V,GACzC,IAAI8L,GACJvN,GAAcgB,gBACdI,GAAcC,MACd,GACA,GACA,SACA,GCPSgW,GAAyB,IAAI5V,GACtC,IAAI+Q,GACJxS,GAAce,UACdK,GAAcf,UACd,GACA,GACA,SACA,GCPSiX,GAAe,IAAI7V,GAC5B,IAAIqH,GACJ9I,GAAcE,MACdkB,GAAcC,MACd,GACA,GACA,SACA,GCNSkW,GAA2B,IAAI9V,GAExC,IAAI0M,GACJnO,GAAcQ,KACdY,GAAcf,UACd,CAAC,QAAS,eAAgB,SAC1B,GACA,cACA,GCRSmX,GAAgC,IAAI/V,GAC7C,IAAIwI,GACJjK,GAAckB,uBACdE,GAAcC,MACd,GACA,GACA,SACA,GCPSoW,GAA2B,IAAIhW,GACxC,IAAI2L,GACJpN,GAAckB,uBACdE,GAAcC,MACd,GACA,GACA,QACA,GCPSqW,GAA+B,IAAIjW,GAC5C,IAAIyI,GACJlK,GAAckB,uBACdE,GAAcC,MACd,GACA,GACA,SACA,GCPSsW,GAA0B,IAAIlW,GACvC,IAAI4L,GACJrN,GAAckB,uBACdE,GAAcC,MACd,GACA,GACA,QACA,GCRSuW,GAAwB,IAAInW,GACrC,IAAIsI,GACJ/J,GAAciB,WACdG,GAAcC,MACd,GACA,GACA,SACA,GCPSwW,GAAmB,IAAIpW,GAChC,IAAI0L,GACJnN,GAAciB,WACdG,GAAcC,MACd,GACA,GACA,QACA,GCPSyW,GAAuB,IAAIrW,GACpC,IAAI6L,GACJtN,GAAckB,uBACdE,GAAcf,UACd,GACA,GACA,SACA,GCmDS0X,GAAkB,CAE7B7C,GACAI,GACAG,GACAD,GACAJ,GACAL,GACAc,GACAH,GACAV,GACA6B,GACAC,GACAd,GACAC,GACAN,GACAb,GACAK,GACAE,GAIAU,GACAa,GACAD,GACAb,GACAyB,GAGAD,GACAb,GACAC,GACAR,GACAI,GACAW,GACAW,GACAJ,GACAE,GACAP,GAGAd,GACAE,GACAJ,GACAa,GACAE,GACAH,GACAK,GACAC,GAGAxC,GACAI,GACAL,GACAW,GACAK,GACAQ,GACAyB,GACAF,GACAF,GACAK,ICxHK,MAAME,GAYXx0C,cAXAC,gBAAA,6BAGAA,gBAAA,8BAEAA,gBAAA,gCAGAA,gBAAA,wBAIEmB,KAAK88B,cAAgB1B,GAAcG,MAOrC3nB,KAAKy/B,EAAgB/b,GACnBt3B,KAAKszC,iBAAmBhc,EACxBt3B,KAAKqzC,eAAiBA,EAMxBpxC,QACE,OAAOjC,KAAKpB,cAGd0F,SACEtE,KAAK2B,QAEL,MAAM,MAACyF,EAAK,OAAEE,GAAUtH,KAAKuzC,gBAC7BvzC,KAAKszC,iBAAiBpb,QAAQlyB,KAAK,UAAY,OAAMoB,KAASE,KAE9DtH,KAAKuF,OAELyf,WAAW,IAAMhlB,KAAK/D,QAAS,GAMjC0F,QACE3B,KAAKszC,iBAAiBpb,QAAQ3uB,UAAU,KAAK+c,SAC7CtmB,KAAKszC,iBAAiB3Z,gBAAkB,KAG1Cp0B,OACE,KAAM,6BAMRguC,gBACE,MAAO,CAACnsC,MAAO,IAAKE,OAAQ,KAG9BrL,QACE,GAAI+D,KAAK88B,gBAAkB1B,GAAcG,MAEvC,YADAv7B,KAAKiiB,SAAW4S,QAAK5S,YAGvBjiB,KAAKszC,iBAAiB3Z,gBAAkB35B,KAAKszC,iBAAiBpb,QAAQ3uB,UAAU,KAChF,MAAM9H,EAAYzB,KAAKqzC,eAAe9V,yBAChChD,EAAcv6B,KAAKszC,iBAAiB1Z,oBACpCz4B,EAAUo5B,EAAYhG,SAASv0B,KAAKqzC,eAAe1yC,QACzDX,KAAKiiB,SAAWxgB,EAAUzD,OAAOmD,GACjCnB,KAAKiiB,SACAviB,QAAQ,GACRgC,YAAY,GACZqiB,QACA7B,SAASliB,KAAKqzC,eAAenW,gBAGpCnZ,QACO/jB,KAAKiiB,SAIVjiB,KAAKiiB,SACA8B,QACA7B,SAASliB,KAAKqzC,eAAenW,gBALhC36B,QAAQC,KAAK,mCAQjBgxC,cACE,GAAKxzC,KAAKiiB,SAIV,OAAOjiB,KAAKiiB,SAAShjB,WAHnBsD,QAAQC,KAAK,mCAMjB+gB,UACOvjB,KAAKiiB,SAIVjiB,KAAKiiB,SAASsB,UAHZhhB,QAAQC,KAAK,oCCnGZ,MAAMixC,WAAuBL,GAClCx0C,cACE4B,QACAR,KAAK88B,cAAgB1B,GAAcG,MAGrCh2B,OACE,MAAM2yB,EAAUl4B,KAAKszC,iBAAiBpb,SAChC,MAAC9wB,EAAK,OAAEE,GAAUtH,KAAKuzC,gBAC7Brb,EAAQnyB,OAAO,QACVC,KAAK,YAAa,aAAe,CAACoB,EAAQ,EAAGE,EAAS,GAAK,KAC3DtB,KAAK,cAAe,UACpBA,KAAK,OAAQ,QACbA,KAAK,UAAW,IAChBoE,MAAM,cAAe,yCACrB4/B,KAAK,4BCdP,MAAM0J,WAAyBN,GACpCx0C,cACE4B,QACAR,KAAK88B,cAAgB1B,GAAcI,QAIrCj2B,OACE,MAAM2yB,EAAUl4B,KAAKszC,iBAAiBpb,SAChC,MAAC9wB,EAAK,OAAEE,GAAUtH,KAAKuzC,gBACvBI,EAAW,GAAIC,EAAS,EACxBC,EAAgB,CAAC,GAAI,IACrBC,EAAaD,EAAcv4C,OAASq4C,GAAYE,EAAcv4C,OAAS,GAAKs4C,EAC5EzsC,GAAQC,EAAQ0sC,GAAc,EAC9BnoC,GAAUrE,EAASL,KAAKyK,OAAOmiC,IAAkB,EACjDE,EAAW,CAAC,QAAS,SAAU,QAAS,SAExCC,EAAW9b,EAAQnyB,OAAO,KAC3B4D,QAAQ,eAAe,GAEtBsqC,EAASD,EAASjuC,OAAO,KAC1B4D,QAAQ,cAAc,GAC3BsqC,EAAO1qC,UAAU,cAAczO,KAAK+4C,GAAerqC,QAAQzD,OAAO,QAC7Du7B,MAAK,SAASrkC,EAAG7B,GAChB6J,OAAUjF,MAAM2J,QAAS,aAAYoqC,EAAS34C,IAAM,MAErD4K,KAAK,QAAS2tC,GACd3tC,KAAK,SAAU/I,GAAKA,GACpB+I,KAAK,IAAK,CAAC/I,EAAG7B,IAAM+L,GAAQ/L,EAAI,GAAKw4C,EAASx4C,EAAIu4C,GAClD3tC,KAAK,IAAO/I,GAAM0O,EAAS1O,GAC3B+I,KAAK,OAAQ,WACbA,KAAK,KAAM,GACXA,KAAK,KAAM,ICjCb,MAAMkuC,WAAsBd,GACjCx0C,cACE4B,QACAR,KAAK88B,cAAgB1B,GAAcM,KAGrCn2B,OACE,MAAM2yB,EAAUl4B,KAAKszC,iBAAiBpb,SAChC,MAAC9wB,EAAK,OAAEE,GAAUtH,KAAKuzC,gBACvBY,EAAS,GACTpsC,EAAW,GAEjBmwB,EAAQnyB,OAAO,UACV4D,QAAQ,uBAAuB,GAC/B3D,KAAK,OAAQ,WACbA,KAAK,IAAKmuC,GACVnuC,KAAK,MAAOoB,EAAQW,GAAY,GAChC/B,KAAK,KAAMsB,EAAS,GACpBtB,KAAK,UAAW,IACrBkyB,EAAQnyB,OAAO,UACV4D,QAAQ,iBAAiB,GACzB3D,KAAK,OAAQ,WACbA,KAAK,IAAKmuC,GACVnuC,KAAK,MAAOoB,EAAQW,GAAY,GAChC/B,KAAK,KAAMsB,EAAS,ICvBtB,MAAM8sC,WAAiChB,GAC5Cx0C,cACE4B,QACAR,KAAK88B,cAAgB1B,GAAcU,iBAGrCv2B,OACE,MAAM2yB,EAAUl4B,KAAKszC,iBAAiBpb,SAChC,MAAC9wB,EAAK,OAAEE,GAAUtH,KAAKuzC,gBAEvBI,EAAW,GAAIC,EAAS,EACxBC,EAAgB,CAAC,GAAI,GAAI,GAAI,KAC7BC,EAAaD,EAAcv4C,OAASq4C,GAAYE,EAAcv4C,OAAS,GAAKs4C,EAC5EzsC,GAAQC,EAAQ0sC,GAAc,EAC9BnoC,GAAUrE,EAASL,KAAKyK,OAAOmiC,IAAkB,EACjDE,EAAW,CAAC,QAAS,SAAU,QAAS,SAExCC,EAAW9b,EAAQnyB,OAAO,KAC3B4D,QAAQ,eAAe,GACvB3D,KAAK,YAAa,cAClBoE,MAAM,mBAAuBhD,EAAM,EAAR,UAE1B6sC,EAASD,EAASjuC,OAAO,KAC1B4D,QAAQ,cAAc,GAC3BsqC,EAAO1qC,UAAU,aAAazO,KAAK+4C,GAAerqC,QAAQzD,OAAO,QAC5Du7B,MAAK,SAASrkC,EAAG7B,GAChB6J,OAAUjF,MAAM2J,QAAS,YAAWoqC,EAAS34C,IAAM,MAEpD4K,KAAK,QAAS2tC,GACd3tC,KAAK,SAAU/I,GAAKA,GACpB+I,KAAK,IAAK,CAAC/I,EAAG7B,IAAM+L,GAAQ/L,EAAI,GAAKw4C,EAASx4C,EAAIu4C,GAClD3tC,KAAK,IAAO/I,GAAM0O,EAAS1O,GAC3B+I,KAAK,OAAQ,WACbA,KAAK,KAAM,GACXA,KAAK,KAAM,GAEhBguC,EAASjuC,OAAO,QACX4D,QAAQ,oBAAoB,GAC5B3D,KAAK,KAAMmB,GACXnB,KAAK,KAAM2F,GACX3F,KAAK,KAAMmB,EAAO2sC,GAClB9tC,KAAK,KAAM2F,GACX3F,KAAK,SAAU,WACfA,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,SAE5B,MAAMquC,EAAUL,EAASjuC,OAAO,KAC3B4D,QAAQ,oBAAoB,GAE3B2qC,EAAWntC,EAAc,EAAPysC,EAAWD,EAAS,EACxCY,EAAW5oC,EAASkoC,EAAc,GAEtCQ,EAAQtuC,OAAO,QACV4D,QAAQ,oBAAoB,GAC5B3D,KAAK,YAAc,aAAYsuC,KAAYC,EAAW,OACtDnqC,MAAM,cAAe,UACrBpE,KAAK,YAAa,IAClBA,KAAK,cAAe,QACpBA,KAAK,cAAe,aACpBA,KAAK,OAAQ,WACbgkC,KAAK,MAEVqK,EAAQtuC,OAAO,KACV4D,QAAQ,oBAAoB,GAC5B3D,KAAK,YAAc,aAAYsuC,EAAW,MAAMC,EAAW,OAC3DxuC,OAAO,OACPC,KAAK,QAAS,IACdA,KAAK,SAAU,IACfA,KAAK,UAAW,iBAChBD,OAAO,QACPC,KAAK,IAAK,mTACVA,KAAK,SAAU,YCvEjB,MAAMwuC,WAAwBpB,GACnCx0C,cACE4B,QACAR,KAAK88B,cAAgB1B,GAAcS,OAIrCt2B,OACE,MAAM2yB,EAAUl4B,KAAKszC,iBAAiBpb,SAChC,MAAC9wB,EAAK,OAAEE,GAAUtH,KAAKuzC,gBACvBI,EAAW,GAAIC,EAAS,EACxBC,EAAgB,CAAC,GAAI,GAAI,GAAI,KAC7BC,EAAaD,EAAcv4C,OAASq4C,GAAYE,EAAcv4C,OAAS,GAAKs4C,EAC5EzsC,GAAQC,EAAQ0sC,GAAc,EAC9BnoC,GAAUrE,EAASL,KAAKyK,OAAOmiC,IAAkB,EACjDE,EAAW,CAAC,QAAS,SAAU,QAAS,SAExCC,EAAW9b,EAAQnyB,OAAO,KAC3B4D,QAAQ,qCAAqC,GAE5CsqC,EAASD,EAASjuC,OAAO,KAC1B4D,QAAQ,cAAc,GAC3BsqC,EAAO1qC,UAAU,cAAczO,KAAK+4C,GAAerqC,QAAQzD,OAAO,QAC7Du7B,MAAK,SAASrkC,EAAG7B,GAChB6J,OAAUjF,MAAM2J,QAAS,kBAAiBoqC,EAAS34C,IAAM,MAE1D4K,KAAK,QAAS2tC,GACd3tC,KAAK,SAAU/I,GAAKA,GACpB+I,KAAK,IAAK,CAAC/I,EAAG7B,IAAM+L,GAAQ/L,EAAI,GAAKw4C,EAASx4C,EAAIu4C,GAClD3tC,KAAK,IAAO/I,GAAM0O,EAAS1O,GAC3B+I,KAAK,OAAQ,WACbA,KAAK,KAAM,GACXA,KAAK,KAAM,GAEhBguC,EAASjuC,OAAO,QACX4D,QAAQ,0BAA0B,GAClC3D,KAAK,KAAMmB,GACXnB,KAAK,KAAM2F,GACX3F,KAAK,KAAMmB,EAAO2sC,GAClB9tC,KAAK,KAAM2F,GACX3F,KAAK,SAAU,WACfA,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,UC9CzB,MAAMyuC,GAgBX71C,aAAY,MAACwI,EAAK,OAAEE,EAAM,SACZotC,EAAQ,YAAEC,EAAW,UAACC,EAAS,WAAEC,IAAah2C,gBAAA,qBAAAA,gBAAA,sBAAAA,gBAAA,wBAAAA,gBAAA,2BAAAA,gBAAA,yBAAAA,gBAAA,0BAAAA,gBAAA,sBAAAA,gBAAA,mBAAAA,gBAAA,sBAAAA,gBAAA,oBAAAA,gBAAA,qBAAAA,gBAAA,2BAAAA,gBAAA,0BAC1DmB,KAAKoH,MAAQA,EACbpH,KAAKsH,OAASA,EACdtH,KAAK00C,SAAWA,EAChB10C,KAAK20C,YAAcA,EACnB30C,KAAK40C,UAAYA,EACjB50C,KAAK60C,WAAaA,EAClB70C,KAAK80C,aAGPA,aACE90C,KAAK2F,OAAS,CACZ4B,EAAGvH,KAAKoH,MAAQpH,KAAK40C,UACrBptC,EAAGxH,KAAKsH,QAAU,EAAItH,KAAK20C,cAE7B30C,KAAKqH,IAAMrH,KAAKsH,OAAStH,KAAK00C,SAC9B10C,KAAK2L,OAAS3L,KAAKsH,OAAStH,KAAK20C,YACjC30C,KAAKmH,KAAOnH,KAAKoH,MAAQpH,KAAK40C,UAC9B50C,KAAK+P,MAAQ/P,KAAKoH,MAAQpH,KAAK60C,WAE/B70C,KAAK+0C,YAAc/0C,KAAKsH,OAAStH,KAAKqH,IAAMrH,KAAK2L,OACjD3L,KAAKg1C,WAAah1C,KAAKoH,MAAQpH,KAAKmH,KAAOnH,KAAK+P,OCjC7C,MAAMklC,WAA0B7B,GACrCx0C,cACE4B,QACAR,KAAK88B,cAAgB1B,GAAcW,UAGrCx2B,OACE,MAAM2yB,EAAUl4B,KAAKszC,iBAAiBpb,SAChC,MAAC9wB,EAAK,OAAEE,GAAUtH,KAAKuzC,gBAEvBz4C,EAAO,CACX,CAACoC,KAAM,IAAKS,MAAO,IACnB,CAACT,KAAM,IAAKS,MAAO,KAEfu3C,EAAU,CAAC,EAAG,GAAI,IAClBC,EAAS,IAAIV,GAAY,CAC7BrtC,QAAOE,SACPotC,SAAU,GACVC,YAAa,IACbC,UAAW,GACXC,WAAY,KAERO,EAAgB,GAChBC,EAAiB,GAEjBC,EAASrwC,SACVswC,OAAOz6C,EAAKmJ,IAAIhH,GAAKA,EAAEC,OACvBs4C,MAAM,CAAC,EAAGL,EAAOH,aACjBvnB,QAAQ2nB,GACPK,EAASxwC,SACVswC,OAAO,CAAC,EAAGtwC,OAAOnK,EAAMmC,GAAKA,EAAEU,OAAS03C,IACxCG,MAAM,CAAC,EAAGL,EAAOJ,cAEhBf,EAAW9b,EAAQnyB,OAAO,KAC3B4D,QAAQ,eAAe,GAGtB+rC,EAAU1B,EAASjuC,OAAO,KAC3B4D,QAAQ,cAAc,GAErBgsC,EAAWD,EAAQ3vC,OAAO,KAC3B4D,QAAQ,gBAAgB,GACxB3D,KAAK,YAAc,aAAYmvC,EAAOxvC,OAAO4B,KAAK4tC,EAAOxvC,OAAO6B,MAErEmuC,EAASpsC,UAAU,QAAQzO,KAAKA,GAAM0O,QAAQzD,OAAO,QAChD4D,QAAS,2BAA0B,GACnC3D,KAAK,UAAW/I,GAAKy5B,KAAKjL,UAAUxuB,IACpC+I,KAAK,YAAa/I,GAAM,aAAYq4C,EAAOr4C,EAAEC,MAAQo4C,EAAOM,YAAY,QACxE5vC,KAAK,KAAM,IACXoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,CAAC/sC,EAAG7B,IAAM,CAAC,IAAK,KAAKA,IAE/Bu6C,EAAS5vC,OAAO,QACX4D,QAAS,2BAA0B,GACnC3D,KAAK,YAAc,aAAYmvC,EAAOH,iBACtChvC,KAAK,KAAM,IACXA,KAAK,KAAM,GACXA,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,KAEV2L,EAAS5vC,OAAO,QACX4D,QAAQ,4BAA4B,GACpC3D,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAMmvC,EAAOH,YAClBhvC,KAAK,KAAM,GACXA,KAAK,SAAU,WACfA,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,SAE5B,MAAM6vC,EAAWH,EAAQ3vC,OAAO,KAC3B4D,QAAQ,gBAAgB,GACxB3D,KAAK,YAAc,aAAYmvC,EAAOxvC,OAAO4B,KAAK4tC,EAAO9tC,QAE9DwuC,EAAStsC,UAAU,aAAazO,KAAKo6C,EAAQx2C,MAAM,IAAI8K,QAAQzD,OAAO,QACjE4D,QAAS,0BAAyB,GAClC3D,KAAK,YAAa/I,GAAM,eAAck4C,EAAOJ,YAAcU,EAAOx4C,OAClE+I,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAMmvC,EAAOH,YAClBhvC,KAAK,KAAM,GACXA,KAAK,SAAU,WACfA,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,SAE5B6vC,EAAStsC,UAAU,QAAQzO,KAAKo6C,GAAS1rC,QAAQzD,OAAO,QACnD4D,QAAS,2BAA0B,GACnC3D,KAAK,YAAa/I,GAAM,eAAck4C,EAAOJ,YAAcU,EAAOx4C,OAClE+I,KAAK,MAAO,IACZA,KAAK,KAAM,KACXoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK/sC,GAAKA,GAEf44C,EAAS9vC,OAAO,QACX4D,QAAQ,4BAA4B,GACpC3D,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAMmvC,EAAOJ,aAClB/uC,KAAK,SAAU,WACfA,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,SAE5B6vC,EAAS9vC,OAAO,QACX4D,QAAS,2BAA0B,GACnC3D,KAAK,MAAO,GACZA,KAAK,MAAO,GACZoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,KAGV,MAAM8L,EAAU9B,EAASjuC,OAAO,KAC3B4D,QAAQ,cAAc,GACtB3D,KAAK,YAAc,aAAYmvC,EAAOhuC,QAAQguC,EAAO9tC,QAC1DyuC,EAAQvsC,UAAU,QAAQzO,KAAKA,GAAM0O,QAAQzD,OAAO,QAC/C4D,QAAQ,kBAAkB,GAC1B3D,KAAK,UAAW/I,GAAKy5B,KAAKjL,UAAUxuB,IACpC+I,KAAK,QAASsvC,EAAOM,aACrB5vC,KAAK,SAAU/I,GAAKw4C,EAAOx4C,EAAEU,QAC7BqI,KAAK,IAAK/I,GAAKq4C,EAAOr4C,EAAEC,OACxB8I,KAAK,IAAM/I,GAAKk4C,EAAOJ,YAAcU,EAAOx4C,EAAEU,QAC9CqI,KAAK,OAAQ,WACbA,KAAK,KAAM,GACXA,KAAK,KAAM,GAChB8vC,EAAQvsC,UAAU,QAAQzO,KAAKA,GAAM0O,QAAQzD,OAAO,QAC/CC,KAAK,UAAW/I,GAAKy5B,KAAKjL,UAAUxuB,IACpC0M,QAAQ,8BAA8B,GACtC3D,KAAK,YAAa/I,GACd,aAAYq4C,EAAOr4C,EAAEC,MAAQo4C,EAAOM,YAAY,KAAKT,EAAOJ,YAAcU,EAAOx4C,EAAEU,WACvFqI,KAAK,MAAO,IACZoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK/sC,GAAKA,EAAEU,OAGjB,MAAMo4C,EAAW/B,EAASjuC,OAAO,KAC5B4D,QAAQ,eAAe,GAC5BosC,EAAShwC,OAAO,QACX4D,QAAQ,0BAA0B,GAClC3D,KAAK,YAAc,aAAYmvC,EAAOhuC,KAAOguC,EAAOH,WAAa,KAAKG,EAAO9tC,QAC7ErB,KAAK,MAAO,IACZoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,cCxJP,MAAMgM,WAAoC5C,GAC/Cx0C,cACE4B,QACAR,KAAK88B,cAAgB1B,GAAcY,sBAGrCz2B,OACE,MAAM2yB,EAAUl4B,KAAKszC,iBAAiBpb,SAChC,MAAC9wB,EAAK,OAAEE,GAAUtH,KAAKuzC,gBAEvBz4C,EAAO,CACX,CAACoC,KAAM,IAAKS,MAAO,IACnB,CAACT,KAAM,IAAKS,MAAO,KAGfs4C,EAAQ,CACV,CAAC/4C,KAAM,IAAKS,MAAO,IACnB,CAACT,KAAM,IAAKS,MAAO,KAEjBu3C,EAAU,CAAC,EAAG,GAAI,IAClBC,EAAS,IAAIV,GAAY,CAC7BrtC,QAAOE,SACPotC,SAAU,GACVC,YAAa,IACbC,UAAW,GACXC,WAAY,KAERO,EAAgB,GAChBC,EAAiB,GAEjBC,EAASrwC,SACVswC,OAAOz6C,EAAKmJ,IAAIhH,GAAKA,EAAEC,OACvBs4C,MAAM,CAAC,EAAGL,EAAOH,aACjBvnB,QAAQ2nB,GACPK,EAASxwC,SACVswC,OAAO,CAAC,EAAGtwC,OAAOnK,EAAMmC,GAAKA,EAAEU,OAAS03C,IACxCG,MAAM,CAAC,EAAGL,EAAOJ,cAEhBf,EAAW9b,EAAQnyB,OAAO,KAC3B4D,QAAQ,eAAe,GAGtB+rC,EAAU1B,EAASjuC,OAAO,KAC3B4D,QAAQ,cAAc,GAErBgsC,EAAWD,EAAQ3vC,OAAO,KAC3B4D,QAAQ,gBAAgB,GACxB3D,KAAK,YAAc,aAAYmvC,EAAOxvC,OAAO4B,KAAK4tC,EAAOxvC,OAAO6B,MAErEmuC,EAASpsC,UAAU,QAAQzO,KAAKA,GAAM0O,QAAQzD,OAAO,QAChD4D,QAAS,2BAA0B,GACnC3D,KAAK,UAAW/I,GAAKy5B,KAAKjL,UAAUxuB,IACpC+I,KAAK,YAAa/I,GAAM,aAAYq4C,EAAOr4C,EAAEC,MAAQo4C,EAAOM,YAAY,QACxE5vC,KAAK,KAAM,IACXoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,CAAC/sC,EAAG7B,IAAM,CAAC,IAAK,KAAKA,IAE/Bu6C,EAAS5vC,OAAO,QACX4D,QAAS,2BAA0B,GACnC3D,KAAK,YAAc,aAAYmvC,EAAOH,iBACtChvC,KAAK,KAAM,IACXA,KAAK,KAAM,GACXA,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,KAEV2L,EAAS5vC,OAAO,QACX4D,QAAQ,4BAA4B,GACpC3D,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAMmvC,EAAOH,YAClBhvC,KAAK,KAAM,GACXA,KAAK,SAAU,WACfA,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,SAE5B,MAAM6vC,EAAWH,EAAQ3vC,OAAO,KAC3B4D,QAAQ,gBAAgB,GACxB3D,KAAK,YAAc,aAAYmvC,EAAOxvC,OAAO4B,KAAK4tC,EAAO9tC,QAE9DwuC,EAAStsC,UAAU,aAAazO,KAAKo6C,EAAQx2C,MAAM,IAAI8K,QAAQzD,OAAO,QACjE4D,QAAS,0BAAyB,GAClC3D,KAAK,YAAa/I,GAAM,eAAck4C,EAAOJ,YAAcU,EAAOx4C,OAClE+I,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAMmvC,EAAOH,YAClBhvC,KAAK,KAAM,GACXA,KAAK,SAAU,WACfA,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,SAE5B6vC,EAAStsC,UAAU,QAAQzO,KAAKo6C,GAAS1rC,QAAQzD,OAAO,QACnD4D,QAAS,2BAA0B,GACnC3D,KAAK,YAAa/I,GAAM,eAAck4C,EAAOJ,YAAcU,EAAOx4C,OAClE+I,KAAK,MAAO,IACZA,KAAK,KAAM,KACXoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK/sC,GAAKA,GAEf44C,EAAS9vC,OAAO,QACX4D,QAAQ,4BAA4B,GACpC3D,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAMmvC,EAAOJ,aAClB/uC,KAAK,SAAU,WACfA,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,SAE5B6vC,EAAS9vC,OAAO,QACX4D,QAAS,2BAA0B,GACnC3D,KAAK,MAAO,GACZA,KAAK,MAAO,GACZoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,KAGV,MAAM8L,EAAU9B,EAASjuC,OAAO,KAC3B4D,QAAQ,cAAc,GACtB3D,KAAK,YAAc,aAAYmvC,EAAOhuC,QAAQguC,EAAO9tC,QACpD6uC,EAAWJ,EAAQ/vC,OAAO,KAC3B4D,QAAQ,gBAAgB,GAC7BusC,EAAS3sC,UAAU,QAAQzO,KAAKA,GAAM0O,QAAQzD,OAAO,QAChD4D,QAAQ,kBAAkB,GAC1B3D,KAAK,UAAW/I,GAAKy5B,KAAKjL,UAAUxuB,IACpC+I,KAAK,QAASsvC,EAAOM,YAAY,GACjC5vC,KAAK,SAAU/I,GAAKw4C,EAAOx4C,EAAEU,QAC7BqI,KAAK,IAAK/I,GAAKq4C,EAAOr4C,EAAEC,MAAM,GAC9B8I,KAAK,IAAM/I,GAAKk4C,EAAOJ,YAAcU,EAAOx4C,EAAEU,QAC9CqI,KAAK,OAAQ,WACbA,KAAK,KAAM,GACXA,KAAK,KAAM,GAChBkwC,EAAS3sC,UAAU,QAAQzO,KAAKA,GAAM0O,QAAQzD,OAAO,QAChDC,KAAK,UAAW/I,GAAKy5B,KAAKjL,UAAUxuB,IACpC0M,QAAQ,8BAA8B,GACtC3D,KAAK,YAAa/I,GAAK,aAAYq4C,EAAOr4C,EAAEC,MAAQo4C,EAAOM,YAAY,EAAE,KAAKT,EAAOJ,YAAcU,EAAOx4C,EAAEU,WAC5GqI,KAAK,MAAO,GACZoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK/sC,GAAKA,EAAEU,OAEjB,MAAMw4C,EAAWL,EAAQ/vC,OAAO,KAC3B4D,QAAQ,gBAAgB,GAC7BwsC,EAAS5sC,UAAU,QAAQzO,KAAKm7C,GAAOzsC,QAAQzD,OAAO,QACjD4D,QAAQ,kBAAkB,GAC1B3D,KAAK,UAAW/I,GAAKy5B,KAAKjL,UAAUxuB,IACpC+I,KAAK,QAASsvC,EAAOM,YAAY,GACjC5vC,KAAK,SAAU/I,GAAKw4C,EAAOx4C,EAAEU,QAC7BqI,KAAK,IAAK/I,GAAKq4C,EAAOr4C,EAAEC,MAAMo4C,EAAOM,YAAY,EAAE,GACnD5vC,KAAK,IAAM/I,GAAKk4C,EAAOJ,YAAcU,EAAOx4C,EAAEU,QAC9CqI,KAAK,OAAQ,WACbA,KAAK,KAAM,GACXA,KAAK,KAAM,GAChBmwC,EAAS5sC,UAAU,QAAQzO,KAAKm7C,GAAOzsC,QAAQzD,OAAO,QACjDC,KAAK,UAAW/I,GAAKy5B,KAAKjL,UAAUxuB,IACpC0M,QAAQ,8BAA8B,GACtC3D,KAAK,YAAa/I,GAAK,aAAYq4C,EAAOr4C,EAAEC,MAA2B,IAAnBo4C,EAAOM,YAAiB,KAAKT,EAAOJ,YAAcU,EAAOx4C,EAAEU,WAC/GqI,KAAK,MAAO,GACZoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK/sC,GAAKA,EAAEU,OAGjB,MAAMy4C,EAAYpC,EAASjuC,OAAO,KACjC4D,QAAQ,cAAc,GAGvBysC,EAAUrwC,OAAO,QACZ4D,QAAS,qBAAoB,GAC7B3D,KAAK,YAAc,aAAYoB,EAAM+tC,EAAOplC,SAASolC,EAAO9tC,QAC5DrB,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,MAEVoM,EAAUrwC,OAAO,QACZ4D,QAAQ,qBAAqB,GAC7B3D,KAAK,YAAc,aAAYoB,EAAM+tC,EAAOplC,SAASolC,EAAO9tC,QAC5DrB,KAAK,QAAS,IACdA,KAAK,SAAU,GACfA,KAAK,IAAK,IACVA,KAAK,IAAK,GACVA,KAAK,OAAQ,WAElBowC,EAAUrwC,OAAO,QACZ4D,QAAS,qBAAoB,GAC7B3D,KAAK,YAAc,aAAYoB,EAAM+tC,EAAOplC,SAASolC,EAAO9tC,QAC5DrB,KAAK,KAAM,GACXA,KAAK,KAAM,IACXA,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,MAEVoM,EAAUrwC,OAAO,QACZ4D,QAAQ,qBAAqB,GAC7B3D,KAAK,YAAc,aAAYoB,EAAM+tC,EAAOplC,SAASolC,EAAO9tC,QAC5DrB,KAAK,QAAS,IACdA,KAAK,SAAU,GACfA,KAAK,IAAK,IACVA,KAAK,IAAK,IACVA,KAAK,OAAQ,WAGlB,MAAM+vC,EAAW/B,EAASjuC,OAAO,KAC5B4D,QAAQ,eAAe,GAC5BosC,EAAShwC,OAAO,QACX4D,QAAQ,0BAA0B,GAClC3D,KAAK,YAAc,aAAYmvC,EAAOhuC,KAAOguC,EAAOH,WAAa,KAAKG,EAAO9tC,QAC7ErB,KAAK,MAAO,IACZoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,0BC7NP,MAAMqM,WAAgCjD,GAC3Cx0C,cACE4B,QACAR,KAAK88B,cAAgB1B,GAAcmB,gBAGrCh3B,OACE,MAAM2yB,EAAUl4B,KAAKszC,iBAAiBpb,SAChC,MAAC9wB,EAAK,OAAEE,GAAUtH,KAAKuzC,gBAEvBz4C,EAAO,CACX,CAACoC,KAAM,IAAKS,MAAO,IACnB,CAACT,KAAM,IAAKS,MAAO,KAEfu3C,EAAU,CAAC,EAAG,GAAI,IAClBC,EAAS,IAAIV,GAAY,CAC7BrtC,QAAOE,SACPotC,SAAU,GACVC,YAAa,IACbC,UAAW,GACXC,WAAY,KAERO,EAAgB,GAChBC,EAAiB,GAEjBC,EAASrwC,SACVswC,OAAOz6C,EAAKmJ,IAAIhH,GAAKA,EAAEC,OACvBs4C,MAAM,CAAC,EAAGL,EAAOH,aACjBvnB,QAAQ2nB,GACPK,EAASxwC,SACVswC,OAAO,CAAC,EAAGtwC,OAAOnK,EAAMmC,GAAKA,EAAEU,OAAS03C,IACxCG,MAAM,CAAC,EAAGL,EAAOJ,cAEhBf,EAAW9b,EAAQnyB,OAAO,KAC3B4D,QAAQ,eAAe,GAGtB+rC,EAAU1B,EAASjuC,OAAO,KAC3B4D,QAAQ,cAAc,GAErBgsC,EAAWD,EAAQ3vC,OAAO,KAC3B4D,QAAQ,gBAAgB,GACxB3D,KAAK,YAAc,aAAYmvC,EAAOxvC,OAAO4B,KAAK4tC,EAAOxvC,OAAO6B,MAErEmuC,EAASpsC,UAAU,QAAQzO,KAAKA,GAAM0O,QAAQzD,OAAO,QAChD4D,QAAS,2BAA0B,GACnC3D,KAAK,UAAW/I,GAAKy5B,KAAKjL,UAAUxuB,IACpC+I,KAAK,YAAa/I,GAAM,aAAYq4C,EAAOr4C,EAAEC,MAAQo4C,EAAOM,YAAY,QACxE5vC,KAAK,KAAM,IACXA,KAAK,cAAe,UACpBA,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,CAAC/sC,EAAG7B,IAAM,CAAC,IAAK,KAAKA,IAE/Bu6C,EAAS5vC,OAAO,QACX4D,QAAS,2BAA0B,GACnC3D,KAAK,YAAc,aAAYmvC,EAAOH,iBACtChvC,KAAK,KAAM,IACXA,KAAK,KAAM,GACXA,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,KAEV2L,EAAS5vC,OAAO,QACX4D,QAAQ,4BAA4B,GACpC3D,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAMmvC,EAAOH,YAClBhvC,KAAK,KAAM,GACXA,KAAK,SAAU,WACfA,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,SAE5B,MAAM6vC,EAAWH,EAAQ3vC,OAAO,KAC3B4D,QAAQ,gBAAgB,GACxB3D,KAAK,YAAc,aAAYmvC,EAAOxvC,OAAO4B,KAAK4tC,EAAO9tC,QAE9DwuC,EAAStsC,UAAU,aAAazO,KAAKo6C,EAAQx2C,MAAM,IAAI8K,QAAQzD,OAAO,QACjE4D,QAAS,0BAAyB,GAClC3D,KAAK,YAAa/I,GAAM,eAAck4C,EAAOJ,YAAcU,EAAOx4C,OAClE+I,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAMmvC,EAAOH,YAClBhvC,KAAK,KAAM,GACXA,KAAK,SAAU,WACfA,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,SAE5B6vC,EAAStsC,UAAU,QAAQzO,KAAKo6C,GAAS1rC,QAAQzD,OAAO,QACnD4D,QAAS,2BAA0B,GACnC3D,KAAK,UAAW/I,GAAKA,GACrB+I,KAAK,YAAa/I,GAAM,eAAck4C,EAAOJ,YAAcU,EAAOx4C,OAClE+I,KAAK,MAAO,IACZA,KAAK,KAAM,KACXA,KAAK,cAAe,UACpBA,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK/sC,GAAKA,GAEf44C,EAAS9vC,OAAO,QACX4D,QAAQ,4BAA4B,GACpC3D,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAMmvC,EAAOJ,aAClB/uC,KAAK,SAAU,WACfA,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,SAE5B6vC,EAAS9vC,OAAO,QACX4D,QAAS,2BAA0B,GACnC3D,KAAK,MAAO,GACZA,KAAK,MAAO,GACZA,KAAK,cAAe,UACpBA,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,KA4BV,MAAM+L,EAAW/B,EAASjuC,OAAO,KAC5B4D,QAAQ,eAAe,GAC5BosC,EAAShwC,OAAO,QACX4D,QAAQ,0BAA0B,GAClC3D,KAAK,YAAc,aAAYmvC,EAAOhuC,KAAOguC,EAAOH,WAAa,KAAKG,EAAO9tC,QAC7ErB,KAAK,MAAO,IACZA,KAAK,cAAe,UACpBA,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,gBCzJP,MAAMsM,WAAwBlD,GACnCx0C,cACE4B,QACAR,KAAK88B,cAAgB1B,GAAca,aAGrC12B,OACE,MAAM2yB,EAAUl4B,KAAKszC,iBAAiBpb,SAChC,MAAC9wB,EAAK,OAAEE,GAAUtH,KAAKuzC,gBAEvBgD,EAAY,CACd,CAAC,GAAG,IACJ,CAAC,GAAG,IACJ,CAAC,GAAG,IACJ,CAAC,EAAE,GACH,CAAC,GAAG,IACJ,CAAC,GAAG,IACJ,CAAC,GAAG,KAEFC,EAAU,CAAC,EAAG,GAAI,IAClBtB,EAAU,CAAC,GAAI,IACfC,EAAS,IAAIV,GAAY,CAC7BrtC,QAAOE,SACPotC,SAAU,GACVC,YAAa,IACbC,UAAW,GACXC,WAAY,KAERO,EAAgB,GAChBC,EAAiB,GAEjBC,EAASrwC,SACVswC,OAAO,CAAC,EAAGtwC,OAAOsxC,EAAat5C,GAAKA,EAAE,IAAMm4C,IAC5CI,MAAM,CAAC,EAAGL,EAAOH,aAEhBS,EAASxwC,SACVswC,OAAO,CAAC,EAAGtwC,OAAOsxC,EAAat5C,GAAKA,EAAE,IAAMo4C,IAC5CG,MAAM,CAAC,EAAGL,EAAOJ,cAEhBf,EAAW9b,EAAQnyB,OAAO,KAC3B4D,QAAQ,eAAe,GAGtB+rC,EAAU1B,EAASjuC,OAAO,KAC3B4D,QAAQ,cAAc,GAErBgsC,EAAWD,EAAQ3vC,OAAO,KAC3B4D,QAAQ,gBAAgB,GACxB3D,KAAK,YAAc,aAAYmvC,EAAOxvC,OAAO4B,KAAK4tC,EAAOxvC,OAAO6B,MAErEmuC,EAASpsC,UAAU,QAAQzO,KAAK07C,GAAShtC,QAAQzD,OAAO,QACnD4D,QAAS,2BAA0B,GACnC3D,KAAK,YAAa/I,GAAM,aAAYq4C,EAAOr4C,SAC3C+I,KAAK,KAAM,GACXA,KAAK,KAAM,IACXoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK/sC,GAAKA,GAEf04C,EAAS5vC,OAAO,QACX4D,QAAS,2BAA0B,GACnC3D,KAAK,YAAc,aAAYmvC,EAAOH,iBACtChvC,KAAK,KAAM,IACXA,KAAK,KAAM,GACXA,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,KAEV2L,EAAS5vC,OAAO,QACX4D,QAAQ,4BAA4B,GACpC3D,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAMmvC,EAAOH,YAClBhvC,KAAK,KAAM,GACXA,KAAK,SAAU,WACfA,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,SAE5B,MAAM6vC,EAAWH,EAAQ3vC,OAAO,KAC3B4D,QAAQ,gBAAgB,GACxB3D,KAAK,YAAc,aAAYmvC,EAAOxvC,OAAO4B,KAAK4tC,EAAO9tC,QAE9DwuC,EAAStsC,UAAU,QAAQzO,KAAKo6C,GAAS1rC,QAAQzD,OAAO,QACnD4D,QAAS,2BAA0B,GACnC3D,KAAK,YAAa/I,GAAM,eAAck4C,EAAOJ,YAAcU,EAAOx4C,OAClE+I,KAAK,MAAO,IACZA,KAAK,KAAM,GACXoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK/sC,GAAKA,GAEf44C,EAAS9vC,OAAO,QACX4D,QAAQ,4BAA4B,GACpC3D,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAMmvC,EAAOJ,aAClB/uC,KAAK,SAAU,WACfA,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,SAE5B6vC,EAAS9vC,OAAO,QACX4D,QAAS,2BAA0B,GACnC3D,KAAK,MAAO,IACZA,KAAK,MAAO,GACZoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,KAGV,MAAM8L,EAAU9B,EAASjuC,OAAO,KAC3B4D,QAAQ,cAAc,GACtB3D,KAAK,YAAc,aAAYmvC,EAAOhuC,QAAQguC,EAAO9tC,QAC1DyuC,EAAQvsC,UAAU,UAAUzO,KAAKy7C,GAAa/sC,QAAQzD,OAAO,UACxD4D,QAAQ,qBAAqB,GAC7B3D,KAAK,KAAM/I,GAAKq4C,EAAOr4C,EAAE,KACzB+I,KAAK,KAAM/I,GAAKk4C,EAAOJ,YAAYU,EAAOx4C,EAAE,KAC5C+I,KAAK,IAAK,GACVA,KAAK,OAAQ,WAGlB,MAAM+vC,EAAW/B,EAASjuC,OAAO,KAC5B4D,QAAQ,eAAe,GAC5BosC,EAAShwC,OAAO,QACX4D,QAAQ,0BAA0B,GAClC3D,KAAK,YAAc,aAAYmvC,EAAOhuC,KAAOguC,EAAOH,WAAa,KAAKG,EAAO9tC,QAC7ErB,KAAK,MAAO,IACZoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,kBCrIP,MAAMyM,WAAkCrD,GAC7Cx0C,cACE4B,QACAR,KAAK88B,cAAgB1B,GAAec,yBAGtC32B,OACE,MAAM2yB,EAAUl4B,KAAKszC,iBAAiBpb,SAChC,MAAC9wB,EAAK,OAAEE,GAAUtH,KAAKuzC,gBASvBgD,EAAY,CACd,CAAC,GAAG,IACJ,CAAC,GAAG,IACJ,CAAC,GAAG,IACJ,CAAC,EAAE,GACH,CAAC,GAAG,IACJ,CAAC,GAAG,IACJ,CAAC,GAAG,KAEFG,EAAa,CACf,CAAC,GAAG,IACJ,CAAC,GAAG,IACJ,CAAC,GAAG,KAEFC,EAAa,CACf,CAAC,GAAG,IACJ,CAAC,GAAG,IACJ,CAAC,GAAG,IACJ,CAAC,EAAE,IAEDH,EAAU,CAAC,EAAG,GAAI,IAClBtB,EAAU,CAAC,GAAI,IACfC,EAAS,IAAIV,GAAY,CAC7BrtC,QAAOE,SACPotC,SAAU,GACVC,YAAa,IACbC,UAAW,GACXC,WAAY,MAERO,EAAgB,GAChBC,EAAiB,GAEjBC,EAASrwC,SACVswC,OAAO,CAAC,EAAGtwC,OAAOsxC,EAAat5C,GAAKA,EAAE,IAAMm4C,IAC5CI,MAAM,CAAC,EAAGL,EAAOH,aAEhBS,EAASxwC,SACVswC,OAAO,CAAC,EAAGtwC,OAAOsxC,EAAat5C,GAAKA,EAAE,IAAMo4C,IAC5CG,MAAM,CAAC,EAAGL,EAAOJ,cAEhBf,EAAW9b,EAAQnyB,OAAO,KAC3B4D,QAAQ,eAAe,GAGtBysC,EAAYpC,EAASjuC,OAAO,KAC7B4D,QAAQ,cAAc,GAG3BysC,EAAUrwC,OAAO,QACZ4D,QAAS,qBAAoB,GAC7B3D,KAAK,YAAc,aAAYoB,EAAM+tC,EAAOplC,SAASolC,EAAO9tC,QAC5DrB,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,MAEVoM,EAAUrwC,OAAO,QACZ4D,QAAQ,qBAAqB,GAC7B3D,KAAK,YAAc,aAAYoB,EAAM+tC,EAAOplC,SAASolC,EAAO9tC,QAC5DrB,KAAK,QAAS,IACdA,KAAK,SAAU,GACfA,KAAK,IAAK,IACVA,KAAK,IAAK,GACVA,KAAK,OAAQ,WAElBowC,EAAUrwC,OAAO,QACZ4D,QAAS,qBAAoB,GAC7B3D,KAAK,YAAc,aAAYoB,EAAM+tC,EAAOplC,SAASolC,EAAO9tC,QAC5DrB,KAAK,KAAM,GACXA,KAAK,KAAM,IACXA,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,MAEVoM,EAAUrwC,OAAO,QACZ4D,QAAQ,qBAAqB,GAC7B3D,KAAK,YAAc,aAAYoB,EAAM+tC,EAAOplC,SAASolC,EAAO9tC,QAC5DrB,KAAK,QAAS,IACdA,KAAK,SAAU,GACfA,KAAK,IAAK,IACVA,KAAK,IAAK,IACVA,KAAK,OAAQ,WAGlB,MAAM0vC,EAAU1B,EAASjuC,OAAO,KAC3B4D,QAAQ,cAAc,GAErBgsC,EAAWD,EAAQ3vC,OAAO,KAC3B4D,QAAQ,gBAAgB,GACxB3D,KAAK,YAAc,aAAYmvC,EAAOxvC,OAAO4B,KAAK4tC,EAAOxvC,OAAO6B,MAErEmuC,EAASpsC,UAAU,QAAQzO,KAAK07C,GAAShtC,QAAQzD,OAAO,QACnD4D,QAAS,2BAA0B,GACnC3D,KAAK,YAAa/I,GAAM,aAAYq4C,EAAOr4C,SAC3C+I,KAAK,KAAM,GACXA,KAAK,KAAM,IACXoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK/sC,GAAKA,GAEf04C,EAAS5vC,OAAO,QACX4D,QAAS,2BAA0B,GACnC3D,KAAK,YAAc,aAAYmvC,EAAOH,iBACtChvC,KAAK,KAAM,IACXA,KAAK,KAAM,GACXA,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,KAEV2L,EAAS5vC,OAAO,QACX4D,QAAQ,4BAA4B,GACpC3D,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAMmvC,EAAOH,YAClBhvC,KAAK,KAAM,GACXA,KAAK,SAAU,WACfA,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,SAE5B,MAAM6vC,EAAWH,EAAQ3vC,OAAO,KAC3B4D,QAAQ,gBAAgB,GACxB3D,KAAK,YAAc,aAAYmvC,EAAOxvC,OAAO4B,KAAK4tC,EAAO9tC,QAa9DwuC,EAAStsC,UAAU,QAAQzO,KAAKo6C,GAAS1rC,QAAQzD,OAAO,QACnD4D,QAAS,2BAA0B,GACnC3D,KAAK,YAAa/I,GAAM,eAAck4C,EAAOJ,YAAcU,EAAOx4C,OAClE+I,KAAK,MAAO,IACZA,KAAK,KAAM,GACXoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK/sC,GAAKA,GAEf44C,EAAS9vC,OAAO,QACX4D,QAAQ,4BAA4B,GACpC3D,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAMmvC,EAAOJ,aAClB/uC,KAAK,SAAU,WACfA,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,SAE5B6vC,EAAS9vC,OAAO,QACX4D,QAAS,2BAA0B,GACnC3D,KAAK,MAAO,IACZA,KAAK,MAAO,GACZoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,KAGV,MAAM8L,EAAU9B,EAASjuC,OAAO,KAC3B4D,QAAQ,cAAc,GAErBitC,EAAYd,EAAQ/vC,OAAO,KAC5B4D,QAAQ,gBAAgB,GACxB3D,KAAK,YAAc,aAAYmvC,EAAOhuC,QAAQguC,EAAO9tC,QAE1DuvC,EAAUrtC,UAAU,UAAUzO,KAAK47C,GAAcltC,QAAQzD,OAAO,UAC3D4D,QAAQ,qBAAqB,GAC7B3D,KAAK,KAAM/I,GAAKq4C,EAAOr4C,EAAE,KACzB+I,KAAK,KAAM/I,GAAKk4C,EAAOJ,YAAYU,EAAOx4C,EAAE,KAC5C+I,KAAK,IAAK,GACVA,KAAK,OAAQ,WAElB,MAAM6wC,EAAYf,EAAQ/vC,OAAO,KAC5B4D,QAAQ,gBAAgB,GACxB3D,KAAK,YAAc,aAAYmvC,EAAOhuC,QAAQguC,EAAO9tC,QAE1DwvC,EAAUttC,UAAU,UAAUzO,KAAK67C,GAAcntC,QAAQzD,OAAO,UAC3D4D,QAAQ,qBAAqB,GAC7B3D,KAAK,KAAM/I,GAAKq4C,EAAOr4C,EAAE,KACzB+I,KAAK,KAAM/I,GAAKk4C,EAAOJ,YAAYU,EAAOx4C,EAAE,KAC5C+I,KAAK,IAAK,GACVA,KAAK,OAAQ,WAalB,MAAM+vC,EAAW/B,EAASjuC,OAAO,KAC5B4D,QAAQ,eAAe,GAC5BosC,EAAShwC,OAAO,QACX4D,QAAQ,0BAA0B,GAClC3D,KAAK,YAAc,aAAYmvC,EAAOhuC,KAAOguC,EAAOH,WAAa,KAAKG,EAAO9tC,QAC7ErB,KAAK,MAAO,IACZA,KAAK,KAAM,GACXA,KAAK,YAAa,IAClBoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,8BCtOP,MAAM8M,WAAqB1D,GAChCx0C,cACE4B,QACAR,KAAK88B,cAAgB1B,GAAce,UAGrC52B,OACE,MAAM2yB,EAAUl4B,KAAKszC,iBAAiBpb,SAChC,MAAC9wB,EAAK,OAAEE,GAAUtH,KAAKuzC,gBAEtBwD,EAAU,CAAE,GAAK,GAAI,IACtBC,EAAc,GACdC,EAAc,GAUdC,EAAUjyC,SAAS8xC,GACnBI,EAAY,CAAC,UAAU,UAAU,WACjC/nC,EAAQnK,OAAgBkyC,GACxBpD,EAAW,CAAC,QAAS,SAAU,SAE/B5H,EAAMlnC,SACPgyC,YAAYA,GACZD,YAAYA,GACZI,SAAS,KAERpD,EAAW9b,EAAQnyB,OAAO,KAC3B4D,QAAQ,eAAe,GAEtB0tC,EAAOrD,EAASjuC,OAAO,KACxB4D,QAAQ,cAAc,GAE3B0tC,EAAK9tC,UAAU,QAAQzO,KAAKo8C,GAAS1tC,QAAQzD,OAAO,QAC/Cu7B,MAAK,SAASrkC,EAAG7B,GAChB6J,OAAUjF,MAAM2J,QAAS,kCAAiCoqC,EAAS34C,IAAM,MAE1E4K,KAAK,YAAa,aAAgBoB,EAAQ,EAAK,KAAOE,EAAS,EAAE,IAAI,KACrEtB,KAAK,OAAQ,CAAC/I,EAAG7B,IACPgU,EAAMhU,IAEhB4K,KAAK,IAAM/I,GACDkvC,EAAIlvC,IAGnB,MAAMq6C,EAAYtD,EAASjuC,OAAO,KAC7B4D,QAAQ,eAAe,GAE5B2tC,EAAU/tC,UAAU,QAAQzO,KAAKo8C,GAAS1tC,QAAQzD,OAAO,QACpDu7B,MAAK,SAASrkC,EAAG7B,GAChB6J,OAAUjF,MAAM2J,QAAS,6BAA4BoqC,EAAS34C,IAAM,MAGrE4K,KAAK,YAAc/I,GACX,aAAekvC,EAAIoL,SAASt6C,GAAK,KAEzC+I,KAAK,KAAM,KACXA,KAAK,KAAM,IACXA,KAAK,OAAQ,SACbA,KAAK,cAAe,UACpBgkC,KAAM/sC,GACEA,EAAEnC,KAAO,MClEnB,MAAM08C,WAA+BpE,GAC1Cx0C,cACE4B,QACAR,KAAK88B,cAAgB1B,GAAcgB,gBAGrC72B,OACE,MAAM2yB,EAAUl4B,KAAKszC,iBAAiBpb,SAChC,MAAC9wB,EAAK,OAAEE,GAAUtH,KAAKuzC,gBAEtBwD,EAAU,CAAE,GAAK,GAAI,IACtBC,EAAc,GACdC,EAAc,GAEd9B,EAAS,IAAIV,GAAY,CAC7BrtC,QAAOE,SACPotC,SAAU,GACVC,YAAa,IACbC,UAAW,GACXC,WAAY,MAGRqC,EAAUjyC,SAAS8xC,GACnBI,EAAY,CAAC,UAAU,UAAU,WACjC/nC,EAAQnK,OAAgBkyC,GACxBhL,EAAMlnC,SACPgyC,YAAYA,GACZD,YAAYA,GACZI,SAAS,KACRrD,EAAW,CAAC,QAAS,SAAU,SAE/BC,EAAW9b,EAAQnyB,OAAO,KAC3B4D,QAAQ,eAAe,GAEtB0tC,EAAOrD,EAASjuC,OAAO,KACxB4D,QAAQ,cAAc,GAErB2tC,EAAYtD,EAASjuC,OAAO,KAC7B4D,QAAQ,eAAe,GAEtBysC,EAAYpC,EAASjuC,OAAO,KAC7B4D,QAAQ,cAAc,GA0B3B,IAAK,IAAIvO,EAAE,EAAEA,EAAE27C,EAAQz7C,OAAOF,IAE1Bi8C,EAAKtxC,OAAO,QACP4D,QAAQ,kCAAoCoqC,EAAS34C,IAAI,GACzD4K,KAAK,YAAa,cAAgBoB,EAAQ,EAAE,IAAM,KAAOE,EAAS,EAAE,IAAI,KACxEtB,KAAK,OAAQoJ,EAAMhU,IACnB4K,KAAK,IAAKmmC,EAAI+K,EAAQ97C,KAE3Bk8C,EAAUvxC,OAAO,QACZ4D,QAAQ,wBAA0BoqC,EAAS34C,IAAI,GAC/C4K,KAAK,YAAa,aAAemmC,EAAIoL,SAASL,EAAQ97C,IAAM,KAC5D4K,KAAK,KAAM,IACXA,KAAK,KAAM,IACXA,KAAK,OAAQ,SACbA,KAAK,cAAe,UACpBgkC,KAAKkN,EAAQ97C,GAAGN,KAAK,KAE1Bs7C,EAAUrwC,OAAO,QACZ4D,QAAS,kCAAmCoqC,EAAS34C,IAAI,GACzD4K,KAAK,YAAc,aAAYoB,EAAM,MAAM+tC,EAAO9tC,QAClDrB,KAAK,KAAM,GACXA,KAAK,KAAM,IAAI5K,EAAE,GAAG,GACpB4K,KAAK,cAAe,QACpBA,KAAK,OAAQoJ,EAAMhU,IACnB4uC,KAAK,MAEToM,EAAUrwC,OAAO,QACb4D,QAAQ,mCAAsCoqC,EAAS34C,IAAI,GAC3D4K,KAAK,YAAc,aAAYoB,EAAM,MAAM+tC,EAAO9tC,QAClDrB,KAAK,QAAS,IACdA,KAAK,SAAU,GACfA,KAAK,IAAK,IACVA,KAAK,IAAK,GAAG5K,GACb4K,KAAK,OAAQoJ,EAAMhU,KCpGzB,MAAMq8C,WAAsBrE,GACjCx0C,cACE4B,QACAR,KAAK88B,cAAgB1B,GAAcQ,KAGrCr2B,OACE,MAAM2yB,EAAUl4B,KAAKszC,iBAAiBpb,SAChC,MAAC9wB,EAAK,OAAEE,GAAUtH,KAAKuzC,gBAEvBS,EAAW9b,EAAQnyB,OAAO,KAC3B4D,QAAQ,eAAe,GAEtB+tC,EAAgB1D,EAASjuC,OAAO,KACjC4D,QAAQ,oBAAoB,GAIjC+tC,EAAc3xC,OAAO,QAChB4D,QAAQ,2BAA2B,GACnC3D,KAAK,YAAa,aAAgBoB,EAAQ,EAAK,KAAOE,EAAS,EAAE,IAAI,KACrEtB,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,YAAa,IAClBoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,QC3BP,MAAM2N,WAAuBvE,GAClCx0C,cACE4B,QACAR,KAAK88B,cAAgB1B,GAAcE,MAGrC/1B,OACE,MAAM2yB,EAAUl4B,KAAKszC,iBAAiBpb,SAChC,MAAC9wB,EAAK,OAAEE,GAAUtH,KAAKuzC,gBAGvBS,EAAW9b,EAAQnyB,OAAO,KAC3B4D,QAAQ,eAAe,GAEtBosC,EAAW/B,EAASjuC,OAAO,KAC5B4D,QAAQ,eAAe,GAG5BosC,EAAShwC,OAAO,QACX4D,QAAQ,0BAA0B,GAClC3D,KAAK,YAAa,aAAgBoB,EAAQ,EAAK,IAAOE,EAAS,EAAG,KAClEtB,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,YAAa,IAClBoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,cAEV+L,EAAShwC,OAAO,QACX4D,QAAQ,yBAAyB,GACjC3D,KAAK,YAAa,aAAgBoB,EAAQ,EAAK,KAAOE,EAAS,EAAE,IAAI,KACrEtB,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,YAAa,IAClBoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,iBCtCP,MAAM4N,WAAsBxE,GACjCx0C,cACE4B,QACAR,KAAK88B,cAAgB1B,GAAciB,WAGrC92B,OACE,MAAM2yB,EAAUl4B,KAAKszC,iBAAiBpb,SAChC,MAAC9wB,EAAK,OAAEE,GAAUtH,KAAKuzC,gBAEvBgD,EAAY,CACd,CAAC,EAAE,IACH,CAAC,GAAG,IACJ,CAAC,GAAG,IACJ,CAAC,GAAG,KAGFC,EAAU,CAAC,EAAG,GAAI,IAClBtB,EAAU,CAAC,GAAI,IACfC,EAAS,IAAIV,GAAY,CAC7BrtC,QAAOE,SACPotC,SAAU,GACVC,YAAa,IACbC,UAAW,GACXC,WAAY,KAERO,EAAgB,GAChBC,EAAiB,GAEjBC,EAASrwC,SACVswC,OAAO,CAAC,EAAGtwC,OAAOsxC,EAAat5C,GAAKA,EAAE,IAAMm4C,IAC5CI,MAAM,CAAC,EAAGL,EAAOH,aAEhBS,EAASxwC,SACVswC,OAAO,CAAC,EAAGtwC,OAAOsxC,EAAat5C,GAAKA,EAAE,IAAMo4C,IAC5CG,MAAM,CAAC,EAAGL,EAAOJ,cAEhBf,EAAW9b,EAAQnyB,OAAO,KAC3B4D,QAAQ,eAAe,GAGtB+rC,EAAU1B,EAASjuC,OAAO,KAC3B4D,QAAQ,cAAc,GAErBgsC,EAAWD,EAAQ3vC,OAAO,KAC3B4D,QAAQ,gBAAgB,GACxB3D,KAAK,YAAc,aAAYmvC,EAAOxvC,OAAO4B,KAAK4tC,EAAOxvC,OAAO6B,MAErEmuC,EAASpsC,UAAU,QAAQzO,KAAK07C,GAAShtC,QAAQzD,OAAO,QACnD4D,QAAS,2BAA0B,GACnC3D,KAAK,YAAa/I,GAAM,aAAYq4C,EAAOr4C,SAC3C+I,KAAK,KAAM,GACXA,KAAK,KAAM,IACXoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK/sC,GAAKA,GAEf04C,EAAS5vC,OAAO,QACX4D,QAAS,2BAA0B,GACnC3D,KAAK,YAAc,aAAYmvC,EAAOH,iBACtChvC,KAAK,KAAM,IACXA,KAAK,KAAM,GACXA,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,KAEV2L,EAAS5vC,OAAO,QACX4D,QAAQ,4BAA4B,GACpC3D,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAMmvC,EAAOH,YAClBhvC,KAAK,KAAM,GACXA,KAAK,SAAU,WACfA,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,SAE5B,MAAM6vC,EAAWH,EAAQ3vC,OAAO,KAC3B4D,QAAQ,gBAAgB,GACxB3D,KAAK,YAAc,aAAYmvC,EAAOxvC,OAAO4B,KAAK4tC,EAAO9tC,QAE9DwuC,EAAStsC,UAAU,QAAQzO,KAAKo6C,GAAS1rC,QAAQzD,OAAO,QACnD4D,QAAS,2BAA0B,GACnC3D,KAAK,YAAa/I,GAAM,eAAck4C,EAAOJ,YAAcU,EAAOx4C,OAClE+I,KAAK,MAAO,IACZA,KAAK,KAAM,GACXoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK/sC,GAAKA,GAEf44C,EAAS9vC,OAAO,QACX4D,QAAQ,4BAA4B,GACpC3D,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAMmvC,EAAOJ,aAClB/uC,KAAK,SAAU,WACfA,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,SAE5B6vC,EAAS9vC,OAAO,QACX4D,QAAS,2BAA0B,GACnC3D,KAAK,MAAO,IACZA,KAAK,MAAO,GACZoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,KAIV,MAAM8L,EAAU9B,EAASjuC,OAAO,KAC3B4D,QAAQ,cAAc,GAErBkuC,EAAW/B,EAAQ/vC,OAAO,KAC3B4D,QAAQ,eAAe,GACvB3D,KAAK,YAAc,aAAYmvC,EAAOhuC,QAAQguC,EAAO9tC,QAE1DwwC,EAAStuC,UAAU,QAAQzO,KAAKy7C,GAAa/sC,QAAQzD,OAAO,QACvD4D,QAAQ,oBAAoB,GAE5B3D,KAAK,KAAM/I,GAAIq4C,EAAOr4C,EAAE,KACxB+I,KAAK,KAAM/I,GAAIk4C,EAAOJ,YAAYU,EAAOx4C,EAAE,IAAI,IAC/CmN,MAAM,cAAe,UAErBpE,KAAK,OAAQ,WACbgkC,KAAK/sC,GAAKA,EAAE,IAEjB,MAAM66C,EAAahC,EAAQ/vC,OAAO,KAC7B4D,QAAQ,cAAc,GACtB3D,KAAK,YAAc,aAAYmvC,EAAOhuC,QAAQguC,EAAO9tC,QAE1DywC,EAAWvuC,UAAU,UAAUzO,KAAKy7C,GAAa/sC,QAAQzD,OAAO,UAC3D4D,QAAQ,qBAAqB,GAC7B3D,KAAK,KAAM/I,GAAKq4C,EAAOr4C,EAAE,KACzB+I,KAAK,KAAM/I,GAAKk4C,EAAOJ,YAAYU,EAAOx4C,EAAE,KAC5C+I,KAAK,IAAK,GACVA,KAAK,OAAQ,WAGlB,MAAM+xC,EAAUjC,EAAQ/vC,OAAO,KAC1B4D,QAAQ,cAAc,GAE3B,IAAK,IAAIvO,EAAE,EAAEA,EAAEm7C,EAAYj7C,OAAOF,IAC9Bm7C,EAAYn7C,GAAG,GAAGk6C,EAAOiB,EAAYn7C,GAAG,IACxCm7C,EAAYn7C,GAAG,GAAG+5C,EAAOJ,YAAYU,EAAOc,EAAYn7C,GAAG,IAG/D28C,EAAQhyC,OAAO,YACV4D,QAAQ,mBAAmB,GAC3B3D,KAAK,YAAc,aAAYmvC,EAAOhuC,QAAQguC,EAAO9tC,QACrDrB,KAAK,SAASuwC,GACdvwC,KAAK,OAAO,QACZA,KAAK,SAAU,WACfA,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,SAmB5B,MAAM+vC,EAAW/B,EAASjuC,OAAO,KAC5B4D,QAAQ,eAAe,GAC5BosC,EAAShwC,OAAO,QACX4D,QAAQ,0BAA0B,GAClC3D,KAAK,YAAc,aAAYmvC,EAAOhuC,KAAOguC,EAAOH,WAAa,KAAKG,EAAO9tC,QAC7ErB,KAAK,MAAO,IACZoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,eCxLP,MAAMgO,WAAgC5E,GAC3Cx0C,cACE4B,QACAR,KAAK88B,cAAgB1B,GAAckB,uBAGrC/2B,OACE,MAAM2yB,EAAUl4B,KAAKszC,iBAAiBpb,SAChC,MAAC9wB,EAAK,OAAEE,GAAUtH,KAAKuzC,gBAEvB0E,EAAM,CACR,CAAC,EAAE,IACH,CAAC,GAAG,IACJ,CAAC,GAAG,IACJ,CAAC,GAAG,KAEFC,EAAM,CACR,CAAC,EAAE,IACH,CAAC,GAAG,IACJ,CAAC,GAAG,IACJ,CAAC,GAAG,KAEF1B,EAAU,CAAC,EAAG,GAAI,IAClBtB,EAAU,CAAC,GAAI,IACfC,EAAS,IAAIV,GAAY,CAC7BrtC,QAAOE,SACPotC,SAAU,GACVC,YAAa,IACbC,UAAW,GACXC,WAAY,KAERO,EAAgB,GAChBC,EAAiB,GAEjBC,EAASrwC,SACVswC,OAAO,CAAC,EAAGtwC,OAAOgzC,EAAOh7C,GAAKA,EAAE,IAAMm4C,IACtCI,MAAM,CAAC,EAAGL,EAAOH,aAEhBS,EAASxwC,SACVswC,OAAO,CAAC,EAAGtwC,OAAOgzC,EAAOh7C,GAAKA,EAAE,IAAMo4C,IACtCG,MAAM,CAAC,EAAGL,EAAOJ,cAEhBf,EAAW9b,EAAQnyB,OAAO,KAC3B4D,QAAQ,eAAe,GAGtB+rC,EAAU1B,EAASjuC,OAAO,KAC3B4D,QAAQ,cAAc,GAErBgsC,EAAWD,EAAQ3vC,OAAO,KAC3B4D,QAAQ,gBAAgB,GACxB3D,KAAK,YAAc,aAAYmvC,EAAOxvC,OAAO4B,KAAK4tC,EAAOxvC,OAAO6B,MAErEmuC,EAASpsC,UAAU,QAAQzO,KAAK07C,GAAShtC,QAAQzD,OAAO,QACnD4D,QAAS,2BAA0B,GACnC3D,KAAK,YAAa/I,GAAM,aAAYq4C,EAAOr4C,SAC3C+I,KAAK,KAAM,GACXA,KAAK,KAAM,IACXoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK/sC,GAAKA,GAEf04C,EAAS5vC,OAAO,QACX4D,QAAS,2BAA0B,GACnC3D,KAAK,YAAc,aAAYmvC,EAAOH,iBACtChvC,KAAK,KAAM,IACXA,KAAK,KAAM,GACXA,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,KAEV2L,EAAS5vC,OAAO,QACX4D,QAAQ,4BAA4B,GACpC3D,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAMmvC,EAAOH,YAClBhvC,KAAK,KAAM,GACXA,KAAK,SAAU,WACfA,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,SAE5B,MAAM6vC,EAAWH,EAAQ3vC,OAAO,KAC3B4D,QAAQ,gBAAgB,GACxB3D,KAAK,YAAc,aAAYmvC,EAAOxvC,OAAO4B,KAAK4tC,EAAO9tC,QAE9DwuC,EAAStsC,UAAU,QAAQzO,KAAKo6C,GAAS1rC,QAAQzD,OAAO,QACnD4D,QAAS,2BAA0B,GACnC3D,KAAK,YAAa/I,GAAM,eAAck4C,EAAOJ,YAAcU,EAAOx4C,OAClE+I,KAAK,MAAO,IACZA,KAAK,KAAM,GACXoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK/sC,GAAKA,GAEf44C,EAAS9vC,OAAO,QACX4D,QAAQ,4BAA4B,GACpC3D,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,KAAMmvC,EAAOJ,aAClB/uC,KAAK,SAAU,WACfA,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,SAE5B6vC,EAAS9vC,OAAO,QACX4D,QAAS,2BAA0B,GACnC3D,KAAK,MAAO,GACZA,KAAK,MAAO,GACZoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,KAGV,MAAMoM,EAAYpC,EAASjuC,OAAO,KACjC4D,QAAQ,cAAc,GAGvBysC,EAAUrwC,OAAO,QACZ4D,QAAS,qBAAoB,GAC7B3D,KAAK,YAAc,aAAYoB,EAAM+tC,EAAOplC,SAASolC,EAAO9tC,QAC5DrB,KAAK,KAAM,GACXA,KAAK,KAAM,GACXA,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,MAEVoM,EAAUrwC,OAAO,QACZ4D,QAAQ,qBAAqB,GAC7B3D,KAAK,YAAc,aAAYoB,EAAM+tC,EAAOplC,SAASolC,EAAO9tC,QAC5DrB,KAAK,QAAS,IACdA,KAAK,SAAU,GACfA,KAAK,IAAK,IACVA,KAAK,IAAK,GACVA,KAAK,OAAQ,WAElBowC,EAAUrwC,OAAO,QACZ4D,QAAS,qBAAoB,GAC7B3D,KAAK,YAAc,aAAYoB,EAAM+tC,EAAOplC,SAASolC,EAAO9tC,QAC5DrB,KAAK,KAAM,GACXA,KAAK,KAAM,IACXA,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,MAEVoM,EAAUrwC,OAAO,QACZ4D,QAAQ,qBAAqB,GAC7B3D,KAAK,YAAc,aAAYoB,EAAM+tC,EAAOplC,SAASolC,EAAO9tC,QAC5DrB,KAAK,QAAS,IACdA,KAAK,SAAU,GACfA,KAAK,IAAK,IACVA,KAAK,IAAK,IACVA,KAAK,OAAQ,WAGlB,MAAM8vC,EAAU9B,EAASjuC,OAAO,KAC3B4D,QAAQ,cAAc,GAErBmuC,EAAahC,EAAQ/vC,OAAO,KAC7B4D,QAAQ,cAAc,GACtB3D,KAAK,YAAc,aAAYmvC,EAAOhuC,QAAQguC,EAAO9tC,QAEpD8wC,EAAcL,EAAW/xC,OAAO,KACjC4D,QAAQ,kBAAkB,GAE/BwuC,EAAY5uC,UAAU,UAAUzO,KAAKm9C,GAAOzuC,QAAQzD,OAAO,UACtD4D,QAAQ,qBAAqB,GAC7B3D,KAAK,KAAM/I,GAAKq4C,EAAOr4C,EAAE,KACzB+I,KAAK,KAAM/I,GAAKk4C,EAAOJ,YAAYU,EAAOx4C,EAAE,KAC5C+I,KAAK,IAAK,GACVA,KAAK,OAAQ,WAElB,MAAMoyC,EAAcN,EAAW/xC,OAAO,KACjC4D,QAAQ,kBAAkB,GAE/ByuC,EAAY7uC,UAAU,UAAUzO,KAAKo9C,GAAO1uC,QAAQzD,OAAO,UACtD4D,QAAQ,qBAAqB,GAC7B3D,KAAK,KAAM/I,GAAKq4C,EAAOr4C,EAAE,KACzB+I,KAAK,KAAM/I,GAAKk4C,EAAOJ,YAAYU,EAAOx4C,EAAE,KAC5C+I,KAAK,IAAK,GACVA,KAAK,OAAQ,WAElB,IAAK,IAAI5K,EAAE,EAAEA,EAAE68C,EAAM38C,OAAOF,IACxB68C,EAAM78C,GAAG,GAAGk6C,EAAO2C,EAAM78C,GAAG,IAC5B68C,EAAM78C,GAAG,GAAG+5C,EAAOJ,YAAYU,EAAOwC,EAAM78C,GAAG,IAGnD,IAAKA,EAAE,EAAEA,EAAE88C,EAAM58C,OAAOF,IACpB88C,EAAM98C,GAAG,GAAGk6C,EAAO4C,EAAM98C,GAAG,IAC5B88C,EAAM98C,GAAG,GAAG+5C,EAAOJ,YAAYU,EAAOyC,EAAM98C,GAAG,IAGnD,MAAM28C,EAAUjC,EAAQ/vC,OAAO,KAC1B4D,QAAQ,cAAc,GAErB0uC,EAAWN,EAAQhyC,OAAO,KAC3B4D,QAAQ,eAAe,GAe5B0uC,EAAStyC,OAAO,YACX4D,QAAQ,yBAAyB,GACjC3D,KAAK,YAAc,aAAYmvC,EAAOhuC,QAAQguC,EAAO9tC,QACrDrB,KAAK,SAASiyC,GACdjyC,KAAK,OAAO,QACZA,KAAK,SAAU,WACfA,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,SAE5B,MAAMsyC,EAAWP,EAAQhyC,OAAO,KAC3B4D,QAAQ,eAAe,GAe5B2uC,EAASvyC,OAAO,YACX4D,QAAQ,0BAA0B,GAClC3D,KAAK,YAAc,aAAYmvC,EAAOhuC,QAAQguC,EAAO9tC,QACrDrB,KAAK,SAASkyC,GACdlyC,KAAK,OAAO,QACZA,KAAK,SAAU,WACfA,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,SAG5B,MAAM+vC,EAAW/B,EAASjuC,OAAO,KAC5B4D,QAAQ,eAAe,GAC5BosC,EAAShwC,OAAO,QACX4D,QAAQ,0BAA0B,GAClC3D,KAAK,YAAc,aAAYmvC,EAAOhuC,KAAOguC,EAAOH,WAAa,KAAKG,EAAO9tC,QAC7ErB,KAAK,MAAO,IACZoE,MAAM,cAAe,UACrBpE,KAAK,cAAe,QACpBA,KAAK,OAAQ,WACbgkC,KAAK,2BCjQP,MAAMuO,WAAsBnF,GACjCx0C,cACE4B,QACAR,KAAK88B,cAAgB1B,GAAcO,KAGrCp2B,OACE,MAAM2yB,EAAUl4B,KAAKszC,iBAAiBpb,SAChC,MAAC9wB,EAAK,OAAEE,GAAUtH,KAAKuzC,gBAEvBgD,EAAY,CACd,CAAC,EAAE,IACH,CAAC,GAAG,IACJ,CAAC,GAAG,IACJ,CAAC,EAAE,IACH,CAAC,EAAE,KAGDpB,EAAS,IAAIV,GAAY,CAC7BrtC,QAAOE,SACPotC,SAAU,GACVC,YAAa,IACbC,UAAW,GACXC,WAAY,KAERO,EAAgB,GAChBC,EAAiB,GAEjBC,EAASrwC,SACVswC,OAAO,CAAC,EAAGtwC,OAAOsxC,EAAat5C,GAAKA,EAAE,IAAMm4C,IAC5CI,MAAM,CAAC,EAAGL,EAAOH,aAEhBS,EAASxwC,SACVswC,OAAO,CAAC,EAAGtwC,OAAOsxC,EAAat5C,GAAKA,EAAE,IAAMo4C,IAC5CG,MAAM,CAAC,EAAGL,EAAOJ,cAEhBf,EAAW9b,EAAQnyB,OAAO,KAC3B4D,QAAQ,eAAe,GAItB+tC,EAAgB1D,EAASjuC,OAAO,KACjC4D,QAAQ,oBAAoB,GAGjC,IAAK,IAAIvO,EAAE,EAAEA,EAAEm7C,EAAYj7C,OAAOF,IAC9Bm7C,EAAYn7C,GAAG,GAAGk6C,EAAOiB,EAAYn7C,GAAG,IACxCm7C,EAAYn7C,GAAG,GAAG+5C,EAAOJ,YAAYU,EAAOc,EAAYn7C,GAAG,IAG/Ds8C,EAAc3xC,OAAO,YAChB4D,QAAQ,yBAAyB,GACjC3D,KAAK,YAAc,aAAYmvC,EAAOhuC,QAAQguC,EAAO9tC,QACrDrB,KAAK,SAASuwC,GACdvwC,KAAK,OAAO,QACZA,KAAK,SAAU,WACfA,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,UC1DzB,MAAMwyC,WAA2BpF,GACtCx0C,cACE4B,QACAR,KAAK88B,cAAgB1B,GAAcK,UAIrCl2B,OACE,MAAM2yB,EAAUl4B,KAAKszC,iBAAiBpb,SAChC,MAAC9wB,EAAK,OAAEE,GAAUtH,KAAKuzC,gBACvBI,EAAW,GAAIC,EAAS,EACxBC,EAAgB,CAAC,GAAI,GAAI,IACzBC,EAAaD,EAAcv4C,OAASq4C,GAAYE,EAAcv4C,OAAS,GAAKs4C,EAC5EzsC,GAAQC,EAAQ0sC,GAAc,EAC9BnoC,GAAUrE,EAASL,KAAKyK,OAAOmiC,IAAkB,EACjDE,EAAW,CAAC,QAAS,SAAU,QAAS,SAExCC,EAAW9b,EAAQnyB,OAAO,KAC3B4D,QAAQ,eAAe,GAEtBsqC,EAASD,EAASjuC,OAAO,KAC1B4D,QAAQ,cAAc,GAC3BsqC,EAAO1qC,UAAU,cAAczO,KAAK+4C,GAAerqC,QAAQzD,OAAO,QAC7Du7B,MAAK,SAASrkC,EAAG7B,GAChB6J,OAAUjF,MAAM2J,QAAS,aAAYoqC,EAAS34C,IAAM,MAErD4K,KAAK,QAAS2tC,GACd3tC,KAAK,SAAU/I,GAAKA,GACpB+I,KAAK,IAAK,CAAC/I,EAAG7B,IAAM+L,GAAQ/L,EAAI,GAAKw4C,EAASx4C,EAAIu4C,GAClD3tC,KAAK,IAAO/I,GAAM0O,EAAS1O,GAC3B+I,KAAK,OAAQ,WACbA,KAAK,KAAM,GACXA,KAAK,KAAM,GAEhBguC,EAASjuC,OAAO,QACXC,KAAK,QAAS2tC,GACd3tC,KAAK,SAAU,IACfA,KAAK,IAAKmB,EAAO,EAAUysC,EAAS,EAAID,GACxC3tC,KAAK,IAAK2F,EAAO,IACjB3F,KAAK,OAAQ,WACbA,KAAK,KAAM,GACXA,KAAK,KAAM,GAEhBguC,EAASjuC,OAAO,QACX4D,QAAQ,oBAAoB,GAC5B3D,KAAK,KAAMmB,GACXnB,KAAK,KAAM2F,GACX3F,KAAK,KAAMmB,EAAO2sC,GAClB9tC,KAAK,KAAM2F,GACX3F,KAAK,SAAU,WACfA,KAAK,eAAgB,GACrBA,KAAK,iBAAkB,UCpCzB,MAAMyyC,GAAoB,CAC7B,IAAIhF,GACJ,IAAIC,GACJ,IAAIQ,GACJ,IAAIE,GACJ,IAAII,GACJ,IAAIS,GACJ,IAAIe,GACJ,IAAIK,GACJ,IAAIC,GACJ,IAAIG,GACJ,IAAIK,GACJ,IAAIU,GACJ,IAAIC,GACJ,IAAIE,GACJ,IAAIC,GACJ,IAAII,GACJ,IAAIO,GACJ,IAAIC,ICjCR,SAASviB,GAAgB73B,EAAQ83B,GACjB,MAAV93B,GACJ+3B,GAA2B/3B,EAAQ83B,GAQrC,SAASC,GAA2B/3B,EAAQ83B,GAC1C,GAAc,MAAV93B,GAAoC,kBAAXA,EAAqB,OAAO,EAEzD,IAAK,IAAIH,KAAO1C,OAAOqE,KAAKxB,GAAS,CACnC,MAAMgV,EAAOhV,EAAOH,GACpB,IAAIm4B,EAAYF,EAAKj4B,EAAKmV,EAAMhV,GAChC,GAAIg4B,EAAW,OAAO,EACtBD,GAA2B/iB,EAAM8iB,GAEnC,OAAO,EAGF,MAAMwiB,GAAc,CACzBziB,gBAAeA,ICdjB,SAAS0iB,GAAc3tB,GACrBhrB,KAAKgrB,QAAUA,EAGV,MAAM4tB,GAUXh6C,cATAC,gBAAA,sBAEAA,gBAAA,yBAEAA,gBAAA,2BAEAA,gBAAA,gCAIEmB,KAAK64C,OAAS,IAAIzhB,GAElBp3B,KAAKq5B,YAAc,IAAImB,GACvB+U,GAAiBtvC,QAAQrC,GAAKoC,KAAKq5B,YAAYsB,wBAAwB/8B,IAEvEoC,KAAK84C,iBAAoB,IAAItb,GAAiBx9B,KAAKq5B,aACnD8Z,GAAgBlzC,QAAQgJ,GAAKjJ,KAAK84C,iBAAiBnb,uBAAuB10B,IAC1EwvC,GAAkBx4C,QAAQ3B,GAAK0B,KAAK84C,iBAAiBjb,kBAAkBv/B,IASzEmO,QAAQssC,EAAmBltB,EAAesU,EAAK,IAC7C59B,QAAQyR,IAAI,gBAAiB6X,GAEC,MAA1BA,EAAcmtB,UAA8C,MAA1BntB,EAAcnM,WAClDmM,EAAgB7rB,KAAKi5C,4BAA4BptB,EAAeA,EAAcmtB,WAGhFN,GAAYziB,gBAAgBpK,EAAe,CAAC5tB,EAAK04B,EAASC,KACpDD,GAA+B,MAApBA,EAAQqiB,UAAwC,MAApBriB,EAAQjX,WACjDkX,EAAO34B,GAAO+B,KAAKi5C,4BAA4BtiB,EAASA,EAAQqiB,aAGpE,MAAMv3C,EAAY+zB,GAAgB/B,SAAS5H,GAC3C,IAAKpqB,EACH,MAAM,IAAIk3C,GAAc,iBAG1B,MAAMzgB,EAAUjzB,OAAU8zC,GAC1B/4C,KAAKk5C,UAAY,IAAI9e,GACrBp6B,KAAKk5C,UAAUtlC,KAAKskB,EAASl4B,KAAKq5B,YAAa53B,GAE/Cy2B,EAAQ3uB,UAAU,KAAK+3B,MAAK,WAC1BthC,KAAK64B,UAAY,GACU,oBAAhB74B,KAAK+4B,SACd/4B,KAAK64B,UAAUC,IAAM94B,KAAK+4B,aAG9B,MAAMogB,EAAiBn5C,KAAKk5C,UAAU5e,WAEhCrY,EAAW4S,QAAK5S,SAAS,CAACm3B,oBAAoB,KAAUjZ,IAG9D,OAFAle,EAASyS,IAAIykB,GACbl3B,EAAS8B,QACF9B,EAQT/gB,wBAAwB63C,EAAmBj3C,GACzC,MAAMu3C,EAAep0C,OAAU8zC,GAAmB3wB,OAE5C8P,EAAUjzB,OAAUo0C,EAAarhB,WAAU,IAIjD,OAHAh4B,KAAKk5C,UAAY,IAAI9e,GACrBp6B,KAAKk5C,UAAUtlC,KAAKskB,EAASl4B,KAAKq5B,YAAa,MAExCr5B,KAAKk5C,UAAUh4C,wBAAwBY,GAShDP,gBAAgBw3C,EAAmBltB,EAAemtB,GAChC,MAAZA,IACFntB,EAAgB7rB,KAAKi5C,4BAA4BptB,EAAemtB,IAElE,MAAMv3C,EAAY+zB,GAAgB/B,SAAS5H,GAErCwtB,EAAep0C,OAAU8zC,GAAmB3wB,OAE5C8P,EAAUjzB,OAAUo0C,EAAarhB,WAAU,IAIjD,OAHAh4B,KAAKk5C,UAAY,IAAI9e,GACrBp6B,KAAKk5C,UAAUtlC,KAAKskB,EAASl4B,KAAKq5B,YAAa53B,GAExCzB,KAAKk5C,UAAU33C,mBAAqB,EAG7C03C,4BAA4BptB,EAAemtB,GACzC,MAAMM,EAAU/iB,GAAUF,SAASxK,GAoBnC,OAnBA0K,GAAUN,gBAAgBqjB,EAAS,CAACr7C,EAAK04B,EAASC,KAChD,GAAuB,kBAAZD,GAAyBA,EAAQtkB,SAAS,KAIrD,GADAskB,EAAUA,EAAQnO,OACdmO,EAAQE,MAAM,oBAAqB,CACrC,MAAMn0B,EAAYi0B,EAAQG,OAAO,GAC7Bp0B,KAAas2C,IACfpiB,EAAO34B,GAAO+6C,EAASt2C,QAEpB,CACL,IAAIvG,EAASw6B,EACbp7B,OAAOqE,KAAKo5C,GAAU/4C,QAAQyC,IAC5BvG,EAASA,EAAO2H,WAAW,IAAMpB,EAAWs2C,EAASt2C,MAEvDk0B,EAAO34B,GAAO9B,KAGlBoG,QAAQyR,IAAI,gBAAiBslC,GACtBA,GCpIH,MAAMC,GAAgB,CAC1B/d,QAAS,UACTge,KAAM,OACN7c,WAAY,aACZ8c,MAAO,SCRJ,MAAMC,GAQT96C,YACI1B,EACAy8C,EACAC,EACAC,EACA9c,EACA+c,GACFj7C,gBAAA,oBAAAA,gBAAA,2BAAAA,gBAAA,2BAAAA,gBAAA,6BAAAA,gBAAA,6BAAAA,gBAAA,0BACEmB,KAAK9C,KAAOA,EACZ8C,KAAK25C,YAAcA,EACnB35C,KAAK45C,YAAcA,EACnB55C,KAAK65C,cAAgBA,EACrB75C,KAAK+8B,cAAgBA,EACrB/8B,KAAK85C,WAAaA,EAGtB73C,QACI,OAAO,IAAIy3C,GACP15C,KAAK9C,KACL8C,KAAK25C,YACL35C,KAAK45C,YACL55C,KAAK65C,cACL75C,KAAK+8B,cACL/8B,KAAK85C,YAIbC,UACI,OAAO/5C,KAAK9C,KAGhB88C,iBACI,OAAOh6C,KAAK25C,YAGhBM,iBACI,OAAOj6C,KAAK45C,YAGhBM,mBACI,OAAOl6C,KAAK65C,cAGhBM,mBACI,OAAOn6C,KAAK+8B,cAGhBqd,gBACI,OAAOp6C,KAAK85C,WAGhB5uB,eAAeC,GACX,MAAMD,EAAiB,GAQvB,OAPAC,EAAelrB,QAAQo6C,IACnB,MAAMC,EAAQD,EAAI1W,WACd3jC,KAAK25C,YAAYY,KAAKl0B,GAAMi0B,EAAMjoC,SAASgU,KAC3CrmB,KAAK45C,YAAYW,KAAKl0B,GAAMi0B,EAAMjoC,SAASgU,MAC3C6E,EAAetvB,KAAKy+C,KAGrBnvB,EAGXsvB,SAAS75C,GACL,MAAM85C,EAAK95C,EAAOgjC,UAClB,OAAO8W,EAAGpoC,SAAS,YAAcooC,EAAGpoC,SAAS,YACtCooC,EAAGpoC,SAAS,iBAAmBooC,EAAGpoC,SAAS,gBAGtDqoC,SAAS/5C,EAAQg6C,GACb,MAAMF,EAAK95C,EAAOgjC,UAClB,IAAIiX,EAAS,GAKb,OAJAD,EAAY16C,QAAS46C,IACjB,MAAMC,EAAQD,EAAK7+B,MAAM,OACzB4+B,EAASA,EAAS56B,OAAO86B,KAEtBF,EAASL,KAAKl0B,GACN,UAAPA,EACOrmB,KAAKw6C,SAAS75C,GAGd85C,EAAGpoC,SAASgU,IAK/B00B,aAAaj9B,GAGT,OAAgC,IAA5B9d,KAAK25C,YAAYr+C,QAA4C,IAA5B0E,KAAK45C,YAAYt+C,UAIjD0E,KAAK25C,YAAYp2C,MAAM8iB,IAExB,MAAMy0B,EAAQz0B,EAAGrK,MAAM,OACjB0mB,EAAMoY,EAAMx/C,OAGlB,GAAY,IAARonC,EACA,MAAW,UAAPrc,EACOvI,EAAgBy8B,KAAK38C,GAAKoC,KAAKw6C,SAAS58C,IAExCkgB,EAAgBy8B,KAAK38C,GAAKA,EAAE+lC,UAAUtxB,SAASgU,IAEvD,CAGH,IAAI20B,GAAW,EASf,OARAF,EAAM76C,QAAS46C,IACE,UAATA,EACAG,MAAal9B,EAAgBy8B,KAAK38C,GAAKoC,KAAKw6C,SAAS58C,KAErDo9C,MAAal9B,EAAgBy8B,KAAK38C,GAAKA,EAAE+lC,UAAUtxB,SAASwoC,OAI7DG,MAURl9B,EAAgBva,MAAM8iB,GAClBrmB,KAAK06C,SAASr0B,EAAIrmB,KAAK25C,cAAgB35C,KAAK06C,SAASr0B,EAAIrmB,KAAK45C,eCpI1E,MAAMqB,GAAyB,IAAIvB,GACtC,sBACA,CAAC,MAAO,qCACR,CAAC,aACDH,GAAcC,KACdhd,GAAcC,MACd,CAAC,4BCNQye,GAAsB,IAAIxB,GACnC,kBACA,CAAC,MAAO,UACR,CAAC,aACDH,GAAcC,KACdhd,GAAcC,MACd,CAAC,gCCNQ0e,GAAa,IAAIzB,GAC1B,YACA,CAAC,QACD,CAAC,UAAW,QAAQ,SACpBH,GAAcC,KACdhd,GAAcC,MACd,CAAC,cCNQ2e,GAAsB,IAAI1B,GACnC,kBACA,CAAC,OAAQ,UACT,CAAC,UAAW,QAAQ,SACpBH,GAAcC,KACdhd,GAAcC,MACd,CAAC,iCCNQ4e,GAAqB,IAAI3B,GAClC,iBACA,CAAC,OAAQ,UACT,CAAC,UAAW,QAAQ,SACpBH,GAAcC,KACdhd,GAAcC,MACd,CAAC,iCCNQ6e,GAAqB,IAAI5B,GAClC,gBACA,CAAC,kBAAmB,QACpB,CAAC,QAAS,SACVH,GAAcC,KACdhd,GAAcC,MACd,CAAC,6BCNQ8e,GAAgB,IAAI7B,GAC7B,kBACA,CAAC,mBACD,CAAC,SACDH,GAAcC,KACdhd,GAAcC,MACd,CAAC,oBCNQ+e,GAA0B,IAAI9B,GACvC,sBACA,CAAC,kBAAmB,UACpB,CAAC,SACDH,GAAcC,KACdhd,GAAcC,MACd,CAAC,+BCNQgf,GAAY,IAAI/B,GACzB,WACA,CAAC,OACD,CAAC,aACDH,GAAcC,KACdhd,GAAcC,MACd,CAAC,aCNQif,GAAkB,IAAIhC,GAC/B,aACA,CAAC,OACD,CAAC,aACDH,GAAcC,KACdhd,GAAcf,UACd,CAAC,gBCNQkgB,GAAY,IAAIjC,GACzB,YACA,CAAC,sBACD,CAAC,eAAe,QAAQ,cAAc,cACtCH,GAAcC,KACdhd,GAAcC,MACd,CAAC,gBCNQmf,GAAsB,IAAIlC,GACnC,kBACA,CAAC,qBAAsB,UACvB,CAAC,eAAe,QAAQ,cAAc,cACtCH,GAAcC,KACdhd,GAAcC,MACd,CAAC,kCCNQof,GAAwB,IAAInC,GACrC,mBACA,CAAC,sBACD,CAAC,eAAe,QAAQ,cAAc,cACtCH,GAAcC,KACdhd,GAAcf,UACd,CAAC,gBCNQqgB,GAAsB,IAAIpC,GACnC,iBACA,CAAC,QACD,GACAH,GAAcC,KACdhd,GAAcf,UACd,CAAC,mBCNQsgB,GAAe,IAAIrC,GAC5B,UACA,GACA,GACAH,GAAc/d,QACdgB,GAAcC,MACd,CAAC,YCNQuf,GAAa,IAAItC,GAC1B,OACA,GACA,GACAH,GAAc/d,QACdgB,GAAcC,MACd,CAAC,SCNQwf,GAAc,IAAIvC,GAC3B,QACA,GACA,GACAH,GAAc/d,QACdgB,GAAcC,MACd,CAAC,UCNQyf,GAAkB,IAAIxC,GAC/B,aACA,GACA,GACAH,GAAc/d,QACdgB,GAAcC,MACd,CAAC,SCNQ0f,GAAoB,IAAIzC,GACjC,eACA,GACA,GACAH,GAAc/d,QACdgB,GAAcf,UACd,CAAC,iBCNQ2gB,GAAiB,IAAI1C,GAC9B,YACA,CAAC,cACD,GACAH,GAAc5c,WACdH,GAAcf,UACd,CAAC,cCNQ4gB,GAAkB,IAAI3C,GAC/B,YACA,GACA,GACAH,GAAc/d,QACdgB,GAAcf,UACd,CAAC,cCNQ6gB,GAAmB,IAAI5C,GAChC,cACA,GACA,GACAH,GAAc/d,QACdgB,GAAcf,UACd,CAAC,gBCNQ8gB,GAAmB,IAAI7C,GAChC,cACA,GACA,GACAH,GAAc/d,QACdgB,GAAcf,UACd,CAAC,gBCNQ+gB,GAAe,IAAI9C,GAC5B,UACA,GACA,GACAH,GAAc/d,QACdgB,GAAcC,MACd,CAAC,YCNQggB,GAAiB,IAAI/C,GAC9B,YACA,GACA,GACAH,GAAc/d,QACdgB,GAAcC,MACd,CAAC,cCNQigB,GAAiB,IAAIhD,GAC9B,YACA,GACA,GACAH,GAAc/d,QACdgB,GAAcE,KACd,CAAC,cCNQigB,GAAgB,IAAIjD,GAC7B,WACA,GACA,GACAH,GAAc/d,QACdgB,GAAcE,KACd,CAAC,aCNQkgB,GAAc,IAAIlD,GAC3B,SACA,GACA,GACAH,GAAc/d,QACdgB,GAAcC,MACd,CAAC,WCNQogB,GAA2B,IAAInD,GACxC,wBACA,GACA,GACAH,GAAc5c,WACdH,GAAcf,UACd,CAAC,0BCNQqhB,GAAiC,IAAIpD,GAC9C,mBACA,CAAC,aAAc,SACf,GACAH,GAAc5c,WACdH,GAAcf,UACd,CAAC,qCCNQshB,GAAsB,IAAIrD,GACnC,wBACA,GACA,GACAH,GAAc5c,WACdH,GAAcf,UACd,CAAC,0BCNQuhB,GAAmB,IAAItD,GAChC,iBACA,CAAC,cACD,GACAH,GAAc5c,WACdH,GAAcf,UACd,CAAC,oBCNQwhB,GAAc,IAAIvD,GAC3B,QACA,CAAC,SACD,CAAC,YACDH,GAAcE,MACdjd,GAAcC,MACd,CAAC,kBCNQygB,GAAoB,IAAIxD,GACjC,gBACA,CAAC,QACD,CAAC,SACDH,GAAcE,MACdjd,GAAcC,MACd,CAAC,kBCNQ0gB,GAAmB,IAAIzD,GAChC,eACA,CAAC,QACD,CAAC,SACDH,GAAcE,MACdjd,GAAcC,MACd,CAAC,iBCNQ2gB,GAAiB,IAAI1D,GAC9B,YACA,CAAC,MAAO,QACR,CAAC,QAAQ,aACTH,GAAcE,MACdjd,GAAcC,MACd,CAAC,8BCNQ4gB,GAA2B,IAAI3D,GACxC,wBACA,CAAC,MAAO,OAAQ,UAChB,CAAC,QAAQ,aACTH,GAAcE,MACdjd,GAAcC,MACd,CAAC,yCCNQ6gB,GAA+B,IAAI5D,GAC5C,4BACA,CAAC,kBAAmB,SAAU,QAC9B,CAAC,QAAS,SACVH,GAAcE,MACdjd,GAAcC,MACd,CAAC,6BCNQ8gB,GAAkB,IAAI7D,GAC/B,aACA,CAAC,OAAQ,QACT,CAAC,UAAW,QAAS,QAAQ,SAC7BH,GAAcE,MACdjd,GAAcC,MACd,CAAC,+BCNQ+gB,GAA0B,IAAI9D,GACvC,uBACA,CAAC,OAAQ,QACT,CAAC,UAAW,QAAQ,SAAU,QAAQ,SACtCH,GAAcE,MACdjd,GAAcC,MACd,CAAC,+BCNQghB,GAAyB,IAAI/D,GACtC,sBACA,CAAC,OAAQ,QACT,CAAC,UAAW,QAAQ,SAAU,QAAQ,SACtCH,GAAcE,MACdjd,GAAcC,MACd,CAAC,+BC8CQihB,GAAiB,CAE5BT,GACAC,GACAC,GAEA1B,GACAC,GACAT,GACAmC,GACAlC,GACAmC,GAGAlC,GACAoC,GACAzB,GACAV,GACAC,GACAmC,GACAC,GAEAlC,GACAD,GACAE,GACA8B,GAEA3B,GACAE,GACAD,GAIAkB,GACAV,GACAY,GACAH,GACAE,GACAZ,GACAE,GAIAN,GACAC,GAEAC,GACAW,GAEAV,GAGAM,GACAC,GACAH,GACAC,GAEAG,GAEAC,ICxGIgB,GAAW,IAAI/E,GAQrB,SAASt0C,GAAOy0C,EAAmB35C,EAAM+gC,GACvC,OAAOwd,GAASlxC,QAAQssC,EAAmB35C,EAAM+gC,GAMnD,SAASyd,KACP,OAAOD,GAAS7E,iBAOlB,SAASvjB,GAAYzzB,GACnB,OAAO67C,GAAStkB,YAAY9D,YAAYzzB,GAM1C,SAAS+7C,KACPF,GAAStkB,YAAY8B,QAMvB,SAASL,MAAqBpP,GAC5BA,EAAazrB,QAAQb,IACnB,MAAMk2B,EAAW2B,GAAexD,SAASr0B,GACzCu+C,GAAStkB,YAAYyB,kBAAkBxF,KAQ3C,SAASwoB,GAAiBh8C,GACxB,MAAM87B,EAAUggB,KAAsB5f,kBAAkBl8B,GACxD,OAAI87B,EACKA,EAAQZ,eAAe,GAEvB,SAOX,SAAS+gB,KACP,MAAM5mB,EAAY,GAOlB,OANAwmB,GAAStkB,YAAY2B,yBAAyB/6B,QAAQq1B,IACpD6B,EAAUv7B,KAAK,CAACkG,aAAcwzB,EAASxzB,aAAck8C,WAAW,MAElEL,GAAStkB,YAAY6B,uBAAuBj7B,QAAQq1B,IAClD6B,EAAUv7B,KAAK,CAACkG,aAAcwzB,EAASxzB,aAAck8C,WAAW,MAE3D7mB,EAST,SAAS51B,GAAgBw3C,EAAmBltB,EAAemtB,GACzD,OAAO2E,GAASp8C,gBAAgBw3C,EAAmBltB,EAAemtB,GAQpE,SAAS93C,GAAwB63C,EAAmBj3C,GAClD,OAAO67C,GAASz8C,wBAAwB63C,EAAmBj3C,GAGtD,MAAMm8C,GAAW,CACtBN,YACAxK,mBACAsF,qBACAiF,kBACAp5C,OAAM,GACNs5C,uBACAroB,eACAwoB,uBACAF,oBACA/iB,qBACAgjB,oBACAv8C,mBACAL,4BCpGF,QACAhE,KAAA,qBACApC,OACA,OACAqO,IAAA,KACAwc,MAAA,KAGAmK,UAAA,GAGA1oB,MAAA,EACAE,OAAA,EACA2a,SAAA,KACAi8B,UAAA,EACAC,QAAA,EACAC,QAAA,KAGAv1C,QAAA,CACAw1C,cACA,KAAAz4B,UACA,KAAAlI,UAAA,KACA,KAAA4gC,mBAGA14B,UAEA,KAAAD,MAAAE,UAAA,KAAAC,OACA,KAAAH,MAAAI,MAAA,KACA,KAAAJ,MAAAK,gBAAA,aAGA,MAAAu4B,EAAA,KAAA54B,MAAA7Q,cAAA,OACA,KAAA1N,MAAAm3C,EAAAtwB,aAAA,SACA,KAAA3mB,OAAAi3C,EAAAtwB,aAAA,WAEAqwB,gBACA,KAAAr8B,SAAAg8B,GAAA35C,OAAA,KAAAqhB,MAAA,KAAAkG,cAAA,IAEA,KAAAnO,UAAA,KACA,KAAA8gC,kBAGAA,eACAj8C,QAAAyR,IAAA,iBACA,KAAAkqC,UAAA,KAAAj8B,SAAAw8B,gBACAl8C,QAAAyR,IAAA,sBAAAkqC,WACA,KAAAj8B,SAAAC,SAAA,GACA,KAAAi8B,QAAA,EACA,KAAAC,QAAA,GACA,KAAA1gC,UAAA,KAAAghC,sBAEAA,sBAEA,MAAAv1C,EAAA,KAAAC,IAAAyc,UACA,KAAAu4B,QAAAxiD,KAAAuN,GACA,KAAAuU,UAAA,KAAAihC,aAEAA,aAEA,KAAAR,QAAA,KAAAD,UACA,KAAAxgC,UAAA,KAAAkhC,uBAGA,KAAA38B,SAAAC,SAAA,KAAAi8B,QAAA,KAAAD,WAEA,KAAAC,SAAA,OAAAruB,UACA,KAAApS,UAAA,KAAAghC,uBAEAE,uBACA,MAAA5wB,EAAA,KAAArI,MAAA7Q,cAAA,OACA,IAAA1N,EAAA6X,SAAA+O,EAAAC,aAAA,UACA3mB,EAAA2X,SAAA+O,EAAAC,aAAA,WAGA,MAAA4wB,EAAA,IAAAC,EAAA,IACAC,EAAA33C,EAAAy3C,IAAAz3C,EAAA,EACA43C,EAAA13C,EAAAw3C,IAAAx3C,EAAA,EACA44B,EAAAj5B,KAAA0K,IAAAotC,EAAAC,GACA53C,EAAAH,KAAA6L,MAAA1L,EAAA84B,GACA54B,EAAAL,KAAA6L,MAAAxL,EAAA44B,GAEA94B,GAAA,EAAAA,EACAE,GAAA,EAAAA,EAEA/E,QAAAyR,IAAA,UAAAoqC,QAAA,KAAAA,QAAAvuB,YAAA,KAAAA,YAAAzoB,QAAAE,WAEA,KAAA4J,OAAAC,OAAA,iCAEA,MAAA8tC,OACA,IAAAC,EAAArtB,EAAA7G,EACA,IACA,IAAA1nB,EAAA67C,GAAA,KAAAf,QAAA,KAAAvuB,YAAAzoB,EAAAE,EAAA,KAAAwoB,WACAovB,EAAA57C,EAAAnH,OACA01B,EAAAvuB,EAAAuuB,KACA7G,EAAA1nB,EAAA0nB,QACA,MAAAvkB,GACAlE,QAAAiiB,MAAA/d,GAGAlE,QAAAyR,IAAA,mBACA,IAAA6d,GACA,KAAAxgB,QAAA,CACA5Q,KAAA,UACA6Q,MAAA,mCAEA6tC,GAAAD,EAAA,eAEA,KAAA7tC,QAAA,CACA5Q,KAAA,QACA6Q,MAAA,4BACA0Z,QAAA,qBAAAA,IAIA,KAAA9Z,OAAAC,OAAA,kCAIA6T,WAAAi6B,EAAA,OAGAn1C,UACA,KAAAX,IAAA,KAAA8R,MAAA9R,IACA,KAAAwc,MAAA,KAAAxc,IAAA2L,cAAA,WAEAqB,MAAA,CACAipC,aACA,KAAAf,gBAGAt0C,SAAA,IACAuM,eAAA,UACA8oC,WAAA5oC,KAAA4oC,WACAt5B,OAAAtP,IAAA,IAAA0P,EAAAC,EAAA,eAAAD,EAAA,QAAAC,EAAA3P,EAAAmP,aAAA,IAAAQ,OAAA,EAAAA,EAAAL,cAAA,IAAAI,IAAA,IACA2F,cAAArV,KAAAqV,cACAgE,YAAArZ,KAAAqZ,gBCvJ2W,MCQvW,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QC0Hf,IACA3yB,KAAA,aACA0L,WAAA,CACAy2C,sBACAC,cACAC,eACAC,eACAC,mBACAC,uBAEA5kD,OACA,OACAoQ,WAAA,IACAy0C,gBAAA,sBACAC,gBAAA,KACAx0C,gBAAA,KAEAT,UAAA,EACAQ,iBAAA,EAEA00C,gBAAA,GAEAx1C,aAAA,GACAy1C,YAAA,IACAr0C,aAAA,EAEA6iB,OAAA,GACAyxB,gBAAA,EAEAl0C,qBAAA,IAGA/B,UAIA,IAAA2L,EAAA,EACA,QAAAuqC,EACAvqC,EAAAwJ,SAAA,QAAA+gC,EAAA,KAAAC,OAAAC,MAAA,4BAAAF,IAAA,GAAAvqC,GACA,MAAAhP,GACAlE,QAAAiiB,MAAA,iCACAjiB,QAAAyR,IAAAvN,GAEA,KAAAyK,OAAAC,OAAA,gCAAA8d,YAAAxZ,GAAAvC,IAEA,KAAAhC,OAAAC,OAAA,gCAAA8J,MAAAwH,SAEA,KAAA09B,sBACA,KAAAC,mBACA,KAAAC,yBAKA,MAAAh6B,EAAA,KAAAjd,IAAA0L,cAAA,yBACA,KAAA3J,iBAAAkb,EAAAtf,wBAAAO,OAAA,GAEA,KAAA4J,OAAAC,OAAA,2BAEA,KAAAD,OAAAC,OAAA,iCAAA8J,MAAAqlC,eAEA,IAAAC,EAAAC,KAAAC,MAGAjiD,OAAAkiD,SAAA,KACAF,KAAAC,MAAAF,EAAA,MACA,KAAArvC,OAAAC,OAAA,2BACAovC,EAAAC,KAAAC,QAIA,KAAAh1C,aAAA,KAAAq0C,YAAA,KAAAa,aAEA,KAAAzvC,OAAAC,OAAA,iCAAA9G,cACA,KAAA6G,OAAAC,OAAA,iCAAA1F,cAEA,KAAAyF,OAAAC,OAAA,mCAAAjG,aAEArC,QAAA,CACA6B,WACA,KAAAwG,OAAAC,OAAA,oBAEA5G,kBACA,KAAAq2C,QAAAhlD,KAAA,aAEA6O,mBACA,KAAAoB,qBAAA,GAEAC,oBACA,KAAAD,qBAAA,GAGAg1C,cACA,KAAA3vC,OAAAC,OAAA,4BAEA2vC,gBAAA5tC,GACA,YAAA6tC,eAAAzxB,IAAApc,IAEA8tC,sBACA,KAAAjB,gBAAA,GAEAkB,qBACA,KAAAlB,gBAAA,GAEAI,sBACA,IAAA5K,EAAA,GACA,QAAAn6C,EAAA,EAAAA,EAAA,KAAAukD,gBAAArkD,OAAA,IAAAF,EACAm6C,EAAA35C,MAAA,KAAA+jD,gBAAAvkD,GAAA,KAAAukD,gBAAAvkD,EAAA,OAEA,KAAAwkD,gBAAA36C,SACAswC,UACAC,MAAA,KAAAmK,kBAEAuB,eACA,KAAAhwC,OAAAkS,SAAA,gCACAiD,GAAA,QAGA+5B,mBACA,MAAAe,EAAA,KACAC,EAAA7vC,SAAAC,eAAA,eACA,IAAA6vC,GAAA,EACAC,GAAA,EACAF,EAAAG,aAAA,WACAF,GAAA,EACAD,EAAAh3C,MAAA2E,WAAA,yBAEAqyC,EAAAI,aAAA,WACAH,GAAA,EACAC,IACAF,EAAAh3C,MAAA2E,WAAA,KAGAqyC,EAAAK,YAAA,WAgBA,OAfAH,GAAA,EACA/vC,SAAAE,YAAA,SAAAhL,GACA,MAAAi7C,EAAAj7C,EAAAkB,QACAw5C,EAAAj2C,WAAAi2C,EAAAvB,gBAAA8B,GACAP,EAAAjwC,OAAAC,OAAA,8BAAAgwC,EAAAj2C,aAGAqG,SAAAK,UAAA,WACA0vC,GAAA,EACA/vC,SAAAE,YAAA,KACAF,SAAAK,UAAA,KACAyvC,IACAD,EAAAh3C,MAAA2E,WAAA,MAGA,IAGAsxC,yBACA,MAAAc,EAAA,KACAC,EAAA7vC,SAAAC,eAAA,sBACA,IAAA4vC,EACA,OAEA,IAAAC,GAAA,EACAC,GAAA,EACAF,EAAAG,aAAA,WACAF,GAAA,EACAD,EAAAh3C,MAAA2E,WAAA,yBAEAqyC,EAAAI,aAAA,WACAH,GAAA,EACAC,IACAF,EAAAh3C,MAAA2E,WAAA,KAGAqyC,EAAAK,YAAA,WACAH,GAAA,EACA,MAAAK,EAAApwC,SAAA8K,uBAAA,wBAAAtV,wBAaA,OAZAwK,SAAAE,YAAA,SAAAhL,GACA06C,EAAAS,eAAAn7C,EAAAmB,QAAA+5C,EAAAt6C,KAAAs6C,EAAAr6C,OAAA,IACA/E,QAAAyR,IAAA2tC,EAAAR,EAAAS,gBAEArwC,SAAAK,UAAA,WACA0vC,GAAA,EACA/vC,SAAAE,YAAA,KACAF,SAAAK,UAAA,KACAyvC,IACAD,EAAAh3C,MAAA2E,WAAA,MAGA,IAGAnD,yBACA,MAAAu1C,EAAA,KACA,IAAAU,EAAArB,KAAAC,MAAA,IAEAlvC,SAAAE,YAAA,SAAAjL,GACA,GAAAg6C,KAAAC,MAAAoB,EAAA,WACAA,EAAArB,KAAAC,MAEA,MAAAqB,EAAAt7C,EAAAoB,QACA,IAAAm6C,GAAAZ,EAAAR,aAAAmB,GAAAX,EAAAR,aACAoB,EAAA96C,KAAAyK,IAAA,GAAAqwC,GACAA,EAAA96C,KAAA0K,IAAA,GAAAowC,GACAZ,EAAArB,YAAAiC,EAEAxwC,SAAAK,UAAA,WACAL,SAAAE,YAAA,KACAF,SAAAK,UAAA,QAIAowC,yBAEA,GADA,KAAAr3C,UAAA,KAAAA,SACA,KAAAA,SAAA,CACA,MAAA0b,EAAA,KAAAjd,IAAA0L,cAAA,yBACA,KAAA3J,iBAAAkb,EAAAtf,wBAAAO,OAAA,KAGA26C,iBAAAthD,GACA,KAAAk/C,kBAAAl/C,EACA,KAAAk/C,gBAAA,GAEA,KAAAA,gBAAAl/C,GAGAuhD,SAGAC,SAGAC,aACA,KAAAlxC,OAAAC,OAAA,qBACA,KAAAyvC,QAAAhlD,KAAA,WAEA0P,mBASAnB,0BACA,KAAA63C,yBACA,YAAA52C,iBACA,KAAAA,gBAAA,KAAAF,WACA,KAAAA,WAAA,IAEA,KAAAA,WAAA,KAAAE,gBACA,KAAAA,gBAAA,MAEA,KAAA8F,OAAAC,OAAA,mCAAAjG,cAGAiL,MAAA,CACAsK,YACA,KAAAA,WAGA,KAAAvP,OAAAkS,SAAA,kCAAA3C,YAEAJ,cACA,KAAAnP,OAAAC,OAAA,2BAEAwvC,eACA,KAAAl1C,aAAA,KAAAk1C,aAAA,KAAAb,YACA,KAAA5uC,OAAAC,OAAA,iCAAA1F,cACA,KAAAyF,OAAAC,OAAA,2BAEAmP,iBACA,KAAApP,OAAAC,OAAA,2BAEAoP,mBACA,KAAArP,OAAAC,OAAA,2BAEA2uC,cACA,KAAAr0C,aAAA,KAAAk1C,aAAA,KAAAb,YACA,KAAA5uC,OAAAC,OAAA,iCAAA1F,cACA,KAAAyF,OAAAC,OAAA,2BAEA8P,cACA,mBAAAA,cACA,KAAA4+B,gBAAA,YAIA91C,SAAA,IACAuM,eAAA,YACA2Y,YAAAzY,KAAAyY,YACAozB,aAAA,QAEA/rC,eAAA,UACAqP,MAAAnP,KAAAmP,MACA9a,SAAA2L,KAAA3L,SACAqa,WAAA1O,KAAA0O,WACA7E,YAAA7J,KAAA6J,YACAsgC,aAAAnqC,KAAAmqC,aACAp1C,UAAAiL,KAAAjL,UACA+U,eAAA9J,KAAA8J,eACAC,iBAAA/J,KAAA+J,iBACAU,YAAAzK,KAAAyK,YAEAgB,SAAAzL,KAAAyL,SACAjX,iBAAAwL,KAAAxL,sBAEAkW,eAAA,UACA,wBAEAohC,oBACA,YAAAD,SAAAp+C,IAAAwC,IAAA,CAAAmnB,MAAAnnB,EAAAmnB,MAAAjwB,MAAA8I,MAEAga,UAAA,CACAxf,IAAAtD,GACA,KAAAuT,OAAAC,OAAA,2BAAAxT,IAEAJ,MACA,YAAA2T,OAAAsF,MAAAwY,SAAAvO,YAGA8hC,eACA,MAAAC,EAAA,IAAA5rC,IACA,KAAAqY,YAAAhvB,QAAAutB,IACA,MAAA6B,EAAA7B,EAAA6B,OACA,iBAAAA,GAAA,iBAAAA,KAAAhd,SAAA,WACAmwC,EAAAlzB,IAAAD,GACAmzB,EAAAjlD,IAAA8xB,GAAAzzB,KAAA4xB,GAEAg1B,EAAAvhD,IAAAouB,EAAA,CAAA7B,OAIA,MAAA0B,EAAA,GAQA,OAPAszB,EAAAviD,QAAA,CAAAstB,EAAA8B,KACAH,EAAAtzB,KAAA,CACAgyB,MAAA,OAAAyB,QAAA,IAAAA,IAAA,QACAozB,QAAAl1B,EAAAtpB,IAAA3F,IAAA,CAAAsvB,MAAAtvB,EAAAsvB,MAAAjwB,MAAAW,SAIA4wB,GAEA3J,gBACA,YAAAL,WAAA,yCAEAxZ,oBACA,YAAA2U,YAAA,KAAAE,iBAAA,KAAAD,gBAEAjV,YACA,YAAAs1C,aAAA,KAAAt2C,aAAA,KAAAoB,cAEAs1C,iBACA,MAAA2B,EAAA,CACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,cACA,eAEA,WAAAphD,IAAAohD,MCtfoV,MCQhV,I,UAAY,eACd,GACA,EACA,GACA,EACA,KACA,WACA,OAIa,M,QCnBXp+C,GAAS,WAAkB,IAAIC,EAAIvE,KAAKwE,EAAGD,EAAIE,MAAMD,GAAG,OAAOA,EAAG,eAAe,CAACK,YAAY,iBAAiB,CAACL,EAAG,YAAY,CAACA,EAAG,eAAe,GAAGA,EAAG,UAAU,CAACA,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,GAAG,OAAS,IAAI,CAACF,EAAG,SAAS,CAAC8F,YAAY,CAAC,QAAU,OAAO,kBAAkB,SAAS,cAAc,WAAW,CAAC9F,EAAG,MAAM,CAACK,YAAY,cAAc,CAACN,EAAIiG,GAAG,iDAAiDhG,EAAG,SAAS,CAAC8F,YAAY,CAAC,gBAAgB,OAAO,QAAU,OAAO,kBAAkB,SAAS,cAAc,SAAS,iBAAiB,WAAW,CAAC9F,EAAG,QAAQ,CAACK,YAAY,cAAcyF,YAAY,CAAC,aAAa,mBAAmB5F,MAAM,CAAC,IAAM,kBAAkB,SAAW,GAAG,MAAQ,OAAO,OAAS,UAAUF,EAAG,MAAM,CAACD,EAAIiG,GAAG,yEAAyE,IAAI,GAAGhG,EAAG,YAAY,CAACA,EAAG,eAAe,IAAI,IAEt0BG,GAAkB,GCFlBL,GAAS,WAAkB,IAAIC,EAAIvE,KAAKwE,EAAGD,EAAIE,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACK,YAAY,eAAe,CAACL,EAAG,SAAS,CAAC8F,YAAY,CAAC,OAAS,QAAQ5F,MAAM,CAAC,OAAS,EAAE,KAAO,OAAO,MAAQ,WAAW,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,EAAE,OAAS,IAAI,CAACF,EAAG,OAAO,CAACK,YAAY,cAAcyF,YAAY,CAAC,cAAc,OAAO,OAAS,WAAW5F,MAAM,CAAC,MAAQ,iBAAiBY,GAAG,CAAC,MAAQf,EAAIo+C,YAAY,CAACp+C,EAAIiG,GAAG,YAAYhG,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,EAAE,OAAS,IAAI,CAACF,EAAG,YAAY,CAACK,YAAY,gBAAgBH,MAAM,CAAC,KAAO,QAAQgpB,SAAS,CAAC,MAAQ,SAAS1jB,GAAQ,OAAOzF,EAAIo+C,UAAU1mD,MAAM,KAAMoM,cAAc,CAAC9D,EAAIiG,GAAG,UAAUhG,EAAG,YAAY,CAACK,YAAY,gBAAgBH,MAAM,CAAC,KAAO,QAAQgpB,SAAS,CAAC,MAAQ,SAAS1jB,GAAQ,OAAOzF,EAAIq+C,aAAa3mD,MAAM,KAAMoM,cAAc,CAAC9D,EAAIiG,GAAG,aAAahG,EAAG,YAAY,CAACK,YAAY,gBAAgBH,MAAM,CAAC,KAAO,UAAU,MAAQ,IAAIgpB,SAAS,CAAC,MAAQ,SAAS1jB,GAAQ,OAAOzF,EAAIs+C,YAAY5mD,MAAM,KAAMoM,cAAc,CAAC9D,EAAIiG,GAAG,aAAa,IAAI,IAAI,IAEx9B7F,GAAkB,GCqBP,IACfzH,KAAA,aACA0L,WAAA,GACA9N,OACA,UAEA+N,QAAA,CACA85C,YACApgD,QAAAyR,IAAA,KAAAisC,QACA,mBAAAA,OAAAtT,MAGA,KAAAiU,QAAAhlD,KAAA,aAEAgnD,eACA,kBAAA3C,OAAAtT,MAGA,KAAAiU,QAAAhlD,KAAA,YAEAinD,cACA,iBAAA5C,OAAAtT,MAGA,KAAAiU,QAAAhlD,KAAA,YAGAkO,YAEAC,SAAA,ICpDkX,MCQ9W,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCnBXzF,GAAS,WAAkB,IAAIC,EAAIvE,KAAKwE,EAAGD,EAAIE,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACK,YAAY,eAAe,CAACL,EAAG,SAAS,CAAC8F,YAAY,CAAC,OAAS,QAAQ5F,MAAM,CAAC,OAAS,EAAE,KAAO,OAAO,MAAQ,WAAW,CAACF,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,EAAE,OAAS,IAAI,CAACF,EAAG,OAAO,CAACK,YAAY,cAAcyF,YAAY,CAAC,cAAc,SAAS,CAAC/F,EAAIiG,GAAG,YAAYhG,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,GAAG,OAAS,IAAI,CAACH,EAAIiG,GAAG,4CAA4C,IAAI,IAE/a7F,GAAkB,GCaP,IACfzH,KAAA,aACA0L,WAAA,GACA9N,OACA,UAEA+N,QAAA,GAEAiB,YAEAC,SAAA,ICzBkX,MCQ9W,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QC2BA,IACf7M,KAAA,eACA0L,WAAA,CAAAk6C,cAAAC,eACAjoD,OACA,UAEA+N,QAAA,GACAiB,YAEAC,SAAA,ICvDqW,MCQjW,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCnBXzF,GAAS,WAAkB,IAAIC,EAAIvE,KAAKwE,EAAGD,EAAIE,MAAMD,GAAG,OAAOA,EAAG,eAAe,CAACK,YAAY,gBAAgB,CAACL,EAAG,YAAY,CAACA,EAAG,eAAe,GAAGA,EAAG,UAAU,CAACA,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,GAAG,OAAS,IAAI,CAACF,EAAG,SAAS,CAACA,EAAG,OAAO,CAACK,YAAY,aAAa,CAACN,EAAIiG,GAAG,eAAejG,EAAI4J,GAAI5J,EAAI8oB,eAAe,SAASC,GAAW,OAAO9oB,EAAG,SAAS,CAACvG,IAAIqvB,EAAUpwB,MAAM,CAACsH,EAAG,MAAM,CAACK,YAAY,eAAe,CAACN,EAAIiG,GAAGjG,EAAI0H,GAAGqhB,EAAUpwB,MAAM,KAAKqH,EAAI0H,GAAGqhB,EAAUC,SAASjyB,QAAQ,OAAOkJ,EAAG,MAAM,CAACK,YAAY,aAAaN,EAAI4J,GAAImf,EAAUC,UAAU,SAASC,GAAS,OAAOhpB,EAAG,UAAU,CAACvG,IAAIuvB,EAAQta,GAAGrO,YAAY,qBAAqBH,MAAM,CAAC,OAAS,QAAQ,aAAa,CAAE+oB,QAAS,QAAQC,SAAS,CAAC,MAAQ,SAAS1jB,GAAQ,OAAOzF,EAAIopB,mBAAmBH,MAAY,CAAChpB,EAAG,eAAe,CAACE,MAAM,CAAC,QAAU8oB,EAAQ,OAAS,IAAI,MAAQ,OAAOhpB,EAAG,MAAM,CAACK,YAAY,uBAAuB,CAACL,EAAG,MAAM,CAACD,EAAIiG,GAAGjG,EAAI0H,GAAGuhB,EAAQI,aAAa,MAAK,SAAQ,IAAI,GAAGppB,EAAG,YAAY,CAACA,EAAG,eAAe,IAAI,IAEz9BG,GAAkB,GC6CP,IACfzH,KAAA,cACA0L,WAAA,CACAwlB,gBAAA00B,cAAAC,eAEAjoD,OACA,UAGAgP,UACA,KAAAoH,OAAAkS,SAAA,wBACAzH,KAAA,KACA,KAAAzK,OAAAC,OAAA,sCAGAtI,QAAA,CACA8kB,mBAAAH,GAOA,KAAAozB,QAAAhlD,KAAA,CACA+wC,KAAA,SACAuT,MAAA,CACA,qBAAAjxB,YAAAtmB,QAAA6kB,QAKAzjB,SAAA,IACAuM,eAAA,YACA2Y,YAAAzY,KAAAyY,cAEA5B,gBACA,MAAA6B,EAAA,GACAC,EAAA,IAAAvY,IACA,KAAAqY,YAAAhvB,QAAAutB,IACA,MAAA4B,EAAA5B,EAAA6B,MACAF,EAAAG,IAAAF,KACAD,EAAAluB,IAAAmuB,EAAAF,EAAA5zB,QACA4zB,EAAAtzB,KAAA,CACAsB,KAAAkyB,EACA7B,SAAA,MAGA2B,EAAAC,EAAA5xB,IAAA6xB,IAAA7B,SAAA3xB,KAAA4xB,KAGA,MAAA+B,EAAA,CACA,0BACA,kBACA,iCACA,cAUA,OARAL,EAAAM,KAAA,CAAAC,EAAAC,IACAH,EAAA5mB,QAAA8mB,EAAAvyB,MAAAqyB,EAAA5mB,QAAA+mB,EAAAxyB,OAIAgyB,EAAA1yB,OAAA,KAGA0yB,KC/GoW,MCQhW,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCnBX5qB,GAAS,WAAkB,IAAIC,EAAIvE,KAAKwE,EAAGD,EAAIE,MAAMD,GAAG,OAAOA,EAAG,eAAe,CAACK,YAAY,gBAAgB,CAACL,EAAG,YAAY,CAACA,EAAG,eAAe,GAAGA,EAAG,UAAU,CAACA,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,GAAG,OAAS,IAAI,CAACF,EAAG,SAAS,CAACA,EAAG,MAAM,CAAC8F,YAAY,CAAC,MAAQ,OAAO,QAAU,SAAS,CAAC9F,EAAG,OAAO,CAACK,YAAY,aAAa,CAACN,EAAIiG,GAAGjG,EAAI0H,GAAG1H,EAAIipB,QAAQI,UAAUppB,EAAG,YAAY,CAACK,YAAY,cAAcH,MAAM,CAAC,KAAO,QAAQgpB,SAAS,CAAC,MAAQ,SAAS1jB,GAAQ,OAAOzF,EAAIy+C,UAAU/mD,MAAM,KAAMoM,cAAc,CAAC9D,EAAIiG,GAAG,wBAAwB,GAAGhG,EAAG,OAAO,CAACK,YAAY,mBAAmB,CAACN,EAAIiG,GAAGjG,EAAI0H,GAAG1H,EAAIipB,QAAQy1B,gBAAgBz+C,EAAG,SAAS,CAAC8F,YAAY,CAAC,QAAU,OAAO,YAAY,OAAO,aAAa,SAAS,CAAC9F,EAAG,eAAe,CAAC8F,YAAY,CAAC,OAAS,oBAAoB,gBAAgB,MAAM,eAAe,QAAQ5F,MAAM,CAAC,QAAUH,EAAIipB,QAAQ,OAAS,IAAI,MAAQ,OAAOhpB,EAAG,MAAM,CAACA,EAAG,YAAY,CAACK,YAAY,gBAAgBH,MAAM,CAAC,MAAQ,GAAG,KAAO,UAAU,KAAO,IAAIgpB,SAAS,CAAC,MAAQ,SAAS1jB,GAAQ,OAAOzF,EAAIs+C,YAAY5mD,MAAM,KAAMoM,cAAc,CAAC9D,EAAIiG,GAAG,gBAAgB,IAAI,GAAGhG,EAAG,SAAS,CAAC8F,YAAY,CAAC,aAAa,SAAS,CAAC9F,EAAG,MAAM,CAACK,YAAY,cAAc,CAACN,EAAIiG,GAAG,4BAA4BhG,EAAG,IAAI,CAACK,YAAY,eAAeH,MAAM,CAAC,KAAOH,EAAI2+C,YAAYjwB,OAAO,CAAC1uB,EAAIiG,GAAGjG,EAAI0H,GAAG1H,EAAI2+C,YAAYC,gBAAgB3+C,EAAG,SAAS,CAAC8F,YAAY,CAAC,aAAa,SAAS,CAAC9F,EAAG,MAAM,CAACK,YAAY,cAAc,CAACN,EAAIiG,GAAG,eAAehG,EAAG,MAAM,CAACK,YAAY,gBAAgB,CAACN,EAAIiG,GAAGjG,EAAI0H,GAAG1H,EAAI2+C,YAAY5/B,iBAAiB9e,EAAG,SAAS,CAACA,EAAG,MAAM,CAACK,YAAY,cAAc,CAACN,EAAIiG,GAAG,sBAAsBhG,EAAG,QAAQ,CAACK,YAAY,cAAcH,MAAM,CAAC,IAAO,WAAUH,EAAI6+C,aAAe,UAAU,SAAW,GAAG,MAAQ,OAAO,OAAS,YAAY5+C,EAAG,SAAS,CAACA,EAAG,MAAM,CAACK,YAAY,cAAc,CAACN,EAAIiG,GAAG,mBAAmBhG,EAAG,QAAQ,CAACK,YAAY,cAAcH,MAAM,CAAC,IAAO,WAAUH,EAAI6+C,aAAe,UAAU,SAAW,GAAG,MAAQ,OAAO,OAAS,aAAa,IAAI,GAAG5+C,EAAG,YAAY,CAACA,EAAG,eAAe,IAAI,IAE58DG,GAAkB,GCsEP,IACfzH,KAAA,cACA0L,WAAA,CACAwlB,gBACA00B,cAAAC,eAEAjoD,OACA,OACAsoD,cAAA,EACA51B,QAAA,KAGA1jB,UACA,IAAA2L,EAAA,EACA,QAAAuqC,EACAvqC,EAAAwJ,SAAA,QAAA+gC,EAAA,KAAAC,OAAAC,MAAA,4BAAAF,IAAA,GAAAvqC,GACA,MAAAhP,GACAlE,QAAAyR,IAAAvN,GAEA,KAAA28C,aAAA3tC,EACA,KAAA+X,QAAA,KAAAyB,YAAA,KAAAm0B,cAEA,KAAAlyC,OAAAkS,SAAA,wBACAzH,KAAA,KACA,KAAAzK,OAAAC,OAAA,sCAGAtI,QAAA,CACAm6C,YACA,KAAApC,QAAAhlD,KAAA,YAEAinD,cACA,KAAAjC,QAAAhlD,KAAA,CACA+wC,KAAA,SACAuT,MAAA,CACA,qBAAAkD,kBAKAjtC,MAAA,GAEApM,SAAA,IACAuM,eAAA,YACA2Y,YAAAzY,KAAAyY,YACAo0B,YAAA7sC,KAAA6sC,cAEAH,cAAA,IAAAI,EACA,YAAA91B,SAGA,QAAA81B,EAAA,KAAAD,YAAA1mC,KAAA4mC,KAAArwC,KAAA,KAAAsa,QAAAta,WAAA,IAAAowC,IAFA,MCzHoW,MCQhW,I,UAAY,eACd,GACA,GACA,IACA,EACA,KACA,WACA,OAIa,M,QCXf,MAAME,GAAS,CACb,CAAC7W,KAAM,UAAW/nC,UAAW6+C,IAC7B,CAAC9W,KAAM,QAAS/nC,UAAW8+C,GAE3B,CAAC/W,KAAM,YAAa/nC,UAAW++C,IAC/B,CAAChX,KAAM,WAAY/nC,UAAWg/C,IAC9B,CAACjX,KAAM,WAAY/nC,UAAWi/C,IAE9B,CAAClX,KAAM,IAAKmX,SAAU,cAGT,WAAIC,OAAU,CAC3BlmD,KAAM,OACN2lD,Y,oCClBF,MAAMQ,GAAU,MAET,SAASC,GAAoBC,EAASh3C,EAAUi3C,GACrD,MAAMpxB,EAASixB,GAAF,aACbzhD,QAAQyR,IAAI,OAAQkwC,GACpBx1B,QAAM01B,KAAKrxB,EAAKmxB,GACbvoC,KAAKgT,IACJzhB,EAASyhB,EAAI7zB,QACZ8gB,MAAM4I,IACP2/B,EAAc3/B,KAIb,SAAS6/B,GAAuBH,EAASh3C,EAAUi3C,GACxD,MAAMpxB,EAASixB,GAAF,gBACbzhD,QAAQyR,IAAI,OAAQkwC,GACpBx1B,QAAM01B,KAAKrxB,EAAKmxB,GACbvoC,KAAKgT,IACJzhB,EAASyhB,EAAI7zB,QACZ8gB,MAAM4I,IACP2/B,EAAc3/B,KCvBpB,SAAS6R,GAASn0B,GAChB,QAAY/C,IAAR+C,GAA6B,OAARA,EACvB,OAAOA,EAET,IAAIo0B,EAAOlzB,MAAMC,QAAQnB,GAAO,GAAK,GACrC,IAAK,IAAI9G,KAAK8G,EACZo0B,EAAKl7B,GAAuB,kBAAX8G,EAAI9G,GAAkBi7B,GAASn0B,EAAI9G,IAAM8G,EAAI9G,GAKhE,YAHsB+D,IAAlB+C,EAAI1G,YACN86B,EAAK96B,UAAY0G,EAAI1G,WAEhB86B,E,UCXT,SAASguB,GAAmBta,EAAMua,GAChC,IAAIC,EAAMC,EAAQ,QACdC,EAAkB,mCAClBC,EAAgB,SAIhBC,EAAeJ,EAAIK,aAAaC,iBAAiBJ,EAAiBC,GAIlEI,EAAc,IAAIP,EAAIQ,kBAAkBJ,EAAc,MAE1D,MAAMzqB,EAAQ,CACV7W,WAAY0mB,EACZzyB,MAAO,IAGL0tC,EAAe,GAErB,IAAIC,EAAU,EACdH,EAAYI,aAAe,SAAUzoD,EAAG+J,GAEpC,IAAI03C,EAAU7+C,YAAYmH,EAAE2+C,YAAc,KAAU7vC,QAAQ,IAC5D4kB,EAAM5iB,MAAM3b,KAAK,CACbuhB,UAAW+nC,EACX1nC,QAAS2gC,EACTv3C,UAAU,EACVy+C,WAAY,IAEhBJ,EAAarpD,KAAK6K,EAAE6+C,YACpBJ,EAAU/G,GAGd4G,EAAYQ,eAAevb,GACvB,SAAU7tC,GACFA,EAAOqpD,SAAWhB,EAAIiB,aAAaC,2BACnCnjD,QAAQyR,IAAI,uBAEZzR,QAAQiiB,MAAM,8BAAgCroB,EAAOwpD,aACjD,2CAERZ,EAAYa,QACZb,OAAc5lD,EAEd,IAAK,IAAI/D,EAAI,EAAGA,EAAI6pD,EAAa3pD,OAAQF,IAAK,CAC5C,IAAIsd,EAAO,GAEPA,EADAtd,GAAK6pD,EAAa3pD,OAAS,EACpB0uC,EAAKtrC,MAAMumD,EAAa7pD,GAAI6pD,EAAa7pD,EAAE,IAE3C4uC,EAAKtrC,MAAMumD,EAAa7pD,IAEnC++B,EAAM5iB,MAAMnc,GAAGsd,KAAOA,EAAK8P,OAE7B,MAAMq9B,EAAe,IAAIC,aACzBvB,EAAGpqB,EAAO0rB,EAAaE,gBAAgB5pD,EAAO6pD,eAElD,SAAUC,GACN1jD,QAAQ2jD,MAAM,SAAWD,GACzBlB,EAAYa,QACZb,OAAc5lD,EACdolD,OAAGplD,OAAWA,MAKxB,SAASgnD,GAAcC,GACrB,IAAKA,EACH,OAAO,KAET,MAAMC,EAAaD,EAAQpqC,MAAM,KAAK,GAAGA,MAAM,KAAK,GAAGA,MAAM,KAAK,GAC5DsqC,EAAaC,KAAKH,EAAQpqC,MAAM,KAAK,IACrCwqC,EAAc,IAAIt0B,YAAYo0B,EAAWhrD,QACzCmrD,EAAW,IAAIv1B,WAAWs1B,GAEhC,IAAK,IAAIprD,EAAI,EAAGA,EAAIkrD,EAAWhrD,OAAQF,IACrCqrD,EAASrrD,GAAKkrD,EAAWI,WAAWtrD,GAEtC,OAAO,IAAI43B,KAAK,CAACyzB,GAAW,CAAChmD,KAAM4lD,IAGrCM,eAAeC,GAAkBC,GAC/B,IAAKA,EACH,OAAO,IAAIC,QAASC,IAClBA,EAAQ,IAAIC,YAAY,CAAC1rD,OAAQ,IAAM02B,iBAAkB,EAAGS,WAAY,SAG5E,MAAM+zB,QAAoBK,EAAKL,cACzBS,EAAW,IAAInB,aACrB,OAAOmB,EAASlB,gBAAgBS,GAGlC,SAASU,GAAqBr3B,GAC5B,OAAOA,EAAYv0B,OAASu0B,EAAY4C,WAG1C,SAAS00B,GAASt3B,GAChB,MAAMwC,EAAWxC,EAAYmC,iBACvB5N,EAAOyL,EAAY4C,WAEnB20B,EAAuB,EAAPhjC,EAChBijC,EAAwB,EAAPjjC,EAEjBkjC,GAAiB,IAAIxB,cAAeyB,aAAal1B,EAAU+0B,EAAehjC,GAC1EojC,EAAY,IAAIC,aAAaJ,GAEnC,IAAK,IAAIK,EAAU,EAAGA,EAAUr1B,EAAUq1B,IACxC73B,EAAY83B,gBAAgBH,EAAWE,EAAS,GAChDJ,EAAeM,cAAcJ,EAAWE,EAAS,GAGnD,OAAOJ,EAGT,SAASO,GAAWh4B,GAClB,MAAMwC,EAAWxC,EAAYmC,iBACvB5N,EAAOyL,EAAY4C,WAEnB20B,EAAgBv3B,EAAYv0B,OAAS8oB,EACrCijC,EAAiBx3B,EAAYv0B,OAE7BgsD,GAAiB,IAAIxB,cAAeyB,aAAal1B,EAAU+0B,EAAehjC,GAC1EojC,EAAY,IAAIC,aAAaJ,GAEnC,IAAK,IAAIK,EAAU,EAAGA,EAAUr1B,EAAUq1B,IACxC73B,EAAY83B,gBAAgBH,EAAWE,EAAS,GAChDJ,EAAeM,cAAcJ,EAAWE,EAAS,GAGnD,OAAOJ,EAIT,SAASQ,GAAYC,EAAcC,GACjC,GAA4B,IAAxBD,EAAazsD,OACf,OAAO,IAAIwqD,cAAeyB,aAAa,EAAG,EAAG,GAE/C,MAAMl1B,EAAW01B,EAAa,GAAG/1B,iBAC3B5N,EAAO2jC,EAAa,GAAGt1B,WAE7B,IAAI20B,EAAgBW,EAAajgB,OAAO,CAACO,EAAK4f,IAAO5f,EAAM4f,EAAG3sD,OAAQ,GAClE0sD,GACFA,EAAY/nD,QAAQgN,GAAQm6C,GAAiBn6C,EAAOmX,GAEtD,MAAMkjC,GAAiB,IAAIxB,cAAeyB,aAAal1B,EAAU+0B,EAAehjC,GAEhF,IAAI8jC,EAAe,EACnB,IAAK,IAAI9sD,EAAI,EAAGA,EAAI2sD,EAAazsD,SAAUF,EAAG,CAC5C,MAAM62B,EAAS81B,EAAa3sD,GACtB+sD,EAAgBl2B,EAAO32B,OACvBksD,EAAY,IAAIC,aAAaU,GAEnC,IAAK,IAAIT,EAAU,EAAGA,EAAUr1B,EAAUq1B,IACxCz1B,EAAO01B,gBAAgBH,EAAWE,EAAS,GAC3CJ,EAAeM,cAAcJ,EAAWE,EAASQ,GAEnDA,GAAgBC,EAChBD,GAAgBF,EAAcA,EAAY5sD,GAAK,EAGjD,OAAOksD,EAGT,SAASc,GAAkBC,GACzB,IAImBjtD,EAAG02B,EAJlBC,EAAYs2B,EAAQr2B,iBACpB12B,EAAS+sD,EAAQ/sD,OAASy2B,EAAY,EAAI,GAC1CE,EAAS,IAAIC,YAAY52B,GACzB62B,EAAO,IAAIC,SAASH,GACpBI,EAAW,GACXrzB,EAAS,EACTszB,EAAM,EA6BV,IAzBAE,EAAU,YAEVA,EAAUl3B,EAAS,GAEnBk3B,EAAU,YAEVA,EAAU,WAEVA,EAAU,IAEVD,EAAU,GACVA,EAAUR,GACVS,EAAU61B,EAAQ51B,YAElBD,EAA+B,EAArB61B,EAAQ51B,WAAiBV,GAEnCQ,EAAsB,EAAZR,GAEVQ,EAAU,IAEVC,EAAU,YAEVA,EAAUl3B,EAASg3B,EAAM,GAGpBl3B,EAAI,EAAGA,EAAIitD,EAAQr2B,iBAAkB52B,IACxCi3B,EAASz2B,KAAKysD,EAAQ31B,eAAet3B,IAEvC,MAAOk3B,EAAMh3B,EAAQ,CAEnB,IAAKF,EAAI,EAAGA,EAAI22B,EAAW32B,IAEzB02B,EAAS7qB,KAAKyK,KAAK,EAAGzK,KAAK0K,IAAI,EAAG0gB,EAASj3B,GAAG4D,KAE9C8yB,EAAgE,GAAtD,GAAMA,EAAS,EAAa,MAATA,EAA0B,MAATA,GAE9CK,EAAKQ,SAASL,EAAKR,GAAQ,GAC3BQ,GAAO,EAGTtzB,IAIF,OAAO,IAAIg0B,KAAK,CAACf,GAAS,CAACxxB,KAAM,cAEjC,SAAS8xB,EAAUz3B,GACjBq3B,EAAKI,UAAUD,EAAKx3B,GAAM,GAC1Bw3B,GAAO,EAGT,SAASE,EAAU13B,GACjBq3B,EAAKK,UAAUF,EAAKx3B,GAAM,GAC1Bw3B,GAAO,GAIJ,MAAMg2B,GAAa,CACxBnC,iBACAS,qBACAwB,qBACAN,eACAZ,wBACA5C,sBACAuD,cACAV,aC7OF,SAASoB,GAAeziC,EAAQ0iC,GAC9B,MAAMr/C,GAAO,IAAIs/C,WACZC,gBAAgB5iC,EAAQ,iBACxBhR,cAAc,OAEb6zC,EAAYvlD,MAAMmZ,KAAKpT,EAAIid,iBAAiB,6BAGlDuiC,EAAU1oD,QAAQ2oD,IAChB,MAAMC,EAAOD,EAAM36B,aAAa,MAC3B46B,GAAiB,KAATA,EAGXD,EAAM16B,aAAa,KAAM26B,EAAK/kD,WAAW,IAAK,MAF9C8kD,EAAM16B,aAAa,KAAM,MAAQnsB,oBAOrC4mD,EAAU1oD,QAAQ2oD,IACXA,EAAMjlB,UAAUmlB,SAASN,KAC5BI,EAAMjlB,UAAUjP,IAAI8zB,GACpBI,EAAMjlB,UAAUjP,IAAI,mBAIxB,MAAMkmB,EAAWmO,GAAYJ,GACvB58B,EAAc,CAACk3B,UAAW,UAAWrI,YACrCoO,EAAYC,GAAc9/C,GAIhC,OAFA5G,QAAQyR,IAAI,YAAa4mC,EAAU7uB,GAE5B,CACLA,cACAjG,OAAQkjC,GAIZ,SAASC,GAAcL,GACrB,MAAMM,EAAM33C,SAAS4e,cAAc,OAEnC,OADA+4B,EAAI71B,YAAYu1B,GACTM,EAAIrjC,UAGb,SAASkjC,GAAYJ,GACnB,MAAM/N,EAAW,GA8BjB,OA7BA+N,EAAU1oD,QAAQ2oD,IAChB,MAAMviC,EAAK,GACLnT,EAAK01C,EAAM36B,aAAa,MACxBk7B,EAAQP,EAAM36B,aAAa,SAE3Bm7B,EAAYD,EAAMntC,MAAM,KACxBqtC,EAAMT,EAAM7gC,QACZjtB,EAAO,GAEburB,EAAG5lB,KAAO2oD,EAAUA,EAAU9tD,OAAS,GACvC+qB,EAAGnT,GAAKA,EACRmT,EAAG8iC,MAAQA,EACX9iC,EAAGvrB,KAAOA,EACVurB,EAAGgjC,IAAMA,EAEG,SAARA,EAC4B,IAA1BT,EAAMz8B,SAAS7wB,OACjB+qB,EAAG2jB,KAAO5mC,MAAMmZ,KAAKqsC,EAAMz8B,UACtB2b,OAAO,CAACvf,EAAKH,IAASG,EAAM,IAAMH,EAAKvC,UAAW,IAClD2C,OAELnC,EAAG2jB,KAAO4e,EAAM/iC,UAGlBQ,EAAG2jB,KAAO,KAGZ4Q,EAASh/C,KAAKyqB,KAETu0B,EAGF,MAAM0O,GAAc,CACzBf,kBAAgBU,kB,iBC/DlB,SAASM,GAAgB9sC,EAAU8B,GACjC,MAAMi3B,EAAQA,CAACz2C,EAAOyG,IAAQpC,MAAMmZ,KAAK,CAACjhB,OAAQkK,EAAMzG,GAAQ,CAACqJ,EAAGhN,IAAMA,EAAI2D,GACxEyqD,EAAUhU,EAAM/4B,EAAU8B,EAAS,GACzC,MAAO,IAAMirC,EAAQ3hC,KAAK,KAAO,IAGnC,SAAS4hC,GAAuBC,GAC9B,MAAM7sC,EAAoB,GAe1B,OAbAthB,OAAOqE,KAAK8pD,GAAczpD,QAAQ0qC,IAChC,MAAM6e,EAAU9yB,KAAK7L,MAAM8f,GACrBxsB,EAAUurC,EAAa/e,GAE7B9tB,EAAkBjhB,KAAK,CACrB6gB,SAAU+sC,EAAQ,GAClBjrC,OAAQirC,EAAQA,EAAQluD,OAAO,GAC/BkuD,QAAS7e,EACThqC,OAAQwd,EACR9F,KAAMsxC,OACNz2C,GAAInR,qBAGD8a,EAGT,SAAS+sC,GAAuB/sC,GAC9B,MAAM6sC,EAAe,IAAInuD,OAKzB,OAHAshB,EAAkB5c,QAAS4pD,IACzBH,EAAaG,EAAQL,SAAWK,EAAQlpD,SAEnC+oD,EAGT,SAASI,GAAe7L,GACtB,MAAM8L,EAAW9L,EAAS9K,gBACpBx8B,EAAc,IAAIpb,OAMxB,OALAwuD,EAAS9pD,QAAQ29B,IACf,MAAMxtB,EAAMwtB,EAAQR,kBACdtiB,EAAW8iB,EAAQb,cACzBpmB,EAAYvG,GAAO0K,IAEdnE,EAIT,MAAMH,GAAQA,KAAA,CACZynC,SAAUA,GAEV59B,YAAa,EACbsgC,aAAc,EAEdt2C,aAAc,EACdoB,aAAc,EAEdka,MAAO,KAGPqkC,YAAY,EAEZzzC,QAAS,KACT0zC,MAAO,KACPC,WAAY,KACZC,SAAU,KACVC,eAAgB,KAChBx9B,aAAc,GACdlB,aAAc,GACdG,cAAe,CACbw+B,KAAM,CACJtqC,KAAM,KAGV+L,WAAY,KACZC,YAAa,KACbu+B,qBAAsB,IAAI1zC,IAC1B2zC,eAAgB,CACd7qC,SAAU,CACRK,KAAM,KAGVuL,uBAAwB,EACxBC,uBAAwB,EACxBK,wBAAyB,EACzB7E,iBAAiB,EACjBC,iBAAkB,GAElB/E,SAAU,KACVuoC,gBAAiB,KACjBC,YAAa,KACbC,cAAe,KACfC,gBAAgB,EAEhB9lC,mBAAoB,EACpBoB,cAAe,EACfM,iBAAkB,EAElBtB,cAAe,EAEf2lC,gBAAiB,KACjBC,UAAW,KACXC,gBAAiB,KACjBC,gBAAiB,KAIjB99C,KAAM,EACN2F,aAAc,CAAC,GAAI,GAAI,IACvBJ,cAAevN,SAAiBswC,OAAO,CAAC,EAAG,KAC3CyV,iBAAkB/lD,SAAiBswC,OAAO,CAAC,EAAG,KAC9C5oC,cAAe,IACfL,iBAAkB,EAClB2+C,uBAAwB,EACxB70C,mBAAoB,EAGpBmK,iBAAkB,EAClBD,eAAgB,EAGhBzD,kBAAmB,GACnBG,cAAe,CACbsG,WAAY,GACZ/L,MAAO,IAET2zC,kBAAmB,IAAIt0C,IAEvB4L,UAAU,EACV6C,eAAe,EACfxa,SAAU,GACV4X,QAAS,KACTF,YAAY,EAEZ4C,YAAY,EACZD,YAAY,EAEZ9G,cAAerF,EAAkBC,OAEjCmyC,iBAAkB,KAClBC,aAAa,EACbC,eAAgB,KAChBtoC,WAAW,EAEXuoC,aAAa,EAEb50C,eAAgB,CACd60C,MAAO,CACLn8C,MAAM,UACNiJ,KAAMmzC,QACRC,SAAU,CACRr8C,MAAM,UACNiJ,KAAMlD,QACRu2C,KAAM,CACJt8C,MAAM,UACNiJ,KAAMszC,QACRC,SAAU,CACRx8C,MAAO,UACPiJ,KAAMlD,QACR02C,MAAO,CACLz8C,MAAO,UACPiJ,KAAMyzC,SAEVC,cAAe,CACbC,MAAO,CACL58C,MAAOnK,OAASA,OAAoB,IACpCoT,KAAM4zC,QAERC,KAAM,CACJ98C,MAAOnK,OAASA,OAAoB,IACpCoT,KAAM8zC,QAERC,WAAY,CACVh9C,MAAOnK,OAASA,OAAoB,IACpCoT,KAAMg0C,SAOV11C,YAAamzC,GAAe7L,IAE5Bj9B,cAAe,GACf+b,cAAe,GACfzpB,gBAAiB,KACjB4K,YAAa,GAEbjH,cAAe,GACf7K,gBAAgB,EAEhBgZ,SAAS,EACT1P,WAAY,EAEZnK,UAAW,OACX6W,gBAAgB,EAEhBnB,YAAa,SAGboK,cAAc,EAEdihC,qBAAqB,EACrB5rC,wBAAwB,EACxBC,gBAAiB,KAEjBpN,cAAe,KAEfwN,gBAAiB,KAEjBwrC,YAAa,KACbC,cAAe,KACfpN,WAAY,EAEZvvB,YAAa,KACb7kB,kBAAkB,IAIdyhD,GAAU,CACdC,oBAAqBl2C,GAASA,EAAM4H,gBAAkBrF,EAAkBC,OACxEyF,WAAYjI,GAA6B,SAApBA,EAAMjL,WAIvBohD,GAAU,CACd1I,qBAAoB,MAACztC,EAAK,OAAErF,IAC1BA,EAAO,oBAAoB,GAC3B,MAAMmS,EAAa+S,GAAS7f,EAAMwG,eAClCsG,EAAW/L,MAAMtX,QAAQyY,UAAeA,EAAK9R,UAC7C,IAAIgmD,EAAY,GAChB5sD,KAAKwW,MAAM7V,OAAOuqD,kBAAkBjrD,QAAQ,CAACtC,EAAOM,KAClD2uD,EAAU3uD,GAAOmF,MAAMmZ,KAAK5e,KAE9B,MAAMumD,EAAU,CACd2I,aAAcr2C,EAAMmP,MAAMoG,YAC1BzI,aACAspC,aAEF3I,GAAoBC,EAAS4I,IAC3B37C,EAAO,oBAAoB,GAC3BA,EAAO,wBAAyB27C,EAAKpD,eACpCqD,IACD57C,EAAO,oBAAoB,GAC3B67C,2BAAa,CAAC17C,MAAQ,mBACpB0Z,QAAS+hC,EAAU/hC,QAASvqB,KAAM,YACpC8B,QAAQyR,IAAI+4C,MAGhB1I,wBAAuB,MAAC7tC,EAAK,OAAErF,IAC7BA,EAAO,oBAAoB,GAE3B,MAAMmS,EAAa+S,GAAS7f,EAAMwG,eAClCsG,EAAW/L,MAAMtX,QAAQyY,UAAeA,EAAK9R,UAC7C,IAAIgmD,EAAY,GAChB5sD,KAAKwW,MAAM7V,OAAOuqD,kBAAkBjrD,QAAQ,CAACtC,EAAOM,KAClD2uD,EAAU3uD,GAAOmF,MAAMmZ,KAAK5e,KAE9B,MAAM+rD,EAAeE,GAAuBpzC,EAAMqG,mBAC5CqnC,EAAU,CACd2I,aAAcr2C,EAAMmP,MAAMoG,YAC1BzI,aACAspC,YACAlD,gBAGFnnD,QAAQyR,IAAI,cAAekwC,GAC3BG,GAAuBH,EAAS4I,IAC9BvqD,QAAQyR,IAAI,WAAY84C,GACxB,MAAMjhC,EAAgBihC,EAAKG,cAE3B97C,EAAO,oBAAoB,GAE3BqF,EAAMqG,kBAAoB,GAE1B1L,EAAO,iCAA+C,OAAb0a,QAAa,IAAbA,IAAiB,IAC1D1a,EAAO,iCACP67C,2BAAa,CAAC17C,MAAQ,oBAAoB7Q,KAAM,aAC/CssD,IACD57C,EAAO,oBAAoB,GAC3B67C,2BAAa,CAAC17C,MAAQ,kBACpB0Z,QAAS+hC,EAAU/hC,QAASvqB,KAAM,YACpC8B,QAAQyR,IAAI+4C,OAMZG,GAAY,CAChBC,gBAAgB32C,EAAO42C,GACrB52C,EAAMjL,UAAY6hD,GAEpBC,iBAAiB72C,GACfA,EAAM6J,YAAc9O,SAAS6hB,KAAKk6B,YAClC92C,EAAMmqC,aAAepvC,SAAS6hB,KAAKxO,cAErC2oC,qBAAqB/2C,EAAO8J,GAC1B9J,EAAM8J,eAAiBA,GAEzBktC,mBAAmBh3C,EAAOnM,GACxBmM,EAAMnM,aAAeA,GAEvBojD,mBAAmBj3C,EAAO/K,GACxB+K,EAAM/K,aAAeA,GAEvBiiD,YAAYl3C,EAAOmP,GACjBnP,EAAMmP,MAAQA,GAEhBgoC,gBAAgBn3C,EAAOtD,GACrBsD,EAAMmP,MAAQ3lB,KAAKwW,MAAMgX,QAAQogC,OAAO16C,IAE1C26C,oBAAoBr3C,EAAOS,GACzBT,EAAMS,cAAgBA,EACA,KAAlBA,IACFT,EAAMm0C,gBAAiB,IAG3BmD,cAAct3C,GACZA,EAAM4O,SAAW5O,EAAM4O,SAEzB2oC,kBAAkBv3C,EAAOD,GACvBC,EAAMD,QAAUA,GAElBy3C,qBAAqBx3C,EAAOD,GAC1BC,EAAM0zC,WAAa3zC,GAErB03C,gBAAgBz3C,EAAOyzC,GACrBzzC,EAAMyzC,MAAQA,GAEhBiE,yBAAyB13C,EAAOyzC,GAC9BzzC,EAAM4zC,eAAiBH,GAEzBkE,mBAAmB33C,EAAOyzC,GACxBzzC,EAAM2zC,SAAWF,GAEnBmE,kBAAkB53C,EAAOiM,GACvBjM,EAAMiM,QAAUA,GAElB4rC,mBAAmB73C,EAAOo0C,GACxBp0C,EAAMo0C,gBAAkBA,GAE1B0D,QAAQ93C,EAAO+3C,GACb/3C,EAAMq0C,UAAY0D,GAEpBC,aAAah4C,EAAOs0C,GAClBt0C,EAAMs0C,gBAAkBA,GAE1B2D,mBAAmBj4C,EAAOu0C,GACxBv0C,EAAMu0C,gBAAkBA,GAE1B2D,6BAA6Bl4C,GAAO,QAACmH,EAAU,GAAE,QAAEC,EAAU,KAC3DpH,EAAMwK,cAAgBrD,EACtBnH,EAAMumB,cAAgBnf,GAExB+wC,sBAAsBn4C,EAAOpD,GAC3BoD,EAAMlD,gBAAkBF,EACxB7Q,QAAQyR,IAAI,wBAAyBwC,EAAMlD,kBAE7Cs7C,eAAep4C,GAAO,QAACmH,EAAO,QAAEC,IAC1BpH,EAAMlD,kBAERkD,EAAMlD,gBAAgBlD,IAAMuN,EAC5BnH,EAAMlD,gBAAgBwH,SAAW8C,IAGrCixC,mBAAmBr4C,EAAOs4C,GACxBt4C,EAAM0H,YAAc4wC,GAEtBC,WAAWv4C,EAAO3Y,GAChB2Y,EAAMyK,YAAcpjB,GAEtBmxD,mBAAmBx4C,EAAO6U,GACxB7U,EAAM6U,aAAeA,GAEvB4jC,eAAez4C,GACb,MAAM6P,EAAK7P,EAAMq0C,UACXv4B,EAAMjM,EAAGtf,wBACf/G,KAAKmR,OAAO,qBAAsB,CAChCkpC,IAAK7jC,EAAMs0C,gBACX/6C,MAAOuiB,EAAIviB,MACX1I,IAAKirB,EAAIjrB,IAAMirB,EAAIhrB,OAAS,KAE9BtH,KAAKmR,OAAO,qBAAsB,CAChCkpC,IAAK7jC,EAAMu0C,gBACXh7C,MAAOuiB,EAAIviB,MACX1I,IAAKirB,EAAIjrB,IAAMirB,EAAIhrB,OAAS,MAGhC4nD,YAAY14C,GAAO,IAAC6jC,EAAG,KAAElzC,EAAK,KAAI,IAAEE,EAAI,KAAI,MAAE0I,EAAM,KAAI,OAAEpE,EAAO,OAE/D,GADK0uC,IAAKA,EAAM7jC,EAAMs0C,kBACjBzQ,EAAK,OACV,MAAM8U,EAAQ34C,EAAMo0C,gBACdwE,EAAQD,EAAMpoD,wBAElBszC,EAAIjwC,MAAMjD,KADRA,EACeA,EAAOioD,EAAMjoD,KAAO,KAEjB,GAGpBkzC,EAAIjwC,MAAM2F,MADRA,EACgBq/C,EAAMr/C,MAAQA,EAAQ,KAEnB,GAGrBsqC,EAAIjwC,MAAM/C,IADRA,EACcA,EAAM+nD,EAAM/nD,IAAM,KAEf,GAGnBgzC,EAAIjwC,MAAMuB,OADRA,EACiByjD,EAAMzjD,OAASA,EAAS,KAErB,IAE1B0jD,YAAY74C,GAAO,IAAA2P,EAEF,QAAfA,EAAI3P,EAAMmP,aAAK,IAAAQ,GAAXA,EAAampC,SACftvD,KAAKmR,OAAO,+BAAgCklB,GAAS7f,EAAMmP,MAAM2pC,WAGrEC,cAAc/4C,EAAOqM,GAAY,GAAO,IAAA2sC,EAAAC,EAAAC,EAAAC,EAAAC,EACtCp5C,EAAMqO,oBAAsB,EAC5BrO,EAAM4H,cAAgBrF,EAAkBC,OACxCxC,EAAMqG,kBAAoB,GAC1BrG,EAAMq5C,YAAc,IAAIj5C,IAEpBJ,EAAMyL,WACRzL,EAAMyL,SAASrgB,OACf4U,EAAMyL,SAAStgB,QACf6U,EAAMyL,SAAW,MAMnBjiB,KAAKmR,OAAO,8BAEZ6T,WAAW,KACT,IAAI,IAAA8qC,EAAAC,EAAAC,EAAAC,EAAAC,EACF,MAAM9wD,EAAOi3B,GAAoB,QAAZy5B,EAACt5C,EAAMmP,aAAK,IAAAmqC,OAAA,EAAXA,EAAaK,MAKnC,IAAIpkC,EAJJ/rB,KAAKmR,OAAO,wCAAqD,QAAd4+C,EAAM,OAAJ3wD,QAAI,IAAJA,OAAI,EAAJA,EAAMgxD,cAAM,IAAAL,IAAI,IACrE/vD,KAAKmR,OAAO,uCAAuD,QAAjB6+C,EAAM,OAAJ5wD,QAAI,IAAJA,OAAI,EAAJA,EAAM+3B,iBAAS,IAAA64B,IAAI,IACvEhwD,KAAKmR,OAAO,4BAAyC,QAAd8+C,EAAM,OAAJ7wD,QAAI,IAAJA,OAAI,EAAJA,EAAMixD,cAAM,IAAAJ,IAAI,MAIvDlkC,EADM,OAAJ3sB,QAAI,IAAJA,KAAMixD,OACMC,qBAAeC,eAAe/5C,EAAM2zC,SAAU/qD,EAAKixD,QAEnDC,qBAAeC,eAAe/5C,EAAM2zC,UAEpDnqD,KAAKmR,OAAO,2BAA4B4a,GAExC,MAAMykC,EAAgB,CACpBnG,KAAM,CACJtqC,KAAM,KAGN8C,EACF7iB,KAAKmR,OAAO,wCAAwD,QAAjB++C,EAAM,OAAJ9wD,QAAI,IAAJA,OAAI,EAAJA,EAAMqC,iBAAS,IAAAyuD,IAAIM,GAExExwD,KAAKmR,OAAO,wCAAyCq/C,GAEvDxrC,WAAW,KACTxO,EAAM8U,wBAA0B,EAChC9U,EAAM+U,wBAA0B,EAChC/U,EAAMoV,yBAA2B,GAChC,GACH,MAAOnlB,GACPlE,QAAQiiB,MAAM/d,MAMJ,QAAd+oD,EAAIxvD,KAAK2lB,aAAK,IAAA6pC,GAAVA,EAAYzjC,aACd/rB,KAAKmR,OAAO,yBAA0BklB,GAAS7f,EAAMmP,MAAMoG,cAG7D,MAAM0kC,EAAWp6B,GAAoB,QAAZo5B,EAACj5C,EAAMmP,aAAK,IAAA8pC,OAAA,EAAXA,EAAansC,YACjC6W,EAAQ,CACZ7W,WAAY,GACZ/L,MAAO,IAwBT,GAtBQ,OAARk5C,QAAQ,IAARA,GAAiB,QAATf,EAARe,EAAUC,eAAO,IAAAhB,GAAjBA,EAAmBzvD,QAAQ9D,IACzBA,EAAOw0D,aAAa1wD,QAAQ2wD,IAC1Bz2B,EAAM7W,YAAcstC,EAAIttC,WACxB6W,EAAM5iB,MAAM3b,QAAQg1D,EAAIr5C,OACxBq5C,EAAIr5C,MAAMtX,QAAQgJ,IAChBA,EAAEkU,UAAY7d,WAAW2J,EAAEkU,UAAUyK,QAAQ,IAAK,KAClD3e,EAAEuU,QAAUle,WAAW2J,EAAEuU,QAAQoK,QAAQ,IAAK,KAC9C3e,EAAErC,UAAW,QAOnB4P,EAAMwG,cAAgBmd,EACtBn6B,KAAKmR,OAAO,6BAA8BgpB,EAAM7W,YAGjC,QAAfqsC,EAAIn5C,EAAMmP,aAAK,IAAAgqC,GAAXA,EAAa5jC,aACf/rB,KAAKmR,OAAO,yBAA0BklB,GAAS7f,EAAMmP,MAAMoG,cAG9C,QAAf6jC,EAAIp5C,EAAMmP,aAAK,IAAAiqC,GAAXA,EAAaiB,SAAU,CACzB,MAAMzK,EAAU5vC,EAAMmP,MAAMkrC,SACtBC,EAAYxI,GAAWnC,cAAcC,GAG3CkC,GAAW1B,kBAAkBkK,GACxBn1C,KAAKkU,IACJ,MAAMy3B,EAAiBgB,GAAWT,WAAWh4B,GACvCkhC,EAAezI,GAAWF,kBAAkBd,GAC5Cz8C,EAAWrM,OAAO+vB,IAAIC,gBAAgBuiC,GAC5C/wD,KAAKmR,OAAO,qBAAsBtG,GAClC7K,KAAKmR,OAAO,wBAAyBm2C,OAK/C0J,mBAAmBx6C,EAAO65C,GACxB75C,EAAMsV,WAAaukC,GAErBY,kBAAkBz6C,EAAOuV,GACvBvV,EAAMuV,YAAcA,GAEtBmlC,YAAY16C,EAAO8M,GACjB9M,EAAMpK,gBAAiB,EACvB,IAAI3G,EAAQzF,KACY,kBAAbsjB,IAAuB9M,EAAMpK,gBAAiB,GACzDk8C,GAAWhE,mBAAmBhhC,GAAY,SAAS6W,EAAOg3B,GACxD36C,EAAMwG,cAAgBmd,OACFh7B,GAAhBgyD,GACFA,EAAax1C,KAAKkU,IAChB,MAAMy3B,EAAiBgB,GAAWT,WAAWh4B,GACvCkhC,EAAezI,GAAWF,kBAAkBd,GAC5Cz8C,EAAWrM,OAAO+vB,IAAIC,gBAAgBuiC,GAC5CtrD,EAAM0L,OAAO,qBAAsBtG,GACnCpF,EAAM0L,OAAO,wBAAyBm2C,KACrC1rC,MAAM,KACPpF,EAAM+L,YAAa,EACnB/L,EAAMpK,gBAAiB,QAK/BglD,YAAY56C,GACV,IACExW,KAAKmR,OAAO,wCAAyC,IACrDnR,KAAKmR,OAAO,uCAAwC,IACpDnR,KAAKmR,OAAO,wCAAyC,CACjDk5C,KAAM,CACJtqC,KAAM,MAKZvJ,EAAMqG,kBAAoB,GAE1BmI,WAAW,KACTxO,EAAM8U,wBAA0B,EAChC9U,EAAM+U,wBAA0B,EAChC/U,EAAMoV,yBAA2B,GAChC,GACH,MAAOnlB,GACPlE,QAAQiiB,MAAM/d,KAGlB4qD,gBAAgB76C,GACd,MAAMrN,EAAMqN,EAAMyzC,MACZqH,EAAS96C,EAAM2zC,SACrB,IAAKhhD,IAAQmoD,EAEX,YADA/uD,QAAQC,KAAK,uBAGf,MAAM+7C,EAAQp1C,EAAI2L,cAAc,OAChC,IAAKypC,EAEH,YADAh8C,QAAQC,KAAK,8BAIf,MAAM4E,EAAQm3C,EAAMtwB,aAAa,SAC3B3mB,EAASi3C,EAAMtwB,aAAa,UAE5BhlB,EAAIhC,KAAKyK,IAAI,EAAG8E,EAAM6J,YAAc7J,EAAM8J,eAAiB9J,EAAM+J,kBACjErX,EAAIjC,KAAKyK,IAAI,EAAG8E,EAAMmqC,aAAenqC,EAAMnM,aAAemM,EAAM/K,cAEhEszC,EAAU91C,EAAI7B,EAAQ,IAAM43C,EAAU91C,EAAI5B,EAAS,IACnD44B,EAASj5B,KAAK0K,IAAIotC,EAASC,GAEjC71C,EAAI+kB,aAAa,QAAS9mB,EAAQ84B,GAClC/2B,EAAI+kB,aAAa,SAAU5mB,EAAS44B,GACpC/2B,EAAI+kB,aAAa,UAAY,OAAM9mB,KAASE,KAE5CgqD,EAAOpjC,aAAa,QAAS9mB,EAAQ84B,GACrCoxB,EAAOpjC,aAAa,SAAU5mB,EAAS44B,GACvCoxB,EAAOpjC,aAAa,UAAY,OAAM9mB,KAASE,MAEjDiqD,+BAA+B/6C,EAAOoW,GACpCpW,EAAMoW,aAAeA,GAEvB4kC,8BAA8Bh7C,EAAOkV,GACf,MAAhBA,IASJlV,EAAMkV,aAAeA,EACrBnpB,QAAQyR,IAAI,2BAA4B0X,GACxC4kC,qBAAemB,0BAA0B/lC,GAGzC1rB,KAAKmR,OAAO,wCAAyCqF,EAAMqV,eAC3DrV,EAAMoV,yBAA2B,IAEnC8lC,+BAA+Bl7C,EAAOqV,GACd,OAAlBA,GAIJ7G,WAAW,KACT,IACEziB,QAAQyR,IAAI,OAAQ6X,GACpBrV,EAAMqV,cAAgBA,EAEtB,MAAM8lC,EAAUn7C,EAAMsV,WAChBwkC,qBAAesB,YAAY/lC,EAAerV,EAAM2zC,SAAU3zC,EAAMsV,YAChEwkC,qBAAesB,YAAY/lC,EAAerV,EAAM2zC,UAGtD3zC,EAAM8zC,qBAAuB,IAAI1zC,IACjCJ,EAAMqV,cAAcw+B,KAAKtqC,KAAK9f,QAAQ,CAAC4xD,EAAUz2D,KAC/Cob,EAAM8zC,qBAAqBrpD,IAAI0wD,EAAQxlC,SAAS/wB,GAAG8X,GAAI2+C,KAGzD7xD,KAAKmR,OAAO,kCAAmC,CAAC7O,SAAS,EAAMyoB,SAAU,KAEzE/qB,KAAKmR,OAAO,6BAA8BwgD,GAG1C3sC,WAAW,KACThlB,KAAKmR,OAAO,6BACX,GAEH,MAAO1K,GACPlE,QAAQiiB,MAAM,sBACdjiB,QAAQiiB,MAAM/d,GACdzG,KAAKmR,OAAO,kCAAmC,CAAC7O,SAAS,EAAMyoB,SAAUtkB,EAAEukB,UAC3EgiC,2BAAa,CAAC17C,MAAQ,yBACpB0Z,QAASvkB,EAAEukB,QAAQ8mC,UAAU,EAAG,IAAKrxD,KAAM,gBAInDsxD,kBAAkBv7C,GAChBA,EAAMyO,eAAiB,GAEzB+sC,yBAAyBx7C,GAAO,QAAClU,EAAO,SAAEyoB,IACxCvU,EAAMuQ,gBAAkBzkB,EACxBkU,EAAMwQ,iBAAmB+D,GAE3BknC,mBAAmBz7C,EAAOg0C,GACxBh0C,EAAMg0C,gBAAkBA,GAE1B0H,eAAe17C,EAAOi0C,GACpBj0C,EAAMi0C,YAAcA,GAEtB0H,iBAAiB37C,EAAOk0C,GACtBl0C,EAAMk0C,cAAgBA,GAExBj+C,QAAQ+J,GAAO,aAACwL,EAAY,aAAED,GAAa,IAKzCvL,EAAM4L,gBAAiB,EAKnB5L,EAAMyL,WACRzL,EAAMyL,SAASrgB,OACf4U,EAAMyL,SAAStgB,QACf6U,EAAMyL,SAAW,MAOnB,IACE1f,QAAQyR,IAAI,2BAA4BwC,EAAM2zC,SAAU3zC,EAAMqV,eAE9D,MAAM5J,EAAWzL,EAAMsV,WACjBwkC,qBAAe8B,YAAY57C,EAAMqV,cAAerV,EAAM2zC,SAAU3zC,EAAMsV,YACtEwkC,qBAAe8B,YAAY57C,EAAMqV,cAAerV,EAAM2zC,UAEtDkI,EAAc77C,EAAMhE,cAAcC,OAAO+D,EAAM7J,eAOrDsV,EAASqwC,SAASD,GAClB92D,OAAOiE,OAAOyiB,EAASke,KAAM,CAAC4J,SAAU/nB,EAAco3B,oBAAoB,IAC1En3B,EAAS8B,QAGT9B,EAASswC,KAAKF,GACdpwC,EAASswC,KAAK,GAEd/7C,EAAMyL,SAAWA,EAEbF,GACFirC,2BAAa,CAAC17C,MAAQ,mBACtB0Z,QAAS,sBAAuBvqB,KAAM,YAExC+V,EAAM4L,gBAAiB,EAEvB,MAAOmC,GACPhiB,QAAQiiB,MAAMD,GACdyoC,2BAAa,CAAC17C,MAAQ,iBACpB0Z,QAASzG,EAAUyG,QAASvqB,KAAM,YACpC+V,EAAM4L,gBAAiB,IAK3BowC,oBAAoBh8C,EAAOm7C,GACzB,MAAM3sD,EAAQ,IAAI2sD,EAAQxlC,UAEpBsmC,EAAer/C,IAAI,IAAA4B,EAAA,OAAsB,QAAtBA,EAAI5B,EAAKtU,OAAOE,cAAM,IAAAgW,IAAI,GAC7C09C,EAAat/C,GAAQq/C,EAAar/C,GAAQA,EAAK6B,sBAErDjQ,EAAMwqB,KAAK,CAACmjC,EAAIC,IAAOF,EAAWC,GAAMD,EAAWE,IACnD,MAAMvkD,EAASrJ,EAAMf,IAAI,KAAO,GAC1B4uD,EAAgB7tD,EAAMf,IAAI,IAAM,IAGtC,IAAK,IAAI7I,EAAI4J,EAAM1J,OAAS,EAAGF,GAAK,IAAKA,EACvC,IAAK,IAAIkB,EAAIlB,EAAI,EAAGkB,GAAK,IAAKA,EACxBm2D,EAAaztD,EAAM5J,IAAMs3D,EAAW1tD,EAAM1I,KAC5Cu2D,EAAcz3D,GAAGQ,KAAKU,GAM5B,IAAK,IAAIlB,EAAI,EAAGA,EAAI4J,EAAM1J,SAAUF,EAAG,CACrC,MAAMgY,EAAOpO,EAAM5J,GACnB,IAAK,IAAIkT,EAAS,EAAGA,EAAStJ,EAAM1J,OAAQgT,IAAU,CACpD,MAAOkI,EAAM5D,aAAatX,QAAUgT,EAClCkI,EAAM5D,aAAahX,KAAK,IAE1B,MAAMwW,EAAMoE,EAAM5D,aAAatE,GACzBwkD,EAAcD,EAAcz3D,GAAGm/C,KAAKwY,GAAmB1kD,EAAO0kD,KAAqBzkD,GACzF,IAAKwkD,EAAa,CAChB1gD,EAAIxW,KAAKwX,GACT/E,EAAOjT,GAAKkT,EACZ,QAKNkI,EAAM5D,aAAe,CAAC,IACtB5N,EAAM/E,QAAQ,CAACmT,EAAMhY,KACnB,MAAMkT,EAASD,EAAOjT,GACtB,MAAOkT,GAAUkI,EAAM5D,aAAatX,OAClCkb,EAAM5D,aAAahX,KAAK,IAE1B4a,EAAM5D,aAAatE,GAAQ1S,KAAKwX,MAIpC4/C,sBAAsBx8C,EAAOkzC,GAC3BlzC,EAAMqG,kBAAoB4sC,GAAuBC,IAGnDuJ,oBAAoBz8C,GAClBA,EAAMyP,eAAiB,EACvBzP,EAAM+P,kBAAoB,GAG5B2sC,uBAAuB18C,GACrBA,EAAM+P,kBAAoB,GAG5B4sC,iBAAiB38C,GACfA,EAAM4oC,YAAc,GAGtBgU,oBAAoB58C,EAAOxL,GACzBwL,EAAMxL,iBAAmBA,GAG3BqoD,cAAc78C,GAAO,MAACzX,EAAK,IAAEyG,EAAG,OAAE7E,IAChC,IAAI2yD,GAAgB,EAEpB,IAAK,IAAIl4D,EAAI,EAAGA,EAAIob,EAAMqG,kBAAkBvhB,SAAUF,EAAG,CACvD,MAAMk3B,EAAM9b,EAAMqG,kBAAkBzhB,GACpC,GAAIk3B,EAAI7V,WAAa1d,GAASuzB,EAAI/T,SAAW/Y,EAAK,CAEhD8sB,EAAI3xB,OAAO/E,QAAQ+E,GAEnB2xB,EAAI3xB,OAAS,IAAI,IAAIW,IAAIgxB,EAAI3xB,SAC7B2yD,GAAgB,EAChBtG,2BAAa,CAAC17C,MAAO,wBAAyB7Q,KAAM,SACpD,OAKC6yD,GACH98C,EAAMqG,kBAAkBjhB,KAAK,CAC3B6gB,SAAU1d,EACVwf,OAAQ/Y,EACR7E,OAAQA,EACR0X,KAAMsxC,OACNz2C,GAAInR,iBACJynD,QAASD,GAAgBxqD,EAAOyG,MAKtC+tD,eAAe/8C,EAAOoB,GACpB,IAAK,IAAIxc,EAAE,EAAGA,EAAEob,EAAMqG,kBAAkBvhB,SAAUF,EAChD,GAAIob,EAAMqG,kBAAkBzhB,GAAG8X,KAAO0E,EAAQ1E,GAAI,CAChDsD,EAAMqG,kBAAkBzhB,GAAGuF,OAASiX,EAAQjX,OAC5C,QAKN6yD,iBAAiBh9C,EAAOoB,GACtB,IAAK,IAAIxc,EAAE,EAAGA,EAAEob,EAAMqG,kBAAkBvhB,SAAUF,EAChD,GAAIob,EAAMqG,kBAAkBzhB,GAAG8X,KAAO0E,EAAQ1E,GAAI,CAChDsD,EAAMqG,kBAAkBrgB,OAAOpB,EAAE,GACjC,QAMNq4D,uBAAuBj9C,EAAOxX,GAC5B,MAAM00D,EAAiBl9C,EAAM6J,YAAc7J,EAAM8J,eAAiB9J,EAAM+J,iBAAmBvhB,EAC3FwX,EAAMy0C,uBAAyByI,EAC/Bl9C,EAAMlK,iBAAmBonD,EACzBl9C,EAAMhE,cAAcgjC,MAAM,CAAC,EAAGke,IAC9Bl9C,EAAM7J,cAAgB+mD,EACtB1zD,KAAKmR,OAAO,6BAEdwiD,oBAAoBn9C,EAAOpP,GACzB,MAAMgd,EAAOhd,EAAQoP,EAAM7J,cACrB4oC,EAAS/+B,EAAMhE,cAAc+iC,SAC7BC,EAAQh/B,EAAMhE,cAAcgjC,QAClCh/B,EAAMhE,cACD+iC,OAAO,CAAC,EAAGA,EAAO,GAAKnxB,IACvBoxB,MAAM,CAAC,EAAGA,EAAM,GAAKpxB,IAC1B5N,EAAM7J,cAAgBvF,EACtBpH,KAAKmR,OAAO,6BAEdyiD,oBAAoBp9C,EAAO4N,GACrB5N,EAAM7J,cAAgByX,EAAO5N,EAAMlK,mBACrC8X,EAAO5N,EAAM7J,cAAgB6J,EAAMlK,kBAErC,MAAMipC,EAAS/+B,EAAMhE,cAAc+iC,SAC7BC,EAAQh/B,EAAMhE,cAAcgjC,QAClCh/B,EAAMhE,cACD+iC,OAAO,CAAC,EAAGA,EAAO,KAClBC,MAAM,CAAC,EAAGA,EAAM,GAAKpxB,IAC1B5N,EAAM7J,cAAgB6J,EAAM7J,cAAgByX,EAC5CpkB,KAAKmR,OAAO,4BAEZqF,EAAMw0C,iBACCzV,OAAO,CAAC,EAAGA,EAAO,KAClBC,MAAM,CAAC,EAAGA,EAAM,MAEzBqe,2BAA2Br9C,EAAOvX,GAChCuX,EAAMhE,cACD+iC,OAAO,CAAC,EAAGt2C,EAAS,MACzBe,KAAKmR,OAAO,6BAEd2iD,kBAAkBt9C,GAEhB,MAAMrN,EAAMlE,OAAU,uBACtBkE,EAAII,UAAU,KAAK+c,SACnB,MAAMxgB,EAAIqD,EAAIpD,OAAO,KAEf2d,EAAa,GACbC,EAAUD,EAAalN,EAAM7J,cAAgB6J,EAAMlK,iBACnDynD,EAAO9uD,OAAWuR,EAAMhE,eACboR,MAAMD,GAEjBqwC,EAAgBluD,EAAEE,KAAK,YAAc,mBAAkBtK,KAAKq4D,GAClEC,EAAc3qD,OAAO,4BAA4Bid,SACjD0tC,EAAczqD,UAAU,SAASvD,KAAK,QAAS,WAC/CguD,EAAczqD,UAAU,cACTvD,KAAK,eAAe,SACpBA,KAAK,KAAK,OACzBguD,EAAczqD,UAAU,cACTvD,KAAK,YAAa,IAClBA,KAAK,IAAI,QAE1BiuD,iBAAiBz9C,GAAO,OAACvD,EAAM,MAAElU,EAAK,SAAEE,IAEtC,MAAMD,EAASD,EAETK,EAAOoX,EAAM8zC,qBAAqB/sD,IAAI0V,GAEtCihD,EAAO,GACC,MAAVl1D,IACFk1D,EAAKl1D,OAASA,GAEA,MAAZC,IACFi1D,EAAKj1D,SAAWA,GAGlB1D,OAAOiE,OAAOJ,EAAM80D,GAGhB,WAAY90D,GAAwB,IAAhBA,EAAKJ,eACpBI,EAAKJ,OAEV,aAAcI,GAA0B,IAAlBA,EAAKH,WAC7BG,EAAKH,SAAW,MAoBpBk1D,mBAAmB39C,GAAO,OAAClI,EAAM,aAAExM,EAAY,OAAEgN,IAC/C,MAAMsD,EAAMoE,EAAM5D,aAAatE,GAC/B,IAAIvP,EAAQyX,EAAMhE,cAAcC,OAAO3D,GACvC/P,EAAQkI,KAAKC,MAAc,IAARnI,GAAe,IAElC,MAAMoR,EAAU,CAACC,IAAKtO,EAAchD,OAAQ,CAACC,UAC7CqT,EAAIxW,KAAKuU,GAET,IAAIikD,MAAM,iBAIVp0D,KAAKmR,OAAO,4BACZnR,KAAKmR,OAAO,0CAEdkjD,qBAAqB79C,GAAO,WAAC8G,EAAU,WAAEC,EAAU,OAAE5c,EAAM,cAAEsd,EAAa,SAAE1d,IAAW,IAAA+zD,EAAAC,EACrF,IAAIH,MAAM,iBACV,MAAMr1D,EAAQyX,EAAMwG,cAAczF,MAAM+F,GAAYH,UAC9C3X,EAAMgR,EAAMwG,cAAczF,MAAMgG,GAAYC,QAC5CrN,EAAU,CACdC,IAAKoG,EAAMwK,cACXliB,OAAQ,CACNC,QACAE,SAAU,EACVD,OAAQ,GAEV2B,OAAQA,EACRma,SAAUtE,EAAMumB,cAChBx8B,SAAUA,GAEZ,GAAI0d,EAAe,CACjB,IAAIhf,EAAWuG,EAAMzG,EACrBoR,EAAQrR,OAAOG,SAAWgI,KAAKC,MAAiB,IAAXjI,GAAkB,IAIlC,QAAvBq1D,EAAI99C,EAAMqV,qBAAa,IAAAyoC,GAAU,QAAVC,EAAnBD,EAAqB50C,gBAAQ,IAAA60C,GAA7BA,EAA+Bx0C,OACjCvJ,EAAMqV,cAAcnM,SAASK,KAAKnkB,KAAKuU,GACvCqG,EAAMqV,cAAgB,IAAIrV,EAAMqV,eAChC7rB,KAAKmR,OAAO,6BAA8BqF,EAAMqV,gBAElD7rB,KAAKmR,OAAO,6BAEdqjD,qBAAqBh+C,GAAO,KAACpD,EAAI,OAAEzS,IACjC,IAAIyzD,MAAM,kBAKZK,iBAAiBj+C,EAAOoB,GACtB,IAAK,MAAMxF,KAAOoE,EAAM5D,aAAc,CACpC,MAAMqJ,EAAM7J,EAAIzJ,QAAQiP,EAAQ/H,YAChC,IAAa,IAAToM,EAAY,CACd7J,EAAI5V,OAAOyf,EAAK,GAChB,OAGJjc,KAAKmR,OAAO,yCACZnR,KAAKmR,OAAO,6BAEdujD,uBAAuBl+C,EAAOoB,GAC5B,MAAMxE,EAAOoD,EAAM5D,aAAakB,OAAO6I,KAAKvhB,GAAGA,EAAEgV,KAAKwH,EAAQxH,KAAKhV,EAAEuF,QAAQiX,EAAQjX,QAC/E5B,EAAQ6Y,EAAQ9Y,OAAOC,MACvBE,EAAW2Y,EAAQ9Y,OAAOG,SAEhCe,KAAKmR,OAAO,0BAA0B,CAACiC,OAAMrU,QAAOE,aACpDe,KAAKmR,OAAO,yCACZnR,KAAKmR,OAAO,6BAEdwjD,WAAWn+C,EAAOpD,GAChB,IAAK,IAAIhY,EAAI,EAAGA,EAAIob,EAAM5D,aAAatX,OAAQF,IAAK,CAClD,MAAMgX,EAAMoE,EAAM5D,aAAaxX,GACzBqa,EAAQrD,EAAIzJ,QAAQyK,GAC1B,GAAIqC,GAAS,EAAG,CACdrD,EAAI5V,OAAOiZ,EAAO,GAClB,OAGJ,IAAI2+C,MAAM,iBAGVp0D,KAAKmR,OAAO,6BAA8B,MAG1CnR,KAAKmR,OAAO,uCACZnR,KAAKmR,OAAO,4BACZnR,KAAKmR,OAAO,0CAEdyjD,0BAA0Bp+C,EAAOq+C,GAC/Br+C,EAAM81C,oBAAsBuI,GAK9BC,6BAA6Bt+C,GAC3BA,EAAMkK,yBAA0B,GAElCq0C,oBAAoBv+C,EAAOpD,GACzBoD,EAAMjD,cAAgBH,GAExB4hD,sBAAsBx+C,EAAOuK,GAC3BvK,EAAMuK,gBAAkBA,GAE1Bk0C,kBAAkBz+C,GAGhB,MAAM0+C,EAAUjuD,KAAKyK,OAAO8E,EAAM5D,aAAakB,OAC1C7P,IAAImP,IAAI,IAAA+hD,EAAAC,EAAA,OAAwB,QAApBD,EAAY,QAAZC,EAAChiD,EAAKtU,cAAM,IAAAs2D,OAAA,EAAXA,EAAap2D,cAAM,IAAAm2D,IAAI,GAAK/hD,EAAK6B,yBACnD1S,QAAQyR,IAAI,UAAWkhD,EAAS1+C,EAAMhE,cAAcC,OAAO+D,EAAM7J,gBACjE,MAAOuoD,GAAW1+C,EAAMhE,cAAcC,OAAO+D,EAAM7J,eACjD3M,KAAKmR,OAAO,6BAAoD,IAAtBqF,EAAM7J,eASlDqY,WAAW,KACTxO,EAAMJ,oBAAsB,GAC3B,GAEHpW,KAAKmR,OAAO,6BAEdkkD,+BAA+B7+C,GAAO,IAAA8+C,EAAAC,EACZ,QAApBD,EAAC9+C,EAAMqV,qBAAa,IAAAypC,GAAM,QAANC,EAAnBD,EAAqBjL,YAAI,IAAAkL,GAAzBA,EAA2Bx1C,OAGhCvJ,EAAMqV,cAAcw+B,KAAKtqC,KAAOvJ,EAAM5D,aAAakB,OAC9C7P,IAAImP,GAAQoD,EAAM8zC,qBAAqB/sD,IAAI6V,EAAKF,KAChDsc,KAAK,CAACC,EAAGC,KAAC,IAAA8lC,EAAAC,EAAAC,EAAAC,EAAA,OAAsB,QAAjBH,EAAS,QAATC,EAAChmC,EAAE3wB,cAAM,IAAA22D,OAAA,EAARA,EAAUz2D,cAAM,IAAAw2D,IAAI,IAAsB,QAArBE,EAAa,QAAbC,EAAKjmC,EAAE5wB,cAAM,IAAA62D,OAAA,EAARA,EAAU32D,cAAM,IAAA02D,IAAI,KACnEl/C,EAAMoV,yBAA2B,EACjCrpB,QAAQyR,IAAI,iCAAkCwC,EAAMqV,iBAEtDxW,gBAAgBmB,EAAOlB,GACrBkB,EAAMlB,WAAaA,GAErBsgD,cAAcp/C,GAAO,KAACpD,EAAI,OAAE9E,IAC1B,MAAM+F,EAASmC,EAAM5D,aAAa+J,KAAKvK,GAAOA,EAAIC,SAASe,IAC3D,IAAKiB,EACH,OAEF,MAAMC,EAASkC,EAAM5D,aAAatE,GAClC+F,EAAO7X,OAAO6X,EAAO1L,QAAQyK,GAAO,GACpCkB,EAAO1Y,KAAKwX,GACZ,MAAMq/C,EAAer/C,IAAI,IAAAyiD,EAAAC,EAAAC,EAAAC,EAAA,OAAuB,QAAnBH,EAAY,QAAZC,EAAC1iD,EAAKtU,cAAM,IAAAg3D,OAAA,EAAXA,EAAa/2D,aAAK,IAAA82D,IAAI,IAAyB,QAAxBE,EAAgB,QAAhBC,EAAK5iD,EAAKtU,cAAM,IAAAk3D,OAAA,EAAXA,EAAah3D,cAAM,IAAA+2D,IAAI,IACjFzhD,EAAOkb,KAAK,CAACmjC,EAAIC,IAAOH,EAAaE,GAAMF,EAAaG,KAM1DqD,mBAAmBz/C,GAAO,KAACpD,EAAI,YAAE8iD,IAE/B36D,OAAOiE,OAAO4T,EAAM8iD,GAepB,IAAI9B,MAAM,iBAMVp0D,KAAKmR,OAAO,4BACZnR,KAAKmR,OAAO,0CAOdglD,sBAAsB3/C,GAAO,OAACvD,EAAM,YAAEijD,IACpC1/C,EAAMmK,gBAAkB,CAAC1N,SAAQijD,gBAEnCE,8BAA8B5/C,GAC5BA,EAAMoV,yBAA2B,GAEnCyqC,iBAAiB7/C,EAAO8/C,GACtB9/C,EAAM0O,WAAaoxC,GAErBC,iBAAiB//C,EAAO84C,GACtB94C,EAAM2O,WAAamqC,GAGrBkH,oBAAoBhgD,EAAO4H,GACzB5H,EAAM4H,cAAgBA,EACtB5H,EAAM80C,aAAc,GAEtBmL,YAAYjgD,GACVA,EAAM80C,aAAc,GAGtBoL,yBAAyBlgD,EAAOtJ,GAC9BsJ,EAAM20C,iBAAmBj+C,GAE3BypD,sBAAsBngD,EAAO9a,GAC3B8a,EAAM40C,aAAc,EAChB1vD,GAAQ8a,EAAM20C,mBAChB30C,EAAM40C,YAAc50C,EAAM20C,oBACvB30C,EAAM40C,cACT50C,EAAM20C,iBAAmB,OAE7ByL,uBAAuBpgD,EAAOtJ,GAC5BsJ,EAAM60C,eAAiBn+C,GAEzB2pD,oBAAoBrgD,EAAO9a,GACzB8a,EAAMuM,WAAY,EACdrnB,GAAQ8a,EAAM60C,iBAChB70C,EAAMuM,UAAYvM,EAAM60C,kBACrB70C,EAAMuM,YACTvM,EAAM60C,eAAiB,OAG3ByL,qBAAqBtgD,GACnB,MAAM2H,EAAUne,KAAKwW,MAAM7V,OAAOwqB,eAClChN,EAAQle,QAAQU,IACdsE,OAAUuR,EAAMD,SACXlN,OAAO,IAAM1I,EAAOuS,IACpBlN,KAAK,QAASrF,EAAOwoD,UAI9B4N,WAAWvgD,GACT,IAAKA,EAAMmP,MACT,OAGF,MAAMqxC,EAAiB,CAAC,OAAQ,KAAM,QAAS,OAAQ,MAAO,QAC9DxgD,EAAMmP,MAAMoG,YAAY6uB,SAAW56C,KAAKwW,MAAM7V,OAAOwqB,eAAelnB,IAAIrG,IACtE,MAAMyoB,EAAK,GAEX,OADA2wC,EAAe/2D,QAAQhC,GAAOooB,EAAGpoB,GAAOL,EAAEK,IACnCooB,IAGT7P,EAAMmP,MAAMwqC,KAAO,CACjBC,OAAQ55C,EAAMoW,aACduK,UAAW3gB,EAAMkV,aACjBjqB,UAAW+U,EAAMqV,eAGnB,MAAM1iB,GAAO,IAAIs/C,WACZC,gBAAgBlyC,EAAMmP,MAAMG,OAAQ,iBACpChR,cAAc,OACnB0B,EAAMmP,MAAMoG,YAAY6uB,SAAS36C,QAAQU,IACvCsE,OAAUkE,GACLE,OAAO,IAAM1I,EAAOuS,IACpBlN,KAAK,QAASrF,EAAOwoD,SAE5B3yC,EAAMmP,MAAMG,OAASwjC,GAAYL,cAAc9/C,IAGjD8tD,YAAYzgD,EAAO3L,GACjB2L,EAAM3L,SAAWA,EACb2L,EAAM0gD,kBACR1gD,EAAMiM,QAAQ00C,oBAAoB,iBAAkB3gD,EAAM0gD,mBAAmB,GAE7E1gD,EAAM0gD,kBAAoB,WACxB1gD,EAAM+L,YAAa,GACnBrkB,KAAK8B,MAETwW,EAAM+L,YAAa,EACnB/L,EAAMpK,gBAAiB,EACvBoK,EAAMiM,QAAQ20C,iBAAiB,iBAAkB5gD,EAAM0gD,mBAAmB,IAE5EG,eAAe7gD,EAAOqZ,GACpBrZ,EAAMqZ,YAAcA,GAEtBynC,eAAe9gD,EAAOgM,GACpBhM,EAAMgM,SAAWA,GAEnBzV,WAAWyJ,EAAOvJ,GAChBuJ,EAAMvJ,KAAOA,GAEfsqD,oBAAoB/gD,EAAO6O,GACzB7O,EAAM6O,cAAgBA,GAExBmyC,iBAAiBhhD,EAAOihD,GACtBjhD,EAAM+L,WAAak1C,GAErBC,aAAalhD,EAAOhQ,GAElB,MAAMyL,EAAaV,SAASuD,cAAc,mBAAmB7C,WACvD0lD,EAAenhD,EAAMw0C,iBAAiBv4C,OAAO+D,EAAMd,WAAWlP,EAAMe,EAAE0K,GACtE2lD,EAAWphD,EAAMhE,cAAcmlD,GACrCnhD,EAAMd,WAAazO,KAAKyK,IAAIkmD,GAAUpxD,EAAMe,EAAE0K,GAAY,IAE5DvH,SAAS8L,GACP,MAAM25C,EAAO,CACX1vC,UAAWzgB,KAAKwW,MAAMwY,SAASvO,UAC/Bhf,UAAW+U,EAAMqV,cACjBsL,UAAW3gB,EAAMkV,cAGbm7B,EAAO,IAAI7zB,KAAK,CAAC0D,KAAKjL,UAAU0kC,EAAM,KAAM,IAAK,CAAC1vD,KAAM,qBACxDsyB,EAAMxE,IAAIC,gBAAgBq4B,GAC1Bp3B,EAAIle,SAAS4e,cAAc,KACjCV,EAAE0D,KAAOJ,EACTtD,EAAEmD,SAAcu9B,EAAK1vC,UAAP,QACdgP,EAAE1Y,QACFwX,IAAIspC,gBAAgB9kC,KAIT,QACb+kC,YAAY,EACZthD,MAAK,GACLi2C,WACAE,WACAO,cClwCK,SAAS6K,GAAiBC,EAAU9qD,EAAUi3C,GACnD,IAAIpxB,EAAM,oBAAsBilC,EAChCtpC,QAAMnxB,IAAIw1B,GACPpX,KAAKgT,IACJzhB,EAASyhB,KACR/S,MAAM4I,IACP2/B,EAAc3/B,KAIb,SAASyzC,GAAeD,EAAU9qD,EAAUi3C,GACjD,IAAIpxB,EAAM,cAAgBilC,EAC1B,OAAOtpC,QAAMnxB,IAAIw1B,GACdpX,KAAKgT,IACJzhB,EAASyhB,KACR/S,MAAM4I,IACP2/B,EAAc3/B,KAcb,SAAS0zC,GAAgBF,EAAU9qD,EAAUi3C,GAClD,IAAIpxB,EAAM,qBAAuBilC,EACjC,OAAOtpC,QAAMnxB,IAAIw1B,GACdpX,KAAKgT,IACJzhB,EAASyhB,KACR/S,MAAM4I,IACP2/B,EAAc3/B,KAIb,SAAS2zC,GAAiBH,EAAU9qD,EAAUi3C,GACnD,IAAIpxB,EAAM,gBAAkBilC,EAC5B,OAAOtpC,QAAMnxB,IAAIw1B,GACZpX,KAAKgT,IACJzhB,EAASyhB,KACR/S,MAAM4I,IACX2/B,EAAc3/B,KAIX,SAAS4zC,GAAiBJ,EAAU9qD,EAAUi3C,GACnD,IAAIpxB,EAAM,oBAAsBilC,EAChC,OAAOtpC,QAAMnxB,IAAIw1B,GACdpX,KAAKgT,IACJzhB,EAASyhB,KACR/S,MAAM4I,IACP2/B,EAAc3/B,KC1DL,SAAEtR,GAAG,cAAc0a,MAAM,iBAAiByB,MAAM,0BAA0B4zB,UAAU,aAAa,CAAC/vC,GAAG,yBAAyB0a,MAAM,oBAAoByB,MAAM,aAAa4zB,UAAU,aAAa,CAAC/vC,GAAG,kBAAkB0a,MAAM,0BAA0ByB,MAAM,aAAa4zB,UAAU,aAAa,CAAC/vC,GAAG,kBAAkB0a,MAAM,0BAA0ByB,MAAM,aAAa4zB,UAAU,aAAa,CAAC/vC,GAAG,kBAAkB0a,MAAM,0BAA0ByB,MAAM,aAAa4zB,UAAU,aAAa,CAAC/vC,GAAG,kBAAkB0a,MAAM,qBAAqByB,MAAM,aAAa4zB,UAAU,aAAa,CAAC/vC,GAAG,0BAA0B0a,MAAM,6BAA6ByB,MAAM,aAAa4zB,UAAU,aAAa,CAAC/vC,GAAG,0BAA0B0a,MAAM,6BAA6ByB,MAAM,aAAa4zB,UAAU,aAAa,CAAC/vC,GAAG,0BAA0B0a,MAAM,6BAA6ByB,MAAM,aAAa4zB,UAAU,aAAa,CAAC/vC,GAAG,0BAA0B0a,MAAM,6BAA6ByB,MAAM,aAAa4zB,UAAU,aAAa,CAAC/vC,GAAG,sBAAsB0a,MAAM,iCAAiCyB,MAAM,aAAa4zB,UAAU,aAAa,CAAC/vC,GAAG,sBAAsB0a,MAAM,iCAAiCyB,MAAM,aAAa4zB,UAAU,aAAa,CAAC/vC,GAAG,sBAAsB0a,MAAM,iCAAiCyB,MAAM,aAAa4zB,UAAU,aAAa,CAAC/vC,GAAG,sBAAsB0a,MAAM,4BAA4ByB,MAAM,aAAa4zB,UAAU,aAAa,CAAC/vC,GAAG,8BAA8B0a,MAAM,oCAAoCyB,MAAM,aAAa4zB,UAAU,aAAa,CAAC/vC,GAAG,8BAA8B0a,MAAM,oCAAoCyB,MAAM,aAAa4zB,UAAU,aAAa,CAAC/vC,GAAG,8BAA8B0a,MAAM,oCAAoCyB,MAAM,aAAa4zB,UAAU,aAAa,CAAC/vC,GAAG,8BAA8B0a,MAAM,oCAAoCyB,MAAM,aAAa4zB,UAAU,aAAa,CAAC/vC,GAAG,cAAc0a,MAAM,YAAYyB,MAAM,0BAA0B4zB,UAAU,aAAa,CAAC/vC,GAAG,6BAA6B0a,MAAM,iBAAiByB,MAAM,0BAA0B4zB,UAAU,aAAa,CAAC/vC,GAAG,0BAA0B0a,MAAM,wBAAwByB,MAAM,0BAA0B4zB,UAAU,aAAa,CAAC/vC,GAAG,iBAAiB0a,MAAM,eAAeyB,MAAM,0BAA0B4zB,UAAU,aAAa,CAAC/vC,GAAG,mBAAmB0a,MAAM,iBAAiByB,MAAM,0BAA0B4zB,UAAU,aAAa,CAAC/vC,GAAG,qBAAqB0a,MAAM,mBAAmByB,MAAM,0BAA0B4zB,UAAU,cAAc,CAAC/vC,GAAG,sBAAsB0a,MAAM,oBAAoByB,MAAM,0BAA0B4zB,UAAU,aAAa,CAAC/vC,GAAG,qCAAqC0a,MAAM,mCAAmCyB,MAAM,0BAA0B4zB,UAAU,aAAa,CAAC/vC,GAAG,iBAAiB0a,MAAM,eAAeyB,MAAM,0BAA0B4zB,UAAU,cAAc,CAAC/vC,GAAG,wBAAwB0a,MAAM,sBAAsByB,MAAM,0BAA0B4zB,UAAU,qBAAqB,CAAC/vC,GAAG,sBAAsB0a,MAAM,oBAAoByB,MAAM,0BAA0B4zB,UAAU,aAAa,CAAC/vC,GAAG,mBAAmB0a,MAAM,cAAcyB,MAAM,kBAAkB4zB,UAAU,qBAAqB,CAAC/vC,GAAG,mBAAmB0a,MAAM,gCAAgCyB,MAAM,kBAAkB4zB,UAAU,qBAAqB,CAAC/vC,GAAG,mBAAmB0a,MAAM,cAAcyB,MAAM,kBAAkB4zB,UAAU,qBAAqB,CAAC/vC,GAAG,oBAAoB0a,MAAM,eAAeyB,MAAM,kBAAkB4zB,UAAU,cAAc,CAAC/vC,GAAG,oBAAoB0a,MAAM,eAAeyB,MAAM,kBAAkB4zB,UAAU,cAAc,CAAC/vC,GAAG,sBAAsB0a,MAAM,kBAAkByB,MAAM,kBAAkB4zB,UAAU,gBAAgB,CAAC/vC,GAAG,sBAAsB0a,MAAM,iBAAiByB,MAAM,kBAAkB4zB,UAAU,gBAAgB,CAAC/vC,GAAG,mBAAmB0a,MAAM,YAAYyB,MAAM,kBAAkB4zB,UAAU,aAAa,CAAC/vC,GAAG,mBAAmB0a,MAAM,cAAcyB,MAAM,kBAAkB4zB,UAAU,eAAe,CAAC/vC,GAAG,cAAc0a,MAAM,YAAYyB,MAAM,iCAAiC4zB,UAAU,eAAe,CAAC/vC,GAAG,kBAAkB0a,MAAM,gBAAgByB,MAAM,iCAAiC4zB,UAAU,iBAAiB,CAAC/vC,GAAG,iBAAiB0a,MAAM,eAAeyB,MAAM,iCAAiC4zB,UAAU,WAAW,CAAC/vC,GAAG,oBAAoB0a,MAAM,oBAAoByB,MAAM,iCAAiC4zB,UAAU,aCyS7xI,MC5RDzsC,GAAQA,KAAA,CACZyY,YAAaopC,GAEbtqC,aAAc,IAAInX,IAClBuX,kBAAkB,EAElB1N,UAAW,KACX63C,YAAa,KAEbC,UAAW,IAAI3hD,IACf4hD,YAAa,IAAI5hD,IACjB6hD,cAAe,IAAI7hD,IACnB8hD,eAAgB,IAAI9hD,IACpB+hD,oBAAqB,IAAI/hD,IACzBgiD,WAAY,IAAIhiD,IAEhB6L,QAAS,OAILgqC,GAAU,GAIVE,GAAU,CACd,yBAAwB,MAACn2C,EAAK,OAAErF,EAAM,SAAEiS,GAAW3C,GACjD,SAASo4C,EAAkBC,GACzB,MAAMC,EAAc,GACdt4C,EAAYq4C,EAASr4C,UACrBu4C,EAAcF,EAASva,MAEvB0a,EAAgBH,EAASI,MAK/B,OAJAH,EAAYn9D,KAAKwnB,EAAS,iBAAkB,CAAC3C,YAAWu4C,iBAExDD,EAAYn9D,KAAKwnB,EAAS,mBAAoB,CAAC3C,YAAWu3C,SAAUiB,KAE7DnS,QAAQqS,IAAIJ,GAGrB,GAAIviD,EAAMmiD,oBAAoBrpC,IAAI7O,GAAY,CAC5CtP,EAAO,kBAAmBsP,GAC1BtP,EAAO,iBACP,MAAM,OAAC2U,EAAM,gBAAEszC,GAAmB5iD,EAAMmiD,oBAAoBp7D,IAAIkjB,GAChEtP,EAAO,oBAAqBioD,GAC5BjoD,EAAO,YAAa,CAACsP,YAAWqF,WAChC3U,EAAO,kBAAmB,CAACsP,YAAWqF,WAEtC3U,EAAO,0BAA2B,KAAM,CAACkoD,MAAM,IAC/CloD,EAAO,yBAA0B,EAAG,CAACkoD,MAAM,IAC3CloD,EAAO,wBAAwB,EAAM,CAACkoD,MAAM,QACvC,CACLloD,EAAO,kBAAmBsP,GAC1BtP,EAAO,iBAEP,MAAMmoD,EAAkB74C,EAAY,SACpCs3C,GAAiBuB,EAAiBxM,IAChC,MAAMwL,EAAmC,kBAAdxL,EAAKhyD,KAAoB8vB,KAAMC,MAAMiiC,EAAKhyD,MAAQgyD,EAAKhyD,KAClFqW,EAAO,oBAAqBmnD,GAC5BO,EAAkBP,GAAa38C,KAAK,KAClCxK,EAAO,0BAA2B,KAAM,CAACkoD,MAAM,IAC/CloD,EAAO,yBAA0B,EAAG,CAACkoD,MAAM,IAC3CloD,EAAO,wBAAwB,EAAM,CAACkoD,MAAM,OAE7CtM,IACDC,2BAAa,CAAC17C,MAAO,2BAA4B0Z,QAAS+hC,EAAU/hC,QAASvqB,KAAM,UACnF8B,QAAQiiB,MAAMuoC,OAMpB,mBAAkB,MAACv2C,EAAK,OAAErF,IACxBqF,EAAMyY,YAAYhvB,QAAQutB,IACxB,MAAM/M,EAAY+M,EAAQta,GAE1B,GAAIsD,EAAMuX,aAAauB,IAAI7O,GACzB,OAGF,MAAM64C,EAAkB74C,EAAY,SAEpCs3C,GAAiBuB,EAAiBxM,IAChCvqD,QAAQyR,IAAI,6BAA+BslD,GAC3C,MAAMhB,EAAmC,kBAAdxL,EAAKhyD,KAAoB8vB,KAAMC,MAAMiiC,EAAKhyD,MAAQgyD,EAAKhyD,KAC5Ek+D,EAAcV,EAAY/Z,MAEhC,GAAoB,KAAhBya,EAAoB,CACtB,MAAMpqC,EAAQoqC,EAAYxwC,OAAOZ,QAAQ,KAAM,IAAIA,QAAQ,OAAQ,IAC7DowC,EAAWppC,EAAQ,OACzBqpC,GAAeD,EAAUlL,IACvB37C,EAAO,kBAAmB,CAACsP,YAAWqF,OAAQgnC,EAAKhyD,QAClDiyD,IACD57C,EAAO,kBAAmB,CAACsP,YAAWqF,OAAQ,KAC9CvjB,QAAQiiB,MAAMuoC,OAGjBA,IACDxqD,QAAQiiB,MAAMuoC,QAIpBkL,gBAAe,OAAC9mD,IAAS,UAACsP,EAAS,YAAEu4C,IACnC,OAAOf,GAAee,EAAalM,IACjC37C,EAAO,YAAa,CAACsP,YAAWqF,OAAQgnC,EAAKhyD,QAC5CiyD,IACD57C,EAAO,YAAa,CAACsP,YAAWqF,OAAQ,KACxCknC,2BAAa,CAAC17C,MAAQ,kBAAiB0nD,eACrChuC,QAAS+hC,EAAU/hC,QAASvqB,KAAM,YACpC8B,QAAQiiB,MAAMuoC,MAGlBoL,kBAAiB,OAAChnD,IAAS,UAACsP,EAAS,SAAEu3C,IACrC,OAAOG,GAAiBH,EAAUlL,IAChC37C,EAAO,cAAe,CAACsP,YAAWowC,SAAU/D,EAAKhyD,QAChDiyD,IACD57C,EAAO,cAAe,CAACsP,YAAWowC,SAAU,KAC5C7D,2BAAa,CAAC17C,MAAO,4BAA6B0Z,QAAS+hC,EAAU/hC,QAASvqB,KAAM,UACpF8B,QAAQyR,IAAI+4C,MAGhBmL,iBAAgB,OAAC/mD,IAAS,UAACsP,EAAS,SAAEu3C,IACpC,OAAOE,GAAgBF,EAAUlL,IAC/B37C,EAAO,gBAAiB,CAACsP,YAAW6C,WAAYwpC,EAAKhyD,QACpDiyD,IACD57C,EAAO,gBAAiB,CAACsP,YAAW6C,WAAY,KAChD0pC,2BAAa,CAAC17C,MAAQ,uBAAsB0mD,eAC1ChtC,QAAS+hC,EAAU/hC,QAASvqB,KAAM,YACpC8B,QAAQiiB,MAAMuoC,MAGlBqL,kBAAiB,OAACjnD,GAASyd,GACzB,MAAMopC,EAAWppC,EAAQ,QACzB,OAAOwpC,GAAiBJ,EAAUlL,IAChC37C,EAAO,iBAAkB,CAACyd,QAAO7C,YAAa+gC,EAAKhyD,QAClDiyD,IACD57C,EAAO,iBAAkB,CAACyd,QAAO7C,YAAa,OAC1CisC,EAAS3lD,SAAS,UAGtB26C,2BAAa,CAAC17C,MAAQ,gBAAe0mD,eACnChtC,QAAS+hC,EAAU/hC,QAASvqB,KAAM,YACpC8B,QAAQyR,IAAI+4C,OAGhBwM,YAAW,MAAC/iD,EAAK,OAAErF,IAAS,MAACyd,EAAK,OAAE9I,IAGlC,IAAIrF,EAAYmO,EAGZ4qC,EAAK,EACT,MAAMC,EAAe,IAAIn4D,IAAIkV,EAAMyY,YAAYhrB,IAAI3F,GAAKA,EAAE4U,KAC1D,IAAIwmD,EAAej5C,EACnB,MAAOg5C,EAAanqC,IAAIoqC,GACtBF,GAAM,EACNE,EAAej5C,EAAY,IAAM+4C,EAEnC/4C,EAAYi5C,EAEZljD,EAAMyY,YAAY0qC,QAAQ,CAACzmD,GAAIuN,EAAWmN,MAAOnN,EAAW4O,MAAO,aAEnE,MAAMipC,EAAc,CAClBxyC,OAAQA,EACRszC,gBAAiB,CACf34C,YACA89B,MAAQ,KAAI99B,QACZhf,UAAW,CACT4oD,KAAM,CACJ1pD,OAAQ,CAAC4I,UAAW,YACpBwW,KAAM,KAGVoX,UAAW,KAGf3gB,EAAMmiD,oBAAoB13D,IAAIwf,EAAW63C,GACzCnnD,EAAO,kBAAmB,CAACsP,YAAWqF,WACtC3U,EAAO,kBAAmBsP,KAKxBysC,GAAY,CAChB0M,gBAAgBpjD,EAAOiK,GACrBjK,EAAMiK,UAAYA,GAEpBo5C,cAAcrjD,GACZA,EAAM8hD,YAAc,KAEpB9hD,EAAM+hD,UAAY,IAAI3hD,IACtBJ,EAAMgiD,YAAc,IAAI5hD,IACxBJ,EAAMiiD,cAAgB,IAAI7hD,IAC1BJ,EAAMkiD,eAAiB,IAAI9hD,KAE7BkjD,kBAAkBtjD,EAAO8hD,GACvB9hD,EAAM8hD,YAAcA,GAGtByB,UAAUvjD,GAAO,UAACiK,EAAS,OAAEqF,IAC3BtP,EAAM+hD,UAAUt3D,IAAIwf,EAAWqF,IAEjCk0C,gBAAgBxjD,GAAO,UAACiK,EAAS,OAAEqF,IACjCtP,EAAMuX,aAAa9sB,IAAIwf,EAAWqF,GAClCd,WAAW,IAAMhlB,KAAKmR,OAAO,mCAAoC,IAEnE8oD,uBAAuBzjD,GACrBA,EAAM2X,mBAAoB,GAG5B+rC,YAAY1jD,GAAO,UAACiK,EAAS,SAAEowC,IAC7Br6C,EAAMgiD,YAAYv3D,IAAIwf,EAAWowC,IAEnCsJ,cAAc3jD,GAAO,UAACiK,EAAS,WAAE6C,IAC/B9M,EAAMiiD,cAAcx3D,IAAIwf,EAAW6C,IAErC82C,eAAe5jD,GAAO,UAACiK,EAAS,YAAEsL,IAChCvV,EAAMkiD,eAAez3D,IAAIwf,EAAWsL,IAEtCsuC,WAAW7jD,GAAO,MAACoY,EAAK,QAAE0gC,IACxB94C,EAAMoiD,WAAW33D,IAAI2tB,EAAO0gC,IAG9B/G,eAAe/xC,GAAO,QAACgyC,EAAO,OAAE1iC,EAAM,YAAEiG,IACtCvV,EAAM+hD,UAAUt3D,IAAIunD,EAAS1iC,GAC7BtP,EAAMkiD,eAAez3D,IAAIunD,EAASz8B,IAGpCuuC,gBAAgB9jD,EAAOiM,GACrBjM,EAAMiM,QAAUA,IAIL,QACbq1C,YAAY,EACZthD,MAAK,GACLi2C,QAAO,GACPE,QAAO,GACPO,UAASA,IC1PJ,SAASqN,KACd,IAAIC,EAAS,EAEb,MAAMC,EAAkBA,CAACryC,EAAMsyC,KAC7BA,EAAiBz6D,QAAQ06D,IACvBvyC,EAAK+D,SAASvwB,KAAK,IAAIg/D,GAAeJ,IAAUG,GAAS,OAIvDh1C,EAAQ,IAAIi1C,GAAeJ,IAAU,SAErCzrD,EAAa,IAAI6rD,GAAeJ,IAAU,cAChD70C,EAAMwG,SAASvwB,KAAKmT,GAEpB,MAAMwvC,EAAQ,IAAIqc,GAAeJ,IAAU,SAC3C70C,EAAMwG,SAASvwB,KAAK2iD,GAEpB,MAAMjtC,EAAQ,IAAIspD,GAAeJ,IAAU,SAC3Cjc,EAAMpyB,SAASvwB,KAAK0V,GACpBmpD,EAAgBnpD,EAAO,CAAC,aAAc,cAEtC,MAAMupD,EAAO,IAAID,GAAeJ,IAAU,QAC1Cjc,EAAMpyB,SAASvwB,KAAKi/D,GACpBJ,EAAgBI,EAAM,CAAC,MAAO,kBAAmB,OAAQ,QAAS,OAAQ,WAE1E,MAAM9G,EAAO,IAAI6G,GAAeJ,IAAU,QAC1Cjc,EAAMpyB,SAASvwB,KAAKm4D,GAEpB,MAAM+G,EAAS,IAAIF,GAAeJ,IAAU,UAC5Cjc,EAAMpyB,SAASvwB,KAAKk/D,GACpBL,EAAgBK,EAAQ,CAAC,eAAgB,kBAEzC,MAAMC,EAAQ,IAAIH,GAAeJ,IAAU,UAC3CzG,EAAK5nC,SAASvwB,KAAKm/D,GACnBN,EAAgBM,EAAO,CAAC,kBAAmB,gBAAiB,cAAe,kBAAmB,kBAE9F,MAAMC,EAAQ,IAAIJ,GAAeJ,IAAU,UAK3C,OAJAzG,EAAK5nC,SAASvwB,KAAKo/D,GACnBP,EAAgBO,EAAO,CAAC,kBAAmB,gBAAiB,cAAe,kBAAmB,kBAE9FC,GAA0Bt1C,GACnBi1C,GAAeM,OAAOv1C,GAG/B,SAASs1C,GAA0B7yC,EAAM+yC,GACvC,IAAIC,EAIFA,EAHGD,EAGWA,EAAY,IAAM/yC,EAAKuyC,QAFvBvyC,EAAKuyC,QAIrBvyC,EAAKgzC,YAAcA,EACnBhzC,EAAK+D,SAASlsB,QAAQmsB,GAAS6uC,GAA0B7uC,EAAOgvC,IAGlE,MAAMR,GAQJh8D,YAAYsU,EAAIynD,EAASU,GAAQx8D,gBAAA,kBAAAA,gBAAA,oBAAAA,gBAAA,uBAAAA,gBAAA,2BAAAA,gBAAA,wBAAAA,gBAAA,sBAC/BmB,KAAKkT,GAAKA,EACVlT,KAAK26D,QAAUA,EACf,MAAMh3B,EAAYg3B,EAAQ3+C,MAAM,KAChChc,KAAKS,KAAOkjC,EAAUA,EAAUroC,OAAS,GACzC0E,KAAKmsB,SAAW,GAChBnsB,KAAKq7D,OAAe,OAANA,QAAM,IAANA,KAGhB,cAAcj9D,GACZ,OAAO7C,OAAOiE,OAAO,GAAIpB,EAAQ,CAC/B+tB,SAAU/tB,EAAO+tB,SAASloB,IAAImoB,GAASwuC,GAAeM,OAAO9uC,OCxEnE,MAAMkvC,GAAe,IAAIh6D,IAAI,CAAC,OAAQ,OAAQ,QAAS,aAAc,aAAc,SAAU,iBAGvFkV,GAAQA,KAAA,CACZysC,UAAW,UACX93B,eAAgB,GAChBrN,gBAAiB,GACjBotC,kBAAmB,IAAIt0C,IACvB2kD,uBAAwB,KAExBC,mBAAoB,EACpBh7C,yBAA0B,EAC1Bi7C,oBAAqB,EACrBC,mBAAoB,EACpBC,uBAAwB,EACxBC,qBAAsB,EACtBC,YAAa,EAEbC,YAAa,KACbn0D,QAAS,EACTC,QAAS,EAETm0D,WAAYxB,KAEZ1tC,cAAe,KAIX4/B,GAAU,CACduP,WAAYxlD,GAA8B,MAArBA,EAAMslD,aAIvBnP,GAAU,GAIVO,GAAY,CAChB+O,gBAAgBzlD,EAAOuV,GACrBvV,EAAMysC,UAAYl3B,EAAYk3B,UAC9BzsC,EAAM2U,eAAiBY,EAAY6uB,SACnCpkC,EAAM00C,kBAAoB,IAAIt0C,IAC9BJ,EAAMsH,gBAAkB,GAGxBtH,EAAM2U,eAAelrB,QAAQU,IAC3BA,EAAOgjC,UAAYhjC,EAAOwoD,MAAMntC,MAAM,KAAKkgD,YAI7C1lD,EAAM2U,eAAelrB,QAAQU,IAE3B,IAAIzD,EAAOyD,EAAOgjC,UAAUhnB,KAAKw/C,GAAOA,EAAItlC,MAASl2B,EAAOF,KAAT,UACnD,GAAIvD,EAAM,CACR,MAAMmyB,EAAQnyB,EAAK25B,MAAM,cACnB2iC,EAAKnqC,EAAM,GACjBnyB,EAAOyD,EAAOF,KAAO,KAAO+4D,OAE5Bt8D,EAAOyD,EAAOF,KAEhBE,EAAOzD,KAAOA,IAEhB,MAAMk/D,EAAW,IAAIxlD,IACrBJ,EAAM2U,eAAelrB,QAAQU,IAAU,IAAA07D,EACrCD,EAASn7D,IAAIN,EAAOzD,MAAgC,QAA1Bm/D,EAACD,EAAS7+D,IAAIoD,EAAOzD,aAAK,IAAAm/D,IAAI,GAAK,KAE/DD,EAASn8D,QAAQ,CAACtC,EAAOM,KACnBN,EAAQ,GACV6Y,EAAM2U,eACD9mB,OAAO1D,GAAUA,EAAOzD,OAASe,GACjCgC,QAAQ,CAACU,EAAQvF,IAAMuF,EAAOzD,KAAQ,GAAEe,MAAQ7C,OAKzDob,EAAM2U,eAAelrB,QAAQU,IAC3B,MAAM27D,EAAY37D,EAAOgjC,UAAUhnB,KAAKw/C,GAAOb,GAAahsC,IAAI6sC,IAChEx7D,EAAO27D,UAAqB,OAATA,QAAS,IAATA,IAAa,OAGlC9lD,EAAM2U,eAAelrB,QAAQU,IAC3BA,EAAO6K,YAAa,IAGtBgL,EAAM2U,eAAelrB,QAAQU,IAC3B,GAAoB,OAAhBA,EAAO7F,KAAX,CAGA,IAAIyhE,EAAW57D,EAAO7F,KAClByhE,EAAS39D,aAAewE,QAC1Bm5D,EAAW,IAAIn5D,MAAMm5D,IAEvBA,EAAWA,EAASt4D,IAAIrG,GAAK84B,KAAKjL,UAAU7tB,GAAGoqB,eAC/CrnB,EAAO67D,gBAAkBhmD,EAAM2U,eAAe9mB,OAAOzG,IACnD,GAAIA,EAAEsV,IAAMvS,EAAOuS,IAAiB,OAAXtV,EAAE9C,KACzB,OAAO,EAET,IAAIA,EAAO8C,EAAE9C,KAKb,OAJIA,EAAK8D,aAAewE,QACtBtI,EAAO,IAAIsI,MAAMtI,IAEnBA,EAAOA,EAAKmJ,IAAIrG,GAAK84B,KAAKjL,UAAU7tB,GAAGoqB,eAChCltB,EAAKyI,MAAMtG,GAAGs/D,EAASlqD,SAASpV,KAAOnC,EAAKQ,OAAS,OAIhEkb,EAAM2U,eAAelrB,QAAQU,IAC3B,IAAI87D,EAAU,KACK,MAAf97D,EAAOqpC,KACTyyB,EAAU97D,EAAOqpC,KAAKhiB,cAAcQ,OACZ,MAAf7nB,EAAO7F,OACZ6F,EAAOF,KAAK4R,SAAS,WAAa1R,EAAOF,KAAK4R,SAAS,kBAC9B,kBAAhB1R,EAAO7F,WAAyCqE,GAApBwB,EAAO7F,KAAKoC,KACjDu/D,EAAU97D,EAAO7F,KAAKoC,KAAK8qB,cAAcQ,QACT,kBAAhB7nB,EAAO7F,MAAqB6F,EAAO7F,gBAAgB4hE,UACnED,EAAU97D,EAAO7F,KAAKktB,cAAcQ,SAI1C7nB,EAAO87D,QAAUA,IAGnBjmD,EAAM2U,eAAelrB,QAAQU,IAC3B,GAAuB,OAAnBA,EAAO87D,cAAuCt9D,IAAnBwB,EAAO87D,QAAtC,CAGKjmD,EAAM00C,kBAAkB57B,IAAI3uB,EAAO87D,UACtCjmD,EAAM00C,kBAAkBjqD,IAAIN,EAAO87D,QAAS,IAAIn7D,KAElD,IAAI4nD,EAAM1yC,EAAM00C,kBAAkB3tD,IAAIoD,EAAO87D,SAC7CvT,EAAIx0B,IAAI/zB,EAAOuS,IACe,MAA1BvS,EAAO67D,iBACT77D,EAAO67D,gBAAgBv8D,QAAQrC,GAAKsrD,EAAIx0B,IAAI92B,EAAEsV,KAEhDsD,EAAM00C,kBAAkBjqD,IAAIN,EAAO87D,QAASvT,MAG9ClpD,KAAKmR,OAAO,mCACZnR,KAAKmR,OAAO,oCAEdwrD,gBAAgBnmD,GAAO,QAAC2H,EAAO,QAAEs+C,EAAO,WAAEG,IACxCpmD,EAAM00C,kBAAkBjqD,IAAIw7D,EAAS,IAAIn7D,IAAI6c,IAC7Cne,KAAKmR,OAAO,8BACRyrD,GACF58D,KAAKmR,OAAO,gCAAiCsrD,IAEjDI,yBAAyBrmD,GACvBA,EAAMglD,oBAAsB,GAE9BsB,sBAAsBtmD,EAAOsH,GAC3BtH,EAAMsH,gBAAkBA,GAE1Bi/C,0BAA0BvmD,EAAOwmD,GAC/B,MAAMC,EAAQ,IAAI37D,IAAI07D,GACtBxmD,EAAMsH,gBAAkBtH,EAAM2U,eAAe9mB,OAAOzG,GAAKq/D,EAAM3tC,IAAI1xB,EAAEsV,MAEvEgqD,4BAA4B1mD,EAAOoB,GACjC,GAA8B,kBAAnBA,EAAQjX,OAAqB,CACtC,MAAMs8D,EAAQ,IAAI37D,IAAIsW,EAAQjX,OAAOinB,QAAQ,QAAQ,IAAI5L,MAAM,WAC/DxF,EAAMsH,gBAAkBtH,EAAM2U,eAAe9mB,OAAOzG,GAAKq/D,EAAM3tC,IAAI1xB,EAAEsV,UAElE,GAAI9P,MAAMC,QAAQuU,EAAQjX,QAAS,CACtC,MAAMs8D,EAAQ,IAAI37D,IAAIsW,EAAQjX,QAC9B6V,EAAMsH,gBAAkBtH,EAAM2U,eAAe9mB,OAAOzG,GAAKq/D,EAAM3tC,IAAI1xB,EAAEsV,OAGzEiqD,oBAAoB3mD,EAAOqW,GACzBrW,EAAMqW,cAAgBA,GAExBuwC,yBAAyB5mD,GACvBA,EAAMgK,0BAA4B,GAEpC68C,oBAAoB7mD,GAClBA,EAAMilD,qBAAuB,GAE/B6B,uBAAuB9mD,EAAOimD,GAC5BjmD,EAAM+kD,uBAAyBkB,GAEjCc,sBAAsB/mD,GACpBA,EAAM+kD,uBAAyB,MAEjCiC,6BAA6BhnD,GAC3BA,EAAMmlD,wBAA0B,GAElC8B,2BAA2BjnD,GACzBA,EAAMolD,sBAAwB,GAEhC8B,kBAAkBlnD,EAAOrN,GACvBqN,EAAMslD,YAAc3yD,GAEtBw0D,qBAAqBnnD,GAAO,EAACjP,EAAC,EAAEC,IAC9BgP,EAAM7O,QAAUJ,EAChBiP,EAAM5O,QAAUJ,GAElBo2D,cAAcpnD,GAAO,aAACqnD,EAAY,WAAEC,IAClC,MAAMb,EAAQ,IAAI37D,IAAIu8D,GAChB1/C,EAAU3H,EAAM2U,eAAe9mB,OAAO1D,GAAUs8D,EAAM3tC,IAAI3uB,EAAOuS,KACjEs1C,EAAUxoD,KAAKwW,MAAM6K,OAAOsE,MAAM6iC,QACxCrqC,EAAQle,QAAQU,IACdA,EAAOwoD,MAAQX,EAAU,IAAMsV,EAAW1C,YAC1Cz6D,EAAOgjC,UAAYm6B,EAAW1C,YAAYp/C,MAAM,KAAKkgD,UACrDv7D,EAAOF,KAAOq9D,EAAWr9D,KAEzB,MAAM67D,EAAY37D,EAAOgjC,UAAUhnB,KAAKw/C,GAAOb,GAAahsC,IAAI6sC,IAChEx7D,EAAO27D,UAAqB,OAATA,QAAS,IAATA,IAAa,OAGlC9lD,EAAM2U,eAAiB,IAAI3U,EAAM2U,gBACjCnrB,KAAKmR,OAAO,oCAEd4sD,eAAevnD,GAAO,aAACqnD,EAAY,YAAEG,IACnC,MAAMf,EAAQ,IAAI37D,IAAIu8D,GACtBrnD,EAAM2U,eAAelrB,QAAQ,CAACU,EAAQ8U,KAChCwnD,EAAM3tC,IAAI3uB,EAAOuS,MACnBvS,EAAO27D,UAAY0B,EACnBxnD,EAAM2U,eAAe1V,GAAS9U,KAGlC6V,EAAM2U,eAAiB,IAAI3U,EAAM2U,iBAEnC8yC,iBAAiBznD,GAAO,WAAC0nD,EAAU,WAAEC,IACnC,MAAMC,EAAY,IAAI98D,IAAI48D,GACpBG,EAAY,IAAI/8D,IAAI68D,GAC1B,IAAK,IAAI/iE,EAAI,EAAGA,EAAIob,EAAM2U,eAAe7vB,OAAQF,IAAK,CACpD,MAAMwC,EAAI4Y,EAAM2U,eAAe/vB,GAC3BgjE,EAAU9uC,IAAI1xB,EAAEsV,KAClBtV,EAAE4N,YAAa,EACfgL,EAAM2U,eAAe/vB,GAAKwC,GACjBygE,EAAU/uC,IAAI1xB,EAAEsV,MACzBtV,EAAE4N,YAAa,EACfgL,EAAM2U,eAAe/vB,GAAKwC,GAG9BoC,KAAKmR,OAAO,uCAID,QACb2mD,YAAY,EACZthD,MAAK,GACLi2C,QAAO,GACPE,QAAO,GACPO,UAASA,IClPJ,MAAMoR,GAeX1/D,cAAcC,gBAAA,kBAAAA,gBAAA,oBAAAA,gBAAA,uBAAAA,gBAAA,sBAAAA,gBAAA,wBAAAA,gBAAA,0BAAAA,gBAAA,2BAAAA,gBAAA,uBAAAA,gBAAA,6BACZmB,KAAKkT,GAAKnR,iBACV/B,KAAKmwD,KAAO,CACVC,OAAQ,GACRj5B,UAAW,GACX11B,UAAW,KACX4uD,OAAQ,OCZd,MAAM75C,GAAQA,KAAA,CACZ+nD,eAAe,EAEf3Q,OAAQ,GACR4Q,cAAe,KACfC,aAAc,IACdC,YAAa,IAEbC,iBAAkB,EAElBpoD,QAAS,KAETsV,cAAe,KACf5J,SAAU,KACV/V,SAAS,EAETsW,UAAU,EACV3X,SAAU,GACV4X,QAAS,KACTF,YAAY,IAIRkqC,GAAU,GAIVE,GAAU,CACd,eAAc,OAACx7C,EAAM,SAAEiS,UACfA,EAAS,kBACfjS,EAAO,uBACPA,EAAO,mBAETytD,gBAAe,MAACpoD,EAAK,OAAErF,IACjBqF,EAAMo3C,OAAOrT,KAAK79C,IAAMA,EAAEmO,YAC5BtI,QAAQC,KAAK,2BACb2O,EAAO,cAAe,KAExB,MAAM0tD,EAAgBroD,EAAMo3C,OACvB3pD,IAAI0hB,GAASA,EAAMkrC,UACnB5sD,IAAImiD,GAAWkC,GAAWnC,cAAcC,IAEvC2S,EAAc8F,EAAc56D,IAAI4iD,GAAQyB,GAAW1B,kBAAkBC,IAC3E,OAAOC,QAAQqS,IAAIJ,GACdp9C,KAAKmjD,IACJv8D,QAAQyR,IAAI8qD,GAGZA,EAAgB76D,IAAI,CAACgkD,EAAI7sD,KACvB,MAAM6D,EAAWqpD,GAAWpB,qBAAqBe,GACjD92C,EAAO,wBAAyB,CAAC4tD,WAAY3jE,EAAG6D,eAGlD,MAAM+oD,EAAc8W,EAAgB76D,IAAI,IAAM,GACxCqjD,EAAiBgB,GAAWR,YAAYgX,EAAiB9W,GACzD+I,EAAezI,GAAWF,kBAAkBd,GAC5Cz8C,EAAWrM,OAAO+vB,IAAIC,gBAAgBuiC,GAC5C5/C,EAAO,cAAetG,OAM1BqiD,GAAY,CAChB8R,gBAAgBxoD,GACdA,EAAMo3C,OAAS,GACf,MAAMqR,EAAYj/D,KAAKwW,MAAMwY,SAASspC,YAChC3yC,EAAQ,IAAI24C,GACZ79C,EAAYkF,EAAMzS,GAAK+rD,EAAUx+C,UACjC+nC,EAAU7iC,EAAM6iC,QAAUyW,EAAU1gB,MAAM32B,QAAQ,KAAM,IAAIA,QAAQ,OAAQ,IAClFjC,EAAMwqC,KAAO,CACXC,OAAQ,CAAC5H,GACTrxB,UAAW8nC,EAAU9nC,UACrB11B,UAAWw9D,EAAUx9D,UACrB4uD,OAAQ4O,EAAU5O,QAGpB1qC,EAAMG,OAAS9lB,KAAKwW,MAAMwY,SAASupC,UAAUh7D,IAAIkjB,GACjDkF,EAAMkrC,SAAW7wD,KAAKwW,MAAMwY,SAASwpC,YAAYj7D,IAAIkjB,GACrDkF,EAAMrC,WAAatjB,KAAKwW,MAAMwY,SAASypC,cAAcl7D,IAAIkjB,GACzDkF,EAAMoG,YAAc/rB,KAAKwW,MAAMwY,SAAS0pC,eAAen7D,IAAIkjB,GAC3DkF,EAAM2pC,QAAUtvD,KAAKwW,MAAMwY,SAAS4pC,WAAWr7D,IAAIkjB,GAEnDle,QAAQyR,IAAI2R,GAEZnP,EAAMo3C,OAAOhyD,KAAK+pB,GAClBnP,EAAMgoD,cAAgBhoD,EAAMo3C,OAAO,GAEnCp3C,EAAM+nD,eAAgB,EACtBv+D,KAAKmR,OAAO,mCAEd+tD,oBAAoB1oD,EAAOmP,GACzBnP,EAAMgoD,cAAgB74C,GAGxBw5C,SAAS3oD,GAAO,OAAC45C,IACf,MAAMgP,EAAW,IAAId,GACrB9nD,EAAMo3C,OAAOhyD,KAAKwjE,GAEdhP,IACFgP,EAASjP,KAAKC,OAASA,IAI3BrC,kBAAkBv3C,EAAOD,GACvBC,EAAMD,QAAUA,GAGlB8oD,eAAe7oD,GAEbynC,GAASJ,mBACTrnC,EAAMo3C,OAAO3pD,IAAIvH,GAAKA,EAAEyzD,KAAKh5B,WAAWl3B,QAAQk3B,IACzCA,GAGL8mB,GAASnjB,qBAAqB3D,KAG5B3gB,EAAMyL,WACRzL,EAAMyL,SAASrgB,OACf4U,EAAMyL,SAAStgB,QACf6U,EAAMyL,SAAW,MAGnB,IACEzL,EAAMyL,SAAWg8B,GAAS35C,OAAOkS,EAAMD,QAASC,EAAMqV,cAAe,IAErE,MAAMyzC,EAAiB,WACrB9oD,EAAMtK,SAAU,EAChBsK,EAAMyL,SAAS8B,SAEjBvN,EAAMyL,SAASs9C,cAAc,aAAcD,GAI3C,MAAO/6C,GACPi7C,MAAMj7C,GACNhiB,QAAQiiB,MAAMD,GACdyoC,2BAAa,CAAC17C,MAAQ,iBACpB0Z,QAASzG,EAAUyG,QAASvqB,KAAM,cAIxCg/D,oBAAoBjpD,GAClB,MAAMkpD,EAAe,IAAIlpD,EAAMD,QAAQ6P,iBAAiB,iBAAiB81C,UACnEl8C,EAAS,GAEfxJ,EAAMo3C,OAAO3tD,QAAQ,CAAC0lB,EAAOo5C,KAC3B,MAAMY,EAAmBD,EAAaX,GAAY7rD,GAQlD,IAAIzR,EANJue,EAAOpkB,KAAK,CACV+E,OAAS,gBAAeo+D,EACxB3uD,IAAK,WACLtR,OAAQ,CAACG,SAAU,GAAKD,OAAuB,IAAf+/D,EAAmB,GAAK,MAKxDt9D,EADgD,IAA9CkkB,EAAMwqC,KAAK1uD,UAAUie,SAASK,KAAKzkB,OACzB+6B,GAAS1Q,EAAMwqC,KAAK1uD,WAEpB,CACV2O,IAAK,QACLtR,OAAQ,CAACG,SAAU,IAGvBwC,EAAUd,OAAS,IAAMglB,EAAM6iC,QAC/B,MAAMoX,EAAU,CACdlgD,SAAU,CACRK,KAAM,CACJte,EACA,CACE2O,IAAK,QACLtR,OAAQ,CAACG,SAAU0mB,EAAMb,mBAKjC9E,EAAOpkB,KAAKgkE,GAEZ5/C,EAAOpkB,KAAK,CACV+E,OAAS,IAAGg/D,EACZvvD,IAAK,WACLtR,OAAQ,CAACG,SAAU,GAAKD,OAAQ,OAIpCwX,EAAMqV,cAAgB,CACpBnM,SAAU,CAACM,YAIf6/C,uBAAuBrpD,GACrBA,EAAMmoD,kBAAoB,GAI5BvQ,kBAAkB53C,EAAOiM,GACvBjM,EAAMiM,QAAUA,GAElBw0C,YAAYzgD,EAAO3L,GACjB2L,EAAM3L,SAAWA,EACb2L,EAAM0gD,kBACR1gD,EAAMiM,QAAQ00C,oBAAoB,iBAAkB3gD,EAAM0gD,mBAAmB,GAE7E1gD,EAAM0gD,kBAAoB,WACxB1gD,EAAM+L,YAAa,GAGvB/L,EAAM+L,YAAa,EACnB/L,EAAMiM,QAAQ20C,iBAAiB,iBAAkB5gD,EAAM0gD,mBAAmB,IAE5EI,eAAe9gD,EAAOgM,GACpBhM,EAAMgM,SAAWA,GAEnBg1C,iBAAiBhhD,EAAOihD,GACtBjhD,EAAM+L,WAAak1C,GAErBqI,sBAAsBtpD,GAAO,WAACuoD,EAAU,SAAE9/D,IACxCuX,EAAMo3C,OAAOmR,GAAYj6C,cAAgB7lB,GAI3C8gE,cAAcvpD,GACZA,EAAMtK,SAAU,EAChBsK,EAAMyL,SAAS+B,SAEXxN,EAAM+L,YAAc/L,EAAMgM,UAC5BhM,EAAMiM,QAAQwB,QAGlB+7C,eAAexpD,GACbA,EAAMtK,SAAU,EAChBsK,EAAMyL,SAAS8B,QAEXvN,EAAM+L,YAAc/L,EAAMgM,UAC5BhM,EAAMiM,QAAQsB,SAGlBk8C,iBAAiBzpD,GACfA,EAAMtK,SAAU,EAChBsK,EAAMyL,SAASsB,UAEX/M,EAAM+L,YAAc/L,EAAMgM,WAC5BhM,EAAMiM,QAAQsB,QACdvN,EAAMiM,QAAQC,YAAc,EAC5BlM,EAAMiM,QAAQwB,UAKL,QACb6zC,YAAY,EACZthD,MAAK,GACLi2C,QAAO,GACPE,QAAO,GACPO,UAASA,ICnQXgT,aAAI9vD,IAAI+vD,QAIO,WAAIA,OAAKC,MAAM,CAC5BvkE,QAAS,CACPwlB,UAAQ2N,YAAUruB,UAAQ6sB,YAG5B6yC,QAAQ,I,iDCHH,MAAMC,GAAW,IAAIJ,aAE5BA,aAAIK,OAAOC,eAAgB,EAE3BN,aAAI9vD,IAAI2zC,QACRmc,aAAI9vD,IAAIqwD,KAAW,CAACC,cACpBR,aAAI9vD,IAAIuwD,MAERT,aAAI1kE,UAAUolE,QAAUC,aAExB,IAAIX,aAAI,CACN57D,OAAQ4E,GAAKA,EAAE43D,GACfC,UACAC,WACCC,OAAO,S,ofC3BK,SAASC,gBAAgBC,EAAUC,GAChD,KAAMD,aAAoBC,GACxB,MAAM,IAAIC,UAAU,qCCFxB,SAASC,kBAAkB3gE,EAAQ6P,GACjC,IAAK,IAAIpV,EAAI,EAAGA,EAAIoV,EAAMlV,OAAQF,IAAK,CACrC,IAAImmE,EAAa/wD,EAAMpV,GACvBmmE,EAAWjkE,WAAaikE,EAAWjkE,aAAc,EACjDikE,EAAWC,cAAe,EACtB,UAAWD,IAAYA,EAAWE,UAAW,GACjDlmE,OAAO8B,eAAesD,EAAQ4gE,EAAWtjE,IAAKsjE,IAGnC,SAASG,aAAaN,EAAaO,EAAYC,GAM5D,OALID,GAAYL,kBAAkBF,EAAY5lE,UAAWmmE,GACrDC,GAAaN,kBAAkBF,EAAaQ,GAChDrmE,OAAO8B,eAAe+jE,EAAa,YAAa,CAC9CK,UAAU,IAELL,ECNT,IAAaS,YAAW,WAwBtB,SAAAA,EAAoBC,EAAsBC,EAA2Bh2C,GAAiCm1C,gBAAA,KAAAW,GAhB9F,KAASG,UAAuB,KAChC,KAAQC,SAA4D,KACpE,KAAUC,WAAY,KAe5BliE,KAAK8hE,QAAUA,EACf9hE,KAAKmiE,YAAcJ,EACnB/hE,KAAKoiE,aAAer2C,EALrB,OAMA21C,aAAAG,EAAA,EAAA5jE,IAAA,cAAAN,MAED,SAAY0kE,GAEV,OADAriE,KAAKsiE,UAAYD,EACVriE,OACR,CAAA/B,IAAA,iBAAAN,MAED,SAAeonD,GAEb,OADA/kD,KAAKuiE,aAAexd,EACb/kD,OACR,CAAA/B,IAAA,kBAAAV,IAED,WACE,OAAOyC,KAAK8hE,QAAQU,kBACrB,CAAAvkE,IAAA,cAAAV,IAED,WACE,GAAyB,OAArByC,KAAKmiE,YACP,MAAM,IAAI/N,MAAM,6CAElB,OAAOp0D,KAAKoiE,eACb,CAAAnkE,IAAA,SAAAV,IAED,WACE,GAAyB,OAArByC,KAAKmiE,YACP,MAAM,IAAI/N,MAAM,kDAElB,OAAOp0D,KAAKmiE,cACb,CAAAlkE,IAAA,WAAAV,IAED,WACE,GAAyB,OAArByC,KAAKmiE,YACP,MAAM,IAAI/N,MAAM,yDAKlB,OAHuB,OAAnBp0D,KAAKgiE,YACPhiE,KAAKgiE,UAAYhiE,KAAKsiE,UAAU1+D,QAAQ5D,KAAKmiE,cAExCniE,KAAKgiE,YACb,CAAA/jE,IAAA,UAAAV,IAED,WAIE,OAHsB,OAAlByC,KAAKiiE,WACPjiE,KAAKiiE,SAAWjiE,KAAKuiE,aAAaE,KAAKziE,KAAK0iE,WAEvC1iE,KAAKiiE,WACb,CAAAhkE,IAAA,YAAAV,IAED,WAIE,OAHwB,OAApByC,KAAKkiE,aACPliE,KAAKkiE,WAAaliE,KAAKuiE,aAAajoC,SAASt6B,KAAK2iE,UAE7C3iE,KAAKkiE,cACb,EAAAjkE,IAAA,YAAAN,MAhED,SAAiBmkE,GACf,OAAO,IAAID,EAA8BC,EAAS,KAAM,QACzD,CAAA7jE,IAAA,YAAAN,MAED,SAAmCmkE,EAAsBC,EAA2Bh2C,GAClF,OAAO,IAAI81C,EAA8BC,EAASC,EAAOh2C,OAC1D81C,EAtBqB,GCTT,SAASe,gBAAgBxlE,EAAGkB,GAKzC,OAJAskE,gBAAkBrnE,OAAOsnE,eAAiBtnE,OAAOsnE,eAAe3kE,OAAS,SAAyBd,EAAGkB,GAEnG,OADAlB,EAAE0lE,UAAYxkE,EACPlB,GAEFwlE,gBAAgBxlE,EAAGkB,GCJb,SAASykE,UAAUC,EAAUC,GAC1C,GAA0B,oBAAfA,GAA4C,OAAfA,EACtC,MAAM,IAAI5B,UAAU,sDAEtB2B,EAASxnE,UAAYD,OAAOyC,OAAOilE,GAAcA,EAAWznE,UAAW,CACrEoD,YAAa,CACXjB,MAAOqlE,EACPvB,UAAU,EACVD,cAAc,KAGlBjmE,OAAO8B,eAAe2lE,EAAU,YAAa,CAC3CvB,UAAU,IAERwB,GAAYL,gBAAeI,EAAUC,GCf5B,SAASC,QAAQhhE,GAG9B,OAAOghE,QAAU,mBAAqBzlE,QAAU,iBAAmBA,OAAO0lE,SAAW,SAAUjhE,GAC7F,cAAcA,GACZ,SAAUA,GACZ,OAAOA,GAAO,mBAAqBzE,QAAUyE,EAAItD,cAAgBnB,QAAUyE,IAAQzE,OAAOjC,UAAY,gBAAkB0G,GACvHghE,QAAQhhE,GCPE,SAASkhE,uBAAuBC,GAC7C,QAAa,IAATA,EACF,MAAM,IAAIC,eAAe,6DAE3B,OAAOD,ECFM,SAASE,2BAA2BF,EAAM3nE,GACvD,GAAIA,IAA2B,WAAlBwnE,QAAQxnE,IAAsC,oBAATA,GAChD,OAAOA,EACF,QAAa,IAATA,EACT,MAAM,IAAI2lE,UAAU,4DAEtB,OAAO+B,uBAAsBC,GCRhB,SAASG,gBAAgBpmE,GAItC,OAHAomE,gBAAkBjoE,OAAOsnE,eAAiBtnE,OAAOkoE,eAAevlE,OAAS,SAAyBd,GAChG,OAAOA,EAAE0lE,WAAavnE,OAAOkoE,eAAermE,IAEvComE,gBAAgBpmE,GCDzB,IAAasmE,QAAO,WAOlB,SAAoBA,EAAAxmE,EAAc05B,GAAesqC,gBAAA,KAAAwC,GAHzC,KAAAC,SAAiC,IAAI/sD,IACrC,KAAAgtD,cAAsC,IAAIhtD,IAGhD5W,KAAK6jE,YAAc3mE,EACnB8C,KAAK42B,OAASA,EASf,OARA8qC,aAAAgC,EAAA,EAAAzlE,IAAA,YAAAN,MAUD,WACE,OAAuB,OAAhBqC,KAAK42B,SACb,CAAA34B,IAAA,gBAAAN,MAED,SAAkCmmE,GAEhC,OADA9jE,KAAK2jE,SAAS1iE,IAAI6iE,EAAM5mE,KAAM4mE,GACvB9jE,OACR,CAAA/B,IAAA,kBAAAN,MAED,SAAgBT,GACd,OAAO8C,KAAK2jE,SAAe,UAACzmE,KAC7B,CAAAe,IAAA,gBAAAN,MAED,WACE,OAAOyF,MAAMmZ,KAAKvc,KAAK2jE,SAAS1oC,YACjC,CAAAh9B,IAAA,aAAAN,MAED,SAA+BomE,G,MAC7B,OAA0C,QAAnCC,EAAAhkE,KAAK2jE,SAASpmE,IAAIwmE,UAAiB,IAAAC,IAAA,OAC3C,CAAA/lE,IAAA,gBAAAN,MAED,SAAcsmE,GACZjkE,KAAK4jE,cAAc3iE,IAAIgjE,EAAIJ,YAAaI,KACzC,CAAAhmE,IAAA,mBAAAN,MAED,WACE,OAAOyF,MAAMmZ,KAAKvc,KAAK4jE,cAAc3oC,YACtC,CAAAh9B,IAAA,kBAAAN,MAED,SAAgBumE,G,MACd,OAA0C,QAAnCF,EAAAhkE,KAAK4jE,cAAcrmE,IAAI2mE,UAAY,IAAAF,IAAA,QAC3C,EAAA/lE,IAAA,gBAAAN,MAvCD,SAAqBT,EAAc05B,GACjC,OAAO,IAAI8sC,EAAQxmE,EAAM05B,KAC1B,CAAA34B,IAAA,uBAAAN,MAED,WACE,OAAO,IAAI+lE,EAAQ,GAAI,UACxBA,EAlBiB,G,+RCFpB,IAAIS,aAA8B,iBAAVC,gBAAsBA,gBAAUA,eAAO7oE,SAAWA,QAAU6oE,eAEpFC,YAAiBF,aCHbG,WAAaD,YAGbE,SAA0B,iBAARlB,MAAoBA,MAAQA,KAAK9nE,SAAWA,QAAU8nE,KAGxEmB,OAAOF,YAAcC,UAAYE,SAAS,cAATA,GAErCC,MAAiBF,OCRbG,OAAOD,MAGPE,SAASD,OAAKlnE,OAElBonE,UAAiBD,SCLbE,SAASD,UAGTE,cAAcxpE,OAAOC,UAGrBwpE,iBAAiBD,cAAYtpE,eAO7BwpE,uBAAuBF,cAAYG,SAGnCC,iBAAiBL,SAASA,SAAOpnE,iBAAcyB,EASnD,SAASimE,YAAUznE,GACjB,IAAI0nE,EAAQL,iBAAetpE,KAAKiC,EAAOwnE,kBACnC9b,EAAM1rD,EAAMwnE,kBAEhB,IACExnE,EAAMwnE,uBAAkBhmE,EACxB,IAAImmE,GAAW,EACf,MAAO7+D,IAET,IAAItK,EAAS8oE,uBAAqBvpE,KAAKiC,GAQvC,OAPI2nE,IACED,EACF1nE,EAAMwnE,kBAAkB9b,SAEjB1rD,EAAMwnE,mBAGVhpE,EAGT,IAAAopE,WAAiBH,YC5CbI,cAAcjqE,OAAOC,UAOrBiqE,qBAAuBD,cAAYN,SASvC,SAASQ,iBAAe/nE,GACtB,OAAO8nE,qBAAqB/pE,KAAKiC,GAGnC,IAAAgoE,gBAAiBD,iBCrBbE,SAASf,UACTgB,UAAYN,WACZO,eAAiBH,gBAGjBI,QAAU,gBACVC,aAAe,qBAGfC,eAAiBL,SAASA,SAAOloE,iBAAcyB,EASnD,SAAS+mE,aAAWvoE,GAClB,OAAa,MAATA,OACewB,IAAVxB,EAAsBqoE,aAAeD,QAEtCE,gBAAkBA,kBAAkB1qE,OAAOoC,GAC/CkoE,UAAUloE,GACVmoE,eAAenoE,GAGrB,IAAAwoE,YAAiBD,aCJbE,UAAUhjE,MAAMC,QAEpBgjE,UAAiBD,U,6CCDjB,SAASE,eAAa3oE,GACpB,OAAgB,MAATA,GAAiC,iBAATA,EAGjC,IAAA4oE,eAAiBD,eC5BbE,aAAaL,YACbM,UAAUJ,UACVK,eAAeH,eAGfI,YAAY,kBAmBhB,SAASC,SAASjpE,GAChB,MAAuB,iBAATA,IACV8oE,UAAQ9oE,IAAU+oE,eAAa/oE,IAAU6oE,aAAW7oE,IAAUgpE,YAGpE,IAAAE,WAAiBD,S,2sCCzBjB,IAAaE,aAAY,WAAzB,SAAAA,IAAA5F,gBAAA,KAAA4F,GACW,KAAAC,YAAuBrD,QAAQsD,uBAChC,KAAUC,WAAG,EAqKpB,OACFvF,aAAAoF,EAAA,EAAA7oE,IAAA,YAAAV,IApKC,WACE,OAAOyC,KAAKinE,aACb,CAAAhpE,IAAA,gBAAAN,MAEO,SAAckmE,GACpB,IAE0BqD,EAFpBC,EAAUC,WAASvD,GAAeiD,EAAaO,UAAUxD,GAAeA,EAC1EyD,EAAStnE,KAAK+mE,YAAWQ,EAAAC,6BACVL,GAAO,IAA1B,IAA4BI,EAAA7qE,MAAAwqE,EAAAK,EAAAppE,KAAAspE,MAAA,KAAjBvqE,EAAIgqE,EAAAvpE,MACT+pE,EAASJ,EAAOK,gBAAgBzqE,GACrB,OAAXwqE,IACFA,EAAShE,QAAQkE,cAAc1qE,EAAMoqE,GACrCA,EAAOO,cAAcH,IAEvBJ,EAASI,GACV,MAAAzhB,GAAAshB,EAAA9gE,EAAAw/C,GAAA,QAAAshB,EAAAO,IACD,OAAOR,IACR,CAAArpE,IAAA,eAAAN,MAEO,SAAakmE,GAGnB,IAFA,IAAMsD,EAAUC,WAASvD,GAAeiD,EAAaO,UAAUxD,GAAeA,EAC1EyD,EAAStnE,KAAK+mE,YACT3rE,EAAI,EAAGA,EAAI+rE,EAAQ7rE,SAAUF,EAAG,CACvC,IAAMssE,EAASJ,EAAOK,gBAAgBR,EAAQ/rE,IAC9C,GAAe,OAAXssE,EACF,OAAO,KAETJ,EAASI,EAEX,OAAOJ,IACR,CAAArpE,IAAA,gBAAAN,MAED,SAAcmmE,GACZ,IAAMiE,EAAYjE,EAAM5mE,KAClB2mE,EAAcC,EAAMD,YAEtBI,EAAMjkE,KAAKgoE,aAAanE,GAC5B,GAAY,OAARI,EACFA,EAAMjkE,KAAK4nE,cAAc/D,QAGzB,GAAkC,OAA9BI,EAAIgE,WAAWF,GACjB,MAAM,IAAI3T,MAAM,SAADp0C,OAAU8jD,EAAMoE,SAAwC,kCAG3EjE,EAAIkE,cAAcrE,GAClB9jE,KAAKinE,YAAc,IACpB,CAAAhpE,IAAA,wBAAAN,MAED,SAAsBmmE,GACpB,IAAMiE,EAAYjE,EAAM5mE,KAClB2mE,EAAcC,EAAMD,YAEtBI,EAAMjkE,KAAKgoE,aAAanE,GAChB,OAARI,IACFA,EAAMjkE,KAAK4nE,cAAc/D,IAEO,OAA9BI,EAAIgE,WAAWF,GAEjB/nE,KAAKinE,YAAc,EAEnBhD,EAAImE,gBAAgBL,GAEtB9D,EAAIkE,cAAcrE,KACnB,CAAA7lE,IAAA,kBAAAN,MAED,SAAgBuqE,GACd,IAAMpE,EAAQ9jE,KAAKqoE,qBAAqBH,GACxC,GAAc,OAAVpE,EACF,MAAM,IAAI1P,MAAe,SAAAp0C,OAAAkoD,EAA0B,oBAErD,IAAMjE,EAAMjkE,KAAKgoE,aAAalE,EAAMD,aAC9ByE,EAAUrE,EAAImE,gBAAgBtE,EAAM5mE,MAI1C,OAHIorE,IACFtoE,KAAKinE,YAAc,GAEdqB,IACR,CAAArqE,IAAA,uBAAAN,MAED,SAAqBuqE,GACnB,IAAMf,EAAUC,WAASc,GAAYpB,EAAaO,UAAUa,GAAYA,EACxE,GAAuB,IAAnBf,EAAQ7rE,OACV,MAAM,IAAI84D,MAAiC,2BAAAp0C,OAAAkoD,EAAY,MAEzD,IAAMnE,EAAUoD,EAAQoB,MAClBtE,EAAMjkE,KAAKgoE,aAAab,GAC9B,OAAOlD,EAAIgE,WAAWlE,KACvB,CAAA9lE,IAAA,yBAAAN,MAED,SAAuBuqE,GACrB,OAA+C,OAAxCloE,KAAKqoE,qBAAqBH,KAClC,CAAAjqE,IAAA,aAAAN,MAED,SAAWoqE,GACT,IAAMZ,EAAUC,WAASW,GAAajB,EAAaO,UAAUU,GAAaA,EAC1E,GAAuB,IAAnBZ,EAAQ7rE,OACV,MAAM,IAAI84D,MAAiC,2BAAAp0C,OAAA+nD,EAAa,MAG1D,IAAMhE,EAAUoD,EAAQoB,MAClBC,EAASrB,EAAQt/C,KAAK,KACtB4gD,EAAazoE,KAAK0oE,UAAU3E,GAC7B1/D,QAAO,SAAArH,GAAC,OAAIA,EAAE6mE,YAAY8E,SAASH,MAExC,GAA0B,IAAtBC,EAAWntE,OACb,OAAOmtE,EAAW,GACb,GAA0B,IAAtBA,EAAWntE,OAAf,CAKL,IAAMstE,EAAwBH,EAAW9rD,MAAK,SAAA3f,GAAC,MAAsB,KAAlBA,EAAE6mE,eACrD,QAA8B1kE,IAA1BypE,EACF,OAAOA,EAEP,MAAM,IAAIxU,MAAM,4BAAAp0C,OACTyoD,EAAWntE,OAA6B,4BAAA0kB,OACxCyoD,EAAWxkE,KAAI,SAAAjH,GAAC,OAAIA,EAAEkrE,YAAUrgD,KAAK,MAAK,UAGtD,CAAA5pB,IAAA,sBAAAN,MAED,SAAoBumE,GAClB,IAAMD,EAAMjkE,KAAKgoE,aAAa9D,GAC9B,GAAY,OAARD,EAGJ,OAAOA,EAAI4E,kBACZ,CAAA5qE,IAAA,gBAAAN,MAED,WACE,IAAMxB,EAAc,GAEpB,OADA6D,KAAK8oE,oBAAoB9oE,KAAK+mE,YAAa5qE,GACpCA,IACR,CAAA8B,IAAA,sBAAAN,MAEO,SAAoBsmE,EAAc3gE,GAAQ,IAAAmC,EAAA,KAChDw+D,EAAI4E,gBAAgB5oE,SAAQ,SAAA3B,GAAC,OAAIgF,EAAI1H,KAAK0C,MAC1C2lE,EAAI8E,mBAAmB9oE,SAAQ,SAAA3B,GAAC,OAAImH,EAAKqjE,oBAAoBxqE,EAAGgF,QACjE,CAAArF,IAAA,YAAAN,MAEO,SAAUoqE,GAChB,IAAMzkE,EAAW,GACX0lE,EAAM,SAANA,EAAO/E,GACX,IAAMH,EAAQG,EAAIgE,WAAWF,GACf,OAAVjE,GACFxgE,EAAI1H,KAAKkoE,GAEXG,EAAI8E,mBAAmB9oE,SAAQ,SAAA3B,GAAC,OAAI0qE,EAAI1qE,OAG1C,OADA0qE,EAAIhpE,KAAK+mE,aACFzjE,KACR,EAAArF,IAAA,YAAAN,MAED,SAAiBgvC,GACf,GAAoB,KAAhBA,EAAKnkB,OACP,MAAO,GAET,IAAM2+C,EAAUx6B,EAAK3wB,MAAM,KAAK/X,KAAI,SAAAvH,GAAC,OAAIA,EAAE8rB,UACrCygD,EAAQ9B,EAAQ5jE,OAAM,SAAA7G,GAAC,OAAIA,EAAEm6B,MAAM,mBACzC,IAAKoyC,EACH,MAAM,IAAI7U,MAAoC,8BAAAp0C,OAAA2sB,EAAQ,MAExD,OAAOw6B,MACRL,EAvKsB,GCAZoC,QAAO,WAGlB,SAAAA,IAAAhI,gBAAA,KAAAgI,GACElpE,KAAKmpE,aAAe,IAAIrC,aAmDzB,OAlDApF,aAAAwH,EAAA,EAAAjrE,IAAA,OAAAV,IAED,WACE,OAAOyC,KAAKmpE,aAAaC,YAC1B,CAAAnrE,IAAA,WAAAN,MAID,SAASmmE,GAAc,IAAAr+D,EAAA,KAMrB,OALIrC,MAAMC,QAAQygE,GAChBA,EAAM7jE,SAAQ,SAAA3B,GAAC,OAAImH,EAAK0jE,aAAahB,cAAc7pE,MAEnD0B,KAAKmpE,aAAahB,cAAcrE,GAE3B9jE,OACR,CAAA/B,IAAA,mBAAAN,MAID,SAAiBmmE,GAAc,IAAAuF,EAAA,KAM7B,OALIjmE,MAAMC,QAAQygE,GAChBA,EAAM7jE,SAAQ,SAAA3B,GAAC,OAAI+qE,EAAKF,aAAaG,sBAAsBhrE,MAE3D0B,KAAKmpE,aAAaG,sBAAsBxF,GAEnC9jE,OACR,CAAA/B,IAAA,aAAAN,MAED,SAAWuqE,GACT,OAAOloE,KAAKmpE,aAAaf,gBAAgBF,KAC1C,CAAAjqE,IAAA,MAAAN,MAMD,SAAIT,GACF,OAAO8C,KAAKmpE,aAAalB,WAAW/qE,KACrC,CAAAe,IAAA,SAAAN,MAED,WACE,OAAOqC,KAAKmpE,aAAaN,kBAC1B,CAAA5qE,IAAA,eAAAN,MAMD,SAAasmE,GACX,OAAOjkE,KAAKmpE,aAAaI,oBAAoBtF,OAC9CiF,EAvDiB,G,qiBCDpB,IAAa1uC,gBAAgB,SAAAgvC,GAAAzG,UAAAvoC,EAAAgvC,GAAA,IAAAC,EAAAC,gBAAAlvC,GAAA,SAAAA,IAAA,OAAA0mC,gBAAA,KAAA1mC,GAAAivC,EAAAxtE,MAAA,KAAAoM,WAAA,OAAAq5D,aAAAlnC,GAAA,CAAQ0uC,S,6CCCzBS,SCJG,SAASC,kBAAgB1nE,EAAKjE,EAAKN,GAWhD,OAVIM,KAAOiE,EACT3G,OAAO8B,eAAe6E,EAAKjE,EAAK,CAC9BN,MAAOA,EACPL,YAAY,EACZkkE,cAAc,EACdC,UAAU,IAGZv/D,EAAIjE,GAAON,EAENuE,ECXM,SAAS2nE,oBAAkBC,EAAKpnC,IAClC,MAAPA,GAAeA,EAAMonC,EAAIxuE,UAAQonC,EAAMonC,EAAIxuE,QAC/C,IAAK,IAAIF,EAAI,EAAG2uE,EAAO,IAAI3mE,MAAMs/B,GAAMtnC,EAAIsnC,EAAKtnC,IAC9C2uE,EAAK3uE,GAAK0uE,EAAI1uE,GAEhB,OAAO2uE,ECJM,SAASC,mBAAmBF,GACzC,GAAI1mE,MAAMC,QAAQymE,GAAM,OAAOD,oBAAiBC,GCFnC,SAASG,iBAAiBC,GACvC,GAAsB,qBAAXzsE,QAAmD,MAAzBysE,EAAKzsE,OAAO0lE,WAA2C,MAAtB+G,EAAK,cAAuB,OAAO9mE,MAAMmZ,KAAK2tD,GCAvG,SAASC,8BAA4B/sE,EAAGgtE,GACrD,GAAKhtE,EAAL,CACA,GAAiB,kBAANA,EAAgB,OAAOysE,oBAAiBzsE,EAAGgtE,GACtD,IAAIjsE,EAAI5C,OAAOC,UAAU0pE,SAASxpE,KAAK0B,GAAGsB,MAAM,GAAI,GAEpD,MADU,WAANP,GAAkBf,EAAEwB,cAAaT,EAAIf,EAAEwB,YAAY1B,MAC7C,QAANiB,GAAqB,QAANA,EAAoBiF,MAAMmZ,KAAKnf,GACxC,cAANe,GAAqB,2CAA2CksE,KAAKlsE,GAAW0rE,oBAAiBzsE,EAAGgtE,QAAxG,GCPa,SAASE,qBACtB,MAAM,IAAIjJ,UAAU,wICGP,SAASkJ,mBAAmBT,GACzC,OAAOE,mBAAkBF,IAAQG,iBAAgBH,IAAQK,8BAA2BL,IAAQQ,qBCaxF,SAAUE,aAAanR,GAC3B,OAAOoR,mBAAmBpR,GAAMxxC,KAAK,MAGvC,SAAS4iD,mBAAmBriD,GAA0C,IAA1BsiD,EAAMriE,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAAG,GAAIsiE,IAAMtiE,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,KAAAA,UAAA,GACvD/E,EAAgB,GAChBsnE,EAAoB,KAAXF,EAETG,EAAgBH,GAAUE,EAAS,GAAMD,EAAS,MAAQ,OAAUviD,EAAK0iD,kBAC/ExnE,EAAI1H,KAAKivE,GAET,IADA,IAAM1+C,EAAW/D,EAAK2iD,gBACb3vE,EAAI,EAAGA,EAAI+wB,EAAS7wB,OAAQF,IAAK,CACxC,IAAMgxB,EAAQD,EAAS/wB,GACjB4vE,EAAc5vE,IAAM+wB,EAAS7wB,OAAS,EAEtC2vE,EAAcP,GAAUE,EAAS,IAAOD,EAAS,MAAQ,OACzDO,EAAaT,mBAAmBr+C,EAAO6+C,EAAaD,GAC1D1nE,EAAI1H,KAAIK,MAARqH,EAAGinE,mBAASW,IAEd,OAAO5nE,GRjCT,SAAYqmE,GACVA,EAAA,iBACAA,EAAA,iBACAA,EAAA,eACAA,EAAA,eACAA,EAAA,kBALF,CAAYA,oBAMX,KASD,IAAawB,OAAM,WAIjB,SAAYA,EAAAC,EAAgCC,GAAcnK,gBAAA,KAAAiK,GACxDnrE,KAAKsrE,QAAUF,EACfprE,KAAKqrE,OAASA,EA+Bf,OA9BA3J,aAAAyJ,EAAA,EAAAltE,IAAA,QAAAN,MAED,WAAmB,QAAA4tE,EAAAljE,UAAA/M,OAAVkf,EAAU,IAAApX,MAAAmoE,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAVhxD,EAAUgxD,GAAAnjE,UAAAmjE,GACjBxrE,KAAKgU,IAAG/X,MAAR+D,KAAI,CAAK2pE,SAAS8B,OAAUzrD,OAAAxF,MAC7B,CAAAvc,IAAA,QAAAN,MAED,WAAmB,QAAA+tE,EAAArjE,UAAA/M,OAAVkf,EAAU,IAAApX,MAAAsoE,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAVnxD,EAAUmxD,GAAAtjE,UAAAsjE,GACjB3rE,KAAKgU,IAAG/X,MAAR+D,KAAI,CAAK2pE,SAASiC,OAAU5rD,OAAAxF,MAC7B,CAAAvc,IAAA,OAAAN,MAED,WAAkB,QAAAkuE,EAAAxjE,UAAA/M,OAAVkf,EAAU,IAAApX,MAAAyoE,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAVtxD,EAAUsxD,GAAAzjE,UAAAyjE,GAChB9rE,KAAKgU,IAAG/X,MAAR+D,KAAI,CAAK2pE,SAASoC,MAAS/rD,OAAAxF,MAC5B,CAAAvc,IAAA,OAAAN,MAED,WAAkB,QAAAquE,EAAA3jE,UAAA/M,OAAVkf,EAAU,IAAApX,MAAA4oE,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAVzxD,EAAUyxD,GAAA5jE,UAAA4jE,GAChBjsE,KAAKgU,IAAG/X,MAAR+D,KAAI,CAAK2pE,SAASuC,MAASlsD,OAAAxF,MAC5B,CAAAvc,IAAA,QAAAN,MAED,WAAmB,QAAAwuE,EAAA9jE,UAAA/M,OAAVkf,EAAU,IAAApX,MAAA+oE,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAV5xD,EAAU4xD,GAAA/jE,UAAA+jE,GACjBpsE,KAAKgU,IAAG/X,MAAR+D,KAAI,CAAK2pE,SAAS0C,OAAUrsD,OAAAxF,MAC7B,CAAAvc,IAAA,MAAAN,MAED,SAAI2uE,GAA8B,QAAAC,EAAAlkE,UAAA/M,OAAVkf,EAAU,IAAApX,MAAAmpE,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAVhyD,EAAUgyD,EAAA,GAAAnkE,UAAAmkE,GAChCxsE,KAAKsrE,QAAQt3D,IAAIs4D,EAAOtsE,KAAKqrE,OAAQ7wD,EAAIvW,KAAI,SAAAwoE,GAAE,OAAI/P,OAAO+P,MAAK5kD,KAAK,QACrE,CAAA5pB,IAAA,aAAAN,MAED,SAAW+uE,EAA4BC,EAA2BC,GAChE,IAAMpyD,EAAM,WAAAwF,OAAW0sD,EAAOxH,WAAiB,QAAAllD,OAAA2sD,EAAMzH,WAAU,aAAAllD,OAAY4sD,EAAKC,SAC9D,kBAAA7sD,OAAAwqD,aAAakC,GAAO,cAAA1sD,OAAawqD,aAAamC,IAChE3sE,KAAK8sE,MAAMtyD,OACZ2wD,EArCgB,GAwCb4B,mBAAkB,WAAxB,SAAAA,IAAA7L,gBAAA,KAAA6L,GACE,KAAAC,SAAqBrD,SAAS8B,MAkBtB,KAAQwB,SAAgB,GAkC/B,OACFvL,aAAAqL,EAAA,EAAA9uE,IAAA,YAAAN,MAjCC,SAAU0tE,GACR,OAAO,IAAIF,OAAOnrE,KAAMqrE,KACzB,CAAAptE,IAAA,cAAAN,MAED,SAAY2uE,GACVtsE,KAAKgtE,SAAWV,IACjB,CAAAruE,IAAA,QAAAN,MAED,WACEqC,KAAKitE,SAAW,KACjB,CAAAhvE,IAAA,MAAAN,MAED,SAAI2uE,EAAiBjB,EAAgB7wD,GACnC,IAAM0yD,EAAS,CACbC,UAAW3sB,KAAKC,MAChB6rB,QACAjB,SACA7wD,OAEFxa,KAAKitE,SAASrxE,KAAKsxE,GAEfH,EAAmBK,cAAcd,IAAUS,EAAmBK,cAAcptE,KAAKgtE,WACnFD,EAAmBM,gBAAgBf,GAAOS,EAAmBO,QAAQJ,MAExE,CAAAjvE,IAAA,UAAAV,IAED,WACE,OAAWgtE,mBAAAvqE,KAAKitE,aACjB,EAAAhvE,IAAA,UAAAN,MAED,SAAeqW,GACb,MAAU,GAAAgM,OAAA,IAAIwgC,KAAKxsC,EAAIm5D,WAAWI,iBAAgB,MAAAvtD,OAAKhM,EAAIs4D,MAAW,OAAAtsD,OAAAhM,EAAIq3D,OAAM,MAAArrD,OAAKhM,EAAIwG,SAC1FuyD,EArDqB,GAGNA,mBAAAM,iBAAeG,sBAAA,GAAA5D,kBAAA4D,sBAC5B7D,SAAS8B,MAAQlpE,QAAQuqE,OACzBlD,kBAAA4D,sBAAA7D,SAASiC,MAAQrpE,QAAQuqE,OAAKlD,kBAAA4D,sBAC9B7D,SAASoC,KAAOxpE,QAAQghD,MAAIqmB,kBAAA4D,sBAC5B7D,SAASuC,KAAO3pE,QAAQC,MAAIonE,kBAAA4D,sBAC5B7D,SAAS0C,MAAQ9pE,QAAQiiB,OALGgpD,uBAQfT,mBAAAK,eACbK,uBAAA,GAAA7D,kBAAA6D,uBAAA9D,SAAS8B,MAAQ,GAAC7B,kBAAA6D,uBAClB9D,SAASiC,MAAQ,GACjBhC,kBAAA6D,uBAAA9D,SAASoC,KAAO,GAChBnC,kBAAA6D,uBAAA9D,SAASuC,KAAO,GAACtC,kBAAA6D,uBACjB9D,SAAS0C,MAAQ,GALSoB,wBA6CxB,IAAMC,cAAgB,IAAIX,mBSnH7BY,KA+DAC,WC/DW,SAASC,gBAAgB/D,GACtC,GAAI1mE,MAAMC,QAAQymE,GAAM,OAAOA,ECDlB,SAASgE,sBAAsBhE,EAAK1uE,GACjD,IAAI2yE,EAAY,MAAPjE,EAAc,KAAyB,qBAAXrsE,QAA0BqsE,EAAIrsE,OAAO0lE,WAAa2G,EAAI,cAC3F,GAAU,MAANiE,EAAJ,CACA,IAGI9hE,EAAIoE,EAHJ29D,EAAO,GACPC,GAAK,EACLC,GAAK,EAET,IACE,IAAKH,EAAKA,EAAGryE,KAAKouE,KAAQmE,GAAMhiE,EAAK8hE,EAAGI,QAAQ1G,MAAOwG,GAAK,EAE1D,GADAD,EAAKpyE,KAAKqQ,EAAGtO,OACTvC,GAAK4yE,EAAK1yE,SAAWF,EAAG,MAE9B,MAAO6qD,GACPioB,GAAK,EACL79D,EAAK41C,EACN,QACC,IACOgoB,GAAsB,MAAhBF,EAAG,WAAmBA,EAAG,YACrC,QACC,GAAIG,EAAI,MAAM79D,GAGlB,OAAO29D,GCtBM,SAASI,mBACtB,MAAM,IAAI/M,UAAU,6ICGP,SAASgN,eAAevE,EAAK1uE,GAC1C,OAAOyyE,gBAAe/D,IAAQgE,sBAAqBhE,EAAK1uE,IAAM+uE,8BAA2BL,EAAK1uE,IAAMgzE,oBJJtG,SAAWT,GAEP,SAASW,EAASC,IAElB,SAASC,EAAYC,GACjB,MAAM,IAAIra,MA4Cd,SAASsa,EAAW3rC,EAAO4rC,EAAY,OACnC,OAAO5rC,EACF9+B,IAAKigB,GAAwB,kBAARA,EAAoB,IAAGA,KAASA,GACrD2D,KAAK8mD,GAnDdhB,EAAKiB,YAAe1qD,GAAQA,EAE5BypD,EAAKW,SAAWA,EAIhBX,EAAKa,YAAcA,EACnBb,EAAKkB,YAAe7pE,IAChB,MAAM9C,EAAM,GACZ,IAAK,MAAMkR,KAAQpO,EACf9C,EAAIkR,GAAQA,EAEhB,OAAOlR,GAEXyrE,EAAKmB,mBAAsB5sE,IACvB,MAAM6sE,EAAYpB,EAAKqB,WAAW9sE,GAAKmC,OAAQsmC,GAA6B,kBAAhBzoC,EAAIA,EAAIyoC,KAC9DskC,EAAW,GACjB,IAAK,MAAMtkC,KAAKokC,EACZE,EAAStkC,GAAKzoC,EAAIyoC,GAEtB,OAAOgjC,EAAKuB,aAAaD,IAE7BtB,EAAKuB,aAAgBhtE,GACVyrE,EAAKqB,WAAW9sE,GAAK+B,KAAI,SAAUwC,GACtC,OAAOvE,EAAIuE,MAGnBknE,EAAKqB,WAAoC,oBAAhBzzE,OAAOqE,KACzBsC,GAAQ3G,OAAOqE,KAAKsC,GACpB9D,IACC,MAAMwB,EAAO,GACb,IAAK,MAAM3B,KAAOG,EACV7C,OAAOC,UAAUC,eAAeC,KAAK0C,EAAQH,IAC7C2B,EAAKhE,KAAKqC,GAGlB,OAAO2B,GAEf+tE,EAAKhxD,KAAO,CAACmtD,EAAKqF,KACd,IAAK,MAAM/7D,KAAQ02D,EACf,GAAIqF,EAAQ/7D,GACR,OAAOA,GAInBu6D,EAAKyB,UAAwC,oBAArBC,OAAOD,UACxBlrD,GAAQmrD,OAAOD,UAAUlrD,GACzBA,GAAuB,kBAARA,GAAoBorD,SAASprD,IAAQjd,KAAK6L,MAAMoR,KAASA,EAM/EypD,EAAKe,WAAaA,EAClBf,EAAK4B,sBAAwB,CAACnnE,EAAGzK,IACR,kBAAVA,EACAA,EAAMunE,WAEVvnE,GA3Df,CA6DGgwE,OAASA,KAAO,KAEnB,SAAWC,GACPA,EAAW4B,YAAc,CAACC,EAAOC,KACtB,IACAD,KACAC,IAJf,CAOG9B,aAAeA,WAAa,KAC/B,MAAM+B,cAAgBhC,KAAKkB,YAAY,CACnC,SACA,MACA,SACA,UACA,QACA,UACA,OACA,SACA,SACA,WACA,YACA,OACA,QACA,SACA,UACA,UACA,OACA,QACA,MACA,QAEEe,cAAiB90E,IACnB,MAAM8C,SAAW9C,EACjB,OAAQ8C,GACJ,IAAK,YACD,OAAO+xE,cAAcxwE,UACzB,IAAK,SACD,OAAOwwE,cAAcE,OACzB,IAAK,SACD,OAAOtwE,MAAMzE,GAAQ60E,cAAcG,IAAMH,cAAcI,OAC3D,IAAK,UACD,OAAOJ,cAAcK,QACzB,IAAK,WACD,OAAOL,cAAcM,SACzB,IAAK,SACD,OAAON,cAAcO,OACzB,IAAK,SACD,OAAOP,cAAcQ,OACzB,IAAK,SACD,OAAI/sE,MAAMC,QAAQvI,GACP60E,cAAc5sC,MAEZ,OAATjoC,EACO60E,cAAcS,KAErBt1E,EAAK6gB,MACgB,oBAAd7gB,EAAK6gB,MACZ7gB,EAAK8gB,OACiB,oBAAf9gB,EAAK8gB,MACL+zD,cAAcU,QAEN,qBAARz5D,KAAuB9b,aAAgB8b,IACvC+4D,cAAc1rE,IAEN,qBAAR3C,KAAuBxG,aAAgBwG,IACvCquE,cAAc1uE,IAEL,qBAATu/C,MAAwB1lD,aAAgB0lD,KACxCmvB,cAAcW,KAElBX,cAAcvxE,OACzB,QACI,OAAOuxE,cAAcY,UAI3BC,aAAe7C,KAAKkB,YAAY,CAClC,eACA,kBACA,SACA,gBACA,8BACA,qBACA,oBACA,oBACA,sBACA,eACA,iBACA,YACA,UACA,6BACA,kBACA,eAEE4B,cAAiBvuE,IACnB,MAAM9C,EAAOs3B,KAAKjL,UAAUvpB,EAAK,KAAM,GACvC,OAAO9C,EAAKwoB,QAAQ,cAAe,QAEvC,MAAM8oD,iBAAiBtc,MACnBx1D,YAAY+xE,GACRnwE,QACAR,KAAK2wE,OAAS,GACd3wE,KAAK4wE,SAAYC,IACb7wE,KAAK2wE,OAAS,IAAI3wE,KAAK2wE,OAAQE,IAEnC7wE,KAAK8wE,UAAY,CAACC,EAAO,MACrB/wE,KAAK2wE,OAAS,IAAI3wE,KAAK2wE,UAAWI,IAEtC,MAAMC,aAAyBx1E,UAC3BD,OAAOsnE,eAEPtnE,OAAOsnE,eAAe7iE,KAAMgxE,GAG5BhxE,KAAK8iE,UAAYkO,EAErBhxE,KAAK9C,KAAO,WACZ8C,KAAK2wE,OAASA,EAElB,aACI,OAAO3wE,KAAK2wE,OAEhBM,OAAOC,GACH,MAAMC,EAASD,GACX,SAAUE,GACN,OAAOA,EAAMpmD,SAEfqmD,EAAc,CAAEC,QAAS,IACzBC,EAAgB/sD,IAClB,IAAK,MAAM4sD,KAAS5sD,EAAMmsD,OACtB,GAAmB,kBAAfS,EAAMv/C,KACNu/C,EAAMI,YAAYvtE,IAAIstE,QAErB,GAAmB,wBAAfH,EAAMv/C,KACX0/C,EAAaH,EAAMK,sBAElB,GAAmB,sBAAfL,EAAMv/C,KACX0/C,EAAaH,EAAMM,qBAElB,GAA0B,IAAtBN,EAAMzkC,KAAKrxC,OAChB+1E,EAAYC,QAAQ11E,KAAKu1E,EAAOC,QAE/B,CACD,IAAIO,EAAON,EACPj2E,EAAI,EACR,MAAOA,EAAIg2E,EAAMzkC,KAAKrxC,OAAQ,CAC1B,MAAM+qB,EAAK+qD,EAAMzkC,KAAKvxC,GAChBw2E,EAAWx2E,IAAMg2E,EAAMzkC,KAAKrxC,OAAS,EACtCs2E,GAWDD,EAAKtrD,GAAMsrD,EAAKtrD,IAAO,CAAEirD,QAAS,IAClCK,EAAKtrD,GAAIirD,QAAQ11E,KAAKu1E,EAAOC,KAX7BO,EAAKtrD,GAAMsrD,EAAKtrD,IAAO,CAAEirD,QAAS,IAatCK,EAAOA,EAAKtrD,GACZjrB,OAMhB,OADAm2E,EAAavxE,MACNqxE,EAEXnM,WACI,OAAOllE,KAAKgrB,QAEhB,cACI,OAAO0L,KAAKjL,UAAUzrB,KAAK2wE,OAAQhD,KAAK4B,sBAAuB,GAEnE,cACI,OAA8B,IAAvBvvE,KAAK2wE,OAAOr1E,OAEvBu2E,QAAQV,EAAUC,IAAUA,EAAMpmD,UAC9B,MAAMqmD,EAAc,GACdS,EAAa,GACnB,IAAK,MAAMjB,KAAO7wE,KAAK2wE,OACfE,EAAIlkC,KAAKrxC,OAAS,GAClB+1E,EAAYR,EAAIlkC,KAAK,IAAM0kC,EAAYR,EAAIlkC,KAAK,KAAO,GACvD0kC,EAAYR,EAAIlkC,KAAK,IAAI/wC,KAAKu1E,EAAON,KAGrCiB,EAAWl2E,KAAKu1E,EAAON,IAG/B,MAAO,CAAEiB,aAAYT,eAEzB,iBACI,OAAOrxE,KAAK6xE,WAGpBnB,SAAS1yE,OAAU2yE,IACf,MAAMnsD,EAAQ,IAAIksD,SAASC,GAC3B,OAAOnsD,GAGX,MAAMutD,SAAWA,CAACX,EAAOY,KACrB,IAAIhnD,EACJ,OAAQomD,EAAMv/C,MACV,KAAK2+C,aAAayB,aAEVjnD,EADAomD,EAAMc,WAAavC,cAAcxwE,UACvB,WAGC,YAAWiyE,EAAMe,sBAAsBf,EAAMc,WAE5D,MACJ,KAAK1B,aAAa4B,gBACdpnD,EAAW,mCAAkC0L,KAAKjL,UAAU2lD,EAAMe,SAAUxE,KAAK4B,uBACjF,MACJ,KAAKiB,aAAa6B,kBACdrnD,EAAW,kCAAiC2iD,KAAKe,WAAW0C,EAAMxxE,KAAM,MACxE,MACJ,KAAK4wE,aAAa8B,cACdtnD,EAAW,gBACX,MACJ,KAAKwlD,aAAa+B,4BACdvnD,EAAW,yCAAwC2iD,KAAKe,WAAW0C,EAAM3uB,SACzE,MACJ,KAAK+tB,aAAagC,mBACdxnD,EAAW,gCAA+B2iD,KAAKe,WAAW0C,EAAM3uB,uBAAuB2uB,EAAMc,YAC7F,MACJ,KAAK1B,aAAaiC,kBACdznD,EAAW,6BACX,MACJ,KAAKwlD,aAAakC,oBACd1nD,EAAW,+BACX,MACJ,KAAKwlD,aAAamC,aACd3nD,EAAW,eACX,MACJ,KAAKwlD,aAAaoC,eACkB,kBAArBxB,EAAMyB,WACT,aAAczB,EAAMyB,YACpB7nD,EAAW,gCAA+BomD,EAAMyB,WAAWxgE,YAClB,kBAA9B++D,EAAMyB,WAAW1zC,WACxBnU,EAAW,GAAEA,uDAA6DomD,EAAMyB,WAAW1zC,aAG1F,eAAgBiyC,EAAMyB,WAC3B7nD,EAAW,mCAAkComD,EAAMyB,WAAWC,cAEzD,aAAc1B,EAAMyB,WACzB7nD,EAAW,iCAAgComD,EAAMyB,WAAWlK,YAG5DgF,KAAKa,YAAY4C,EAAMyB,YAI3B7nD,EAD0B,UAArBomD,EAAMyB,WACA,WAAUzB,EAAMyB,WAGjB,UAEd,MACJ,KAAKrC,aAAauC,UAEV/nD,EADe,UAAfomD,EAAM3wE,KACK,sBAAqB2wE,EAAM4B,MAAQ,UAAY5B,EAAM6B,UAAa,WAAa,eAAc7B,EAAM8B,qBAC1F,WAAf9B,EAAM3wE,KACA,uBAAsB2wE,EAAM4B,MAAQ,UAAY5B,EAAM6B,UAAa,WAAa,UAAS7B,EAAM8B,uBACtF,WAAf9B,EAAM3wE,KACA,kBAAiB2wE,EAAM4B,MAC3B,oBACD5B,EAAM6B,UACD,4BACA,kBAAiB7B,EAAM8B,UACd,SAAf9B,EAAM3wE,KACA,gBAAe2wE,EAAM4B,MACzB,oBACD5B,EAAM6B,UACD,4BACA,kBAAiB,IAAIzyB,KAAK6uB,OAAO+B,EAAM8B,YAExC,gBACd,MACJ,KAAK1C,aAAa2C,QAEVnoD,EADe,UAAfomD,EAAM3wE,KACK,sBAAqB2wE,EAAM4B,MAAS,UAAW5B,EAAM6B,UAAa,UAAY,eAAc7B,EAAMgC,qBACzF,WAAfhC,EAAM3wE,KACA,uBAAsB2wE,EAAM4B,MAAS,UAAW5B,EAAM6B,UAAa,UAAY,WAAU7B,EAAMgC,uBACtF,WAAfhC,EAAM3wE,KACA,kBAAiB2wE,EAAM4B,MAC3B,UACD5B,EAAM6B,UACD,wBACA,eAAc7B,EAAMgC,UACX,WAAfhC,EAAM3wE,KACA,kBAAiB2wE,EAAM4B,MAC3B,UACD5B,EAAM6B,UACD,wBACA,eAAc7B,EAAMgC,UACX,SAAfhC,EAAM3wE,KACA,gBAAe2wE,EAAM4B,MACzB,UACD5B,EAAM6B,UACD,2BACA,kBAAiB,IAAIzyB,KAAK6uB,OAAO+B,EAAMgC,YAExC,gBACd,MACJ,KAAK5C,aAAa6C,OACdroD,EAAW,gBACX,MACJ,KAAKwlD,aAAa8C,2BACdtoD,EAAW,2CACX,MACJ,KAAKwlD,aAAa+C,gBACdvoD,EAAW,gCAA+BomD,EAAMoC,WAChD,MACJ,KAAKhD,aAAaiD,WACdzoD,EAAU,wBACV,MACJ,QACIA,EAAUgnD,EAAK0B,aACf/F,KAAKa,YAAY4C,GAEzB,MAAO,CAAEpmD,YAGb,IAAI2oD,iBAAmB5B,SACvB,SAAS6B,YAAY3vE,GACjB0vE,iBAAmB1vE,EAEvB,SAAS4vE,cACL,OAAOF,iBAGX,MAAMG,UAAazlC,IACf,MAAM,KAAEvzC,EAAI,KAAE6xC,EAAI,UAAEonC,EAAS,UAAEC,GAAc3lC,EACvC4lC,EAAW,IAAItnC,KAAUqnC,EAAUrnC,MAAQ,IAC3CunC,EAAY,IACXF,EACHrnC,KAAMsnC,GAEV,IAAIE,EAAe,GACnB,MAAMC,EAAOL,EACR1vE,OAAQtH,KAAQA,GAChB2B,QACAw9D,UACL,IAAK,MAAMj4D,KAAOmwE,EACdD,EAAelwE,EAAIiwE,EAAW,CAAEp5E,OAAM44E,aAAcS,IAAgBnpD,QAExE,MAAO,IACAgpD,EACHrnC,KAAMsnC,EACNjpD,QAASgpD,EAAUhpD,SAAWmpD,IAGhCE,WAAa,GACnB,SAASC,kBAAkBlkD,EAAK4jD,GAC5B,MAAM5C,EAAQ0C,UAAU,CACpBE,UAAWA,EACXl5E,KAAMs1B,EAAIt1B,KACV6xC,KAAMvc,EAAIuc,KACVonC,UAAW,CACP3jD,EAAImkD,OAAOC,mBACXpkD,EAAIqkD,eACJZ,cACA9B,UACF1tE,OAAQkD,KAAQA,KAEtB6oB,EAAImkD,OAAO5D,OAAO/0E,KAAKw1E,GAE3B,MAAMsD,YACF91E,cACIoB,KAAKrC,MAAQ,QAEjBg3E,QACuB,UAAf30E,KAAKrC,QACLqC,KAAKrC,MAAQ,SAErBi3E,QACuB,YAAf50E,KAAKrC,QACLqC,KAAKrC,MAAQ,WAErB,kBAAkByvD,EAAQsD,GACtB,MAAMmkB,EAAa,GACnB,IAAK,MAAMn4E,KAAKg0D,EAAS,CACrB,GAAiB,YAAbh0D,EAAE0wD,OACF,OAAO0nB,QACM,UAAbp4E,EAAE0wD,QACFA,EAAOunB,QACXE,EAAWj5E,KAAKc,EAAEiB,OAEtB,MAAO,CAAEyvD,OAAQA,EAAOzvD,MAAOA,MAAOk3E,GAE1C,8BAA8BznB,EAAQ2nB,GAClC,MAAMC,EAAY,GAClB,IAAK,MAAMC,KAAQF,EACfC,EAAUp5E,KAAK,CACXqC,UAAWg3E,EAAKh3E,IAChBN,YAAas3E,EAAKt3E,QAG1B,OAAO+2E,YAAYQ,gBAAgB9nB,EAAQ4nB,GAE/C,uBAAuB5nB,EAAQ2nB,GAC3B,MAAMI,EAAc,GACpB,IAAK,MAAMF,KAAQF,EAAO,CACtB,MAAM,IAAE92E,EAAG,MAAEN,GAAUs3E,EACvB,GAAmB,YAAfh3E,EAAImvD,OACJ,OAAO0nB,QACX,GAAqB,YAAjBn3E,EAAMyvD,OACN,OAAO0nB,QACQ,UAAf72E,EAAImvD,QACJA,EAAOunB,QACU,UAAjBh3E,EAAMyvD,QACNA,EAAOunB,SACgB,qBAAhBh3E,EAAMA,OAAyBs3E,EAAKG,aAC3CD,EAAYl3E,EAAIN,OAASA,EAAMA,OAGvC,MAAO,CAAEyvD,OAAQA,EAAOzvD,MAAOA,MAAOw3E,IAG9C,MAAML,QAAUv5E,OAAO85E,OAAO,CAC1BjoB,OAAQ,YAENkoB,MAAS33E,IAAK,CAAQyvD,OAAQ,QAASzvD,UACvC43E,GAAM53E,IAAK,CAAQyvD,OAAQ,QAASzvD,UACpC63E,UAAajuE,GAAmB,YAAbA,EAAE6lD,OACrBqoB,QAAWluE,GAAmB,UAAbA,EAAE6lD,OACnB9qD,QAAWiF,GAAmB,UAAbA,EAAE6lD,OACnBsoB,QAAWnuE,GAAyB,qBAAZu/C,SAA2Bv/C,aAAau/C,QAEtE,IAAI6uB,WACJ,SAAWA,GACPA,EAAUC,SAAY5qD,GAA+B,kBAAZA,EAAuB,CAAEA,WAAYA,GAAW,GACzF2qD,EAAUzQ,SAAYl6C,GAA+B,kBAAZA,EAAuBA,EAAsB,OAAZA,QAAgC,IAAZA,OAAqB,EAASA,EAAQA,SAFxI,CAGG2qD,YAAcA,UAAY,KAE7B,MAAME,mBACFj3E,YAAYg4B,EAAQj5B,EAAOgvC,EAAM1uC,GAC7B+B,KAAK81E,YAAc,GACnB91E,KAAK42B,OAASA,EACd52B,KAAKlF,KAAO6C,EACZqC,KAAK+1E,MAAQppC,EACb3sC,KAAKwrE,KAAOvtE,EAEhB,WASI,OARK+B,KAAK81E,YAAYx6E,SACd0E,KAAKwrE,gBAAgBpoE,MACrBpD,KAAK81E,YAAYl6E,QAAQoE,KAAK+1E,SAAU/1E,KAAKwrE,MAG7CxrE,KAAK81E,YAAYl6E,QAAQoE,KAAK+1E,MAAO/1E,KAAKwrE,OAG3CxrE,KAAK81E,aAGpB,MAAME,aAAeA,CAAC5lD,EAAKj0B,KACvB,GAAImG,QAAQnG,GACR,MAAO,CAAEmsE,SAAS,EAAMxtE,KAAMqB,EAAOwB,OAGrC,IAAKyyB,EAAImkD,OAAO5D,OAAOr1E,OACnB,MAAM,IAAI84D,MAAM,6CAEpB,MAAO,CACHkU,SAAS,EACT,YACI,GAAItoE,KAAKi2E,OACL,OAAOj2E,KAAKi2E,OAChB,MAAMzxD,EAAQ,IAAIksD,SAAStgD,EAAImkD,OAAO5D,QAEtC,OADA3wE,KAAKi2E,OAASzxD,EACPxkB,KAAKi2E,UAK5B,SAASC,oBAAoB7nC,GACzB,IAAKA,EACD,MAAO,GACX,MAAM,SAAE0jC,EAAQ,mBAAEoE,EAAkB,eAAEC,EAAc,YAAEC,GAAgBhoC,EACtE,GAAI0jC,IAAaoE,GAAsBC,GACnC,MAAM,IAAIhiB,MAAO,6FAErB,GAAI2d,EACA,MAAO,CAAEA,SAAUA,EAAUsE,eACjC,MAAMC,EAAYA,CAACC,EAAKnmD,IACH,iBAAbmmD,EAAI1kD,KACG,CAAE7G,QAASoF,EAAIsjD,cACF,qBAAbtjD,EAAIt1B,KACJ,CAAEkwB,QAA4B,OAAnBorD,QAA8C,IAAnBA,EAA4BA,EAAiBhmD,EAAIsjD,cAE3F,CAAE1oD,QAAgC,OAAvBmrD,QAAsD,IAAvBA,EAAgCA,EAAqB/lD,EAAIsjD,cAE9G,MAAO,CAAE3B,SAAUuE,EAAWD,eAElC,MAAMG,QACF53E,YAAY63E,GAERz2E,KAAK02E,IAAM12E,KAAK22E,eAChB32E,KAAK42E,KAAOH,EACZz2E,KAAK6qB,MAAQ7qB,KAAK6qB,MAAM3sB,KAAK8B,MAC7BA,KAAK62E,UAAY72E,KAAK62E,UAAU34E,KAAK8B,MACrCA,KAAK82E,WAAa92E,KAAK82E,WAAW54E,KAAK8B,MACvCA,KAAK22E,eAAiB32E,KAAK22E,eAAez4E,KAAK8B,MAC/CA,KAAK02E,IAAM12E,KAAK02E,IAAIx4E,KAAK8B,MACzBA,KAAK+2E,OAAS/2E,KAAK+2E,OAAO74E,KAAK8B,MAC/BA,KAAKg3E,WAAah3E,KAAKg3E,WAAW94E,KAAK8B,MACvCA,KAAKi3E,YAAcj3E,KAAKi3E,YAAY/4E,KAAK8B,MACzCA,KAAKk3E,SAAWl3E,KAAKk3E,SAASh5E,KAAK8B,MACnCA,KAAKm3E,SAAWn3E,KAAKm3E,SAASj5E,KAAK8B,MACnCA,KAAKo3E,QAAUp3E,KAAKo3E,QAAQl5E,KAAK8B,MACjCA,KAAK+iC,MAAQ/iC,KAAK+iC,MAAM7kC,KAAK8B,MAC7BA,KAAKqwE,QAAUrwE,KAAKqwE,QAAQnyE,KAAK8B,MACjCA,KAAKq3E,GAAKr3E,KAAKq3E,GAAGn5E,KAAK8B,MACvBA,KAAKs3E,IAAMt3E,KAAKs3E,IAAIp5E,KAAK8B,MACzBA,KAAKg0B,UAAYh0B,KAAKg0B,UAAU91B,KAAK8B,MACrCA,KAAKu3E,MAAQv3E,KAAKu3E,MAAMr5E,KAAK8B,MAC7BA,KAAKw3E,QAAUx3E,KAAKw3E,QAAQt5E,KAAK8B,MACjCA,KAAK4b,MAAQ5b,KAAK4b,MAAM1d,KAAK8B,MAC7BA,KAAKy3E,SAAWz3E,KAAKy3E,SAASv5E,KAAK8B,MACnCA,KAAK03E,KAAO13E,KAAK03E,KAAKx5E,KAAK8B,MAC3BA,KAAK23E,WAAa33E,KAAK23E,WAAWz5E,KAAK8B,MACvCA,KAAK43E,WAAa53E,KAAK43E,WAAW15E,KAAK8B,MAE3C,kBACI,OAAOA,KAAK42E,KAAKP,YAErBwB,SAAS9V,GACL,OAAO6N,cAAc7N,EAAMjnE,MAE/Bg9E,gBAAgB/V,EAAO3xC,GACnB,OAAQA,GAAO,CACXmkD,OAAQxS,EAAMnrC,OAAO29C,OACrBz5E,KAAMinE,EAAMjnE,KACZi9E,WAAYnI,cAAc7N,EAAMjnE,MAChC25E,eAAgBz0E,KAAK42E,KAAK7E,SAC1BplC,KAAMo1B,EAAMp1B,KACZ/V,OAAQmrC,EAAMnrC,QAGtBohD,oBAAoBjW,GAChB,MAAO,CACH3U,OAAQ,IAAIsnB,YACZtkD,IAAK,CACDmkD,OAAQxS,EAAMnrC,OAAO29C,OACrBz5E,KAAMinE,EAAMjnE,KACZi9E,WAAYnI,cAAc7N,EAAMjnE,MAChC25E,eAAgBz0E,KAAK42E,KAAK7E,SAC1BplC,KAAMo1B,EAAMp1B,KACZ/V,OAAQmrC,EAAMnrC,SAI1BqhD,WAAWlW,GACP,MAAM5lE,EAAS6D,KAAKk4E,OAAOnW,GAC3B,GAAI2T,QAAQv5E,GACR,MAAM,IAAIi4D,MAAM,0CAEpB,OAAOj4D,EAEXg8E,YAAYpW,GACR,MAAM5lE,EAAS6D,KAAKk4E,OAAOnW,GAC3B,OAAOjb,QAAQC,QAAQ5qD,GAE3B0uB,MAAM/vB,EAAMuzC,GACR,MAAMlyC,EAAS6D,KAAK62E,UAAU/7E,EAAMuzC,GACpC,GAAIlyC,EAAOmsE,QACP,OAAOnsE,EAAOrB,KAClB,MAAMqB,EAAOqoB,MAEjBqyD,UAAU/7E,EAAMuzC,GACZ,IAAI21B,EACJ,MAAM5zC,EAAM,CACRmkD,OAAQ,CACJ5D,OAAQ,GACRhqB,MAA+E,QAAvEqd,EAAgB,OAAX31B,QAA8B,IAAXA,OAAoB,EAASA,EAAOsY,aAA0B,IAAPqd,GAAgBA,EACvGwQ,mBAA+B,OAAXnmC,QAA8B,IAAXA,OAAoB,EAASA,EAAO0jC,UAE/EplC,MAAkB,OAAX0B,QAA8B,IAAXA,OAAoB,EAASA,EAAO1B,OAAS,GACvE8nC,eAAgBz0E,KAAK42E,KAAK7E,SAC1Bn7C,OAAQ,KACR97B,OACAi9E,WAAYnI,cAAc90E,IAExBqB,EAAS6D,KAAKi4E,WAAW,CAAEn9E,OAAM6xC,KAAMvc,EAAIuc,KAAM/V,OAAQxG,IAC/D,OAAO4lD,aAAa5lD,EAAKj0B,GAE7B,iBAAiBrB,EAAMuzC,GACnB,MAAMlyC,QAAe6D,KAAK22E,eAAe77E,EAAMuzC,GAC/C,GAAIlyC,EAAOmsE,QACP,OAAOnsE,EAAOrB,KAClB,MAAMqB,EAAOqoB,MAEjB,qBAAqB1pB,EAAMuzC,GACvB,MAAMje,EAAM,CACRmkD,OAAQ,CACJ5D,OAAQ,GACR6D,mBAA+B,OAAXnmC,QAA8B,IAAXA,OAAoB,EAASA,EAAO0jC,SAC3EprB,OAAO,GAEXha,MAAkB,OAAX0B,QAA8B,IAAXA,OAAoB,EAASA,EAAO1B,OAAS,GACvE8nC,eAAgBz0E,KAAK42E,KAAK7E,SAC1Bn7C,OAAQ,KACR97B,OACAi9E,WAAYnI,cAAc90E,IAExBs9E,EAAmBp4E,KAAKk4E,OAAO,CAAEp9E,OAAM6xC,KAAMvc,EAAIuc,KAAM/V,OAAQxG,IAC/Dj0B,QAAgBu5E,QAAQ0C,GACxBA,EACAtxB,QAAQC,QAAQqxB,IACtB,OAAOpC,aAAa5lD,EAAKj0B,GAE7B46E,OAAOsB,EAAOrtD,GACV,MAAMstD,EAAsBp0D,GACD,kBAAZ8G,GAA2C,qBAAZA,EAC/B,CAAEA,WAEe,oBAAZA,EACLA,EAAQ9G,GAGR8G,EAGf,OAAOhrB,KAAKu4E,YAAY,CAACr0D,EAAKkM,KAC1B,MAAMj0B,EAASk8E,EAAMn0D,GACfs0D,EAAWA,IAAMpoD,EAAIwgD,SAAS,CAChC/+C,KAAM2+C,aAAa6C,UAChBiF,EAAmBp0D,KAE1B,MAAuB,qBAAZ4iC,SAA2B3qD,aAAkB2qD,QAC7C3qD,EAAOwf,KAAM7gB,KACXA,IACD09E,KACO,MAOdr8E,IACDq8E,KACO,KAOnBxB,WAAWqB,EAAOI,GACd,OAAOz4E,KAAKu4E,YAAY,CAACr0D,EAAKkM,MACrBioD,EAAMn0D,KACPkM,EAAIwgD,SAAmC,oBAAnB6H,EACdA,EAAev0D,EAAKkM,GACpBqoD,IACC,IAOnBF,YAAYvB,GACR,OAAO,IAAI0B,WAAW,CAClBC,OAAQ34E,KACR44E,SAAUC,sBAAsBH,WAChCI,OAAQ,CAAEr4E,KAAM,aAAcu2E,gBAGtCC,YAAYD,GACR,OAAOh3E,KAAKu4E,YAAYvB,GAE5BE,WACI,OAAO6B,YAAY/6E,OAAOgC,KAAMA,KAAK42E,MAEzCO,WACI,OAAO6B,YAAYh7E,OAAOgC,KAAMA,KAAK42E,MAEzCQ,UACI,OAAOp3E,KAAKm3E,WAAWD,WAE3Bn0C,QACI,OAAOk2C,SAASj7E,OAAOgC,KAAMA,KAAK42E,MAEtCvG,UACI,OAAO6I,WAAWl7E,OAAOgC,KAAMA,KAAK42E,MAExCS,GAAG8B,GACC,OAAOC,SAASp7E,OAAO,CAACgC,KAAMm5E,GAASn5E,KAAK42E,MAEhDU,IAAI+B,GACA,OAAOC,gBAAgBt7E,OAAOgC,KAAMq5E,EAAUr5E,KAAK42E,MAEvD5iD,UAAUA,GACN,OAAO,IAAI0kD,WAAW,IACfxC,oBAAoBl2E,KAAK42E,MAC5B+B,OAAQ34E,KACR44E,SAAUC,sBAAsBH,WAChCI,OAAQ,CAAEr4E,KAAM,YAAauzB,eAGrCwjD,QAAQf,GACJ,MAAM8C,EAAkC,oBAAR9C,EAAqBA,EAAM,IAAMA,EACjE,OAAO,IAAI+C,WAAW,IACftD,oBAAoBl2E,KAAK42E,MAC5B6C,UAAWz5E,KACX2C,aAAc42E,EACdX,SAAUC,sBAAsBW,aAGxCjC,QACI,OAAO,IAAImC,WAAW,CAClBd,SAAUC,sBAAsBa,WAChCj5E,KAAMT,QACHk2E,oBAAoBl2E,KAAK42E,QAGpCh7D,MAAM66D,GACF,MAAMkD,EAAgC,oBAARlD,EAAqBA,EAAM,IAAMA,EAC/D,OAAO,IAAImD,SAAS,IACb1D,oBAAoBl2E,KAAK42E,MAC5B6C,UAAWz5E,KACX65E,WAAYF,EACZf,SAAUC,sBAAsBe,WAGxCnC,SAASpB,GACL,MAAMyD,EAAO95E,KAAKpB,YAClB,OAAO,IAAIk7E,EAAK,IACT95E,KAAK42E,KACRP,gBAGRqB,KAAK/2E,GACD,OAAOo5E,YAAY/7E,OAAOgC,KAAMW,GAEpCi3E,aACI,OAAO53E,KAAK62E,eAAU13E,GAAWmpE,QAErCqP,aACI,OAAO33E,KAAK62E,UAAU,MAAMvO,SAGpC,MAAM0R,UAAY,iBACZC,WAAa,mBACbC,UAAY,yBACZC,UAAY,8GAOZC,WAAa,unBAEbC,WAAa,sDACbC,UAAY,gHACZC,UAAY,+XAEZC,cAAiB3rC,GACfA,EAAK4rC,UACD5rC,EAAK7vC,OACE,IAAI07E,OAAQ,oDAAmD7rC,EAAK4rC,0CAGpE,IAAIC,OAAQ,oDAAmD7rC,EAAK4rC,gBAGvD,IAAnB5rC,EAAK4rC,UACN5rC,EAAK7vC,OACE,IAAI07E,OAAQ,0EAGZ,IAAIA,OAAQ,gDAInB7rC,EAAK7vC,OACE,IAAI07E,OAAQ,oFAGZ,IAAIA,OAAQ,0DAI/B,SAASC,UAAUC,EAAIC,GACnB,QAAiB,OAAZA,GAAqBA,IAAYP,UAAUjQ,KAAKuQ,OAGpC,OAAZC,GAAqBA,IAAYN,UAAUlQ,KAAKuQ,IAKzD,MAAME,kBAAkBtE,QACpB53E,cACI4B,SAAS6H,WACTrI,KAAK+6E,OAAS,CAACC,EAAOnI,EAAY7nD,IAAYhrB,KAAKg3E,WAAYl8E,GAASkgF,EAAM3Q,KAAKvvE,GAAO,CACtF+3E,aACAhhD,KAAM2+C,aAAaoC,kBAChB+C,UAAUC,SAAS5qD,KAM1BhrB,KAAKi7E,SAAYjwD,GAAYhrB,KAAK2R,IAAI,EAAGgkE,UAAUC,SAAS5qD,IAC5DhrB,KAAKwoB,KAAO,IAAM,IAAIsyD,UAAU,IACzB96E,KAAK42E,KACRsE,OAAQ,IAAIl7E,KAAK42E,KAAKsE,OAAQ,CAAEC,KAAM,WAE1Cn7E,KAAKgoB,YAAc,IAAM,IAAI8yD,UAAU,IAChC96E,KAAK42E,KACRsE,OAAQ,IAAIl7E,KAAK42E,KAAKsE,OAAQ,CAAEC,KAAM,kBAE1Cn7E,KAAKo7E,YAAc,IAAM,IAAIN,UAAU,IAChC96E,KAAK42E,KACRsE,OAAQ,IAAIl7E,KAAK42E,KAAKsE,OAAQ,CAAEC,KAAM,kBAG9CjD,OAAOnW,GACC/hE,KAAK42E,KAAKyE,SACVtZ,EAAMjnE,KAAO4hE,OAAOqF,EAAMjnE,OAE9B,MAAMi9E,EAAa/3E,KAAK63E,SAAS9V,GACjC,GAAIgW,IAAepI,cAAcE,OAAQ,CACrC,MAAMz/C,EAAMpwB,KAAK83E,gBAAgB/V,GAQjC,OAPAuS,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAayB,aACnBE,SAAUxC,cAAcE,OACxBqC,SAAU9hD,EAAI2nD,aAIXjD,QAEX,MAAM1nB,EAAS,IAAIsnB,YACnB,IAAItkD,OAAMjxB,EACV,IAAK,MAAMk5E,KAASr4E,KAAK42E,KAAKsE,OAC1B,GAAmB,QAAf7C,EAAM8C,KACFpZ,EAAMjnE,KAAKQ,OAAS+8E,EAAM16E,QAC1ByyB,EAAMpwB,KAAK83E,gBAAgB/V,EAAO3xC,GAClCkkD,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAauC,UACnBG,QAASmF,EAAM16E,MACf8C,KAAM,SACNwyE,WAAW,EACXD,OAAO,EACPhoD,QAASqtD,EAAMrtD,UAEnBoiC,EAAOunB,cAGV,GAAmB,QAAf0D,EAAM8C,KACPpZ,EAAMjnE,KAAKQ,OAAS+8E,EAAM16E,QAC1ByyB,EAAMpwB,KAAK83E,gBAAgB/V,EAAO3xC,GAClCkkD,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAa2C,QACnBC,QAASiF,EAAM16E,MACf8C,KAAM,SACNwyE,WAAW,EACXD,OAAO,EACPhoD,QAASqtD,EAAMrtD,UAEnBoiC,EAAOunB,cAGV,GAAmB,WAAf0D,EAAM8C,KAAmB,CAC9B,MAAMG,EAASvZ,EAAMjnE,KAAKQ,OAAS+8E,EAAM16E,MACnC49E,EAAWxZ,EAAMjnE,KAAKQ,OAAS+8E,EAAM16E,OACvC29E,GAAUC,KACVnrD,EAAMpwB,KAAK83E,gBAAgB/V,EAAO3xC,GAC9BkrD,EACAhH,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAa2C,QACnBC,QAASiF,EAAM16E,MACf8C,KAAM,SACNwyE,WAAW,EACXD,OAAO,EACPhoD,QAASqtD,EAAMrtD,UAGduwD,GACLjH,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAauC,UACnBG,QAASmF,EAAM16E,MACf8C,KAAM,SACNwyE,WAAW,EACXD,OAAO,EACPhoD,QAASqtD,EAAMrtD,UAGvBoiC,EAAOunB,cAGV,GAAmB,UAAf0D,EAAM8C,KACNf,WAAW/P,KAAKtI,EAAMjnE,QACvBs1B,EAAMpwB,KAAK83E,gBAAgB/V,EAAO3xC,GAClCkkD,kBAAkBlkD,EAAK,CACnByiD,WAAY,QACZhhD,KAAM2+C,aAAaoC,eACnB5nD,QAASqtD,EAAMrtD,UAEnBoiC,EAAOunB,cAGV,GAAmB,UAAf0D,EAAM8C,KACNd,WAAWhQ,KAAKtI,EAAMjnE,QACvBs1B,EAAMpwB,KAAK83E,gBAAgB/V,EAAO3xC,GAClCkkD,kBAAkBlkD,EAAK,CACnByiD,WAAY,QACZhhD,KAAM2+C,aAAaoC,eACnB5nD,QAASqtD,EAAMrtD,UAEnBoiC,EAAOunB,cAGV,GAAmB,SAAf0D,EAAM8C,KACNhB,UAAU9P,KAAKtI,EAAMjnE,QACtBs1B,EAAMpwB,KAAK83E,gBAAgB/V,EAAO3xC,GAClCkkD,kBAAkBlkD,EAAK,CACnByiD,WAAY,OACZhhD,KAAM2+C,aAAaoC,eACnB5nD,QAASqtD,EAAMrtD,UAEnBoiC,EAAOunB,cAGV,GAAmB,SAAf0D,EAAM8C,KACNnB,UAAU3P,KAAKtI,EAAMjnE,QACtBs1B,EAAMpwB,KAAK83E,gBAAgB/V,EAAO3xC,GAClCkkD,kBAAkBlkD,EAAK,CACnByiD,WAAY,OACZhhD,KAAM2+C,aAAaoC,eACnB5nD,QAASqtD,EAAMrtD,UAEnBoiC,EAAOunB,cAGV,GAAmB,UAAf0D,EAAM8C,KACNlB,WAAW5P,KAAKtI,EAAMjnE,QACvBs1B,EAAMpwB,KAAK83E,gBAAgB/V,EAAO3xC,GAClCkkD,kBAAkBlkD,EAAK,CACnByiD,WAAY,QACZhhD,KAAM2+C,aAAaoC,eACnB5nD,QAASqtD,EAAMrtD,UAEnBoiC,EAAOunB,cAGV,GAAmB,SAAf0D,EAAM8C,KACNjB,UAAU7P,KAAKtI,EAAMjnE,QACtBs1B,EAAMpwB,KAAK83E,gBAAgB/V,EAAO3xC,GAClCkkD,kBAAkBlkD,EAAK,CACnByiD,WAAY,OACZhhD,KAAM2+C,aAAaoC,eACnB5nD,QAASqtD,EAAMrtD,UAEnBoiC,EAAOunB,cAGV,GAAmB,QAAf0D,EAAM8C,KACX,IACI,IAAI5sD,IAAIwzC,EAAMjnE,MAElB,MAAOkpE,GACH5zC,EAAMpwB,KAAK83E,gBAAgB/V,EAAO3xC,GAClCkkD,kBAAkBlkD,EAAK,CACnByiD,WAAY,MACZhhD,KAAM2+C,aAAaoC,eACnB5nD,QAASqtD,EAAMrtD,UAEnBoiC,EAAOunB,aAGV,GAAmB,UAAf0D,EAAM8C,KAAkB,CAC7B9C,EAAM2C,MAAMQ,UAAY,EACxB,MAAMC,EAAapD,EAAM2C,MAAM3Q,KAAKtI,EAAMjnE,MACrC2gF,IACDrrD,EAAMpwB,KAAK83E,gBAAgB/V,EAAO3xC,GAClCkkD,kBAAkBlkD,EAAK,CACnByiD,WAAY,QACZhhD,KAAM2+C,aAAaoC,eACnB5nD,QAASqtD,EAAMrtD,UAEnBoiC,EAAOunB,cAGV,GAAmB,SAAf0D,EAAM8C,KACXpZ,EAAMjnE,KAAOinE,EAAMjnE,KAAK0tB,YAEvB,GAAmB,aAAf6vD,EAAM8C,KACNpZ,EAAMjnE,KAAKuX,SAASgmE,EAAM16E,MAAO06E,EAAMl5C,YACxC/O,EAAMpwB,KAAK83E,gBAAgB/V,EAAO3xC,GAClCkkD,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAaoC,eACnBC,WAAY,CAAExgE,SAAUgmE,EAAM16E,MAAOwhC,SAAUk5C,EAAMl5C,UACrDnU,QAASqtD,EAAMrtD,UAEnBoiC,EAAOunB,cAGV,GAAmB,gBAAf0D,EAAM8C,KACXpZ,EAAMjnE,KAAOinE,EAAMjnE,KAAKktB,mBAEvB,GAAmB,gBAAfqwD,EAAM8C,KACXpZ,EAAMjnE,KAAOinE,EAAMjnE,KAAKsgF,mBAEvB,GAAmB,eAAf/C,EAAM8C,KACNpZ,EAAMjnE,KAAKg4E,WAAWuF,EAAM16E,SAC7ByyB,EAAMpwB,KAAK83E,gBAAgB/V,EAAO3xC,GAClCkkD,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAaoC,eACnBC,WAAY,CAAEC,WAAYuF,EAAM16E,OAChCqtB,QAASqtD,EAAMrtD,UAEnBoiC,EAAOunB,cAGV,GAAmB,aAAf0D,EAAM8C,KACNpZ,EAAMjnE,KAAK6tE,SAAS0P,EAAM16E,SAC3ByyB,EAAMpwB,KAAK83E,gBAAgB/V,EAAO3xC,GAClCkkD,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAaoC,eACnBC,WAAY,CAAElK,SAAU0P,EAAM16E,OAC9BqtB,QAASqtD,EAAMrtD,UAEnBoiC,EAAOunB,cAGV,GAAmB,aAAf0D,EAAM8C,KAAqB,CAChC,MAAMH,EAAQR,cAAcnC,GACvB2C,EAAM3Q,KAAKtI,EAAMjnE,QAClBs1B,EAAMpwB,KAAK83E,gBAAgB/V,EAAO3xC,GAClCkkD,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAaoC,eACnBC,WAAY,WACZ7nD,QAASqtD,EAAMrtD,UAEnBoiC,EAAOunB,aAGS,OAAf0D,EAAM8C,KACNR,UAAU5Y,EAAMjnE,KAAMu9E,EAAMwC,WAC7BzqD,EAAMpwB,KAAK83E,gBAAgB/V,EAAO3xC,GAClCkkD,kBAAkBlkD,EAAK,CACnByiD,WAAY,KACZhhD,KAAM2+C,aAAaoC,eACnB5nD,QAASqtD,EAAMrtD,UAEnBoiC,EAAOunB,SAIXhH,KAAKa,YAAY6J,GAGzB,MAAO,CAAEjrB,OAAQA,EAAOzvD,MAAOA,MAAOokE,EAAMjnE,MAEhD4gF,UAAUrD,GACN,OAAO,IAAIyC,UAAU,IACd96E,KAAK42E,KACRsE,OAAQ,IAAIl7E,KAAK42E,KAAKsE,OAAQ7C,KAGtCsD,MAAM3wD,GACF,OAAOhrB,KAAK07E,UAAU,CAAEP,KAAM,WAAYxF,UAAUC,SAAS5qD,KAEjE+H,IAAI/H,GACA,OAAOhrB,KAAK07E,UAAU,CAAEP,KAAM,SAAUxF,UAAUC,SAAS5qD,KAE/D4wD,MAAM5wD,GACF,OAAOhrB,KAAK07E,UAAU,CAAEP,KAAM,WAAYxF,UAAUC,SAAS5qD,KAEjEpc,KAAKoc,GACD,OAAOhrB,KAAK07E,UAAU,CAAEP,KAAM,UAAWxF,UAAUC,SAAS5qD,KAEhE6wD,KAAK7wD,GACD,OAAOhrB,KAAK07E,UAAU,CAAEP,KAAM,UAAWxF,UAAUC,SAAS5qD,KAEhE8wD,MAAM9wD,GACF,OAAOhrB,KAAK07E,UAAU,CAAEP,KAAM,WAAYxF,UAAUC,SAAS5qD,KAEjE+wD,KAAK/wD,GACD,OAAOhrB,KAAK07E,UAAU,CAAEP,KAAM,UAAWxF,UAAUC,SAAS5qD,KAEhE4vD,GAAGn4B,GACC,OAAOziD,KAAK07E,UAAU,CAAEP,KAAM,QAASxF,UAAUC,SAASnzB,KAE9Du5B,SAASv5B,GACL,IAAIuhB,EACJ,MAAuB,kBAAZvhB,EACAziD,KAAK07E,UAAU,CAClBP,KAAM,WACNV,UAAW,KACXz7E,QAAQ,EACRgsB,QAASy3B,IAGVziD,KAAK07E,UAAU,CAClBP,KAAM,WACNV,UAA4F,qBAA7D,OAAZh4B,QAAgC,IAAZA,OAAqB,EAASA,EAAQg4B,WAA6B,KAAmB,OAAZh4B,QAAgC,IAAZA,OAAqB,EAASA,EAAQg4B,UAC3Kz7E,OAAoF,QAA3EglE,EAAiB,OAAZvhB,QAAgC,IAAZA,OAAqB,EAASA,EAAQzjD,cAA2B,IAAPglE,GAAgBA,KACzG2R,UAAUC,SAAqB,OAAZnzB,QAAgC,IAAZA,OAAqB,EAASA,EAAQz3B,WAGxFgwD,MAAMA,EAAOhwD,GACT,OAAOhrB,KAAK07E,UAAU,CAClBP,KAAM,QACNH,MAAOA,KACJrF,UAAUC,SAAS5qD,KAG9B3Y,SAAS1U,EAAO8kD,GACZ,OAAOziD,KAAK07E,UAAU,CAClBP,KAAM,WACNx9E,MAAOA,EACPwhC,SAAsB,OAAZsjB,QAAgC,IAAZA,OAAqB,EAASA,EAAQtjB,YACjEw2C,UAAUC,SAAqB,OAAZnzB,QAAgC,IAAZA,OAAqB,EAASA,EAAQz3B,WAGxF8nD,WAAWn1E,EAAOqtB,GACd,OAAOhrB,KAAK07E,UAAU,CAClBP,KAAM,aACNx9E,MAAOA,KACJg4E,UAAUC,SAAS5qD,KAG9B29C,SAAShrE,EAAOqtB,GACZ,OAAOhrB,KAAK07E,UAAU,CAClBP,KAAM,WACNx9E,MAAOA,KACJg4E,UAAUC,SAAS5qD,KAG9BrZ,IAAIsqE,EAAWjxD,GACX,OAAOhrB,KAAK07E,UAAU,CAClBP,KAAM,MACNx9E,MAAOs+E,KACJtG,UAAUC,SAAS5qD,KAG9BtZ,IAAIwqE,EAAWlxD,GACX,OAAOhrB,KAAK07E,UAAU,CAClBP,KAAM,MACNx9E,MAAOu+E,KACJvG,UAAUC,SAAS5qD,KAG9B1vB,OAAOonC,EAAK1X,GACR,OAAOhrB,KAAK07E,UAAU,CAClBP,KAAM,SACNx9E,MAAO+kC,KACJizC,UAAUC,SAAS5qD,KAG9B,iBACI,QAAShrB,KAAK42E,KAAKsE,OAAOv+D,KAAMw/D,GAAmB,aAAZA,EAAGhB,MAE9C,cACI,QAASn7E,KAAK42E,KAAKsE,OAAOv+D,KAAMw/D,GAAmB,UAAZA,EAAGhB,MAE9C,YACI,QAASn7E,KAAK42E,KAAKsE,OAAOv+D,KAAMw/D,GAAmB,QAAZA,EAAGhB,MAE9C,cACI,QAASn7E,KAAK42E,KAAKsE,OAAOv+D,KAAMw/D,GAAmB,UAAZA,EAAGhB,MAE9C,aACI,QAASn7E,KAAK42E,KAAKsE,OAAOv+D,KAAMw/D,GAAmB,SAAZA,EAAGhB,MAE9C,aACI,QAASn7E,KAAK42E,KAAKsE,OAAOv+D,KAAMw/D,GAAmB,SAAZA,EAAGhB,MAE9C,cACI,QAASn7E,KAAK42E,KAAKsE,OAAOv+D,KAAMw/D,GAAmB,UAAZA,EAAGhB,MAE9C,aACI,QAASn7E,KAAK42E,KAAKsE,OAAOv+D,KAAMw/D,GAAmB,SAAZA,EAAGhB,MAE9C,WACI,QAASn7E,KAAK42E,KAAKsE,OAAOv+D,KAAMw/D,GAAmB,OAAZA,EAAGhB,MAE9C,gBACI,IAAIxpE,EAAM,KACV,IAAK,MAAMwqE,KAAMn8E,KAAK42E,KAAKsE,OACP,QAAZiB,EAAGhB,OACS,OAARxpE,GAAgBwqE,EAAGx+E,MAAQgU,KAC3BA,EAAMwqE,EAAGx+E,OAGrB,OAAOgU,EAEX,gBACI,IAAID,EAAM,KACV,IAAK,MAAMyqE,KAAMn8E,KAAK42E,KAAKsE,OACP,QAAZiB,EAAGhB,OACS,OAARzpE,GAAgByqE,EAAGx+E,MAAQ+T,KAC3BA,EAAMyqE,EAAGx+E,OAGrB,OAAO+T,GAaf,SAAS0qE,mBAAmBl4D,EAAKgf,GAC7B,MAAMm5C,GAAen4D,EAAIghD,WAAWlpD,MAAM,KAAK,IAAM,IAAI1gB,OACnDghF,GAAgBp5C,EAAKgiC,WAAWlpD,MAAM,KAAK,IAAM,IAAI1gB,OACrDihF,EAAWF,EAAcC,EAAeD,EAAcC,EACtDE,EAASv9D,SAASiF,EAAI3O,QAAQgnE,GAAU30D,QAAQ,IAAK,KACrD60D,EAAUx9D,SAASikB,EAAK3tB,QAAQgnE,GAAU30D,QAAQ,IAAK,KAC7D,OAAQ40D,EAASC,EAAWx1E,KAAKgB,IAAI,GAAIs0E,GAhB7CzB,UAAU98E,OAAUqwC,IAChB,IAAI21B,EACJ,OAAO,IAAI8W,UAAU,CACjBI,OAAQ,GACRtC,SAAUC,sBAAsBiC,UAChCO,OAAiF,QAAxErX,EAAgB,OAAX31B,QAA8B,IAAXA,OAAoB,EAASA,EAAOgtC,cAA2B,IAAPrX,GAAgBA,KACtGkS,oBAAoB7nC,MAY/B,MAAMquC,kBAAkBlG,QACpB53E,cACI4B,SAAS6H,WACTrI,KAAK2R,IAAM3R,KAAK28E,IAChB38E,KAAK0R,IAAM1R,KAAK48E,IAChB58E,KAAKkjC,KAAOljC,KAAKwzE,WAErB0E,OAAOnW,GACC/hE,KAAK42E,KAAKyE,SACVtZ,EAAMjnE,KAAOu0E,OAAOtN,EAAMjnE,OAE9B,MAAMi9E,EAAa/3E,KAAK63E,SAAS9V,GACjC,GAAIgW,IAAepI,cAAcI,OAAQ,CACrC,MAAM3/C,EAAMpwB,KAAK83E,gBAAgB/V,GAMjC,OALAuS,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAayB,aACnBE,SAAUxC,cAAcI,OACxBmC,SAAU9hD,EAAI2nD,aAEXjD,QAEX,IAAI1kD,OAAMjxB,EACV,MAAMiuD,EAAS,IAAIsnB,YACnB,IAAK,MAAM2D,KAASr4E,KAAK42E,KAAKsE,OAC1B,GAAmB,QAAf7C,EAAM8C,KACDxN,KAAKyB,UAAUrN,EAAMjnE,QACtBs1B,EAAMpwB,KAAK83E,gBAAgB/V,EAAO3xC,GAClCkkD,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAayB,aACnBE,SAAU,UACVD,SAAU,QACVlnD,QAASqtD,EAAMrtD,UAEnBoiC,EAAOunB,cAGV,GAAmB,QAAf0D,EAAM8C,KAAgB,CAC3B,MAAMI,EAAWlD,EAAMpF,UACjBlR,EAAMjnE,KAAOu9E,EAAM16E,MACnBokE,EAAMjnE,MAAQu9E,EAAM16E,MACtB49E,IACAnrD,EAAMpwB,KAAK83E,gBAAgB/V,EAAO3xC,GAClCkkD,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAauC,UACnBG,QAASmF,EAAM16E,MACf8C,KAAM,SACNwyE,UAAWoF,EAAMpF,UACjBD,OAAO,EACPhoD,QAASqtD,EAAMrtD,UAEnBoiC,EAAOunB,cAGV,GAAmB,QAAf0D,EAAM8C,KAAgB,CAC3B,MAAMG,EAASjD,EAAMpF,UACflR,EAAMjnE,KAAOu9E,EAAM16E,MACnBokE,EAAMjnE,MAAQu9E,EAAM16E,MACtB29E,IACAlrD,EAAMpwB,KAAK83E,gBAAgB/V,EAAO3xC,GAClCkkD,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAa2C,QACnBC,QAASiF,EAAM16E,MACf8C,KAAM,SACNwyE,UAAWoF,EAAMpF,UACjBD,OAAO,EACPhoD,QAASqtD,EAAMrtD,UAEnBoiC,EAAOunB,aAGS,eAAf0D,EAAM8C,KACyC,IAAhDiB,mBAAmBra,EAAMjnE,KAAMu9E,EAAM16E,SACrCyyB,EAAMpwB,KAAK83E,gBAAgB/V,EAAO3xC,GAClCkkD,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAa+C,gBACnBC,WAAY6E,EAAM16E,MAClBqtB,QAASqtD,EAAMrtD,UAEnBoiC,EAAOunB,SAGS,WAAf0D,EAAM8C,KACN9L,OAAOC,SAASvN,EAAMjnE,QACvBs1B,EAAMpwB,KAAK83E,gBAAgB/V,EAAO3xC,GAClCkkD,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAaiD,WACnBzoD,QAASqtD,EAAMrtD,UAEnBoiC,EAAOunB,SAIXhH,KAAKa,YAAY6J,GAGzB,MAAO,CAAEjrB,OAAQA,EAAOzvD,MAAOA,MAAOokE,EAAMjnE,MAEhD6hF,IAAIh/E,EAAOqtB,GACP,OAAOhrB,KAAK68E,SAAS,MAAOl/E,GAAO,EAAMg4E,UAAUzQ,SAASl6C,IAEhE8xD,GAAGn/E,EAAOqtB,GACN,OAAOhrB,KAAK68E,SAAS,MAAOl/E,GAAO,EAAOg4E,UAAUzQ,SAASl6C,IAEjE4xD,IAAIj/E,EAAOqtB,GACP,OAAOhrB,KAAK68E,SAAS,MAAOl/E,GAAO,EAAMg4E,UAAUzQ,SAASl6C,IAEhE+xD,GAAGp/E,EAAOqtB,GACN,OAAOhrB,KAAK68E,SAAS,MAAOl/E,GAAO,EAAOg4E,UAAUzQ,SAASl6C,IAEjE6xD,SAAS1B,EAAMx9E,EAAOs1E,EAAWjoD,GAC7B,OAAO,IAAI0xD,UAAU,IACd18E,KAAK42E,KACRsE,OAAQ,IACDl7E,KAAK42E,KAAKsE,OACb,CACIC,OACAx9E,QACAs1E,YACAjoD,QAAS2qD,UAAUzQ,SAASl6C,OAK5C0wD,UAAUrD,GACN,OAAO,IAAIqE,UAAU,IACd18E,KAAK42E,KACRsE,OAAQ,IAAIl7E,KAAK42E,KAAKsE,OAAQ7C,KAGtC2E,IAAIhyD,GACA,OAAOhrB,KAAK07E,UAAU,CAClBP,KAAM,MACNnwD,QAAS2qD,UAAUzQ,SAASl6C,KAGpCiyD,SAASjyD,GACL,OAAOhrB,KAAK07E,UAAU,CAClBP,KAAM,MACNx9E,MAAO,EACPs1E,WAAW,EACXjoD,QAAS2qD,UAAUzQ,SAASl6C,KAGpCkyD,SAASlyD,GACL,OAAOhrB,KAAK07E,UAAU,CAClBP,KAAM,MACNx9E,MAAO,EACPs1E,WAAW,EACXjoD,QAAS2qD,UAAUzQ,SAASl6C,KAGpCmyD,YAAYnyD,GACR,OAAOhrB,KAAK07E,UAAU,CAClBP,KAAM,MACNx9E,MAAO,EACPs1E,WAAW,EACXjoD,QAAS2qD,UAAUzQ,SAASl6C,KAGpCoyD,YAAYpyD,GACR,OAAOhrB,KAAK07E,UAAU,CAClBP,KAAM,MACNx9E,MAAO,EACPs1E,WAAW,EACXjoD,QAAS2qD,UAAUzQ,SAASl6C,KAGpCwoD,WAAW71E,EAAOqtB,GACd,OAAOhrB,KAAK07E,UAAU,CAClBP,KAAM,aACNx9E,MAAOA,EACPqtB,QAAS2qD,UAAUzQ,SAASl6C,KAGpCqyD,OAAOryD,GACH,OAAOhrB,KAAK07E,UAAU,CAClBP,KAAM,SACNnwD,QAAS2qD,UAAUzQ,SAASl6C,KAGpCsyD,KAAKtyD,GACD,OAAOhrB,KAAK07E,UAAU,CAClBP,KAAM,MACNlI,WAAW,EACXt1E,MAAO0xE,OAAOkO,iBACdvyD,QAAS2qD,UAAUzQ,SAASl6C,KAC7B0wD,UAAU,CACTP,KAAM,MACNlI,WAAW,EACXt1E,MAAO0xE,OAAOmO,iBACdxyD,QAAS2qD,UAAUzQ,SAASl6C,KAGpC,eACI,IAAIrZ,EAAM,KACV,IAAK,MAAMwqE,KAAMn8E,KAAK42E,KAAKsE,OACP,QAAZiB,EAAGhB,OACS,OAARxpE,GAAgBwqE,EAAGx+E,MAAQgU,KAC3BA,EAAMwqE,EAAGx+E,OAGrB,OAAOgU,EAEX,eACI,IAAID,EAAM,KACV,IAAK,MAAMyqE,KAAMn8E,KAAK42E,KAAKsE,OACP,QAAZiB,EAAGhB,OACS,OAARzpE,GAAgByqE,EAAGx+E,MAAQ+T,KAC3BA,EAAMyqE,EAAGx+E,OAGrB,OAAO+T,EAEX,YACI,QAAS1R,KAAK42E,KAAKsE,OAAOv+D,KAAMw/D,GAAmB,QAAZA,EAAGhB,MACzB,eAAZgB,EAAGhB,MAAyBxN,KAAKyB,UAAU+M,EAAGx+E,QAEvD,eACI,IAAI+T,EAAM,KAAMC,EAAM,KACtB,IAAK,MAAMwqE,KAAMn8E,KAAK42E,KAAKsE,OAAQ,CAC/B,GAAgB,WAAZiB,EAAGhB,MACS,QAAZgB,EAAGhB,MACS,eAAZgB,EAAGhB,KACH,OAAO,EAEU,QAAZgB,EAAGhB,MACI,OAARxpE,GAAgBwqE,EAAGx+E,MAAQgU,KAC3BA,EAAMwqE,EAAGx+E,OAEI,QAAZw+E,EAAGhB,OACI,OAARzpE,GAAgByqE,EAAGx+E,MAAQ+T,KAC3BA,EAAMyqE,EAAGx+E,OAGrB,OAAO0xE,OAAOC,SAAS39D,IAAQ09D,OAAOC,SAAS59D,IAGvDgrE,UAAU1+E,OAAUqwC,GACT,IAAIquC,UAAU,CACjBxB,OAAQ,GACRtC,SAAUC,sBAAsB6D,UAChCrB,QAAoB,OAAXhtC,QAA8B,IAAXA,OAAoB,EAASA,EAAOgtC,UAAW,KACxEnF,oBAAoB7nC,KAG/B,MAAMovC,kBAAkBjH,QACpB53E,cACI4B,SAAS6H,WACTrI,KAAK2R,IAAM3R,KAAK28E,IAChB38E,KAAK0R,IAAM1R,KAAK48E,IAEpB1E,OAAOnW,GACC/hE,KAAK42E,KAAKyE,SACVtZ,EAAMjnE,KAAO4iF,OAAO3b,EAAMjnE,OAE9B,MAAMi9E,EAAa/3E,KAAK63E,SAAS9V,GACjC,GAAIgW,IAAepI,cAAcO,OAAQ,CACrC,MAAM9/C,EAAMpwB,KAAK83E,gBAAgB/V,GAMjC,OALAuS,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAayB,aACnBE,SAAUxC,cAAcO,OACxBgC,SAAU9hD,EAAI2nD,aAEXjD,QAEX,IAAI1kD,OAAMjxB,EACV,MAAMiuD,EAAS,IAAIsnB,YACnB,IAAK,MAAM2D,KAASr4E,KAAK42E,KAAKsE,OAC1B,GAAmB,QAAf7C,EAAM8C,KAAgB,CACtB,MAAMI,EAAWlD,EAAMpF,UACjBlR,EAAMjnE,KAAOu9E,EAAM16E,MACnBokE,EAAMjnE,MAAQu9E,EAAM16E,MACtB49E,IACAnrD,EAAMpwB,KAAK83E,gBAAgB/V,EAAO3xC,GAClCkkD,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAauC,UACnBtyE,KAAM,SACNyyE,QAASmF,EAAM16E,MACfs1E,UAAWoF,EAAMpF,UACjBjoD,QAASqtD,EAAMrtD,UAEnBoiC,EAAOunB,cAGV,GAAmB,QAAf0D,EAAM8C,KAAgB,CAC3B,MAAMG,EAASjD,EAAMpF,UACflR,EAAMjnE,KAAOu9E,EAAM16E,MACnBokE,EAAMjnE,MAAQu9E,EAAM16E,MACtB29E,IACAlrD,EAAMpwB,KAAK83E,gBAAgB/V,EAAO3xC,GAClCkkD,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAa2C,QACnB1yE,KAAM,SACN2yE,QAASiF,EAAM16E,MACfs1E,UAAWoF,EAAMpF,UACjBjoD,QAASqtD,EAAMrtD,UAEnBoiC,EAAOunB,aAGS,eAAf0D,EAAM8C,KACPpZ,EAAMjnE,KAAOu9E,EAAM16E,QAAU+/E,OAAO,KACpCttD,EAAMpwB,KAAK83E,gBAAgB/V,EAAO3xC,GAClCkkD,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAa+C,gBACnBC,WAAY6E,EAAM16E,MAClBqtB,QAASqtD,EAAMrtD,UAEnBoiC,EAAOunB,SAIXhH,KAAKa,YAAY6J,GAGzB,MAAO,CAAEjrB,OAAQA,EAAOzvD,MAAOA,MAAOokE,EAAMjnE,MAEhD6hF,IAAIh/E,EAAOqtB,GACP,OAAOhrB,KAAK68E,SAAS,MAAOl/E,GAAO,EAAMg4E,UAAUzQ,SAASl6C,IAEhE8xD,GAAGn/E,EAAOqtB,GACN,OAAOhrB,KAAK68E,SAAS,MAAOl/E,GAAO,EAAOg4E,UAAUzQ,SAASl6C,IAEjE4xD,IAAIj/E,EAAOqtB,GACP,OAAOhrB,KAAK68E,SAAS,MAAOl/E,GAAO,EAAMg4E,UAAUzQ,SAASl6C,IAEhE+xD,GAAGp/E,EAAOqtB,GACN,OAAOhrB,KAAK68E,SAAS,MAAOl/E,GAAO,EAAOg4E,UAAUzQ,SAASl6C,IAEjE6xD,SAAS1B,EAAMx9E,EAAOs1E,EAAWjoD,GAC7B,OAAO,IAAIyyD,UAAU,IACdz9E,KAAK42E,KACRsE,OAAQ,IACDl7E,KAAK42E,KAAKsE,OACb,CACIC,OACAx9E,QACAs1E,YACAjoD,QAAS2qD,UAAUzQ,SAASl6C,OAK5C0wD,UAAUrD,GACN,OAAO,IAAIoF,UAAU,IACdz9E,KAAK42E,KACRsE,OAAQ,IAAIl7E,KAAK42E,KAAKsE,OAAQ7C,KAGtC4E,SAASjyD,GACL,OAAOhrB,KAAK07E,UAAU,CAClBP,KAAM,MACNx9E,MAAO+/E,OAAO,GACdzK,WAAW,EACXjoD,QAAS2qD,UAAUzQ,SAASl6C,KAGpCkyD,SAASlyD,GACL,OAAOhrB,KAAK07E,UAAU,CAClBP,KAAM,MACNx9E,MAAO+/E,OAAO,GACdzK,WAAW,EACXjoD,QAAS2qD,UAAUzQ,SAASl6C,KAGpCmyD,YAAYnyD,GACR,OAAOhrB,KAAK07E,UAAU,CAClBP,KAAM,MACNx9E,MAAO+/E,OAAO,GACdzK,WAAW,EACXjoD,QAAS2qD,UAAUzQ,SAASl6C,KAGpCoyD,YAAYpyD,GACR,OAAOhrB,KAAK07E,UAAU,CAClBP,KAAM,MACNx9E,MAAO+/E,OAAO,GACdzK,WAAW,EACXjoD,QAAS2qD,UAAUzQ,SAASl6C,KAGpCwoD,WAAW71E,EAAOqtB,GACd,OAAOhrB,KAAK07E,UAAU,CAClBP,KAAM,aACNx9E,QACAqtB,QAAS2qD,UAAUzQ,SAASl6C,KAGpC,eACI,IAAIrZ,EAAM,KACV,IAAK,MAAMwqE,KAAMn8E,KAAK42E,KAAKsE,OACP,QAAZiB,EAAGhB,OACS,OAARxpE,GAAgBwqE,EAAGx+E,MAAQgU,KAC3BA,EAAMwqE,EAAGx+E,OAGrB,OAAOgU,EAEX,eACI,IAAID,EAAM,KACV,IAAK,MAAMyqE,KAAMn8E,KAAK42E,KAAKsE,OACP,QAAZiB,EAAGhB,OACS,OAARzpE,GAAgByqE,EAAGx+E,MAAQ+T,KAC3BA,EAAMyqE,EAAGx+E,OAGrB,OAAO+T,GAGf+rE,UAAUz/E,OAAUqwC,IAChB,IAAI21B,EACJ,OAAO,IAAIyZ,UAAU,CACjBvC,OAAQ,GACRtC,SAAUC,sBAAsB4E,UAChCpC,OAAiF,QAAxErX,EAAgB,OAAX31B,QAA8B,IAAXA,OAAoB,EAASA,EAAOgtC,cAA2B,IAAPrX,GAAgBA,KACtGkS,oBAAoB7nC,MAG/B,MAAMsvC,mBAAmBnH,QACrB0B,OAAOnW,GACC/hE,KAAK42E,KAAKyE,SACVtZ,EAAMjnE,KAAO8iF,QAAQ7b,EAAMjnE,OAE/B,MAAMi9E,EAAa/3E,KAAK63E,SAAS9V,GACjC,GAAIgW,IAAepI,cAAcK,QAAS,CACtC,MAAM5/C,EAAMpwB,KAAK83E,gBAAgB/V,GAMjC,OALAuS,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAayB,aACnBE,SAAUxC,cAAcK,QACxBkC,SAAU9hD,EAAI2nD,aAEXjD,QAEX,OAAOS,GAAGxT,EAAMjnE,OAGxB6iF,WAAW3/E,OAAUqwC,GACV,IAAIsvC,WAAW,CAClB/E,SAAUC,sBAAsB8E,WAChCtC,QAAoB,OAAXhtC,QAA8B,IAAXA,OAAoB,EAASA,EAAOgtC,UAAW,KACxEnF,oBAAoB7nC,KAG/B,MAAMwvC,gBAAgBrH,QAClB0B,OAAOnW,GACC/hE,KAAK42E,KAAKyE,SACVtZ,EAAMjnE,KAAO,IAAI0lD,KAAKuhB,EAAMjnE,OAEhC,MAAMi9E,EAAa/3E,KAAK63E,SAAS9V,GACjC,GAAIgW,IAAepI,cAAcW,KAAM,CACnC,MAAMlgD,EAAMpwB,KAAK83E,gBAAgB/V,GAMjC,OALAuS,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAayB,aACnBE,SAAUxC,cAAcW,KACxB4B,SAAU9hD,EAAI2nD,aAEXjD,QAEX,GAAIv1E,MAAMwiE,EAAMjnE,KAAKgjF,WAAY,CAC7B,MAAM1tD,EAAMpwB,KAAK83E,gBAAgB/V,GAIjC,OAHAuS,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAamC,eAEhBmC,QAEX,MAAM1nB,EAAS,IAAIsnB,YACnB,IAAItkD,OAAMjxB,EACV,IAAK,MAAMk5E,KAASr4E,KAAK42E,KAAKsE,OACP,QAAf7C,EAAM8C,KACFpZ,EAAMjnE,KAAKgjF,UAAYzF,EAAM16E,QAC7ByyB,EAAMpwB,KAAK83E,gBAAgB/V,EAAO3xC,GAClCkkD,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAauC,UACnB/nD,QAASqtD,EAAMrtD,QACfioD,WAAW,EACXD,OAAO,EACPE,QAASmF,EAAM16E,MACf8C,KAAM,SAEV2sD,EAAOunB,SAGS,QAAf0D,EAAM8C,KACPpZ,EAAMjnE,KAAKgjF,UAAYzF,EAAM16E,QAC7ByyB,EAAMpwB,KAAK83E,gBAAgB/V,EAAO3xC,GAClCkkD,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAa2C,QACnBnoD,QAASqtD,EAAMrtD,QACfioD,WAAW,EACXD,OAAO,EACPI,QAASiF,EAAM16E,MACf8C,KAAM,SAEV2sD,EAAOunB,SAIXhH,KAAKa,YAAY6J,GAGzB,MAAO,CACHjrB,OAAQA,EAAOzvD,MACfA,MAAO,IAAI6iD,KAAKuhB,EAAMjnE,KAAKgjF,YAGnCpC,UAAUrD,GACN,OAAO,IAAIwF,QAAQ,IACZ79E,KAAK42E,KACRsE,OAAQ,IAAIl7E,KAAK42E,KAAKsE,OAAQ7C,KAGtC1mE,IAAIosE,EAAS/yD,GACT,OAAOhrB,KAAK07E,UAAU,CAClBP,KAAM,MACNx9E,MAAOogF,EAAQD,UACf9yD,QAAS2qD,UAAUzQ,SAASl6C,KAGpCtZ,IAAIssE,EAAShzD,GACT,OAAOhrB,KAAK07E,UAAU,CAClBP,KAAM,MACNx9E,MAAOqgF,EAAQF,UACf9yD,QAAS2qD,UAAUzQ,SAASl6C,KAGpC,cACI,IAAIrZ,EAAM,KACV,IAAK,MAAMwqE,KAAMn8E,KAAK42E,KAAKsE,OACP,QAAZiB,EAAGhB,OACS,OAARxpE,GAAgBwqE,EAAGx+E,MAAQgU,KAC3BA,EAAMwqE,EAAGx+E,OAGrB,OAAc,MAAPgU,EAAc,IAAI6uC,KAAK7uC,GAAO,KAEzC,cACI,IAAID,EAAM,KACV,IAAK,MAAMyqE,KAAMn8E,KAAK42E,KAAKsE,OACP,QAAZiB,EAAGhB,OACS,OAARzpE,GAAgByqE,EAAGx+E,MAAQ+T,KAC3BA,EAAMyqE,EAAGx+E,OAGrB,OAAc,MAAP+T,EAAc,IAAI8uC,KAAK9uC,GAAO,MAG7CmsE,QAAQ7/E,OAAUqwC,GACP,IAAIwvC,QAAQ,CACf3C,OAAQ,GACRG,QAAoB,OAAXhtC,QAA8B,IAAXA,OAAoB,EAASA,EAAOgtC,UAAW,EAC3EzC,SAAUC,sBAAsBgF,WAC7B3H,oBAAoB7nC,KAG/B,MAAM4vC,kBAAkBzH,QACpB0B,OAAOnW,GACH,MAAMgW,EAAa/3E,KAAK63E,SAAS9V,GACjC,GAAIgW,IAAepI,cAAcQ,OAAQ,CACrC,MAAM//C,EAAMpwB,KAAK83E,gBAAgB/V,GAMjC,OALAuS,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAayB,aACnBE,SAAUxC,cAAcQ,OACxB+B,SAAU9hD,EAAI2nD,aAEXjD,QAEX,OAAOS,GAAGxT,EAAMjnE,OAGxBmjF,UAAUjgF,OAAUqwC,GACT,IAAI4vC,UAAU,CACjBrF,SAAUC,sBAAsBoF,aAC7B/H,oBAAoB7nC,KAG/B,MAAM6vC,qBAAqB1H,QACvB0B,OAAOnW,GACH,MAAMgW,EAAa/3E,KAAK63E,SAAS9V,GACjC,GAAIgW,IAAepI,cAAcxwE,UAAW,CACxC,MAAMixB,EAAMpwB,KAAK83E,gBAAgB/V,GAMjC,OALAuS,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAayB,aACnBE,SAAUxC,cAAcxwE,UACxB+yE,SAAU9hD,EAAI2nD,aAEXjD,QAEX,OAAOS,GAAGxT,EAAMjnE,OAGxBojF,aAAalgF,OAAUqwC,GACZ,IAAI6vC,aAAa,CACpBtF,SAAUC,sBAAsBqF,gBAC7BhI,oBAAoB7nC,KAG/B,MAAM8vC,gBAAgB3H,QAClB0B,OAAOnW,GACH,MAAMgW,EAAa/3E,KAAK63E,SAAS9V,GACjC,GAAIgW,IAAepI,cAAcS,KAAM,CACnC,MAAMhgD,EAAMpwB,KAAK83E,gBAAgB/V,GAMjC,OALAuS,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAayB,aACnBE,SAAUxC,cAAcS,KACxB8B,SAAU9hD,EAAI2nD,aAEXjD,QAEX,OAAOS,GAAGxT,EAAMjnE,OAGxBqjF,QAAQngF,OAAUqwC,GACP,IAAI8vC,QAAQ,CACfvF,SAAUC,sBAAsBsF,WAC7BjI,oBAAoB7nC,KAG/B,MAAM+vC,eAAe5H,QACjB53E,cACI4B,SAAS6H,WAETrI,KAAKq+E,MAAO,EAEhBnG,OAAOnW,GACH,OAAOwT,GAAGxT,EAAMjnE,OAGxBsjF,OAAOpgF,OAAUqwC,GACN,IAAI+vC,OAAO,CACdxF,SAAUC,sBAAsBuF,UAC7BlI,oBAAoB7nC,KAG/B,MAAMiwC,mBAAmB9H,QACrB53E,cACI4B,SAAS6H,WAETrI,KAAKu+E,UAAW,EAEpBrG,OAAOnW,GACH,OAAOwT,GAAGxT,EAAMjnE,OAGxBwjF,WAAWtgF,OAAUqwC,GACV,IAAIiwC,WAAW,CAClB1F,SAAUC,sBAAsByF,cAC7BpI,oBAAoB7nC,KAG/B,MAAMmwC,iBAAiBhI,QACnB0B,OAAOnW,GACH,MAAM3xC,EAAMpwB,KAAK83E,gBAAgB/V,GAMjC,OALAuS,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAayB,aACnBE,SAAUxC,cAAc8O,MACxBvM,SAAU9hD,EAAI2nD,aAEXjD,SAGf0J,SAASxgF,OAAUqwC,GACR,IAAImwC,SAAS,CAChB5F,SAAUC,sBAAsB2F,YAC7BtI,oBAAoB7nC,KAG/B,MAAMqwC,gBAAgBlI,QAClB0B,OAAOnW,GACH,MAAMgW,EAAa/3E,KAAK63E,SAAS9V,GACjC,GAAIgW,IAAepI,cAAcxwE,UAAW,CACxC,MAAMixB,EAAMpwB,KAAK83E,gBAAgB/V,GAMjC,OALAuS,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAayB,aACnBE,SAAUxC,cAAcgP,KACxBzM,SAAU9hD,EAAI2nD,aAEXjD,QAEX,OAAOS,GAAGxT,EAAMjnE,OAGxB4jF,QAAQ1gF,OAAUqwC,GACP,IAAIqwC,QAAQ,CACf9F,SAAUC,sBAAsB6F,WAC7BxI,oBAAoB7nC,KAG/B,MAAM4qC,iBAAiBzC,QACnB0B,OAAOnW,GACH,MAAM,IAAE3xC,EAAG,OAAEg9B,GAAWptD,KAAKg4E,oBAAoBjW,GAC3C0U,EAAMz2E,KAAK42E,KACjB,GAAIxmD,EAAI2nD,aAAepI,cAAc5sC,MAMjC,OALAuxC,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAayB,aACnBE,SAAUxC,cAAc5sC,MACxBmvC,SAAU9hD,EAAI2nD,aAEXjD,QAEX,GAAwB,OAApB2B,EAAImI,YAAsB,CAC1B,MAAMtD,EAASlrD,EAAIt1B,KAAKQ,OAASm7E,EAAImI,YAAYjhF,MAC3C49E,EAAWnrD,EAAIt1B,KAAKQ,OAASm7E,EAAImI,YAAYjhF,OAC/C29E,GAAUC,KACVjH,kBAAkBlkD,EAAK,CACnByB,KAAMypD,EAAS9K,aAAa2C,QAAU3C,aAAauC,UACnDG,QAAUqI,EAAW9E,EAAImI,YAAYjhF,WAAQwB,EAC7Ci0E,QAAUkI,EAAS7E,EAAImI,YAAYjhF,WAAQwB,EAC3CsB,KAAM,QACNwyE,WAAW,EACXD,OAAO,EACPhoD,QAASyrD,EAAImI,YAAY5zD,UAE7BoiC,EAAOunB,SA6Bf,GA1BsB,OAAlB8B,EAAIwF,WACA7rD,EAAIt1B,KAAKQ,OAASm7E,EAAIwF,UAAUt+E,QAChC22E,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAauC,UACnBG,QAASuD,EAAIwF,UAAUt+E,MACvB8C,KAAM,QACNwyE,WAAW,EACXD,OAAO,EACPhoD,QAASyrD,EAAIwF,UAAUjxD,UAE3BoiC,EAAOunB,SAGO,OAAlB8B,EAAIyF,WACA9rD,EAAIt1B,KAAKQ,OAASm7E,EAAIyF,UAAUv+E,QAChC22E,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAa2C,QACnBC,QAASqD,EAAIyF,UAAUv+E,MACvB8C,KAAM,QACNwyE,WAAW,EACXD,OAAO,EACPhoD,QAASyrD,EAAIyF,UAAUlxD,UAE3BoiC,EAAOunB,SAGXvkD,EAAImkD,OAAO5tB,MACX,OAAOG,QAAQqS,IAAI,IAAI/oC,EAAIt1B,MAAMmJ,IAAI,CAACmP,EAAMhY,IACjCq7E,EAAIh2E,KAAK03E,YAAY,IAAItC,mBAAmBzlD,EAAKhd,EAAMgd,EAAIuc,KAAMvxC,MACxEugB,KAAMxf,GACCu4E,YAAYmK,WAAWzxB,EAAQjxD,IAG9C,MAAMA,EAAS,IAAIi0B,EAAIt1B,MAAMmJ,IAAI,CAACmP,EAAMhY,IAC7Bq7E,EAAIh2E,KAAKw3E,WAAW,IAAIpC,mBAAmBzlD,EAAKhd,EAAMgd,EAAIuc,KAAMvxC,KAE3E,OAAOs5E,YAAYmK,WAAWzxB,EAAQjxD,GAE1C,cACI,OAAO6D,KAAK42E,KAAKn2E,KAErBkR,IAAIsqE,EAAWjxD,GACX,OAAO,IAAIiuD,SAAS,IACbj5E,KAAK42E,KACRqF,UAAW,CAAEt+E,MAAOs+E,EAAWjxD,QAAS2qD,UAAUzQ,SAASl6C,MAGnEtZ,IAAIwqE,EAAWlxD,GACX,OAAO,IAAIiuD,SAAS,IACbj5E,KAAK42E,KACRsF,UAAW,CAAEv+E,MAAOu+E,EAAWlxD,QAAS2qD,UAAUzQ,SAASl6C,MAGnE1vB,OAAOonC,EAAK1X,GACR,OAAO,IAAIiuD,SAAS,IACbj5E,KAAK42E,KACRgI,YAAa,CAAEjhF,MAAO+kC,EAAK1X,QAAS2qD,UAAUzQ,SAASl6C,MAG/DiwD,SAASjwD,GACL,OAAOhrB,KAAK2R,IAAI,EAAGqZ,IAa3B,SAAS8zD,eAAenG,GACpB,GAAIA,aAAkBoG,UAAW,CAC7B,MAAMC,EAAW,GACjB,IAAK,MAAM/gF,KAAO06E,EAAOsG,MAAO,CAC5B,MAAMC,EAAcvG,EAAOsG,MAAMhhF,GACjC+gF,EAAS/gF,GAAO86E,YAAY/6E,OAAO8gF,eAAeI,IAEtD,OAAO,IAAIH,UAAU,IACdpG,EAAO/B,KACVqI,MAAOA,IAAMD,IAGhB,OAAIrG,aAAkBM,SAChB,IAAIA,SAAS,IACbN,EAAO/B,KACVn2E,KAAMq+E,eAAenG,EAAO5mE,WAG3B4mE,aAAkBI,YAChBA,YAAY/6E,OAAO8gF,eAAenG,EAAOwG,WAE3CxG,aAAkBK,YAChBA,YAAYh7E,OAAO8gF,eAAenG,EAAOwG,WAE3CxG,aAAkByG,SAChBA,SAASphF,OAAO26E,EAAO3zE,MAAMf,IAAKmP,GAAS0rE,eAAe1rE,KAG1DulE,EAtCfM,SAASj7E,OAAS,CAAC26E,EAAQtqC,IAChB,IAAI4qC,SAAS,CAChBx4E,KAAMk4E,EACNsD,UAAW,KACXC,UAAW,KACX0C,YAAa,KACbhG,SAAUC,sBAAsBI,YAC7B/C,oBAAoB7nC,KAkC/B,MAAM0wC,kBAAkBvI,QACpB53E,cACI4B,SAAS6H,WACTrI,KAAKq/E,QAAU,KAKfr/E,KAAKs/E,UAAYt/E,KAAKu/E,YAqCtBv/E,KAAKw/E,QAAUx/E,KAAKmT,OAExBssE,aACI,GAAqB,OAAjBz/E,KAAKq/E,QACL,OAAOr/E,KAAKq/E,QAChB,MAAMJ,EAAQj/E,KAAK42E,KAAKqI,QAClBr/E,EAAO+tE,KAAKqB,WAAWiQ,GAC7B,OAAQj/E,KAAKq/E,QAAU,CAAEJ,QAAOr/E,QAEpCs4E,OAAOnW,GACH,MAAMgW,EAAa/3E,KAAK63E,SAAS9V,GACjC,GAAIgW,IAAepI,cAAcvxE,OAAQ,CACrC,MAAMgyB,EAAMpwB,KAAK83E,gBAAgB/V,GAMjC,OALAuS,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAayB,aACnBE,SAAUxC,cAAcvxE,OACxB8zE,SAAU9hD,EAAI2nD,aAEXjD,QAEX,MAAM,OAAE1nB,EAAM,IAAEh9B,GAAQpwB,KAAKg4E,oBAAoBjW,IAC3C,MAAEkd,EAAOr/E,KAAM8/E,GAAc1/E,KAAKy/E,aAClCE,EAAY,GAClB,KAAM3/E,KAAK42E,KAAKgJ,oBAAoBpB,UACN,UAA1Bx+E,KAAK42E,KAAKiJ,aACV,IAAK,MAAM5hF,KAAOmyB,EAAIt1B,KACb4kF,EAAUrtE,SAASpU,IACpB0hF,EAAU/jF,KAAKqC,GAI3B,MAAM82E,EAAQ,GACd,IAAK,MAAM92E,KAAOyhF,EAAW,CACzB,MAAMI,EAAeb,EAAMhhF,GACrBN,EAAQyyB,EAAIt1B,KAAKmD,GACvB82E,EAAMn5E,KAAK,CACPqC,IAAK,CAAEmvD,OAAQ,QAASzvD,MAAOM,GAC/BN,MAAOmiF,EAAa5H,OAAO,IAAIrC,mBAAmBzlD,EAAKzyB,EAAOyyB,EAAIuc,KAAM1uC,IACxEm3E,UAAWn3E,KAAOmyB,EAAIt1B,OAG9B,GAAIkF,KAAK42E,KAAKgJ,oBAAoBpB,SAAU,CACxC,MAAMqB,EAAc7/E,KAAK42E,KAAKiJ,YAC9B,GAAoB,gBAAhBA,EACA,IAAK,MAAM5hF,KAAO0hF,EACd5K,EAAMn5E,KAAK,CACPqC,IAAK,CAAEmvD,OAAQ,QAASzvD,MAAOM,GAC/BN,MAAO,CAAEyvD,OAAQ,QAASzvD,MAAOyyB,EAAIt1B,KAAKmD,WAIjD,GAAoB,WAAhB4hF,EACDF,EAAUrkF,OAAS,IACnBg5E,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAa6B,kBACnBzyE,KAAM+/E,IAEVvyB,EAAOunB,cAGV,GAAoB,UAAhBkL,EAEL,MAAM,IAAIzrB,MAAO,4DAGpB,CAED,MAAMwrB,EAAW5/E,KAAK42E,KAAKgJ,SAC3B,IAAK,MAAM3hF,KAAO0hF,EAAW,CACzB,MAAMhiF,EAAQyyB,EAAIt1B,KAAKmD,GACvB82E,EAAMn5E,KAAK,CACPqC,IAAK,CAAEmvD,OAAQ,QAASzvD,MAAOM,GAC/BN,MAAOiiF,EAAS1H,OAAO,IAAIrC,mBAAmBzlD,EAAKzyB,EAAOyyB,EAAIuc,KAAM1uC,IAEpEm3E,UAAWn3E,KAAOmyB,EAAIt1B,QAIlC,OAAIs1B,EAAImkD,OAAO5tB,MACJG,QAAQC,UACVprC,KAAKgrC,UACN,MAAMquB,EAAY,GAClB,IAAK,MAAMC,KAAQF,EAAO,CACtB,MAAM92E,QAAYg3E,EAAKh3E,IACvB+2E,EAAUp5E,KAAK,CACXqC,MACAN,YAAas3E,EAAKt3E,MAClBy3E,UAAWH,EAAKG,YAGxB,OAAOJ,IAENr5D,KAAMq5D,GACAN,YAAYQ,gBAAgB9nB,EAAQ4nB,IAIxCN,YAAYQ,gBAAgB9nB,EAAQ2nB,GAGnD,YACI,OAAO/0E,KAAK42E,KAAKqI,QAErB5e,OAAOr1C,GAEH,OADA2qD,UAAUC,SACH,IAAImJ,UAAU,IACd/+E,KAAK42E,KACRiJ,YAAa,iBACG1gF,IAAZ6rB,EACE,CACE+mD,SAAUA,CAACX,EAAOhhD,KACd,IAAI4zC,EAAI+b,EAAIv7E,EAAI0pE,EAChB,MAAMwF,EAAgI,QAAhHlvE,EAA0C,QAApCu7E,GAAM/b,EAAKhkE,KAAK42E,MAAM7E,gBAA6B,IAAPgO,OAAgB,EAASA,EAAGrkF,KAAKsoE,EAAIoN,EAAOhhD,GAAKpF,eAA4B,IAAPxmB,EAAgBA,EAAK4rB,EAAIsjD,aACvK,MAAmB,sBAAftC,EAAMv/C,KACC,CACH7G,QAAwD,QAA9CkjD,EAAKyH,UAAUC,SAAS5qD,GAASA,eAA4B,IAAPkjD,EAAgBA,EAAKwF,GAEtF,CACH1oD,QAAS0oD,KAInB,KAGdsM,QACI,OAAO,IAAIjB,UAAU,IACd/+E,KAAK42E,KACRiJ,YAAa,UAGrBN,cACI,OAAO,IAAIR,UAAU,IACd/+E,KAAK42E,KACRiJ,YAAa,gBAoBrB1sE,OAAO8sE,GACH,OAAO,IAAIlB,UAAU,IACd/+E,KAAK42E,KACRqI,MAAOA,KAAA,IACAj/E,KAAK42E,KAAKqI,WACVgB,MASfv1C,MAAMw1C,GACF,MAAMC,EAAS,IAAIpB,UAAU,CACzBc,YAAaK,EAAQtJ,KAAKiJ,YAC1BD,SAAUM,EAAQtJ,KAAKgJ,SACvBX,MAAOA,KAAA,IACAj/E,KAAK42E,KAAKqI,WACViB,EAAQtJ,KAAKqI,UAEpBrG,SAAUC,sBAAsBkG,YAEpC,OAAOoB,EAqCXC,OAAOniF,EAAK06E,GACR,OAAO34E,KAAKw/E,QAAQ,CAAE,CAACvhF,GAAM06E,IAuBjCiH,SAASnqE,GACL,OAAO,IAAIspE,UAAU,IACd/+E,KAAK42E,KACRgJ,SAAUnqE,IAGlB4qE,KAAKt/C,GACD,MAAMk+C,EAAQ,GAMd,OALAtR,KAAKqB,WAAWjuC,GAAM9gC,QAAShC,IACvB8iC,EAAK9iC,IAAQ+B,KAAKi/E,MAAMhhF,KACxBghF,EAAMhhF,GAAO+B,KAAKi/E,MAAMhhF,MAGzB,IAAI8gF,UAAU,IACd/+E,KAAK42E,KACRqI,MAAOA,IAAMA,IAGrBqB,KAAKv/C,GACD,MAAMk+C,EAAQ,GAMd,OALAtR,KAAKqB,WAAWhvE,KAAKi/E,OAAOh/E,QAAShC,IAC5B8iC,EAAK9iC,KACNghF,EAAMhhF,GAAO+B,KAAKi/E,MAAMhhF,MAGzB,IAAI8gF,UAAU,IACd/+E,KAAK42E,KACRqI,MAAOA,IAAMA,IAMrBsB,cACI,OAAOzB,eAAe9+E,MAE1BwgF,QAAQz/C,GACJ,MAAMi+C,EAAW,GAUjB,OATArR,KAAKqB,WAAWhvE,KAAKi/E,OAAOh/E,QAAShC,IACjC,MAAMihF,EAAcl/E,KAAKi/E,MAAMhhF,GAC3B8iC,IAASA,EAAK9iC,GACd+gF,EAAS/gF,GAAOihF,EAGhBF,EAAS/gF,GAAOihF,EAAYhI,aAG7B,IAAI6H,UAAU,IACd/+E,KAAK42E,KACRqI,MAAOA,IAAMD,IAGrBx7E,SAASu9B,GACL,MAAMi+C,EAAW,GAcjB,OAbArR,KAAKqB,WAAWhvE,KAAKi/E,OAAOh/E,QAAShC,IACjC,GAAI8iC,IAASA,EAAK9iC,GACd+gF,EAAS/gF,GAAO+B,KAAKi/E,MAAMhhF,OAE1B,CACD,MAAMihF,EAAcl/E,KAAKi/E,MAAMhhF,GAC/B,IAAIwiF,EAAWvB,EACf,MAAOuB,aAAoB1H,YACvB0H,EAAWA,EAAS7J,KAAK6C,UAE7BuF,EAAS/gF,GAAOwiF,KAGjB,IAAI1B,UAAU,IACd/+E,KAAK42E,KACRqI,MAAOA,IAAMD,IAGrB0B,QACI,OAAOC,cAAchT,KAAKqB,WAAWhvE,KAAKi/E,SAGlDF,UAAU/gF,OAAS,CAACihF,EAAO5wC,IAChB,IAAI0wC,UAAU,CACjBE,MAAOA,IAAMA,EACbY,YAAa,QACbD,SAAUpB,SAASxgF,SACnB46E,SAAUC,sBAAsBkG,aAC7B7I,oBAAoB7nC,KAG/B0wC,UAAU6B,aAAe,CAAC3B,EAAO5wC,IACtB,IAAI0wC,UAAU,CACjBE,MAAOA,IAAMA,EACbY,YAAa,SACbD,SAAUpB,SAASxgF,SACnB46E,SAAUC,sBAAsBkG,aAC7B7I,oBAAoB7nC,KAG/B0wC,UAAU8B,WAAa,CAAC5B,EAAO5wC,IACpB,IAAI0wC,UAAU,CACjBE,QACAY,YAAa,QACbD,SAAUpB,SAASxgF,SACnB46E,SAAUC,sBAAsBkG,aAC7B7I,oBAAoB7nC,KAG/B,MAAM+qC,iBAAiB5C,QACnB0B,OAAOnW,GACH,MAAM,IAAE3xC,GAAQpwB,KAAKg4E,oBAAoBjW,GACnCtf,EAAUziD,KAAK42E,KAAKn0B,QAC1B,SAASq+B,EAAcpwB,GAEnB,IAAK,MAAMv0D,KAAUu0D,EACjB,GAA6B,UAAzBv0D,EAAOA,OAAOixD,OACd,OAAOjxD,EAAOA,OAGtB,IAAK,MAAMA,KAAUu0D,EACjB,GAA6B,UAAzBv0D,EAAOA,OAAOixD,OAGd,OADAh9B,EAAImkD,OAAO5D,OAAO/0E,QAAQO,EAAOi0B,IAAImkD,OAAO5D,QACrCx0E,EAAOA,OAItB,MAAMq1E,EAAc9gB,EAAQzsD,IAAK9H,GAAW,IAAIu0E,SAASv0E,EAAOi0B,IAAImkD,OAAO5D,SAK3E,OAJA2D,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAa8B,cACnBd,gBAEGsD,QAEX,GAAI1kD,EAAImkD,OAAO5tB,MACX,OAAOG,QAAQqS,IAAI1W,EAAQx+C,IAAI0iD,UAC3B,MAAMo6B,EAAW,IACV3wD,EACHmkD,OAAQ,IACDnkD,EAAImkD,OACP5D,OAAQ,IAEZ/5C,OAAQ,MAEZ,MAAO,CACHz6B,aAAcg9E,EAAOhB,YAAY,CAC7Br9E,KAAMs1B,EAAIt1B,KACV6xC,KAAMvc,EAAIuc,KACV/V,OAAQmqD,IAEZ3wD,IAAK2wD,MAETplE,KAAKmlE,GAER,CACD,IAAInM,OAAQx1E,EACZ,MAAMwxE,EAAS,GACf,IAAK,MAAMwI,KAAU12B,EAAS,CAC1B,MAAMs+B,EAAW,IACV3wD,EACHmkD,OAAQ,IACDnkD,EAAImkD,OACP5D,OAAQ,IAEZ/5C,OAAQ,MAENz6B,EAASg9E,EAAOlB,WAAW,CAC7Bn9E,KAAMs1B,EAAIt1B,KACV6xC,KAAMvc,EAAIuc,KACV/V,OAAQmqD,IAEZ,GAAsB,UAAlB5kF,EAAOixD,OACP,OAAOjxD,EAEgB,UAAlBA,EAAOixD,QAAuBunB,IACnCA,EAAQ,CAAEx4E,SAAQi0B,IAAK2wD,IAEvBA,EAASxM,OAAO5D,OAAOr1E,QACvBq1E,EAAO/0E,KAAKmlF,EAASxM,OAAO5D,QAGpC,GAAIgE,EAEA,OADAvkD,EAAImkD,OAAO5D,OAAO/0E,QAAQ+4E,EAAMvkD,IAAImkD,OAAO5D,QACpCgE,EAAMx4E,OAEjB,MAAMq1E,EAAcb,EAAO1sE,IAAK0sE,GAAW,IAAID,SAASC,IAKxD,OAJA2D,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAa8B,cACnBd,gBAEGsD,SAGf,cACI,OAAO90E,KAAK42E,KAAKn0B,SAGzB22B,SAASp7E,OAAS,CAAC0K,EAAO2lC,IACf,IAAI+qC,SAAS,CAChB32B,QAAS/5C,EACTkwE,SAAUC,sBAAsBO,YAC7BlD,oBAAoB7nC,KAU/B,MAAM2yC,iBAAoBvgF,GAClBA,aAAgBwgF,QACTD,iBAAiBvgF,EAAKk4E,QAExBl4E,aAAgBi4E,WACdsI,iBAAiBvgF,EAAKg5E,aAExBh5E,aAAgBygF,WACd,CAACzgF,EAAK9C,OAER8C,aAAgB0gF,QACd1gF,EAAKgiD,QAEPhiD,aAAgB2gF,cAEd7lF,OAAOqE,KAAKa,EAAK4gF,MAEnB5gF,aAAgB+4E,WACdwH,iBAAiBvgF,EAAKm2E,KAAK6C,WAE7Bh5E,aAAgBy9E,aACd,MAAC/+E,GAEHsB,aAAgB09E,QACd,CAAC,MAGD,KAGf,MAAMmD,8BAA8B9K,QAChC0B,OAAOnW,GACH,MAAM,IAAE3xC,GAAQpwB,KAAKg4E,oBAAoBjW,GACzC,GAAI3xC,EAAI2nD,aAAepI,cAAcvxE,OAMjC,OALAk2E,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAayB,aACnBE,SAAUxC,cAAcvxE,OACxB8zE,SAAU9hD,EAAI2nD,aAEXjD,QAEX,MAAMyM,EAAgBvhF,KAAKuhF,cACrBC,EAAqBpxD,EAAIt1B,KAAKymF,GAC9BpI,EAASn5E,KAAKyhF,WAAWlkF,IAAIikF,GACnC,OAAKrI,EAQD/oD,EAAImkD,OAAO5tB,MACJwyB,EAAOhB,YAAY,CACtBr9E,KAAMs1B,EAAIt1B,KACV6xC,KAAMvc,EAAIuc,KACV/V,OAAQxG,IAIL+oD,EAAOlB,WAAW,CACrBn9E,KAAMs1B,EAAIt1B,KACV6xC,KAAMvc,EAAIuc,KACV/V,OAAQxG,KAlBZkkD,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAa+B,4BACnB9vB,QAASr/C,MAAMmZ,KAAKvc,KAAKyhF,WAAW7hF,QACpC+sC,KAAM,CAAC40C,KAEJzM,SAiBf,oBACI,OAAO90E,KAAK42E,KAAK2K,cAErB,cACI,OAAOvhF,KAAK42E,KAAKn0B,QAErB,iBACI,OAAOziD,KAAK42E,KAAK6K,WAUrB,cAAcF,EAAe9+B,EAASpU,GAElC,MAAMozC,EAAa,IAAI7qE,IAEvB,IAAK,MAAMnW,KAAQgiD,EAAS,CACxB,MAAMi/B,EAAsBV,iBAAiBvgF,EAAKw+E,MAAMsC,IACxD,IAAKG,EACD,MAAM,IAAIttB,MAAO,mCAAkCmtB,sDAEvD,IAAK,MAAM5jF,KAAS+jF,EAAqB,CACrC,GAAID,EAAWnyD,IAAI3xB,GACf,MAAM,IAAIy2D,MAAO,0BAAyBsI,OAAO6kB,0BAAsC7kB,OAAO/+D,MAElG8jF,EAAWxgF,IAAItD,EAAO8C,IAG9B,OAAO,IAAI6gF,sBAAsB,CAC7B1I,SAAUC,sBAAsByI,sBAChCC,gBACA9+B,UACAg/B,gBACGvL,oBAAoB7nC,MAInC,SAASszC,YAAYlyD,EAAGC,GACpB,MAAMkyD,EAAQhS,cAAcngD,GACtBoyD,EAAQjS,cAAclgD,GAC5B,GAAID,IAAMC,EACN,MAAO,CAAEu5C,OAAO,EAAMnuE,KAAM20B,GAE3B,GAAImyD,IAAUjS,cAAcvxE,QAAUyjF,IAAUlS,cAAcvxE,OAAQ,CACvE,MAAM0jF,EAAQnU,KAAKqB,WAAWt/C,GACxBqyD,EAAapU,KACdqB,WAAWv/C,GACXprB,OAAQpG,IAAgC,IAAxB6jF,EAAMn5E,QAAQ1K,IAC7B+jF,EAAS,IAAKvyD,KAAMC,GAC1B,IAAK,MAAMzxB,KAAO8jF,EAAY,CAC1B,MAAME,EAAcN,YAAYlyD,EAAExxB,GAAMyxB,EAAEzxB,IAC1C,IAAKgkF,EAAYhZ,MACb,MAAO,CAAEA,OAAO,GAEpB+Y,EAAO/jF,GAAOgkF,EAAYnnF,KAE9B,MAAO,CAAEmuE,OAAO,EAAMnuE,KAAMknF,GAE3B,GAAIJ,IAAUjS,cAAc5sC,OAAS8+C,IAAUlS,cAAc5sC,MAAO,CACrE,GAAItT,EAAEn0B,SAAWo0B,EAAEp0B,OACf,MAAO,CAAE2tE,OAAO,GAEpB,MAAMiZ,EAAW,GACjB,IAAK,IAAIzsE,EAAQ,EAAGA,EAAQga,EAAEn0B,OAAQma,IAAS,CAC3C,MAAM0sE,EAAQ1yD,EAAEha,GACV2sE,EAAQ1yD,EAAEja,GACVwsE,EAAcN,YAAYQ,EAAOC,GACvC,IAAKH,EAAYhZ,MACb,MAAO,CAAEA,OAAO,GAEpBiZ,EAAStmF,KAAKqmF,EAAYnnF,MAE9B,MAAO,CAAEmuE,OAAO,EAAMnuE,KAAMonF,GAE3B,OAAIN,IAAUjS,cAAcW,MAC7BuR,IAAUlS,cAAcW,OACvB7gD,KAAOC,EACD,CAAEu5C,OAAO,EAAMnuE,KAAM20B,GAGrB,CAAEw5C,OAAO,GAGxB,MAAMqQ,wBAAwB9C,QAC1B0B,OAAOnW,GACH,MAAM,OAAE3U,EAAM,IAAEh9B,GAAQpwB,KAAKg4E,oBAAoBjW,GAC3CsgB,EAAeA,CAACC,EAAYC,KAC9B,GAAI/M,UAAU8M,IAAe9M,UAAU+M,GACnC,OAAOzN,QAEX,MAAMqL,EAASwB,YAAYW,EAAW3kF,MAAO4kF,EAAY5kF,OACzD,OAAKwiF,EAAOlX,QAMRwM,QAAQ6M,IAAe7M,QAAQ8M,KAC/Bn1B,EAAOunB,QAEJ,CAAEvnB,OAAQA,EAAOzvD,MAAOA,MAAOwiF,EAAOrlF,QARzCw5E,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAa8C,6BAEhBwB,UAOf,OAAI1kD,EAAImkD,OAAO5tB,MACJG,QAAQqS,IAAI,CACfn5D,KAAK42E,KAAKzvE,KAAKgxE,YAAY,CACvBr9E,KAAMs1B,EAAIt1B,KACV6xC,KAAMvc,EAAIuc,KACV/V,OAAQxG,IAEZpwB,KAAK42E,KAAK7mE,MAAMooE,YAAY,CACxBr9E,KAAMs1B,EAAIt1B,KACV6xC,KAAMvc,EAAIuc,KACV/V,OAAQxG,MAEbzU,KAAK,EAAExU,EAAM4I,KAAWsyE,EAAal7E,EAAM4I,IAGvCsyE,EAAariF,KAAK42E,KAAKzvE,KAAK8wE,WAAW,CAC1Cn9E,KAAMs1B,EAAIt1B,KACV6xC,KAAMvc,EAAIuc,KACV/V,OAAQxG,IACRpwB,KAAK42E,KAAK7mE,MAAMkoE,WAAW,CAC3Bn9E,KAAMs1B,EAAIt1B,KACV6xC,KAAMvc,EAAIuc,KACV/V,OAAQxG,MAKxBkpD,gBAAgBt7E,OAAS,CAACmJ,EAAM4I,EAAOs+B,IAC5B,IAAIirC,gBAAgB,CACvBnyE,KAAMA,EACN4I,MAAOA,EACP6oE,SAAUC,sBAAsBS,mBAC7BpD,oBAAoB7nC,KAG/B,MAAM+wC,iBAAiB5I,QACnB0B,OAAOnW,GACH,MAAM,OAAE3U,EAAM,IAAEh9B,GAAQpwB,KAAKg4E,oBAAoBjW,GACjD,GAAI3xC,EAAI2nD,aAAepI,cAAc5sC,MAMjC,OALAuxC,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAayB,aACnBE,SAAUxC,cAAc5sC,MACxBmvC,SAAU9hD,EAAI2nD,aAEXjD,QAEX,GAAI1kD,EAAIt1B,KAAKQ,OAAS0E,KAAK42E,KAAK5xE,MAAM1J,OAQlC,OAPAg5E,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAauC,UACnBG,QAASlzE,KAAK42E,KAAK5xE,MAAM1J,OACzB23E,WAAW,EACXD,OAAO,EACPvyE,KAAM,UAEHq0E,QAEX,MAAM0N,EAAOxiF,KAAK42E,KAAK4L,MAClBA,GAAQpyD,EAAIt1B,KAAKQ,OAAS0E,KAAK42E,KAAK5xE,MAAM1J,SAC3Cg5E,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAa2C,QACnBC,QAASpzE,KAAK42E,KAAK5xE,MAAM1J,OACzB23E,WAAW,EACXD,OAAO,EACPvyE,KAAM,UAEV2sD,EAAOunB,SAEX,MAAM3vE,EAAQ,IAAIorB,EAAIt1B,MACjBmJ,IAAI,CAACmP,EAAMqvE,KACZ,MAAM9J,EAAS34E,KAAK42E,KAAK5xE,MAAMy9E,IAAcziF,KAAK42E,KAAK4L,KACvD,OAAK7J,EAEEA,EAAOT,OAAO,IAAIrC,mBAAmBzlD,EAAKhd,EAAMgd,EAAIuc,KAAM81C,IADtD,OAGVp+E,OAAQkD,KAAQA,GACrB,OAAI6oB,EAAImkD,OAAO5tB,MACJG,QAAQqS,IAAIn0D,GAAO2W,KAAM+0C,GACrBgkB,YAAYmK,WAAWzxB,EAAQsD,IAInCgkB,YAAYmK,WAAWzxB,EAAQpoD,GAG9C,YACI,OAAOhF,KAAK42E,KAAK5xE,MAErBw9E,KAAKA,GACD,OAAO,IAAIpD,SAAS,IACbp/E,KAAK42E,KACR4L,UAIZpD,SAASphF,OAAS,CAAC0kF,EAASr0C,KACxB,IAAKjrC,MAAMC,QAAQq/E,GACf,MAAM,IAAItuB,MAAM,yDAEpB,OAAO,IAAIgrB,SAAS,CAChBp6E,MAAO09E,EACP9J,SAAUC,sBAAsBuG,SAChCoD,KAAM,QACHtM,oBAAoB7nC,MAG/B,MAAMs0C,kBAAkBnM,QACpB,gBACI,OAAOx2E,KAAK42E,KAAKgM,QAErB,kBACI,OAAO5iF,KAAK42E,KAAKiM,UAErB3K,OAAOnW,GACH,MAAM,OAAE3U,EAAM,IAAEh9B,GAAQpwB,KAAKg4E,oBAAoBjW,GACjD,GAAI3xC,EAAI2nD,aAAepI,cAAcvxE,OAMjC,OALAk2E,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAayB,aACnBE,SAAUxC,cAAcvxE,OACxB8zE,SAAU9hD,EAAI2nD,aAEXjD,QAEX,MAAMC,EAAQ,GACR6N,EAAU5iF,KAAK42E,KAAKgM,QACpBC,EAAY7iF,KAAK42E,KAAKiM,UAC5B,IAAK,MAAM5kF,KAAOmyB,EAAIt1B,KAClBi6E,EAAMn5E,KAAK,CACPqC,IAAK2kF,EAAQ1K,OAAO,IAAIrC,mBAAmBzlD,EAAKnyB,EAAKmyB,EAAIuc,KAAM1uC,IAC/DN,MAAOklF,EAAU3K,OAAO,IAAIrC,mBAAmBzlD,EAAKA,EAAIt1B,KAAKmD,GAAMmyB,EAAIuc,KAAM1uC,MAGrF,OAAImyB,EAAImkD,OAAO5tB,MACJ+tB,YAAYoO,iBAAiB11B,EAAQ2nB,GAGrCL,YAAYQ,gBAAgB9nB,EAAQ2nB,GAGnD,cACI,OAAO/0E,KAAK42E,KAAKiM,UAErB,cAAcpT,EAAOC,EAAQqT,GACzB,OACW,IAAIJ,UADXjT,aAAkB8G,QACG,CACjBoM,QAASnT,EACToT,UAAWnT,EACXkJ,SAAUC,sBAAsB8J,aAC7BzM,oBAAoB6M,IAGV,CACjBH,QAAS9H,UAAU98E,SACnB6kF,UAAWpT,EACXmJ,SAAUC,sBAAsB8J,aAC7BzM,oBAAoBxG,MAInC,MAAMsT,eAAexM,QACjB0B,OAAOnW,GACH,MAAM,OAAE3U,EAAM,IAAEh9B,GAAQpwB,KAAKg4E,oBAAoBjW,GACjD,GAAI3xC,EAAI2nD,aAAepI,cAAc1rE,IAMjC,OALAqwE,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAayB,aACnBE,SAAUxC,cAAc1rE,IACxBiuE,SAAU9hD,EAAI2nD,aAEXjD,QAEX,MAAM8N,EAAU5iF,KAAK42E,KAAKgM,QACpBC,EAAY7iF,KAAK42E,KAAKiM,UACtB9N,EAAQ,IAAI3kD,EAAIt1B,KAAKmoF,WAAWh/E,IAAI,EAAEhG,EAAKN,GAAQ8X,KAC9C,CACHxX,IAAK2kF,EAAQ1K,OAAO,IAAIrC,mBAAmBzlD,EAAKnyB,EAAKmyB,EAAIuc,KAAM,CAACl3B,EAAO,SACvE9X,MAAOklF,EAAU3K,OAAO,IAAIrC,mBAAmBzlD,EAAKzyB,EAAOyyB,EAAIuc,KAAM,CAACl3B,EAAO,cAGrF,GAAI2a,EAAImkD,OAAO5tB,MAAO,CAClB,MAAMu8B,EAAW,IAAItsE,IACrB,OAAOkwC,QAAQC,UAAUprC,KAAKgrC,UAC1B,IAAK,MAAMsuB,KAAQF,EAAO,CACtB,MAAM92E,QAAYg3E,EAAKh3E,IACjBN,QAAcs3E,EAAKt3E,MACzB,GAAmB,YAAfM,EAAImvD,QAAyC,YAAjBzvD,EAAMyvD,OAClC,OAAO0nB,QAEQ,UAAf72E,EAAImvD,QAAuC,UAAjBzvD,EAAMyvD,QAChCA,EAAOunB,QAEXuO,EAASjiF,IAAIhD,EAAIN,MAAOA,EAAMA,OAElC,MAAO,CAAEyvD,OAAQA,EAAOzvD,MAAOA,MAAOulF,KAGzC,CACD,MAAMA,EAAW,IAAItsE,IACrB,IAAK,MAAMq+D,KAAQF,EAAO,CACtB,MAAM92E,EAAMg3E,EAAKh3E,IACXN,EAAQs3E,EAAKt3E,MACnB,GAAmB,YAAfM,EAAImvD,QAAyC,YAAjBzvD,EAAMyvD,OAClC,OAAO0nB,QAEQ,UAAf72E,EAAImvD,QAAuC,UAAjBzvD,EAAMyvD,QAChCA,EAAOunB,QAEXuO,EAASjiF,IAAIhD,EAAIN,MAAOA,EAAMA,OAElC,MAAO,CAAEyvD,OAAQA,EAAOzvD,MAAOA,MAAOulF,KAIlDF,OAAOhlF,OAAS,CAAC4kF,EAASC,EAAWx0C,IAC1B,IAAI20C,OAAO,CACdH,YACAD,UACAhK,SAAUC,sBAAsBmK,UAC7B9M,oBAAoB7nC,KAG/B,MAAM80C,eAAe3M,QACjB0B,OAAOnW,GACH,MAAM,OAAE3U,EAAM,IAAEh9B,GAAQpwB,KAAKg4E,oBAAoBjW,GACjD,GAAI3xC,EAAI2nD,aAAepI,cAAc1uE,IAMjC,OALAqzE,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAayB,aACnBE,SAAUxC,cAAc1uE,IACxBixE,SAAU9hD,EAAI2nD,aAEXjD,QAEX,MAAM2B,EAAMz2E,KAAK42E,KACG,OAAhBH,EAAI2M,SACAhzD,EAAIt1B,KAAKyxB,KAAOkqD,EAAI2M,QAAQzlF,QAC5B22E,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAauC,UACnBG,QAASuD,EAAI2M,QAAQzlF,MACrB8C,KAAM,MACNwyE,WAAW,EACXD,OAAO,EACPhoD,QAASyrD,EAAI2M,QAAQp4D,UAEzBoiC,EAAOunB,SAGK,OAAhB8B,EAAI4M,SACAjzD,EAAIt1B,KAAKyxB,KAAOkqD,EAAI4M,QAAQ1lF,QAC5B22E,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAa2C,QACnBC,QAASqD,EAAI4M,QAAQ1lF,MACrB8C,KAAM,MACNwyE,WAAW,EACXD,OAAO,EACPhoD,QAASyrD,EAAI4M,QAAQr4D,UAEzBoiC,EAAOunB,SAGf,MAAMkO,EAAY7iF,KAAK42E,KAAKiM,UAC5B,SAASS,EAAY1oC,GACjB,MAAM2oC,EAAY,IAAIjiF,IACtB,IAAK,MAAMyQ,KAAW6oC,EAAU,CAC5B,GAAuB,YAAnB7oC,EAAQq7C,OACR,OAAO0nB,QACY,UAAnB/iE,EAAQq7C,QACRA,EAAOunB,QACX4O,EAAU7uD,IAAI3iB,EAAQpU,OAE1B,MAAO,CAAEyvD,OAAQA,EAAOzvD,MAAOA,MAAO4lF,GAE1C,MAAM3oC,EAAW,IAAIxqB,EAAIt1B,KAAKmgC,UAAUh3B,IAAI,CAACmP,EAAMhY,IAAMynF,EAAU3K,OAAO,IAAIrC,mBAAmBzlD,EAAKhd,EAAMgd,EAAIuc,KAAMvxC,KACtH,OAAIg1B,EAAImkD,OAAO5tB,MACJG,QAAQqS,IAAIve,GAAUj/B,KAAMi/B,GAAa0oC,EAAY1oC,IAGrD0oC,EAAY1oC,GAG3BjpC,IAAIyxE,EAASp4D,GACT,OAAO,IAAIm4D,OAAO,IACXnjF,KAAK42E,KACRwM,QAAS,CAAEzlF,MAAOylF,EAASp4D,QAAS2qD,UAAUzQ,SAASl6C,MAG/DtZ,IAAI2xE,EAASr4D,GACT,OAAO,IAAIm4D,OAAO,IACXnjF,KAAK42E,KACRyM,QAAS,CAAE1lF,MAAO0lF,EAASr4D,QAAS2qD,UAAUzQ,SAASl6C,MAG/DuB,KAAKA,EAAMvB,GACP,OAAOhrB,KAAK2R,IAAI4a,EAAMvB,GAAStZ,IAAI6a,EAAMvB,GAE7CiwD,SAASjwD,GACL,OAAOhrB,KAAK2R,IAAI,EAAGqZ,IAG3Bm4D,OAAOnlF,OAAS,CAAC6kF,EAAWx0C,IACjB,IAAI80C,OAAO,CACdN,YACAO,QAAS,KACTC,QAAS,KACTzK,SAAUC,sBAAsBsK,UAC7BjN,oBAAoB7nC,KAG/B,MAAMm1C,oBAAoBhN,QACtB53E,cACI4B,SAAS6H,WACTrI,KAAKyjF,SAAWzjF,KAAK0jF,UAEzBxL,OAAOnW,GACH,MAAM,IAAE3xC,GAAQpwB,KAAKg4E,oBAAoBjW,GACzC,GAAI3xC,EAAI2nD,aAAepI,cAAcM,SAMjC,OALAqE,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAayB,aACnBE,SAAUxC,cAAcM,SACxBiC,SAAU9hD,EAAI2nD,aAEXjD,QAEX,SAAS6O,EAAc90C,EAAMrqB,GACzB,OAAOsvD,UAAU,CACbh5E,KAAM+zC,EACNlC,KAAMvc,EAAIuc,KACVonC,UAAW,CACP3jD,EAAImkD,OAAOC,mBACXpkD,EAAIqkD,eACJZ,cACA9B,UACF1tE,OAAQkD,KAAQA,GAClBysE,UAAW,CACPniD,KAAM2+C,aAAaiC,kBACnBf,eAAgBltD,KAI5B,SAASo/D,EAAiBC,EAASr/D,GAC/B,OAAOsvD,UAAU,CACbh5E,KAAM+oF,EACNl3C,KAAMvc,EAAIuc,KACVonC,UAAW,CACP3jD,EAAImkD,OAAOC,mBACXpkD,EAAIqkD,eACJZ,cACA9B,UACF1tE,OAAQkD,KAAQA,GAClBysE,UAAW,CACPniD,KAAM2+C,aAAakC,oBACnBjB,gBAAiBjtD,KAI7B,MAAM6pB,EAAS,CAAE0jC,SAAU3hD,EAAImkD,OAAOC,oBAChCsP,EAAK1zD,EAAIt1B,KACf,OAAIkF,KAAK42E,KAAKiN,mBAAmB3K,WACtB3D,GAAG5uB,SAAU9X,KAChB,MAAMrqB,EAAQ,IAAIksD,SAAS,IACrBqT,QAAmB/jF,KAAK42E,KAAK/nC,KAC9BioC,WAAWjoC,EAAMR,GACjBzyB,MAAOnV,IAER,MADA+d,EAAMosD,SAAS+S,EAAc90C,EAAMpoC,IAC7B+d,IAEJroB,QAAe2nF,KAAMC,GACrBC,QAAsBhkF,KAAK42E,KAAKiN,QAAQjN,KAAKn2E,KAC9Cq2E,WAAW36E,EAAQkyC,GACnBzyB,MAAOnV,IAER,MADA+d,EAAMosD,SAASgT,EAAiBznF,EAAQsK,IAClC+d,IAEV,OAAOw/D,IAIJzO,GAAG,IAAI1mC,KACV,MAAMk1C,EAAa/jF,KAAK42E,KAAK/nC,KAAKgoC,UAAUhoC,EAAMR,GAClD,IAAK01C,EAAWzb,QACZ,MAAM,IAAIoI,SAAS,CAACiT,EAAc90C,EAAMk1C,EAAWv/D,SAEvD,MAAMroB,EAAS2nF,KAAMC,EAAWjpF,MAC1BkpF,EAAgBhkF,KAAK42E,KAAKiN,QAAQhN,UAAU16E,EAAQkyC,GAC1D,IAAK21C,EAAc1b,QACf,MAAM,IAAIoI,SAAS,CAACkT,EAAiBznF,EAAQ6nF,EAAcx/D,SAE/D,OAAOw/D,EAAclpF,OAIjCkH,aACI,OAAOhC,KAAK42E,KAAK/nC,KAErBo1C,aACI,OAAOjkF,KAAK42E,KAAKiN,QAErBh1C,QAAQ7pC,GACJ,OAAO,IAAIw+E,YAAY,IAChBxjF,KAAK42E,KACR/nC,KAAMuwC,SAASphF,OAAOgH,GAAOw9E,KAAKlE,WAAWtgF,YAGrD6lF,QAAQI,GACJ,OAAO,IAAIT,YAAY,IAChBxjF,KAAK42E,KACRiN,QAASI,IAGjBP,UAAUxtD,GACN,MAAMguD,EAAgBlkF,KAAK6qB,MAAMqL,GACjC,OAAOguD,EAEXC,gBAAgBjuD,GACZ,MAAMguD,EAAgBlkF,KAAK6qB,MAAMqL,GACjC,OAAOguD,EAEX,cAAcr1C,EAAMg1C,EAASx1C,GACzB,OAAO,IAAIm1C,YAAY,CACnB30C,KAAOA,GAEDuwC,SAASphF,OAAO,IAAIwkF,KAAKlE,WAAWtgF,UAC1C6lF,QAASA,GAAWvF,WAAWtgF,SAC/B46E,SAAUC,sBAAsB2K,eAC7BtN,oBAAoB7nC,MAInC,MAAM4yC,gBAAgBzK,QAClB,aACI,OAAOx2E,KAAK42E,KAAKz5E,SAErB+6E,OAAOnW,GACH,MAAM,IAAE3xC,GAAQpwB,KAAKg4E,oBAAoBjW,GACnCqiB,EAAapkF,KAAK42E,KAAKz5E,SAC7B,OAAOinF,EAAWlM,OAAO,CAAEp9E,KAAMs1B,EAAIt1B,KAAM6xC,KAAMvc,EAAIuc,KAAM/V,OAAQxG,KAG3E6wD,QAAQjjF,OAAS,CAACb,EAAQkxC,IACf,IAAI4yC,QAAQ,CACf9jF,OAAQA,EACRy7E,SAAUC,sBAAsBoI,WAC7B/K,oBAAoB7nC,KAG/B,MAAM6yC,mBAAmB1K,QACrB0B,OAAOnW,GACH,GAAIA,EAAMjnE,OAASkF,KAAK42E,KAAKj5E,MAAO,CAChC,MAAMyyB,EAAMpwB,KAAK83E,gBAAgB/V,GAMjC,OALAuS,kBAAkBlkD,EAAK,CACnB8hD,SAAU9hD,EAAIt1B,KACd+2B,KAAM2+C,aAAa4B,gBACnBD,SAAUnyE,KAAK42E,KAAKj5E,QAEjBm3E,QAEX,MAAO,CAAE1nB,OAAQ,QAASzvD,MAAOokE,EAAMjnE,MAE3C,YACI,OAAOkF,KAAK42E,KAAKj5E,OAUzB,SAASgjF,cAAc1lD,EAAQoT,GAC3B,OAAO,IAAI8yC,QAAQ,CACflmD,OAAQA,EACR29C,SAAUC,sBAAsBsI,WAC7BjL,oBAAoB7nC,KAX/B6yC,WAAWljF,OAAS,CAACL,EAAO0wC,IACjB,IAAI6yC,WAAW,CAClBvjF,MAAOA,EACPi7E,SAAUC,sBAAsBqI,cAC7BhL,oBAAoB7nC,KAU/B,MAAM8yC,gBAAgB3K,QAClB0B,OAAOnW,GACH,GAA0B,kBAAfA,EAAMjnE,KAAmB,CAChC,MAAMs1B,EAAMpwB,KAAK83E,gBAAgB/V,GAC3BsiB,EAAiBrkF,KAAK42E,KAAK37C,OAMjC,OALAq5C,kBAAkBlkD,EAAK,CACnB+hD,SAAUxE,KAAKe,WAAW2V,GAC1BnS,SAAU9hD,EAAI2nD,WACdlmD,KAAM2+C,aAAayB,eAEhB6C,QAEX,IAA8C,IAA1C90E,KAAK42E,KAAK37C,OAAOtyB,QAAQo5D,EAAMjnE,MAAc,CAC7C,MAAMs1B,EAAMpwB,KAAK83E,gBAAgB/V,GAC3BsiB,EAAiBrkF,KAAK42E,KAAK37C,OAMjC,OALAq5C,kBAAkBlkD,EAAK,CACnB8hD,SAAU9hD,EAAIt1B,KACd+2B,KAAM2+C,aAAagC,mBACnB/vB,QAAS4hC,IAENvP,QAEX,OAAOS,GAAGxT,EAAMjnE,MAEpB,cACI,OAAOkF,KAAK42E,KAAK37C,OAErB,WACI,MAAMqpD,EAAa,GACnB,IAAK,MAAMpgE,KAAOlkB,KAAK42E,KAAK37C,OACxBqpD,EAAWpgE,GAAOA,EAEtB,OAAOogE,EAEX,aACI,MAAMA,EAAa,GACnB,IAAK,MAAMpgE,KAAOlkB,KAAK42E,KAAK37C,OACxBqpD,EAAWpgE,GAAOA,EAEtB,OAAOogE,EAEX,WACI,MAAMA,EAAa,GACnB,IAAK,MAAMpgE,KAAOlkB,KAAK42E,KAAK37C,OACxBqpD,EAAWpgE,GAAOA,EAEtB,OAAOogE,EAEXC,QAAQtpD,GACJ,OAAOkmD,QAAQnjF,OAAOi9B,GAE1BupD,QAAQvpD,GACJ,OAAOkmD,QAAQnjF,OAAOgC,KAAKyiD,QAAQp+C,OAAQogF,IAASxpD,EAAO5oB,SAASoyE,MAG5EtD,QAAQnjF,OAAS2iF,cACjB,MAAMS,sBAAsB5K,QACxB0B,OAAOnW,GACH,MAAM2iB,EAAmB/W,KAAKmB,mBAAmB9uE,KAAK42E,KAAK37C,QACrD7K,EAAMpwB,KAAK83E,gBAAgB/V,GACjC,GAAI3xC,EAAI2nD,aAAepI,cAAcE,QACjCz/C,EAAI2nD,aAAepI,cAAcI,OAAQ,CACzC,MAAMsU,EAAiB1W,KAAKuB,aAAawV,GAMzC,OALApQ,kBAAkBlkD,EAAK,CACnB+hD,SAAUxE,KAAKe,WAAW2V,GAC1BnS,SAAU9hD,EAAI2nD,WACdlmD,KAAM2+C,aAAayB,eAEhB6C,QAEX,IAA8C,IAA1C4P,EAAiB/7E,QAAQo5D,EAAMjnE,MAAc,CAC7C,MAAMupF,EAAiB1W,KAAKuB,aAAawV,GAMzC,OALApQ,kBAAkBlkD,EAAK,CACnB8hD,SAAU9hD,EAAIt1B,KACd+2B,KAAM2+C,aAAagC,mBACnB/vB,QAAS4hC,IAENvP,QAEX,OAAOS,GAAGxT,EAAMjnE,MAEpB,WACI,OAAOkF,KAAK42E,KAAK37C,QAGzBmmD,cAAcpjF,OAAS,CAACi9B,EAAQoT,IACrB,IAAI+yC,cAAc,CACrBnmD,OAAQA,EACR29C,SAAUC,sBAAsBuI,iBAC7BlL,oBAAoB7nC,KAG/B,MAAM6qC,mBAAmB1C,QACrB2I,SACI,OAAOn/E,KAAK42E,KAAKn2E,KAErBy3E,OAAOnW,GACH,MAAM,IAAE3xC,GAAQpwB,KAAKg4E,oBAAoBjW,GACzC,GAAI3xC,EAAI2nD,aAAepI,cAAcU,UACZ,IAArBjgD,EAAImkD,OAAO5tB,MAMX,OALA2tB,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAayB,aACnBE,SAAUxC,cAAcU,QACxB6B,SAAU9hD,EAAI2nD,aAEXjD,QAEX,MAAM6P,EAAcv0D,EAAI2nD,aAAepI,cAAcU,QAC/CjgD,EAAIt1B,KACJgsD,QAAQC,QAAQ32B,EAAIt1B,MAC1B,OAAOy6E,GAAGoP,EAAYhpE,KAAM7gB,GACjBkF,KAAK42E,KAAKn2E,KAAKq2E,WAAWh8E,EAAM,CACnC6xC,KAAMvc,EAAIuc,KACVolC,SAAU3hD,EAAImkD,OAAOC,wBAKrC0E,WAAWl7E,OAAS,CAAC26E,EAAQtqC,IAClB,IAAI6qC,WAAW,CAClBz4E,KAAMk4E,EACNC,SAAUC,sBAAsBK,cAC7BhD,oBAAoB7nC,KAG/B,MAAMqqC,mBAAmBlC,QACrBiD,YACI,OAAOz5E,KAAK42E,KAAK+B,OAErBiM,aACI,OAAO5kF,KAAK42E,KAAK+B,OAAO/B,KAAKgC,WAAaC,sBAAsBH,WAC1D14E,KAAK42E,KAAK+B,OAAOiM,aACjB5kF,KAAK42E,KAAK+B,OAEpBT,OAAOnW,GACH,MAAM,OAAE3U,EAAM,IAAEh9B,GAAQpwB,KAAKg4E,oBAAoBjW,GAC3C+W,EAAS94E,KAAK42E,KAAKkC,QAAU,KACnC,GAAoB,eAAhBA,EAAOr4E,KAAuB,CAC9B,MAAMokF,EAAY/L,EAAO9kD,UAAU5D,EAAIt1B,MACvC,OAAIs1B,EAAImkD,OAAO5tB,MACJG,QAAQC,QAAQ89B,GAAWlpE,KAAMkpE,GAC7B7kF,KAAK42E,KAAK+B,OAAOR,YAAY,CAChCr9E,KAAM+pF,EACNl4C,KAAMvc,EAAIuc,KACV/V,OAAQxG,KAKTpwB,KAAK42E,KAAK+B,OAAOV,WAAW,CAC/Bn9E,KAAM+pF,EACNl4C,KAAMvc,EAAIuc,KACV/V,OAAQxG,IAIpB,MAAM00D,EAAW,CACblU,SAAWmU,IACPzQ,kBAAkBlkD,EAAK20D,GACnBA,EAAIC,MACJ53B,EAAOwnB,QAGPxnB,EAAOunB,SAGf,WACI,OAAOvkD,EAAIuc,OAInB,GADAm4C,EAASlU,SAAWkU,EAASlU,SAAS1yE,KAAK4mF,GACvB,eAAhBhM,EAAOr4E,KAAuB,CAC9B,MAAMwkF,EAAqBC,IAGvB,MAAM/oF,EAAS28E,EAAO9B,WAAWkO,EAAKJ,GACtC,GAAI10D,EAAImkD,OAAO5tB,MACX,OAAOG,QAAQC,QAAQ5qD,GAE3B,GAAIA,aAAkB2qD,QAClB,MAAM,IAAIsN,MAAM,6FAEpB,OAAO8wB,GAEX,IAAyB,IAArB90D,EAAImkD,OAAO5tB,MAAiB,CAC5B,MAAMw+B,EAAQnlF,KAAK42E,KAAK+B,OAAOV,WAAW,CACtCn9E,KAAMs1B,EAAIt1B,KACV6xC,KAAMvc,EAAIuc,KACV/V,OAAQxG,IAEZ,MAAqB,YAAjB+0D,EAAM/3B,OACC0nB,SACU,UAAjBqQ,EAAM/3B,QACNA,EAAOunB,QAEXsQ,EAAkBE,EAAMxnF,OACjB,CAAEyvD,OAAQA,EAAOzvD,MAAOA,MAAOwnF,EAAMxnF,QAG5C,OAAOqC,KAAK42E,KAAK+B,OACZR,YAAY,CAAEr9E,KAAMs1B,EAAIt1B,KAAM6xC,KAAMvc,EAAIuc,KAAM/V,OAAQxG,IACtDzU,KAAMwpE,GACc,YAAjBA,EAAM/3B,OACC0nB,SACU,UAAjBqQ,EAAM/3B,QACNA,EAAOunB,QACJsQ,EAAkBE,EAAMxnF,OAAOge,KAAK,KAChC,CAAEyxC,OAAQA,EAAOzvD,MAAOA,MAAOwnF,EAAMxnF,WAK5D,GAAoB,cAAhBm7E,EAAOr4E,KAAsB,CAC7B,IAAyB,IAArB2vB,EAAImkD,OAAO5tB,MAAiB,CAC5B,MAAMy+B,EAAOplF,KAAK42E,KAAK+B,OAAOV,WAAW,CACrCn9E,KAAMs1B,EAAIt1B,KACV6xC,KAAMvc,EAAIuc,KACV/V,OAAQxG,IAEZ,IAAK9tB,QAAQ8iF,GACT,OAAOA,EACX,MAAMjpF,EAAS28E,EAAO9kD,UAAUoxD,EAAKznF,MAAOmnF,GAC5C,GAAI3oF,aAAkB2qD,QAClB,MAAM,IAAIsN,MAAO,mGAErB,MAAO,CAAEhH,OAAQA,EAAOzvD,MAAOA,MAAOxB,GAGtC,OAAO6D,KAAK42E,KAAK+B,OACZR,YAAY,CAAEr9E,KAAMs1B,EAAIt1B,KAAM6xC,KAAMvc,EAAIuc,KAAM/V,OAAQxG,IACtDzU,KAAMypE,GACF9iF,QAAQ8iF,GAENt+B,QAAQC,QAAQ+xB,EAAO9kD,UAAUoxD,EAAKznF,MAAOmnF,IAAWnpE,KAAMxf,IAAM,CAAQixD,OAAQA,EAAOzvD,MAAOA,MAAOxB,KADrGipF,GAKvBzX,KAAKa,YAAYsK,IAGzBJ,WAAW16E,OAAS,CAAC26E,EAAQG,EAAQzqC,IAC1B,IAAIqqC,WAAW,CAClBC,SACAC,SAAUC,sBAAsBH,WAChCI,YACG5C,oBAAoB7nC,KAG/BqqC,WAAW2M,qBAAuB,CAACC,EAAY3M,EAAQtqC,IAC5C,IAAIqqC,WAAW,CAClBC,SACAG,OAAQ,CAAEr4E,KAAM,aAAcuzB,UAAWsxD,GACzC1M,SAAUC,sBAAsBH,cAC7BxC,oBAAoB7nC,KAG/B,MAAM0qC,oBAAoBvC,QACtB0B,OAAOnW,GACH,MAAMgW,EAAa/3E,KAAK63E,SAAS9V,GACjC,OAAIgW,IAAepI,cAAcxwE,UACtBo2E,QAAGp2E,GAEPa,KAAK42E,KAAK6C,UAAUvB,OAAOnW,GAEtCod,SACI,OAAOn/E,KAAK42E,KAAK6C,WAGzBV,YAAY/6E,OAAS,CAACyC,EAAM4tC,IACjB,IAAI0qC,YAAY,CACnBU,UAAWh5E,EACXm4E,SAAUC,sBAAsBE,eAC7B7C,oBAAoB7nC,KAG/B,MAAM2qC,oBAAoBxC,QACtB0B,OAAOnW,GACH,MAAMgW,EAAa/3E,KAAK63E,SAAS9V,GACjC,OAAIgW,IAAepI,cAAcS,KACtBmF,GAAG,MAEPv1E,KAAK42E,KAAK6C,UAAUvB,OAAOnW,GAEtCod,SACI,OAAOn/E,KAAK42E,KAAK6C,WAGzBT,YAAYh7E,OAAS,CAACyC,EAAM4tC,IACjB,IAAI2qC,YAAY,CACnBS,UAAWh5E,EACXm4E,SAAUC,sBAAsBG,eAC7B9C,oBAAoB7nC,KAG/B,MAAMmrC,mBAAmBhD,QACrB0B,OAAOnW,GACH,MAAM,IAAE3xC,GAAQpwB,KAAKg4E,oBAAoBjW,GACzC,IAAIjnE,EAAOs1B,EAAIt1B,KAIf,OAHIs1B,EAAI2nD,aAAepI,cAAcxwE,YACjCrE,EAAOkF,KAAK42E,KAAKj0E,gBAEd3C,KAAK42E,KAAK6C,UAAUvB,OAAO,CAC9Bp9E,OACA6xC,KAAMvc,EAAIuc,KACV/V,OAAQxG,IAGhBm1D,gBACI,OAAOvlF,KAAK42E,KAAK6C,WAGzBD,WAAWx7E,OAAS,CAACyC,EAAM4tC,IAChB,IAAImrC,WAAW,CAClBC,UAAWh5E,EACXm4E,SAAUC,sBAAsBW,WAChC72E,aAAwC,oBAAnB0rC,EAAOmpC,QACtBnpC,EAAOmpC,QACP,IAAMnpC,EAAOmpC,WAChBtB,oBAAoB7nC,KAG/B,MAAMurC,iBAAiBpD,QACnB0B,OAAOnW,GACH,MAAM,IAAE3xC,GAAQpwB,KAAKg4E,oBAAoBjW,GAEnCyjB,EAAS,IACRp1D,EACHmkD,OAAQ,IACDnkD,EAAImkD,OACP5D,OAAQ,KAGVx0E,EAAS6D,KAAK42E,KAAK6C,UAAUvB,OAAO,CACtCp9E,KAAM0qF,EAAO1qF,KACb6xC,KAAM64C,EAAO74C,KACb/V,OAAQ,IACD4uD,KAGX,OAAI9P,QAAQv5E,GACDA,EAAOwf,KAAMxf,IACT,CACHixD,OAAQ,QACRzvD,MAAyB,UAAlBxB,EAAOixD,OACRjxD,EAAOwB,MACPqC,KAAK42E,KAAKiD,WAAW,CACnB,YACI,OAAO,IAAInJ,SAAS8U,EAAOjR,OAAO5D,SAEtC5O,MAAOyjB,EAAO1qF,UAMvB,CACHsyD,OAAQ,QACRzvD,MAAyB,UAAlBxB,EAAOixD,OACRjxD,EAAOwB,MACPqC,KAAK42E,KAAKiD,WAAW,CACnB,YACI,OAAO,IAAInJ,SAAS8U,EAAOjR,OAAO5D,SAEtC5O,MAAOyjB,EAAO1qF,QAKlC2qF,cACI,OAAOzlF,KAAK42E,KAAK6C,WAGzBG,SAAS57E,OAAS,CAACyC,EAAM4tC,IACd,IAAIurC,SAAS,CAChBH,UAAWh5E,EACXm4E,SAAUC,sBAAsBe,SAChCC,WAAoC,oBAAjBxrC,EAAOzyB,MAAuByyB,EAAOzyB,MAAQ,IAAMyyB,EAAOzyB,SAC1Es6D,oBAAoB7nC,KAG/B,MAAMq3C,eAAelP,QACjB0B,OAAOnW,GACH,MAAMgW,EAAa/3E,KAAK63E,SAAS9V,GACjC,GAAIgW,IAAepI,cAAcG,IAAK,CAClC,MAAM1/C,EAAMpwB,KAAK83E,gBAAgB/V,GAMjC,OALAuS,kBAAkBlkD,EAAK,CACnByB,KAAM2+C,aAAayB,aACnBE,SAAUxC,cAAcG,IACxBoC,SAAU9hD,EAAI2nD,aAEXjD,QAEX,MAAO,CAAE1nB,OAAQ,QAASzvD,MAAOokE,EAAMjnE,OAG/C4qF,OAAO1nF,OAAUqwC,GACN,IAAIq3C,OAAO,CACd9M,SAAUC,sBAAsB6M,UAC7BxP,oBAAoB7nC,KAG/B,MAAMs3C,MAAQloF,OAAO,aACrB,MAAMi8E,mBAAmBlD,QACrB0B,OAAOnW,GACH,MAAM,IAAE3xC,GAAQpwB,KAAKg4E,oBAAoBjW,GACnCjnE,EAAOs1B,EAAIt1B,KACjB,OAAOkF,KAAK42E,KAAKn2E,KAAKy3E,OAAO,CACzBp9E,OACA6xC,KAAMvc,EAAIuc,KACV/V,OAAQxG,IAGhB+uD,SACI,OAAOn/E,KAAK42E,KAAKn2E,MAGzB,MAAMs5E,oBAAoBvD,QACtB0B,OAAOnW,GACH,MAAM,OAAE3U,EAAM,IAAEh9B,GAAQpwB,KAAKg4E,oBAAoBjW,GACjD,GAAI3xC,EAAImkD,OAAO5tB,MAAO,CAClB,MAAMi/B,EAAcj/B,UAChB,MAAMk/B,QAAiB7lF,KAAK42E,KAAKkP,GAAG3N,YAAY,CAC5Cr9E,KAAMs1B,EAAIt1B,KACV6xC,KAAMvc,EAAIuc,KACV/V,OAAQxG,IAEZ,MAAwB,YAApBy1D,EAASz4B,OACF0nB,QACa,UAApB+Q,EAASz4B,QACTA,EAAOunB,QACAW,MAAMuQ,EAASloF,QAGfqC,KAAK42E,KAAKv7D,IAAI88D,YAAY,CAC7Br9E,KAAM+qF,EAASloF,MACfgvC,KAAMvc,EAAIuc,KACV/V,OAAQxG,KAIpB,OAAOw1D,IAEN,CACD,MAAMC,EAAW7lF,KAAK42E,KAAKkP,GAAG7N,WAAW,CACrCn9E,KAAMs1B,EAAIt1B,KACV6xC,KAAMvc,EAAIuc,KACV/V,OAAQxG,IAEZ,MAAwB,YAApBy1D,EAASz4B,OACF0nB,QACa,UAApB+Q,EAASz4B,QACTA,EAAOunB,QACA,CACHvnB,OAAQ,QACRzvD,MAAOkoF,EAASloF,QAIbqC,KAAK42E,KAAKv7D,IAAI48D,WAAW,CAC5Bn9E,KAAM+qF,EAASloF,MACfgvC,KAAMvc,EAAIuc,KACV/V,OAAQxG,KAKxB,cAAcX,EAAGC,GACb,OAAO,IAAIqqD,YAAY,CACnB+L,GAAIr2D,EACJpU,IAAKqU,EACLkpD,SAAUC,sBAAsBkB,eAI5C,MAAM1G,OAASA,CAACgF,EAAOhqC,EAAS,GAWhC22C,IACQ3M,EACO+F,OAAOpgF,SAASi5E,YAAY,CAACn8E,EAAMs1B,KACtC,IAAI4zC,EAAI+b,EACR,IAAK1H,EAAMv9E,GAAO,CACd,MAAMwD,EAAsB,oBAAX+vC,EACXA,EAAOvzC,GACW,kBAAXuzC,EACH,CAAErjB,QAASqjB,GACXA,EACJ03C,EAA0E,QAAhEhG,EAAwB,QAAlB/b,EAAK1lE,EAAE0mF,aAA0B,IAAPhhB,EAAgBA,EAAKghB,SAA0B,IAAPjF,GAAgBA,EAClGiG,EAAkB,kBAAN1nF,EAAiB,CAAE0sB,QAAS1sB,GAAMA,EACpD8xB,EAAIwgD,SAAS,CAAE/+C,KAAM,YAAam0D,EAAIhB,MAAOe,OAGlD3H,OAAOpgF,SAEZioF,KAAO,CACT7nF,OAAQ2gF,UAAU8B,YAEtB,IAAIhI,uBACJ,SAAWA,GACPA,EAAsB,aAAe,YACrCA,EAAsB,aAAe,YACrCA,EAAsB,UAAY,SAClCA,EAAsB,aAAe,YACrCA,EAAsB,cAAgB,aACtCA,EAAsB,WAAa,UACnCA,EAAsB,aAAe,YACrCA,EAAsB,gBAAkB,eACxCA,EAAsB,WAAa,UACnCA,EAAsB,UAAY,SAClCA,EAAsB,cAAgB,aACtCA,EAAsB,YAAc,WACpCA,EAAsB,WAAa,UACnCA,EAAsB,YAAc,WACpCA,EAAsB,aAAe,YACrCA,EAAsB,YAAc,WACpCA,EAAsB,yBAA2B,wBACjDA,EAAsB,mBAAqB,kBAC3CA,EAAsB,YAAc,WACpCA,EAAsB,aAAe,YACrCA,EAAsB,UAAY,SAClCA,EAAsB,UAAY,SAClCA,EAAsB,eAAiB,cACvCA,EAAsB,WAAa,UACnCA,EAAsB,cAAgB,aACtCA,EAAsB,WAAa,UACnCA,EAAsB,cAAgB,aACtCA,EAAsB,iBAAmB,gBACzCA,EAAsB,eAAiB,cACvCA,EAAsB,eAAiB,cACvCA,EAAsB,cAAgB,aACtCA,EAAsB,YAAc,WACpCA,EAAsB,cAAgB,aACtCA,EAAsB,cAAgB,aACtCA,EAAsB,eAAiB,eAnC3C,CAoCGA,wBAA0BA,sBAAwB,KACrD,MAAMqN,eAAiBA,CAEvB/pB,EAAK9tB,EAAS,CACVrjB,QAAU,yBAAwBmxC,EAAIj/D,QACpCm2E,OAAQv4E,GAASA,aAAgBqhE,EAAK9tB,GACtC83C,WAAarL,UAAU98E,OACvBooF,WAAa1J,UAAU1+E,OACvBqoF,QAAUX,OAAO1nF,OACjBsoF,WAAa7I,UAAUz/E,OACvBuoF,YAAc5I,WAAW3/E,OACzBwoF,SAAW3I,QAAQ7/E,OACnByoF,WAAaxI,UAAUjgF,OACvB0oF,cAAgBxI,aAAalgF,OAC7B2oF,SAAWxI,QAAQngF,OACnB4oF,QAAUxI,OAAOpgF,OACjB6oF,YAAcvI,WAAWtgF,OACzB8oF,UAAYtI,SAASxgF,OACrB+oF,SAAWrI,QAAQ1gF,OACnBgpF,UAAY/N,SAASj7E,OACrBipF,WAAalI,UAAU/gF,OACvBkpF,iBAAmBnI,UAAU6B,aAC7BuG,UAAY/N,SAASp7E,OACrBopF,uBAAyB9F,sBAAsBtjF,OAC/CqpF,iBAAmB/N,gBAAgBt7E,OACnCspF,UAAYlI,SAASphF,OACrBupF,WAAa5E,UAAU3kF,OACvBwpF,QAAUxE,OAAOhlF,OACjBypF,QAAUtE,OAAOnlF,OACjB0pF,aAAelE,YAAYxlF,OAC3B2pF,SAAW1G,QAAQjjF,OACnB4pF,YAAc1G,WAAWljF,OACzB6pF,SAAW1G,QAAQnjF,OACnB8pF,eAAiB1G,cAAcpjF,OAC/B+pF,YAAc7O,WAAWl7E,OACzBgqF,YAActP,WAAW16E,OACzBiqF,aAAelP,YAAY/6E,OAC3BkqF,aAAelP,YAAYh7E,OAC3BmqF,eAAiBzP,WAAW2M,qBAC5B+C,aAAerO,YAAY/7E,OAC3BqqF,QAAUA,IAAMlC,aAAajP,WAC7BoR,QAAUA,IAAMlC,aAAalP,WAC7BqR,SAAWA,IAAMhC,cAAcrP,WAC/BmE,OAAS,CACXxL,OAAUkV,GAAQjK,UAAU98E,OAAO,IAAK+mF,EAAK1J,QAAQ,IACrDtL,OAAUgV,GAAQrI,UAAU1+E,OAAO,IAAK+mF,EAAK1J,QAAQ,IACrDrL,QAAW+U,GAAQpH,WAAW3/E,OAAO,IAC9B+mF,EACH1J,QAAQ,IAEZnL,OAAU6U,GAAQtH,UAAUz/E,OAAO,IAAK+mF,EAAK1J,QAAQ,IACrD/K,KAAQyU,GAAQlH,QAAQ7/E,OAAO,IAAK+mF,EAAK1J,QAAQ,KAE/CmN,MAAQ1T,QAEd,IAAI2T,EAAiBltF,OAAO85E,OAAO,CAC/BvS,UAAW,KACX4lB,gBAAiB3W,SACjB6B,YAAaA,YACbC,YAAaA,YACbC,UAAWA,UACXO,WAAYA,WACZC,kBAAmBA,kBACnBI,YAAaA,YACbI,QAASA,QACTQ,MAAOA,MACPC,GAAIA,GACJC,UAAWA,UACXC,QAASA,QACTnzE,QAASA,QACTozE,QAASA,QACT,WAAc,OAAO/H,MACrB,iBAAoB,OAAOC,YAC3B+B,cAAeA,cACfC,cAAeA,cACf4G,QAASA,QACTsE,UAAWA,UACX4B,UAAWA,UACXe,UAAWA,UACXE,WAAYA,WACZE,QAASA,QACTI,UAAWA,UACXC,aAAcA,aACdC,QAASA,QACTC,OAAQA,OACRE,WAAYA,WACZE,SAAUA,SACVE,QAASA,QACTzF,SAAUA,SACV8F,UAAWA,UACX3F,SAAUA,SACVkI,sBAAuBA,sBACvBhI,gBAAiBA,gBACjB8F,SAAUA,SACVuD,UAAWA,UACXK,OAAQA,OACRG,OAAQA,OACRK,YAAaA,YACbvC,QAASA,QACTC,WAAYA,WACZC,QAASA,QACTC,cAAeA,cACflI,WAAYA,WACZR,WAAYA,WACZiQ,eAAgBjQ,WAChBK,YAAaA,YACbC,YAAaA,YACbQ,WAAYA,WACZI,SAAUA,SACV8L,OAAQA,OACRC,MAAOA,MACPjM,WAAYA,WACZK,YAAaA,YACb1G,OAAQA,OACRuV,OAAQpS,QACRqS,UAAWrS,QACXyP,KAAMA,KACN,4BAA+B,OAAOpN,uBACtCwC,OAAQA,OACRyN,IAAKlC,QACL7jD,MAAOikD,UACP9W,OAAQoW,WACRtW,QAASuW,YACTjW,KAAMkW,SACNuC,mBAAoB3B,uBACpBtO,OAAQkP,YACR,KAAQH,SACR,SAAYH,aACZ,WAAcxB,eACd8C,aAAc3B,iBACd4B,KAAMtB,SACNuB,QAAStB,YACT3jF,IAAKujF,QACL1X,IAAKuW,QACL8C,WAAYrB,eACZrJ,MAAOqI,UACP,KAAQH,SACRxP,SAAU+Q,aACVnY,OAAQqW,WACRhoF,OAAQ6oF,WACRsB,SAAUA,SACVD,QAASA,QACTpR,SAAU+Q,aACVI,QAASA,QACTe,SAAUhB,aACV9C,WAAY6C,eACZ9X,QAAS0X,YACT7a,OAAQqa,WACRtmF,IAAKwmF,QACL4B,aAAcnC,iBACdrX,OAAQsW,WACRhW,OAAQsW,WACR6C,YAAatB,YACbuB,MAAOjC,UACP,UAAaZ,cACb8C,MAAOrC,UACP5W,QAASsW,YACT,KAAQE,SACRyB,MAAOA,MACPhY,aAAcA,aACdC,cAAeA,cACfC,SAAUA,WK32HD+Y,eAAiBhB,EAAE5Y,SAASmL,MAAM,QCCzC0O,WAAajB,EAAErqF,OAAO,CAC1BiG,OAAQokF,EAAE5Y,WAGN8Z,eAAiBlB,EAAErqF,OAAO,CAC9BwrF,WAAYnB,EAAE5Y,WAGVga,WAAapB,EAAErqF,OAAO,CAC1BiL,OAAQo/E,EAAE5Y,WAGNia,cAAgBrB,EAAErqF,OAAO,CAC7BmL,UAAWk/E,EAAE5Y,WAGTka,SAAWtB,EAAErqF,OAAO,CACxB4rF,OAAQvB,EAAE5Y,SACVtgD,MAAOk5D,EAAEe,MAAM,CACbf,EAAES,QAAQ,OACVT,EAAES,QAAQ,QACVT,EAAE1lD,MAAM0lD,EAAEe,MAAM,CAACf,EAAE1Y,SAAU0Y,EAAE5Y,cACvB,WAAC,SAGPoa,UAAYxB,EAAErqF,OAAO,CACzB8rF,QAASzB,EAAE5Y,WAGPsa,UAAY1B,EAAErqF,OAAO,CACzBM,MAAO+pF,EAAEe,MAAM,CACbf,EAAE1lD,MAAM0lD,EAAEe,MAAM,CAACf,EAAE1Y,SAAU0Z,kBACxB93E,IAAI,GACJD,IAAI,GACT+2E,EAAE5Y,aAIAua,OAAS3B,EAAErqF,OAAO,CACtBisF,GAAI5B,EAAEe,MAAM,CAACf,EAAE1Y,SAAU0Z,mBAGda,cAAgB7B,EAAEe,MAAM,CACnCE,WACAC,eACAE,WACAC,cACAC,SACAE,UACAE,UACAC,SAGWG,WAAa9B,EAAEe,MAAM,CAChCf,EAAE5Y,SACFya,cACA7B,EAAE1lD,MAAMunD,iBCzDGE,SAAW/B,EAAErqF,OAAO,CAC/BsB,OAAQ+oF,EAAE1Y,SAASp+D,IAAI,GAAGulE,WAC1Bv3E,MAAO8oF,EAAE1Y,SAASp+D,IAAI,GAAGulE,aCCduT,gBAAkBhC,EAAErqF,OAAO,CAEtC8U,GAAIu1E,EAAEe,MAAM,CAACf,EAAE1Y,SAAU0Y,EAAE5Y,WAAWqH,WAEtCv2E,OAAQ8nF,EAAEe,MAAM,CAACe,WAAYd,iBAAiBvS,WAE9Cj4E,SAAUwpF,EAAEe,MAAM,CAACf,EAAE1Y,SAASp+D,IAAI,GAAI83E,iBAAiBvS,WACvDl4E,OAAQypF,EAAEe,MAAM,CAACf,EAAE1Y,SAAU0Z,iBAAiBvS,WAC9Cl4C,QAASypD,EAAEe,MAAM,CAACf,EAAE1Y,SAASp+D,IAAI,GAAI83E,iBAAiBvS,WACtDhb,QAASusB,EAAC,aAAWvR,WACrBh4E,KAAMupF,EAAEe,MAAM,CAACf,EAAES,SAAQ,GAAOsB,SAAUf,iBAAiBvS,aAQhDwT,SAAgCD,gBAAgBt3E,OAAO,CAClE4M,KAAM0oE,EAAEQ,MAAK,kBAAMR,EAAE1lD,MAAM4nD,kBAOhBC,kBAAkDH,gBAAgBt3E,OAAO,CACpF4M,KAAM0oE,EAAEQ,MAAK,kBAAMR,EAAE1lD,MAAM0lD,EAAEe,MAAM,CAACqB,qBAAsBpB,uBAQ/CqB,WAAoCL,gBAAgBt3E,OAAO,CACtE6M,OAAQyoE,EAAEQ,MAAK,kBAAM0B,YAAY5nD,aAMtBgoD,oBAAsDN,gBAAgBt3E,OAAO,CACxF6M,OAAQyoE,EAAEQ,MAAK,kBAAMR,EAAE1lD,MAAM0lD,EAAEe,MAAM,CAACqB,qBAAsBpB,uBAIjDuB,QAAUvC,EAAEO,aACrBP,EAAErqF,OAAO,CACPwM,IAAK69E,EAAEe,MAAM,CAACf,EAAE5Y,SAAU4Z,mBAE5BhB,EAAEvb,OAAOub,EAAE5Y,SAAU4Y,EAAEK,OACvB2B,iBAQSQ,UAAkCR,gBAAgBt3E,OAAO,CACpEiZ,MAAOq8D,EAAEQ,MAAK,kBAAM0B,iBAKTO,mBAAoDT,gBAAgBt3E,OAAO,CACtFiZ,MAAOq8D,EAAEQ,MAAK,kBAAMR,EAAEe,MAAM,CAACqB,qBAAsBpB,sBAQxC0B,YAAsCV,gBAAgBt3E,OAAO,CACxEi4E,QAAS3C,EAAEQ,MAAK,kBAAM0B,eACtBT,QAASzB,EAAE5Y,SAASqH,WACpBn4E,MAAO0pF,EAAE5Y,SAASqH,aAOPmU,qBAAwDZ,gBAAgBt3E,OAAO,CAC1Fi4E,QAAS3C,EAAEQ,MAAK,kBAAMR,EAAEe,MAAM,CAACqB,qBAAsBpB,oBACrDS,QAASzB,EAAEe,MAAM,CAACf,EAAE5Y,SAAU4Z,iBAAiBvS,WAC/Cn4E,MAAO0pF,EAAEe,MAAM,CAACf,EAAC,QAAM,CAAC,YAAa,eAAgBgB,iBAAiBvS,aAI3DyT,YAAclC,EAAEe,MAAM,CACjCkB,SACAI,WACAK,YACAF,UACAD,UAIWH,qBAAuBpC,EAAEe,MAAM,CAC1CoB,kBACAG,oBACAM,qBACAH,mBACAF,UC7GWM,gBAAkB7C,EAAE5Y,SAASmL,MAAM,mCACnCuQ,gBAAkB9C,EAAE5Y,SAASmL,MAAM,uDAEnCwQ,WAAa/C,EAAEe,MAAM,CAChC+B,gBACAD,gBACA7C,EAAErqF,OAAO,CACPoP,MAAO+9E,gBACPE,GAAIhD,EAAE5Y,SAASqH,eCLNwU,gBAAkBjD,EAAEe,MAAM,CACrCf,EAAE1Y,SACF0Y,EAAErqF,OAAO,CACPutF,QAASlD,EAAS,aAAU,YAAC,GAC7BhoF,KAAMgoF,EAAES,QAAQ,UAAS,WAAS,UAClCvrF,MAAO8qF,EAAE1Y,WAEX0Y,EAAErqF,OAAO,CACPutF,QAASlD,EAAS,aAAU,YAAC,GAC7BhoF,KAAMgoF,EAAES,QAAQ,UAChBvrF,MAAO8qF,EAAE1Y,SAASmH,eAIT0U,gBAAkBnD,EAAEe,MAAM,CACrCf,EAAE5Y,SACF4Y,EAAErqF,OAAO,CACPutF,QAASlD,EAAS,aAAU,YAAC,GAC7BhoF,KAAMgoF,EAAES,QAAQ,UAAS,WAAS,UAClCvrF,MAAO8qF,EAAE5Y,WAEX4Y,EAAErqF,OAAO,CACPutF,QAASlD,EAAS,aAAU,YAAC,GAC7BhoF,KAAMgoF,EAAES,QAAQ,UAChBvrF,MAAO8qF,EAAE5Y,SAASqH,eAIT2U,cAAgBpD,EAAEe,MAAM,CACnCf,EAAC,aACDA,EAAErqF,OAAO,CACPutF,QAASlD,EAAS,aAAU,YAAC,GAC7BhoF,KAAMgoF,EAAES,QAAQ,QAAO,WAAS,QAChCvrF,MAAO8qF,EAAS,eAElBA,EAAErqF,OAAO,CACPutF,QAASlD,EAAS,aAAU,YAAC,GAC7BhoF,KAAMgoF,EAAES,QAAQ,QAChBvrF,MAAO8qF,EAAS,aAAGvR,eAIV4U,sBAAwBrD,EAAErqF,OAAO,CAC5CutF,QAASlD,EAAS,aAAU,YAAC,GAC7BhoF,KAAMgoF,EAAES,QAAQ,gBAChBvrF,MAAO8qF,EAAE1lD,MAAM4nD,aAAoB,WAAC,MAGzBoB,iBAAmBtD,EAAErqF,OAAO,CACvCutF,QAASlD,EAAS,aAAU,YAAC,GAC7BhoF,KAAMgoF,EAAES,QAAQ,WAChBvrF,MAAOgtF,YAAYzT,aAGR8U,gBAAkBvD,EAAErqF,OAAO,CACtCutF,QAASlD,EAAS,aAAU,YAAC,GAC7BhoF,KAAMgoF,EAAES,QAAQ,UAChBvrF,MAAO4sF,WAAWrT,aAGP+U,mBAAqBxD,EAAErqF,OAAO,CACzCutF,QAASlD,EAAS,aAAU,YAAC,GAC7BhoF,KAAMgoF,EAAES,QAAQ,aAChBvrF,MAAO2sF,cAAcpT,aAGVgV,cAAgBzD,EAAErqF,OAAO,CACpCutF,QAASlD,EAAS,aAAU,YAAC,GAC7BhoF,KAAMgoF,EAAES,QAAQ,QAChBvrF,MAAO6sF,SAAStT,aAGLiV,UAAY1D,EAAEe,MAAM,CAC/BkC,gBACAE,gBACAC,cACAC,sBACAC,iBACAC,gBACAC,mBACAC,gBChFWE,aAAe3D,EAAErqF,OAAO,CACnClB,KAAMurF,EAAE5Y,SAAgB,WAAC,QACzBwc,QAAS5D,EAAE5Y,SAAgB,WAAC,IAC5Byc,OAAQ7D,EAAE1lD,MAAMyoD,YAAW,WAAS,IACpCe,WAAY9D,EAAE5Y,SAAgB,WAAC,OAC/BxhC,OAAQo6C,EAAEvb,OAAOub,EAAE5Y,SAAUsc,WAAU,WAAS,IAChD9hC,KAAMwgC,uBCXO,SAAS2B,kBAAkB1I,GACxC,OAAgE,IAAzDrf,SAASS,SAASxpE,KAAKooF,GAAIn7E,QAAQ,iBCD7B,SAAS8jF,+BACtB,GAAuB,qBAAZC,UAA4BA,QAAQC,UAAW,OAAO,EACjE,GAAID,QAAQC,UAAUC,KAAM,OAAO,EACnC,GAAqB,oBAAVC,MAAsB,OAAO,EACxC,IAEE,OADAjP,QAAQpiF,UAAUsxF,QAAQpxF,KAAKgxF,QAAQC,UAAU/O,QAAS,IAAI,iBACvD,EACP,MAAOn3E,GACP,OAAO,GCNI,SAASsmF,WAAWC,EAAQn+C,EAAMo+C,GAa/C,OAXEF,WADEN,+BACWC,QAAQC,UAAUzuF,OAElB,SAAoB8uF,EAAQn+C,EAAMo+C,GAC7C,IAAIx9D,EAAI,CAAC,MACTA,EAAE7zB,KAAKK,MAAMwzB,EAAGof,GAChB,IAAIuyB,EAAcqD,SAASvmE,KAAKjC,MAAM+wF,EAAQv9D,GAC1C0xC,EAAW,IAAIC,EAEnB,OADI6rB,GAAOrqB,gBAAezB,EAAU8rB,EAAMzxF,WACnC2lE,GAGJ4rB,WAAW9wF,MAAM,KAAMoM,WCXjB,SAAS6kF,iBAAiBD,GACvC,IAAIE,EAAwB,oBAARv2E,IAAqB,IAAIA,SAAQzX,EAuBrD,OAtBA+tF,iBAAmB,SAA0BD,GAC3C,GAAc,OAAVA,IAAmBT,kBAAiBS,GAAQ,OAAOA,EACvD,GAAqB,oBAAVA,EACT,MAAM,IAAI5rB,UAAU,sDAEtB,GAAsB,qBAAX8rB,EAAwB,CACjC,GAAIA,EAAO79D,IAAI29D,GAAQ,OAAOE,EAAO5vF,IAAI0vF,GACzCE,EAAOlsF,IAAIgsF,EAAOG,GAEpB,SAASA,IACP,OAAOL,WAAUE,EAAO5kF,UAAWm7D,gBAAexjE,MAAMpB,aAU1D,OARAwuF,EAAQ5xF,UAAYD,OAAOyC,OAAOivF,EAAMzxF,UAAW,CACjDoD,YAAa,CACXjB,MAAOyvF,EACP9vF,YAAY,EACZmkE,UAAU,EACVD,cAAc,KAGXoB,gBAAewqB,EAASH,IAE1BC,iBAAiBD,G,qiBC5B1B,IAAaI,UAAU,SAAAC,GAAAvqB,UAAAsqB,EAAAC,GAAA,IAAA7jB,EAAA8jB,gBAAAF,GACrB,SAAAA,EAAsBriE,GAAe,IAAAvlB,EAEb,OAFay7D,gBAAA,KAAAmsB,GACnC5nF,EAAAgkE,EAAA/tE,KAAA,MACA+J,EAAKulB,QAAUA,EAAOvlB,EACvB,OAAAi8D,aAAA2rB,GAJoB,CAIpBH,iBAJ4B94B,Q,qiBCE/B,IAAao5B,gBAAgB,SAAAC,GAAA1qB,UAAAyqB,EAAAC,GAAA,IAAAhkB,EAAAikB,gBAAAF,GAAA,SAAAA,IAAA,OAAAtsB,gBAAA,KAAAssB,GAAA/jB,EAAAxtE,MAAA,KAAAoM,WAS1B,OAT0Bq5D,aAAA8rB,EAAA,OAAAvvF,IAAA,eAAAN,MAC3B,SAAoBoqE,EAAmB4lB,GACrC,IAAM3iE,EAAU,gCAAAhL,OAAgC2tE,EAAK,mCAAA3tE,OACrC+nD,EAAY,KAC5B,OAAO,IAAIylB,EAAgBxiE,KAC5B,CAAA/sB,IAAA,QAAAN,MAED,SAAa6c,GACX,OAAO,IAAIgzE,EAAgB,oBAAsBhzE,OAClDgzE,EAT0B,CAAQH,WCEfO,UAASlsB,cAAA,SAAAksB,IAAA1sB,gBAAA,KAAA0sB,M,qiBCA/B,IAAanqF,gBAAgB,SAAAoqF,GAAA9qB,UAAAt/D,EAAAoqF,GAAA,IAAApkB,EAAAqkB,gBAAArqF,GAG3B,SAAAA,EAAYq0B,GAAgB,IAAAryB,EAEF,OAFEy7D,gBAAA,KAAAz9D,GAC1BgC,EAAAgkE,EAAA/tE,KAAA,MACA+J,EAAKqyB,SAAWA,EAAQryB,EAiBzB,OAhBAi8D,aAAAj+D,EAAA,EAAAxF,IAAA,OAAAV,IAED,WACE,MAAO,WACR,CAAAU,IAAA,UAAAN,MAED,SAAQkG,GACN,OAAOA,EAAUQ,OAAOrE,KAAK83B,YAC9B,CAAA75B,IAAA,WAAAN,MAED,WACE,MAAiB,UAAAqiB,OAAAhgB,KAAK83B,SAAQ,OAC/B,CAAA75B,IAAA,QAAAN,MAED,WACE,OAAO,IAAI8F,EAAgBzD,KAAK83B,cACjCr0B,EAtB0B,CAAQmqF,W,qiBCErC,IAAal6D,cAAc,SAAAm6D,GAAA9qB,UAAArvC,EAAAm6D,GAAA,IAAApkB,EAAAskB,gBAAAr6D,GAMzB,SAAAA,EAAYs2D,GAAmE,IAAAvkF,EAAnD8pB,EAAAlnB,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAA8C,MAGtD,OAH2D64D,gBAAA,KAAAxtC,GAC7EjuB,EAAAgkE,EAAA/tE,KAAA,MACA+J,EAAKukF,OAASA,EACdvkF,EAAK8pB,MAAQA,EAAK9pB,EAoDnB,OAnDAi8D,aAAAhuC,EAAA,EAAAz1B,IAAA,OAAAV,IAED,WACE,MAAO,SACR,CAAAU,IAAA,UAAAN,MAED,SAAQkG,GAA0B,IAAAwlE,EAAA,KAC1B2gB,EAAShqF,KAAKgqF,OACflmF,WAAW,MAAO,aAClBA,WAAW,SAAU,gCACrBA,WAAW,SAAU,WACrBA,WAAW,QAAS,uBACpBA,WAAW,MAAO,UAClBA,WAAW,QAAS,kBACzB4vB,EAAcs6D,OAAOlhB,MAAc,QAAA9sD,OAAAnc,EAA0B,kBAAAmc,OAAAgqE,EAAkB,aAAAhqE,OAAAhgB,KAAKuvB,MAAS,MAG7F,IAFA,IAAMqrB,EAAW/2C,EAAU+2C,SACrBqzC,EAAS,IAAIr3E,IACVqF,EAAM,EAAGA,EAAM2+B,EAASt/C,OAAQ2gB,IAAO,CAC9C,IAAMoT,EAAQurB,EAAS3+B,GACnBte,OAAK,EACT,IACEA,EAAQuwF,aAAWlE,EAAQ36D,EAAOpT,EAAK2+B,EAAU/2C,EAAUkoB,aAC3D,MAAOtlB,GAEP,MADAitB,EAAcs6D,OAAOxpE,MAAM,kCAADxE,OAAmCgqE,EAAmB,cAAAhqE,OAAAqP,EAAU,KAAA5oB,GACpFA,EAERwnF,EAAOhtF,IAAIouB,EAAO1xB,GAEpB,MAAmB,QAAfqC,KAAKuvB,MACA1rB,EAAU2rB,MAAK,SAACC,EAAGC,GAAC,OAAMu+D,EAAO1wF,IAAIkyB,GAAiBw+D,EAAO1wF,IAAImyB,MAChD,SAAf1vB,KAAKuvB,MACP1rB,EAAU2rB,MAAK,SAACC,EAAGC,GAAC,OAAMu+D,EAAO1wF,IAAImyB,GAAiBu+D,EAAO1wF,IAAIkyB,MAC/D0+D,UAAQnuF,KAAKuvB,OACf1rB,EAAU2rB,MAAK,SAACC,EAAGC,GACxB,IAAM0+D,EAAOH,EAAO1wF,IAAIkyB,GAClB4+D,EAAOJ,EAAO1wF,IAAImyB,GAElB4+D,EAAOjlB,EAAK95C,MAAM5mB,QAAQylF,GAC1BG,EAAOllB,EAAK95C,MAAM5mB,QAAQ0lF,GAChC,OAAOC,EAAOC,UAPX,IAWR,CAAAtwF,IAAA,WAAAN,MAED,WACE,MAAe,QAAAqiB,OAAAhgB,KAAKgqF,OAAM,MAAAhqE,OAAKmuE,UAAQnuF,KAAKuvB,OAAM,IAAAvP,OAAOhgB,KAAKuvB,MAAM1H,KAAK,MAAK,KAAM7nB,KAAKuvB,MAAK,OAC/F,CAAAtxB,IAAA,QAAAN,MAED,WACE,OAAO,IAAI+1B,EAAc1zB,KAAKgqF,OAAQhqF,KAAKuvB,WAC5CmE,EA7DwB,CAAQk6D,WAiEnC,SAASM,aAAWM,QACAC,OACAC,QACAC,eACAC,WAClB,OAAOxqF,KAAKoqF,S,qiBArEY96D,cAAAs6D,OAAStgB,cAAcmhB,UAAU,iBCD3D,IAAaC,gBAAgB,SAAAjB,GAAA9qB,UAAA+rB,EAAAjB,GAAA,IAAApkB,EAAAslB,gBAAAD,GAG3B,SAAAA,EAAYh3D,GAAgB,IAAAryB,EAEF,OAFEy7D,gBAAA,KAAA4tB,GAC1BrpF,EAAAgkE,EAAA/tE,KAAA,MACA+J,EAAKqyB,SAAWA,EAAQryB,EAiBzB,OAhBAi8D,aAAAotB,EAAA,EAAA7wF,IAAA,OAAAV,IAED,WACE,MAAO,WACR,CAAAU,IAAA,UAAAN,MAED,SAAQkG,GACN,OAAOA,EAAUwF,OAAOrJ,KAAK83B,YAC9B,CAAA75B,IAAA,WAAAN,MAED,WACE,MAAiB,UAAAqiB,OAAAhgB,KAAK83B,SAAQ,OAC/B,CAAA75B,IAAA,QAAAN,MAED,WACE,OAAO,IAAImxF,EAAgB9uF,KAAK83B,cACjCg3D,EAtB0B,CAAQlB,W,qiBCArC,IAAaoB,mBAAmB,SAAAnB,GAAA9qB,UAAAisB,EAAAnB,GAAA,IAAApkB,EAAAwlB,gBAAAD,GAG9B,SAAAA,EAAYl3D,GAAgB,IAAAryB,EAEF,OAFEy7D,gBAAA,KAAA8tB,GAC1BvpF,EAAAgkE,EAAA/tE,KAAA,MACA+J,EAAKqyB,SAAWA,EAAQryB,EAiBzB,OAhBAi8D,aAAAstB,EAAA,EAAA/wF,IAAA,OAAAV,IAED,WACE,MAAO,cACR,CAAAU,IAAA,UAAAN,MAED,SAAQkG,GACN,OAAOA,EAAU0F,UAAUvJ,KAAK83B,YACjC,CAAA75B,IAAA,WAAAN,MAED,WACE,MAAoB,aAAAqiB,OAAAhgB,KAAK83B,SAAQ,OAClC,CAAA75B,IAAA,QAAAN,MAED,WACE,OAAO,IAAIqxF,EAAmBhvF,KAAK83B,cACpCk3D,EAtB6B,CAAQpB,W,qiBCHxC,IAAasB,eAAe,SAAArB,GAAA9qB,UAAAmsB,EAAArB,GAAA,IAAApkB,EAAA0lB,gBAAAD,GAK1B,SAAAA,EAAYnwF,GAAoE,IAAA0G,EAArDD,EAAA6C,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAAqB,KAAM66B,EAAA76B,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAAsB,KAI1D,OAJ8D64D,gBAAA,KAAAguB,GAC9EzpF,EAAAgkE,EAAA/tE,KAAA,MACA+J,EAAK1G,MAAQA,EACb0G,EAAKD,IAAMA,EACXC,EAAKy9B,KAAOA,EAAIz9B,EAiBjB,OAhBAi8D,aAAAwtB,EAAA,EAAAjxF,IAAA,OAAAV,IAED,WACE,MAAO,UACR,CAAAU,IAAA,UAAAN,MAED,SAAQkG,GACN,OAAOA,EAAUnF,MAAMsB,KAAKjB,MAAOiB,KAAKwF,IAAKxF,KAAKkjC,QACnD,CAAAjlC,IAAA,WAAAN,MAED,WACE,MAAgB,SAAAqiB,OAAAhgB,KAAKjB,MAAU,MAAAihB,OAAAhgB,KAAKwF,IAAG,MAAAwa,OAAKhgB,KAAKkjC,KAAI,OACtD,CAAAjlC,IAAA,QAAAN,MAED,WACE,OAAO,IAAIuxF,EAAelvF,KAAKjB,MAAOiB,KAAKwF,IAAKxF,KAAKkjC,UACtDgsD,EA1ByB,CAAQtB,WCsBpC,SAASwB,WAASzxF,GAChB,IAAI8C,SAAc9C,EAClB,OAAgB,MAATA,IAA0B,UAAR8C,GAA4B,YAARA,GAG/C,IAAA4uF,WAAiBD,W,+CC9BbE,aAAanpB,YACbopB,WAAWF,WAGXG,SAAW,yBACXC,UAAU,oBACVC,SAAS,6BACTC,SAAW,iBAmBf,SAASC,aAAWjyF,GAClB,IAAK4xF,WAAS5xF,GACZ,OAAO,EAIT,IAAI0rD,EAAMimC,aAAW3xF,GACrB,OAAO0rD,GAAOomC,WAAWpmC,GAAOqmC,UAAUrmC,GAAOmmC,UAAYnmC,GAAOsmC,SAGtE,IAAAE,aAAiBD,a,wlBC9BjB,IAAaE,oBAAoB,SAAAjC,GAAA9qB,UAAA+sB,EAAAjC,GAAA,IAAApkB,EAAAsmB,gBAAAD,GAK/B,SAAAA,EAAYE,GAA4B,IAAAvqF,EAEZ,OAFYy7D,gBAAA,KAAA4uB,GACtCrqF,EAAAgkE,EAAA/tE,KAAA,MACA+J,EAAKuqF,UAAYA,EAASvqF,EAuC3B,OAtCAi8D,aAAAouB,EAAA,EAAA7xF,IAAA,OAAAV,IAED,WACE,MAAO,eACR,CAAAU,IAAA,UAAAN,MAED,SAAQkG,GACN,GAAIujE,WAASpnE,KAAKgwF,WAAY,CAC5B,IAAMA,EAAYhwF,KAAKgwF,UAClBlsF,WAAW,MAAO,aAClBA,WAAW,SAAU,gCACrBA,WAAW,SAAU,WACrBA,WAAW,QAAS,uBACpBA,WAAW,MAAO,UAClBA,WAAW,QAAS,kBACnBioB,EAAcloB,EAAUkoB,YAE9B,OADA+jE,EAAoB9B,OAAOlhB,MAAM,aAAD9sD,OAAcnc,EAAS,oBAAAmc,OAAmBgwE,EAAa,MAChFnsF,EAAUQ,QAAO,SAAC4rF,EAAOh0E,EAAKi0E,GACnC,IACE,OAAOC,cAAcH,EAAWC,EAAOh0E,EAAKi0E,EAAQnkE,GACpD,MAAOtlB,GAEP,MADAqpF,EAAoB9B,OAAOxpE,MAAM,+CAADxE,OAAgDgwE,EAAwB,gBAAAhwE,OAAAiwE,EAAU,KAAAxpF,GAC5GA,MAGL,GAAI2pF,aAAWpwF,KAAKgwF,WACzB,OAAOnsF,EAAUQ,OAAOrE,KAAKgwF,WAE7B,MAAM,IAAI57B,MAAM,yDAADp0C,OAA0DhgB,KAAKgwF,cAEjF,CAAA/xF,IAAA,WAAAN,MAED,WACE,MAAqB,cAAAqiB,OAAAhgB,KAAKgwF,UAAS,OACpC,CAAA/xF,IAAA,QAAAN,MAED,WACE,OAAO,IAAImyF,EAAoB9vF,KAAKgwF,eACrCF,EA9C8B,CAAQlC,WAkDzC,SAASuC,cAAcE,cACA5B,OACAC,QACAC,eACAC,WAErB,OADArsF,QAAQyR,IAAIy6E,OAAQC,QAASD,OAAO3zF,KAAMu1F,cAAejsF,KAAKisF,gBACvDjsF,KAAKisF,eAvDYP,oBAAA9B,OAAStgB,cAAcmhB,UAAU,uBCG3D,IAAah7D,OAAM,WAKjB,SAAwCA,IAAA,IAA5By8D,EAAAjoF,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAA0B,GAAE64D,gBAAA,KAAArtC,GAJxC,KAAUy8D,WAAgB,GAElB,KAAUC,WAAoB,KAGpCvwF,KAAKswF,WAAaA,EA4BnB,OA3BA5uB,aAAA7tC,EAAA,EAAA51B,IAAA,gBAAAN,MAED,SAAc6yF,GAAa,IAAAC,GACrBA,EAAA,KAACH,YAAW32B,QAAO19D,MAAAw0F,EAAAlmB,mBAAIimB,EAAMF,eAClC,CAAAryF,IAAA,QAAAN,MAKD,WACE,OAAO,IAAIk2B,EAAO7zB,KAAKswF,WAAWrsF,KAAI,SAAAysF,GAAI,OAAIA,EAAKzuF,cACpD,CAAAhE,IAAA,YAAAV,IAED,WACE,QAAwB4B,IAApBa,KAAKuwF,WACP,MAAM/C,gBAAgBmD,MAAM,6DAG9B,OAAO3wF,KAAKuwF,YACbtvF,IAED,SAActD,GACZqC,KAAKuwF,WAAa5yF,IACnB,CAAAM,IAAA,SAAAN,MAMD,SAAOm6B,GAEL,OADA93B,KAAKswF,WAAW10F,KAAK,IAAIkzF,gBAAgBh3D,IAClC93B,OACR,CAAA/B,IAAA,YAAAN,MAED,SAAUm6B,GAER,OADA93B,KAAKswF,WAAW10F,KAAK,IAAIozF,mBAAmBl3D,IACrC93B,OACR,CAAA/B,IAAA,SAAAN,MAED,SAAOm6B,GAEL,OADA93B,KAAKswF,WAAW10F,KAAK,IAAI6H,gBAAgBq0B,IAClC93B,OACR,CAAA/B,IAAA,aAAAN,MAED,SAAWqyF,GAET,OADAhwF,KAAKswF,WAAW10F,KAAK,IAAIk0F,oBAAoBE,IACtChwF,OACR,CAAA/B,IAAA,OAAAN,MAED,SAAKqsF,GAAmE,IAAnDz6D,EAAAlnB,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAA8C,MAEjE,OADArI,KAAKswF,WAAW10F,KAAK,IAAI83B,cAAcs2D,EAAQz6D,IACxCvvB,OACR,CAAA/B,IAAA,QAAAN,MAED,SAAMoB,GAAoE,IAArDyG,EAAA6C,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAAqB,KAAM66B,EAAA76B,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAAsB,KAEpE,OADArI,KAAKswF,WAAW10F,KAAK,IAAIszF,eAAenwF,EAAOyG,EAAK09B,IAC7CljC,QACR,EAAA/B,IAAA,QAAAN,MAhCD,WAAyC,IAA5B2yF,EAAAjoF,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAA0B,GACrC,OAAO,IAAIwrB,EAAOy8D,OACnBz8D,EAlCgB,GCHnB,SAAS+8D,mBACP5wF,KAAK6wF,SAAW,GAChB7wF,KAAKusB,KAAO,EAGd,IAAAukE,gBAAiBF,iBCoBjB,SAASG,KAAGpzF,EAAO6yF,GACjB,OAAO7yF,IAAU6yF,GAAU7yF,IAAUA,GAAS6yF,IAAUA,EAG1D,IAAAQ,KAAiBD,KCpCbE,KAAKD,KAUT,SAASE,eAAanuD,EAAO9kC,GAC3B,IAAI3C,EAASynC,EAAMznC,OACnB,MAAOA,IACL,GAAI21F,KAAGluD,EAAMznC,GAAQ,GAAI2C,GACvB,OAAO3C,EAGX,OAAQ,EAGV,IAAA61F,cAAiBD,eCpBbE,eAAeD,cAGfE,WAAajuF,MAAM5H,UAGnBgB,OAAS60F,WAAW70F,OAWxB,SAAS80F,kBAAgBrzF,GACvB,IAAInD,EAAOkF,KAAK6wF,SACZp7E,EAAQ27E,eAAat2F,EAAMmD,GAE/B,GAAIwX,EAAQ,EACV,OAAO,EAET,IAAI+lE,EAAY1gF,EAAKQ,OAAS,EAO9B,OANIma,GAAS+lE,EACX1gF,EAAKytE,MAEL/rE,OAAOd,KAAKZ,EAAM2a,EAAO,KAEzBzV,KAAKusB,MACA,EAGT,IAAAglE,iBAAiBD,kBClCbE,eAAeL,cAWnB,SAASM,eAAaxzF,GACpB,IAAInD,EAAOkF,KAAK6wF,SACZp7E,EAAQ+7E,eAAa12F,EAAMmD,GAE/B,OAAOwX,EAAQ,OAAItW,EAAYrE,EAAK2a,GAAO,GAG7C,IAAAi8E,cAAiBD,eClBbE,eAAeR,cAWnB,SAASS,eAAa3zF,GACpB,OAAO0zF,eAAa3xF,KAAK6wF,SAAU5yF,IAAQ,EAG7C,IAAA4zF,cAAiBD,eCfbE,aAAeX,cAYnB,SAASY,eAAa9zF,EAAKN,GACzB,IAAI7C,EAAOkF,KAAK6wF,SACZp7E,EAAQq8E,aAAah3F,EAAMmD,GAQ/B,OANIwX,EAAQ,KACRzV,KAAKusB,KACPzxB,EAAKc,KAAK,CAACqC,EAAKN,KAEhB7C,EAAK2a,GAAO,GAAK9X,EAEZqC,KAGT,IAAAgyF,cAAiBD,eCzBbE,eAAiBnB,gBACjBoB,gBAAkBX,iBAClBY,aAAeT,cACfU,aAAeP,cACfQ,aAAeL,cASnB,SAASM,YAAUrP,GACjB,IAAIxtE,GAAS,EACTna,EAAoB,MAAX2nF,EAAkB,EAAIA,EAAQ3nF,OAE3C0E,KAAK2B,QACL,QAAS8T,EAAQna,EAAQ,CACvB,IAAIi3F,EAAQtP,EAAQxtE,GACpBzV,KAAKiB,IAAIsxF,EAAM,GAAIA,EAAM,KAK7BD,YAAU92F,UAAUmG,MAAQswF,eAC5BK,YAAU92F,UAAU,UAAY02F,gBAChCI,YAAU92F,UAAU+B,IAAM40F,aAC1BG,YAAU92F,UAAU8zB,IAAM8iE,aAC1BE,YAAU92F,UAAUyF,IAAMoxF,aAE1B,IAAAG,WAAiBF,YC/BbG,YAAYD,WAShB,SAASE,eACP1yF,KAAK6wF,SAAW,IAAI4B,YACpBzyF,KAAKusB,KAAO,EAGd,IAAAomE,YAAiBD,aCLjB,SAASE,cAAY30F,GACnB,IAAInD,EAAOkF,KAAK6wF,SACZ10F,EAASrB,EAAK,UAAUmD,GAG5B,OADA+B,KAAKusB,KAAOzxB,EAAKyxB,KACVpwB,EAGT,IAAA02F,aAAiBD,cCRjB,SAASE,WAAS70F,GAChB,OAAO+B,KAAK6wF,SAAStzF,IAAIU,GAG3B,IAAA80F,UAAiBD,WCJjB,SAASE,WAAS/0F,GAChB,OAAO+B,KAAK6wF,SAASvhE,IAAIrxB,GAG3B,IAAAg1F,UAAiBD,WCbbE,OAAOxuB,MAGPyuB,aAAaD,OAAK,sBAEtBE,YAAiBD,aCLbE,WAAaD,YAGbE,WAAc,WAChB,IAAIC,EAAM,SAASC,KAAKH,YAAcA,WAAWzzF,MAAQyzF,WAAWzzF,KAAK6zF,UAAY,IACrF,OAAOF,EAAO,iBAAmBA,EAAO,GAFxB,GAYlB,SAASG,WAASx9D,GAChB,QAASo9D,YAAeA,cAAcp9D,EAGxC,IAAAy9D,UAAiBD,WClBbE,YAAYnvB,SAASjpE,UAGrBq4F,eAAeD,YAAU1uB,SAS7B,SAAS4uB,WAAS59D,GAChB,GAAY,MAARA,EAAc,CAChB,IACE,OAAO29D,eAAan4F,KAAKw6B,GACzB,MAAOzvB,IACT,IACE,OAAQyvB,EAAO,GACf,MAAOzvB,KAEX,MAAO,GAGT,IAAAstF,UAAiBD,WCzBbE,aAAanE,aACboE,SAAWN,UACXO,WAAW7E,WACX8E,WAAWJ,UAMXK,aAAe,sBAGfC,aAAe,8BAGfC,YAAY7vB,SAASjpE,UACrB+4F,cAAch5F,OAAOC,UAGrBg5F,eAAeF,YAAUpvB,SAGzBuvB,iBAAiBF,cAAY94F,eAG7Bi5F,WAAaha,OAAO,IACtB8Z,eAAa94F,KAAK+4F,kBAAgB7sE,QAAQwsE,aAAc,QACvDxsE,QAAQ,yDAA0D,SAAW,KAWhF,SAAS+sE,eAAah3F,GACpB,IAAKu2F,WAASv2F,IAAUs2F,SAASt2F,GAC/B,OAAO,EAET,IAAIi3F,EAAUZ,aAAWr2F,GAAS+2F,WAAaL,aAC/C,OAAOO,EAAQvqB,KAAK8pB,WAASx2F,IAG/B,IAAAk3F,cAAiBF,eCtCjB,SAASG,WAAS12F,EAAQH,GACxB,OAAiB,MAAVG,OAAiBe,EAAYf,EAAOH,GAG7C,IAAA82F,UAAiBD,WCZbE,aAAeH,cACf/pE,SAAWiqE,UAUf,SAASE,YAAU72F,EAAQH,GACzB,IAAIN,EAAQmtB,SAAS1sB,EAAQH,GAC7B,OAAO+2F,aAAar3F,GAASA,OAAQwB,EAGvC,IAAA+1F,WAAiBD,YChBbE,YAAYD,WACZE,OAAO1wB,MAGP2wB,MAAMF,YAAUC,OAAM,OAE1BE,KAAiBD,MCNbE,YAAYL,WAGZM,eAAeD,YAAUh6F,OAAQ,UAErCk6F,cAAiBD,eCLbE,eAAeD,cASnB,SAASE,cACP31F,KAAK6wF,SAAW6E,eAAeA,eAAa,MAAQ,GACpD11F,KAAKusB,KAAO,EAGd,IAAAqpE,WAAiBD,YCJjB,SAASE,aAAW53F,GAClB,IAAI9B,EAAS6D,KAAKsvB,IAAIrxB,WAAe+B,KAAK6wF,SAAS5yF,GAEnD,OADA+B,KAAKusB,MAAQpwB,EAAS,EAAI,EACnBA,EAGT,IAAA25F,YAAiBD,aChBbE,eAAeN,cAGfO,iBAAiB,4BAGjBC,cAAc16F,OAAOC,UAGrB06F,iBAAiBD,cAAYx6F,eAWjC,SAAS06F,UAAQl4F,GACf,IAAInD,EAAOkF,KAAK6wF,SAChB,GAAIkF,eAAc,CAChB,IAAI55F,EAASrB,EAAKmD,GAClB,OAAO9B,IAAW65F,sBAAiB72F,EAAYhD,EAEjD,OAAO+5F,iBAAex6F,KAAKZ,EAAMmD,GAAOnD,EAAKmD,QAAOkB,EAGtD,IAAAi3F,SAAiBD,UC7BbE,eAAeZ,cAGfa,cAAc/6F,OAAOC,UAGrB+6F,iBAAiBD,cAAY76F,eAWjC,SAAS+6F,UAAQv4F,GACf,IAAInD,EAAOkF,KAAK6wF,SAChB,OAAOwF,oBAA8Bl3F,IAAdrE,EAAKmD,GAAsBs4F,iBAAe76F,KAAKZ,EAAMmD,GAG9E,IAAAw4F,SAAiBD,UCtBbE,aAAejB,cAGfkB,eAAiB,4BAYrB,SAASC,UAAQ34F,EAAKN,GACpB,IAAI7C,EAAOkF,KAAK6wF,SAGhB,OAFA7wF,KAAKusB,MAAQvsB,KAAKsvB,IAAIrxB,GAAO,EAAI,EACjCnD,EAAKmD,GAAQy4F,mBAA0Bv3F,IAAVxB,EAAuBg5F,eAAiBh5F,EAC9DqC,KAGT,IAAA62F,SAAiBD,UCtBbE,UAAYlB,WACZmB,WAAajB,YACbkB,QAAUZ,SACVa,QAAUR,SACVS,QAAUL,SASd,SAASM,OAAKlU,GACZ,IAAIxtE,GAAS,EACTna,EAAoB,MAAX2nF,EAAkB,EAAIA,EAAQ3nF,OAE3C0E,KAAK2B,QACL,QAAS8T,EAAQna,EAAQ,CACvB,IAAIi3F,EAAQtP,EAAQxtE,GACpBzV,KAAKiB,IAAIsxF,EAAM,GAAIA,EAAM,KAK7B4E,OAAK37F,UAAUmG,MAAQm1F,UACvBK,OAAK37F,UAAU,UAAYu7F,WAC3BI,OAAK37F,UAAU+B,IAAMy5F,QACrBG,OAAK37F,UAAU8zB,IAAM2nE,QACrBE,OAAK37F,UAAUyF,IAAMi2F,QAErB,IAAAE,MAAiBD,OC/BbE,KAAOD,MACPE,YAAY9E,WACZ+E,MAAMjC,KASV,SAASkC,kBACPx3F,KAAKusB,KAAO,EACZvsB,KAAK6wF,SAAW,CACd,KAAQ,IAAIwG,KACZ,IAAO,IAAKE,OAAOD,aACnB,OAAU,IAAID,MAIlB,IAAAI,eAAiBD,gBCbjB,SAASE,YAAU/5F,GACjB,IAAI8C,SAAc9C,EAClB,MAAgB,UAAR8C,GAA4B,UAARA,GAA4B,UAARA,GAA4B,WAARA,EACrD,cAAV9C,EACU,OAAVA,EAGP,IAAAg6F,WAAiBD,YCdbE,UAAYD,WAUhB,SAASE,aAAW5zF,EAAKhG,GACvB,IAAInD,EAAOmJ,EAAI4sF,SACf,OAAO+G,UAAU35F,GACbnD,EAAmB,iBAAPmD,EAAkB,SAAW,QACzCnD,EAAKmJ,IAGX,IAAA6zF,YAAiBD,aCjBbE,aAAaD,YAWjB,SAASE,iBAAe/5F,GACtB,IAAI9B,EAAS47F,aAAW/3F,KAAM/B,GAAK,UAAUA,GAE7C,OADA+B,KAAKusB,MAAQpwB,EAAS,EAAI,EACnBA,EAGT,IAAA87F,gBAAiBD,iBCjBbE,aAAaJ,YAWjB,SAASK,cAAYl6F,GACnB,OAAOi6F,aAAWl4F,KAAM/B,GAAKV,IAAIU,GAGnC,IAAAm6F,aAAiBD,cCfbE,aAAaP,YAWjB,SAASQ,cAAYr6F,GACnB,OAAOo6F,aAAWr4F,KAAM/B,GAAKqxB,IAAIrxB,GAGnC,IAAAs6F,aAAiBD,cCfbE,WAAaV,YAYjB,SAASW,cAAYx6F,EAAKN,GACxB,IAAI7C,EAAO09F,WAAWx4F,KAAM/B,GACxBsuB,EAAOzxB,EAAKyxB,KAIhB,OAFAzxB,EAAKmG,IAAIhD,EAAKN,GACdqC,KAAKusB,MAAQzxB,EAAKyxB,MAAQA,EAAO,EAAI,EAC9BvsB,KAGT,IAAA04F,aAAiBD,cCrBbE,cAAgBlB,eAChBmB,eAAiBX,gBACjBY,YAAcT,aACdU,YAAcP,aACdQ,YAAcL,aASlB,SAASM,WAAS/V,GAChB,IAAIxtE,GAAS,EACTna,EAAoB,MAAX2nF,EAAkB,EAAIA,EAAQ3nF,OAE3C0E,KAAK2B,QACL,QAAS8T,EAAQna,EAAQ,CACvB,IAAIi3F,EAAQtP,EAAQxtE,GACpBzV,KAAKiB,IAAIsxF,EAAM,GAAIA,EAAM,KAK7ByG,WAASx9F,UAAUmG,MAAQg3F,cAC3BK,WAASx9F,UAAU,UAAYo9F,eAC/BI,WAASx9F,UAAU+B,IAAMs7F,YACzBG,WAASx9F,UAAU8zB,IAAMwpE,YACzBE,WAASx9F,UAAUyF,IAAM83F,YAEzB,IAAAE,UAAiBD,WC/BbE,YAAY1G,WACZ2G,MAAM7D,KACN8D,WAAWH,UAGXI,iBAAmB,IAYvB,SAASC,WAASr7F,EAAKN,GACrB,IAAI7C,EAAOkF,KAAK6wF,SAChB,GAAI/1F,aAAgBo+F,YAAW,CAC7B,IAAInkB,EAAQj6E,EAAK+1F,SACjB,IAAKsI,OAAQpkB,EAAMz5E,OAAS+9F,iBAAmB,EAG7C,OAFAtkB,EAAMn5E,KAAK,CAACqC,EAAKN,IACjBqC,KAAKusB,OAASzxB,EAAKyxB,KACZvsB,KAETlF,EAAOkF,KAAK6wF,SAAW,IAAIuI,WAASrkB,GAItC,OAFAj6E,EAAKmG,IAAIhD,EAAKN,GACdqC,KAAKusB,KAAOzxB,EAAKyxB,KACVvsB,KAGT,IAAAu5F,UAAiBD,WCjCbE,UAAYhH,WACZiH,WAAa9G,YACb+G,YAAc7G,aACd8G,SAAW5G,UACX6G,SAAW3G,UACX4G,SAAWN,UASf,SAASO,QAAM7W,GACb,IAAInoF,EAAOkF,KAAK6wF,SAAW,IAAI2I,UAAUvW,GACzCjjF,KAAKusB,KAAOzxB,EAAKyxB,KAInButE,QAAMt+F,UAAUmG,MAAQ83F,WACxBK,QAAMt+F,UAAU,UAAYk+F,YAC5BI,QAAMt+F,UAAU+B,IAAMo8F,SACtBG,QAAMt+F,UAAU8zB,IAAMsqE,SACtBE,QAAMt+F,UAAUyF,IAAM44F,SAEtB,IAAAE,OAAiBD,QCjBjB,SAASE,YAAUj3D,EAAOk3D,GACxB,IAAIxkF,GAAS,EACTna,EAAkB,MAATynC,EAAgB,EAAIA,EAAMznC,OAEvC,QAASma,EAAQna,EACf,IAA6C,IAAzC2+F,EAASl3D,EAAMttB,GAAQA,EAAOstB,GAChC,MAGJ,OAAOA,EAGT,IAAAm3D,WAAiBF,YCrBbG,YAAYjF,WAEZkF,iBAAkB,WACpB,IACE,IAAIlkE,EAAOikE,YAAU5+F,OAAQ,kBAE7B,OADA26B,EAAK,GAAI,GAAI,IACNA,EACP,MAAOzvB,KALW,GAQtB5H,gBAAiBu7F,iBCVbC,iBAAiBx7F,gBAWrB,SAASy7F,kBAAgBl8F,EAAQH,EAAKN,GACzB,aAAPM,GAAsBo8F,iBACxBA,iBAAej8F,EAAQH,EAAK,CAC1B,cAAgB,EAChB,YAAc,EACd,MAASN,EACT,UAAY,IAGdS,EAAOH,GAAON,EAIlB,IAAA48F,iBAAiBD,kBCxBbE,kBAAkBD,iBAClBE,GAAKzJ,KAGL0J,cAAcn/F,OAAOC,UAGrBm/F,iBAAiBD,cAAYj/F,eAYjC,SAASm/F,cAAYx8F,EAAQH,EAAKN,GAChC,IAAIk9F,EAAWz8F,EAAOH,GAChB08F,iBAAej/F,KAAK0C,EAAQH,IAAQw8F,GAAGI,EAAUl9F,UACxCwB,IAAVxB,GAAyBM,KAAOG,IACnCo8F,kBAAgBp8F,EAAQH,EAAKN,GAIjC,IAAAm9F,aAAiBF,cC3BbG,cAAcD,aACdE,gBAAkBT,iBAYtB,SAASU,aAAWC,EAAQ1qF,EAAOpS,EAAQ+8F,GACzC,IAAIC,GAASh9F,EACbA,IAAWA,EAAS,IAEpB,IAAIqX,GAAS,EACTna,EAASkV,EAAMlV,OAEnB,QAASma,EAAQna,EAAQ,CACvB,IAAI2C,EAAMuS,EAAMiF,GAEZ4lF,EAAWF,EACXA,EAAW/8F,EAAOH,GAAMi9F,EAAOj9F,GAAMA,EAAKG,EAAQ88F,QAClD/7F,OAEaA,IAAbk8F,IACFA,EAAWH,EAAOj9F,IAEhBm9F,EACFJ,gBAAgB58F,EAAQH,EAAKo9F,GAE7BN,cAAY38F,EAAQH,EAAKo9F,GAG7B,OAAOj9F,EAGT,IAAAk9F,YAAiBL,aC9BjB,SAASM,YAAUp9F,EAAG87F,GACpB,IAAIxkF,GAAS,EACTtZ,EAASiH,MAAMjF,GAEnB,QAASsX,EAAQtX,EACfhC,EAAOsZ,GAASwkF,EAASxkF,GAE3B,OAAOtZ,EAGT,IAAAq/F,WAAiBD,YCnBbE,aAAat1B,YACbu1B,eAAen1B,eAGfo1B,UAAU,qBASd,SAASC,kBAAgBj+F,GACvB,OAAO+9F,eAAa/9F,IAAU89F,aAAW99F,IAAUg+F,UAGrD,IAAAE,iBAAiBD,kBCjBbE,gBAAkBD,iBAClBE,eAAex1B,eAGfy1B,cAAczgG,OAAOC,UAGrBygG,iBAAiBD,cAAYvgG,eAG7BygG,uBAAuBF,cAAYG,qBAoBnCC,cAAcN,gBAAgB,WAAa,OAAOzzF,UAApB,IAAsCyzF,gBAAkB,SAASn+F,GACjG,OAAOo+F,eAAap+F,IAAUs+F,iBAAevgG,KAAKiC,EAAO,YACtDu+F,uBAAqBxgG,KAAKiC,EAAO,WAGtC0+F,cAAiBD,c,wBCtBjB,SAASE,YACP,OAAO,EAGT,IAAAC,YAAiBD,U,iCCjBjB,IAAIjjC,EAAOqL,MACP43B,EAAYC,YAGZC,EAA4C5/F,IAAYA,EAAQ6/F,UAAY7/F,EAG5E8/F,EAAaF,GAA4C3/F,IAAWA,EAAO4/F,UAAY5/F,EAGvF8/F,EAAgBD,GAAcA,EAAW9/F,UAAY4/F,EAGrDI,EAASD,EAAgBtjC,EAAKujC,YAASz9F,EAGvC09F,EAAiBD,EAASA,EAAOE,cAAW39F,EAmB5C29F,EAAWD,GAAkBP,EAEjCz/F,EAAAD,QAAiBkgG,E,uECpCbC,mBAAmB,iBAGnBC,SAAW,mBAUf,SAASC,UAAQt/F,EAAOrC,GACtB,IAAImF,SAAc9C,EAGlB,OAFArC,EAAmB,MAAVA,EAAiByhG,mBAAmBzhG,IAEpCA,IACE,UAARmF,GACU,UAARA,GAAoBu8F,SAAS3yB,KAAK1sE,KAChCA,GAAS,GAAKA,EAAQ,GAAK,GAAKA,EAAQrC,EAGjD,IAAA4hG,SAAiBD,UCvBbzf,iBAAmB,iBA4BvB,SAAS2f,WAASx/F,GAChB,MAAuB,iBAATA,GACZA,GAAS,GAAKA,EAAQ,GAAK,GAAKA,GAAS6/E,iBAG7C,IAAA4f,WAAiBD,WClCbE,aAAal3B,YACbm3B,WAAWF,WACXG,eAAeh3B,eAGfi3B,UAAU,qBACVC,WAAW,iBACXC,UAAU,mBACVC,UAAU,gBACVC,WAAW,iBACXC,UAAU,oBACVC,SAAS,eACTC,YAAY,kBACZC,YAAY,kBACZC,YAAY,kBACZC,SAAS,eACTC,YAAY,kBACZC,aAAa,mBAEbC,iBAAiB,uBACjBC,cAAc,oBACdC,aAAa,wBACbC,aAAa,wBACbC,UAAU,qBACVC,WAAW,sBACXC,WAAW,sBACXC,WAAW,sBACXC,kBAAkB,6BAClBC,YAAY,uBACZC,YAAY,uBAGZC,eAAiB,GAsBrB,SAASC,mBAAiBthG,GACxB,OAAO4/F,eAAa5/F,IAClB2/F,WAAS3/F,EAAMrC,WAAa0jG,eAAe3B,aAAW1/F,IAvB1DqhG,eAAeT,cAAcS,eAAeR,cAC5CQ,eAAeP,WAAWO,eAAeN,YACzCM,eAAeL,YAAYK,eAAeJ,YAC1CI,eAAeH,mBAAmBG,eAAeF,aACjDE,eAAeD,cAAa,EAC5BC,eAAexB,WAAWwB,eAAevB,YACzCuB,eAAeX,kBAAkBW,eAAetB,WAChDsB,eAAeV,eAAeU,eAAerB,WAC7CqB,eAAepB,YAAYoB,eAAenB,WAC1CmB,eAAelB,UAAUkB,eAAejB,aACxCiB,eAAehB,aAAagB,eAAef,aAC3Ce,eAAed,UAAUc,eAAeb,aACxCa,eAAeZ,eAAc,EAc7B,IAAAc,kBAAiBD,mBCpDjB,SAASE,YAAUjpE,GACjB,OAAO,SAASv4B,GACd,OAAOu4B,EAAKv4B,IAIhB,IAAAyhG,WAAiBD,Y,uDCbjB,IAAI76B,EAAaD,YAGbm4B,EAA4C5/F,IAAYA,EAAQ6/F,UAAY7/F,EAG5E8/F,EAAaF,GAA4C3/F,IAAWA,EAAO4/F,UAAY5/F,EAGvF8/F,EAAgBD,GAAcA,EAAW9/F,UAAY4/F,EAGrD6C,EAAc1C,GAAiBr4B,EAAWg7B,QAG1CC,EAAY,WACd,IAEE,IAAI72F,EAAQg0F,GAAcA,EAAWj4C,SAAWi4C,EAAWj4C,QAAQ,QAAQ/7C,MAE3E,OAAIA,GAKG22F,GAAeA,EAAYG,SAAWH,EAAYG,QAAQ,QACjE,MAAO/4F,KAXK,GAchB5J,EAAAD,QAAiB2iG,E,qEC7BbE,iBAAmBP,kBACnBQ,YAAYN,WACZO,WAAWC,iBAGXC,iBAAmBF,YAAYA,WAASG,aAmBxCC,eAAeF,iBAAmBH,YAAUG,kBAAoBJ,iBAEpEO,eAAiBD,eC1BbE,YAAYzE,WACZ0E,cAAc7D,cACd8D,UAAU95B,UACV+5B,WAAWC,gBACXC,UAAUpD,SACV4C,aAAeE,eAGfO,cAAchlG,OAAOC,UAGrBglG,iBAAiBD,cAAY9kG,eAUjC,SAASglG,gBAAc9iG,EAAO+iG,GAC5B,IAAIC,EAAQR,UAAQxiG,GAChBijG,GAASD,GAAST,cAAYviG,GAC9BkjG,GAAUF,IAAUC,GAASR,WAASziG,GACtCmjG,GAAUH,IAAUC,IAAUC,GAAUf,aAAaniG,GACrDojG,EAAcJ,GAASC,GAASC,GAAUC,EAC1C3kG,EAAS4kG,EAAcd,YAAUtiG,EAAMrC,OAAQohE,QAAU,GACzDphE,EAASa,EAAOb,OAEpB,IAAK,IAAI2C,KAAON,GACT+iG,IAAaF,iBAAe9kG,KAAKiC,EAAOM,IACvC8iG,IAEQ,UAAP9iG,GAEC4iG,IAAkB,UAAP5iG,GAA0B,UAAPA,IAE9B6iG,IAAkB,UAAP7iG,GAA0B,cAAPA,GAA8B,cAAPA,IAEtDqiG,UAAQriG,EAAK3C,KAElBa,EAAOP,KAAKqC,GAGhB,OAAO9B,EAGT,IAAA6kG,eAAiBP,gBC/CbQ,cAAc1lG,OAAOC,UASzB,SAAS0lG,cAAYvjG,GACnB,IAAIwjG,EAAOxjG,GAASA,EAAMiB,YACtBklE,EAAwB,mBAARq9B,GAAsBA,EAAK3lG,WAAcylG,cAE7D,OAAOtjG,IAAUmmE,EAGnB,IAAAs9B,aAAiBF,cCTjB,SAASG,UAAQnrE,EAAMlC,GACrB,OAAO,SAAS+wD,GACd,OAAO7uD,EAAKlC,EAAU+wD,KAI1B,IAAAuc,SAAiBD,UCdbE,UAAUD,SAGVE,aAAaD,UAAQhmG,OAAOqE,KAAMrE,QAEtCkmG,YAAiBD,aCLbE,cAAcN,aACdO,WAAaF,YAGbG,cAAcrmG,OAAOC,UAGrBqmG,iBAAiBD,cAAYnmG,eASjC,SAASqmG,WAAS1jG,GAChB,IAAKsjG,cAAYtjG,GACf,OAAOujG,WAAWvjG,GAEpB,IAAIjC,EAAS,GACb,IAAK,IAAI8B,KAAO1C,OAAO6C,GACjByjG,iBAAenmG,KAAK0C,EAAQH,IAAe,eAAPA,GACtC9B,EAAOP,KAAKqC,GAGhB,OAAO9B,EAGT,IAAA4lG,UAAiBD,WC7BbE,WAAanS,aACboS,WAAW7E,WA2Bf,SAAS8E,cAAYvkG,GACnB,OAAgB,MAATA,GAAiBskG,WAAStkG,EAAMrC,UAAY0mG,WAAWrkG,GAGhE,IAAAwkG,cAAiBD,cChCbE,gBAAgBpB,eAChBqB,SAAWN,UACXO,cAAcH,cA8BlB,SAASI,OAAKnkG,GACZ,OAAOkkG,cAAYlkG,GAAUgkG,gBAAchkG,GAAUikG,SAASjkG,GAGhE,IAAAokG,OAAiBD,OCpCbE,aAAanH,YACboH,OAAOF,OAWX,SAASG,aAAWvkG,EAAQ88F,GAC1B,OAAO98F,GAAUqkG,aAAWvH,EAAQwH,OAAKxH,GAAS98F,GAGpD,IAAAwkG,YAAiBD,aCPjB,SAASE,eAAazkG,GACpB,IAAIjC,EAAS,GACb,GAAc,MAAViC,EACF,IAAK,IAAIH,KAAO1C,OAAO6C,GACrBjC,EAAOP,KAAKqC,GAGhB,OAAO9B,EAGT,IAAA2mG,cAAiBD,eCnBbE,WAAW1T,WACX2T,cAAc5B,aACd6B,aAAeH,cAGfI,cAAc3nG,OAAOC,UAGrB2nG,iBAAiBD,cAAYznG,eASjC,SAAS2nG,aAAWhlG,GAClB,IAAK2kG,WAAS3kG,GACZ,OAAO6kG,aAAa7kG,GAEtB,IAAIilG,EAAUL,cAAY5kG,GACtBjC,EAAS,GAEb,IAAK,IAAI8B,KAAOG,GACD,eAAPH,IAAyBolG,GAAYF,iBAAeznG,KAAK0C,EAAQH,KACrE9B,EAAOP,KAAKqC,GAGhB,OAAO9B,EAGT,IAAAmnG,YAAiBF,aChCbG,cAAgBvC,eAChBwC,WAAaF,YACbG,cAActB,cAyBlB,SAASuB,SAAOtlG,GACd,OAAOqlG,cAAYrlG,GAAUmlG,cAAcnlG,GAAQ,GAAQolG,WAAWplG,GAGxE,IAAAulG,SAAiBD,SC/BbE,aAAatI,YACbuI,SAASF,SAWb,SAASG,eAAa1lG,EAAQ88F,GAC5B,OAAO98F,GAAUwlG,aAAW1I,EAAQ2I,SAAO3I,GAAS98F,GAGtD,IAAA2lG,cAAiBD,e,6DChBjB,IAAIzqC,EAAOqL,MAGP83B,EAA4C5/F,IAAYA,EAAQ6/F,UAAY7/F,EAG5E8/F,EAAaF,GAA4C3/F,IAAWA,EAAO4/F,UAAY5/F,EAGvF8/F,EAAgBD,GAAcA,EAAW9/F,UAAY4/F,EAGrDI,EAASD,EAAgBtjC,EAAKujC,YAASz9F,EACvC6kG,EAAcpH,EAASA,EAAOoH,iBAAc7kG,EAUhD,SAAS8kG,EAAYhyE,EAAQiyE,GAC3B,GAAIA,EACF,OAAOjyE,EAAOvzB,QAEhB,IAAIpD,EAAS22B,EAAO32B,OAChBa,EAAS6nG,EAAcA,EAAY1oG,GAAU,IAAI22B,EAAOrzB,YAAYtD,GAGxE,OADA22B,EAAOqE,KAAKn6B,GACLA,EAGTU,EAAAD,QAAiBqnG,E,iFC1BjB,SAASE,YAAUjJ,EAAQn4D,GACzB,IAAIttB,GAAS,EACTna,EAAS4/F,EAAO5/F,OAEpBynC,IAAUA,EAAQ3/B,MAAM9H,IACxB,QAASma,EAAQna,EACfynC,EAAMttB,GAASylF,EAAOzlF,GAExB,OAAOstB,EAGT,IAAAqhE,WAAiBD,YCVjB,SAASE,cAAYthE,EAAOitD,GAC1B,IAAIv6E,GAAS,EACTna,EAAkB,MAATynC,EAAgB,EAAIA,EAAMznC,OACnCgpG,EAAW,EACXnoG,EAAS,GAEb,QAASsZ,EAAQna,EAAQ,CACvB,IAAIqC,EAAQolC,EAAMttB,GACdu6E,EAAUryF,EAAO8X,EAAOstB,KAC1B5mC,EAAOmoG,KAAc3mG,GAGzB,OAAOxB,EAGT,IAAAooG,aAAiBF,cCNjB,SAASG,cACP,MAAO,GAGT,IAAAC,YAAiBD,YCtBbE,cAAcH,aACdI,YAAYF,YAGZG,cAAcrpG,OAAOC,UAGrB2gG,qBAAuByI,cAAYzI,qBAGnC0I,mBAAmBtpG,OAAOupG,sBAS1BC,aAAcF,mBAA+B,SAASzmG,GACxD,OAAc,MAAVA,EACK,IAETA,EAAS7C,OAAO6C,GACTsmG,cAAYG,mBAAiBzmG,IAAS,SAAS+xE,GACpD,OAAOgsB,qBAAqBzgG,KAAK0C,EAAQ+xE,QANRw0B,YAUrCK,YAAiBD,aC7BbE,aAAa3J,YACb4J,aAAaF,YAUjB,SAASG,cAAYjK,EAAQ98F,GAC3B,OAAO6mG,aAAW/J,EAAQgK,aAAWhK,GAAS98F,GAGhD,IAAAgnG,aAAiBD,cCPjB,SAASE,YAAUtiE,EAAO9H,GACxB,IAAIxlB,GAAS,EACTna,EAAS2/B,EAAO3/B,OAChB0D,EAAS+jC,EAAMznC,OAEnB,QAASma,EAAQna,EACfynC,EAAM/jC,EAASyW,GAASwlB,EAAOxlB,GAEjC,OAAOstB,EAGT,IAAAuiE,WAAiBD,YCnBbE,QAAUjE,SAGVkE,eAAeD,QAAQhqG,OAAOkoE,eAAgBloE,QAElDkqG,cAAiBD,eCLbE,YAAYJ,WACZK,eAAeF,cACfG,aAAaZ,YACba,UAAYpB,YAGZqB,iBAAmBvqG,OAAOupG,sBAS1BiB,eAAgBD,iBAA+B,SAAS1nG,GAC1D,IAAIjC,EAAS,GACb,MAAOiC,EACLsnG,YAAUvpG,EAAQypG,aAAWxnG,IAC7BA,EAASunG,eAAavnG,GAExB,OAAOjC,GAN8B0pG,UASvCG,cAAiBD,eCxBbE,aAAa3K,YACb4K,eAAeF,cAUnB,SAASG,gBAAcjL,EAAQ98F,GAC7B,OAAO6nG,aAAW/K,EAAQgL,eAAahL,GAAS98F,GAGlD,IAAAgoG,eAAiBD,gBCfbE,YAAYf,WACZgB,UAAUjgC,UAad,SAASkgC,iBAAenoG,EAAQooG,EAAUC,GACxC,IAAItqG,EAASqqG,EAASpoG,GACtB,OAAOkoG,UAAQloG,GAAUjC,EAASkqG,YAAUlqG,EAAQsqG,EAAYroG,IAGlE,IAAAsoG,gBAAiBH,iBCnBbI,iBAAiBD,gBACjBE,WAAa5B,YACb6B,OAAOrE,OASX,SAASsE,aAAW1oG,GAClB,OAAOuoG,iBAAevoG,EAAQyoG,OAAMD,YAGtC,IAAAG,YAAiBD,aCfbE,eAAiBN,gBACjBO,aAAejB,cACfkB,SAASvD,SAUb,SAASwD,eAAa/oG,GACpB,OAAO4oG,eAAe5oG,EAAQ8oG,SAAQD,cAGxC,IAAAG,cAAiBD,eChBbE,YAAYnS,WACZoS,OAAO5iC,MAGP6iC,WAAWF,YAAUC,OAAM,YAE/BE,UAAiBD,WCNbE,YAAYvS,WACZwS,OAAOhjC,MAGPijC,UAAUF,YAAUC,OAAM,WAE9BE,SAAiBD,UCNbE,YAAY3S,WACZ4S,OAAOpjC,MAGPqjC,MAAMF,YAAUC,OAAM,OAE1BE,KAAiBD,MCNbE,UAAY/S,WACZgT,OAAOxjC,MAGPyjC,UAAUF,UAAUC,OAAM,WAE9BE,SAAiBD,UCNb/1E,SAAWo1E,UACXa,MAAM/S,KACNgT,UAAUV,SACVW,MAAMP,KACNQ,QAAUJ,SACVK,aAAatiC,YACbuiC,SAAW3U,UAGX4U,SAAS,eACTC,YAAY,kBACZC,WAAa,mBACbC,SAAS,eACTC,aAAa,mBAEbC,cAAc,oBAGdC,mBAAqBP,SAASt2E,UAC9B82E,cAAgBR,SAASL,OACzBc,kBAAoBT,SAASJ,WAC7Bc,cAAgBV,SAASH,OACzBc,kBAAoBX,SAASF,SAS7Bc,SAASb,cAGRr2E,UAAYk3E,SAAO,IAAIl3E,SAAS,IAAIF,YAAY,MAAQ82E,eACxDX,OAAOiB,SAAO,IAAIjB,QAAQM,UAC1BL,WAAWgB,SAAOhB,UAAQvhD,YAAc8hD,YACxCN,OAAOe,SAAO,IAAIf,QAAQO,UAC1BN,SAAWc,SAAO,IAAId,UAAYO,gBACrCO,SAAS,SAAS3rG,GAChB,IAAIxB,EAASssG,aAAW9qG,GACpBwjG,EAAOhlG,GAAUysG,YAAYjrG,EAAMiB,iBAAcO,EACjDoqG,EAAapI,EAAOuH,SAASvH,GAAQ,GAEzC,GAAIoI,EACF,OAAQA,GACN,KAAKN,mBAAoB,OAAOD,cAChC,KAAKE,cAAe,OAAOP,SAC3B,KAAKQ,kBAAmB,OAAON,WAC/B,KAAKO,cAAe,OAAON,SAC3B,KAAKO,kBAAmB,OAAON,aAGnC,OAAO5sG,IAIX,IAAAqtG,QAAiBF,SCxDbG,cAAcluG,OAAOC,UAGrBkuG,iBAAiBD,cAAYhuG,eASjC,SAASkuG,iBAAe5mE,GACtB,IAAIznC,EAASynC,EAAMznC,OACfa,EAAS,IAAI4mC,EAAMnkC,YAAYtD,GAOnC,OAJIA,GAA6B,iBAAZynC,EAAM,IAAkB2mE,iBAAehuG,KAAKqnC,EAAO,WACtE5mC,EAAOsZ,MAAQstB,EAAMttB,MACrBtZ,EAAO4lE,MAAQh/B,EAAMg/B,OAEhB5lE,EAGT,IAAAytG,gBAAiBD,iBCzBbtwC,KAAOqL,MAGPmlC,aAAaxwC,KAAKnoC,WAEtB44E,YAAiBD,aCLb34E,WAAa44E,YASjB,SAASC,mBAAiBvjD,GACxB,IAAIrqD,EAAS,IAAIqqD,EAAY5nD,YAAY4nD,EAAYwjD,YAErD,OADA,IAAI94E,WAAW/0B,GAAQ8E,IAAI,IAAIiwB,WAAWs1B,IACnCrqD,EAGT,IAAA8tG,kBAAiBF,mBCfbG,mBAAmBD,kBAUvB,SAASE,gBAAcC,EAAUlG,GAC/B,IAAIjyE,EAASiyE,EAASgG,mBAAiBE,EAASn4E,QAAUm4E,EAASn4E,OACnE,OAAO,IAAIm4E,EAASxrG,YAAYqzB,EAAQm4E,EAASC,WAAYD,EAASJ,YAGxE,IAAAM,eAAiBH,gBCdbI,QAAU,OASd,SAASC,cAAYC,GACnB,IAAItuG,EAAS,IAAIsuG,EAAO7rG,YAAY6rG,EAAOvP,OAAQqP,QAAQ/W,KAAKiX,IAEhE,OADAtuG,EAAOq/E,UAAYivB,EAAOjvB,UACnBr/E,EAGT,IAAAuuG,aAAiBF,cChBbG,SAAS9lC,UAGT+lC,cAAcD,SAASA,SAAOnvG,eAAY2D,EAC1C0rG,cAAgBD,cAAcA,cAAY9d,aAAU3tF,EASxD,SAAS2rG,cAAY36B,GACnB,OAAO06B,cAAgBtvG,OAAOsvG,cAAcnvG,KAAKy0E,IAAW,GAG9D,IAAA46B,aAAiBD,cCjBbE,mBAAmBf,kBAUvB,SAASgB,kBAAgBC,EAAYhH,GACnC,IAAIjyE,EAASiyE,EAAS8G,mBAAiBE,EAAWj5E,QAAUi5E,EAAWj5E,OACvE,OAAO,IAAIi5E,EAAWtsG,YAAYqzB,EAAQi5E,EAAWb,WAAYa,EAAW5vG,QAG9E,IAAA6vG,iBAAiBF,kBCfbG,iBAAmBnB,kBACnBoB,cAAgBf,eAChBgB,YAAcZ,aACda,YAAcR,aACdS,gBAAkBL,iBAGlBM,UAAU,mBACVC,UAAU,gBACVC,SAAS,eACTC,YAAY,kBACZC,YAAY,kBACZC,SAAS,eACTC,YAAY,kBACZC,YAAY,kBAEZC,iBAAiB,uBACjBC,cAAc,oBACdC,aAAa,wBACbC,aAAa,wBACbC,UAAU,qBACVC,WAAW,sBACXC,WAAW,sBACXC,WAAW,sBACXC,kBAAkB,6BAClBC,YAAY,uBACZC,YAAY,uBAchB,SAASC,iBAAexuG,EAAQirD,EAAK66C,GACnC,IAAI/C,EAAO/iG,EAAOQ,YAClB,OAAQyqD,GACN,KAAK4iD,iBACH,OAAOb,iBAAiBhtG,GAE1B,KAAKqtG,UACL,KAAKC,UACH,OAAO,IAAIvK,GAAM/iG,GAEnB,KAAK8tG,cACH,OAAOb,cAAcjtG,EAAQ8lG,GAE/B,KAAKiI,aAAY,KAAKC,aACtB,KAAKC,UAAS,KAAKC,WAAU,KAAKC,WAClC,KAAKC,WAAU,KAAKC,kBAAiB,KAAKC,YAAW,KAAKC,YACxD,OAAOnB,gBAAgBptG,EAAQ8lG,GAEjC,KAAKyH,SACH,OAAO,IAAIxK,EAEb,KAAKyK,YACL,KAAKG,YACH,OAAO,IAAI5K,EAAK/iG,GAElB,KAAKytG,YACH,OAAOP,YAAYltG,GAErB,KAAK0tG,SACH,OAAO,IAAI3K,EAEb,KAAK6K,YACH,OAAOT,YAAYntG,IAIzB,IAAAyuG,gBAAiBD,iBC5EbE,WAAWzd,WAGX0d,aAAexxG,OAAOyC,OAUtBgvG,aAAc,WAChB,SAAS5uG,KACT,OAAO,SAAS0lE,GACd,IAAKgpC,WAAShpC,GACZ,MAAO,GAET,GAAIipC,aACF,OAAOA,aAAajpC,GAEtB1lE,EAAO5C,UAAYsoE,EACnB,IAAI3nE,EAAS,IAAIiC,EAEjB,OADAA,EAAO5C,eAAY2D,EACZhD,GAZO,GAgBlB8wG,YAAiBD,aC7BbE,WAAaD,YACbE,eAAe1H,cACf2H,YAAchM,aASlB,SAASiM,kBAAgBjvG,GACvB,MAAqC,mBAAtBA,EAAOQ,aAA8BwuG,YAAYhvG,GAE5D,GADA8uG,WAAWC,eAAa/uG,IAI9B,IAAAkvG,iBAAiBD,kBCjBbE,SAAS/D,QACTgE,eAAejnC,eAGfknC,SAAS,eASb,SAASC,YAAU/vG,GACjB,OAAO6vG,eAAa7vG,IAAU4vG,SAAO5vG,IAAU8vG,SAGjD,IAAAE,WAAiBD,YCjBbE,UAAYD,WACZE,YAAYzO,WACZ0O,WAAWlO,iBAGXmO,UAAYD,YAAYA,WAASE,MAmBjCC,QAAQF,UAAYF,YAAUE,WAAaH,UAE/CM,QAAiBD,QC1BbE,SAAS3E,QACT4E,eAAe7nC,eAGf8nC,SAAS,eASb,SAASC,YAAU3wG,GACjB,OAAOywG,eAAazwG,IAAUwwG,SAAOxwG,IAAU0wG,SAGjD,IAAAE,WAAiBD,YCjBbE,UAAYD,WACZE,UAAYrP,WACZG,SAAWK,iBAGX8O,UAAYnP,UAAYA,SAASoP,MAmBjCC,QAAQF,UAAYD,UAAUC,WAAaF,UAE/CK,QAAiBD,QC1BbE,MAAQ/U,OACRgV,UAAY7U,WACZ8U,cAAclU,aACdmU,WAAarM,YACbsM,aAAenL,cACfE,YAAckL,oBACdC,UAAYhL,WACZiL,YAAcjK,aACdkK,cAAgBlJ,eAChBmJ,WAAaxI,YACbyI,eAAepI,cACfqI,OAASjG,QACTkG,eAAiB9F,gBACjB+F,eAAiB9C,gBACjB+C,gBAAkBtC,iBAClBuC,UAAUxpC,UACVy2B,SAAWuD,gBACX2N,MAAQE,QACR4B,WAAWzgB,WACXsf,MAAQE,QACRjvG,KAAO4iG,OACPuN,OAASpM,SAGTqM,kBAAkB,EAClBC,kBAAkB,EAClBC,qBAAqB,EAGrBC,QAAU,qBACVC,SAAW,iBACXC,UAAU,mBACVC,QAAU,gBACVC,SAAW,iBACXC,QAAU,oBACVC,OAAS,6BACTC,OAAS,eACTC,YAAY,kBACZC,YAAY,kBACZC,UAAY,kBACZC,OAAS,eACTC,UAAY,kBACZC,YAAY,kBACZC,WAAa,mBAEbC,eAAiB,uBACjBC,YAAc,oBACdC,WAAa,wBACbC,WAAa,wBACbC,QAAU,qBACVC,SAAW,sBACXC,SAAW,sBACXC,SAAW,sBACXC,gBAAkB,6BAClBC,UAAY,uBACZC,UAAY,uBAGZC,cAAgB,GA+BpB,SAASC,YAAUn0G,EAAOo0G,EAAS5W,EAAYl9F,EAAKG,EAAQ4zG,GAC1D,IAAI71G,EACA+nG,EAAS6N,EAAU/B,kBACnBiC,EAASF,EAAU9B,kBACnBiC,EAASH,EAAU7B,qBAKvB,GAHI/U,IACFh/F,EAASiC,EAAS+8F,EAAWx9F,EAAOM,EAAKG,EAAQ4zG,GAAS7W,EAAWx9F,SAExDwB,IAAXhD,EACF,OAAOA,EAET,IAAK2zG,WAASnyG,GACZ,OAAOA,EAET,IAAIgjG,EAAQkP,UAAQlyG,GACpB,GAAIgjG,GAEF,GADAxkG,EAASuzG,eAAe/xG,IACnBumG,EACH,OAAOkL,UAAUzxG,EAAOxB,OAErB,CACL,IAAIktD,EAAMomD,OAAO9xG,GACbw0G,EAAS9oD,GAAOmnD,SAAWnnD,GAAOonD,OAEtC,GAAI3T,SAASn/F,GACX,OAAOsmG,YAAYtmG,EAAOumG,GAE5B,GAAI76C,GAAOunD,aAAavnD,GAAO8mD,SAAYgC,IAAW/zG,GAEpD,GADAjC,EAAU81G,GAAUE,EAAU,GAAKvC,gBAAgBjyG,IAC9CumG,EACH,OAAO+N,EACH3C,cAAc3xG,EAAOuxG,aAAa/yG,EAAQwB,IAC1C0xG,YAAY1xG,EAAOsxG,WAAW9yG,EAAQwB,QAEvC,CACL,IAAKk0G,cAAcxoD,GACjB,OAAOjrD,EAAST,EAAQ,GAE1BxB,EAASwzG,eAAehyG,EAAO0rD,EAAK66C,IAIxC8N,IAAUA,EAAQ,IAAIlD,OACtB,IAAIsD,EAAUJ,EAAMz0G,IAAII,GACxB,GAAIy0G,EACF,OAAOA,EAETJ,EAAM/wG,IAAItD,EAAOxB,GAEbwyG,MAAMhxG,GACRA,EAAMsC,SAAQ,SAASoyG,GACrBl2G,EAAOu4B,IAAIo9E,YAAUO,EAAUN,EAAS5W,EAAYkX,EAAU10G,EAAOq0G,OAE9DhE,MAAMrwG,IACfA,EAAMsC,SAAQ,SAASoyG,EAAUp0G,GAC/B9B,EAAO8E,IAAIhD,EAAK6zG,YAAUO,EAAUN,EAAS5W,EAAYl9F,EAAKN,EAAOq0G,OAIzE,IAAIxL,EAAW0L,EACVD,EAASzC,eAAeD,WACxB0C,EAASlC,OAASnwG,KAEnB4Q,EAAQmwF,OAAQxhG,EAAYqnG,EAAS7oG,GASzC,OARAoxG,UAAUv+F,GAAS7S,GAAO,SAAS00G,EAAUp0G,GACvCuS,IACFvS,EAAMo0G,EACNA,EAAW10G,EAAMM,IAGnB+wG,cAAY7yG,EAAQ8B,EAAK6zG,YAAUO,EAAUN,EAAS5W,EAAYl9F,EAAKN,EAAOq0G,OAEzE71G,EAvGT01G,cAAc1B,SAAW0B,cAAczB,UACvCyB,cAAcX,gBAAkBW,cAAcV,aAC9CU,cAAcxB,WAAWwB,cAAcvB,SACvCuB,cAAcT,YAAcS,cAAcR,YAC1CQ,cAAcP,SAAWO,cAAcN,UACvCM,cAAcL,UAAYK,cAAcnB,QACxCmB,cAAclB,aAAakB,cAAcjB,aACzCiB,cAAchB,WAAagB,cAAcf,QACzCe,cAAcd,WAAac,cAAcb,aACzCa,cAAcJ,UAAYI,cAAcH,iBACxCG,cAAcF,WAAaE,cAAcD,YAAa,EACtDC,cAActB,UAAYsB,cAAcrB,SACxCqB,cAAcZ,aAAc,EA8F5B,IAAAqB,WAAiBR,YCrKbS,YAAYD,WAGZE,kBAAkB,EAClBC,qBAAqB,EAoBzB,SAASC,UAAU/0G,GACjB,OAAO40G,YAAU50G,EAAO60G,kBAAkBC,sBAG5C,IAAAE,YAAiBD,U,iDClBJ/zG,OAAM,WAOjB,SAAmEA,EAAAic,GAAA,IAAtD3b,EAAQ2b,EAAR3b,SAAUD,EAAM4b,EAAN5b,OAAQggC,EAAOpkB,EAAPokB,QAAS9/B,EAAI0b,EAAJ1b,KAAMg9D,EAAOthD,EAAPshD,QAAOgF,gBAAA,KAAAviE,GAFrD,KAAOu9D,SAAG,EAGRl8D,KAAKf,SAAWA,EAChBe,KAAKhB,OAASA,EACdgB,KAAKg/B,QAAUA,EACfh/B,KAAKd,KAAOA,EACZc,KAAKk8D,QAAUA,EA8BhB,OA7BAwF,aAAA/iE,EAAA,EAAAV,IAAA,YAAAN,MAED,SAAUmB,GACgB,OAApBA,EAAOG,WACTe,KAAKf,SAAWH,EAAOG,UAEH,OAAlBH,EAAOE,SACTgB,KAAKhB,OAASF,EAAOE,QAEA,OAAnBF,EAAOkgC,UACTh/B,KAAKg/B,QAAUlgC,EAAOkgC,SAEJ,OAAhBlgC,EAAOI,OACTc,KAAKd,KAAOJ,EAAOI,MAEE,OAAnBJ,EAAOo9D,UACTl8D,KAAKk8D,QAAUp9D,EAAOo9D,WAEzB,CAAAj+D,IAAA,QAAAN,MAaD,WACE,OAAO,IAAIgB,EAAO,CAChBM,SAAUe,KAAKf,SACfD,OAAQgB,KAAKhB,OACbggC,QAASh/B,KAAKg/B,QACd9/B,KAAMc,KAAKd,KAAO0zG,YAAU5yG,KAAKd,MAAQ,KACzCg9D,QAASl8D,KAAKk8D,aAEjB,EAAAj+D,IAAA,QAAAN,MAnBD,WAAyE,IAAAod,EAAA1S,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAAF,GAAzDpJ,EAAQ8b,EAAR9b,SAAUD,EAAM+b,EAAN/b,OAAQggC,EAAOjkB,EAAPikB,QAAS9/B,EAAI6b,EAAJ7b,KAAMg9D,EAAOnhD,EAAPmhD,QAE7C,OAAO,IAAIv9D,EAAO,CAChBM,SAAkB,OAARA,QAAA,IAAAA,IAAY,KACtBD,OAAc,OAANA,QAAA,IAAAA,IAAU,KAClBggC,QAAgB,OAAPA,QAAA,IAAAA,IAAW,KACpB9/B,KAAU,OAAJA,QAAA,IAAAA,IAAQ,KACdg9D,QAAgB,OAAPA,QAAA,IAAAA,WAEZv9D,EA1CgB,GCVPk0G,OAAZ,SAAYA,GACVA,IAAA,4CACAA,IAAA,0CACAA,IAAA,8BACAA,IAAA,uBAJF,CAAYA,cAKX,KAED,IAAsBC,MAAK,oBAAAA,IAAA5xC,gBAAA,KAAA4xC,GAiBxB,OAjBwBpxC,aAAAoxC,EAAA,EAAA70G,IAAA,WAAAV,IAKzB,WACE,MAAyB,KAArByC,KAAK6jE,YACA7jE,KAAK9C,KAEN,GAAN8iB,OAAUhgB,KAAK6jE,YAAe,KAAA7jD,OAAAhgB,KAAK9C,QAEtC,CAAAe,IAAA,WAAAN,MAID,WACE,MAAW,IAAAqiB,OAAAhgB,KAAK9C,KAAI,SACrB41G,EAjBwB,G,qiBCL3B,IAAaC,aAAa,SAAAtlB,GAAA1qB,UAAAgwC,EAAAtlB,GAAA,IAAAhkB,EAAAupC,gBAAAD,GAAA,SAAAA,IAAA,OAAA7xC,gBAAA,KAAA6xC,GAAAtpC,EAAAxtE,MAAA,KAAAoM,WAGvB,OAHuBq5D,aAAAqxC,EAAA,OAAA90G,IAAA,QAAAN,MACxB,SAAa6c,GACX,OAAO,IAAIu4F,EAAa,iBAAmBv4F,OAC5Cu4F,EAHuB,CAAQ1lB,WCF3B,MAAM4lB,YACX,mECEIC,qBAAuB,IAC7B,IAAIC,KAAMC,WACNC,SAAWC,KACRH,MAAQA,KAAK73G,OAASg4G,GACzBH,KAAOvW,OAAOoH,YAAYsP,EAAQJ,sBAClCK,OAAAC,eAAeL,MACfC,WAAa,GACJA,WAAaE,EAAQH,KAAK73G,SACnCi4G,OAAAC,eAAeL,MACfC,WAAa,GAEfA,YAAcE,GAuBLG,OAASA,CAAClnF,EAAO,MAC1B8mF,SAAU9mF,GAAQ,GAClB,IAAIrZ,EAAK,GACT,IAAK,IAAI9X,EAAIg4G,WAAa7mF,EAAMnxB,EAAIg4G,WAAYh4G,IAC9C8X,GAAM+/F,YAAsB,GAAVE,KAAK/3G,IAEzB,OAAO8X,GC3CT,IAAIwgG,aAAavtC,YACbwtC,eAAeptC,eAGfqtC,UAAY,kBA4BhB,SAASC,SAASl2G,GAChB,MAAuB,iBAATA,GACXg2G,eAAah2G,IAAU+1G,aAAW/1G,IAAUi2G,UAGjD,IAAAE,WAAiBD,S,+CC5BjB,SAASE,WAAShxE,EAAOk3D,GACvB,IAAIxkF,GAAS,EACTna,EAAkB,MAATynC,EAAgB,EAAIA,EAAMznC,OACnCa,EAASiH,MAAM9H,GAEnB,QAASma,EAAQna,EACfa,EAAOsZ,GAASwkF,EAASl3D,EAAMttB,GAAQA,EAAOstB,GAEhD,OAAO5mC,EAGT,IAAA63G,UAAiBD,WCpBbE,aAAa9tC,YACb+tC,eAAe3tC,eAGf4tC,UAAY,kBAmBhB,SAASC,WAASz2G,GAChB,MAAuB,iBAATA,GACXu2G,eAAav2G,IAAUs2G,aAAWt2G,IAAUw2G,UAGjD,IAAAE,WAAiBD,WC5BbE,UAAUjuC,UACVkuC,WAAWF,WAGXG,aAAe,mDACfC,cAAgB,QAUpB,SAASC,QAAM/2G,EAAOS,GACpB,GAAIk2G,UAAQ32G,GACV,OAAO,EAET,IAAI8C,SAAc9C,EAClB,QAAY,UAAR8C,GAA4B,UAARA,GAA4B,WAARA,GAC/B,MAAT9C,IAAiB42G,WAAS52G,MAGvB82G,cAAcpqC,KAAK1sE,KAAW62G,aAAanqC,KAAK1sE,IAC1C,MAAVS,GAAkBT,KAASpC,OAAO6C,IAGvC,IAAAu2G,OAAiBD,QC5BbE,SAAW3b,UAGX4b,gBAAkB,sBA8CtB,SAASC,UAAQ5+E,EAAMmsC,GACrB,GAAmB,mBAARnsC,GAAmC,MAAZmsC,GAAuC,mBAAZA,EAC3D,MAAM,IAAIhB,UAAUwzC,iBAEtB,IAAIE,EAAW,WACb,IAAIlmE,EAAOxmC,UACPpK,EAAMokE,EAAWA,EAASpmE,MAAM+D,KAAM6uC,GAAQA,EAAK,GACnDmmE,EAAQD,EAASC,MAErB,GAAIA,EAAM1lF,IAAIrxB,GACZ,OAAO+2G,EAAMz3G,IAAIU,GAEnB,IAAI9B,EAAS+5B,EAAKj6B,MAAM+D,KAAM6uC,GAE9B,OADAkmE,EAASC,MAAQA,EAAM/zG,IAAIhD,EAAK9B,IAAW64G,EACpC74G,GAGT,OADA44G,EAASC,MAAQ,IAAKF,UAAQG,OAASL,UAChCG,EAITD,UAAQG,MAAQL,SAEhB,IAAAM,UAAiBJ,UCxEbK,QAAUD,UAGVE,iBAAmB,IAUvB,SAASC,gBAAcn/E,GACrB,IAAI/5B,EAASg5G,QAAQj/E,GAAM,SAASj4B,GAIlC,OAHI+2G,EAAMzoF,OAAS6oF,kBACjBJ,EAAMrzG,QAED1D,KAGL+2G,EAAQ74G,EAAO64G,MACnB,OAAO74G,EAGT,IAAAm5G,eAAiBD,gBCzBbE,cAAgBD,eAGhBE,WAAa,mGAGbC,aAAe,WASfC,eAAeH,eAAc,SAAS1lC,GACxC,IAAI1zE,EAAS,GAOb,OAN6B,KAAzB0zE,EAAOnpB,WAAW,IACpBvqD,EAAOP,KAAK,IAEdi0E,EAAOjoD,QAAQ4tF,YAAY,SAAS3+E,EAAOk5C,EAAQ4lC,EAAOC,GACxDz5G,EAAOP,KAAK+5G,EAAQC,EAAUhuF,QAAQ6tF,aAAc,MAAS1lC,GAAUl5C,MAElE16B,KAGT05G,cAAiBH,eC1BbI,SAASjxC,UACTkxC,WAAW/B,UACXgC,UAAU3vC,UACV4vC,WAAW5B,WAGX6B,WAAW,IAGXC,YAAcL,SAASA,SAAOt6G,eAAY2D,EAC1Ci3G,eAAiBD,YAAcA,YAAYjxC,cAAW/lE,EAU1D,SAASk3G,eAAa14G,GAEpB,GAAoB,iBAATA,EACT,OAAOA,EAET,GAAIq4G,UAAQr4G,GAEV,OAAOo4G,WAASp4G,EAAO04G,gBAAgB,GAEzC,GAAIJ,WAASt4G,GACX,OAAOy4G,eAAiBA,eAAe16G,KAAKiC,GAAS,GAEvD,IAAIxB,EAAUwB,EAAQ,GACtB,MAAkB,KAAVxB,GAAkB,EAAIwB,IAAWu4G,WAAY,KAAO/5G,EAG9D,IAAAm6G,cAAiBD,eCpCbE,aAAeD,cAuBnB,SAASE,WAAS74G,GAChB,OAAgB,MAATA,EAAgB,GAAK44G,aAAa54G,GAG3C,IAAA84G,WAAiBD,WC3BbE,UAAUrwC,UACVswC,MAAQhC,OACRiC,aAAef,cACf3wC,SAAWuxC,WAUf,SAASI,WAASl5G,EAAOS,GACvB,OAAIs4G,UAAQ/4G,GACHA,EAEFg5G,MAAMh5G,EAAOS,GAAU,CAACT,GAASi5G,aAAa1xC,SAASvnE,IAGhE,IAAAm5G,UAAiBD,WCNjB,SAASE,OAAKh0E,GACZ,IAAIznC,EAAkB,MAATynC,EAAgB,EAAIA,EAAMznC,OACvC,OAAOA,EAASynC,EAAMznC,EAAS,QAAK6D,EAGtC,IAAA63G,OAAiBD,OCnBbE,SAAW5C,WAGX6C,SAAW,IASf,SAASC,QAAMx5G,GACb,GAAoB,iBAATA,GAAqBs5G,SAASt5G,GACvC,OAAOA,EAET,IAAIxB,EAAUwB,EAAQ,GACtB,MAAkB,KAAVxB,GAAkB,EAAIwB,IAAWu5G,SAAY,KAAO/6G,EAG9D,IAAAi7G,OAAiBD,QCpBbE,WAAWP,UACXQ,QAAQF,OAUZ,SAASG,UAAQn5G,EAAQuuC,GACvBA,EAAO0qE,WAAS1qE,EAAMvuC,GAEtB,IAAIqX,EAAQ,EACRna,EAASqxC,EAAKrxC,OAElB,MAAiB,MAAV8C,GAAkBqX,EAAQna,EAC/B8C,EAASA,EAAOk5G,QAAM3qE,EAAKl3B,OAE7B,OAAQA,GAASA,GAASna,EAAU8C,OAASe,EAG/C,IAAAq4G,SAAiBD,UCdjB,SAASE,YAAU10E,EAAOhkC,EAAOyG,GAC/B,IAAIiQ,GAAS,EACTna,EAASynC,EAAMznC,OAEfyD,EAAQ,IACVA,GAASA,EAAQzD,EAAS,EAAKA,EAASyD,GAE1CyG,EAAMA,EAAMlK,EAASA,EAASkK,EAC1BA,EAAM,IACRA,GAAOlK,GAETA,EAASyD,EAAQyG,EAAM,EAAMA,EAAMzG,IAAW,EAC9CA,KAAW,EAEX,IAAI5C,EAASiH,MAAM9H,GACnB,QAASma,EAAQna,EACfa,EAAOsZ,GAASstB,EAAMttB,EAAQ1W,GAEhC,OAAO5C,EAGT,IAAAu7G,WAAiBD,YC9BbE,UAAUH,SACVI,UAAYF,WAUhB,SAASG,SAAOz5G,EAAQuuC,GACtB,OAAOA,EAAKrxC,OAAS,EAAI8C,EAASu5G,UAAQv5G,EAAQw5G,UAAUjrE,EAAM,GAAI,IAGxE,IAAAmrE,QAAiBD,SCfbE,WAAWjB,UACXkB,KAAOhB,OACPpgF,OAASkhF,QACTG,QAAQb,OAUZ,SAASc,YAAU95G,EAAQuuC,GAGzB,OAFAA,EAAOorE,WAASprE,EAAMvuC,GACtBA,EAASw4B,OAAOx4B,EAAQuuC,GACP,MAAVvuC,UAAyBA,EAAO65G,QAAMD,KAAKrrE,KAGpD,IAAAwrE,WAAiBD,YCnBbE,aAAajyC,YACbkyC,aAAe5S,cACf6S,eAAe/xC,eAGfgyC,UAAY,kBAGZC,UAAY/zC,SAASjpE,UACrBi9G,YAAcl9G,OAAOC,UAGrBk9G,aAAeF,UAAUtzC,SAGzBzpE,eAAiBg9G,YAAYh9G,eAG7Bk9G,iBAAmBD,aAAah9G,KAAKH,QA8BzC,SAASq9G,gBAAcj7G,GACrB,IAAK26G,eAAa36G,IAAUy6G,aAAWz6G,IAAU46G,UAC/C,OAAO,EAET,IAAIz0C,EAAQu0C,aAAa16G,GACzB,GAAc,OAAVmmE,EACF,OAAO,EAET,IAAIq9B,EAAO1lG,eAAeC,KAAKooE,EAAO,gBAAkBA,EAAMllE,YAC9D,MAAsB,mBAARuiG,GAAsBA,aAAgBA,GAClDuX,aAAah9G,KAAKylG,IAASwX,iBAG/B,IAAAE,gBAAiBD,gBC7DbE,cAAgBD,gBAWpB,SAASE,kBAAgBp7G,GACvB,OAAOm7G,cAAcn7G,QAASwB,EAAYxB,EAG5C,IAAAq7G,iBAAiBD,kBCfbE,SAASp0C,UACTq0C,cAAc7c,cACd8c,UAAU9yC,UAGV+yC,iBAAmBH,SAASA,SAAOI,wBAAqBl6G,EAS5D,SAASm6G,gBAAc37G,GACrB,OAAOw7G,UAAQx7G,IAAUu7G,cAAYv7G,OAChCy7G,kBAAoBz7G,GAASA,EAAMy7G,mBAG1C,IAAAG,eAAiBD,gBCnBbE,UAAYlU,WACZmU,cAAgBF,eAapB,SAASG,cAAY32E,EAAO42E,EAAO3pB,EAAW4pB,EAAUz9G,GACtD,IAAIsZ,GAAS,EACTna,EAASynC,EAAMznC,OAEnB00F,IAAcA,EAAYypB,eAC1Bt9G,IAAWA,EAAS,IAEpB,QAASsZ,EAAQna,EAAQ,CACvB,IAAIqC,EAAQolC,EAAMttB,GACdkkG,EAAQ,GAAK3pB,EAAUryF,GACrBg8G,EAAQ,EAEVD,cAAY/7G,EAAOg8G,EAAQ,EAAG3pB,EAAW4pB,EAAUz9G,GAEnDq9G,UAAUr9G,EAAQwB,GAEVi8G,IACVz9G,EAAOA,EAAOb,QAAUqC,GAG5B,OAAOxB,EAGT,IAAA09G,aAAiBH,cCrCbI,YAAcD,aAgBlB,SAASE,UAAQh3E,GACf,IAAIznC,EAAkB,MAATynC,EAAgB,EAAIA,EAAMznC,OACvC,OAAOA,EAASw+G,YAAY/2E,EAAO,GAAK,GAG1C,IAAAi3E,UAAiBD,UCXjB,SAASE,QAAM/jF,EAAMgkF,EAASrrE,GAC5B,OAAQA,EAAKvzC,QACX,KAAK,EAAG,OAAO46B,EAAKx6B,KAAKw+G,GACzB,KAAK,EAAG,OAAOhkF,EAAKx6B,KAAKw+G,EAASrrE,EAAK,IACvC,KAAK,EAAG,OAAO3Y,EAAKx6B,KAAKw+G,EAASrrE,EAAK,GAAIA,EAAK,IAChD,KAAK,EAAG,OAAO3Y,EAAKx6B,KAAKw+G,EAASrrE,EAAK,GAAIA,EAAK,GAAIA,EAAK,IAE3D,OAAO3Y,EAAKj6B,MAAMi+G,EAASrrE,GAG7B,IAAAsrE,OAAiBF,QCpBbh+G,MAAQk+G,OAGRC,YAAYnzG,KAAKyK,IAWrB,SAAS2oG,WAASnkF,EAAMn3B,EAAOi1B,GAE7B,OADAj1B,EAAQq7G,iBAAoBj7G,IAAVJ,EAAuBm3B,EAAK56B,OAAS,EAAKyD,EAAO,GAC5D,WACL,IAAI8vC,EAAOxmC,UACPoN,GAAS,EACTna,EAAS8+G,YAAUvrE,EAAKvzC,OAASyD,EAAO,GACxCgkC,EAAQ3/B,MAAM9H,GAElB,QAASma,EAAQna,EACfynC,EAAMttB,GAASo5B,EAAK9vC,EAAQ0W,GAE9BA,GAAS,EACT,IAAI6kG,EAAYl3G,MAAMrE,EAAQ,GAC9B,QAAS0W,EAAQ1W,EACfu7G,EAAU7kG,GAASo5B,EAAKp5B,GAG1B,OADA6kG,EAAUv7G,GAASi1B,EAAU+O,GACtB9mC,MAAMi6B,EAAMl2B,KAAMs6G,IAI7B,IAAAC,UAAiBF,WChBjB,SAASG,WAAS78G,GAChB,OAAO,WACL,OAAOA,GAIX,IAAA88G,WAAiBD,WCTjB,SAASE,WAAS/8G,GAChB,OAAOA,EAGT,IAAAg9G,WAAiBD,WCpBbE,SAAWH,WACXp9G,eAAiBwB,gBACjBg8G,WAAWF,WAUXG,kBAAmBz9G,eAA4B,SAAS64B,EAAM25C,GAChE,OAAOxyE,eAAe64B,EAAM,WAAY,CACtC,cAAgB,EAChB,YAAc,EACd,MAAS0kF,SAAS/qC,GAClB,UAAY,KALwBgrC,WASxCE,iBAAiBD,kBCpBbE,UAAY,IACZC,SAAW,GAGXC,UAAY16D,KAAKC,IAWrB,SAAS06D,WAASjlF,GAChB,IAAIklF,EAAQ,EACRC,EAAa,EAEjB,OAAO,WACL,IAAIC,EAAQJ,YACRK,EAAYN,UAAYK,EAAQD,GAGpC,GADAA,EAAaC,EACTC,EAAY,GACd,KAAMH,GAASJ,UACb,OAAO3yG,UAAU,QAGnB+yG,EAAQ,EAEV,OAAOllF,EAAKj6B,WAAMkD,EAAWkJ,YAIjC,IAAAmzG,UAAiBL,WCpCbM,gBAAkBV,iBAClBW,SAAWF,UAUXG,cAAcD,SAASD,iBAE3BG,aAAiBD,cCbb9pC,QAAUmoC,UACV6B,WAAWtB,UACXuB,cAAcF,aASlB,SAASG,WAAS7lF,GAChB,OAAO4lF,cAAYD,WAAS3lF,OAAM/2B,EAAW0yE,SAAU37C,EAAO,IAGhE,IAAA8lF,UAAiBD,WCfbE,WAAWjI,UACXkI,UAAY5J,WACZ6J,UAAYhE,WACZiE,WAAWtF,UACXuF,WAAa/gB,YACbghB,gBAAkBtD,iBAClBuD,WAAWP,UACXQ,aAAepV,cAGfqV,gBAAkB,EAClBC,gBAAkB,EAClBC,mBAAqB,EAsBrBr8B,KAAOi8B,YAAS,SAASn+G,EAAQw+G,GACnC,IAAIzgH,EAAS,GACb,GAAc,MAAViC,EACF,OAAOjC,EAET,IAAI+nG,GAAS,EACb0Y,EAAQX,WAASW,GAAO,SAASjwE,GAG/B,OAFAA,EAAOyvE,WAASzvE,EAAMvuC,GACtB8lG,IAAWA,EAASv3D,EAAKrxC,OAAS,GAC3BqxC,KAET0vE,WAAWj+G,EAAQo+G,aAAap+G,GAASjC,GACrC+nG,IACF/nG,EAAS+/G,UAAU//G,EAAQsgH,gBAAkBC,gBAAkBC,mBAAoBL,kBAErF,IAAIhhH,EAASshH,EAAMthH,OACnB,MAAOA,IACL6gH,UAAUhgH,EAAQygH,EAAMthH,IAE1B,OAAOa,KAGT0gH,OAAiBv8B,K,4kBClCV,IAAMw8B,cAAgBr0B,EAAErqF,OAAO,CACpC8U,GAAIu1E,EAAE5Y,SACDwH,GAAGoR,EAAE1Y,UAAS,YACN,kBAAM0jC,OAAO,OAC1B9yG,OAAQ8nF,EAAC,cAAY50D,QAChBwjD,GAAGoR,EAAE5Y,UACE,WAACh8C,OAAO88D,SACf38D,WAAU,SAAA9P,GACT,OAAIkjD,WAASljD,GACJ2P,OAAO88D,QAAQpnF,UAAU2a,GAE3BA,KACP,WAAS2P,OAAO88D,SACjBlZ,SAAS,+BACd34E,OAAQ2pF,EAAC,cAAY9pF,QAChB04E,GAAGoR,EAAE1Y,UACE,WAACpxE,OAAOgyF,SACf38D,WAAU,SAAA9P,GACT,OAAI64F,WAAS74F,GAAavlB,OAAOgyF,MAAM,CAAC1xF,SAAUilB,IAC3CA,KAERuzD,SAAS,iCAMMulC,iBACpB,SAAAC,GAAAl6C,UAAAi6C,EAAAC,GAAA,IAAAxzC,EAAAyzC,gBAAAF,GAeA,SAAYA,EAAAG,EAA+B3sG,GAAwB,IAAA/K,EAQtD,OARsDy7D,gBAAA,KAAA87C,GACjEv3G,EAAAgkE,EAAA/tE,KAAA,MAVF+J,EAAM23G,OAAsB,KAE5B33G,EAAY43G,aAAqB,KACjC53G,EAAO63G,QAA2B,KAGlC73G,EAAgB83G,iBAAW,KAC3B93G,EAAqBwP,sBAAW,KAK9BxP,EAAK+3G,MAAQL,EAEb13G,EAAKg4G,UAAYjtG,EACjB/K,EAAK23G,OAAS33G,EAAKi4G,WAAWltG,GAE9B/K,EAAKmO,OAAMnO,EAyJZ,OAxJAi8D,aAAAs7C,EAAA,EAAA/+G,IAAA,OAAAN,MAES,cAET,CAAAM,IAAA,OAAAV,IAID,WACE,OAAOs1G,MAAMmK,mBACd,CAAA/+G,IAAA,OAAAV,IAED,WACE,OAAOyC,KAAKw9G,MAAMtgH,OACnB,CAAAe,IAAA,cAAAV,IAED,WACE,OAAOyC,KAAKw9G,MAAM35C,cACnB,CAAA5lE,IAAA,UAAAV,IAED,WACE,OAAOyC,KAAKw9G,MAAMG,UACnB,CAAA1/G,IAAA,aAAAV,IAED,WACE,OAAOyC,KAAKw9G,MAAMjxB,aACnB,CAAAtuF,IAAA,aAAAV,IAED,WACE,OAAOyC,KAAKw9G,MAAMI,aACnB,CAAA3/G,IAAA,SAAAN,MAED,SAAOkgH,EAAgCC,GACrC99G,KAAKs9G,QAAUO,EACf79G,KAAKq9G,aAAeS,IACrB,CAAA7/G,IAAA,QAAAN,MAED,WACE,OAAOqC,KAAKo9G,SACb,CAAAn/G,IAAA,OAAAN,MAED,SAAwCM,GACtC,OAAO+B,KAAKo9G,OAAOn/G,KACpB,CAAAA,IAAA,KAAAV,IAED,WACE,OAAOyC,KAAK+9G,KAAK,QAClB,CAAA9/G,IAAA,SAAAV,IAED,WACE,OAAOyC,KAAK+9G,KAAK,YAClB,CAAA9/G,IAAA,SAAAV,IAED,WACE,OAAOyC,KAAK+9G,KAAK,YAClB,CAAA9/G,IAAA,SAAAV,IAED,WACE,OAAOyC,KAAKs9G,UACb,CAAAr/G,IAAA,gBAAAV,IAED,WACE,IAAIpB,EAAS6D,KAAKs9G,QAClB,GAAe,OAAXnhH,EACF,OAAO,KAET,MAAyB,OAAlBA,EAAO0hH,OACZ1hH,EAASA,EAAO0hH,OAElB,OAAO1hH,IACR,CAAA8B,IAAA,cAAAV,IAED,WACE,OAAOyC,KAAKq9G,eACb,CAAAp/G,IAAA,aAAAN,MAEO,SAAW6S,GACjB,IAAMrU,EAAS6D,KAAK49G,WAAW/mC,UAAUrmE,GACzC,IAAuB,IAAnBrU,EAAOmsE,QACT,MAAMyqC,aAAapiB,MAAMx0F,EAAOqoB,MAAMwG,SAExC,OAAO7uB,EAAOrB,OACf,CAAAmD,IAAA,uBAAAN,MASD,SAAqBqgH,G,MACfC,EAAMj+G,KAAKuB,gBAAgBy8G,GAC/B,GAAIh+G,KAAKlB,OAAOI,KAAM,CACpB,IAAAg/G,EAAwBl+G,KAAKlB,OAAOI,KAA7BQ,EAAMw+G,EAANx+G,OAAQC,EAAKu+G,EAALv+G,MACfs+G,EAAMA,GAAOv+G,EAAS,GAAKC,EAAQD,EAErC,IAAMs/B,EAAiC,QAAvBglC,EAAAhkE,KAAKlB,OAAOkgC,eAAW,IAAAglC,IAAA,EACjCm6C,EAAal3G,KAAKyK,IAAI,EAAG1R,KAAKW,OAAOkD,UAAU0oB,KAAO,GAC5D,OAAO0xF,EAAME,EAAan/E,IAC3B,CAAA/gC,IAAA,WAAAN,MAED,WACE,MAAM,GAANqiB,OAAUhgB,KAAK9C,KAAQ,KAAA8iB,OAAAhgB,KAAKkT,GAAE,OAC/B,CAAAjV,IAAA,kBAAAN,MAED,WACE,MAAO,GAAAqiB,OAAGhgB,KAAK9C,MAAI,GAAA8iB,OACM,OAAhBhgB,KAAK69G,OAAkB,GAAE,QAAA79F,OAAWhgB,KAAK89G,YAAY5gH,OAAQ,WAAA8iB,OACrDhgB,KAAKo+G,gBACL,WAAAp+F,OAAAhgB,KAAKq+G,gBAAgB,UAAAr+F,OACtBhgB,KAAKs+G,iBACtB,CAAArgH,IAAA,eAAAN,MAED,WACE,IAAM4gH,EAAgBv+G,KAAKW,OAAO2vF,WAAWprB,WACvCs5C,EAAcx+G,KAAKW,OAAOkD,UAAY7D,KAAKW,OAAOkD,UAAUqhE,WAAa,IAC/E,MAAW,IAAAllD,OAAAu+F,EAAa,QAAAv+F,OAAOw+F,EAAW,OAC3C,CAAAvgH,IAAA,eAAAN,MAED,WACE,IAAM8gH,EAAqD,GAgB3D,GAdAA,EAAS7iH,KAAK,CAAC,cAAeoE,KAAKu9G,iBAAoBv9G,KAAKu9G,iBAAmB,IAAO,MACtFkB,EAAS7iH,KAAK,CAAC,iBAAkBoE,KAAKiV,sBAAyBjV,KAAKiV,sBAAwB,IAAO,MAC/FjV,KAAKlB,OAAOG,UACdw/G,EAAS7iH,KAAK,CAAC,MAAOoE,KAAKlB,OAAOG,SAAW,MAE3Ce,KAAKlB,OAAOE,QACdy/G,EAAS7iH,KAAK,CAAC,SAAUoE,KAAKlB,OAAOE,OAAS,MAE5CgB,KAAKlB,OAAOkgC,SACdy/E,EAAS7iH,KAAK,CAAC,UAAWoE,KAAKlB,OAAOkgC,QAAU,MAE9Ch/B,KAAKlB,OAAOo9D,SACduiD,EAAS7iH,KAAK,CAAC,UAAWoE,KAAKlB,OAAOo9D,UAEpCl8D,KAAKlB,OAAOI,KAAM,CACpB,IAAMA,EAAOc,KAAKlB,OAAOI,KACzBu/G,EAAS7iH,KAAK,CAAC,OAAkB,UAAAokB,OAAA9gB,EAAKS,MAAiB,aAAAqgB,OAAA9gB,EAAKQ,OAAM,OAEpE,IAAMg/G,EAAUD,EAASx6G,KAAI,SAAA2W,GAAA,IAAAG,EAAAszD,eAAAzzD,EAAA,GAAE+vB,EAAC5vB,EAAA,GAAE4jG,EAAC5jG,EAAA,SAAS,GAAAiF,OAAA2qB,EAAC,KAAA3qB,OAAI2+F,MAAK92F,KAAK,MAE3D,MAAM,IAAN7H,OAAW0+F,EAAO,OACnB,CAAAzgH,IAAA,cAAAN,MAED,WACE,IAAMihH,EAAaC,OAAK7+G,KAAKwQ,QAAS,CAAC,KAAM,SAAU,WACjDsuG,EAAevjH,OAAO0nF,QAAQ27B,GAC/B36G,KAAI,SAAA0b,GAAA,IAAAo/F,EAAA1wC,eAAA1uD,EAAA,GAAEgrB,EAACo0E,EAAA,GAAEJ,EAACI,EAAA,YAAA/+F,OAAS2qB,EAAC,KAAA3qB,OAAIg/F,WAASL,GAAKjoF,KAAKjL,UAAUkzF,GAAKA,MAC1D92F,KAAK,MACV,MAAM,IAAN7H,OAAW8+F,EAAY,SACxB9B,EAhLD,CAAQlK,OClDGmM,OAAM,WAKjB,SAAAA,EAAoBh7C,EAAc9a,EAAgBsiC,GAAWvqB,gBAAA,KAAA+9C,GAC3Dj/G,KAAKikE,IAAS,OAAHA,QAAA,IAAAA,IAAO,KAClBjkE,KAAKmpD,MAAa,OAALA,QAAA,IAAAA,IAAS,KACtBnpD,KAAKyrF,GAAO,OAAFA,QAAA,IAAAA,IAAM,KAiBjB,OAhBA/pB,aAAAu9C,EAAA,EAAAhhH,IAAA,kBAAAN,MAED,WACE,OAAoB,OAAbqC,KAAKikE,OACb,EAAAhmE,IAAA,QAAAN,MAED,SAAauhH,EAAezzB,GAC1B,OAAO,IAAIwzB,EAAO,KAAMC,EAAS,OAAFzzB,QAAA,IAAAA,IAAMyzB,KACtC,CAAAjhH,IAAA,MAAAN,MAMD,SAAWwhH,GACT,OAAO,IAAIF,EAAOE,OACnBF,EAzBgB,G,qiBCEnB,IAAaG,WAAW,SAAA3xB,GAAA1qB,UAAAq8C,EAAA3xB,GAAA,IAAAhkB,EAAA41C,gBAAAD,GAAA,SAAAA,IAAA,OAAAl+C,gBAAA,KAAAk+C,GAAA31C,EAAAxtE,MAAA,KAAAoM,WAerB,OAfqBq5D,aAAA09C,EAAA,OAAAnhH,IAAA,QAAAN,MACtB,SAAa6c,GACX,OAAO,IAAI4kG,EAAW,eAAiB5kG,KACxC,CAAAvc,IAAA,gBAAAN,MAED,SAAqBgvC,EAAcnyB,GACjC,IAAMwQ,EAAO,gCAAAhL,OAAmC2sB,EAAI,MAAA3sB,OAAKxF,GACzD,OAAO4kG,EAAWzuB,MAAM3lE,KACzB,CAAA/sB,IAAA,iBAAAN,MAED,SAAsBgvC,EAAc2yE,GAClC,IAAM/2F,EAAMmO,KAAKjL,UAAU6zF,GACrBt0F,EAAO,4CAAAhL,OAA+C2sB,EAAI,gBAAA3sB,OAAeuI,GAE/E,OADAhmB,QAAQiiB,MAAMwG,GACP,IAAIo0F,EAAWp0F,OACvBo0F,EAfqB,CAAQ/xB,WCGnBkyB,aAAY,WAKvB,SAA0EA,IAAA,IAA9D/uG,EAA4DnI,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,MAAE64D,gBAAA,KAAAq+C,GAJzD,KAAMnC,OAAuD,GAE9E,KAAYoC,aAAwB,GAGlCx/G,KAAKo9G,OAAS5sG,EA6Bf,OA5BAkxD,aAAA69C,EAAA,EAAAthH,IAAA,YAAAN,MAED,SAAuDM,GACrD,OAAO+B,KAAKo9G,OAAOn/G,KACpB,CAAAA,IAAA,OAAAN,MAED,SAAK8hH,GACHC,OAAOD,EAAc3sC,WAAW,KAAyD,mDAAA9yD,OAAAy/F,IACzF,IAAMxhH,EAAMwhH,EAAc3tD,UAAU,GACpC,KAAM7zD,KAAO+B,KAAKo9G,QAChB,MAAM,IAAIhpD,MAAgC,0BAAAp0C,OAAA/hB,EAAG,mBAAA+hB,OAAkBhgB,KAAK2/G,mBAEtE,OAAO/M,YAAU5yG,KAAKo9G,OAAOn/G,MAC9B,CAAAA,IAAA,kBAAAN,MAED,SAAsBmmF,EACA87B,GAEqB,IADrBC,EAAgCx3G,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,QAAAlJ,EAChCkvC,EAAAhmC,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,QAAYlJ,EAC1B2gH,EAAWF,GAAkC,kBAAdC,EAA6B,IAAA7/F,OAAA6/F,EAAe,SACjF7/G,KAAKw/G,aAAa5jH,KAAKkkH,GACvB,IAAMx8G,EAAMwgF,EAAGz1C,GAEf,OADAruC,KAAKw/G,aAAaj3C,MACXjlE,IACR,CAAArF,IAAA,iBAAAN,MAED,WACE,OAAOqC,KAAKw/G,aAAa33F,KAAK,SAC/B03F,EAnCsB,G,qiBCFlB,IAAMQ,aAAejD,cAAc3pG,OAAO,IAG3B6sG,cAAoD,SAAAC,GAAAl9C,UAAAi9C,EAAAC,GAAA,IAAAx2C,EAAAy2C,gBAAAF,GAAA,SAAAA,IAAA,OAAA9+C,gBAAA,KAAA8+C,GAAAv2C,EAAAxtE,MAAA,KAAAoM,WAYvE,OAZuEq5D,aAAAs+C,EAAA,EAAA/hH,IAAA,gBAAAN,MACxE,WACE,MAAO,KACR,CAAAM,IAAA,kBAAAN,MAED,SAAgBqgH,G,MACd,OAA+B,QAAxBh6C,EAAAhkE,KAAKlB,OAAOG,gBAAY,IAAA+kE,IAAAg6C,EAAIz9C,OAAO4/C,kBAC3C,CAAAliH,IAAA,UAAAN,MAED,SAAQqgH,EAAuC55F,GAC7CpkB,KAAKu9G,kBAAoBn5F,EACzBpkB,KAAKiV,uBAAyBmP,MAC/B47F,EAZuE,CAAQhD,kBCFrEoD,gBAAkB,c,qiBCMxB,IAAMC,kBAAoBN,aAAa5sG,OAAO,CACnDvI,IAAK69E,EAAE5Y,WAGIywC,aAAoD,SAAAC,GAAAx9C,UAAAu9C,EAAAC,GAAA,IAAA92C,EAAA+2C,gBAAAF,GAC/D,SAAAA,EAAY9vG,GAA+D,OAAA0wD,gBAAA,KAAAo/C,GACnE72C,EAAA/tE,KAAA,MACJwB,KAAM,MACN2mE,YAAau8C,gBACbzC,QAAS,GACTpxB,WAAY,MACZqxB,WAAYyC,mBACX7vG,GAuBJ,OAtBAkxD,aAAA4+C,EAAA,EAAAriH,IAAA,MAAAV,IAED,WACE,OAAOyC,KAAK+9G,KAAK,SAClB,CAAA9/G,IAAA,WAAAN,MAED,WACE,OAAOkhH,OAAK7+G,KAAKy9G,UAAW,CAAC,UAC9B,CAAAx/G,IAAA,UAAAN,MAED,SAA8CM,GAC5C,OAAO+B,KAAKygH,WAAWxiH,KACxB,CAAAA,IAAA,QAAAN,MAYD,WACE,OAAO,IAAI2iH,EAA0B,CACnC11G,IAAK5K,KAAK4K,IACVsI,GAAIlT,KAAKkT,GACTvS,OAAQX,KAAKW,OAAOsB,QACpBnD,OAAQkB,KAAKlB,OAAOmD,aAEvB,EAAAhE,IAAA,SAAAN,MAfD,SAAqD+iH,EAAiFlwG,GACpI,OAAI42D,WAASs5C,GACJ,IAAIJ,EAA2B/kH,OAAAiE,OAAA,CAAAoL,IAAK81G,GAAelwG,IAEnD,IAAI8vG,EAA0BI,OAExCJ,EA/B8D,CAAQN,eA4CzE,SAASW,UAA8C/1G,EAAa4F,GAClE,OACS,IAAI8vG,aADA,MAAT9vG,EACgC,CAAC5F,OAEdrP,OAAAiE,OAAA,CAAYoL,OAAQ4F,IAI7C,IAAaowG,WAAU,WAIrB,SAAAA,IAAA1/C,gBAAA,KAAA0/C,GACE5gH,KAAKo9G,OAAS,CACZz8G,OAAQkzB,OAAO88D,QACf7xF,OAAQH,OAAOgyF,SAEjB3wF,KAAK4a,KAAO,KAkFb,OAjFA8mD,aAAAk/C,EAAA,EAAA3iH,IAAA,KAAAN,MAED,SAAGkjH,GAED,OADA7gH,KAAKo9G,OAAOlqG,GAAK2tG,EACV7gH,OACR,CAAA/B,IAAA,SAAAN,MAED,SAAOmjH,GAML,OALI15C,WAAS05C,GACX9gH,KAAKo9G,OAAOz8G,OAASkzB,OAAO88D,QAAQpnF,UAAUu3G,GAE9C9gH,KAAKo9G,OAAOz8G,OAASmgH,EAEhB9gH,OACR,CAAA/B,IAAA,SAAAN,MAED,SAAOojH,GAEL,OADA/gH,KAAKo9G,OAAOt+G,OAASiiH,EACd/gH,OACR,CAAA/B,IAAA,OAAAN,MAED,SAAwCM,EAAQN,GAE9C,OADAqC,KAAKo9G,OAAOn/G,GAAON,EACZqC,OACR,CAAA/B,IAAA,QAAAN,MAED,SAAMy/G,GAEJ,OADA7hH,OAAOiE,OAAOQ,KAAKo9G,OAAQA,GACpBp9G,OACR,CAAA/B,IAAA,SAAAN,MAED,SAAOm6B,GAGL,OAFA4nF,OAAO1/G,KAAKo9G,OAAOz8G,kBAAkBkzB,QACrC7zB,KAAKo9G,OAAOz8G,OAAO0I,OAAOyuB,GACnB93B,OACR,CAAA/B,IAAA,YAAAN,MAED,SAAUm6B,GAGR,OAFA4nF,OAAO1/G,KAAKo9G,OAAOz8G,kBAAkBkzB,QACrC7zB,KAAKo9G,OAAOz8G,OAAO4I,UAAUuuB,GACtB93B,OACR,CAAA/B,IAAA,SAAAN,MAED,SAAOm6B,GAGL,OAFA4nF,OAAO1/G,KAAKo9G,OAAOz8G,kBAAkBkzB,QACrC7zB,KAAKo9G,OAAOz8G,OAAO0D,OAAOyzB,GACnB93B,OACR,CAAA/B,IAAA,aAAAN,MAED,SAAWqyF,GAGT,OAFA0vB,OAAO1/G,KAAKo9G,OAAOz8G,kBAAkBkzB,QACrC7zB,KAAKo9G,OAAOz8G,OAAO0D,OAAO2rF,GACnBhwF,OACR,CAAA/B,IAAA,OAAAN,MAED,SAAKqsF,GAAmE,IAAnDz6D,EAAAlnB,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAA8C,MAGjE,OAFAq3G,OAAO1/G,KAAKo9G,OAAOz8G,kBAAkBkzB,QACrC7zB,KAAKo9G,OAAOz8G,OAAO6uB,KAAKw6D,EAAQz6D,GACzBvvB,OACR,CAAA/B,IAAA,QAAAN,MAED,SAAMoB,GAAoE,IAArDyG,EAAA6C,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAAqB,KAAM66B,EAAA76B,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAAsB,KAGpE,OAFAq3G,OAAO1/G,KAAKo9G,OAAOz8G,kBAAkBkzB,QACrC7zB,KAAKo9G,OAAOz8G,OAAOjC,MAAMK,EAAOyG,EAAK09B,GAC9BljC,OACR,CAAA/B,IAAA,MAAAN,MAGD,SAAIid,GAEF,OADA5a,KAAK4a,KAAOA,EACL5a,OACR,CAAA/B,IAAA,QAAAN,MAED,WACE,GAAiB,MAAbqC,KAAK4a,KACP,MAAM,IAAIw5C,MAAuB,kBAEnC,OAAO,IAAIksD,aACT/kH,OAAAiE,OAAA,CAAAoL,IAAK5K,KAAK4a,MACP5a,KAAKo9G,aAEXwD,EA3FoB,GA8FVI,IAAMzlH,OAAOiE,OAAOmhH,UAC7B,CAACM,QAAS,kBAA0C,IAAIL,cC1JtCM,eAAcx/C,cAAA,SAAAw/C,IAAAhgD,gBAAA,KAAAggD,M,qiBCJpC,IAAaC,oBAAmB,WAK9B,SAAAA,EAAYv2G,EAAa+4B,EAAqBngC,GAAiB09D,gBAAA,KAAAigD,GAC7DnhH,KAAK4K,IAAMA,EACX5K,KAAK2jC,UAAYA,EACjB3jC,KAAKwD,SAAWA,EAKjB,OAJAk+D,aAAAy/C,EAAA,OAAAljH,IAAA,QAAAN,MAED,SAAa8C,EAAckjC,GAAqC,IAAhBngC,EAAQ6E,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,IAAAA,UAAA,GACtD,OAAO,IAAI84G,EAAoB1gH,EAAMkjC,EAAWngC,OACjD29G,EAb6B,GAgBnBC,WAAW,SAAAnE,GAAAl6C,UAAAq+C,EAAAnE,GAAA,IAAAxzC,EAAA43C,gBAAAD,GAQtB,SAAYA,EAAAlkH,EAAc2mE,EACd85C,EAAmBh6E,EAAqB/6B,GAAiC,IAAAnD,EAMvD,OANuDy7D,gBAAA,KAAAkgD,GACnF37G,EAAAgkE,EAAA/tE,KAAA,MACA+J,EAAK67G,MAAQpkH,EACbuI,EAAK87G,aAAe19C,EACpBp+D,EAAKk4G,QAAUA,EACfl4G,EAAKk+B,UAAYA,EACjBl+B,EAAKmD,WAAaA,EAAUnD,EA4B7B,OA3BAi8D,aAAA0/C,EAAA,EAAAnjH,IAAA,OAAAV,IAED,WACE,OAAOyC,KAAKshH,QACb,CAAArjH,IAAA,cAAAV,IAED,WACE,OAAOyC,KAAKuhH,eACb,CAAAtjH,IAAA,OAAAV,IAED,WACE,OAAOs1G,MAAMuO,aACd,CAAAnjH,IAAA,SAAAN,MAED,WACE,OAAkC,IAA3BqC,KAAK4I,WAAWtN,SACxB,CAAA2C,IAAA,QAAAN,MAED,WACE,MAAM,IAAIy2D,MAAM,sBAEjB,EAAAn2D,IAAA,QAAAN,MAED,SAAaT,EAAc2mE,EAEiEjpD,GAAA,IAAA4mG,EAAA5mG,EAD9E+iG,eAAO,IAAA6D,EAAG,GAAEA,EAAAC,EAAA7mG,EAAE+oB,iBAAS,IAAA89E,EAAG,GAAEA,EAAAC,EAAA9mG,EAAEhS,kBAAU,IAAA84G,EAAG,GAAEA,EAEzD,OAAO,IAAIN,EAAWlkH,EAAM2mE,EAAa85C,EAASh6E,EAAW/6B,OAC9Dw4G,EA3CqB,CAAQtO,O,qiBCYhC,IAAsBjxG,aACpB,SAAAo7G,GAAAl6C,UAAAlhE,EAAAo7G,GAAA,IAAAxzC,EAAAk4C,gBAAA9/G,GAIA,SAAAA,EAAsBs7G,GAA6B,IAAA13G,EAEhC,OAFgCy7D,gBAAA,KAAAr/D,GACjD4D,EAAAgkE,EAAA/tE,KAAA,MACA+J,EAAK+3G,MAAQL,EAAI13G,EAgClB,OA/BAi8D,aAAA7/D,EAAA,EAAA5D,IAAA,OAAAV,IAED,WACE,OAAOs1G,MAAM+O,oBACd,CAAA3jH,IAAA,OAAAV,IAED,WACE,OAAOyC,KAAKw9G,QACb,CAAAv/G,IAAA,OAAAV,IAED,WACE,OAAOyC,KAAKw9G,MAAMtgH,OACnB,CAAAe,IAAA,cAAAV,IAED,WACE,OAAOyC,KAAKw9G,MAAM35C,cACnB,CAAA5lE,IAAA,aAAAV,IAED,WACE,OAAOyC,KAAKw9G,MAAMjxB,aACnB,CAAAtuF,IAAA,aAAAV,IAED,WACE,OAAOyC,KAAKw9G,MAAMI,aACnB,CAAA3/G,IAAA,QAAAN,MAKD,WACE,MAAM,IAAIy2D,MAAM,+BACjBvyD,EAtCD,CAAQixG,O,qiBC3BV,IAAsB+O,kBACpB,SAAAC,GAAA/+C,UAAA8+C,EAAAC,GAAA,IAAAr4C,EAAAs4C,gBAAAF,GAAA,SAAAA,IAAA,OAAA3gD,gBAAA,KAAA2gD,GAAAp4C,EAAAxtE,MAAA,KAAAoM,WAKC,OALDq5D,aAAAmgD,EAAA,EAAA5jH,IAAA,SAAAN,MAEA,SAAyBqgH,EAAuCxtG,GAC9D,IAAMwxG,EAAchiH,KAAK49G,WAAW/yF,MAAMra,GAC1C,OAAOxQ,KAAKmC,YAAY67G,EAAKgE,OAC9BH,EALD,CAAQhgH,c,qiBCOV,IAAaogH,sBACX,SAAAC,GAAAn/C,UAAAk/C,EAAAC,GAAA,IAAAz4C,EAAA04C,gBAAAF,GAIA,SAAYA,EAAA9E,EAA+BhtD,GAAiC,IAAA1qD,EAE1D,OAF0Dy7D,gBAAA,KAAA+gD,GAC1Ex8G,EAAAgkE,EAAA/tE,KAAA,KAAMyhH,GACN13G,EAAK0qD,KAAOA,EAAI1qD,EAajB,OAZAi8D,aAAAugD,EAAA,EAAAhkH,IAAA,cAAAN,MAED,SAA8BqgH,EAAuCxtG,GACnE,IAAM4xG,EAAe,IAAI7C,aAAa/uG,GACtCk9D,cAAcmhB,UAAU,yBAAyB/hB,MAAqB,eAAA9sD,OAAAhgB,KAAKkoE,SAAQ,gBAAAloD,OAAe0W,KAAKjL,UAAUjb,KACjH,IAAMqoC,EAASmlE,EAAIqE,YAAYvgD,QAAQjpB,OACjCp3C,EAAYo3C,EAAOypE,eAAetiH,KAAKmwD,KAAMiyD,GAKnD,OAHA3gH,EAAUd,OAAO4hH,cAAc/xG,EAAM7P,QAErCc,EAAU3C,OAAO0jH,UAAUhyG,EAAM1R,QAC1B2C,MACRwgH,EAnBD,CAAQJ,mB,qiBCVH,IAAMY,cAAgB3F,cAAc3pG,OAAO,CAChDuvG,WAAYj6B,EAAY,cAACu0B,kBAAkBj6E,QACtC00C,SAAS,sBAGMkrC,aAAoD,SAAA1C,GAAAl9C,UAAA4/C,EAAA1C,GAAA,IAAAx2C,EAAAm5C,gBAAAD,GAA1E,SAAAA,IAAA,IAAAl9G,EAC8C,OAD9Cy7D,gBAAA,KAAAyhD,G,0BACUl9G,EAAWo9G,YAAqB,KAAIp9G,EAwB3C,OAGFi8D,aAAAihD,EAAA,EAAA1kH,IAAA,gBAAAN,MAzBC,SAAcmlH,GACZ9iH,KAAK6iH,YAAcC,IACpB,CAAA7kH,IAAA,aAAAV,IAED,WACE,OAAOyC,KAAK6iH,cACb,CAAA5kH,IAAA,WAAAV,IAED,WACE,OAAOyC,KAAK+9G,KAAK,gBAClB,CAAA9/G,IAAA,cAAAN,MAED,SAAYwuB,GACVnsB,KAAKo9G,OAAOsF,WAAav2F,IAC1B,CAAAluB,IAAA,gBAAAN,MAED,WACE,OAAOqC,KAAK+9G,KAAK,gBAClB,CAAA9/G,IAAA,aAAAV,IAED,WACE,OAAOyC,KAAK+9G,KAAK,kBAClB4E,EAzBuE,CAAQ3F,kBCT9E+F,SAAWpI,WACXqI,SAAWzI,UACX0I,YAAcrH,aAUlB,SAASsH,WAAShtF,EAAMn3B,GACtB,OAAOkkH,YAAYD,SAAS9sF,EAAMn3B,EAAOgkH,UAAW7sF,EAAO,IAG7D,IAAAitF,UAAiBD,WCTjB,SAASE,eAAanlH,GACpB,OAAO,SAASG,GACd,OAAiB,MAAVA,OAAiBe,EAAYf,EAAOH,IAI/C,IAAAolH,cAAiBD,eCbbE,YAAcnhB,cACdohB,eAAeh9C,eA2BnB,SAASi9C,oBAAkB7lH,GACzB,OAAO4lH,eAAa5lH,IAAU2lH,YAAY3lH,GAG5C,IAAA8lH,oBAAiBD,oBChCbE,YAAcnf,aACdof,SAAW3P,UACX4P,aAAeP,cACfQ,UAAYroB,WACZsoB,kBAAoBL,oBAGpBM,UAAY98G,KAAKyK,IAqBrB,SAASsyG,QAAMjhF,GACb,IAAMA,IAASA,EAAMznC,OACnB,MAAO,GAET,IAAIA,EAAS,EAOb,OANAynC,EAAQ2gF,YAAY3gF,GAAO,SAAS1T,GAClC,GAAIy0F,kBAAkBz0F,GAEpB,OADA/zB,EAASyoH,UAAU10F,EAAM/zB,OAAQA,IAC1B,KAGJuoH,UAAUvoH,GAAQ,SAASma,GAChC,OAAOkuG,SAAS5gF,EAAO6gF,aAAanuG,OAIxC,IAAAwuG,QAAiBD,QC5CbE,SAAWf,UACXgB,MAAQF,QAkBRG,IAAMF,SAASC,OAEnBE,MAAiBD,I,suDCXV,IAAME,eAAiB7B,cAActvG,OAAO,IAGtC+gB,cAAc,SAAAqwF,GAAAxhD,UAAA7uC,EAAAqwF,GAAA,IAAA96C,EAAA+6C,gBAAAtwF,GAGzB,SAAAA,EAAY1jB,GAAqC,IAAA/K,EAF5B,OAE4By7D,gBAAA,KAAAhtC,GAC/CzuB,EAAMgkE,EAAA/tE,KAAA,MACJwB,KAAM,OACN2mE,YAAau8C,gBACbzC,QAAS,GACTpxB,WAAY,MACZqxB,WAAY0G,gBACX9zG,GATG/K,EAASg/G,UAAG,EAACh/G,EAiEpB,OAvDAi8D,aAAAxtC,EAAA,EAAAj2B,IAAA,UAAAV,IAED,WAAW,IAAA8rE,EAAA,KACT,OAAOrpE,KAAK+9G,KAAK,cAAc95G,KAAI,SAAAwrB,G,MAAK,OAAgB,QAAfu0C,EAAAv0C,EAAE3wB,OAAOE,cAAM,IAAAglE,IAAI,GAAKqF,EAAKo7C,eACvE,CAAAxmH,IAAA,kBAAAN,MAED,SAAgBqgH,GACd,IACoE92C,EADhEjoE,EAAW,EACmBsoE,EAAAm9C,6BAAAC,MAAI3kH,KAAK0iH,WAAY1iH,KAAK4kH,UAAQ,IAApE,IAAsEr9C,EAAA7qE,MAAAwqE,EAAAK,EAAAppE,KAAAspE,MAAA,KAAAo9C,EAAAx2C,eAAAnH,EAAAvpE,MAAA,GAA1D8D,EAASojH,EAAA,GAAE7lH,EAAM6lH,EAAA,GACrBrnG,EAAU/b,EAAUwT,sBAAwBjW,EAClDC,EAAWgI,KAAKyK,IAAIzS,EAAUue,IAC/B,MAAAyoC,GAAAshB,EAAA9gE,EAAAw/C,GAAA,QAAAshB,EAAAO,IACD,GAAwB,MAApB9nE,KAAKlB,OAAOI,KACd,MAAM,IAAIk1D,MAA4B,sBAAAp0C,OAAAhgB,KAA6C,2CAErF,OAAOf,IACR,CAAAhB,IAAA,UAAAN,MAED,SAAQqgH,EAAuC55F,GAC7CpkB,KAAKykH,WAAargG,EAClBpkB,KAAKu9G,kBAAoBn5F,EACzBpkB,KAAKiV,uBAAyBmP,EAC9BpkB,KAAKmsB,SAASlsB,SAAQ,SAAAjD,GAAC,OAAIA,EAAE8nH,QAAQ9G,EAAK55F,QAC3C,CAAAnmB,IAAA,UAAAN,MAED,SAAQonH,EAAkCtjH,GACxC,IAAMgU,EAAQzV,KAAK0iH,WAAW/5G,QAAQo8G,GAGtC,OAFArF,QAAiB,GAAVjqG,EAAa,uBACpBzV,KAAK0iH,WAAWjtG,GAAShU,EAClBzB,OACR,CAAA/B,IAAA,cAAAN,MAED,W,MACQihH,EAAarjH,OAAOiE,OAAOq/G,OAAK7+G,KAAKwQ,QAAS,CAAC,KAAM,SAAU,SAAU,eAAgB,CAC7FkyG,WAAW,SAAD1iG,OAAWhgB,KAAK0iH,WAAWpnH,OAAS,KAC9CmpH,UAAWzkH,KAAKykH,YAEdzkH,KAAKglH,YACPzpH,OAAOiE,OAAOo/G,EAAY,CACxBqG,eAAiC,QAAjBjhD,EAAAhkE,KAAKglH,kBAAY,IAAAhhD,OAAA,EAAAA,EAAAllE,OAAOkgC,UAG5C,IAAMkmF,EAAgB3pH,OAAO0nF,QAAQ27B,GAAY36G,KAAI,SAAA2W,GAAA,IAAAG,EAAAszD,eAAAzzD,EAAA,GAAE+vB,EAAC5vB,EAAA,GAAE4jG,EAAC5jG,EAAA,SAAS,GAAAiF,OAAA2qB,EAAC,KAAA3qB,OAAI2+F,MAAK92F,KAAK,MACnF,MAAM,IAAN7H,OAAWklG,EAAa,OACzB,CAAAjnH,IAAA,QAAAN,MAED,WACE,IAAMwnH,EAAS,IAAIjxF,EAAc,CAC/BhhB,GAAIlT,KAAKkT,GACTvS,OAAQX,KAAKW,OAAOsB,QACpBnD,OAAQkB,KAAKlB,OAAOmD,QACpBygH,WAAY1iH,KAAK0iH,WAAWz+G,KAAI,SAAAwrB,GAAC,OAAIA,EAAExtB,aAGzC,OADAkjH,EAAOC,cAAcplH,KAAKglH,YACnBG,MACRjxF,EAlEwB,CAAQyuF,cAsEnC,SAAS0C,WAAWC,GAClB,OAAIliH,MAAMC,QAAQiiH,GACT,IAAIpxF,cAAc,CAACwuF,WAAY4C,IAE/B,IAAIpxF,cAAcoxF,GAK7B,IAAaC,YAAW,WAGtB,SAAAA,IAAArkD,gBAAA,KAAAqkD,GACEvlH,KAAKo9G,OAAS,CACZz8G,OAAQkzB,OAAO88D,QACf7xF,OAAQH,OAAOgyF,QACf+xB,WAAY,IAkFf,OAhFAhhD,aAAA6jD,EAAA,EAAAtnH,IAAA,KAAAN,MAED,SAAGkjH,GAED,OADA7gH,KAAKo9G,OAAOlqG,GAAK2tG,EACV7gH,OACR,CAAA/B,IAAA,SAAAN,MAED,SAAOmjH,GAML,OALI15C,WAAS05C,GACX9gH,KAAKo9G,OAAOz8G,OAASkzB,OAAO88D,QAAQpnF,UAAUu3G,GAE9C9gH,KAAKo9G,OAAOz8G,OAASmgH,EAEhB9gH,OACR,CAAA/B,IAAA,SAAAN,MAED,SAAOojH,GAEL,OADA/gH,KAAKo9G,OAAOt+G,OAASiiH,EACd/gH,OACR,CAAA/B,IAAA,OAAAN,MAED,SAAqDM,EAAQN,GAE3D,OADAqC,KAAKo9G,OAAOn/G,GAAON,EACZqC,OACR,CAAA/B,IAAA,QAAAN,MAED,SAAMy/G,GAEJ,OADA7hH,OAAOiE,OAAOQ,KAAKo9G,OAAQA,GACpBp9G,OACR,CAAA/B,IAAA,SAAAN,MAED,SAAOm6B,GAGL,OAFA4nF,OAAO1/G,KAAKo9G,OAAOz8G,kBAAkBkzB,QACrC7zB,KAAKo9G,OAAOz8G,OAAO0I,OAAOyuB,GACnB93B,OACR,CAAA/B,IAAA,YAAAN,MAED,SAAUm6B,GAGR,OAFA4nF,OAAO1/G,KAAKo9G,OAAOz8G,kBAAkBkzB,QACrC7zB,KAAKo9G,OAAOz8G,OAAO4I,UAAUuuB,GACtB93B,OACR,CAAA/B,IAAA,SAAAN,MAED,SAAOm6B,GAGL,OAFA4nF,OAAO1/G,KAAKo9G,OAAOz8G,kBAAkBkzB,QACrC7zB,KAAKo9G,OAAOz8G,OAAO0D,OAAOyzB,GACnB93B,OACR,CAAA/B,IAAA,aAAAN,MAED,SAAWqyF,GAGT,OAFA0vB,OAAO1/G,KAAKo9G,OAAOz8G,kBAAkBkzB,QACrC7zB,KAAKo9G,OAAOz8G,OAAO0D,OAAO2rF,GACnBhwF,OACR,CAAA/B,IAAA,OAAAN,MAED,SAAKqsF,GAAmE,IAAnDz6D,EAAAlnB,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAA8C,MAGjE,OAFAq3G,OAAO1/G,KAAKo9G,OAAOz8G,kBAAkBkzB,QACrC7zB,KAAKo9G,OAAOz8G,OAAO6uB,KAAKw6D,EAAQz6D,GACzBvvB,OACR,CAAA/B,IAAA,QAAAN,MAED,SAAMoB,GAAoE,IAArDyG,EAAA6C,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAAqB,KAAM66B,EAAA76B,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAAsB,KAGpE,OAFAq3G,OAAO1/G,KAAKo9G,OAAOz8G,kBAAkBkzB,QACrC7zB,KAAKo9G,OAAOz8G,OAAOjC,MAAMK,EAAOyG,EAAK09B,GAC9BljC,OACR,CAAA/B,IAAA,aAAAN,MAGD,SAAW6nH,GAET,OADAxlH,KAAKo9G,OAAOsF,WAAa8C,EAClBxlH,OACR,CAAA/B,IAAA,SAAAN,MAED,SAAOw2B,GAEL,OADAn0B,KAAKo9G,OAAOsF,WAAW9mH,KAAKu4B,GACrBn0B,OACR,CAAA/B,IAAA,QAAAN,MAED,WACE,OAAO0nH,WAAWrlH,KAAKo9G,YACxBmI,EAzFqB,GAmGXE,KAAalqH,OAAOiE,OAAO6lH,WAAY,CAAEpE,QAAS,kBAAM,IAAIsE,eC/LrEG,WAAav/C,YACbw/C,aAAep/C,eAGfq/C,QAAU,mBAmBd,SAASC,UAAUloH,GACjB,OAAiB,IAAVA,IAA4B,IAAVA,GACtBgoH,aAAahoH,IAAU+nH,WAAW/nH,IAAUioH,QAGjD,IAAAE,YAAiBD,U,iDC5BbE,YAAcjrB,aACdkrB,WAAWlP,UACXmP,UAAU/oB,SACVgpB,SAAW72B,WACX82B,QAAQ/O,OAYZ,SAASgP,UAAQhoH,EAAQuuC,EAAMhvC,EAAOw9F,GACpC,IAAK+qB,SAAS9nH,GACZ,OAAOA,EAETuuC,EAAOq5E,WAASr5E,EAAMvuC,GAEtB,IAAIqX,GAAS,EACTna,EAASqxC,EAAKrxC,OACdkgF,EAAYlgF,EAAS,EACrB+qH,EAASjoH,EAEb,MAAiB,MAAVioH,KAAoB5wG,EAAQna,EAAQ,CACzC,IAAI2C,EAAMkoH,QAAMx5E,EAAKl3B,IACjB4lF,EAAW19F,EAEf,GAAY,cAARM,GAA+B,gBAARA,GAAiC,cAARA,EAClD,OAAOG,EAGT,GAAIqX,GAAS+lE,EAAW,CACtB,IAAIqf,EAAWwrB,EAAOpoH,GACtBo9F,EAAWF,EAAaA,EAAWN,EAAU58F,EAAKooH,QAAUlnH,OAC3CA,IAAbk8F,IACFA,EAAW6qB,SAASrrB,GAChBA,EACCorB,UAAQt5E,EAAKl3B,EAAQ,IAAM,GAAK,IAGzCswG,YAAYM,EAAQpoH,EAAKo9F,GACzBgrB,EAASA,EAAOpoH,GAElB,OAAOG,EAGT,IAAAkoH,SAAiBF,UClDbG,QAAU/O,SACVgP,QAAUF,SACVG,WAAW3P,UAWf,SAAS4P,aAAWtoH,EAAQw+G,EAAO5sB,GACjC,IAAIv6E,GAAS,EACTna,EAASshH,EAAMthH,OACfa,EAAS,GAEb,QAASsZ,EAAQna,EAAQ,CACvB,IAAIqxC,EAAOiwE,EAAMnnG,GACb9X,EAAQ4oH,QAAQnoH,EAAQuuC,GAExBqjD,EAAUryF,EAAOgvC,IACnB65E,QAAQrqH,EAAQsqH,WAAS95E,EAAMvuC,GAAST,GAG5C,OAAOxB,EAGT,IAAAwqH,YAAiBD,aCrBjB,SAASE,YAAUxoH,EAAQH,GACzB,OAAiB,MAAVG,GAAkBH,KAAO1C,OAAO6C,GAGzC,IAAAyoH,WAAiBD,YCZbE,SAAWhQ,UACXiQ,YAAc1qB,cACdh5F,QAAUgjE,UACV2gD,QAAU9pB,SACV+pB,SAAW7pB,WACX8pB,MAAQ9P,OAWZ,SAAS+P,UAAQ/oH,EAAQuuC,EAAMy6E,GAC7Bz6E,EAAOm6E,SAASn6E,EAAMvuC,GAEtB,IAAIqX,GAAS,EACTna,EAASqxC,EAAKrxC,OACda,GAAS,EAEb,QAASsZ,EAAQna,EAAQ,CACvB,IAAI2C,EAAMipH,MAAMv6E,EAAKl3B,IACrB,KAAMtZ,EAAmB,MAAViC,GAAkBgpH,EAAQhpH,EAAQH,IAC/C,MAEFG,EAASA,EAAOH,GAElB,OAAI9B,KAAYsZ,GAASna,EAChBa,GAETb,EAAmB,MAAV8C,EAAiB,EAAIA,EAAO9C,SAC5BA,GAAU2rH,SAAS3rH,IAAW0rH,QAAQ/oH,EAAK3C,KACjD+H,QAAQjF,IAAW2oH,YAAY3oH,KAGpC,IAAAipH,SAAiBF,UCtCbG,UAAYT,WACZU,QAAUF,SA4Bd,SAASG,QAAMppH,EAAQuuC,GACrB,OAAiB,MAAVvuC,GAAkBmpH,QAAQnpH,EAAQuuC,EAAM26E,WAGjD,IAAAG,QAAiBD,QCjCbE,WAAaf,YACbgB,MAAQF,QAWZ,SAASG,WAASxpH,EAAQw+G,GACxB,OAAO8K,WAAWtpH,EAAQw+G,GAAO,SAASj/G,EAAOgvC,GAC/C,OAAOg7E,MAAMvpH,EAAQuuC,MAIzB,IAAAk7E,UAAiBD,WClBbE,SAAWD,UACXE,SAAW/L,UAmBX37B,KAAO0nC,UAAS,SAAS3pH,EAAQw+G,GACnC,OAAiB,MAAVx+G,EAAiB,GAAK0pH,SAAS1pH,EAAQw+G,MAGhDoL,OAAiB3nC,K,uCCrBJ4nC,wBAA0Bx/B,EAAErqF,OAAO,CAC9CwM,IAAK69E,EAAE5Y,SACPriE,MAAOi7E,EAAE1lD,MAAM0lD,EAAE5Y,UAAS,WAAS,IACnCrsE,SAAUilF,EAAC,aAAU,YAAS,KAC7BpoB,SAEU6nD,eAAiBz/B,EAAErqF,OAAO,CACrCqC,KAAMgoF,EAAE5Y,SACRwc,QAAS5D,EAAE5Y,SAAgB,WAAC,IAC5Byc,OAAQ7D,EAAE1lD,MAAMyoD,YAAW,WAAS,IACpCh+E,MAAOi7E,EAAE1lD,MAAM0lD,EAAE5Y,UAAS,WAAS,IACnCjnE,WAAY6/E,EAAE1lD,MAAM0lD,EAAEe,MAAM,CAACf,EAAE5Y,SAAUo4C,2BAAkC,WAAC,MAC3E5nD,S,isDCJI,IAAM8nD,iBAAmB1F,cAActvG,OAAO,IAGxC4hB,gBAAgB,SAAAwvF,GAAAxhD,UAAAhuC,EAAAwvF,GAAA,IAAA96C,EAAA2+C,gBAAArzF,GAG3B,SAAAA,EAAYvkB,GAAuC,IAAA/K,EAF9B,OAE8By7D,gBAAA,KAAAnsC,GACjDtvB,EAAMgkE,EAAA/tE,KAAA,MACJwB,KAAM,SACN2mE,YAAau8C,gBACbzC,QAAS,GACTpxB,WAAY,MACZqxB,WAAYuK,kBACX33G,GATG/K,EAASg/G,UAAG,EAACh/G,EAkEpB,OAxDAi8D,aAAA3sC,EAAA,EAAA92B,IAAA,UAAAV,IAED,WAAW,IAAA8rE,EAAA,KACT,OAAOrpE,KAAK+9G,KAAK,cAAc95G,KAAI,SAAAwrB,G,MAAK,OAAgB,QAAfu0C,EAAAv0C,EAAE3wB,OAAOE,cAAM,IAAAglE,IAAI,GAAKqF,EAAKo7C,eACvE,CAAAxmH,IAAA,kBAAAN,MAED,SAAgBqgH,GACd,IAEoE92C,EAFhEjoE,EAAW,EACXopH,EAAU,EACoB9gD,EAAA+gD,6BAAA3D,MAAI3kH,KAAK0iH,WAAY1iH,KAAK4kH,UAAQ,IAApE,IAAsEr9C,EAAA7qE,MAAAwqE,EAAAK,EAAAppE,KAAAspE,MAAA,KAAAo9C,EAAAx2C,eAAAnH,EAAAvpE,MAAA,GAA1D8D,EAASojH,EAAA,GAAE7lH,EAAM6lH,EAAA,GAC3BwD,EAAUA,EAAUrpH,EAASyC,EAAUwT,sBACvChW,EAAWgI,KAAKyK,IAAIzS,EAAUopH,IAC/B,MAAApiE,GAAAshB,EAAA9gE,EAAAw/C,GAAA,QAAAshB,EAAAO,IACD,GAAwB,MAApB9nE,KAAKlB,OAAOI,KACd,MAAM,IAAIk1D,MAA4B,sBAAAp0C,OAAAhgB,KAA6C,2CAErF,OAAOf,IACR,CAAAhB,IAAA,UAAAN,MAED,SAAQqgH,EAAuC55F,GAC7CpkB,KAAKykH,WAAargG,EAClBpkB,KAAKu9G,kBAAoBn5F,EACzBpkB,KAAKiV,uBAAyBmP,EAC9BpkB,KAAKmsB,SAASlsB,SAAQ,SAAAjD,GAAC,OAAIA,EAAE8nH,QAAQ9G,EAAK55F,QAC3C,CAAAnmB,IAAA,UAAAN,MAED,SAAQonH,EAAkCtjH,GACxC,IAAMgU,EAAQzV,KAAK0iH,WAAW/5G,QAAQo8G,GAGtC,OAFArF,QAAiB,GAAVjqG,EAAa,uBACpBzV,KAAK0iH,WAAWjtG,GAAShU,EAClBzB,OACR,CAAA/B,IAAA,cAAAN,MAED,W,MACQihH,EAAarjH,OAAOiE,OAAOq/G,OAAK7+G,KAAKwQ,QAAS,CAAC,KAAM,SAAU,SAAU,eAAgB,CAC7FkyG,WAAW,SAAD1iG,OAAWhgB,KAAK0iH,WAAWpnH,OAAS,KAC9CmpH,UAAWzkH,KAAKykH,YAEdzkH,KAAKglH,YACPzpH,OAAOiE,OAAOo/G,EAAY,CACxBqG,eAAiC,QAAjBjhD,EAAAhkE,KAAKglH,kBAAY,IAAAhhD,OAAA,EAAAA,EAAAllE,OAAOkgC,UAG5C,IAAMkmF,EAAgB3pH,OAAO0nF,QAAQ27B,GAAY36G,KAAI,SAAA2W,GAAA,IAAAG,EAAAszD,eAAAzzD,EAAA,GAAE+vB,EAAC5vB,EAAA,GAAE4jG,EAAC5jG,EAAA,SAAS,GAAAiF,OAAA2qB,EAAC,KAAA3qB,OAAI2+F,MAAK92F,KAAK,MACnF,MAAM,IAAN7H,OAAWklG,EAAa,OACzB,CAAAjnH,IAAA,QAAAN,MAED,WACE,IAAMwnH,EAAS,IAAIpwF,EAAgB,CACjC7hB,GAAIlT,KAAKkT,GACTvS,OAAQX,KAAKW,OAAOsB,QACpBnD,OAAQkB,KAAKlB,OAAOmD,QACpBygH,WAAY1iH,KAAK0iH,WAAWz+G,KAAI,SAAAwrB,GAAC,OAAIA,EAAExtB,aAGzC,OADAkjH,EAAOC,cAAcplH,KAAKglH,YACnBG,MACRpwF,EAnE0B,CAAQ4tF,cAuErC,SAAS4F,aAAajD,GACpB,OAAIliH,MAAMC,QAAQiiH,GACT,IAAIvwF,gBAAgB,CAAC2tF,WAAY4C,IAEjC,IAAIvwF,gBAAgBuwF,GAK/B,IAAakD,cAAa,WAGxB,SAAAA,IAAAtnD,gBAAA,KAAAsnD,GACExoH,KAAKo9G,OAAS,CACZz8G,OAAQkzB,OAAO88D,QACf7xF,OAAQH,OAAOgyF,QACf+xB,WAAY,IAkFf,OAhFAhhD,aAAA8mD,EAAA,EAAAvqH,IAAA,KAAAN,MAED,SAAGkjH,GAED,OADA7gH,KAAKo9G,OAAOlqG,GAAK2tG,EACV7gH,OACR,CAAA/B,IAAA,SAAAN,MAED,SAAOmjH,GAML,OALI15C,WAAS05C,GACX9gH,KAAKo9G,OAAOz8G,OAASkzB,OAAO88D,QAAQpnF,UAAUu3G,GAE9C9gH,KAAKo9G,OAAOz8G,OAASmgH,EAEhB9gH,OACR,CAAA/B,IAAA,SAAAN,MAED,SAAOojH,GAEL,OADA/gH,KAAKo9G,OAAOt+G,OAASiiH,EACd/gH,OACR,CAAA/B,IAAA,OAAAN,MAED,SAAuDM,EAAQN,GAE7D,OADAqC,KAAKo9G,OAAOn/G,GAAON,EACZqC,OACR,CAAA/B,IAAA,QAAAN,MAED,SAAMy/G,GAEJ,OADA7hH,OAAOiE,OAAOQ,KAAKo9G,OAAQA,GACpBp9G,OACR,CAAA/B,IAAA,SAAAN,MAED,SAAOm6B,GAGL,OAFA4nF,OAAO1/G,KAAKo9G,OAAOz8G,kBAAkBkzB,QACrC7zB,KAAKo9G,OAAOz8G,OAAO0I,OAAOyuB,GACnB93B,OACR,CAAA/B,IAAA,YAAAN,MAED,SAAUm6B,GAGR,OAFA4nF,OAAO1/G,KAAKo9G,OAAOz8G,kBAAkBkzB,QACrC7zB,KAAKo9G,OAAOz8G,OAAO4I,UAAUuuB,GACtB93B,OACR,CAAA/B,IAAA,SAAAN,MAED,SAAOm6B,GAGL,OAFA4nF,OAAO1/G,KAAKo9G,OAAOz8G,kBAAkBkzB,QACrC7zB,KAAKo9G,OAAOz8G,OAAO0D,OAAOyzB,GACnB93B,OACR,CAAA/B,IAAA,aAAAN,MAED,SAAWqyF,GAGT,OAFA0vB,OAAO1/G,KAAKo9G,OAAOz8G,kBAAkBkzB,QACrC7zB,KAAKo9G,OAAOz8G,OAAO0D,OAAO2rF,GACnBhwF,OACR,CAAA/B,IAAA,OAAAN,MAED,SAAKqsF,GAAmE,IAAnDz6D,EAAAlnB,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAA8C,MAGjE,OAFAq3G,OAAO1/G,KAAKo9G,OAAOz8G,kBAAkBkzB,QACrC7zB,KAAKo9G,OAAOz8G,OAAO6uB,KAAKw6D,EAAQz6D,GACzBvvB,OACR,CAAA/B,IAAA,QAAAN,MAED,SAAMoB,GAAoE,IAArDyG,EAAA6C,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAAqB,KAAM66B,EAAA76B,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAAsB,KAGpE,OAFAq3G,OAAO1/G,KAAKo9G,OAAOz8G,kBAAkBkzB,QACrC7zB,KAAKo9G,OAAOz8G,OAAOjC,MAAMK,EAAOyG,EAAK09B,GAC9BljC,OACR,CAAA/B,IAAA,aAAAN,MAGD,SAAW6nH,GAET,OADAxlH,KAAKo9G,OAAOsF,WAAa8C,EAClBxlH,OACR,CAAA/B,IAAA,SAAAN,MAED,SAAOw2B,GAEL,OADAn0B,KAAKo9G,OAAOsF,WAAW9mH,KAAKu4B,GACrBn0B,OACR,CAAA/B,IAAA,QAAAN,MAED,WACE,OAAO4qH,aAAavoH,KAAKo9G,YAC1BoL,EAzFuB,GAmGbC,OAAiBltH,OAAOiE,OAAO+oH,aAAc,CAACtH,QAAS,kBAAM,IAAIuH,iBC/LjEE,OAAM,WAKjB,SAAAA,EAAoBnsG,EAAc8jB,EAAYsoF,GAAmBznD,gBAAA,KAAAwnD,GAC/D1oH,KAAKuc,KAAOA,EACZvc,KAAKqgC,GAAKA,EACVrgC,KAAK2oH,MAAQA,EAKd,OAJAjnD,aAAAgnD,EAAA,OAAAzqH,IAAA,QAAAN,MAED,SAAa4e,EAAc8jB,GAAoC,IAAxBsoF,EAAAtgH,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAAsB,GAC3D,OAAO,IAAIqgH,EAAOnsG,EAAM8jB,EAAIsoF,OAC7BD,EAbgB,GAgBNE,WAAU,WAYrB,SAAAA,EAAoBnoH,EACA8b,EAAc8jB,EACdntB,EAAYywB,EACZ7oC,EAAkC+tH,GAAsC3nD,gBAAA,KAAA0nD,GAC1F5oH,KAAKS,KAAOA,EAEZT,KAAKuc,KAAOA,EACZvc,KAAKqgC,GAAKA,EAEVrgC,KAAKkT,GAAKA,EACVlT,KAAK2jC,UAAYA,EACjB3jC,KAAKlF,KAAOA,EACZkF,KAAK6oH,SAAWA,EAYjB,OAXAnnD,aAAAknD,EAAA,OAAA3qH,IAAA,kBAAAN,MAED,SACsHid,GAAA,IAD9F2B,EAAI3B,EAAJ2B,KAAM8jB,EAAEzlB,EAAFylB,GAAIntB,EAAE0H,EAAF1H,GAAIywB,EAAS/oB,EAAT+oB,UAAW7oC,EAAI8f,EAAJ9f,KAE/C,OAAO,IAAI8tH,EAAW,SAAUrsG,EAAM8jB,EAAI,OAAAntB,QAAA,IAAAA,IAAM,KAAe,OAATywB,QAAA,IAAAA,IAAa,GAAQ,OAAJ7oC,QAAI,IAAJA,IAAQ,KAAM,QACtF,CAAAmD,IAAA,iBAAAN,MAED,SACuIod,GAAA,IADhHwB,EAAIxB,EAAJwB,KAAM8jB,EAAEtlB,EAAFslB,GAAIsD,EAAS5oB,EAAT4oB,UAAW7oC,EAAIigB,EAAJjgB,KAAM+tH,EAAQ9tG,EAAR8tG,SAGhD,OADAnJ,OAAe,MAAR5kH,GAA4B,MAAZ+tH,EAA2E,0DAC3F,IAAID,EAAW,QAASrsG,EAAM8jB,EAAI,KAAM,OAAAsD,QAAS,IAATA,IAAa,GAAI,OAAA7oC,QAAA,IAAAA,IAAQ,KAAc,OAAR+tH,QAAA,IAAAA,IAAY,UAC3FD,EApCoB,GChBVE,eAAiBrgC,EAAErqF,OAAO,CACrCme,KAAMksE,EAAE5Y,SACRxvC,GAAIooD,EAAE5Y,SACN38D,GAAIu1E,EAAE5Y,SACDoL,SAAS,mCACT9D,WACO,WAAC,MACbxzC,UAAW8kD,EAAE1lD,MAAM0lD,EAAE5Y,UACT,WAAC,IAEb/0E,KAAM2tF,EAAEvb,OAAOub,EAAE5Y,SAAU4Y,EAAEK,OACxB3R,WAAU,WACF,MACb0xC,SAAUpgC,EAAE1lD,MAAM0lD,EAAEvb,OAAOub,EAAE5Y,SAAU4Y,EAAEK,QACpC3R,WACO,WAAC,QACZ9W,SAEU0oD,WAAatgC,EAAErqF,OAAO,CACjCme,KAAMksE,EAAE5Y,SACRxvC,GAAIooD,EAAE5Y,SACN84C,MAAOlgC,EAAE1lD,MAAM+lF,gBAAuB,WAAC,MACtCzoD,S,qiBCrBH,IAAa2oD,YAAY,SAAAn7B,GAAA9qB,UAAAimD,EAAAn7B,GAAA,IAAApkB,EAAAw/C,gBAAAD,GAGvB,SAAAA,EAAYvzG,GAAa,IAAAhQ,EAEL,OAFKy7D,gBAAA,KAAA8nD,GACvBvjH,EAAAgkE,EAAA/tE,KAAA,MACA+J,EAAKgQ,MAAQA,EAAKhQ,EAiBnB,OAhBAi8D,aAAAsnD,EAAA,EAAA/qH,IAAA,OAAAV,IAED,WACE,MAAO,OACR,CAAAU,IAAA,UAAAN,MAED,SAAQkG,GACN,OAAOA,EAAUnF,MAAMsB,KAAKyV,MAAOzV,KAAKyV,MAAQ,KACjD,CAAAxX,IAAA,WAAAN,MAED,WACE,MAAa,MAAAqiB,OAAAhgB,KAAKyV,MAAK,OACxB,CAAAxX,IAAA,QAAAN,MAED,WACE,OAAO,IAAIqrH,EAAYhpH,KAAKyV,WAC7BuzG,EAtBsB,CAAQp7B,W,qiBCKjC,IAAas7B,eAAe,SAAAr7B,GAAA9qB,UAAAmmD,EAAAr7B,GAAA,IAAApkB,EAAA0/C,gBAAAD,GAK1B,SAAAA,EAAYh/B,GAAe,IAAAzkF,EAEH,OAFGy7D,gBAAA,KAAAgoD,GACzBzjH,EAAAgkE,EAAA/tE,KAAA,MACA+J,EAAKykF,QAAUA,EAAOzkF,EAsCvB,OArCAi8D,aAAAwnD,EAAA,EAAAjrH,IAAA,OAAAV,IAED,WACE,MAAO,UACR,CAAAU,IAAA,UAAAN,MAED,SAAQkG,GACN,IAAMqmF,EAAUlqF,KAAKkqF,QAChBpmF,WAAW,MAAO,aAClBA,WAAW,SAAU,gCACrBA,WAAW,SAAU,WACrBA,WAAW,QAAS,uBACpBA,WAAW,MAAO,UAClBA,WAAW,QAAS,kBACzBolH,EAAel7B,OAAOlhB,MAAM,SAAD9sD,OAAUnc,EAAS,mBAAAmc,OAAkBkqE,EAAW,MAG3E,IAFA,IAAMh7D,EAASrrB,EAAU+2C,SACnBqzC,EAAS,IAAIr3E,IACVqF,EAAM,EAAGA,EAAMiT,EAAO5zB,OAAQ2gB,IAAO,CAC5C,IAAMoT,EAAQH,EAAOjT,GACjBte,OAAK,EACT,IACEA,EAAQyrH,WAAWl/B,EAAS76D,EAAOpT,EAAKiT,EAAQrrB,EAAUkoB,aAC1D,MAAOtlB,GAEP,MADAyiH,EAAel7B,OAAOxpE,MAAM,mCAADxE,OAAoCkqE,EAAoB,cAAAlqE,OAAAqP,EAAU,KAAA5oB,GACvFA,EAERwnF,EAAOhtF,IAAIouB,EAAO1xB,GAEpB,OAAOkG,EAAUwrB,OAAM,SAAAI,GAAC,OAAIw+D,EAAO1wF,IAAIkyB,QACxC,CAAAxxB,IAAA,WAAAN,MAED,WACE,MAAgB,SAAAqiB,OAAAhgB,KAAKkqF,QAAO,OAC7B,CAAAjsF,IAAA,QAAAN,MAED,WACE,OAAO,IAAIurH,EAAelpH,KAAKkqF,aAChCg/B,EA7CyB,CAAQt7B,WAiDpC,SAASw7B,WAAWC,YACA56B,OACAC,QACAC,eACAC,WAClB,OAAOxqF,KAAKilH,a,qiBArDYH,eAAAl7B,OAAStgB,cAAcmhB,UAAU,kBCJpD,IAAMy6B,oBAAsBxM,cAAc3pG,OAAO,CACtD1R,UAAWgnF,EAAY,cAACu0B,kBACnBvlC,SAAS,qBAGM8xC,eAAqD,SAAAtJ,GAAAl9C,UAAAwmD,EAAAtJ,GAAA,IAAAx2C,EAAA+/C,gBAAAD,GAAA,SAAAA,IAAA,OAAAroD,gBAAA,KAAAqoD,GAAA9/C,EAAAxtE,MAAA,KAAAoM,WAwBxE,OAxBwEq5D,aAAA6nD,EAAA,EAAAtrH,IAAA,QAAAV,IACzE,WACE,OAAOyC,KAAK+9G,KAAK,eAClB,CAAA9/G,IAAA,gBAAAN,MAED,WACE,MAAO,CAACqC,KAAKosB,SACd,CAAAnuB,IAAA,kBAAAN,MAMD,SAAgBqgH,GACd,OAAOh+G,KAAKosB,MAAMmxF,mBACnB,CAAAt/G,IAAA,UAAAN,MAED,SAAQqgH,EAAuC55F,GAC7CpkB,KAAKosB,MAAM04F,QAAQ9G,EAAK55F,KACzB,CAAAnmB,IAAA,UAAAN,MAED,SAAQ8D,GAEN,OADAzB,KAAKo9G,OAAO37G,UAAYA,EACjBzB,SACRupH,EAxBwE,CAAQvM,kB,qiBCJ5E,IAAMyM,kBAAoBH,oBAAoBn2G,OAAO,CAC1D+2E,QAASzB,EAAE5Y,SAAgB,WAAC,OAC5B9wE,MAAO0pF,EAAM,QAAC,CAAC,YAAa,eAAsB,WAAC,eAGxCihC,iBAAiB,SAAAC,GAAA5mD,UAAA2mD,EAAAC,GAAA,IAAAlgD,EAAAmgD,gBAAAF,GAC5B,SAAAA,EAAYl5G,GAAwC,OAAA0wD,gBAAA,KAAAwoD,GAC5CjgD,EAAA/tE,KAAA,MACJwB,KAAM,UACN2mE,YAAau8C,gBACbzC,QAAS,GACTpxB,WAAY,MACZqxB,WAAY6L,mBACXj5G,GA4BJ,OA3BAkxD,aAAAgoD,EAAA,EAAAzrH,IAAA,kBAAAN,MAED,SAAgBqgH,GACd,MAAM,IAAI5pD,MAAM,sGACjB,CAAAn2D,IAAA,UAAAN,MAED,SAAQqgH,EAAuC55F,GAC7C,MAAM,IAAIgwC,MAAM,4FACjB,CAAAn2D,IAAA,cAAAN,MAED,WACE,IAAMihH,EAAarjH,OAAOiE,OAAOq/G,OAAK7+G,KAAKwQ,QAAS,CAAC,KAAM,SAAU,SAAU,cAAe,CAC5F/O,UAAU,SAADue,OAAWhgB,KAAKosB,MAAK,OAE1B84F,EAAgB3pH,OAAO0nF,QAAQ27B,GAAY36G,KAAI,SAAA2W,GAAA,IAAAG,EAAAszD,eAAAzzD,EAAA,GAAE+vB,EAAC5vB,EAAA,GAAE4jG,EAAC5jG,EAAA,SAAS,GAAAiF,OAAA2qB,EAAC,KAAA3qB,OAAI2+F,MAAK92F,KAAK,MACnF,MAAM,IAAN7H,OAAWklG,EAAa,OACzB,CAAAjnH,IAAA,QAAAN,MAED,WACE,OAAO,IAAI+rH,EAAiB,CAC1Bx2G,GAAIlT,KAAKkT,GACTvS,OAAQX,KAAKW,OAAOsB,QACpBnD,OAAQkB,KAAKlB,OAAOmD,QACpBR,UAAWzB,KAAKosB,MAAMnqB,QACtBioF,QAASlqF,KAAKwQ,QAAQ05E,QACtBnrF,MAAOiB,KAAKwQ,QAAQzR,YAEvB2qH,EApC2B,CAAQH,gB,isDCkCtC,IAAaM,eAAe,SAAAC,GAAA/mD,UAAA8mD,EAAAC,GAAA,IAAArgD,EAAAsgD,gBAAAF,GAG1B,SAAAA,IAAA,OAAA3oD,gBAAA,KAAA2oD,GAAApgD,EAAA/tE,KAAA,MAyfC,OAvfAgmE,aAAAmoD,EAAA,EAAA5rH,IAAA,gBAAAN,MAEM,SAAcwyD,EAAyB6tD,GAC5C6L,EAAe77B,OAAOlhB,MAAM,mBAAoBp2C,KAAKjL,UAAU0kC,EAAM,KAAM,IAE3E6tD,EAAS,OAAHA,QAAG,IAAHA,IAAO,IAAIuB,aAEjB,IAAMpjH,EAASiwF,aAAavV,UAAU1mB,GACtC,IAAuB,IAAnBh0D,EAAOmsE,QACT,MAAM82C,WAAW4K,cAAchM,EAAI2B,iBAAkB,4BAA8BxjH,EAAOqoB,MAAMwG,SAElG,IAAMi/F,EAAS9tH,EAAOrB,KAEtB+uH,EAAe77B,OAAOlhB,MAAM,2BAA4Bp2C,KAAKjL,UAAUw+F,EAAQ,KAAM,IAErF,IAAMtM,EAAoB39G,KAAKkqH,aAAaD,EAAM,UAASjM,GAErDzxB,EAAa09B,EAAO19B,WAEpB49B,EAAmBnqH,KAAKoqH,YAAYpM,EAAKiM,EAAO57E,QAChDuvE,EAAad,cAAcpyE,MAAMy/E,GAEvC,OAAO,IAAIlI,sBAAsB,CAC/B/kH,KAAM+sH,EAAO/sH,KACb2mE,YAAaomD,EAAc,WAE3BtM,QAASA,EACTpxB,WAAYA,EACZqxB,WAAYA,GACXqM,EAAO5/D,QACX,CAAApsD,IAAA,iBAAAN,MAEM,SAAewyD,EAA4C6tD,GAAkB,IAAAv4G,EAAA,KAGlF,OAFAokH,EAAe77B,OAAOlhB,MAAM,oBAAqBp2C,KAAKjL,UAAU0kC,EAAM,KAAM,IAC5E6tD,EAAS,OAAHA,QAAG,IAAHA,IAAO,IAAIuB,aACVvB,EAAIqM,iBAAgB,kBAAM5kH,EAAK6kH,aAAatM,EAAK7tD,KAAO,UAChE,CAAAlyD,IAAA,kBAAAN,MAEM,SAAgBwyD,EAAsC6tD,GAAkB,IAAA30C,EAAA,KAC7EwgD,EAAe77B,OAAOlhB,MAAM,sBAAuBp2C,KAAKjL,UAAU0kC,EAAM,KAAM,IAE9E6tD,EAAS,OAAHA,QAAG,IAAHA,IAAO,IAAIuB,aACjB,IAAMpjH,EAAS+rH,eAAerxC,UAAU1mB,GACxC,IAAuB,IAAnBh0D,EAAOmsE,QACT,MAAM82C,WAAW4K,cAAchM,EAAI2B,iBACrB,UAAA3/F,OAAA0W,KAAKjL,UAAU0kC,EAAM,KAAM,GAAc,aAAAnwC,OAAA7jB,EAAOqoB,MAAMwG,UAEtE,IAAMi/F,EAAS9tH,EAAOrB,KAEtB+uH,EAAe77B,OAAOlhB,MAAM,uBAAwBp2C,KAAKjL,UAAUw+F,EAAQ,KAAM,IAEjF,IAAMtM,EAAoB39G,KAAKkqH,aAAaD,EAAM,UAASjM,GAErDr6E,EAAYsmF,EAAY,SAExBrhH,EAAoC,GAY1C,OAXAqhH,EAAOrhH,WAAW3I,SAAQ,SAACmT,EAAM6I,GAC/B,IAAI9f,EAEFA,EADEirE,WAASh0D,GACF+tG,oBAAoBxwB,MAAMv9E,EAAM,IAEhC4qG,EAAIqM,iBAAgB,kBAAMhhD,EAAKkhD,mBAAmBvM,EAAK5qG,KAC5D,aAAc6I,GAEpBrT,EAAWhN,KAAKO,MAGX,IAAIilH,WAAW6I,EAAOxpH,KAAMwpH,EAAM,WAAUtM,EAASh6E,EAAW/6B,KACxE,CAAA3K,IAAA,qBAAAN,MAEM,SAAmBqgH,EAAmB7tD,GAC3C,OAAOgxD,oBAAoBxwB,MAAMxgC,EAAKvlD,IAAKulD,EAAU,SAAEA,EAAK3sD,YAC7D,CAAAvF,IAAA,eAAAN,MAEM,SAAawyD,EAAoC6tD,GAEtD,IAFwE,IAAAwM,EAAA,KAClE7M,EAAoB,GAAE8M,EAAA,SACnBxuG,GACP,IAAM7I,EAAO+8C,EAAKl0C,GACZyuG,EAAa1M,EAAIqM,iBAAgB,kBAAMG,EAAKG,mBAAmBv3G,EAAM4qG,KAAM,SAAU/hG,GAC3F0hG,EAAQ/hH,KAAK8uH,IAHNzuG,EAAM,EAAGA,EAAMk0C,EAAK70D,OAAQ2gB,IAAOwuG,EAAnCxuG,GAKT,OAAO0hG,IACR,CAAA1/G,IAAA,qBAAAN,MAEO,SAAmByV,EAAkC4qG,GAC3D,IAAI7hH,EACJ,GAAIirE,WAASh0D,GAEX,GADAA,EAAOA,EAAKoV,OACR8iE,gBAAgBzU,UAAUzjE,GAAMk1D,QAAS,CAC3C,IAAMrE,EAAM7wD,EAAK0+C,UAAU,EAAG1+C,EAAK9X,OAAS,GAC5Ca,EAAS8iH,OAAOh7C,IAAIA,OACf,KAAIsnB,gBAAgB1U,UAAUzjE,GAAMk1D,QAGzC,MAAM82C,WAAW4K,cAAchM,EAAI2B,iBAA0C,wBAAA3/F,OAAA5M,IAF7EjX,EAAS8iH,OAAO91D,MAAM/1C,QAKxBjX,EAAS8iH,OAAO91D,MAAM/1C,EAAI,SAAQA,EAAKq4E,IAEzC,OAAOtvF,IACR,CAAA8B,IAAA,cAAAN,MAEM,SAAYqgH,EAAmB7tD,GAAkC,IAAAy6D,EAAA,KAChEC,EAA8C,GAKpD,OAJAtvH,OAAO0nF,QAAQ9yB,GAAMlwD,SAAQ,SAAoB2a,EAAAqB,GAAO,IAAAlB,EAAAszD,eAAAzzD,EAAA,GAAzBlY,EAASqY,EAAA,GAAEo1C,EAAIp1C,EAAA,GAC5C8vG,EAAcnoH,GAAas7G,EAAIqM,iBAAgB,kBAAMO,EAAKE,WAAW9M,EAAK7tD,KACtE,SAAUl0C,MAETwsE,EAAErqF,OAAOysH,KACjB,CAAA5sH,IAAA,aAAAN,MAEM,SAAWqgH,EAAmB7tD,GACnC,IAAIh0D,EAGJ,GADAA,EAASuvF,gBAAgB7U,UAAU1mB,IACZ,IAAnBh0D,EAAOmsE,QAAkB,CAC3B,IAAM2hD,EAAS9tH,EAAOrB,KAEtB,OAAIiiH,WAASkN,GACJxhC,EAAE1Y,SAAgB,WAACk6C,IAE5BvK,OAAOV,WAASiL,IAA2B,WAAhBA,EAAOxpH,MACd,MAAhBwpH,EAAOtsH,MACF8qF,EAAE1Y,SAAQ,WAASk6C,EAAOtsH,OAE1B8qF,EAAE1Y,UAKb,GADA5zE,EAASyvF,gBAAgB/U,UAAU1mB,IACZ,IAAnBh0D,EAAOmsE,QAAkB,CAC3B,IAAMyiD,EAAS5uH,EAAOrB,KAEtB,OAAIssE,WAAS2jD,GACJtiC,EAAE5Y,SAAgB,WAACk7C,IAE5BrL,OAAOV,WAAS+L,IAA2B,WAAhBA,EAAOtqH,MACd,MAAhBsqH,EAAOptH,MACF8qF,EAAE5Y,SAAQ,WAASk7C,EAAOptH,OAE1B8qF,EAAE5Y,UAKb,GADA1zE,EAAS0vF,cAAchV,UAAU1mB,IACV,IAAnBh0D,EAAOmsE,QAAkB,CAC3B,IAAM0iD,EAAS7uH,EAAOrB,KAEtB,OAAImwH,YAAUD,GACLviC,EAAS,aAAU,WAACuiC,IAE7BtL,OAAOV,WAASgM,IAA2B,SAAhBA,EAAOvqH,MACd,MAAhBuqH,EAAOrtH,MACF8qF,EAAC,aAAU,WAASuiC,EAAOrtH,OAE3B8qF,EAAC,cAKZ,GADAtsF,EAAS4vF,iBAAiBlV,UAAU1mB,IACb,IAAnBh0D,EAAOmsE,QAAkB,CAC3B,IAAM4iD,EAAS/uH,EAAOrB,KACtB,OAAoB,MAAhBowH,EAAOvtH,MACFgtF,YAAmB,WAACugC,EAAOvtH,OAE3BgtF,YAIX,MAAMy0B,WAAW4K,cAAchM,EAAI2B,iBAC/B,4CAA8CjpF,KAAKjL,UAAU0kC,MAClE,CAAAlyD,IAAA,eAAAN,MAEM,SAAaqgH,EAAmB7tD,GAA2C,IAAAg7D,EAAA,KAE5E/jD,WAASjX,KACXA,EAAOnwD,KAAKorH,gBAAgBpN,EAAK7tD,IAKnC,IAAMk7D,EAAYl7D,EAAKxvD,OACjBA,EAASq9G,EAAIqM,iBAAgB,kBAAMc,EAAKG,YAAYtN,EAAKqN,KAAY,UAGrEE,EAAiBC,OAAKr7D,EAAM,CAAC,WAAY,SAAU,UAAW,OAAQ,YACtEs7D,EAA2B,GACjC,GAAI,aAAcF,EAChB,GAAInkD,WAASmkD,EAAetsH,UAAW,CACrC,IAAMtB,EAAQqgH,EAAID,KAAKwN,EAAetsH,UACtCygH,OAAO3C,WAASp/G,IAChB8tH,EAAYxsH,SAAWtB,OAEvB8tH,EAAYxsH,SAAWssH,EAAetsH,SAG1C,GAAI,WAAYssH,EACd,GAAInkD,WAASmkD,EAAevsH,QAAS,CACnC,IAAM0sH,EAAQ1N,EAAID,KAAKwN,EAAevsH,QACtC0gH,OAAO3C,WAAS2O,IAChBD,EAAYzsH,OAAS0sH,OAErBD,EAAYzsH,OAASusH,EAAevsH,OAGxC,GAAI,YAAausH,EACf,GAAInkD,WAASmkD,EAAevsF,SAAU,CACpC,IAAM2sF,EAAQ3N,EAAID,KAAKwN,EAAevsF,SACtC0gF,OAAO3C,WAAS4O,IAChBF,EAAYzsF,QAAU2sF,OAEtBF,EAAYzsF,QAAUusF,EAAevsF,QAGzC,GAAI,SAAUusF,EAAgB,CAC5B,IAAIK,EAAQL,EAAersH,KAI3B,GAHIkoE,WAASwkD,KACXA,EAAQ5N,EAAID,KAAK6N,IAEfX,YAAUW,GACZH,EAAYvsH,KAAO,CAAEQ,OAAQ,EAAGC,MAAO,OAClC,CACL+/G,OAAOV,WAAS4M,GAAuC,+BAAA5rG,OAAA4rG,EAAa,SAAA5rG,OAAA0W,KAAKjL,UAAU0kC,KACnF,IAAMjxD,EAAI3D,OAAAiE,OAAA,GAAOosH,GACjB,GAAI,WAAY1sH,GAAQkoE,WAASloE,EAAKQ,QAAS,CAC7C,IAAMmsH,EAAQ7N,EAAID,KAAK7+G,EAAKQ,QAC5BggH,OAAO3C,WAAS8O,GAA6C,qCAAA7rG,OAAA6rG,EAAa,SAAA7rG,OAAA0W,KAAKjL,UAAU0kC,KACzFjxD,EAAKQ,OAASmsH,EAEhB,GAAI,UAAW3sH,GAAQkoE,WAASloE,EAAKS,OAAQ,CAC3C,IAAMmsH,EAAQ9N,EAAID,KAAK7+G,EAAKS,OAC5B+/G,OAAO3C,WAAS+O,GAA4C,oCAAA9rG,OAAA8rG,EAAa,SAAA9rG,OAAA0W,KAAKjL,UAAU0kC,KACxFjxD,EAAKS,MAAQmsH,EAEfL,EAAYvsH,KAAO3D,OAAOiE,OAAO,CAACE,OAAQ,EAAGC,MAAO,GAAIT,IAG5D,GAAI,YAAaqsH,EACf,GAAInkD,WAASmkD,EAAervD,SAAU,CACpC,IAAM6vD,EAAQ/N,EAAID,KAAKwN,EAAervD,SACtCwjD,OAAOuL,YAAUc,IACjBN,EAAYvvD,QAAU6vD,OAEtBN,EAAYvvD,QAAUqvD,EAAervD,QAGzC,IAEI//D,EAFE2C,EAASH,OAAOgyF,MAAM86B,GAG5B,GAAI,QAASt7D,EAAM,CASjB,IAPA,IAAMvlD,EAAMulD,EAAKvlD,IACX4F,EAAQjV,OAAOiE,OAAO,GAAI2wD,EAAM,CACpCj9C,GAAIi9C,EAAKj9C,GACTvS,SACA7B,WAGFivE,EAAA,EAAAi+C,EAAkBzwH,OAAOqE,KAAK4Q,GAAQu9D,EAAAi+C,EAAA1wH,OAAAyyE,IAAA,CAAjC,IAAM9vE,EAAG+tH,EAAAj+C,GACRk+C,EAAQz7G,EAAMvS,GACdmpE,WAAS6kD,KACXA,EAAQjsH,KAAKorH,gBAAgBpN,EAAKiO,GAClCz7G,EAAMvS,GAAOguH,GAGjB9vH,EAAS6kH,IAAIp2G,EAAK4F,QAEb,GAAI,SAAU2/C,EAAM,CACzBuvD,OAAOvxB,UAAQh+B,EAAKpwC,MAAM,8BAADC,OAAgCmwC,EAAKpwC,KAAI,SAAAC,OAAQmwC,IAC1E,IAAMuyD,EAAavyD,EAAKpwC,KAAK9b,KAAI,SAACmP,EAAM6I,GACtC,OAAO+hG,EAAIqM,iBAAgB,kBAAMc,EAAKb,aAAatM,EAAK5qG,KACpD,OAAQ6I,MAEd9f,EAASspH,KAAK,CACZvyG,GAAIi9C,EAAKj9C,GACTvS,SACA7B,SACA4jH,oBAGG,GAAI,WAAYvyD,EAAM,CAC3BuvD,OAAOvxB,UAAQh+B,EAAKnwC,QAAQ,gCAADA,OAAkCmwC,EAAKnwC,OAAM,SAAAA,OAAQmwC,IAChF,IAAMq1D,EAAar1D,EAAKnwC,OAAO/b,KAAI,SAACmP,EAAM6I,GACxC,OAAO+hG,EAAIqM,iBAAgB,kBAAMc,EAAKb,aAAatM,EAAK5qG,KACpD,SAAU6I,MAEhB9f,EAASssH,OAAO,CACdv1G,GAAIi9C,EAAKj9C,GACTvS,SACA7B,SACA4jH,WAAA8C,SAGG,GAAI,UAAWr1D,EAAM,CAC1B,IAAI/jC,EAAQ+jC,EAAK/jC,MACbg7C,WAASh7C,KACXA,EAAQpsB,KAAKorH,gBAAgBpN,EAAK5xF,IAEpC,IAAM3qB,EAAYu8G,EAAIqM,iBAAgB,kBAAMc,EAAKb,aAAatM,EAAK5xF,KAAQ,SAC3EjwB,EAASspH,KAAK,CACZvyG,GAAIi9C,EAAKj9C,GACTvS,SACA7B,SACA4jH,WAAY,CAACjhH,SAGV,MAAI,YAAa0uD,GA0BtB,MAAMivD,WAAW4K,cAAchM,EAAI2B,iBAC/B,sCA1BJ,IAAMvC,EAA2C,CAC/ClqG,GAAIi9C,EAAKj9C,GACTvS,SACA7B,UAEEssF,EAAUj7B,EAAKi7B,QAMnB,GALIhkB,WAASgkB,KACXA,EAAUprF,KAAKorH,gBAAgBpN,EAAK5yB,IAEtCgyB,EAAM37G,UAAYu8G,EAAIqM,iBAAgB,kBAAMc,EAAKb,aAAatM,EAAK5yB,KAAU,WAEzE,YAAaj7B,EAAM,CACrB,IAAI+5B,EAAU/5B,EAAK+5B,QACnBA,EAAUlqF,KAAKorH,gBAAgBpN,EAAK9zB,GACpCkzB,EAAMlzB,QAAUA,EAGlB,GAAI,UAAW/5B,EAAM,CACnB,IAAIpxD,EAAQoxD,EAAKpxD,MACjBA,EAAQiB,KAAKorH,gBAAgBpN,EAAKj/G,GAClCq+G,EAAMr+G,MAAQA,EAEhB5C,EAAS,IAAIutH,iBAAiBtM,GAQhC,OADAyM,EAAe77B,OAAOlhB,MAAM,kBAAD9sD,OAAmBwqD,aAAaruE,KACpDA,IACR,CAAA8B,IAAA,cAAAN,MAEM,SAAYqgH,EAAmB7tD,GACpC,IAAMmgC,EAA0B,GAChC,GAAoB,kBAATngC,EAAmB,CAE5B,IAAM9rD,EAASrE,KAAKorH,gBAAgBpN,EAAK7tD,GACzCuvD,OAAOt4C,WAAS/iE,GAAwD,+CAAA2b,OAAA3b,EAAc,SAAA2b,OAAAmwC,IACtF,IAAMh2B,EAAQ,IAAI12B,gBAAgBY,GAClCisF,EAAW10F,KAAKu+B,QACX,GAAIg2B,aAAgB/sD,MAAO,CAAC,IACV8jE,EADSK,EAAA2kD,6BACb/7D,GAAI,IAAvB,IAAyBoX,EAAA7qE,MAAAwqE,EAAAK,EAAAppE,KAAAspE,MAAA,KAAdr0D,EAAI8zD,EAAAvpE,MACPwuH,EAAQnsH,KAAKosH,gBAAgBpO,EAAK5qG,GACxCk9E,EAAW10F,KAAKuwH,IACjB,MAAAlmE,GAAAshB,EAAA9gE,EAAAw/C,GAAA,QAAAshB,EAAAO,UACI,GAAY,MAAR3X,OAEJ,IAAoB,WAAhB+S,QAAO/S,GAIhB,MAAMivD,WAAW4K,cAAchM,EAAI2B,iBAC/B,kCAJJ,IAAM0M,EAAQrsH,KAAKosH,gBAAgBpO,EAAK7tD,GACxCmgC,EAAW10F,KAAKywH,GAKlB,OAAOx4F,OAAO88D,MAAML,KACrB,CAAAryF,IAAA,kBAAAN,MAED,SAAgBqgH,EAAmBttB,GACjC,GAAI,WAAYA,EAAM,CACpB,IAAMrsF,EAASrE,KAAKorH,gBAAgBpN,EAAKttB,EAAKrsF,QAE9C,OADAq7G,OAAOt4C,WAAS/iE,GAAwD,+CAAA2b,OAAA3b,EAAc,SAAA2b,OAAA0W,KAAKjL,UAAUilE,KAC9F,IAAIjtF,gBAAgBY,GAEtB,GAAI,cAAeqsF,EAAM,CAC9B,IAAMnnF,EAAYvJ,KAAKorH,gBAAgBpN,EAAKttB,EAAKnnF,WAEjD,OADAm2G,OAAOt4C,WAAS79D,GAA8D,kDAAAyW,OAAAzW,EAAiB,SAAAyW,OAAA0W,KAAKjL,UAAUilE,KACvG,IAAI1B,mBAAmBzlF,GAEzB,GAAI,WAAYmnF,EAAM,CAC3B,IAAMrnF,EAASrJ,KAAKorH,gBAAgBpN,EAAKttB,EAAKrnF,QAE9C,OADAq2G,OAAOt4C,WAAS/9D,GAAwD,+CAAA2W,OAAA3W,EAAc,SAAA2W,OAAA0W,KAAKjL,UAAUilE,KAC9F,IAAI5B,gBAAgBzlF,GAEtB,GAAI,eAAgBqnF,EAAM,CAC/B,IAAM9G,EAAa5pF,KAAKorH,gBAAgBpN,EAAKttB,EAAK9G,YAElD,OADA81B,OAAOt4C,WAASwiB,GAAgE,mDAAA5pE,OAAA4pE,EAAkB,SAAA5pE,OAAA0W,KAAKjL,UAAUilE,KAC1G,IAAIZ,oBAAoBlG,GAE1B,GAAI,WAAY8G,EAAM,CAC3B,IAAM1G,EAAShqF,KAAKorH,gBAAgBpN,EAAKttB,EAAK1G,QAC9C01B,OAAOt4C,WAAS4iB,GAAwD,+CAAAhqE,OAAAgqE,EAAc,SAAAhqE,OAAA0W,KAAKjL,UAAUilE,KACrG,IAAInhE,EAAQmhE,EAAKnhE,MACjB,GAAI63C,WAAS73C,GAAQ,CACnB,IAAM+8F,EAActsH,KAAKorH,gBAAgBpN,EAAKzuF,GAC9CmwF,OAAuB,QAAhB4M,GAAyC,SAAhBA,EAC5B,iDACJ/8F,EAAQ+8F,OACCn+B,UAAQ5+D,KAGjBA,EAAQ,OAEV,OAAO,IAAImE,cAAcs2D,EAAQz6D,GAE5B,GAAI,UAAWmhE,EAAM,CAC1B,IAAIhyF,EAAQgyF,EAAKhyF,MACjB,GAAI0oE,WAAS1oE,GAAQ,CACnB,IAAMf,EAAQqgH,EAAID,KAAKr/G,GACvBghH,OAAOvxB,UAAQxwF,GAA6C,qCAAAqiB,OAAAriB,EAAa,SAAAqiB,OAAAthB,IACzEA,EAAQf,EAEV,GAAIwwF,UAAQzvF,GAEV,IAAK,IAAItD,EAAI,EAAGA,EAAIsD,EAAMpD,OAAQF,IAAK,CACrC,IAAIgY,EAAO1U,EAAMtD,GACbgsE,WAASh0D,KACXA,EAAOpT,KAAKorH,gBAAgBpN,EAAK5qG,GACjC1U,EAAMtD,GAAKgY,GAIjB,IAAAm5G,EAA2B7tH,EAAK8tH,EAAAn+C,eAAAk+C,EAAA,GAAzBxtH,EAAKytH,EAAA,GAAEhnH,EAAGgnH,EAAA,GAAEtpF,EAAIspF,EAAA,GAIvB,OAHA9M,OAAO3C,WAASh+G,GAA6C,qCAAAihB,OAAAjhB,EAAa,SAAAihB,OAAAthB,IAC1EghH,OAAc,MAAPl6G,GAAeu3G,WAASv3G,GAAK,2CAADwa,OAA6Cxa,EAAG,SAAAwa,OAAQthB,IAC3FghH,OAAe,MAARx8E,GAAgB65E,WAAS75E,GAAM,4CAADljB,OAA8CkjB,EAAI,SAAAljB,OAAQthB,IACxF,IAAIwwF,eAAenwF,EAAOyG,EAAwB09B,GAEpD,GAAI,OAAQwtD,EAAM,CACvB,IAAIj7E,EAAQi7E,EAAKrG,GACjB,GAAIjjB,WAAS3xD,GAAQ,CACnB,IAAMg3G,EAAQzO,EAAID,KAAKtoG,GACvBiqG,OAAO3C,WAAS0P,IAChBh3G,EAAQg3G,EAGV,OADA/M,OAAO3C,WAAStnG,GAA0C,kCAAAuK,OAAAvK,EAAa,SAAAuK,OAAA0wE,IAChE,IAAIs4B,YAAYvzG,GAElB,GAAI,YAAai7E,EAAM,CAC5B,IAAMxG,EAAUlqF,KAAKorH,gBAAgBpN,EAAKttB,EAAKxG,SAE/C,OADAw1B,OAAOt4C,WAAS8iB,GAA0D,gDAAAlqE,OAAAkqE,EAAe,SAAAlqE,OAAA0W,KAAKjL,UAAUilE,KACjG,IAAIw4B,eAAeh/B,GAG5B,MAAMk1B,WAAW4K,cAAchM,EAAI2B,iBAC/B,mCAAqCjpF,KAAKjL,UAAUilE,MACzD,CAAAzyF,IAAA,kBAAAN,MAEO,SAAgBqgH,EAAmBz1F,GACzC,IAAIpsB,EAASosB,EACb,GAAIA,EAAIuqD,WAAW,KACjB32E,EAAS6hH,EAAID,KAAKx1F,QACb,GAAIA,EAAIlW,SAAS,KAAM,CAE5B,IAAMq6G,EAAUnkG,EAAIsO,MAAM,2BAC1B,GAAI61F,EAAS,CAAC,IACeC,EADhBC,EAAAV,6BACSQ,GAAO,IAA3B,IAA6BE,EAAAlwH,MAAAiwH,EAAAC,EAAAzuH,KAAAspE,MAAA,KAAlB5wC,EAAK81F,EAAAhvH,MACRA,EAAQqgH,EAAID,KAAKlnF,GACvB6oF,OAAOt4C,WAASzpE,IAAUstH,YAAUttH,IAAUo/G,WAASp/G,GAAO,gFAADqiB,OAAkFriB,EAAK,SAAAqiB,OAAQuI,IAC5JpsB,EAASA,EAAOyrB,QAAQiP,EAAO6lC,OAAO/+D,KACvC,MAAAsoD,GAAA2mE,EAAAnmH,EAAAw/C,GAAA,QAAA2mE,EAAA9kD,MAOL,OAJIV,WAASjrE,KAEXA,EAASA,EAAOyrB,QAAQ,QAAS,KAAKA,QAAQ,QAAS,OAElDzrB,IACR,CAAA8B,IAAA,cAAAN,MAEM,SAAYwyD,EAAkB6tD,GACnC6L,EAAe77B,OAAOlhB,MAAM,iBAAkBp2C,KAAKjL,UAAU0kC,EAAM,KAAM,IAEzE6tD,EAAS,OAAHA,QAAG,IAAHA,IAAO,IAAIuB,aAEjB,IAAMpjH,EAAS4sH,WAAWlyC,UAAU1mB,GACpC,IAAuB,IAAnBh0D,EAAOmsE,QACT,MAAM82C,WAAW4K,cAAchM,EAAI2B,iBAAkB,yBAA2BxjH,EAAOqoB,MAAMwG,SAE/F,IAAMi/F,EAAS9tH,EAAOrB,KAEtB+uH,EAAe77B,OAAOlhB,MAAM,yBAA0Bp2C,KAAKjL,UAAUw+F,EAAQ,KAAM,IAEnF,IAAMtB,EAAQsB,EAAOtB,MAAM1kH,KAAI,SAAC2oE,EAAM3wD,GACpC,OAAO+hG,EAAIqM,iBAAgB,WACzB,OAAe,MAAXz9C,EAAK15D,GAEA01G,WAAWiE,gBAAgB,CAChCtwG,KAAMqwD,EAAKrwD,KACX8jB,GAAIusC,EAAKvsC,GACTntB,GAAI05D,EAAK15D,GACTywB,UAAWipC,EAAKjpC,UAChB7oC,KAAM8xE,EAAK9xE,OAGR8tH,WAAWkE,eAAe,CAC/BvwG,KAAMqwD,EAAKrwD,KACX8jB,GAAIusC,EAAKvsC,GACTsD,UAAWipC,EAAKjpC,UAChB7oC,KAAM8xE,EAAK9xE,KACX+tH,SAAUj8C,EAAKi8C,aAEhB,QAAS5sG,MAGd,OAAOysG,OAAO/3B,MAAMs5B,EAAO1tG,KAAM0tG,EAAO5pF,GAAIsoF,OAC7CkB,EA5fyB,CAAQ3I,gBACV2I,eAAA77B,OAAiBtgB,cAAcmhB,UAAU,kBC3CnE,IAAsBk+B,YAAWrrD,cAG/B,SAAsBqrD,EAAAlgD,GAAgB3L,gBAAA,KAAA6rD,GACpC/sH,KAAK6sE,SAAWA,K,4pCCDpB,SAASmgD,kBAAkBvrH,EACAy0B,GACzB+2F,wBAAwBxrH,EAAWy0B,GAGrC,SAAS+2F,wBAAwB7kG,EACA8N,GAC/B,IAAMg3F,EAAWh3F,EAAK9N,GACtB,GAAI8kG,EACF,OAAO,EAET,GAAI9kG,aAAgBmhG,eAClB,OAAO0D,wBAAwB7kG,EAAKgE,MAAO8J,GACtC,GAAI9N,aAAgBu6F,aAAc,CAAC,IACPz7C,EAAbK,EAAA4lD,6BAAA/kG,EAAK+D,UAAQ,IAAjC,IAAmCo7C,EAAA7qE,MAAAwqE,EAAAK,EAAAppE,KAAAspE,MAAA,KAAxBr7C,EAAK86C,EAAAvpE,MACRyvH,EAAgBH,wBAAwB7gG,EAAO8J,GACrD,GAAIk3F,EACF,OAAO,GAEV,MAAAnnE,GAAAshB,EAAA9gE,EAAAw/C,GAAA,QAAAshB,EAAAO,IACD,OAAO,EACF,GAAI1/C,aAAgB43F,cACzB,OAAO,EAET,MAAMjN,aAAapiB,MAAM,4DAI3B,SAAS08B,mBAAmB5rH,EACAy0B,GAC1Bo3F,yBAAyB7rH,EAAWy0B,GAGtC,SAASo3F,yBAAyBllG,EACA8N,GAChC,IAAIg3F,GAAW,EAEf,GAAI9kG,aAAgBmhG,eAClB2D,EAAWI,yBAAyBllG,EAAKgE,MAAO8J,QAC3C,GAAI9N,aAAgBu6F,aAAc,CAAC,IACPgK,EAAbC,EAAAO,6BAAA/kG,EAAK+D,UAAQ,IAAjC,IAAmCygG,EAAAlwH,MAAAiwH,EAAAC,EAAAzuH,KAAAspE,MAAA,KAAxBr7C,EAAKugG,EAAAhvH,MACRyvH,EAAgBE,yBAAyBlhG,EAAO8J,GACtD,GAAIk3F,EAAe,CACjBF,GAAW,EACX,QAEH,MAAAjnE,GAAA2mE,EAAAnmH,EAAAw/C,GAAA,QAAA2mE,EAAA9kD,UACI,KAAI1/C,aAAgB43F,eAGzB,MAAMjN,aAAapiB,MAAM,4DAG3B,QAAIu8B,GAGGh3F,EAAK9N,GAId,SAASmlG,cAAc9rH,EACAy0B,GACrB,OAAOs3F,oBAAoB,KAAM/rH,EAAWy0B,GAG9C,SAASs3F,oBAAoB52F,EACAxO,EACA8N,GAC3B,IAAMu3F,EAAUv3F,EAAK9N,GAGrB,GAAIqlG,aAAmBlE,eAAgB,CACrC,IAAMmE,EAAWF,oBAAoBC,EAASA,EAAQrhG,MAAO8J,GACzDw3F,IAAaD,EAAQrhG,OACvBqhG,EAAQ7lG,QAAQ8lG,QAEb,GAAID,aAAmB9K,aAAc,CAAC,IACPgL,EAAhBC,EAAAT,6BAAAM,EAAQthG,UAAQ,IAApC,IAAsCyhG,EAAAlxH,MAAAixH,EAAAC,EAAAzvH,KAAAspE,MAAA,KAA3Br7C,EAAKuhG,EAAAhwH,MACRkwH,EAAWL,oBAAoBC,EAASrhG,EAAO8J,GACjD23F,IAAazhG,GACfqhG,EAAQ7lG,QAAQwE,EAAOyhG,IAE1B,MAAA5nE,GAAA2nE,EAAAnnH,EAAAw/C,GAAA,QAAA2nE,EAAA9lD,KAGH,OAAO2lD,EAIF,IAAMK,sBAAwB,CACnCd,oCACAK,sCACAE,6B,qiBC1FF,IAAaQ,WAAW,SAAAC,GAAAjrD,UAAAgrD,EAAAC,GAAA,IAAAvkD,EAAAwkD,gBAAAF,GAGtB,SAAAA,IAAA,OAAA7sD,gBAAA,KAAA6sD,GAAAtkD,EAAA/tE,KAAA,KACQ,cAgCP,OA/BAgmE,aAAAqsD,EAAA,EAAA9vH,IAAA,QAAAN,MAED,SAAMqgH,EAAuCj8C,GAC3C,OAAO+rD,sBAAsBP,cAAcxrD,GAAO,SAAA35C,GAChD,KAAMA,aAAgBk4F,cAAe,OAAOl4F,EAE5C,IAAI8lG,EAAM9lG,EACNjsB,EAAS,KAGb,MAAM,EAAM,CACV,IAAMm5B,EAAW0oF,EAAIx7C,gBAAgBjlE,IAAI2wH,EAAItjH,KAC7C,QAAiBzL,IAAbm2B,EACF,MAAM,IAAI8+B,MAAM,YAADp0C,OAAakuG,EAAItjH,IAAgC,+BAElEmjH,EAAW//B,OAAOlhB,MAAuB,iBAAA9sD,OAAAkuG,EAAItjH,IAAU,QAAAoV,OAAAsV,EAAS4yC,WAChE,IAAMzmE,EAAY6zB,EAASt3B,OAAOggH,EAAKkQ,EAAIzN,YAI3C,GAHAh/G,EAAU0sH,OAAOD,EAAwC54F,GACzDy4F,EAAW//B,OAAOlhB,MAAgC,0BAAA9sD,OAAAve,EAAUymE,SAAQ,gBAAAloD,OAAe0W,KAAKjL,UAAUyiG,EAAIzN,gBAEhGh/G,aAAqB6+G,cAAe,CACxCnkH,EAASsF,EACT,MAGFysH,EAAMzsH,EAIR,OADAi+G,OAAkB,OAAXvjH,GACAA,SAEV4xH,EApCqB,CAAQhB,aACNgB,WAAA//B,OAAStgB,cAAcmhB,UAAU,cCL3D,IAAau/B,eAAc,WASzB,SAAAA,EAAY/L,GAA0CnhD,gBAAA,KAAAktD,GARtD,KAAgBC,kBAAG,EAEnB,KAAA9tD,OAAS,CACP4/C,gBAAiB,GAMjBngH,KAAKqiH,YAAcA,EASpB,OARA3gD,aAAA0sD,EAAA,EAAAnwH,IAAA,kBAAAV,IAED,WACE,OAAOyC,KAAKqiH,YAAY7/C,kBACzB,CAAAvkE,IAAA,cAAAV,IAED,WACE,OAAOyC,KAAKqiH,YAAYt2F,gBACzBqiG,EAnBwB,G,4pCCO3B,IAAaE,gBAAe,WAmB1B,SAAYA,EAAA1zE,EACA7uB,GAC8B,IAA9B6K,EAAAvuB,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAA0B,KAAI64D,gBAAA,KAAAotD,GARjC,KAAQ1zE,SAAyB,KAIlC,KAAa2zE,cAAc,KAKjCvuH,KAAK46C,SAAWA,EAChB56C,KAAK+rB,YAAcA,EACnB/rB,KAAK42B,OAASA,EAgIf,OA/HA8qC,aAAA4sD,EAAA,EAAArwH,IAAA,SAAAN,MAED,SAAOm6B,GAAgB,IACgBovC,EAAbK,EAAAinD,6BAAAxuH,KAAK46C,UAAQ,IAArC,IAAuC2sB,EAAA7qE,MAAAwqE,EAAAK,EAAAppE,KAAAspE,MAAA,KAA5BgnD,EAASvnD,EAAAvpE,MACZyuB,EAAQqiG,EAAU35G,cAAkCgjB,GAC1D,GAAa,MAAT1L,EACF,OAAO,IAAIkiG,EAAgB,CAACliG,GAAQpsB,KAAK+rB,YAAa/rB,OAEzD,MAAAimD,GAAAshB,EAAA9gE,EAAAw/C,GAAA,QAAAshB,EAAAO,IACD,OAAO,IAAIwmD,EAAgB,GAAItuH,KAAK+rB,YAAa/rB,QAClD,CAAA/B,IAAA,YAAAN,MAED,SAAUm6B,GACR,IAAM42F,EAAiB1uH,KAAK46C,SACvB32C,KAAI,SAAA6B,GAAC,OAAI1C,MAAMmZ,KAAKzW,EAAEsgB,iBAAqC0R,OAC3DhkB,OACL,OAAO,IAAIw6G,EAAgBI,EAAgB1uH,KAAK+rB,YAAa/rB,QAC9D,CAAA/B,IAAA,SAAAN,MAID,SAAOgxH,GAAsC,IAAAlpH,EAAA,KAE3C6oH,EAAgBtgC,OAAO9nC,MAAM,6BACS,oBAAxByoE,EAAqC,oBAAsBA,GACnE,0BACA3uH,KAAKklE,YAEX,IAAI0pD,EAAoC,KAExC,GAAIxnD,WAASunD,GAEXC,EAAc5uH,KAAK46C,SAASv2C,QAAO,SAAAyB,GAAC,OAAIA,EAAE4mH,QAAQiC,UAC7C,KAAIv+B,aAAWu+B,GAIpB,MAAM,IAAIv6D,MAA2D,qDAAAp0C,OAAA2uG,IAFrEC,EAAc5uH,KAAK46C,SAASv2C,QAAO,SAACyB,EAAGmW,GAAG,OAAK0yG,EAAoB7oH,EAAGmW,EAAKxW,EAAKm1C,aAKlF,IAAMz+C,EAAS,IAAImyH,EAAgBM,EAAa5uH,KAAK+rB,YAAa/rB,MAElE,OADAsuH,EAAgBtgC,OAAO9nC,MAAM,qBAADlmC,OAAsB7jB,EAAO+oE,aAClD/oE,IACR,CAAA8B,IAAA,OAAAN,MAED,SAAKkxH,GACH,IAAMC,EAAY9uH,KAAK46C,SAASl8C,QAAQ8wB,KAAKq/F,GAC7C,OAAO,IAAIP,EAAgBQ,EAAW9uH,KAAK+rB,YAAa/rB,QACzD,CAAA/B,IAAA,QAAAN,MAED,SAAMoB,GAAoE,IAArDyG,EAAA6C,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAAqB,KAAM66B,EAAA76B,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAAsB,KAiBpE,GAdW,MAAP7C,IACFA,EAAMxF,KAAK46C,SAASt/C,QAEV,MAAR4nC,IACFA,EAAO,GAGLnkC,EAAQ,IACVA,EAAQiB,KAAK46C,SAASt/C,OAASyD,GAE7ByG,EAAM,IACRA,EAAMxF,KAAK46C,SAASt/C,OAASkK,GAG3BzG,EAAQ,GAAKA,GAASiB,KAAK46C,SAASt/C,OACtC,MAAM,IAAI84D,MAAqB,eAAAp0C,OAAAjhB,EAAK,sCAAAihB,OAAqChgB,KAAK46C,SAASt/C,OAAwB,mBAAA0kB,OAAAhgB,KAAKklE,WAAc,MAEpI,GAAI1/D,EAAM,GAAKA,EAAMxF,KAAK46C,SAASt/C,OACjC,MAAM,IAAI84D,MAAmB,aAAAp0C,OAAAxa,EAAG,sCAAAwa,OAAqChgB,KAAK46C,SAASt/C,OAAwB,mBAAA0kB,OAAAhgB,KAAKklE,WAAc,MAGhI,GAAa,IAAThiC,EACF,MAAM,IAAIkxB,MAAiC,2BAAAp0C,OAAAhgB,OAG7C,GAAIkjC,EAAO,GACT,GAAInkC,EAAQyG,EACV,MAAM,IAAI4uD,MAAqB,eAAAp0C,OAAAjhB,EAAK,8BAAAihB,OAA6Bxa,EAAG,SAAAwa,OAAQhgB,YAG9E,GAAIjB,EAAQyG,EACV,MAAM,IAAI4uD,MAAqB,eAAAp0C,OAAAjhB,EAAK,+BAAAihB,OAA8Bxa,EAAG,SAAAwa,OAAQhgB,OAKjF,IADA,IAAM8uH,EAAY,GACT1zH,EAAI2D,EAAO3D,EAAIoK,EAAKpK,GAAK8nC,EAChC4rF,EAAUlzH,KAAKoE,KAAK46C,SAASx/C,IAE/B,OAAO,IAAIkzH,EAAgBQ,EAAW9uH,KAAK+rB,YAAa/rB,QACzD,CAAA/B,IAAA,QAAAN,MAED,SAAMwzE,GAA8E,IAAA9H,EAAA,KAA7D0lD,EAAwB1mH,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAAAimH,EAAgBU,sBACvDxsE,EAAW,IAAI5rC,IACrB5W,KAAK46C,SAAS36C,SAAQ,SAACovB,EAAOpT,GAC5B,IAAMhe,EAAMkzE,EAAO9hD,EAAOpT,EAAKotD,EAAKzuB,UAC/B4H,EAASlzB,IAAIrxB,IAChBukD,EAASvhD,IAAIhD,EAAK,IAEpBukD,EAASjlD,IAAIU,GAAKrC,KAAKyzB,MAGzB,IACuCs9F,EADjCmC,EAAY,GAAElC,EAAA4B,6BACWhsE,GAAQ,IAAvC,IAAyCoqE,EAAAlwH,MAAAiwH,EAAAC,EAAAzuH,KAAAspE,MAAA,KAAAwnD,EAAA5gD,eAAAs+C,EAAAhvH,MAAA,GAA7BM,EAAGgxH,EAAA,GAAEC,EAASD,EAAA,GAElBE,EAAWJ,EAAQ/uH,KAAK+rB,YAAamjG,EAAWjxH,GACtD6wH,EAAUlzH,KAAKuzH,IAChB,MAAAlpE,GAAA2mE,EAAAnmH,EAAAw/C,GAAA,QAAA2mE,EAAA9kD,IACD,OAAO,IAAIwmD,EAAgBQ,EAAW9uH,KAAK+rB,YAAa/rB,QACzD,CAAA/B,IAAA,OAAAV,IAED,WACE,OAAOyC,KAAK46C,SAASt/C,SACtB,CAAA2C,IAAA,eAAAV,IAED,WAAgB,IAAAitH,EAAA,KAId,OAH0B,MAAtBxqH,KAAKuuH,gBACPvuH,KAAKuuH,cAAgBvuH,KAAK46C,SAAS32C,KAAI,SAAAwC,GAAC,OAAI+jH,EAAKz+F,YAAYqjG,sBAAsB3oH,OAE9EzG,KAAKuuH,gBACb,CAAAtwH,IAAA,WAAAN,MAED,WACE,OAAOqC,KAAK46C,SAAS32C,KAAI,SAAAorB,GAAK,SAAArP,OAAOqP,EAAMtH,QAAW,KAAA/H,OAAAqP,EAAMnc,OAAM2U,KAAK,UACxEymG,EAxJyB,G,isDACFA,gBAAMtgC,OAAGtgB,cAAcmhB,UAAU,mBAElCy/B,gBAAqBU,sBAAiB,SAACjjG,EAAamD,EAAQjxB,GACjF,IACsB0vH,EADhBt+F,EAAQtD,EAAYsjG,mBAAmB,MAAO,GAAI,GAAI,CAACpxH,QAAK2vH,EAAAY,6BAClDt/F,GAAM,IAAtB,IAAwB0+F,EAAAlxH,MAAAixH,EAAAC,EAAAzvH,KAAAspE,MAAA,KAAb3hE,EAAC6nH,EAAAhwH,MACJ2xH,EAAQxpH,EAAEkyB,WAAU,GAC1Bz8B,OAAOiE,OAAO8vH,EAAO,CAACx0H,KAAMgL,EAAEhL,OAC9Bu0B,EAAMtpB,OAAOupH,IACd,MAAArpE,GAAA2nE,EAAAnnH,EAAAw/C,GAAA,QAAA2nE,EAAA9lD,IACD,OAAOz4C,GCHX,IAAakgG,cAAc,SAAAvB,GAAAjrD,UAAAwsD,EAAAvB,GAAA,IAAAvkD,EAAA+lD,gBAAAD,GAGzB,SAAAA,IAAA,OAAAruD,gBAAA,KAAAquD,GAAA9lD,EAAA/tE,KAAA,KACQ,iBA8FP,OA7FAgmE,aAAA6tD,EAAA,EAAAtxH,IAAA,QAAAN,MAED,SAAMqgH,EAAuCj8C,GAA4B,IAI5BmF,EAJ4BzhE,EAAA,KACjEuH,EAAQgxG,EAAIjyF,YAEd0jG,EAAMziH,EAAM0iH,cAAanoD,EAAAooD,6BACT5tD,EAAMphE,OAAO2vF,YAAU,IAA3C,IAA6C/oB,EAAA7qE,MAAAwqE,EAAAK,EAAAppE,KAAAspE,MAAA,KAAlCttC,EAAK+sC,EAAAvpE,MACRiyH,EAASz1F,EAAMv2B,QAAQ6rH,GAC7BF,EAAcvhC,OAAO9nC,MAAM,eAADlmC,OAAgByvG,EAAG,UAAAzvG,OAAS4vG,EAAU,MAChEH,EAAMG,GACP,MAAA3pE,GAAAshB,EAAA9gE,EAAAw/C,GAAA,QAAAshB,EAAAO,IAsBD,OArBA/F,EAAMphE,OAAOkD,UAAY4rH,EACzBF,EAAcvhC,OAAOlhB,MAAM,WAAW9sD,OAAA+hD,EAAMphE,OAAO2vF,WAAWh1F,OAAM,+BAAA0kB,OAA8B+hD,EAC7E,qBAAA/hD,OAAAhT,EAAM0iH,cAAa,UAAA1vG,OAASyvG,EAAG,MAEpD3B,sBAAsBd,kBAAkBjrD,GAAO,SAAC35C,GAC9C,GAAIA,aAAgBmhG,eAClB9jH,EAAKoqH,eAAeznG,EAA4BA,EAAKgE,YAChD,GAAIhE,aAAgBu6F,aACzB,GAAuB,MAAnBv6F,EAAK48F,WACPv/G,EAAKqqH,sBAAsB1nG,OACtB,CAAC,IAC2BukG,EAAbC,EAAA+C,6BAAAvnG,EAAK+D,UAAQ,IAAjC,IAAmCygG,EAAAlwH,MAAAiwH,EAAAC,EAAAzuH,KAAAspE,MAAA,KAAxBr7C,EAAKugG,EAAAhvH,MACd8H,EAAKoqH,eAAeznG,EAA4BgE,IACjD,MAAA65B,GAAA2mE,EAAAnmH,EAAAw/C,GAAA,QAAA2mE,EAAA9kD,KAKL,OAAO,KAGF/F,IACR,CAAA9jE,IAAA,iBAAAN,MAED,SAAei5B,EAA4BxK,GACzC,IAC2CuhG,EADvC8B,EAAM74F,EAAOj2B,OAAOkD,UAAS+pH,EAAA+B,6BACbvjG,EAAMzrB,OAAO2vF,YAAU,IAA3C,IAA6Cs9B,EAAAlxH,MAAAixH,EAAAC,EAAAzvH,KAAAspE,MAAA,KAAlCttC,EAAKwzF,EAAAhwH,MACRiyH,EAASz1F,EAAMv2B,QAAQ6rH,GAC7BF,EAAcvhC,OAAO9nC,MAAM,GAADlmC,OAAIma,EAA+B,2BAAAna,OAAAyvG,EAAY,UAAAzvG,OAAA4vG,EAAU,MACnFH,EAAMG,GACP,MAAA3pE,GAAA2nE,EAAAnnH,EAAAw/C,GAAA,QAAA2nE,EAAA9lD,IACDynD,EAAcvhC,OAAOlhB,MAAM,WAAW9sD,OAAAoM,EAAMzrB,OAAO2vF,WAAWh1F,OAAM,sBAAA0kB,OAAqB4W,EAAM,QAAA5W,OAAOoM,EAAK,qBAAApM,OACtF4W,EAAOj2B,OAAOkD,UAAS,UAAAmc,OAASyvG,EAAG,MACxDrjG,EAAMzrB,OAAOkD,UAAY4rH,IAC1B,CAAAxxH,IAAA,wBAAAN,MAED,SAAsBi5B,G,MACpBm5F,EAAkBn5F,EAAOouF,WAAWx0G,QAA7B05E,EAAO6lC,EAAP7lC,QACDlrD,EAA8C,QAApCglC,EAAAptC,EAAOouF,WAAWlmH,OAAOkgC,eAAW,IAAAglC,IAAA,EAEpD07C,OAAkC,IAA3B9oF,EAAOzK,SAAS7wB,OAAiB,GAAA0kB,OAAA4W,EAA4D,wDACpG,IAWuCo5F,EAXjCttD,EAAW9rC,EAAOzK,SAAS,GAG3B8jG,EAAar5F,EAAOj2B,OAAOkD,UAG3BqsH,EAAiB,IAAIhH,eAAeh/B,GACpCimC,EAAWD,EAAetsH,QAAQqsH,GAGlCG,EAAa,GACGC,EAAAV,6BAAAQ,EAASv1E,UAAQ,IAAvC,IAAyCy1E,EAAA3zH,MAAAszH,EAAAK,EAAAlyH,KAAAspE,MAAA,KAA9B6oD,EAAON,EAAAryH,MACVi9C,EAAW01E,EAAQlqG,iBAAqC,cAExDmqG,EAAS,IAAIjC,gBAAgBlrH,MAAMmZ,KAAKq+B,GAAWu1E,EAASpkG,YAAakkG,GAC/EG,EAAWx0H,KAAK20H,IACjB,MAAAtqE,GAAAoqE,EAAA5pH,EAAAw/C,GAAA,QAAAoqE,EAAAvoD,IACD,IAAM46C,EAAa0N,EAAWnsH,KAAI,SAACwrH,EAAKr0H,GACtC,IAAMo1H,EAAc9tD,EAASzgE,QAE7B,OADAuuH,EAAY1xH,OAAOE,OAASggC,EAAU5jC,EAC/Bo1H,KAIT55F,EAAO65F,YAAY/N,GAGnB,IAAK,IAAItnH,EAAI,EAAGA,EAAIw7B,EAAOzK,SAAS7wB,OAAQF,IAAK,CAC/C,IAE2Cs1H,EAFrCtkG,EAAQwK,EAAOzK,SAAS/wB,GAC1Bq0H,EAAMW,EAAWh1H,GAAEu1H,EAAAhB,6BACHvjG,EAAMzrB,OAAO2vF,YAAU,IAA3C,IAA6CqgC,EAAAj0H,MAAAg0H,EAAAC,EAAAxyH,KAAAspE,MAAA,KAAlCttC,EAAKu2F,EAAA/yH,MACRiyH,EAASz1F,EAAMv2B,QAAQ6rH,GAC7BF,EAAcvhC,OAAO9nC,MAAM,GAADlmC,OAAIma,EAA+B,2BAAAna,OAAAyvG,EAAY,UAAAzvG,OAAA4vG,EAAU,MACnFH,EAAMG,GACP,MAAA3pE,GAAA0qE,EAAAlqH,EAAAw/C,GAAA,QAAA0qE,EAAA7oD,IACDynD,EAAcvhC,OAAOlhB,MAAM,2BAAA9sD,OAA2BoM,EAAMzrB,OAAO2vF,WAAWh1F,OAA2B,sBAAA0kB,OAAA4W,EAAa,QAAA5W,OAAAoM,EACjG,qBAAApM,OAAAowG,EAAWh1H,GAAE,UAAA4kB,OAASyvG,EAAG,MAC9CrjG,EAAMzrB,OAAOkD,UAAY4rH,OAI5BF,EAlGwB,CAAQxC,a,qiBACTwC,cAAAvhC,OAAStgB,cAAcmhB,UAAU,iBCR3D,IAAa+hC,cAAc,SAAA5C,GAAAjrD,UAAA6tD,EAAA5C,GAAA,IAAAvkD,EAAAonD,gBAAAD,GAGzB,SAAAA,IAAA,OAAA1vD,gBAAA,KAAA0vD,GAAAnnD,EAAA/tE,KAAA,KACQ,iBAsCP,OArCAgmE,aAAAkvD,EAAA,EAAA3yH,IAAA,QAAAN,MAED,SAAMqgH,EAAuCj8C,GAkC3C,OAjCA+rD,sBAAsBT,mBAAmBtrD,GAAO,SAAA35C,GAG9C,IAAMnpB,EAAWmpB,EAAK7mB,gBAAgBy8G,GACtC0B,OAAOzgH,GAAY,EAAG,2CACL,WAAA+gB,OAAA/gB,EAAe,QAAA+gB,OAAAoI,EAAI,OAAApI,OAAMwqD,aAAapiD,KACvD,IAAMq2B,EAAgBr2B,EAAK0oG,qBAAqB9S,GAChD51F,EAAKm1F,iBAAmBt+G,EACxBmpB,EAAKnT,sBAAwBwpC,EAE7B,IAAMsyE,EAAgB3oG,EAAKtpB,OAAOG,SAOlC,OANqB,MAAjB8xH,GAAyBA,GAAiBtyE,GAAmC,IAAlBA,IAE7DmyE,EAAc5iC,OAAOlhB,MAAM,aAAD9sD,OAAcoI,EAAa,UAAApI,OAAAy+B,EAAoB,QAAAz+B,OAAA+wG,IACzE3oG,EAAK08F,QAAQ9G,EAAK+S,EAAgBtyE,KAG7B,KAgBFsjB,MACR6uD,EA1CwB,CAAQ7D,a,qiBACT6D,cAAA5iC,OAAStgB,cAAcmhB,UAAU,iBCA3D,IAAamiC,eAAe,SAAAhD,GAAAjrD,UAAAiuD,EAAAhD,GAAA,IAAAvkD,EAAAwnD,gBAAAD,GAG1B,SAAAA,IAAA,OAAA9vD,gBAAA,KAAA8vD,GAAAvnD,EAAA/tE,KAAA,KACQ,kBAgCP,OA/BAgmE,aAAAsvD,EAAA,EAAA/yH,IAAA,QAAAN,MAED,SAAMqgH,EAAuCj8C,GAC3C,OAAO+rD,sBAAsBP,cAAcxrD,GAAO,SAAA35C,GAChD,KAAMA,aAAgBshG,kBAAmB,OAAOthG,EAEhD,IAMIqlG,EANE1uH,EAAQqpB,EAAK5X,QAAQzR,MAGrBD,EAASspB,EAAKtpB,OAAOmD,QAC3BnD,EAAOkgC,QAAU,KAGjB,IAAMxuB,EAAQ,CACZ0C,GAAIkV,EAAKlV,GACTvS,OAAQynB,EAAKznB,OAAOsB,QACpBnD,OAAQA,EACR4jH,WAAY,CAACt6F,EAAKgE,MAAMnqB,UAY1B,MAVc,cAAVlD,EACF0uH,EAAUhI,KAAKj1G,GACI,eAAVzR,IACT0uH,EAAUhF,OAAOj4G,IAEnBi9G,EAAQrI,cAAch9F,GACtBqlG,EAAQU,OAAO/lG,EAAKy1F,OAAQz1F,EAAK01F,aAEjCkT,EAAehjC,OAAO9nC,MAAM,eAADlmC,OAAgBoI,EAAI,QAAApI,OAAOytG,IAE/CA,SAEVuD,EApCyB,CAAQjE,a,4pCACViE,eAAAhjC,OAAStgB,cAAcmhB,UAAU,kBCF3D,IAAaqiC,SAAQ,WAMnB,SAAAA,EAAY7O,GAA0E,IAA9B8O,EAAA9oH,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAA4B,GAAE64D,gBAAA,KAAAgwD,GACpFlxH,KAAKqiH,YAAcA,EACnBriH,KAAKmxH,WAAaA,EA4BnB,OA3BAzvD,aAAAwvD,EAAA,EAAAjzH,IAAA,kBAAAN,MAED,WACE,MAAO,CACL,IAAIowH,WACJ,IAAIiD,eACJ,IAAIzB,cACJ,IAAIqB,iBAEP,CAAA3yH,IAAA,WAAAN,MAED,WACE,OAAOqC,KAAKoxH,kBAAkBpxG,OAAOhgB,KAAKmxH,cAC3C,CAAAlzH,IAAA,UAAAN,MAED,SAAQokE,GACNmvD,EAASljC,OAAOzqC,KAAK,4CAA8CinB,aAAazI,IAEhF,IAEkCmF,EAF5BmqD,EAAiB,IAAIjD,eAAepuH,KAAKqiH,aAC3C5gH,EAAYsgE,EACGwF,EAAA+pD,6BAAAtxH,KAAKuxH,YAAU,IAAlC,IAAoChqD,EAAA7qE,MAAAwqE,EAAAK,EAAAppE,KAAAspE,MAAA,KAAzBmF,EAAI1F,EAAAvpE,MACb8D,EAAYmrE,EAAK3wE,MAAMo1H,EAAgB5vH,GACvCyvH,EAASljC,OAAO9nC,MAAuB,iBAAAlmC,OAAA4sD,EAAKC,SAAc,OAAA7sD,OAAAwqD,aAAa/oE,MACxE,MAAAwkD,GAAAshB,EAAA9gE,EAAAw/C,GAAA,QAAAshB,EAAAO,IAGD,OADAopD,EAASljC,OAAOzqC,KAAK,0CAA4CinB,aAAa/oE,IACvEA,MACRyvH,EApCkB,GCVN,SAASM,eAAepzH,EAAQC,GAC7C,OAAQ9C,OAAOC,UAAUC,eAAeC,KAAK0C,EAAQC,GAEnD,GADAD,EAASolE,gBAAeplE,GACT,OAAXA,EAAiB,MAEvB,OAAOA,ECLM,SAASqzH,OActB,OAZEA,KADqB,qBAAZ/kC,SAA2BA,QAAQnvF,IACrCmvF,QAAQnvF,IAAIW,OAEZ,SAAcyC,EAAQtC,EAAUqzH,GACrC,IAAItsC,EAAOosC,eAAc7wH,EAAQtC,GACjC,GAAK+mF,EAAL,CACA,IAAIusC,EAAOp2H,OAAOq2H,yBAAyBxsC,EAAM/mF,GACjD,OAAIszH,EAAKp0H,IACAo0H,EAAKp0H,IAAI7B,KAAK2M,UAAU/M,OAAS,EAAIqF,EAAS+wH,GAEhDC,EAAKh0H,QAGT8zH,KAAKx1H,MAAM+D,KAAMqI,WFHA6oH,SAAAljC,OAAiBtgB,cAAcmhB,UAAU,YGTnE,IAAagjC,iBAAgB,WAG3B,SAAAA,EAAYxP,GAA0CnhD,gBAAA,KAAA2wD,GACpD7xH,KAAKqiH,YAAcA,EAKpB,OAJA3gD,aAAAmwD,EAAA,EAAA5zH,IAAA,cAAAV,IAED,WACE,OAAOyC,KAAKqiH,YAAYt2F,gBACzB8lG,EAT0B,G,4pCCM7B,IAAsBC,YAAW,WAM/B,SAAAA,EAAsBzP,GACsE,IAAtE8O,EAAA9oH,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAAoE,GAAE64D,gBAAA,KAAA4wD,GAC1F9xH,KAAKqiH,YAAcA,EACnBriH,KAAKmxH,WAAaA,EAwDnB,OAvDAzvD,aAAAowD,EAAA,EAAA7zH,IAAA,kBAAAN,MAED,WACE,MAAO,KACR,CAAAM,IAAA,aAAAN,MAED,WACE,IAEwBupE,EAFlByhD,EAAQ3oH,KAAK+xH,kBAAkB/xG,OAAOhgB,KAAKmxH,YAC3CltH,EAAM,IAAI2S,IAAK2wD,EAAAyqD,6BACFrJ,GAAK,IAAxB,IAA0BphD,EAAA7qE,MAAAwqE,EAAAK,EAAAppE,KAAAspE,MAAA,KAAfmF,EAAI1F,EAAAvpE,MACb,GAAIsG,EAAIqrB,IAAIs9C,EAAKqlD,YACf,MAAM,IAAI79D,MAAM,8BAADp0C,OAA+B4sD,EAAKqlD,aAErDhuH,EAAIhD,IAAI2rE,EAAKqlD,WAAYrlD,IAC1B,MAAA3mB,GAAAshB,EAAA9gE,EAAAw/C,GAAA,QAAAshB,EAAAO,IACD,OAAO7jE,IACR,CAAAhG,IAAA,OAAAN,MAED,SAAKokE,GACH+vD,EAAY9jC,OAAOzqC,KAAK,6CAA+CinB,aAAazI,IACpF,IAAMmwD,EAAUlyH,KAAKmyH,aAEfnU,EAAM,IAAI6T,iBAAiB7xH,KAAKqiH,aAEhC+P,EAAoBpyH,KAAKqyH,YAAYtwD,GAAO,SAAC35C,GACjD,IAAMwkD,EAAOslD,EAAQ30H,IAAI6qB,EAAK8/C,UAC9B,QAAa/oE,IAATytE,EACF,MAAM,IAAIxY,MAAM,oDAADp0C,OAAqDoI,EAAK8/C,SAAmC,6BAE9G,IAAMulD,EAAU7gD,EAAK3wE,MAAM+hH,EAAK51F,GAEhC,OADA0pG,EAAY9jC,OAAOlhB,MAAM,eAAD9sD,OAAgBoI,EAAK8/C,SAAQ,QAAAloD,OAAOytG,EAAQ7uH,YAAY1B,OACzEuwH,KAIT,OAFAqE,EAAY9jC,OAAOzqC,KAAK,4CAA8CinB,aAAa4nD,IAE5EA,IACR,CAAAn0H,IAAA,WAAAN,MAED,SAAS20H,GACP,IAAMtU,EAAM,IAAI6T,iBAAiB7xH,KAAKqiH,aACtC,OAAOiQ,EAASh4F,SAAS0jF,KAC1B,CAAA//G,IAAA,cAAAN,MAED,SAAY07D,EAA0BnjC,GACpC,OAAOl2B,KAAKuyH,kBAAkBl5D,EAAMnjC,KACrC,CAAAj4B,IAAA,oBAAAN,MAED,SAAkByqB,EAA0B8N,GAC1C,IAAMk8F,EAAoBl8F,EAAK9N,GAC/BgqG,EAAkBjmG,SAAW,GAAE,IACSwgG,EAApBC,EAAAoF,6BAAA5pG,EAAK2iD,iBAAe,IAAxC,IAA0C6hD,EAAAlwH,MAAAiwH,EAAAC,EAAAzuH,KAAAspE,MAAA,KAA/Br7C,EAAKugG,EAAAhvH,MACR+vH,EAAW1tH,KAAKuyH,kBAAkBnmG,EAAO8J,GAC/Ck8F,EAAkBjmG,SAASvwB,KAAK8xH,IACjC,MAAAznE,GAAA2mE,EAAAnmH,EAAAw/C,GAAA,QAAA2mE,EAAA9kD,IACD,OAAOsqD,MACRN,EAjE8B,GACPA,YAAA9jC,OAAiBtgB,cAAcmhB,UAAU,eCNnE,IAAsB2jC,cAIpB9wD,cAAA,SAAA8wD,EAAsB3lD,EAAkBolD,GAAkB/wD,gBAAA,KAAAsxD,GACxDxyH,KAAK6sE,SAAWA,EAChB7sE,KAAKiyH,WAAaA,K,kiBCEtB,IAAaQ,YACX,SAAAC,GAAA3vD,UAAA0vD,EAAAC,GAAA,IAAAjpD,EAAAkpD,eAAAF,GAIA,SAAYA,EAAAR,EACAW,GAAsF,IAAAntH,EAE5C,OAF4Cy7D,gBAAA,KAAAuxD,GAChGhtH,EAAMgkE,EAAA/tE,KAAA,mBAAeu2H,GACrBxsH,EAAKmtH,uBAAyBA,EAAsBntH,EAKrD,OAJAi8D,aAAA+wD,EAAA,EAAAx0H,IAAA,QAAAN,MAED,SAAMqgH,EAAyCj8C,GAC7C,OAAO,IAAI/hE,KAAK4yH,uBAAuB7wD,OACxC0wD,EAZD,CAAQD,eCRYK,kBAAiB,WAKrC,SAAAA,EAAYlhE,GAAuBuP,gBAAA,KAAA2xD,GACjC7yH,KAAK8yH,SAAWnhE,EAuDjB,OAtDA+P,aAAAmxD,EAAA,EAAA50H,IAAA,UAAAV,IAED,WACE,OAAOyC,KAAK8yH,WACb,CAAA70H,IAAA,WAAAV,IAED,WACE,OAAOyC,KAAK8yH,SAASvV,mBACtB,CAAAt/G,IAAA,gBAAAV,IAED,WACE,OAAOyC,KAAK8yH,SAAS79G,wBACtB,CAAAhX,IAAA,UAAAV,IAED,WACE,OAAOyC,KAAK8yH,SAASh0H,OAAOkgC,UAC7B,CAAA/gC,IAAA,OAAAV,IAED,WACE,OAAOyC,KAAK8yH,SAASh0H,OAAOI,OAC7B,CAAAjB,IAAA,UAAAV,IAED,WACE,OAAOyC,KAAK8yH,SAASh0H,OAAOo9D,UAC7B,CAAAj+D,IAAA,WAAAV,IAED,WACE,OAAOyC,KAAK8yH,SAASnyH,OAAOkD,UAAUkvH,eACvC,CAAA90H,IAAA,QAAAN,MAED,WACE,OAAOqC,KAAK8yH,SAAStiH,UACtB,CAAAvS,IAAA,OAAAN,MAED,SAA4DM,GAC1D,OAAO+B,KAAK8yH,SAAS/U,KAAK9/G,KAC3B,CAAAA,IAAA,WAAAN,MAED,SAASqgH,GACP,OAAOh+G,KAAKgzH,WAAWhV,KACxB,CAAA//G,IAAA,WAAAN,MAID,WACE,MAAM,qBAANqiB,OAA4BhgB,KAAK8yH,SAAS5tD,cAC3C,CAAAjnE,IAAA,kBAAAN,MAED,WACE,MAAM,qBAANqiB,OAA4BhgB,KAAK8yH,SAAShoD,qBAC3C,CAAA7sE,IAAA,gBAAAN,MAED,WACE,OAAOqC,KAAKmsB,aACb0mG,EA7DoC,G,kiBCEvC,IAAsBI,sBACpB,SAAAC,GAAAnwD,UAAAkwD,EAAAC,GAAA,IAAAzpD,EAAA0pD,eAAAF,GAIA,SAAAA,EAAYthE,GAAuB,IAAAlsD,EAE6B,OAF7By7D,gBAAA,KAAA+xD,GACjCxtH,EAAAgkE,EAAA/tE,KAAA,KAAMi2D,GACNlsD,EAAKuoF,OAAStgB,cAAcmhB,UAAU,yBAAwBppF,EAmD/D,OAlDAi8D,aAAAuxD,EAAA,EAAAh1H,IAAA,gBAAAN,MAES,WAA2D,IAA7CwiC,EAA2C93B,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,MACjE,OAAOrI,KAAKozH,UAAUjzF,EAAM,CAAClhC,UAAU,EAAMC,MAAM,EAAOg9D,SAAS,MACpE,CAAAj+D,IAAA,YAAAN,MAES,WAAuD,IAA7CwiC,EAA2C93B,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,MAC7D,OAAOrI,KAAKozH,UAAUjzF,EAAM,CAAClhC,UAAU,EAAOC,MAAM,EAAMg9D,SAAS,MACpE,CAAAj+D,IAAA,YAAAN,MASS,WACqH,IAD3GwiC,EAA2C93B,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,MAC3Co6C,EAAgEp6C,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,IAACpJ,UAAU,EAAMC,MAAM,EAAMg9D,SAAS,GAEjHj9D,EAA2BwjD,EAA3BxjD,SAAUC,EAAiBujD,EAAjBvjD,KAAMg9D,EAAWzZ,EAAXyZ,QAEjBm3D,EAAwB,GA2B9B,OAzBIp0H,IACFo0H,EAAMp0H,SAAWe,KAAKf,UAUpBC,GAAqB,MAAbc,KAAKd,OACfm0H,EAAMn0H,MAAO,EACbm0H,EAAM3zH,OAASM,KAAKd,KAAKQ,OACzB2zH,EAAM3xH,YAAc1B,KAAKd,KAAKS,MACxBK,KAAK2xD,mBAAmBquD,eAC5BhgH,KAAKguF,OAAOxrF,KAAK,gDAADwd,OAAiDhgB,KAAK2xD,QAAkC,8BAIxGuK,GAAWl8D,KAAKk8D,UAClBm3D,EAAMC,cAAe,EACrBtzH,KAAKguF,OAAOxrF,KAAwD,qDAG/DjH,OAAOiE,OAAO6zH,EAAOlzF,OAC7B8yF,EAzDD,CAAQJ,mB,kiBCHV,IAAaU,SAAS,SAAAC,GAAAzwD,UAAAwwD,EAAAC,GAAA,IAAA/pD,EAAAgqD,eAAAF,GAAA,SAAAA,IAAA,OAAAryD,gBAAA,KAAAqyD,GAAA9pD,EAAAxtE,MAAA,KAAAoM,WAiBnB,OAjBmBq5D,aAAA6xD,EAAA,EAAAt1H,IAAA,aAAAN,MACpB,SAAWqgH,GACT,IAAM4G,EAAU5kH,KAAK2xD,QAAQizD,QACvBz4F,EAAWnsB,KAAKmsB,SAEhByI,EAAK8+F,OAAA7+F,KAAK5S,WAWhB,OAVAkK,EAASlsB,SAAQ,SAACmsB,EAAOhxB,GACvB,IAAM05B,EAAQ1I,EAAMkO,SAAS0jF,GACf,OAAVlpF,GAGJF,EAAGF,IAAII,EAAO8vF,EAAQxpH,OAGxBG,OAAOiE,OAAOo1B,EAAGuL,KAAMngC,KAAKozH,aAErBx+F,MACR2+F,EAjBmB,CAAQN,uB,kiBCA9B,IAAaU,WAAW,SAAAH,GAAAzwD,UAAA4wD,EAAAH,GAAA,IAAA/pD,EAAAmqD,eAAAD,GAAA,SAAAA,IAAA,OAAAzyD,gBAAA,KAAAyyD,GAAAlqD,EAAAxtE,MAAA,KAAAoM,WAerB,OAfqBq5D,aAAAiyD,EAAA,EAAA11H,IAAA,aAAAN,MACtB,SAAWqgH,GACT,IAAM4G,EAAU5kH,KAAK2xD,QAAQizD,QACvBz4F,EAAWnsB,KAAKmsB,SAEhByI,EAAK8+F,OAAA7+F,KAAK5S,SAASjiB,KAAKozH,aAS9B,OARAjnG,EAASlsB,SAAQ,SAACmsB,EAAOhxB,GACvB,IAAM05B,EAAQ1I,EAAMkO,SAAS0jF,GACf,OAAVlpF,GAGJF,EAAGF,IAAII,EAAO,IAAM8vF,EAAQxpH,OAGvBw5B,MACR++F,EAfqB,CAAQV,uB,kiBCEhC,IAAaY,WAAW,SAAAL,GAAAzwD,UAAA8wD,EAAAL,GAAA,IAAA/pD,EAAAqqD,eAAAD,GAAA,SAAAA,IAAA,OAAA3yD,gBAAA,KAAA2yD,GAAApqD,EAAAxtE,MAAA,KAAAoM,WAgDrB,OAhDqBq5D,aAAAmyD,EAAA,EAAA51H,IAAA,aAAAN,MACtB,SAAWqgH,GAAgD,IAAAv4G,EAAA,KAEnDm1C,EAAW56C,KAAK46C,SAEhB5b,EAAUh/B,KAAKg/B,QAEfpK,EAAK8+F,OAAA7+F,KAAK5S,WAIhB,OAHA24B,EAAS36C,SAAQ,SAAComB,EAAIjrB,GACpBw5B,EAAGF,IAAIjvB,EAAKsuH,SAAS1tG,EAAI23F,GAAY,IAAN5iH,EAAU,EAAK,IAAM4jC,MAE/CpK,IACR,CAAA32B,IAAA,WAAAN,MAED,SAAS0oB,EAAgB23F,GAEvB,IAEIv9G,EAWAw+B,EAb2B+0F,EAAAh0H,KAAKwQ,QAA7BxK,EAAIguH,EAAJhuH,KAAMuW,EAAIy3G,EAAJz3G,KAAM8jB,EAAE2zF,EAAF3zF,GAAItB,EAAIi1F,EAAJj1F,KAGvB,GAAY,MAARxiB,GAAsB,MAAN8jB,EAClB5/B,EAAO,cACF,GAAY,MAAR8b,EACT9b,EAAO,WACF,IAAU,MAAN4/B,EAGT,MAAM,IAAI+zB,MAAM,wEAFhB3zD,EAAO,KAOT,IAAM0/B,EAAOngC,KAAKozH,UAAU,CAACr0F,SAC7B,OAAQt+B,GACN,IAAK,SACHw+B,EAAKy0F,OAAA7+F,KAAK+N,OAAOvc,EAAMujD,kBAAA,GAAA5jE,EAAOuW,GAAWhhB,OAAAiE,OAAAjE,OAAAiE,OAAA,GAAA2gC,GAAOypC,kBAAA,GAAA5jE,EAAOq6B,KACvD,MACF,IAAK,OACHpB,EAAKy0F,OAAA7+F,KAAKtY,KAAK8J,EAAE9qB,OAAAiE,OAAAjE,OAAAiE,OAAA,GAAM2gC,GAAIypC,kBAAA,GAAG5jE,EAAOuW,KACrC,MACF,IAAK,KACH0iB,EAAKy0F,OAAA7+F,KAAKwL,GAAGha,EAAE9qB,OAAAiE,OAAAjE,OAAAiE,OAAA,GAAM2gC,GAAIypC,kBAAA,GAAG5jE,EAAOq6B,KACnC,MACF,QAEE,MAAM,IAAI+zB,MAAuB,iBAAAp0C,OAAAvf,IAGrC,OAAOw+B,MACR40F,EAhDqB,CAAQZ,uB,kiBCChC,IAAagB,UAAU,SAAAT,GAAAzwD,UAAAkxD,EAAAT,GAAA,IAAA/pD,EAAAyqD,eAAAD,GAAA,SAAAA,IAAA,OAAA/yD,gBAAA,KAAA+yD,GAAAxqD,EAAAxtE,MAAA,KAAAoM,WAoBpB,OApBoBq5D,aAAAuyD,EAAA,EAAAh2H,IAAA,aAAAN,MACrB,SAAWqgH,GAAgD,IAAAv4G,EAAA,KAEnDm1C,EAAW56C,KAAK46C,SAEhB5b,EAAUh/B,KAAKg/B,QAEfpK,EAAK8+F,OAAA7+F,KAAK5S,WAIhB,OAHA24B,EAAS36C,SAAQ,SAAComB,EAAIjrB,GACpBw5B,EAAGF,IAAIjvB,EAAKsuH,SAAS/V,GAAY,IAAN5iH,EAAU,EAAK,IAAM4jC,MAE3CpK,IACR,CAAA32B,IAAA,WAAAN,MAED,SAASqgH,GACP,IAAMhxG,EAAQgxG,EAAIjyF,YACZooG,EAAUnnH,EAAMonH,aAEhBj0F,EAAOngC,KAAKozH,YAClB,OAAOM,OAAA7+F,KAAK+N,OAAOuxF,EAAS,CAAC/zF,QAAS,GAAE7kC,OAAAiE,OAAA,CAAG4gC,QAAS,GAAMD,QAC3D8zF,EApBoB,CAAQhB,uB,kiBCD/B,IAAaoB,SAAS,SAAAb,GAAAzwD,UAAAsxD,EAAAb,GAAA,IAAA/pD,EAAA6qD,eAAAD,GAAA,SAAAA,IAAA,OAAAnzD,gBAAA,KAAAmzD,GAAA5qD,EAAAxtE,MAAA,KAAAoM,WAkCnB,OAlCmBq5D,aAAA2yD,EAAA,EAAAp2H,IAAA,aAAAN,MACpB,SAAWqgH,GAAgD,IAAAv4G,EAAA,KAEnDm1C,EAAW56C,KAAK46C,SAEhB5b,EAAUh/B,KAAKg/B,QAEfpK,EAAK8+F,OAAA7+F,KAAK5S,WAIhB,OAHA24B,EAAS36C,SAAQ,SAAComB,EAAIjrB,GACpBw5B,EAAGF,IAAIjvB,EAAKsuH,SAAS1tG,EAAI23F,GAAY,IAAN5iH,EAAU,EAAK,IAAM4jC,MAE/CpK,IACR,CAAA32B,IAAA,WAAAN,MAED,SAAS0oB,EAAgB23F,GAEvB,IAEI/+E,EAFiB+0F,EAAAh0H,KAAKwQ,QAAnB/P,EAAIuzH,EAAJvzH,KAAMs+B,EAAIi1F,EAAJj1F,KAIPoB,EAAOngC,KAAKozH,UAAU,CAACr0F,SAC7B,OAAQt+B,GACN,IAAK,KACHw+B,EAAKy0F,OAAA7+F,KAAK+N,OAAOvc,EAAI,CAAC+Z,QAAS,GAAE7kC,OAAAiE,OAAAjE,OAAAiE,OAAA,GAAM2gC,GAAI,CAAEC,QAAS,KACtD,MACF,IAAK,MACHnB,EAAKy0F,OAAA7+F,KAAK+N,OAAOvc,EAAI,CAAC+Z,QAAS,GAAE7kC,OAAAiE,OAAAjE,OAAAiE,OAAA,GAAM2gC,GAAI,CAAEC,QAAS,KACtD,MACF,QAEE,MAAM,IAAIg0B,MAAuB,iBAAAp0C,OAAAvf,IAGrC,OAAOw+B,MACRo1F,EAlCmB,CAAQpB,uBCPd,SAAA7sF,YAAYj9B,EAAoB4I,GAC9C,IAAMs0B,EAAYl9B,EAAIwvB,iBAChB2N,EAAMv0B,EAAQgnB,SACdwN,EAAUF,EAAUpN,gBAAgBqN,GAC1C,MAAO,CAAC/+B,EAAGg/B,EAAQh/B,EAAGC,EAAG++B,EAAQ/+B,GAGnB,SAAAg/B,UAAUr9B,EAAoB4I,GAC5C,IAAAwiH,EAA2BnuF,YAAYj9B,EAAK4I,GAAlCyiH,EAAID,EAAPhtH,EAAYktH,EAAIF,EAAP/sH,EAC0BktH,EAAA3iH,EAAQonB,UAAxCw7F,EAAID,EAAPntH,EAAYqtH,EAAIF,EAAPltH,EAASJ,EAAKstH,EAALttH,MAAOE,EAAMotH,EAANptH,OAE1BC,EAAIitH,EAAOG,EACXntH,EAAIitH,EAAOG,EAwBjB,MAAO,CAAErtH,IAAGC,IAAGJ,QAAOE,UAGlB,SAAUutH,aAAa1rH,EAAoBkd,EAAwBnT,GAAoC,IAAxBywB,EAAAt7B,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAAsB,GACzG,GAAIc,EAAI2L,cAAkB,IAAAkL,OAAA9M,IAAO,CAC/B,IAAMpN,EAAIqD,EAAI2L,cAAc,IAADkL,OAAK9M,IAMhC,OALAywB,EAAU1jC,SAAQ,SAAAkpD,GACXrjD,EAAE69B,UAAUmlB,SAASK,IACxBrjD,EAAE69B,UAAUjP,IAAIy0B,MAGbrjD,EAET,OAAOgvH,QAAQzuG,EAAInT,EAAIywB,GAGnB,SAAUmxF,QAAQzuG,EAAwBnT,GAAoC,IAAxBywB,EAAAt7B,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAAsB,GAE1EvC,EAAIyL,SAASwjH,gBAAgB,6BAA8B,KAKjE,OAJAjvH,EAAEooB,aAAa,KAAMhb,GACrBpN,EAAEooB,aAAa,QAASyV,EAAU9b,KAAK,MACvCxB,EAAGpD,WAAW+xG,aAAalvH,EAAGugB,GAC9BvgB,EAAEutB,YAAYhN,GACPvgB,EAGH,SAAUmvH,eAAe5uG,GAC7B,IAAwB6uG,EAAA7uG,EAAG8S,UAApB7xB,EAAM4tH,EAAN5tH,OAAQF,EAAK8tH,EAAL9tH,MACTi6B,EAAc8zF,eAAe9uG,GACnC,MAAO,CACL/e,SACAF,QACAi6B,cACA+zF,YAAa9tH,EAAuB,EAAd+5B,EACtBg0F,WAAYjuH,EAAsB,EAAdi6B,EACpBl6B,MAAOk6B,EACPh6B,KAAMg6B,EACNtxB,MAAO3I,EAAQi6B,EACf11B,OAAQrE,EAAS+5B,GAIrB,SAAS8zF,eAAe9uG,G,MAClBgb,EAAcpiB,SAA4C,QAAnC+kD,EAAA39C,EAAG4H,aAAa,uBAAmB,IAAA+1C,IAAA,KAU9D,OARI39C,EAAG8F,SAAS7wB,QACd8H,MAAMmZ,KAAK8J,EAAG8F,UAAUlsB,SAAQ,SAACmsB,GAC/B,IAAMkpG,EAAmBH,eAAe/oG,GACpCkpG,EAAmBj0F,IACrBA,EAAci0F,MAIbj0F,EAIO,SAAAuL,WAAWN,EAAYC,EAAYC,EAAYC,EAAYR,EAAoBC,GAE7F,IAAKA,EAAY,MAAW,IAAAlsB,OAAAssB,EAAE,KAAAtsB,OAAIusB,GAGlCN,GAAc,IACdC,GAAc,IAGd,IAAMa,EAA0B,IAAfb,EAGba,IACFb,EAAa,KAIXA,EAAa,IACfA,GAAc,KAGhB,IAAMc,EAAWd,EAAa,IAAM,EAAI,EAGlCe,EAAMhB,EAAahlC,KAAKimC,GAAM,IAC9BC,GAAOlB,EAAaC,GAAcjlC,KAAKimC,GAAM,IAG7CE,EAAKd,EAAKE,EAAKvlC,KAAKomC,IAAIJ,GACxBK,EAAKf,EAAKE,EAAKxlC,KAAKsmC,IAAIN,GAExBO,EAAKlB,EAAKE,EAAKvlC,KAAKomC,IAAIF,GACxBM,EAAKlB,EAAKE,EAAKxlC,KAAKsmC,IAAIJ,GAe9B,OAAIJ,EACI,aAAN/sB,OACMotB,EAAM,KAAAptB,OAAAstB,EAAE,cAAAttB,OACRwsB,EAAE,KAAAxsB,OAAIysB,EAAY,WAAAzsB,OAAAwtB,EAAM,KAAAxtB,OAAAytB,EAAE,cAAAztB,OAC1BwsB,EAAE,KAAAxsB,OAAIysB,EAAY,WAAAzsB,OAAAotB,EAAE,KAAAptB,OAAIstB,EAAE,KAG5B,WAANttB,OACMotB,EAAM,KAAAptB,OAAAstB,EACN,YAAAttB,OAAAwsB,EAAE,KAAAxsB,OAAIysB,EAAE,OAAAzsB,OAAMgtB,EAAQ,OAAAhtB,OAAMwtB,EAAM,KAAAxtB,OAAAytB,EAClC,YAAAztB,OAAAssB,EAAE,KAAAtsB,OAAIusB,EAAE,K,kiBC9IhB,IAAagpF,SAAS,SAAA/B,GAAAzwD,UAAAwyD,EAAA/B,GAAA,IAAA/pD,EAAA+rD,eAAAD,GAAA,SAAAA,IAAA,OAAAr0D,gBAAA,KAAAq0D,GAAA9rD,EAAAxtE,MAAA,KAAAoM,WA0EnB,OA1EmBq5D,aAAA6zD,EAAA,EAAAt3H,IAAA,aAAAN,MACpB,SAAWqgH,GAAgD,IAAAv4G,EAAA,KACnDmvB,EAAK8+F,OAAA7+F,KAAK5S,WACV+c,EAAkBh/B,KAAKg/B,QAO7B,OANAh/B,KAAK46C,SAAS36C,SAAQ,SAAComB,EAAIjrB,GACzB,IAAM6jC,EAAKx5B,EAAKsuH,SAAS1tG,GACnB8Y,EAAiB,IAAN/jC,EAAU,EAAK,IAAM4jC,EACtCpK,EAAGF,IAAIuK,EAAIE,MAGNvK,IACR,CAAA32B,IAAA,WAAAN,MAED,SAAS0oB,GACP,IAMI4Y,EANuB+0F,EAAAh0H,KAAKwQ,QAAzB/P,EAAIuzH,EAAJvzH,KAAM8b,EAAIy3G,EAAJz3G,KAAMwiB,EAAIi1F,EAAJj1F,KAEyC02F,EAAAR,eAAe5uG,GAApElf,EAAIsuH,EAAJtuH,KAAME,EAAGouH,EAAHpuH,IAAK0I,EAAK0lH,EAAL1lH,MAAOpE,EAAM8pH,EAAN9pH,OAAQ0pH,EAAUI,EAAVJ,WAAYD,EAAWK,EAAXL,YAC7CM,EAAyD11H,KAAK21H,sBAAsBp5G,GAAKq5G,EAAAvnD,eAAAqnD,EAAA,GAAAG,EAAAxnD,eAAAunD,EAAA,MAAjFE,EAAGD,EAAA,GAAEE,EAAGF,EAAA,GAAAG,EAAA3nD,eAAAunD,EAAA,MAAIK,EAAGD,EAAA,GAAEE,EAAGF,EAAA,GAAAG,EAAA9nD,eAAAunD,EAAA,MAAIQ,EAAGD,EAAA,GAAEE,EAAGF,EAAA,GAAAG,EAAAjoD,eAAAunD,EAAA,MAAIW,EAAGD,EAAA,GAAEE,EAAGF,EAAA,GAC9Cn2F,EAAOngC,KAAKozH,UAAU,CAACr0F,SAIvB03F,EAAiB,cAAAz2G,OACd81G,EAAMT,EAAaluH,EAAU,OAAA6Y,OAAA+1G,EAAMX,EAAc/tH,EAAG,QACpD,GAAA2Y,OAAAi2G,EAAMZ,EAAatlH,EAAK,OAAAiQ,OAAMk2G,EAAMd,EAAc/tH,EAAS,WAAA2Y,OAC3Du2G,EAAMlB,EAAatlH,EAAW,OAAAiQ,OAAAw2G,EAAMpB,EAAczpH,EAAM,QACxD,GAAAqU,OAAAo2G,EAAMf,EAAaluH,EAAU,OAAA6Y,OAAAq2G,EAAMjB,EAAczpH,EAAW,OAC/D+qH,EAA2B,WAAA12G,OAAA7Y,EAAU,OAAA6Y,OAAA3Y,EAAG,QAAA2Y,OAAOjQ,EAAK,OAAAiQ,OAAM3Y,EAAG,QAAA2Y,OAAOjQ,EAAW,OAAAiQ,OAAArU,EAAM,QAAAqU,OAAO7Y,EAAI,OAAA6Y,OAAMrU,EAAW,OAEvH,OAAQlL,GACN,IAAK,KACHw+B,EAAKy0F,OAAA7+F,KAAK+N,OAAOvc,EAAI,CAAE1W,SAAU8mH,GAAgBl7H,OAAAiE,OAAA,CAAImQ,SAAU+mH,GAAkBv2F,IACjF,MACF,IAAK,MACHlB,EAAKy0F,OAAA7+F,KAAK+N,OAAOvc,EAAI,CAAE1W,SAAU+mH,GAAen7H,OAAAiE,OAAA,CAAImQ,SAAU8mH,GAAmBt2F,IACjF,MACF,QAEE,MAAM,IAAIi0B,MAAuB,iBAAAp0C,OAAAvf,IAGrC,OAAOw+B,IACR,CAAAhhC,IAAA,wBAAAN,MAOD,SAAsB4e,GACpB,OAAQA,GACN,IAAK,MACH,MAAO,CACL,CAAC,EAAG,GAAI,CAAC,EAAG,GACZ,CAAC,GAAI,GAAI,CAAC,GAAI,IAElB,IAAK,SACH,MAAO,CACL,CAAC,EAAG,GAAI,CAAC,EAAG,GACZ,CAAC,EAAG,GAAI,CAAC,EAAG,IAEhB,IAAK,OACH,MAAO,CACL,CAAC,EAAG,GAAI,EAAE,EAAG,GACb,CAAC,EAAG,GAAI,EAAE,EAAG,IAEjB,IAAK,QACH,MAAO,CACL,CAAC,EAAG,GAAI,CAAC,EAAG,GACZ,CAAC,EAAG,GAAI,CAAC,EAAG,IAEhB,QACE,MAAM,IAAI63C,MAAM,wBAADp0C,OAAyBzD,EAAI,qDAAAyD,OAAoDhgB,YAErGu1H,EA1EmB,CAAQtC,uB,kiBCA9B,IAAa0D,SAAS,SAAAnD,GAAAzwD,UAAA4zD,EAAAnD,GAAA,IAAA/pD,EAAAmtD,eAAAD,GAAA,SAAAA,IAAA,OAAAz1D,gBAAA,KAAAy1D,GAAAltD,EAAAxtE,MAAA,KAAAoM,WA0CnB,OA1CmBq5D,aAAAi1D,EAAA,EAAA14H,IAAA,aAAAN,MACpB,SAAWqgH,GAAgD,IAAAv4G,EAAA,KAEnDm1C,EAAW56C,KAAK46C,SAEhB5b,EAAUh/B,KAAKg/B,QAEfpK,EAAK8+F,OAAA7+F,KAAK5S,WAIhB,OAHA24B,EAAS36C,SAAQ,SAAComB,EAAIjrB,GACpBw5B,EAAGF,IAAIjvB,EAAKsuH,SAAS1tG,EAAI23F,GAAY,IAAN5iH,EAAU,EAAK,IAAM4jC,MAE/CpK,IACR,CAAA32B,IAAA,WAAAN,MAED,SAAS0oB,EAAgB23F,GAEvB,IAMI/+E,EANqB+0F,EAAAh0H,KAAKwQ,QAAvB+L,EAAIy3G,EAAJz3G,KAAM8jB,EAAE2zF,EAAF3zF,GAAItB,EAAIi1F,EAAJj1F,KAGX/xB,EAAQgxG,EAAIjyF,YAKlB,GAJA/e,EAAM6pH,gBAAgBxwG,GAIV,MAAR9J,GAAsB,MAAN8jB,EAAY,CAC9B,IAAMZ,EAAQlkC,OAAAiE,OAAA,GAAO+c,GACfsjB,EAAS7/B,KAAK82H,UAAU92H,KAAK+2H,cAAax7H,OAAAiE,OAAAjE,OAAAiE,OAAC,GAAI6gC,GAAE,CAAEtB,WACzDE,EAAKy0F,OAAA7+F,KAAK+N,OAAOvc,EAAIoZ,EAAUI,QAE1B,GAAY,MAARtjB,EAAc,CACvB,IAAMy6G,EAAWh3H,KAAK82H,UAAU92H,KAAK+2H,cAAax7H,OAAAiE,OAAAjE,OAAAiE,OAAC,GAAI+c,GAAI,CAAEwiB,WAC7DE,EAAKy0F,OAAA7+F,KAAKtY,KAAK8J,EAAI2wG,OAEd,IAAU,MAAN32F,EAKT,MAAM,IAAI+zB,MAAiD,2CAAAp0C,OAAAhgB,OAJ3D,IAAMi3H,EAASj3H,KAAK82H,UAAU92H,KAAK+2H,cAAax7H,OAAAiE,OAAAjE,OAAAiE,OAAC,GAAI6gC,GAAE,CAAEtB,WACzDE,EAAKy0F,OAAA7+F,KAAKwL,GAAGha,EAAI4wG,GAMnB,OAAOh4F,MACR03F,EA1CmB,CAAQ1D,uB,kiBCD9B,IAAaiE,SAAS,SAAA1D,GAAAzwD,UAAAm0D,EAAA1D,GAAA,IAAA/pD,EAAA0tD,eAAAD,GAAA,SAAAA,IAAA,OAAAh2D,gBAAA,KAAAg2D,GAAAztD,EAAAxtE,MAAA,KAAAoM,WA6BnB,OA7BmBq5D,aAAAw1D,EAAA,EAAAj5H,IAAA,aAAAN,MACpB,SAAWqgH,GAAgD,IAAAv4G,EAAA,KAEnDm1C,EAAW56C,KAAK46C,SAEhB5b,EAAUh/B,KAAKg/B,QAEfpK,EAAK8+F,OAAA7+F,KAAK5S,WAIhB,OAHA24B,EAAS36C,SAAQ,SAAComB,EAAIjrB,GACpBw5B,EAAGF,IAAIjvB,EAAKsuH,SAAS1tG,EAAI23F,GAAY,IAAN5iH,EAAU,EAAK,IAAM4jC,MAE/CpK,IACR,CAAA32B,IAAA,WAAAN,MAED,SAAS0oB,EAAgB23F,GAEvB,IAEI/+E,EAFiB+0F,EAAAh0H,KAAKwQ,QAAnB/P,EAAIuzH,EAAJvzH,KAAMs+B,EAAIi1F,EAAJj1F,KAKPoB,EAAOngC,KAAK82H,UAAU92H,KAAK+2H,cAAc,CAACv2F,MAAO,EAAGhB,gBAAiB,gBAAiBT,UAC5F,OAAQt+B,GACN,IAAK,KAAMw+B,EAAKy0F,OAAA7+F,KAAKtY,KAAK8J,EAAI8Z,GAAO,MACrC,IAAK,MAAOlB,EAAKy0F,OAAA7+F,KAAKwL,GAAGha,EAAI8Z,GAAO,MACpC,QAAS,MAAM,IAAIi0B,MAAM,wBAADp0C,OAAyBvf,EAAI,gCAAAuf,OAA+BhgB,OAGtF,OAAOi/B,MACRi4F,EA7BmB,CAAQjE,uBCI1BmE,YAAc,mDAEdC,YAAc,gCAEdC,SAAWrwH,KAAKimC,GAAK,IAErBqqF,KAAOtwH,KAAKomC,IACZmqF,KAAOvwH,KAAKsmC,IACZkqF,KAAOxwH,KAAKywH,IACZC,MAAQ1wH,KAAKe,KAMb4vH,UAAY,SAAmBj6H,GACjC,MAAwB,kBAAVA,GAOZk6H,aAAe,IAKnBC,SAAS,SAAgBn6H,GACvB,OAAOsJ,KAAKC,MAAMvJ,EAAQk6H,cAAgBA,cAAgB;;;;;;;;;IA8pBrD,SAASE,iBAAiBC,EAASvoG,EAAGC,EAAG1yB,EAAGC,EAAG4K,EAAIC,GACxD,IACImwH,EACAn7H,EACA1B,EACAmM,EACAC,EALAlL,EAAI07H,EAAQ18H,OAOhB,QAASgB,GAAK,EAIZ,IAHA27H,EAAUD,EAAQ17H,GAClBQ,EAAIm7H,EAAQ38H,OAEPF,EAAI,EAAGA,EAAI0B,EAAG1B,GAAK,EACtBmM,EAAI0wH,EAAQ78H,GACZoM,EAAIywH,EAAQ78H,EAAI,GAChB68H,EAAQ78H,GAAKmM,EAAIkoB,EAAIjoB,EAAIxK,EAAI6K,EAC7BowH,EAAQ78H,EAAI,GAAKmM,EAAImoB,EAAIloB,EAAIvK,EAAI6K,EAKrC,OADAkwH,EAAQE,OAAS,EACVF,EAGT,SAASG,aAAaC,EAAOC,EAAO7rF,EAAIC,EAAI6rF,EAAOC,EAAcC,EAAWjxH,EAAGC,GAC7E,GAAI4wH,IAAU7wH,GAAK8wH,IAAU7wH,EAA7B,CAIAglC,EAAKirF,KAAKjrF,GACVC,EAAKgrF,KAAKhrF,GAEV,IAAIgsF,EAAWH,EAAQ,IAAMhB,SACzBoB,EAAWlB,KAAKiB,GAChBE,EAAWpB,KAAKkB,GAChBvrF,EAAKjmC,KAAKimC,GACV0rF,EAAa,EAAL1rF,EACR2rF,GAAOT,EAAQ7wH,GAAK,EACpBuxH,GAAOT,EAAQ7wH,GAAK,EACpB4lC,EAAKsrF,EAAWG,EAAMF,EAAWG,EACjCxrF,GAAMqrF,EAAWE,EAAMH,EAAWI,EAClCC,EAAQ3rF,EAAKA,EACb4rF,EAAQ1rF,EAAKA,EACb2rF,EAAaF,GAASvsF,EAAKA,GAAMwsF,GAASvsF,EAAKA,GAE/CwsF,EAAa,IACfzsF,EAAKmrF,MAAMsB,GAAczsF,EACzBC,EAAKkrF,MAAMsB,GAAcxsF,GAG3B,IAAIysF,EAAQ1sF,EAAKA,EACb2sF,EAAQ1sF,EAAKA,EACb2sF,GAAMF,EAAQC,EAAQD,EAAQF,EAAQG,EAAQJ,IAAUG,EAAQF,EAAQG,EAAQJ,GAEhFK,EAAK,IACPA,EAAK,GAGP,IAAIC,GAAQd,IAAiBC,GAAa,EAAI,GAAKb,MAAMyB,GACrDE,EAAMD,GAAQ7sF,EAAKc,EAAKb,GACxB8sF,EAAMF,IAAS5sF,EAAKW,EAAKZ,GACzBgtF,GAAOpB,EAAQ7wH,GAAK,EACpBkyH,GAAOpB,EAAQ7wH,GAAK,EACpB8kC,EAAKktF,GAAOd,EAAWY,EAAMX,EAAWY,GACxChtF,EAAKktF,GAAOd,EAAWW,EAAMZ,EAAWa,GACxCG,GAAMtsF,EAAKksF,GAAO9sF,EAClBmtF,GAAMrsF,EAAKisF,GAAO9sF,EAClBmtF,IAAOxsF,EAAKksF,GAAO9sF,EACnBqtF,IAAOvsF,EAAKisF,GAAO9sF,EACnBynB,EAAOwlE,EAAKA,EAAKC,EAAKA,EACtBG,GAAcH,EAAK,GAAK,EAAI,GAAK1yH,KAAK8yH,KAAKL,EAAK/B,MAAMzjE,IACtD8lE,GAAeN,EAAKG,EAAKF,EAAKC,EAAK,GAAK,EAAI,GAAK3yH,KAAK8yH,MAAML,EAAKE,EAAKD,EAAKE,GAAMlC,MAAMzjE,GAAQ0lE,EAAKA,EAAKC,EAAKA,KAElHt6H,MAAMy6H,KAAiBA,EAAc9sF,IAEhCsrF,GAAawB,EAAc,EAC9BA,GAAepB,EACNJ,GAAawB,EAAc,IACpCA,GAAepB,GAGjBkB,GAAclB,EACdoB,GAAepB,EAEf,IAQIx9H,EARA6+H,EAAWhzH,KAAKizH,KAAKzC,KAAKuC,IAAgBpB,EAAQ,IAClDZ,EAAU,GACVmC,EAAiBH,EAAcC,EAC/BG,EAAgB,EAAI,EAAI7C,KAAK4C,EAAiB,IAAM,EAAI3C,KAAK2C,EAAiB,IAC9EE,EAAK3B,EAAWlsF,EAChB8tF,EAAK3B,EAAWnsF,EAChB+tF,EAAK5B,GAAYlsF,EACjB+tF,EAAK9B,EAAWjsF,EAGpB,IAAKrxC,EAAI,EAAGA,EAAI6+H,EAAU7+H,IACxBk9H,EAAQwB,EAAa1+H,EAAI++H,EACzB/sF,EAAKoqF,KAAKc,GACVhrF,EAAKiqF,KAAKe,GACVoB,EAAKlC,KAAKc,GAAS6B,GACnBR,EAAKpC,KAAKe,GACVN,EAAQp8H,KAAKwxC,EAAKgtF,EAAgB9sF,EAAIA,EAAK8sF,EAAgBhtF,EAAIssF,EAAKU,EAAgBT,EAAIA,EAAKS,EAAgBV,EAAIA,EAAIC,GAIvH,IAAKv+H,EAAI,EAAGA,EAAI48H,EAAQ18H,OAAQF,GAAK,EACnCgyC,EAAK4qF,EAAQ58H,GACbkyC,EAAK0qF,EAAQ58H,EAAI,GACjB48H,EAAQ58H,GAAKgyC,EAAKitF,EAAK/sF,EAAKitF,EAAKjuF,EACjC0rF,EAAQ58H,EAAI,GAAKgyC,EAAKktF,EAAKhtF,EAAKktF,EAAKjuF,EAMvC,OAHAyrF,EAAQ58H,EAAI,GAAKmM,EAEjBywH,EAAQ58H,EAAI,GAAKoM,EACVwwH,GAIF,SAASyC,gBAAgBx9H,GAC9B,IAYI7B,EACAkB,EACAiL,EACAC,EACAkzH,EACAC,EACA1C,EACAnpH,EACA8rH,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EA1BAzrG,GAAKxyB,EAAI,IAAI2qB,QAAQyvG,aAAa,SAAUt6H,GAC9C,IAAIoB,GAAKpB,EACT,OAAOoB,EAAI,MAAUA,GAAK,KAAS,EAAIA,KACtC04B,MAAMugG,cAAgB,GAEzBzqF,EAAO,GACHwuF,EAAY,EACZC,EAAY,EACZC,EAAY,EAAI,EAChBzgF,EAAWnrB,EAAEn0B,OACbggI,EAAS,EACTnnD,EAAe,0BAA4Bl3E,EAgB3CisB,EAAO,SAAcqyG,EAAIC,EAAIC,EAAIC,GACnCb,GAAQY,EAAKF,GAAM,EACnBT,GAAQY,EAAKF,GAAM,EACnBvD,EAAQr8H,KAAK2/H,EAAKV,EAAMW,EAAKV,EAAMW,EAAKZ,EAAMa,EAAKZ,EAAMW,EAAIC,IAG/D,IAAKz+H,IAAMsC,MAAMkwB,EAAE,KAAOlwB,MAAMkwB,EAAE,IAEhC,OADAltB,QAAQyR,IAAImgE,GACLxnC,EAGT,IAAKvxC,EAAI,EAAGA,EAAIw/C,EAAUx/C,IAyBxB,GAxBA4/H,EAAcN,EAEVn7H,MAAMkwB,EAAEr0B,KACVs/H,EAAUjrG,EAAEr0B,GAAGggF,cACfu/C,EAAaD,IAAYjrG,EAAEr0B,IAG3BA,IAGFmM,GAAKkoB,EAAEr0B,EAAI,GACXoM,GAAKioB,EAAEr0B,EAAI,GAEPu/H,IACFpzH,GAAK4zH,EACL3zH,GAAK4zH,GAGFhgI,IACH0T,EAASvH,EACTqzH,EAASpzH,GAIK,MAAZkzH,EACEzC,IACEA,EAAQ38H,OAAS,EAEnBqxC,EAAKrxC,QAAU,EAEfggI,GAAUrD,EAAQ38H,QAItB6/H,EAAYrsH,EAASvH,EACrB6zH,EAAYR,EAASpzH,EACrBywH,EAAU,CAAC1wH,EAAGC,GACdmlC,EAAK/wC,KAAKq8H,GACV78H,GAAK,EACLs/H,EAAU,SAEL,GAAgB,MAAZA,EACJzC,IACHA,EAAU,CAAC,EAAG,IAGX0C,IACHQ,EAAYC,EAAY,GAI1BnD,EAAQr8H,KAAK2L,EAAGC,EAAG2zH,EAAuB,EAAX1rG,EAAEr0B,EAAI,GAAQggI,EAAuB,EAAX3rG,EAAEr0B,EAAI,GAAQ+/H,GAAwB,EAAX1rG,EAAEr0B,EAAI,GAAQggI,GAAwB,EAAX3rG,EAAEr0B,EAAI,IACrHA,GAAK,OACA,GAAgB,MAAZs/H,EACTG,EAAOM,EACPL,EAAOM,EAEa,MAAhBJ,GAAuC,MAAhBA,IACzBH,GAAQM,EAAYlD,EAAQA,EAAQ38H,OAAS,GAC7Cw/H,GAAQM,EAAYnD,EAAQA,EAAQ38H,OAAS,IAG1Cq/H,IACHQ,EAAYC,EAAY,GAG1BnD,EAAQr8H,KAAKi/H,EAAMC,EAAMvzH,EAAGC,EAAG2zH,GAAwB,EAAX1rG,EAAEr0B,EAAI,GAAQggI,GAAwB,EAAX3rG,EAAEr0B,EAAI,IAC7EA,GAAK,OACA,GAAgB,MAAZs/H,EACTG,EAAOM,GAAa5zH,EAAI4zH,GAAaE,EACrCP,EAAOM,GAAa5zH,EAAI4zH,GAAaC,EAEhCV,IACHQ,EAAYC,EAAY,GAG1BD,GAAwB,EAAX1rG,EAAEr0B,EAAI,GACnBggI,GAAwB,EAAX3rG,EAAEr0B,EAAI,GACnB68H,EAAQr8H,KAAKi/H,EAAMC,EAAMK,GAAa5zH,EAAI4zH,GAAaE,EAAWD,GAAa5zH,EAAI4zH,GAAaC,EAAWF,EAAWC,GACtHhgI,GAAK,OACA,GAAgB,MAAZs/H,EACTG,EAAOM,EAAYlD,EAAQA,EAAQ38H,OAAS,GAC5Cw/H,EAAOM,EAAYnD,EAAQA,EAAQ38H,OAAS,GAC5C28H,EAAQr8H,KAAKu/H,EAAYN,EAAMO,EAAYN,EAAMvzH,GAAK4zH,EAAmB,IAAPN,EAAatzH,GAAK8zH,EAAW7zH,GAAK4zH,EAAmB,IAAPN,EAAatzH,GAAK6zH,EAAWF,EAAY5zH,EAAG6zH,EAAY5zH,GACxKpM,GAAK,OACA,GAAgB,MAAZs/H,EACTxxG,EAAKiyG,EAAWC,EAAWD,EAAY5zH,EAAG6zH,GAC1ChgI,GAAK,OACA,GAAgB,MAAZs/H,EAETxxG,EAAKiyG,EAAWC,EAAWD,EAAWC,EAAY7zH,GAAKozH,EAAaS,EAAYD,EAAY,IAC5F//H,GAAK,OACA,GAAgB,MAAZs/H,GAA+B,MAAZA,EACZ,MAAZA,IACFnzH,EAAIuH,EACJtH,EAAIozH,EACJ3C,EAAQ0D,QAAS,IAGH,MAAZjB,GAAmBjD,KAAK0D,EAAY5zH,GAAK,IAAOkwH,KAAK2D,EAAY5zH,GAAK,MACxE0hB,EAAKiyG,EAAWC,EAAW7zH,EAAGC,GAEd,MAAZkzH,IACFt/H,GAAK,IAIT+/H,EAAY5zH,EACZ6zH,EAAY5zH,OACP,GAAgB,MAAZkzH,EAAiB,CA0B1B,GAzBAO,EAAQxrG,EAAEr0B,EAAI,GACd8/H,EAAQzrG,EAAEr0B,EAAI,GACdy/H,EAAOprG,EAAEr0B,EAAI,GACb0/H,EAAOrrG,EAAEr0B,EAAI,GACbkB,EAAI,EAEA2+H,EAAM3/H,OAAS,IAEb2/H,EAAM3/H,OAAS,GACjBw/H,EAAOD,EACPA,EAAOK,EACP5+H,MAEAw+H,EAAOI,EACPL,EAAOI,EAAMnkG,OAAO,GACpBx6B,GAAK,GAGP4+H,EAAQD,EAAMW,OAAO,GACrBX,EAAQA,EAAMW,OAAO,IAGvBb,EAAU5C,aAAagD,EAAWC,GAAY3rG,EAAEr0B,EAAI,IAAKq0B,EAAEr0B,EAAI,IAAKq0B,EAAEr0B,EAAI,IAAK6/H,GAAQC,GAAQP,EAAaQ,EAAY,GAAY,EAAPN,GAAWF,EAAaS,EAAY,GAAY,EAAPN,GACtK1/H,GAAKkB,EAEDy+H,EACF,IAAKz+H,EAAI,EAAGA,EAAIy+H,EAAQz/H,OAAQgB,IAC9B27H,EAAQr8H,KAAKm/H,EAAQz+H,IAIzB6+H,EAAYlD,EAAQA,EAAQ38H,OAAS,GACrC8/H,EAAYnD,EAAQA,EAAQ38H,OAAS,QAErCiH,QAAQyR,IAAImgE,GAehB,OAXA/4E,EAAI68H,EAAQ38H,OAERF,EAAI,GAENuxC,EAAK47B,MACLntE,EAAI,GACK68H,EAAQ,KAAOA,EAAQ78H,EAAI,IAAM68H,EAAQ,KAAOA,EAAQ78H,EAAI,KACrE68H,EAAQ0D,QAAS,GAGnBhvF,EAAKkvF,YAAcP,EAASlgI,EACrBuxC,EAkVF,SAASmvF,gBAAgB9D,GAC1BJ,UAAUI,EAAQ,MAEpBA,EAAU,CAACA,IAGb,IAEI+D,EACAr/H,EACAtB,EACA68H,EALA97H,EAAS,GACTW,EAAIk7H,EAAQ18H,OAMhB,IAAKoB,EAAI,EAAGA,EAAII,EAAGJ,IAAK,CAKtB,IAJAu7H,EAAUD,EAAQt7H,GAClBP,GAAU,IAAM27H,SAAOG,EAAQ,IAAM,IAAMH,SAAOG,EAAQ,IAAM,KAChE8D,EAAK9D,EAAQ38H,OAERF,EAAI,EAAGA,EAAI2gI,EAAI3gI,IAClBe,GAAU27H,SAAOG,EAAQ78H,MAAQ,IAAM08H,SAAOG,EAAQ78H,MAAQ,IAAM08H,SAAOG,EAAQ78H,MAAQ,IAAM08H,SAAOG,EAAQ78H,MAAQ,IAAM08H,SAAOG,EAAQ78H,MAAQ,IAAM08H,SAAOG,EAAQ78H,IAAM,IAG9K68H,EAAQ0D,SACVx/H,GAAU,KAId,OAAOA;;;;;;;;;ICn2CN,IAAC04B,KACAmnG,aACAC,SAAW,WACb,OAAOpnG,MAA0B,qBAAXr2B,SAA2Bq2B,KAAOr2B,OAAOq2B,OAASA,KAAKqnG,gBAAkBrnG,MAE7FsnG,UAAY,WACdtnG,KAAOonG,WAEHpnG,MACFA,KAAKunG,aAAa,MAAOC,WAAWr+H,QACpCg+H,aAAe,GAEfz5H,QAAQC,KAAK,2CAGb85H,QAAU,KACVC,OAAS,SAAgB5+H,GAC3B,SAAkB,IAARA,GAAgBA,EAAQ,GAAK,GAAK,KAAO,KAIrD6+H,QAAU,wCAEVC,iBAAmB,qBACfC,aAAe,SAAsBzhG,GACvC,IAEI7/B,EAFA0B,EAAIm+B,EAAO3/B,OACXqW,EAAM2qH,QAGV,IAAKlhI,EAAI,EAAGA,EAAI0B,EAAG1B,GAAK,GACrB6/B,EAAO7/B,GAAKuW,IAAQA,GAAOspB,EAAO7/B,IAGrC,OAAOuW,GAGTgrH,WAAa,SAAoB1hG,EAAQ3zB,EAAQs1H,GAC1CA,GAAuB,IAAZA,IACdA,EAAU31H,KAAKyK,KAAKupB,EAAOA,EAAO3/B,OAAS,IAAK2/B,EAAO,KAGzD,IAKI7/B,EALAyM,GAAmB,GAAbozB,EAAO,GACbnzB,GAAM80H,EACN9/H,EAAIm+B,EAAO3/B,OACXigI,EAAK,IAAMtgG,EAAOn+B,EAAI,GAAK+K,GAC3B2zH,GAAMl0H,IAAWL,KAAKywH,KAAKz8F,EAAOn+B,EAAI,IAAMm+B,EAAO,IAAM,MAASA,EAAOn+B,EAAI,IAAMm+B,EAAO,IAAMyhG,aAAazhG,GAAUnzB,GAAMmzB,EAAOn+B,EAAI,GAAKgL,GAWjJ,IANE0zH,EAFEA,EAEG,EAAIA,GAGHD,EAGHngI,EAAI,EAAGA,EAAI0B,EAAG1B,GAAK,EACtB6/B,EAAO7/B,KAAO6/B,EAAO7/B,GAAKyM,GAAM0zH,EAChCtgG,EAAO7/B,EAAI,KAAO6/B,EAAO7/B,EAAI,GAAK0M,GAAM0zH,GAI5CqB,gBAAkB,SAASA,EAAgBzvF,EAAIE,EAAIE,EAAIC,EAAIqvF,EAAIC,EAAIC,EAAIC,EAAIC,EAAW5B,EAAQ7lH,GAC5F,IAgBIna,EAhBA6hI,GAAO/vF,EAAKI,GAAM,EAClB4vF,GAAO9vF,EAAKG,GAAM,EAClB4vF,GAAO7vF,EAAKsvF,GAAM,EAClBQ,GAAO7vF,EAAKsvF,GAAM,EAClBQ,GAAOT,EAAKE,GAAM,EAClBQ,GAAOT,EAAKE,GAAM,EAClBQ,GAAQN,EAAME,GAAO,EACrBK,GAAQN,EAAME,GAAO,EACrBK,GAAQN,EAAME,GAAO,EACrBK,GAAQN,EAAME,GAAO,EACrBK,GAASJ,EAAOE,GAAQ,EACxBG,GAASJ,EAAOE,GAAQ,EACxBG,EAAKf,EAAK5vF,EACV4wF,EAAKf,EAAK3vF,EACV2wF,EAAKh3H,KAAKywH,KAAKlqF,EAAKwvF,GAAMgB,GAAMvwF,EAAKwvF,GAAMc,GAC3C94H,EAAKgC,KAAKywH,KAAKoF,EAAKE,GAAMgB,GAAMjB,EAAKE,GAAMc,GA2B/C,OAxBKzC,IACHA,EAAS,CAAC,CACR/zH,EAAG6lC,EACH5lC,EAAG8lC,GACF,CACD/lC,EAAGy1H,EACHx1H,EAAGy1H,IAELxnH,EAAQ,GAGV6lH,EAAO9+H,OAAOiZ,GAAS6lH,EAAOhgI,OAAS,EAAG,EAAG,CAC3CiM,EAAGs2H,EACHr2H,EAAGs2H,KAGAG,EAAKh5H,IAAOg5H,EAAKh5H,GAAMi4H,GAAaa,EAAKA,EAAKC,EAAKA,KACtD1iI,EAASggI,EAAOhgI,OAEhBuhI,EAAgBzvF,EAAIE,EAAI6vF,EAAKC,EAAKK,EAAMC,EAAMG,EAAOC,EAAOZ,EAAW5B,EAAQ7lH,GAE/EonH,EAAgBgB,EAAOC,EAAOH,EAAMC,EAAML,EAAKC,EAAKR,EAAIC,EAAIC,EAAW5B,EAAQ7lH,EAAQ,GAAK6lH,EAAOhgI,OAASA,KAGvGggI,GAGEe,WAA0B,WACnC,SAASA,EAAWnpH,EAAIpY,EAAMylE,GAC5By7D,cAAgBG,YAChBn8H,KAAKkT,GAAKA,EACSlT,KAAKk+H,QAAQpjI,EAAMylE,GAGxC,IAAI49D,EAAS9B,EAAW7gI,UA8OxB,OA5OA2iI,EAAOD,QAAU,SAAiBpjI,EAAMylE,GACtCA,EAASA,GAAU,GACnBzlE,EAAOA,GAAQ,UACf,IAMIgC,EACAmwC,EACAE,EACA/xC,EACAgjI,EACA9hI,EACA+hI,EACAC,EACAhgI,EAdA28B,EAASngC,EAAK+7B,MAAM2lG,SACpB+B,EAAU,EACVjD,EAAS,GACTkD,EAAS,GACT/jD,EAAYla,EAAOka,WAAa,EAChCgkD,EAAOhkD,GAAa,EAkBxB,GARAz6E,KAAKlF,KAAOA,GAER2hI,iBAAiBpyD,KAAKvvE,KAAUA,EAAK6N,QAAQ,MAAQ7N,EAAK6N,QAAQ,KAAO,KAC3EsyB,EAASw/F,gBAAgB3/H,GAAM,IAGjCgC,EAAIm+B,EAAO3/B,OAED,IAANwB,EACFm+B,EAAO0+B,QAAQ,EAAG,GAClB1+B,EAAOr/B,KAAK,EAAG,GACfkB,EAAI,OACC,IAAKA,EAAI,GAAK,EACnB,KAAM,qBASR,IANmB,KAAdm+B,EAAO,IAA+B,KAAlBA,EAAOn+B,EAAI,IAClC6/H,WAAW1hG,EAAQslC,EAAOj5D,OAAQi5D,EAAOq8D,SAG3C58H,KAAKi4H,QAAUh9F,EAEV7/B,EAAI,EAAGA,EAAI0B,EAAG1B,GAAK,EACtB6xC,EAAK,CACH1lC,GAAI0zB,EAAO7/B,EAAI,GACfoM,GAAIyzB,EAAO7/B,EAAI,IAEjB+xC,EAAK,CACH5lC,GAAI0zB,EAAO7/B,EAAI,GACfoM,GAAIyzB,EAAO7/B,EAAI,IAEjBkgI,EAAO1/H,KAAKqxC,EAAIE,GAEhB0vF,gBAAgB5vF,EAAG1lC,EAAG0lC,EAAGzlC,GAAIyzB,EAAO7/B,IAAK6/B,EAAO7/B,EAAI,IAAK6/B,EAAO7/B,EAAI,IAAK6/B,EAAO7/B,EAAI,GAAI+xC,EAAG5lC,EAAG4lC,EAAG3lC,EAAG,GAAiB,IAAZizE,GAAqB6gD,EAAQA,EAAOhgI,OAAS,GAKxJ,IAFAwB,EAAIw+H,EAAOhgI,OAENF,EAAI,EAAGA,EAAI0B,EAAG1B,IACjBijI,EAAQ/C,EAAOlgI,GACfkjI,EAAYhD,EAAOlgI,EAAI,IAAMijI,GAExBA,EAAM92H,EAAI+2H,EAAU/2H,GAAK+2H,EAAU92H,IAAM62H,EAAM72H,GAAK82H,EAAU/2H,IAAM82H,EAAM92H,GAAK82H,IAAUC,IAAcD,EAAM92H,GAAK,GAErH+2H,EAAUhyF,GAAK+xF,EAAM92H,EAAI+2H,EAAU/2H,EAEnC+2H,EAAU/xF,GAAK8xF,EAAM72H,EAAI82H,EAAU92H,EACnC82H,EAAUngI,EAAIkgI,EACdC,EAAUI,GAAKL,EAAM92H,EAEjBk3H,GAAQrjI,EAAI,GAAK6L,KAAKywH,IAAI4G,EAAU/xF,GAAK+xF,EAAUhyF,GAAKgvF,EAAOlgI,EAAI,GAAGmxC,GAAK+uF,EAAOlgI,EAAI,GAAGkxC,IAAM,IAEjGmyF,EAAO,GAGLH,EAAUhyF,GAAKiyF,IACZD,EAAUhyF,GAUbiyF,EAAUD,EAAUhyF,IATpBgyF,EAAUhyF,GAAK,KAEXlxC,IAAM0B,EAAI,IAEZwhI,EAAU/2H,GAAK,KACfg3H,EAAUt3H,KAAK0K,IAAI4sH,EAAS,MAC5BE,EAAO,OAObnD,EAAO9+H,OAAOpB,IAAK,GACnB0B,KASJ,GALAA,EAAI,EAAIyhI,EAAU,EAAI,EACtBH,EAAM,EAAIthI,EACVR,EAAI,EACJ+hI,EAAQ/C,EAAO,GAEXmD,EAAM,CACR,IAAKrjI,EAAI,EAAGA,EAAI0B,EAAG1B,IAEjBkD,EAAIlD,EAAIgjI,EAEJC,EAAMK,GAAKpgI,IACb+/H,EAAQ/C,IAASh/H,IAGnB2wC,EAAKoxF,EAAM72H,GAAKlJ,EAAI+/H,EAAM92H,GAAK82H,EAAM/xF,GAAK+xF,EAAM9xF,GAChDiyF,EAAOpjI,GAAK,CACVmM,EAAGjJ,EACHguC,GAAI8xF,EACJ52H,EAAGylC,EACHV,GAAI,EACJmyF,GAAI,GAGFtjI,IACFojI,EAAOpjI,EAAI,GAAGmxC,GAAKU,EAAKuxF,EAAOpjI,EAAI,GAAGoM,GAI1Cg3H,EAAO1hI,EAAI,GAAGyvC,GAAK+uF,EAAOA,EAAOhgI,OAAS,GAAGkM,EAAIylC,MAC5C,CAEL,IAAK7xC,EAAI,EAAGA,EAAI0B,EAAG1B,IAEbijI,EAAMK,GAAKtjI,EAAIgjI,IACjBC,EAAQ/C,IAASh/H,IAGnBkiI,EAAOpjI,GAAKijI,EAGV/hI,EAAIg/H,EAAOhgI,OAAS,IACtBkjI,EAAOpjI,EAAI,GAAKkgI,EAAOA,EAAOhgI,OAAS,IAiB3C,OAZA0E,KAAK++B,KAAO,SAAUzgC,GACpB,IAAI+/H,EAAQG,EAAOlgI,EAAIxB,EAAI,IAAM0hI,EAAO1hI,EAAI,GAM5C,OAJIuhI,EAAMK,GAAKpgI,IACb+/H,EAAQA,EAAMlgI,GAGTkgI,EAAM72H,GAAKlJ,EAAI+/H,EAAM92H,GAAK82H,EAAM/xF,GAAK+xF,EAAM9xF,IAGpDvsC,KAAK++B,KAAKs0C,OAASrzE,KACnBA,KAAKkT,IAAM2hB,MAAQA,KAAKunG,aAAap8H,KAAKkT,GAAIlT,KAAK++B,MAC5C/+B,MAGTm+H,EAAOQ,WAAa,SAAoBp+D,GACtC,OAAO87D,EAAWsC,WAAW3+H,KAAMugE,IAGrC87D,EAAWr+H,OAAS,SAAgBkV,EAAIpY,EAAMylE,GAC5C,OAAO,IAAI87D,EAAWnpH,EAAIpY,EAAMylE,GAAQxhC,MAG1Cs9F,EAAWuC,SAAW,SAAkBC,GACtChqG,KAAOgqG,EAEP1C,aAGFE,EAAW9+H,IAAM,SAAa2V,GAC5B,OAAO2hB,KAAKiqG,UAAU5rH,IAGxBmpH,EAAWsC,WAAa,SAAoB5/F,EAAMwhC,GAChDA,EAASA,GAAU,GACnB,IAKI9wC,EACAsvG,EACA3jI,EACAgjI,EACAv2H,EACAC,EACA2yE,EACAyiD,EACA8B,EACAC,EAdA73H,EAAQm5D,EAAOn5D,OAAS,IACxBE,EAASi5D,EAAOj5D,QAAU,IAC1BC,EAAIg5D,EAAOh5D,GAAK,EAChBC,GAAK+4D,EAAO/4D,GAAK,GAAKF,EACtBb,EAAIouB,KAAKqqG,MAAMz0F,QAAQ81B,EAAO5zB,MAAM,GAyBxC,GAbI4zB,EAAO9tD,SACTnL,GAAUA,EACVE,EAAI,GAGc,kBAATu3B,IACTA,EAAOlK,KAAKiqG,UAAU//F,IAGpBA,EAAKs0C,SACPt0C,EAAOA,EAAKs0C,QAGVt0C,aAAgBs9F,EAClB5sG,EAAIqsG,gBAAgB/D,iBAAiB,CAACh5F,EAAKk5F,SAAU7wH,EAAO,EAAG,GAAIE,EAAQC,EAAGC,QACzE,CAUL,IATAioB,EAAI,CAACloB,EAAGC,GACRizE,EAAYxzE,KAAKyK,IAAI,EAA6B,KAAzB6uD,EAAOka,WAAa,IAC7C2jD,EAAM,EAAI3jD,EACVA,GAAa,EACbyiD,EAAY,EAAIziD,EAChBukD,EAAQzC,OAAOh1H,EAAI62H,EAAMh3H,GACzB63H,EAAQ1C,OAAO/0H,EAAIu3B,EAAKq/F,IAAQ92H,GAChCy3H,GAASE,EAAQz3H,IAAMw3H,EAAQz3H,GAE1BnM,EAAI,EAAGA,EAAIq/E,EAAWr/E,IACzByM,EAAK00H,OAAOh1H,EAAInM,EAAIgjI,EAAMh3H,GAC1BU,EAAKy0H,OAAO/0H,EAAIu3B,EAAK3jC,EAAIgjI,IAAQ92H,IAE7BL,KAAKywH,KAAK5vH,EAAKm3H,IAAUp3H,EAAKm3H,GAASD,GAAS7B,GAAa9hI,IAAMq/E,EAAY,KAEjFhrD,EAAE7zB,KAAKojI,EAAOC,GACdF,GAASj3H,EAAKm3H,IAAUp3H,EAAKm3H,IAG/BA,EAAQn3H,EACRo3H,EAAQn3H,EAGV2nB,EAAI,IAAMA,EAAE5H,KAAK,KAInB,OADAphB,GAAKA,EAAEynB,aAAa,IAAKuB,GAClBA,GAGF4sG,EArP4B,G,8rDAuPrCJ,YAAcpnG,KAAKqnG,eAAeG,YAClCA,WAAWxhD,QAAU,SCxWrB,IAAaskD,SAAS,SAAA3L,GAAAzwD,UAAAo8D,EAAA3L,GAAA,IAAA/pD,EAAA21D,eAAAD,GAAA,SAAAA,IAAA,OAAAj+D,gBAAA,KAAAi+D,GAAA11D,EAAAxtE,MAAA,KAAAoM,WA6HnB,OA7HmBq5D,aAAAy9D,EAAA,EAAAlhI,IAAA,aAAAN,MAGpB,SAAWqgH,GAAgD,IAAAv4G,EAAA,KAEnDm1C,EAAW56C,KAAK46C,SAEhB5b,EAAUh/B,KAAKg/B,QAEJg1F,EAAAh0H,KAAKwQ,QAAfsoE,EAAMk7C,EAANl7C,OAEDlkD,EAAK8+F,OAAA7+F,KAAK5S,WAuBhB,OArBA24B,EAAS36C,SAAQ,SAAComB,EAAIjrB,GACpBskH,OAAOr5F,aAAcg5G,gBAAkBh5G,aAAci5G,gBACqB,sEAAAt/G,OAAAqG,IAErEA,EAAGk5G,aAAaJ,EAASK,cAC5B/5H,EAAKg6H,UAAUp5G,GACfA,EAAG6H,aAAaixG,EAASK,WAAY,SAEvC,IAIIvgG,EAJEygG,EAAYt8H,MAAMmZ,KAAK8J,EAAGD,iBAAiB,UAC5C/hB,QAAO,SAAAs7H,GAAK,OAAiC,IAA7BA,EAAMr3G,YAAYhtB,UAClC+I,QAAO,SAAAs7H,GAAK,MAA0B,MAAtBA,EAAMr3G,eAG3B,OAAQwwD,GACN,IAAK,OAAQ75C,EAAKx5B,EAAKm6H,aAAaF,EAAW1hB,GAAM,MACrD,IAAK,OAAQ/+E,EAAKx5B,EAAKo6H,aAAaH,EAAW1hB,GAAM,MACrD,QAAS,MAAM,IAAI5pD,MAAmC,6BAAAp0C,OAAA84D,IAExDlkD,EAAGF,IAAIuK,EAAU,IAAN7jC,EAAU,EAAK,IAAM4jC,MAG3BpK,IACR,CAAA32B,IAAA,YAAAN,MAED,SAAUmiI,GACR,IAAM91F,EAAO81F,EAAOx3G,YAGpB,GAFAo3F,OAAO11E,EAAkC,4BAAAhqB,OAAAgqB,IAErC81F,EAAOC,kBAAoB,EAA/B,CAEE,IAC6B74D,EADvBw4D,EAAYI,EAAO15G,iBAAiB,SAAQmhD,EAAAy4D,6BAC9BN,GAAS,QAAAjV,EAAA,eAAlBkV,EAAKz4D,EAAAvpE,MACd,GAAIgiI,EAAMr3G,YAAYhtB,OAAS,EAAG,CAEhC,IAAM2kI,EAAQN,EAAMr3G,YAAYtM,MAAM,IACtC2jH,EAAMr3G,YAAc,GACpB23G,EAAMhgI,SAAQ,SAAAigI,GACZ,IAAMC,EAAW5uH,SAASwjH,gBAAgB,6BAA8B,SACxEoL,EAAS73G,YAAc43G,EACvBP,EAAMtsG,YAAY8sG,QARxB,IAA+B54D,EAAA7qE,MAAAwqE,EAAAK,EAAAppE,KAAAspE,MAAAgjD,IAW9B,MAAAxkE,GAAAshB,EAAA9gE,EAAAw/C,GAAA,QAAAshB,EAAAO,SAdH,CAoBAg4D,EAAOx3G,YAAc,GACrB,IAAM83G,EAAQp2F,EAAKhuB,MAAM,IAEzBokH,EAAMngI,SAAQ,SAAAogI,GACZ,IAAMV,EAAQpuH,SAASwjH,gBAAgB,6BAA8B,SACrE4K,EAAMr3G,YAAc+3G,EACpBP,EAAOzsG,YAAYssG,SAEtB,CAAA1hI,IAAA,eAAAN,MAED,SAAa+hI,EAA8B1hB,GAEzC,IAII/+E,EAJEhgC,EAAWe,KAAKf,SAEYqhI,EAAAtgI,KAAKwQ,QAAhC/P,EAAI6/H,EAAJ7/H,KAAM8/H,EAAWD,EAAXC,YAAaxhG,EAAIuhG,EAAJvhG,KAGpBoB,EAAOngC,KAAK82H,UAAU,CAAC/3F,OAAMC,QAASuhG,IAC5C,OAAQ9/H,GACN,IAAK,KACHw+B,EAAKy0F,OAAA7+F,KAAK+N,OAAO88F,EAAW,CAACt/F,QAAS,GAAE7kC,OAAAiE,OAAA,CAAG4gC,QAAS,GAAMD,IAC1D,MACF,IAAK,MACHlB,EAAKy0F,OAAA7+F,KAAK+N,OAAO88F,EAAW,CAACt/F,QAAS,GAAE7kC,OAAAiE,OAAA,CAAG4gC,QAAS,GAAMD,IAC1D,MACF,QAEE,MAAM,IAAIi0B,MAAkD,4CAAAp0C,OAAAvf,IAOhE,OAJAw+B,EAAGwf,cAAcx/C,GAIVggC,IACR,CAAAhhC,IAAA,eAAAN,MAED,SAAa+hI,EAA8B1hB,GAEzC,IAMI/+E,EANEhgC,EAAWe,KAAKf,SAEMuhI,EAAAxgI,KAAKwQ,QAA1B/P,EAAI+/H,EAAJ//H,KAAM8/H,EAAWC,EAAXD,YAEPxhG,EAAOs9F,WAAWr+H,OAAO,SAAU,gDAGnCmiC,EAAOngC,KAAK82H,UAAU,CAAC/3F,OAAMC,QAASuhG,IAC5C,OAAQ9/H,GACN,IAAK,KACHw+B,EAAKy0F,OAAA7+F,KAAK+N,OAAO88F,EAAW,CAACt/F,QAAS,GAAE7kC,OAAAiE,OAAA,CAAG4gC,QAAS,GAAMD,IAC1D,MACF,IAAK,MACHlB,EAAKy0F,OAAA7+F,KAAK+N,OAAO88F,EAAW,CAACt/F,QAAS,GAAE7kC,OAAAiE,OAAA,CAAG4gC,QAAS,GAAMD,IAC1D,MACF,QAEE,MAAM,IAAIi0B,MAAkD,4CAAAp0C,OAAAvf,IAOhE,OAJAw+B,EAAGwf,cAAcx/C,GAIVggC,MACRkgG,EA7HmB,CAAQlM,uB,kiBACbkM,SAAUK,WAAG,YCG9B,IAAaiB,QAAQ,SAAAjN,GAAAzwD,UAAA09D,EAAAjN,GAAA,IAAA/pD,EAAAi3D,eAAAD,GAAA,SAAAA,IAAA,OAAAv/D,gBAAA,KAAAu/D,GAAAh3D,EAAAxtE,MAAA,KAAAoM,WAkGlB,OAlGkBq5D,aAAA++D,EAAA,EAAAxiI,IAAA,aAAAN,MACnB,SAAWqgH,GAAgD,IAAAv4G,EAAA,KACnDuH,EAAQgxG,EAAIjyF,YAEZ6I,EAAK8+F,OAAA7+F,KAAK5S,WACV+c,EAAkBh/B,KAAKg/B,QAO7B,OANAh/B,KAAK46C,SAAS36C,SAAQ,SAAComB,EAAIjrB,GACzB,IAAM6jC,EAAKx5B,EAAKsuH,SAAS1tG,EAAIrZ,GACvBmyB,EAAiB,IAAN/jC,EAAU,EAAK,IAAM4jC,EACtCpK,EAAGF,IAAIuK,EAAIE,MAGNvK,IACR,CAAA32B,IAAA,WAAAN,MAED,SAAS0oB,EAAgBrZ,GACvB,IAA2BgnH,EAAAh0H,KAAKwQ,QAAzB/P,EAAIuzH,EAAJvzH,KAAM8b,EAAIy3G,EAAJz3G,KAAMwiB,EAAIi1F,EAAJj1F,KACb51B,EAAM6D,EAAM2zH,YAGlB3zH,EAAM6pH,gBAAgBxwG,GAEtB,IAA4DovG,EAAAR,eAAe5uG,GAApElf,EAAIsuH,EAAJtuH,KAAME,EAAGouH,EAAHpuH,IAAK0I,EAAK0lH,EAAL1lH,MAAOpE,EAAM8pH,EAAN9pH,OAAQ0pH,EAAUI,EAAVJ,WAAYD,EAAWK,EAAXL,YAC7CM,EAAyD11H,KAAK21H,sBAAsBp5G,GAAKq5G,EAAAvnD,eAAAqnD,EAAA,GAAAG,EAAAxnD,eAAAunD,EAAA,MAAjFE,EAAGD,EAAA,GAAEE,EAAGF,EAAA,GAAAG,EAAA3nD,eAAAunD,EAAA,MAAIK,EAAGD,EAAA,GAAEE,EAAGF,EAAA,GAAAG,EAAA9nD,eAAAunD,EAAA,MAAIQ,EAAGD,EAAA,GAAEE,EAAGF,EAAA,GAAAG,EAAAjoD,eAAAunD,EAAA,MAAIW,EAAGD,EAAA,GAAEE,EAAGF,EAAA,GAC9Cn2F,EAAOngC,KAAKozH,UAAU,CAACr0F,SACvB6hG,EAAY/L,aAAa1rH,EAAKkd,EAAuC,aAAArG,OAAAqG,EAAGnT,IAAM,CAAC,QAC/E2tH,EAAahM,aAAa1rH,EAAKkd,EAAuC,aAAArG,OAAAqG,EAAGnT,IAAM,CAAC,QAEhF0hB,EAAK8+F,OAAA7+F,KAAK5S,WAEVw0G,EAAiB,cAAAz2G,OACd81G,EAAMT,EAAaluH,EAAU,OAAA6Y,OAAA+1G,EAAMX,EAAc/tH,EAAG,QACpD,GAAA2Y,OAAAi2G,EAAMZ,EAAatlH,EAAK,OAAAiQ,OAAMk2G,EAAMd,EAAc/tH,EAAS,WAAA2Y,OAC3Du2G,EAAMlB,EAAatlH,EAAW,OAAAiQ,OAAAw2G,EAAMpB,EAAczpH,EAAM,QACxD,GAAAqU,OAAAo2G,EAAMf,EAAaluH,EAAU,OAAA6Y,OAAAq2G,EAAMjB,EAAczpH,EAAW,OAC/D+qH,EAA2B,WAAA12G,OAAA7Y,EAAU,OAAA6Y,OAAA3Y,EAAG,QAAA2Y,OAAOjQ,EAAK,OAAAiQ,OAAM3Y,EAAG,QAAA2Y,OAAOjQ,EAAW,OAAAiQ,OAAArU,EAAM,QAAAqU,OAAO7Y,EAAI,OAAA6Y,OAAMrU,EAAW,OAEjHm1H,EAAW9gI,KAAK+gI,YAAYxkH,EAAM84G,EAAYD,GAEpD,OAAQ30H,GACN,IAAK,KACHm0B,EAAGgO,OAAOg+F,EAAW,CAAEjxH,SAAU8mH,GAAoBl7H,OAAAiE,OAAA,CAAAmQ,SAAU+mH,GAAkBv2F,GAAQ,GACzFvL,EAAGgO,OAAOi+F,EAAiBtlI,OAAAiE,OAAA,GAAAshI,GAAQvlI,OAAAiE,OAAA,CAAM+H,EAAG,EAAGC,EAAG,GAAM24B,GAAQ,GAChE,MACF,IAAK,MACHvL,EAAGgO,OAAOg+F,EAAW,CAAEjxH,SAAU+mH,GAAmBn7H,OAAAiE,OAAA,CAAAmQ,SAAU8mH,GAAmBt2F,GAAQ,GACzFvL,EAAGgO,OAAOi+F,EAAY,CAAEt5H,EAAG,EAAGC,EAAG,GAAUjM,OAAAiE,OAAAjE,OAAAiE,OAAA,GAAAshI,GAAa3gG,GAAQ,GAChE,MACF,QAEE,MAAM,IAAIi0B,MAAuB,iBAAAp0C,OAAAvf,IAGrC,OAAOm0B,IACR,CAAA32B,IAAA,cAAAN,MAED,SAAY4e,EAAc84G,EAAoBD,GAC5C,OAAQ74G,GACN,IAAK,MAAO,MAAO,CAAChV,EAAG,EAAGC,GAAI4tH,GAC9B,IAAK,SAAU,MAAO,CAAC7tH,EAAG,EAAGC,EAAG4tH,GAChC,IAAK,OAAQ,MAAO,CAAC7tH,GAAI8tH,EAAY7tH,EAAG,GACxC,IAAK,QAAS,MAAO,CAACD,EAAG8tH,EAAY7tH,EAAG,GACxC,QACE,MAAM,IAAI4sD,MAAM,wBAADp0C,OAAyBzD,EAAI,qDAAAyD,OAAoDhgB,UAErG,CAAA/B,IAAA,wBAAAN,MAQD,SAAsB4e,GACpB,OAAQA,GACN,IAAK,SACH,MAAO,CACL,CAAC,EAAG,GAAI,CAAC,EAAG,GACZ,CAAC,GAAI,GAAI,CAAC,GAAI,IAElB,IAAK,MACH,MAAO,CACL,CAAC,EAAG,GAAI,CAAC,EAAG,GACZ,CAAC,EAAG,GAAI,CAAC,EAAG,IAEhB,IAAK,QACH,MAAO,CACL,CAAC,EAAG,GAAI,EAAE,EAAG,GACb,CAAC,EAAG,GAAI,EAAE,EAAG,IAEjB,IAAK,OACH,MAAO,CACL,CAAC,EAAG,GAAI,CAAC,EAAG,GACZ,CAAC,EAAG,GAAI,CAAC,EAAG,IAEhB,QACE,MAAM,IAAI63C,MAAM,wBAADp0C,OAAyBzD,EAAI,qDAAAyD,OAAoDhgB,YAErGygI,EAlGkB,CAAQxN,uB,kiBCN7B,IAAa+N,SAAS,SAAAxN,GAAAzwD,UAAAi+D,EAAAxN,GAAA,IAAA/pD,EAAAw3D,eAAAD,GAAA,SAAAA,IAAA,OAAA9/D,gBAAA,KAAA8/D,GAAAv3D,EAAAxtE,MAAA,KAAAoM,WAkDnB,OAlDmBq5D,aAAAs/D,EAAA,EAAA/iI,IAAA,aAAAN,MACpB,SAAWqgH,GAAgD,IAAAv4G,EAAA,KAEnDm1C,EAAW56C,KAAK46C,SAEhB5b,EAAUh/B,KAAKg/B,QAEfpK,EAAK8+F,OAAA7+F,KAAK5S,WAIhB,OAHA24B,EAAS36C,SAAQ,SAAComB,EAAIjrB,GACpBw5B,EAAGF,IAAIjvB,EAAKsuH,SAAS1tG,EAAI23F,GAAY,IAAN5iH,EAAU,EAAK,IAAM4jC,MAE/CpK,IACR,CAAA32B,IAAA,WAAAN,MAED,SAAS0oB,EAAgB23F,GAAgD,IAAAkjB,EAAAC,EAAAC,EAAAC,EAInEpiG,EAFuB+0F,EAAAh0H,KAAKwQ,QAAzB/P,EAAIuzH,EAAJvzH,KAAM8b,EAAIy3G,EAAJz3G,KAAMwiB,EAAIi1F,EAAJj1F,KAIboB,EAAOngC,KAAKozH,UAAU,CAACr0F,SAC7BuiG,EAAgCthI,KAAKuhI,kBAAkBhlH,GAAhDijB,EAAe8hG,EAAf9hG,gBAAiBx5B,EAAIs7H,EAAJt7H,KACxB,OAAQvF,GACN,IAAK,KACHw+B,EAAKy0F,OAAA7+F,KAAK+N,OAAOvc,GAAM66G,EAAA,GAAAt3D,kBAAAs3D,EAAAl7H,EAAO,GAAG4jE,kBAAAs3D,EAAA,kBAAA1hG,GAAe0hG,GAAC3lI,OAAAiE,QAAA2hI,EAAA,GAAAv3D,kBAAAu3D,EAAIn7H,EAAO,GAAC4jE,kBAAAu3D,EAAC,kBAAC3hG,GAAe2hG,GAAKhhG,IACnF,MACF,IAAK,MACHlB,EAAKy0F,OAAA7+F,KAAK+N,OAAOvc,GAAM+6G,EAAA,GAAAx3D,kBAAAw3D,EAAAp7H,EAAO,GAAG4jE,kBAAAw3D,EAAA,kBAAA5hG,GAAe4hG,GAAC7lI,OAAAiE,QAAA6hI,EAAA,GAAAz3D,kBAAAy3D,EAAIr7H,EAAO,GAAC4jE,kBAAAy3D,EAAC,kBAAC7hG,GAAe6hG,GAAKlhG,IACnF,MACF,QAEE,MAAM,IAAIi0B,MAAuB,iBAAAp0C,OAAAvf,IAGrC,OAAOw+B,IACR,CAAAhhC,IAAA,oBAAAN,MAED,SAAkB4e,GAChB,OAAQA,GACN,IAAK,MACH,MAAO,CAACijB,gBAAiB,aAAcx5B,KAAM,UAC/C,IAAK,SACH,MAAO,CAACw5B,gBAAiB,gBAAiBx5B,KAAM,UAClD,IAAK,OACH,MAAO,CAACw5B,gBAAiB,cAAex5B,KAAM,UAChD,IAAK,QACH,MAAO,CAACw5B,gBAAiB,eAAgBx5B,KAAM,UACjD,QACE,MAAM,IAAIouD,MAAuB,iBAAAp0C,OAAAzD,SAEtCykH,EAlDmB,CAAQ/N,uB,kiBCA9B,IAAauO,gBAAgB,SAAAhO,GAAAzwD,UAAAy+D,EAAAhO,GAAA,IAAA/pD,EAAAg4D,eAAAD,GAAA,SAAAA,IAAA,OAAAtgE,gBAAA,KAAAsgE,GAAA/3D,EAAAxtE,MAAA,KAAAoM,WAsC1B,OAtC0Bq5D,aAAA8/D,EAAA,EAAAvjI,IAAA,aAAAN,MAC3B,SAAWqgH,GAAgD,IAAAv4G,EAAA,KAEnDm1C,EAAW56C,KAAK46C,SAEhB5b,EAAUh/B,KAAKg/B,QAEfpK,EAAK8+F,OAAA7+F,KAAK5S,WAIhB,OAHA24B,EAAS36C,SAAQ,SAAComB,EAAIjrB,GACpBw5B,EAAGF,IAAIjvB,EAAKsuH,SAAS1tG,EAAI23F,GAAY,IAAN5iH,EAAU,EAAK,IAAM4jC,MAE/CpK,IACR,CAAA32B,IAAA,WAAAN,MAED,SAAS0oB,EAAgB23F,GAEvB,IAEI/+E,EAFuB+0F,EAAAh0H,KAAKwQ,QAAzB/P,EAAIuzH,EAAJvzH,KAAMsI,EAAIirH,EAAJjrH,KAAMg2B,EAAIi1F,EAAJj1F,KAIboB,EAAOngC,KAAKozH,UAAU,CAACr0F,SACvB2iG,EAASnmI,OAAAiE,OAAAjE,OAAAiE,OAAA,GACV2gC,GAAIypC,kBAAA,GACN5pE,KAAK2hI,WAAWt7G,GAAM,SAAW,OAAStd,IAE7C,OAAQtI,GACN,IAAK,KAAMw+B,EAAKy0F,OAAA7+F,KAAKwL,GAAGha,EAAIq7G,GAAY,MACxC,IAAK,OAAQziG,EAAKy0F,OAAA7+F,KAAKtY,KAAK8J,EAAIq7G,GAAY,MAC5C,QAEE,MAAM,IAAIttE,MAAuB,iBAAAp0C,OAAAvf,IAGrC,OAAOw+B,IACR,CAAAhhC,IAAA,aAAAN,MAED,SAAW0oB,GACT,MAAsB,SAAfA,EAAG0B,SAAqC,aAAf1B,EAAG0B,SAAyC,YAAf1B,EAAG0B,YACjEy5G,EAtC0B,CAAQvO,uB,kiBCCrC,IAAa2O,gBAAgB,SAAApO,GAAAzwD,UAAA6+D,EAAApO,GAAA,IAAA/pD,EAAAo4D,eAAAD,GAAA,SAAAA,IAAA,OAAA1gE,gBAAA,KAAA0gE,GAAAn4D,EAAAxtE,MAAA,KAAAoM,WA6C1B,OA7C0Bq5D,aAAAkgE,EAAA,EAAA3jI,IAAA,aAAAN,MAC3B,SAAWqgH,GAAgD,IAAAv4G,EAAA,KAEnDm1C,EAAW56C,KAAK46C,SAEhB5b,EAAUh/B,KAAKg/B,QAEfpK,EAAK8+F,OAAA7+F,KAAK5S,WAKhB,OAJA24B,EAAS36C,SAAQ,SAAComB,EAAIjrB,GACpBw5B,EAAGF,IAAIjvB,EAAKsuH,SAAS1tG,EAAI23F,GAAY,IAAN5iH,EAAU,EAAK,IAAM4jC,MAEtDpK,EAAG6pB,cAAcz+C,KAAKy+C,eACf7pB,IACR,CAAA32B,IAAA,WAAAN,MAED,SAAS0oB,EAAgB23F,G,MAEgCgW,EAAAh0H,KAAKwQ,QAArDiyB,EAAgBuxF,EAAhBvxF,iBAAkBq/F,EAAO9N,EAAP8N,QAASt/F,EAAWwxF,EAAXxxF,YAAazD,EAAIi1F,EAAJj1F,KAEzCoB,EAAOngC,KAAKozH,UAAU,CAACr0F,QAAO,CAAC9/B,UAAU,EAAOC,MAAM,EAAOg9D,SAAS,IAEtEtnC,EAAK8+F,OAAA7+F,KAAK5S,WAEhBy9F,OAAOr5F,aAAc07G,mBAAmB,qDAAD/hH,OAAuDqG,IAC9F,IAAIqc,EAAM,EACV,IACEA,EAAMrc,EAAGsc,iBACT,MAAMl8B,GACN,MAAM,IAAI2tD,MAAM,2CAADp0C,OAA4CvZ,EAAC,gBAAAuZ,OAAeqG,IAE7E,IAAM27G,EAAa1iI,WAA8C,QAAnC0kE,EAAA39C,EAAG4H,aAAa,uBAAmB,IAAA+1C,IAAA,KAC3Di+D,EAAQD,EAAa,EAa3B,OAZA37G,EAAG6H,aAAa,mBAAuB,GAAAlO,OAAA0iB,EAAO,KAAA1iB,OAAA0iB,EAAc,EAARu/F,IAEpDrtG,EAAGgO,OAAOvc,EAAI,CAACwc,iBAAkBJ,IAAqBC,EAAMu/F,GAAUv/F,EAAMu/F,GAAO1mI,OAAAiE,OAAAjE,OAAAiE,OAAA,GAC3E2gC,GAAM,CAAAlhC,SAAU6iI,EAASj/F,iBAAkB,IAAI,GACvDjO,EAAGyL,GAAGha,EAAI,CAACwc,iBAAkBJ,EAAoBC,EAAMu/F,IAAWv/F,EAAMu/F,GACtEhjI,SAAU6iI,EACVniI,MAAOmiI,EAAUt/F,GAAc,GAE7BxiC,KAAKk8D,SACPtnC,EAAGsnC,UAGEtnC,MACRgtG,EA7C0B,CAAQ3O,uBCLxBiP,kBAAiB,WAU5B,SAAYA,EAAA1nE,EACA+xB,GAEyC,IADzC31D,EAAAvuB,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAA4B,KAC5B85H,EAAA95H,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAAqC,KAAI64D,gBAAA,KAAAghE,GAT5C,KAAaC,cAAwB,KAE9C,KAAQh2G,SAAwB,GAExB,KAAUi2G,WAAa,KAM7BpiI,KAAKw6D,OAASA,EACdx6D,KAAKusF,WAAaA,EAClBvsF,KAAK42B,OAASA,EACd52B,KAAKmiI,cAAgBA,EAiCtB,OAhCAzgE,aAAAwgE,EAAA,EAAAjkI,IAAA,gBAAAN,MAED,WACE,OAAOqC,KAAKmsB,WACb,CAAAluB,IAAA,kBAAAN,MAED,WACE,MAAM,GAANqiB,OAAUhgB,KAAKusF,WAAWrvF,KAAI,OAAA8iB,OAAMhgB,KAAKw6D,OAAM,aAAAx6C,OAAYhgB,KAAK2jC,UAAU9b,KAAK,MAAK,OACrF,CAAA5pB,IAAA,SAAAN,MAED,WACE,OAAOqC,KAAKusF,WAAWlxB,WACxB,CAAAp9D,IAAA,YAAAV,IAOD,WAQE,OAPwB,OAApByC,KAAKoiI,aACPpiI,KAAKoiI,WAAc,CAAApiI,KAAKusF,WAAWrvF,MAAI8iB,OAAAuqD,mBAAKvqE,KAAKusF,WAAW5oD,YAClC,MAAtB3jC,KAAKmiI,gBACPniI,KAAKoiI,WAAapiI,KAAMoiI,WAAWpiH,OAAOhgB,KAAKmiI,cAAcx+F,YAE/D3jC,KAAKoiI,WAAWlmE,WAEXl8D,KAAKoiI,aACb,CAAAnkI,IAAA,gBAAAV,IAED,W,QACE,OAAOyC,KAAK2jC,UAAU3jB,OAAqC,QAA9B+/D,EAAa,QAAb/b,EAAAhkE,KAAK42B,cAAQ,IAAAotC,OAAA,EAAAA,EAAAq+D,qBAAiB,IAAAtiD,IAAA,QAC5DmiD,EAlD2B,GCHxB,SAAU36G,sBAAsBxV,GACpC,OAAOyV,4BAA4BzV,EAAS,GAG9C,SAASyV,4BAA4BzV,GAA4B,IAAV0V,EAAMpf,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAAG,EACxDqf,EAAc,KAAKhoB,OAAO+nB,GAC1BE,EAAavkB,MAAMmZ,KAAKxK,EAAQ4V,YACjC1jB,KAAI,SAAA+B,GAAI,SAAAga,OAAOha,EAAK9I,KAAS,MAAA8iB,OAAAha,EAAKrI,MAAK,QACvCkqB,KAAK,KACJC,EAAc,IAAA9H,OAAAjO,EAAQgW,QAAQC,eAAahI,OAAmB,KAAf2H,EAAqB,GAAK,KAAG3H,OAAG2H,EAAa,KAC5FM,EAAQ,KAAAjI,OAAQjO,EAAQgW,QAAQC,cAAgB,KAEhDE,EAAe9kB,MAAMmZ,KAAKxK,EAAQoW,YACnClkB,KAAI,SAAAmkB,GACH,OAAIA,aAAgBC,QACXb,4BAA4BY,EAAMX,EAAS,GAExC,GAAAzH,OAAA,KAAKtgB,OAAO+nB,EAAS,IAAEzH,OAAGoI,EAAKE,gBAG5CT,KAAK,MACV,MAAqB,KAAjBK,EACI,GAANlI,OAAU0H,GAAW1H,OAAG8H,GAAO9H,OAAGiI,GAE1B,GAAAjI,OAAA0H,GAAW1H,OAAG8H,EAAO,MAAA9H,OAAKkI,EAAiB,MAAAlI,OAAA0H,GAAW1H,OAAGiI,GAG/D,SAAUq6G,WAAWj8G,GACzB,MAAO,GAAArG,OAAGqG,EAAG0B,QAAO,KAAA/H,OAAIqG,EAAGnT,IAAKsV,O,4pCCflC,IAAsB+5G,YAAW,WAoB/B,SAAAA,EAAsB58H,GAAeu7D,gBAAA,KAAAqhE,GAjBrC,KAAOzgE,QAAgB,KAEvB,KAAc0gE,eAAe,KAG7B,KAAaC,cAAsB,KAEnC,KAAgBC,iBAAmC,KACnD,KAAYC,aAAuB,KAEnC,KAAAC,iBAAgC,IAAIthI,IAEpC,KAAY2qB,aAAuB,KACnC,KAAayjG,cAAoB,KAK/B1vH,KAAK2F,OAASA,EA2Jf,OA1JA+7D,aAAA6gE,EAAA,EAAAtkI,IAAA,YAAAN,MAED,WACE,OAAOqC,KAAK2F,SACb,CAAA1H,IAAA,OAAAN,MAED,SAAKmkE,GACH9hE,KAAK8hE,QAAUA,EAEf9hE,KAAK6iI,eACLnjB,OAA8B,MAAvB1/G,KAAKwiI,eAAwB,uDACpCD,EAAYv0C,OAAOlhB,MAAM,cAAD9sD,OAAehgB,KAAKwiI,eAAet6D,WAE3DloE,KAAK8iI,eACL9iI,KAAK+iI,oBACL/iI,KAAKgjI,mBACLhjI,KAAKijI,2BACLjjI,KAAKkjI,uBAELX,EAAYv0C,OAAOlhB,MAAM,2BAAD9sD,OAA4BuH,sBAAsBvnB,KAAKisB,kBAChF,CAAAhuB,IAAA,oBAAAN,MAQO,WAAiB,IAAA8H,EAAA,KAEnB+0D,EAAS,EACP2oE,EAAgBnjI,KAAK8hE,QAAQshE,YAC7BC,EAAU,IAAIzsH,IACd0sH,EAAoBrkB,OAAOh7C,IAAIjkE,KAAKwiI,eAAe3+D,aACnD0/D,EAAiB,SAAjBA,EAAkBrV,GAMtB,GAFAmV,EAAQpiI,IAAIitH,EAAI1zD,OAAQ0zD,GAEiB,IAArCA,EAAI3hC,WAAW3jF,WAAWtN,OAA9B,CAIA,IAGiD4rE,EAH3CmE,EAAS83D,EAAcK,eACxBC,UAAUH,GACVI,aAAaxV,EAAI3hC,WAAWoxB,SAAQp2C,EAAAo8D,6BACjBzV,EAAI3hC,WAAW3jF,YAAU,IAAjD,IAAmD2+D,EAAA7qE,MAAAwqE,EAAAK,EAAAppE,KAAAspE,MAAA,KAAxC7iE,EAASsiE,EAAAvpE,MACZimI,EAAav4D,EAAOw4D,QAAQj/H,EAAUgG,KACxCivC,OAAyB,EAC7B,OAAQ+pF,EAAWx2E,QACjB,IAAK,KAAMvT,EAAgB+pF,EAAWznI,OAAQ,MAC9C,IAAK,YAAa,MAAM,IAAIi4D,MAAc,QAAAp0C,OAAApb,EAAUgG,IAAqB,mBAAAoV,OAAAkuG,EAAI3hC,WAAWrkB,SAAY,MACpG,IAAK,eAAgB,MAAM,IAAI9T,MAAc,QAAAp0C,OAAApb,EAAUgG,IAAwB,sBAAAoV,OAAAkuG,EAAI3hC,WAAWrkB,SAAY,MAG5G,IAAM97C,EAAQ,IAAI81G,kBAAkBz8H,EAAKq+H,cAActpE,GAAS3gB,EAAeq0E,EAAKtpH,GACpF41D,IACA0zD,EAAI/hG,SAASvwB,KAAKwwB,GAClBm3G,EAAen3G,IAChB,MAAA65B,GAAAshB,EAAA9gE,EAAAw/C,GAAA,QAAAshB,EAAAO,OAEH9nE,KAAKyiI,cAAgB,IAAIP,kBAAkBliI,KAAK8jI,cAActpE,GAASx6D,KAAKwiI,gBAC5EhoE,IACA+oE,EAAevjI,KAAKyiI,eACpBziI,KAAK0iI,iBAAmBW,EAExBd,EAAYv0C,OAAO9nC,MAAM,6BAA8BskB,aAAaxqE,KAAKyiI,kBAC1E,CAAAxkI,IAAA,gBAAAN,MAED,SAAc68D,GACZ,MAAM,KAANx6C,OAAYw6C,KACb,CAAAv8D,IAAA,qBAAAN,MAED,SAAmB8C,EAAcyS,EAAYywB,GAAwC,IAAnB7oC,EAAiBuN,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,MAC3E07H,EAASxoI,OAAOiE,OAAOQ,KAAK8hE,QAAQvwD,SAAS4e,cAAc,KAAM,CAACr1B,SACxEipI,EAAO71G,aAAa,KAAMhb,GAC1B6wH,EAAO71G,aAAa,QAASyV,EAAU9b,KAAK,MAE5C,QAAAkmD,EAAA,EAAAi2D,EAA2BzoI,OAAO0nF,QAAQnoF,GAAOizE,EAAAi2D,EAAA1oI,OAAAyyE,IAAA,CAA5C,IAAAk2D,EAAA51D,eAAA21D,EAAAj2D,GAAA,GAAO9vE,EAAGgmI,EAAA,GAAEtmI,EAAKsmI,EAAA,GAChBF,EAAOxE,aAAathI,IACtBsE,QAAQC,KAAkB,aAAAwd,OAAA/hB,EAAG,uBAAA+hB,OAAsB+jH,EAAM,wBAAA/jH,OAAuB/hB,IAChF8lI,EAAO71G,aAAqB,QAAAlO,OAAA/hB,GAAOy+D,OAAO/+D,KAE1ComI,EAAO71G,aAAajwB,EAAKy+D,OAAO/+D,IAGpC,OAAOomI,IACR,CAAA9lI,IAAA,mBAAAN,MAED,WAAgB,IAAA0rE,EAAA,KAGR66D,EAAc,SAAdA,EAAe97G,EAAyB+7G,EAAsCxgG,GAClF,IAAMogG,EAAS16D,EAAKgmD,mBAAmBjnG,EAAKmkE,WAAWrvF,KAAMw/D,OAAOt0C,EAAKoyC,QAASpyC,EAAKub,WAErE,OAAdwgG,EACFA,EAAU9wG,YAAY0wG,GAGtBA,EAAO71G,aAAa,SAAU,QAC/B,IAEgCy+F,EAAbC,EAAA+W,6BAAAv7G,EAAK+D,UAAQ,IAAjC,IAAmCygG,EAAAlwH,MAAAiwH,EAAAC,EAAAzuH,KAAAspE,MAAA,KAAxBr7C,EAAKugG,EAAAhvH,MACRymI,EAAiBh4G,EAAMuX,UAAU3jB,OAAO2jB,GAC9CugG,EAAY93G,EAAO23G,EAAQK,IAC5B,MAAAn+E,GAAA2mE,EAAAnmH,EAAAw/C,GAAA,QAAA2mE,EAAA9kD,IAED,OAAOi8D,GAET/jI,KAAK2iI,aAAeuB,EAAYlkI,KAAKyiI,cAAe,KAAMziI,KAAKyiI,cAAc9+F,aAC9E,CAAA1lC,IAAA,2BAAAN,MAED,WACEqC,KAAKisB,aAAejsB,KAAKqvH,mBAAmBrvH,KAAKwiI,eAAet6D,SAAU,WAAY,GAAI,IAC1Fq6D,EAAYv0C,OAAO9nC,MAAM,oCAAqC3+B,sBAAsBvnB,KAAKisB,iBAC1F,CAAAhuB,IAAA,iBAAAN,MAED,SAAem6B,GACb,IAAMusG,EAAarkI,KAAKomB,iBAAiB0R,GAGzC,OAFA4nF,OAA6B,IAAtB2kB,EAAW/oI,OAAa,qCAAD0kB,OAAuC8X,EAAa,OAClF4nF,OAAO2kB,EAAW/oI,OAAS,EAAE,2CAAD0kB,OAA6C8X,EAAa,OAC/EusG,EAAW,KACnB,CAAApmI,IAAA,mBAAAN,MAED,SAAiBm6B,GACf,IAAMisG,EAAS/jI,KAAKskI,eAAexsG,GACnC,OAAO93B,KAAKukI,iBAAiBR,KAC9B,CAAA9lI,IAAA,gBAAAN,MAOS,SAAcm6B,GACtB,OAAO93B,KAAK2iI,aAAa7tH,cAAcgjB,KACxC,CAAA75B,IAAA,mBAAAN,MAES,SAAiBm6B,GACzB,OAAO10B,MAAMmZ,KAAKvc,KAAK2iI,aAAav8G,iBAAiB0R,MACtD,CAAA75B,IAAA,mBAAAN,MAES,SAAiBomI,GACzB,OAAO/jI,KAAK0iI,iBAAiBnlI,IAAIwmI,EAAO7wH,MACzC,CAAAjV,IAAA,wBAAAN,MAED,SAAsBsyF,GACpB,IAAMu0C,EAAWxkI,KAAKykI,mBAAmBx0C,EAAM/8E,IAC/C,GAAgB,MAAZsxH,EACF,MAAM,IAAIpwE,MAAM,yCAAAp0C,OAAyCsiH,WAAWryC,GAAM,gDAG5E,OAAOu0C,MACRjC,EAhL8B,G,kiBACdA,YAAMv0C,OAAWtgB,cAAcmhB,UAAU,eCP5D,IAAsB61C,mBAAmB,SAAAC,GAAA5hE,UAAA2hE,EAAAC,GAAA,IAAAl7D,EAAAm7D,eAAAF,GACvC,SAAAA,EAAsB/+H,GAAqB,OAAAu7D,gBAAA,KAAAwjE,GAAAj7D,EAAA/tE,KAAA,KACnCiK,GAkGP,OAjGA+7D,aAAAgjE,EAAA,EAAAzmI,IAAA,eAAAN,MAED,WAAY,IAAA8H,EAAA,KAEJm1C,EAAW56C,KAAK2F,OAAOygB,iBAA6B,KAC1Dw0B,EAAS36C,SAAQ,SAAAomB,GACf,IAAMnT,EAAKmT,EAAG4H,aAAa,MACjB,MAAN/a,GAAoB,IAANA,GAChBzN,EAAKm9H,iBAAiBluG,IAAIxhB,QAG/B,CAAAjV,IAAA,YAAAN,MAED,WACE,OAAOqC,KAAK2F,SACb,CAAA1H,IAAA,WAAAN,MAED,WACE,OAAOqC,KAAK2F,OAAOmP,cAAc,cAClC,CAAA7W,IAAA,mBAAAN,MAED,SAAiB0oB,EAAwBnpB,EAAcS,GACrD,IAAMknI,EAAMx+G,EACS,MAAjBw+G,EAAIhsG,YACNgsG,EAAIhsG,UAAY,IAElBgsG,EAAIhsG,UAAU37B,GAAQS,IACvB,CAAAM,IAAA,kBAAAN,MAED,SAAgB0oB,EAAwBnpB,GACtC,IAAM2nI,EAAMx+G,EACZ,OAAqB,MAAjBw+G,EAAIhsG,UACC,KAEFgsG,EAAIhsG,UAAU37B,KACtB,CAAAe,IAAA,kBAAAN,MAED,SAAgB0oB,GACd,IAAMvf,EAAM9G,KAAK8kI,SAASz+G,GAC1BrmB,KAAK+kI,iBAAiB1+G,EAAI,MAAOvf,KAClC,CAAA7I,IAAA,iBAAAN,MAED,SAAe0oB,GACb,OAAOrmB,KAAKglI,gBAAgB3+G,EAAI,SACjC,CAAApoB,IAAA,SAAAN,MAED,SAAOuV,GACL,IAAMmT,EAAKrmB,KAAKykI,mBAAmBvxH,GAEnC,OADAwsG,OAAOr5F,aAAc4+G,mBAAmB,mDAADjlH,OAAqDqG,EAAGznB,YAAY1B,KAAQ,MAC5GspC,UAAUxmC,KAAK2gI,YAAat6G,KACpC,CAAApoB,IAAA,WAAAN,MAED,SAAS0oB,GACP,OAAOmgB,UAAUxmC,KAAK2gI,YAAat6G,KACpC,CAAApoB,IAAA,gBAAAN,MAED,WACE,IAAMwL,EAAMnJ,KAAK2F,OACXyB,EAAQ+B,EAAI8kB,aAAa,SACzB3mB,EAAS6B,EAAI8kB,aAAa,UAChC,GAAa,MAAT7mB,GAA2B,MAAVE,EACnB,MAAM,IAAI8sD,MAAM,2BAElB,MAAO,CACLhtD,MAAO9H,WAAW8H,GAClBE,OAAQhI,WAAWgI,MAEtB,CAAArJ,IAAA,UAAAN,MAED,WAIE,OAHyC,MAArCqC,KAAK2F,OAAOmP,cAAc,SAC5B9U,KAAK2F,OAAO0tB,YAAY9hB,SAASwjH,gBAAgB,6BAA8B,SAE1E/0H,KAAK2F,OAAOmP,cAAc,UAClC,CAAA7W,IAAA,aAAAN,MAED,WACE,GAA6C,MAAzCqC,KAAK2F,OAAOmP,cAAc,YAC5B,OAAO9U,KAAK2F,OAAOmP,cAAc,YAEnC,IAAMq/G,EAAU5iH,SAASwjH,gBAAgB,6BAA8B,KAIvE,OAHAZ,EAAQjmG,aAAa,KAAM,WAC3BimG,EAAQjmG,aAAa,QAAS,WAC9BluB,KAAK2F,OAAO0tB,YAAY8gG,GACjBA,IACR,CAAAl2H,IAAA,uBAAAN,MAED,SAAqB0oB,EAAgBnT,EAAYywB,GAAwC,IAAnB7oC,EAAiBuN,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,MAC/EinH,EAAQ/9G,SAASwjH,gBAAgB,6BAA8B1uG,EAAG0B,SAClEm9G,EAAM3pI,OAAOiE,OAAO8vH,EAAO,CAACx0H,SAClCoqI,EAAIh3G,aAAa,KAAMhb,GACvBgyH,EAAIh3G,aAAa,QAASyV,EAAU9b,KAAK,MAEzC,QAAAkmD,EAAA,EAAAi2D,EAA2BzoI,OAAO0nF,QAAQnoF,GAAOizE,EAAAi2D,EAAA1oI,OAAAyyE,IAAA,CAA5C,IAAAk2D,EAAA51D,eAAA21D,EAAAj2D,GAAA,GAAO9vE,EAAGgmI,EAAA,GAAEtmI,EAAKsmI,EAAA,GACpBiB,EAAIh3G,aAAajwB,EAAKy+D,OAAO/+D,IAE/B,OAAOunI,MACRR,EApGsC,CAAQnC,a,kiBCEjD,IAAa4C,WAAW,SAAA3R,GAAAzwD,UAAAoiE,EAAA3R,GAAA,IAAA/pD,EAAA27D,eAAAD,GAAA,SAAAA,IAAA,OAAAjkE,gBAAA,KAAAikE,GAAA17D,EAAAxtE,MAAA,KAAAoM,WA+DrB,OA/DqBq5D,aAAAyjE,EAAA,EAAAlnI,IAAA,aAAAN,MACtB,SAAWqgH,GAAgD,IAAAv4G,EAAA,KACnDuH,EAAQgxG,EAAIjyF,YAClB2zF,OAAO1yG,aAAiB03H,mBAAmB,iEAAD1kH,OAAmEhT,IAC7G,IAAMq4H,EAAWr4H,EAGX4tC,EAAW56C,KAAK46C,SAEhB5b,EAAUh/B,KAAKg/B,QAEfpK,EAAK8+F,OAAA7+F,KAAK5S,WAIhB,OAHA24B,EAAS36C,SAAQ,SAAComB,EAAIjrB,GACpBw5B,EAAGF,IAAIjvB,EAAKsuH,SAAS1tG,EAAIg/G,GAAiB,IAANjqI,EAAU,EAAK,IAAM4jC,MAEpDpK,IACR,CAAA32B,IAAA,WAAAN,MAED,SAAS0oB,EAAgBrZ,GAEvB,IAAqEgnH,EAAAh0H,KAAKwQ,QAAnEuD,EAASigH,EAATjgH,UAAW+tH,EAAO9N,EAAP8N,QAASt/F,EAAWwxF,EAAXxxF,YAAa8iG,EAAMtR,EAANsR,OAAQjkG,EAAW2yF,EAAX3yF,YAAatC,EAAIi1F,EAAJj1F,KACvD0D,EAAiC,qBAAd1uB,EAEnBosB,EAAOngC,KAAKozH,UAAU,CAACr0F,QAAO,CAAC9/B,UAAU,EAAOC,MAAM,EAAOg9D,SAAS,IACtE7yB,EAAQrpC,KAAKulI,UAAUl/G,EAAIrZ,EAAOs4H,EAAQjkG,GAE1CzM,EAAK8+F,OAAA7+F,KAAK5S,WAEZygB,EAAM,EACV,IACEA,EAAM2G,EAAO1G,iBACb,MAAMl8B,GACN,MAAM,IAAI2tD,MAAM,wCAADp0C,OAAyCvZ,EAAC,gBAAAuZ,OAAeqpB,IAU1E,OARAA,EAAOnb,aAAa,mBAAoBwuC,OAAOh6B,IAE/C9N,EAAG3zB,IAAIooC,EAAQ,CAACjJ,QAAS,GAAI,GAC7BxL,EAAGgO,OAAOyG,EAAQ,CAACxG,iBAAkBJ,GAAoBC,EAAMA,GAAInnC,OAAAiE,OAAAjE,OAAAiE,OAAA,GAC3D2gC,GAAI,CAAElhC,SAAU6iI,EAASj/F,iBAAkB,IAAI,GACvDjO,EAAGyL,GAAGgJ,EAAQ,CAACxG,iBAAkBJ,EAAmBC,GAAOA,EAAKzjC,SAAU6iI,GAAUt/F,GACpF5N,EAAG3zB,IAAIooC,EAAQ,CAACjJ,QAAS,GAAIoC,EAAcs/F,GAEpCltG,IACR,CAAA32B,IAAA,YAAAN,MAED,SAAU0oB,EAAgBrZ,EAA2Bs4H,EAAgBjkG,GACnE,IAAMmkG,EAAcx4H,EAAMy4H,eAAep/G,GACzCzL,EAAyC,OAAX4qH,QAAW,IAAXA,IAAex4H,EAAM83H,SAASz+G,GAArD9e,EAACqT,EAADrT,EAAGC,EAACoT,EAADpT,EAAGJ,EAAKwT,EAALxT,MAAOE,EAAMsT,EAANtT,OACd+xD,EAAOrsD,EAAM2zH,YAEb+E,EAAUn0H,SAASwjH,gBAAgB,6BAA8B,WAYvE,OAXA2Q,EAAQx3G,aAAa,YAAY,aAADlO,OAAezY,EAAEH,EAAM,EAAC,MAAA4Y,OAAKxY,EAAEF,EAAO,EAAK,MAC3Eo+H,EAAQx3G,aAAa,KAAK,GAADlO,OAAK5Y,EAAM,EAAE,MACtCs+H,EAAQx3G,aAAa,KAAK,GAADlO,OAAK1Y,EAAO,EAAE,MACvCo+H,EAAQx3G,aAAa,OAAQ,QAC7Bw3G,EAAQx3G,aAAa,SAAUo3G,GAC/BI,EAAQx3G,aAAa,eAAgBwuC,OAAOr7B,IAE5CqkG,EAAQx3G,aAAa,UAAW,KAEhCmrC,EAAKhmC,YAAYqyG,GAEVA,MACRP,EA/DqB,CAAQlS,uB,kiBCAhC,IAAa0S,UAAU,SAAAnS,GAAAzwD,UAAA4iE,EAAAnS,GAAA,IAAA/pD,EAAAm8D,eAAAD,GAAA,SAAAA,IAAA,OAAAzkE,gBAAA,KAAAykE,GAAAl8D,EAAAxtE,MAAA,KAAAoM,WAiEpB,OAjEoBq5D,aAAAikE,EAAA,EAAA1nI,IAAA,aAAAN,MACrB,SAAWqgH,GAAgD,IAAAv4G,EAAA,KACnDuH,EAAQgxG,EAAIjyF,YAEZ6I,EAAK8+F,OAAA7+F,KAAK5S,WACV+c,EAAkBh/B,KAAKg/B,QAO7B,OANAh/B,KAAK46C,SAAS36C,SAAQ,SAAComB,EAAIjrB,GACzB,IAAM6jC,EAAKx5B,EAAKsuH,SAAS1tG,EAAIrZ,GACvBmyB,EAAiB,IAAN/jC,EAAU,EAAK,IAAM4jC,EACtCpK,EAAGF,IAAIuK,EAAIE,MAGNvK,IACR,CAAA32B,IAAA,WAAAN,MAED,SAAS0oB,EAAgBrZ,GACvB,IA8BIiyB,EA9ByC+0F,EAAAh0H,KAAKwQ,QAA3C/P,EAAIuzH,EAAJvzH,KAAMwrC,EAAU+nF,EAAV/nF,WAAYC,EAAU8nF,EAAV9nF,WAAYnN,EAAIi1F,EAAJj1F,KAEH02F,EAAAR,eAAe5uG,GAA1CgvG,EAAUI,EAAVJ,WAAYD,EAAWK,EAAXL,YACnByQ,EAAuB74H,EAAM83H,SAASz+G,GAA/Bjf,EAAKy+H,EAALz+H,MAAOE,EAAMu+H,EAANv+H,OAER6kC,EAAM,CACVF,aACAC,WAAY,EACZI,GAAIllC,EAAQ,EACZmlC,GAAIjlC,EAAS,EACbklC,GAAI6oF,EACJ5oF,GAAI2oF,GAEA0Q,EAAmB75F,EACnB85F,EAAkB75F,EAElBQ,EAAa,WACjB,IAAMC,EAAOC,WACTT,EAAIG,GACJH,EAAII,GACJJ,EAAIK,GACJL,EAAIM,GACJN,EAAIF,WACJE,EAAID,YACNpoC,WAAW,KAAM,KACnBuiB,EAAG6H,aAAa,YAAY,SAADlO,OAAW2sB,EAAS,QAG3CxM,EAAOngC,KAAKozH,UAAU,CAACr0F,OAAMgL,SAAU2C,IAI7C,OAAQjsC,GACN,IAAK,KACHw+B,EAAKy0F,OAAA7+F,KAAK+N,OAAOuJ,EACb,CAAED,WAAY45F,GAAkBvqI,OAAAiE,OAAA,CAC9B0sC,WAAY65F,GAAoB5lG,IACtC,MACF,IAAK,MACHlB,EAAKy0F,OAAA7+F,KAAK+N,OAAOvc,EACb,CAAE6lB,WAAY65F,GAAiBxqI,OAAAiE,OAAA,CAC7B0sC,WAAY45F,GAAqB3lG,IACvC,MACF,QAEE,MAAM,IAAIi0B,MAAuB,iBAAAp0C,OAAAvf,IAGrC,OAAOw+B,MACR0mG,EAjEoB,CAAQ1S,uB,kiBCD/B,IAAa+S,aAAa,SAAAxS,GAAAzwD,UAAAijE,EAAAxS,GAAA,IAAA/pD,EAAAw8D,eAAAD,GAAA,SAAAA,IAAA,OAAA9kE,gBAAA,KAAA8kE,GAAAv8D,EAAAxtE,MAAA,KAAAoM,WAkCvB,OAlCuBq5D,aAAAskE,EAAA,EAAA/nI,IAAA,aAAAN,MACxB,SAAWqgH,GAAgD,IAAAv4G,EAAA,KAEnDm1C,EAAW56C,KAAK46C,SAEhB5b,EAAUh/B,KAAKg/B,QAEfpK,EAAK8+F,OAAA7+F,KAAK5S,WAKhB,OAJA24B,EAAS36C,SAAQ,SAAComB,EAAIjrB,GACpBw5B,EAAGF,IAAIjvB,EAAKsuH,SAAS1tG,EAAI23F,GAAY,IAAN5iH,EAAU,EAAK,IAAM4jC,MAEtDpK,EAAG6pB,cAAcz+C,KAAKy+C,eACf7pB,IACR,CAAA32B,IAAA,WAAAN,MAED,SAAS0oB,EAAgB23F,G,MAEUgW,EAAAh0H,KAAKwQ,QAA/BiyB,EAAgBuxF,EAAhBvxF,iBAAkB1D,EAAIi1F,EAAJj1F,KAEnBoB,EAAOngC,KAAKozH,UAAU,CAACr0F,SAE7B2gF,OAAOr5F,aAAc07G,mBAAmB,qDAAD/hH,OAAuDqG,IAC9F,IAAIqc,EAAM,EACV,IACEA,EAAMrc,EAAGsc,iBACT,MAAMl8B,GACN,MAAM,IAAI2tD,MAAM,2CAADp0C,OAA4CvZ,EAAC,gBAAAuZ,OAAeqG,IAE7E,IAAM27G,EAAa1iI,WAA8C,QAAnC0kE,EAAA39C,EAAG4H,aAAa,uBAAmB,IAAA+1C,IAAA,KAC3Di+D,EAAQD,EAAa,EAG3B,OAFA37G,EAAG6H,aAAa,mBAAuB,GAAAlO,OAAA0iB,EAAO,KAAA1iB,OAAA0iB,EAAc,EAARu/F,IAE7CvO,OAAA7+F,KAAK+N,OAAOvc,EAAI,CAACwc,iBAAkBJ,IAAqBC,EAAMu/F,GAAUv/F,EAAMu/F,GAAO1mI,OAAAiE,OAAAjE,OAAAiE,OAAA,GACpF2gC,GAAM,CAAA0C,iBAAkB,SACjCmjG,EAlCuB,CAAQ/S,uB,kiBCClC,IAAaiT,gBAAgB,SAAA1S,GAAAzwD,UAAAmjE,EAAA1S,GAAA,IAAA/pD,EAAA08D,eAAAD,GAAA,SAAAA,IAAA,OAAAhlE,gBAAA,KAAAglE,GAAAz8D,EAAAxtE,MAAA,KAAAoM,WAsI1B,OAtI0Bq5D,aAAAwkE,EAAA,EAAAjoI,IAAA,aAAAN,MAM3B,SAAWqgH,GAAgD,IAAAv4G,EAAA,KACnDuH,EAAQgxG,EAAIjyF,YAEY,IAA1B/rB,KAAKwQ,QAAQ41H,UACfpmI,KAAKqmI,mBAAmBr5H,GAExBhN,KAAKsmI,sBAAsBt5H,GAG7B,IAAM4nB,EAAK8+F,OAAA7+F,KAAK5S,WACV+c,EAAkBh/B,KAAKg/B,QAO7B,OANAh/B,KAAK46C,SAAS36C,SAAQ,SAAComB,EAAIjrB,GACzB,IAAM6jC,EAAKx5B,EAAKsuH,SAAS1tG,EAAIrZ,GACvBmyB,EAAiB,IAAN/jC,EAAU,EAAK,IAAM4jC,EACtCpK,EAAGF,IAAIuK,EAAIE,MAGNvK,IACR,CAAA32B,IAAA,wBAAAN,MAED,SAAsBqP,GACpB,IAAIu5H,EACJ,GAAiC,IAA7BvmI,KAAKwQ,QAAQg2H,aAAoB,CACnC,IAAMniI,EAASrE,KAAKwQ,QAAQg2H,aACtBC,EAAYz5H,EAAM0iH,cAAcrrH,OAAOA,GAC7CkiI,EAAiBE,EAAU1T,kBAE3BwT,EAAiBvmI,KAAK46C,SAGxB,IAAIrzC,EAAIwnC,IAAUvnC,EAAIunC,IAAU3nC,EAAQ,EAAGE,EAAS,EAEpDi/H,EAAetmI,SAAQ,SAAAomB,GACrB,IAAMvf,EAAMkG,EAAM83H,SAASz+G,GAC3B9e,EAAIN,KAAK0K,IAAIpK,EAAGT,EAAIS,GACpBC,EAAIP,KAAK0K,IAAInK,EAAGV,EAAIU,MAEtB++H,EAAetmI,SAAQ,SAAAomB,GACrB,IAAMvf,EAAMkG,EAAM83H,SAASz+G,GACOovG,EAAAR,eAAe5uG,GAA1CgvG,EAAUI,EAAVJ,WAAYD,EAAWK,EAAXL,YACnBhuH,EAAQH,KAAKyK,IAAItK,EAAON,EAAIS,EAAI8tH,EAAa9tH,GAC7CD,EAASL,KAAKyK,IAAIpK,EAAQR,EAAIU,EAAI4tH,EAAc5tH,MAGlDjF,QAAQyR,IAAI,wBAAyBzM,EAAGC,EAAGJ,EAAOE,EAAQi/H,GAE1DvmI,KAAKuH,EAAIA,EACTvH,KAAKwH,EAAIA,EACTxH,KAAKoH,MAAQA,EACbpH,KAAKsH,OAASA,IACf,CAAArJ,IAAA,qBAAAN,MAED,SAAmBqP,GACjB,IAAM7D,EAAM6D,EAAM2zH,YAGZ3yG,EAAW7kB,EAAI2L,cAAc,OACnC4xH,EAAwB14G,EAAS24G,QAAQC,QAAlCx/H,EAAKs/H,EAALt/H,MAAOE,EAAMo/H,EAANp/H,OACM0sH,EAAAh0H,KAAKwQ,QAAlB41H,EAASpS,EAAToS,UACPS,EAAeT,EAAUpqH,MAAM,KAC1B/X,KAAI,SAAC06G,EAAGvjH,GACP,OAAIujH,EAAEh2C,SAAS,KACNrpE,WAAWq/G,GAAK,KAAa,IAANvjH,EAAUgM,EAAQE,GAEzChI,WAAWq/G,MAEpBmoB,EAAAz4D,eAAAw4D,EAAA,GAPCt/H,EAACu/H,EAAA,GAAEt/H,EAACs/H,EAAA,GAQXvkI,QAAQyR,IAAI,qBAAsBzM,EAAGC,EAAGJ,EAAOE,GAC/CtH,KAAKuH,EAAIA,EACTvH,KAAKwH,EAAIA,EACTxH,KAAKoH,MAAQA,EACbpH,KAAKsH,OAASA,IACf,CAAArJ,IAAA,WAAAN,MAED,SAAS0oB,EAAgBrZ,GACvB,IAkCIiyB,EAlCyCqhG,EAAAtgI,KAAKwQ,QAA3C/P,EAAI6/H,EAAJ7/H,KAAMwrC,EAAUq0F,EAAVr0F,WAAYC,EAAUo0F,EAAVp0F,WAAYnN,EAAIuhG,EAAJvhG,KAErC8mG,EAAe74H,EAAM83H,SAASz+G,GAAvB9e,EAACs+H,EAADt+H,EAAGC,EAACq+H,EAADr+H,EAIJu/H,EAAU/mI,KAAKuH,EAAIvH,KAAKoH,MAAQ,EAChC4/H,EAAUhnI,KAAKwH,EAAIxH,KAAKsH,OAAS,EAEjC6kC,EAAM,CACVF,aACAC,WAAY,EACZI,GAAIy6F,EAAUx/H,EACdglC,GAAIy6F,EAAUx/H,EACdglC,GAAIxsC,KAAKoH,MACTqlC,GAAIzsC,KAAKsH,QAELw+H,EAAmB,EACnBC,EAAkB75F,EAElBQ,EAAa,WACjB,IAAMC,EAAOC,WACTT,EAAIG,GACJH,EAAII,GACJJ,EAAIK,GACJL,EAAIM,GACJN,EAAIF,WACJE,EAAID,YACNpoC,WAAW,KAAM,KACnBuiB,EAAG6H,aAAa,YAAY,SAADlO,OAAW2sB,EAAS,QAG3CxM,EAAOngC,KAAKozH,UAAU,CAACr0F,OAAMgL,SAAU2C,IAI7C,OAAQjsC,GACN,IAAK,KACHw+B,EAAKy0F,OAAA7+F,KAAK+N,OAAOuJ,EACb,CAAED,WAAY45F,GAAkBvqI,OAAAiE,OAAA,CAC9B0sC,WAAY65F,GAAoB5lG,IACtC,MACF,IAAK,MACHlB,EAAKy0F,OAAA7+F,KAAK+N,OAAOuJ,EACb,CAAED,WAAY65F,GAAiBxqI,OAAAiE,OAAA,CAC7B0sC,WAAY45F,GAAqB3lG,IACvC,MACF,QAEE,MAAM,IAAIi0B,MAAuB,iBAAAp0C,OAAAvf,IAGrC,OAAOw+B,MACRinG,EAtI0B,CAAQjT,uB,kiBCArC,IAAagU,UAAU,SAAAzT,GAAAzwD,UAAAkkE,EAAAzT,GAAA,IAAA/pD,EAAAy9D,eAAAD,GAAA,SAAAA,IAAA,OAAA/lE,gBAAA,KAAA+lE,GAAAx9D,EAAAxtE,MAAA,KAAAoM,WA8CpB,OA9CoBq5D,aAAAulE,EAAA,EAAAhpI,IAAA,aAAAN,MACrB,SAAWqgH,GAAgD,IAAAv4G,EAAA,KAEnDm1C,EAAW56C,KAAK46C,SAEhB5b,EAAUh/B,KAAKg/B,QAEfpK,EAAK8+F,OAAA7+F,KAAK5S,WAIhB,OAHA24B,EAAS36C,SAAQ,SAAComB,EAAIjrB,GACpBw5B,EAAGF,IAAIjvB,EAAKsuH,SAAS1tG,EAAI23F,GAAY,IAAN5iH,EAAU,EAAK,IAAM4jC,MAE/CpK,IACR,CAAA32B,IAAA,WAAAN,MAED,SAAS0oB,EAAgB23F,GAAgD,IAAAkjB,EAAAC,EAAAC,EAAAC,EAOnEpiG,EANEjyB,EAAQgxG,EAAIjyF,YAGmBioG,EAAAh0H,KAAKwQ,QAAnC/P,EAAIuzH,EAAJvzH,KAAM8b,EAAIy3G,EAAJz3G,KAAMxU,EAAQisH,EAARjsH,SAAUg3B,EAAIi1F,EAAJj1F,KACvB51B,EAAM6D,EAAM2zH,YAIZxgG,EAAOngC,KAAKozH,UAAU,CAACr0F,SAC7BooG,EAAuBnnI,KAAKonI,SAAS7qH,GAA9B2jB,EAAMinG,EAANjnG,OAAQl6B,EAAImhI,EAAJnhI,KACT66H,EAAahM,aAAa1rH,EAAKkd,EAAuC,aAAArG,OAAAqG,EAAGnT,IAAM,CAAC,QAEtF,OAAQzS,GACN,IAAK,KACHw+B,EAAKy0F,OAAA7+F,KAAK+N,OAAOi+F,GAAUK,EAAA,GAAAt3D,kBAAAs3D,EAAIl7H,EAAI,KAAAga,OAAQjY,EAAWm4B,EAAM,OAAA0pC,kBAAAs3D,EAAA,UAAe,GAACA,GAAI3lI,OAAAiE,QAAA2hI,EAAA,GAAAv3D,kBAAAu3D,EAACn7H,EAAO,GAAC4jE,kBAAAu3D,EAAC,UAAU,GAACA,GAAKhhG,IAC1G,MACF,IAAK,MACHlB,EAAKy0F,OAAA7+F,KAAK+N,OAAOi+F,GAAUO,EAAA,GAAAx3D,kBAAAw3D,EAAIp7H,EAAO,GAAC4jE,kBAAAw3D,EAAC,UAAU,GAACA,GAAC7lI,OAAAiE,QAAA6hI,EAAA,GAAAz3D,kBAAAy3D,EAAIr7H,EAAI,KAAAga,OAAQjY,EAAWm4B,EAAM,OAAA0pC,kBAAAy3D,EAAA,UAAe,GAACA,GAAKlhG,IAC1G,MACF,QAEE,MAAM,IAAIi0B,MAAuB,iBAAAp0C,OAAAvf,IAGrC,OAAOw+B,IACR,CAAAhhC,IAAA,WAAAN,MAED,SAAS4e,GACP,IAAMvW,EAAiB,SAATuW,GAA4B,UAATA,EAAoB,IAAM,IACrD2jB,EAAmB,UAAT3jB,GAA6B,WAATA,EAAqB,GAAK,EAC9D,MAAO,CAAC2jB,SAAQl6B,YACjBihI,EA9CoB,CAAQhU,uB,kiBCA/B,IAAaoU,QAAQ,SAAA7T,GAAAzwD,UAAAskE,EAAA7T,GAAA,IAAA/pD,EAAA69D,eAAAD,GAAA,SAAAA,IAAA,OAAAnmE,gBAAA,KAAAmmE,GAAA59D,EAAAxtE,MAAA,KAAAoM,WAyElB,OAzEkBq5D,aAAA2lE,EAAA,EAAAppI,IAAA,aAAAN,MACnB,SAAWqgH,GAAgD,IAAAv4G,EAAA,KAEnDm1C,EAAW56C,KAAK46C,SAEhB5b,EAAUh/B,KAAKg/B,QAEfpK,EAAK8+F,OAAA7+F,KAAK5S,WAIhB,OAHA24B,EAAS36C,SAAQ,SAAComB,EAAIjrB,GACpBw5B,EAAGF,IAAIjvB,EAAKsuH,SAAS1tG,EAAI23F,GAAY,IAAN5iH,EAAU,EAAK,IAAM4jC,MAE/CpK,IACR,CAAA32B,IAAA,WAAAN,MAED,SAAS0oB,EAAgB23F,GACvB,IAYIupB,EAAOC,EAsBPvoG,EAlCEjyB,EAAQgxG,EAAIjyF,YACZ5iB,EAAM6D,EAAM2zH,YAGS3M,EAAAh0H,KAAKwQ,QAAzB/P,EAAIuzH,EAAJvzH,KAAM8b,EAAIy3G,EAAJz3G,KAAMwiB,EAAIi1F,EAAJj1F,KAE0B0oG,EAAAz6H,EAAMumC,gBAArCm0F,EAAQD,EAAfrgI,MAAyBiE,EAASo8H,EAAjBngI,OACxBu+H,EAAe74H,EAAM83H,SAASz+G,GAAvB9e,EAACs+H,EAADt+H,EAAGC,EAACq+H,EAADr+H,EACwBiuH,EAAAR,eAAe5uG,GAA1CgvG,EAAUI,EAAVJ,WAAYD,EAAWK,EAAXL,YACbl1C,EAAU,GACV2gD,EAAahM,aAAa1rH,EAAKkd,EAAuC,aAAArG,OAAAqG,EAAGnT,IAAM,CAAC,QAGtF,OAAQqJ,GACN,IAAK,MACHgrH,EAAQ,EACRC,GAAShgI,EAAI4tH,EAAcl1C,EAC3B,MACF,IAAK,SACHqnD,EAAQ,EACRC,EAAQn8H,EAAY7D,EAAI04E,EACxB,MACF,IAAK,OACHqnD,GAAShgI,EAAI8tH,EAAan1C,EAC1BsnD,EAAQ,EACR,MACF,IAAK,QACHD,EAAQG,EAAWngI,EAAI24E,EACvBsnD,EAAQ,EACR,MACF,QACE,MAAM,IAAIpzE,MAAuB,iBAAAp0C,OAAAzD,IAKrC,IACIkyB,EAAYC,EADVvO,EAAOngC,KAAKozH,UAAU,CAACr0F,SAG7B,OAAQt+B,GACN,IAAK,KACHguC,EAAa,KAAO84F,EACpB74F,EAAa,KAAO84F,EACpBvoG,EAAKy0F,OAAA7+F,KAAK+N,OAAOi+F,EAAUtlI,OAAAiE,OAAA,CAAGivC,aAAYC,cAAevO,GACpD5kC,OAAAiE,OAAA,CAAAivC,WAAY,EAAGC,WAAY,GAAMvO,IACtC,MACF,IAAK,MACHsO,EAAa,KAAO84F,EACpB74F,EAAa,KAAO84F,EACpBvoG,EAAKy0F,OAAA7+F,KAAK+N,OAAOi+F,EAAUtlI,OAAAiE,OAAA,CAAGivC,WAAY,EAAGC,WAAY,GAAMvO,GAC1D5kC,OAAAiE,OAAA,CAAAivC,aAAYC,cAAevO,IAChC,MACF,QAEE,MAAM,IAAIi0B,MAAuB,iBAAAp0C,OAAAvf,IAGrC,OAAOw+B,MACRooG,EAzEkB,CAAQpU,uB,kiBCD7B,IAAa0U,cAAc,SAAAnU,GAAAzwD,UAAA4kE,EAAAnU,GAAA,IAAA/pD,EAAAm+D,eAAAD,GAAA,SAAAA,IAAA,OAAAzmE,gBAAA,KAAAymE,GAAAl+D,EAAAxtE,MAAA,KAAAoM,WA6BxB,OA7BwBq5D,aAAAimE,EAAA,EAAA1pI,IAAA,aAAAN,MACzB,SAAWqgH,GAAgD,IAAAv4G,EAAA,KAIhCuuH,EAAAh0H,KAAKwQ,QAAvBq3H,EAAc7T,EAAd6T,eACDC,EAAmB9nI,KAAK2xD,QAAQhxD,OAAOkD,UAAU+yB,OAClDvyB,OAAOwjI,GACP9U,aAICn+F,EAAK8+F,OAAA7+F,KAAK5S,WAIhB,OAHA6lH,EAAiB7nI,SAAQ,SAAComB,EAAIjrB,GAC5Bw5B,EAAGF,IAAIjvB,EAAKsuH,SAAS1tG,EAAI23F,GAAM,MAE1BppF,IACR,CAAA32B,IAAA,WAAAN,MAED,SAAS0oB,EAAgB23F,GAEvB,IAAgCsiB,EAAAtgI,KAAKwQ,QAA9Bu3H,EAAezH,EAAfyH,gBAAiBhpG,EAAIuhG,EAAJvhG,KAElB/xB,EAAQgxG,EAAIjyF,YACZ5iB,EAAM6D,EAAM2zH,YACZqH,EAAWnT,aAAa1rH,EAAKkd,EAAqC,WAAArG,OAAAqG,EAAGnT,IAAM,CAAC,cAE5EitB,EAAOngC,KAAKozH,UAAU,CAACr0F,SAC7B,OAAO20F,OAAA7+F,KAAK+N,OAAOolG,EAAU,CAAC5nG,QAAS,GAAE7kC,OAAAiE,OAAAjE,OAAAiE,OAAA,GAAM2gC,GAAI,CAAEC,QAAS2nG,SAC/DJ,EA7BwB,CAAQ1U,uB,kiBCAnC,IAAagV,kBAAkB,SAAAzU,GAAAzwD,UAAAklE,EAAAzU,GAAA,IAAA/pD,EAAAy+D,eAAAD,GAAA,SAAAA,IAAA,OAAA/mE,gBAAA,KAAA+mE,GAAAx+D,EAAAxtE,MAAA,KAAAoM,WAmD5B,OAnD4Bq5D,aAAAumE,EAAA,EAAAhqI,IAAA,aAAAN,MAC7B,SAAWqgH,GAAgD,IAAAv4G,EAAA,KAEnDm1C,EAAW56C,KAAK46C,SAEhB5b,EAAUh/B,KAAKg/B,QAEfpK,EAAK8+F,OAAA7+F,KAAK5S,WAQhB,OANA24B,EAAS36C,SAAQ,SAAComB,EAAIjrB,GACpBskH,OAAOr5F,aAAcg5G,eAAe,4DAADr/G,OAA8DqG,IACjG,IAAM4Y,EAAKx5B,EAAKsuH,SAAS1tG,EAAI23F,GAC7BppF,EAAGF,IAAIuK,EAAU,IAAN7jC,EAAU,EAAK,IAAM4jC,MAG3BpK,IACR,CAAA32B,IAAA,WAAAN,MAED,SAAS0oB,EAAoB23F,GAE3B,IAIIv0E,EAJExqC,EAAWe,KAAKf,SAEoB+0H,EAAAh0H,KAAKwQ,QAAxC23H,EAAQnU,EAARmU,SAAUC,EAAMpU,EAANoU,OAAQ7yH,EAAOy+G,EAAPz+G,QAASwpB,EAAIi1F,EAAJj1F,KAG5B1P,EAAQhJ,EAAGR,UAAUgR,MAAM,qBAE/B4S,EADEpa,EACUA,EAAM,GAAK,OAASA,EAAM,GAE1B,OAGd,IAAIsa,EAAgBw+F,EAAUv+F,EAAcu+F,EAC5C,GAAgB,MAAZA,GAA8B,MAAVC,EAAgB,CACtC,IAAMC,EAAQhiH,EAAGR,UAAUgR,MAAM4S,EAAU7hB,QAAQ,OAAQ,cAC3C,MAAZugH,IACFx+F,EAAgBrqC,WAAW+oI,EAAM,KAErB,MAAVD,IACFx+F,EAActqC,WAAW+oI,EAAM,KAInC,IAAMx+F,EAAa,CAACC,QAASH,GACvBI,EAAW,WACf,IAAM1qC,EAAMwqC,EAAWC,QAAQv0B,QAAQA,GACvC8Q,EAAGR,UAAY4jB,EAAU3lC,WAAW,OAAQzE,IAI9C,OAFA0qC,IAEO2pF,OAAA7+F,KAAKwL,GAAGwJ,EAAY,CAACC,QAASF,EAAa7K,OAAM9/B,WAAU8qC,iBACnEk+F,EAnD4B,CAAQhV,uB,kiBCDvC,IAAaqV,QAAQ,SAAA9U,GAAAzwD,UAAAulE,EAAA9U,GAAA,IAAA/pD,EAAA8+D,eAAAD,GAAA,SAAAA,IAAA,OAAApnE,gBAAA,KAAAonE,GAAA7+D,EAAAxtE,MAAA,KAAAoM,WAkBlB,OAlBkBq5D,aAAA4mE,EAAA,EAAArqI,IAAA,aAAAN,MACnB,SAAWqgH,GAAgD,IAAAv4G,EAAA,KAEnDm1C,EAAW56C,KAAK46C,SAEhB5b,EAAUh/B,KAAKg/B,QAEfpK,EAAK8+F,OAAA7+F,KAAK5S,WAIhB,OAHA24B,EAAS36C,SAAQ,SAAComB,EAAIjrB,GACpBw5B,EAAGF,IAAIjvB,EAAKsuH,SAAS1tG,EAAI23F,GAAY,IAAN5iH,EAAU,EAAK,IAAM4jC,MAE/CpK,IACR,CAAA32B,IAAA,WAAAN,MAED,SAAS0oB,EAAgB23F,GAEvB,IAAsBgW,EAAAh0H,KAAKwQ,QAApBxK,EAAIguH,EAAJhuH,KAAMrI,EAAKq2H,EAALr2H,MACb,OAAO+1H,OAAA7+F,KAAK5zB,IAAIolB,EAAMujD,kBAAA,GAAA5jE,EAAOrI,QAC9B2qI,EAlBkB,CAAQrV,uB,kiBCC7B,IAAauV,aAAa,SAAAhV,GAAAzwD,UAAAylE,EAAAhV,GAAA,IAAA/pD,EAAAg/D,eAAAD,GAAA,SAAAA,IAAA,OAAAtnE,gBAAA,KAAAsnE,GAAA/+D,EAAAxtE,MAAA,KAAAoM,WA+BvB,OA/BuBq5D,aAAA8mE,EAAA,EAAAvqI,IAAA,aAAAN,MACxB,SAAWqgH,GAAgD,IAAAv4G,EAAA,KAEnDm1C,EAAW56C,KAAK46C,SAEhB5b,EAAUh/B,KAAKg/B,QAEfpK,EAAK8+F,OAAA7+F,KAAK5S,WAIhB,OAHA24B,EAAS36C,SAAQ,SAAComB,EAAIjrB,GACpBw5B,EAAGF,IAAIjvB,EAAKsuH,SAAS1tG,EAAI23F,GAAY,IAAN5iH,EAAU,EAAK,IAAM4jC,MAE/CpK,IACR,CAAA32B,IAAA,WAAAN,MAED,SAAS0oB,EAAgB23F,GAEvB,IAA8CgW,EAAAh0H,KAAKwQ,QAA5CiyB,EAAgBuxF,EAAhBvxF,iBAAkBimG,EAAI1U,EAAJ0U,KAAMC,EAAK3U,EAAL2U,MAAO5pG,EAAIi1F,EAAJj1F,KAEhCoB,EAAOngC,KAAKozH,UAAU,CAACr0F,SAE7B2gF,OAAOr5F,aAAc07G,mBAAmB,oDAAD/hH,OAAsDqG,IAC7F,IAAIqc,EAAM,EACV,IACEA,EAAMrc,EAAGsc,iBACT,MAAMl8B,GACN,MAAM,IAAI2tD,MAAM,0CAADp0C,OAA2CvZ,EAAC,gBAAAuZ,OAAeqG,IAI5E,OAFAA,EAAG6H,aAAa,mBAAoBw6G,GAE7BhV,OAAA7+F,KAAK+N,OAAOvc,EAAI,CAACwc,iBAAkBJ,GAAoBC,EAAMimG,EAAQjmG,EAAMimG,GAC1EptI,OAAAiE,OAAAjE,OAAAiE,OAAA,GAAA2gC,GAAM,CAAA0C,iBAAkB,SACjC2lG,EA/BuB,CAAQvV,uB,kiBCClC,IAAa2V,WAAW,SAAApV,GAAAzwD,UAAA6lE,EAAApV,GAAA,IAAA/pD,EAAAo/D,eAAAD,GAAA,SAAAA,IAAA,OAAA1nE,gBAAA,KAAA0nE,GAAAn/D,EAAAxtE,MAAA,KAAAoM,WAgErB,OAhEqBq5D,aAAAknE,EAAA,EAAA3qI,IAAA,aAAAN,MACtB,SAAWqgH,GAET,IAAwCgW,EAAAh0H,KAAKwQ,QAAtC+L,EAAIy3G,EAAJz3G,KAAM8jB,EAAE2zF,EAAF3zF,GAAI16B,EAAMquH,EAANruH,OAAQw1B,EAAK64F,EAAL74F,MAAO4D,EAAIi1F,EAAJj1F,KAG1B/xB,EAAQgxG,EAAIjyF,YACZ5iB,EAAM6D,EAAM2zH,YAElB,GAAIxlG,EAAO,CACT,IAAM0E,EAAS7/B,KAAK82H,UAAU92H,KAAK+2H,cAAc,CAACv2F,MAAO,EAAGj5B,EAAG,EAAGC,EAAG,EAAGu3B,UACxE,OAAO20F,OAAA7+F,KAAKwL,GAAGl3B,EAAK02B,GAGtB,IAMIZ,EANAO,EAAkB,KAQtB,IANa,MAARjjB,GAA8B,MAAdA,EAAKikB,OAAyB,MAANH,GAA0B,MAAZA,EAAGG,SAC5DhB,EAAkB75B,GAKR,MAAR4W,GAAsB,MAAN8jB,EAAY,CAC9B,IAAMZ,EAAQlkC,OAAAiE,OAAA,GAA6BQ,KAAK+2E,OAAOx6D,IACjD06G,EAASj3H,KAAK82H,UAAU92H,KAAK+2H,cAAax7H,OAAAiE,OAAAjE,OAAAiE,OAAC,GAAIQ,KAAK+2E,OAAO12C,IAAG,CAAEtB,WAC/C,MAAnBS,IACFC,EAASD,gBAAkBA,EAC3By3F,EAAOz3F,gBAAkBA,GAE3BP,EAAKy0F,OAAA7+F,KAAK+N,OAAOz5B,EAAKs2B,EAAUw3F,QAE3B,GAAY,MAAR16G,EAAc,CACvB,IAAMy6G,EAAWh3H,KAAK82H,UAAU92H,KAAK+2H,cAAax7H,OAAAiE,OAAAjE,OAAAiE,OAAC,GAAIQ,KAAK+2E,OAAOx6D,IAAK,CAAEwiB,WACnD,MAAnBS,IACFw3F,EAASx3F,gBAAkBA,GAE7BP,EAAKy0F,OAAA7+F,KAAKtY,KAAKpT,EAAK6tH,OAEf,IAAU,MAAN32F,EAQT,MAAM,IAAI+zB,MAAiD,2CAAAp0C,OAAAhgB,OAP3D,IAAM8oI,EAAS9oI,KAAK82H,UAAU92H,KAAK+2H,cAAax7H,OAAAiE,OAAAjE,OAAAiE,OAAC,GAAIQ,KAAK+2E,OAAO12C,IAAG,CAAEtB,WAC/C,MAAnBS,IACFspG,EAAOtpG,gBAAkBA,GAE3BP,EAAKy0F,OAAA7+F,KAAKwL,GAAGl3B,EAAK2/H,GAMpB,OAAO7pG,IACR,CAAAhhC,IAAA,SAAAN,MAED,SAAOorI,GAOL,OANI3hE,WAAS2hE,EAASxhI,KACpBwhI,EAASxhI,EAAIvH,KAAKgpI,YAAYD,EAASxhI,IAErC6/D,WAAS2hE,EAASvhI,KACpBuhI,EAASvhI,EAAIxH,KAAKgpI,YAAYD,EAASvhI,IAElCuhI,IACR,CAAA9qI,IAAA,cAAAN,MAED,SAAY4qB,GACV,OAAOA,EAAIX,QAAQ,IAAK,UAAUA,QAAQ,IAAK,KAAKA,QAAQ,SAAU,SACvEghH,EAhEqB,CAAQ3V,uB,kiBC6BhC,IAAagW,gBAAgB,SAAAC,GAAAnmE,UAAAkmE,EAAAC,GAAA,IAAAz/D,EAAA0/D,eAAAF,GAC3B,SAAAA,EAAY5mB,GAC+E,IAA/E8O,EAAA9oH,UAAA/M,OAAA,QAAA6D,IAAAkJ,UAAA,GAAAA,UAAA,GAA6E,GAAE,OAAA64D,gBAAA,KAAA+nE,GACnFx/D,EAAA/tE,KAAA,KAAA2mH,EAAa8O,GA4CpB,OA3CAzvD,aAAAunE,EAAA,EAAAhrI,IAAA,kBAAAN,MAED,WACE,MAAO,CAEL,IAAI80H,YAAY,mBAAoBc,UACpC,IAAId,YAAY,qBAAsBkB,YACtC,IAAIlB,YAAY,qBAAsBoB,YACtC,IAAIpB,YAAY,oBAAqBwB,WACrC,IAAIxB,YAAY,mBAAoB4B,UACpC,IAAI5B,YAAY,mBAAoB8C,UACpC,IAAI9C,YAAY,mBAAoBkE,UACpC,IAAIlE,YAAY,mBAAoByE,UACpC,IAAIzE,YAAY,kBAAmBgO,SACnC,IAAIhO,YAAY,mBAAoBuO,UACpC,IAAIvO,YAAY,0BAA2B+O,iBAC3C,IAAI/O,YAAY,oBAAqBkT,WACrC,IAAIlT,YAAY,oBAAqBwU,WACrC,IAAIxU,YAAY,kBAAmB4U,SACnC,IAAI5U,YAAY,wBAAyBkV,eACzC,IAAIlV,YAAY,kBAAmB6V,SACnC,IAAI7V,YAAY,qBAAsBmW,YAGtC,IAAInW,YAAY,iBAAkB0M,UAClC,IAAI1M,YAAY,0BAA2BwV,mBAG3C,IAAIxV,YAAY,wBAAyBmP,iBACzC,IAAInP,YAAY,qBAAsBuT,cACtC,IAAIvT,YAAY,qBAAsB+V,cAGtC,IAAI/V,YAAY,yBAA0ByT,iBAG1C,IAAIzT,YAAY,yBAA0B0S,eAE7C,CAAAlnI,IAAA,WAAAN,MAED,SAAS20H,GAEP,OAAAb,KAAAjuD,gBAAAylE,EAAAztI,WAAA,iBAAAE,KAAA,KAAsB42H,OACvB2W,EA/C0B,CAAQnX,a,8rDChCrC,IAAasX,YAAY,SAAA5/D,GAAAzG,UAAAqmE,EAAA5/D,GAAA,IAAAC,EAAA4/D,eAAAD,GAAA,SAAAA,IAAA,OAAAloE,gBAAA,KAAAkoE,GAAA3/D,EAAAxtE,MAAA,KAAAoM,WAGtB,OAHsBq5D,aAAA0nE,EAAA,EAAAnrI,IAAA,eAAAN,MACvB,WACE,OAAO,IAAI2rI,kBAAkBtpI,UAC9BopI,EAHsB,CAAQlgE,SAMpBogE,kBAAiB,WAQ5B,SAAAA,EAAYlG,GAAwBliE,gBAAA,KAAAooE,GAL5B,KAASC,UAAgB,KACzB,KAAAC,UAAiC,IAAI5yH,IAErC,KAAA6yH,WAAsC,IAAI7yH,IAGhD5W,KAAKupI,UAAYnG,EAgElB,OA/DA1hE,aAAA4nE,EAAA,EAAArrI,IAAA,YAAAN,MAED,SAAU+sH,GACR,GAAIA,EAAWgf,kBAAmB,CAChC,IAAMhhI,EAAQ1I,KAAKupI,UAAUI,aAAajf,EAAWzmD,KACrD,GAAa,MAATv7D,EACF,MAAM,IAAI0rD,MAAM,WAADp0C,OAAY0qG,EAAWzmD,IAAiB,gBACxD,IAEuBiD,EAFvBK,EAAAqiE,6BAEkBlhI,GAAK,IAAxB,IAA0B6+D,EAAA7qE,MAAAwqE,EAAAK,EAAAppE,KAAAspE,MAAA,KAAfhnE,EAAIymE,EAAAvpE,MACbqC,KAAKypI,WAAWxoI,IAAIR,EAAKynE,SAAUznE,IACpC,MAAAwlD,GAAAshB,EAAA9gE,EAAAw/C,GAAA,QAAAshB,EAAAO,IACDwhE,EAAkBt7C,OAAO9nC,MAAM,kBAAkBlmC,OAAA0qG,EAAWzmD,IAAG,sCAAAjkD,OACtCtX,EAAMzE,KAAI,SAAArG,GAAC,OAAIA,EAAEsqE,YAAUrgD,KAAK,YACpD,CAEL,IAAMgiH,EAAO7pI,KAAKupI,UAAUhsI,IAAImtH,EAAWvhE,OAC3C,GAAY,MAAR0gF,EACF,MAAM,IAAIz1E,MAAM,cAADp0C,OAAe0qG,EAAWvhE,MAAmB,gBAG9DnpD,KAAKwpI,UAAUvoI,IAAIypH,EAAWj/B,GAAIo+C,EAAK3hE,UAEvCloE,KAAKypI,WAAWxoI,IAAI4oI,EAAK3hE,SAAU2hE,GACnCP,EAAkBt7C,OAAO9nC,MAAsB,gBAAAlmC,OAAA0qG,EAAWvhE,MAAY,QAAAnpC,OAAA0qG,EAAWj/B,GAAmB,mBAEtG,OAAOzrF,OACR,CAAA/B,IAAA,eAAAN,MAED,SAAaggH,GAAiB,IAAAl4G,EAAA,KAE5B,OADAk4G,EAAQ19G,SAAQ,SAAAyqH,GAAU,OAAIjlH,EAAKg+H,UAAU/Y,MACtC1qH,OACR,CAAA/B,IAAA,MAAAN,MAED,SAAIT,GACF,IAAA4sI,EAAyB9pI,KAAK6jI,QAAQ3mI,GAA/Bf,EAAM2tI,EAAN3tI,OAAQixD,EAAM08E,EAAN18E,OACf,OAAQA,GACN,IAAK,KACH,OAAOjxD,EACT,IAAK,YACH,MAAM,IAAIi4D,MAAc,QAAAp0C,OAAA9iB,EAAkB,gBAC5C,IAAK,eACH,MAAM,IAAIk3D,MAAc,QAAAp0C,OAAA9iB,EAAiD,kDAE9E,CAAAe,IAAA,UAAAN,MAED,SAAQT,GACN,GAAI8C,KAAKwpI,UAAUl6G,IAAIpyB,GAAO,CAC5B,IAAM6sI,EAAQ/pI,KAAKwpI,UAAUjsI,IAAIL,GAC3B8sI,EAAShqI,KAAKypI,WAAWlsI,IAAIwsI,GAEnC,OADArqB,OAAiB,MAAVsqB,GACA,CAAC7tI,OAAQ6tI,EAAQ58E,OAAQ,MAIlC,IAAMjxD,EAAS6D,KAAKupI,UAAUhsI,IAAIL,GAClC,OAAc,MAAVf,EACK,CAACA,YAAQgD,EAAWiuD,OAAQ,kBAEOjuD,GAAxCa,KAAKypI,WAAWlsI,IAAIpB,EAAO+rE,UACtB,CAAC/rE,YAAQgD,EAAWiuD,OAAQ,gBAE9B,CAACjxD,OAAQA,EAAQixD,OAAQ,UACjCk8E,EAzE2B,GACJA,kBAAMt7C,OAAWtgB,cAAcmhB,UAAU,qB,w6LCgC7D,SAAUo7C,eAAenoE,GAC7B,IAAMjpB,EAASipB,EAAQjpB,OACvB,MAAO,CAELA,EAAOqxF,gBAAgBC,KACvBtxF,EAAOqxF,gBAAgBE,QACvBvxF,EAAOqxF,gBAAgBG,OACvBxxF,EAAOqxF,gBAAgBI,MACvBzxF,EAAOqxF,gBAAgBK,MACvB1xF,EAAOqxF,gBAAgBM,MACvB3xF,EAAOqxF,gBAAgBO,SACvB5xF,EAAOqxF,gBAAgBQ,MACvB7xF,EAAOqxF,gBAAgBS,YAGvB9xF,EAAOqxF,gBAAgBU,MACvB/xF,EAAOqxF,gBAAgB99E,YACvBvT,EAAOqxF,gBAAgBW,QACvBhyF,EAAOqxF,gBAAgBY,MAGvBjyF,EAAOqxF,gBAAgBa,UACvBlyF,EAAOqxF,gBAAgBc,SAGvBnyF,EAAOqxF,gBAAgBe,UACvBpyF,EAAOqxF,gBAAgBgB,SAGvBryF,EAAOqxF,gBAAgBiB,WACvBtyF,EAAOqxF,gBAAgBkB,UAGvBvyF,EAAOqxF,gBAAgBmB,OAGvBxyF,EAAOqxF,gBAAgBoB,cACvBzyF,EAAOqxF,gBAAgBqB,aAGvB1yF,EAAOqxF,gBAAgBsB,cACvB3yF,EAAOqxF,gBAAgBuB,aAGvB5yF,EAAOqxF,gBAAgBwB,aACvB7yF,EAAOqxF,gBAAgByB,iBAGvB9yF,EAAOqxF,gBAAgB0B,YAGvB/yF,EAAOqxF,gBAAgB2B,cACvBhzF,EAAOqxF,gBAAgB4B,gBACvBjzF,EAAOqxF,gBAAgB6B,qB,kiBC9FpB,IAAMC,iBAAmBjsB,aAAa5sG,OAAO,IAGvC84H,gBAAsD,SAAA1rB,GAAAx9C,UAAAkpE,EAAA1rB,GAAA,IAAA92C,EAAAyiE,eAAAD,GACjE,SAAYA,EAAA/uI,EAAc2mE,EAAqB0oB,EAAoBqxB,EAAsBptG,GAAwB,OAAA0wD,gBAAA,KAAA+qE,GACzGxiE,EAAA/tE,KAAA,MAAEwB,OAAM2mE,cAAa85C,QAAS,GAAIpxB,aAAYqxB,cAAcptG,GAUnE,OATAkxD,aAAAuqE,EAAA,EAAAhuI,IAAA,QAAAN,MAED,WACE,OAAO,IAAIsuI,EAAgBjsI,KAAK9C,KAAM8C,KAAK6jE,YAAa7jE,KAAKusF,WAAYvsF,KAAK49G,WAC5EriH,OAAAiE,OAAA,CAAA0T,GAAIlT,KAAKkT,GACTvS,OAAQX,KAAKW,OAAOsB,QACpBnD,OAAQkB,KAAKlB,OAAOmD,SACjB2wG,YAAUiM,OAAK7+G,KAAKwQ,QAAS,CAAC,KAAM,SAAU,kBAEpDy7H,EAZgE,CAAQjsB,e,kiBCA3E,IAAamsB,eACX,SAAArqB,GAAA/+C,UAAAopE,EAAArqB,GAAA,IAAAr4C,EAAA2iE,eAAAD,GAEA,SAAAA,EAAsBhvB,GAA6B,OAAAj8C,gBAAA,KAAAirE,GAAA1iE,EAAA/tE,KAAA,KAC3CyhH,GAMP,OALAz7C,aAAAyqE,EAAA,EAAAluI,IAAA,SAAAN,MAED,SAAOqgH,EAAuCxtG,GAC5C,IAAoD67H,EAAArsI,KAAKm9G,KAAlDjgH,EAAImvI,EAAJnvI,KAAM2mE,EAAWwoE,EAAXxoE,YAAa0oB,EAAU8/C,EAAV9/C,WAAYqxB,EAAUyuB,EAAVzuB,WACtC,OAAO,IAAIquB,gBAAgB/uI,EAAM2mE,EAAa0oB,EAAYqxB,EAAYptG,OACvE27H,EATD,CAAQtqI,c,kiBCJH,IAAMyqI,iBAAmBN,iBAAiB74H,OAAO,CAItDnN,KAAMyiF,EAAE5Y,SACH4H,SAAS,wBACdl7D,KAAMksE,EAAEe,MAAM,CAACf,EAAE5Y,SAAU4Y,EAAE1Y,WACxBoH,WACO,WAAC,MACRM,SAAS,mCACdp3C,GAAIooD,EAAEe,MAAM,CAACf,EAAE5Y,SAAU4Y,EAAE1Y,WACtBoH,WACO,WAAC,MACRM,SAAS,iCACd14C,KAAM0pD,EAAE5Y,SAAQ,WACH,cACR4H,SAAS,wDAGH80D,eAAe,SAAAC,GAAAzpE,UAAAwpE,EAAAC,GAAA,IAAA/iE,EAAAgjE,eAAAF,GAC1B,SAAAA,IAAA,OAAArrE,gBAAA,KAAAqrE,GACQ9iE,EAAA/tE,KAAA,MACJwB,KAAM,SACN2mE,YAAa,cACb85C,QAAS,GACTpxB,WAAY,MACZqxB,WAAY0uB,mBAEf,OAAA5qE,aAAA6qE,GATyB,CAAQJ,gB,kiBCnB7B,IAAMO,eAAiBV,iBAAiB74H,OAAO,CACpD1S,KAAMgoF,EAAC,QAAM,CAAC,KAAM,QAAO,WACd,MACRhR,SAAS,wCACd14C,KAAM0pD,EAAE5Y,SAAQ,WACH,cACR4H,SAAS,wDAGH7sC,aAAa,SAAA4hG,GAAAzpE,UAAAn4B,EAAA4hG,GAAA,IAAA/iE,EAAAkjE,eAAA/hG,GACxB,SAAAA,IAAA,OAAAs2B,gBAAA,KAAAt2B,GACQ6+B,EAAA/tE,KAAA,MACJwB,KAAM,OACN2mE,YAAa,cACb85C,QAAS,GACTpxB,WAAY,MACZqxB,WAAY8uB,iBAEf,OAAAhrE,aAAA92B,GATuB,CAAQuhG,gB,kiBCT3B,IAAMS,eAAiBZ,iBAAiB74H,OAAO,CACpD1S,KAAMgoF,EAAC,QAAM,CAAC,KAAM,QAAO,WACd,MACRhR,SAAS,4CACdl7D,KAAMksE,EAAM,QAAC,CAAC,SAAU,MAAO,OAAQ,UAAS,WACnC,UACRhR,SAAS,oCACd14C,KAAM0pD,EAAE5Y,SAAQ,WACH,cACR4H,SAAS,wDAGH72C,aAAa,SAAA4rG,GAAAzpE,UAAAniC,EAAA4rG,GAAA,IAAA/iE,EAAAojE,eAAAjsG,GACxB,SAAAA,IAAA,OAAAsgC,gBAAA,KAAAtgC,GACQ6oC,EAAA/tE,KAAA,MACJwB,KAAM,OACN2mE,YAAa,cACb85C,QAAS,GACTpxB,WAAY,MACZqxB,WAAYgvB,iBAEf,OAAAlrE,aAAA9gC,GATuB,CAAQurG,gB,kiBCZ3B,IAAMW,eAAiBd,iBAAiB74H,OAAO,CACpDoJ,KAAMksE,EAAErqF,OAAO,CACbmJ,EAAGkhF,EAAE1Y,SAASsH,GAAGoR,EAAE5Y,UAAUqH,WAC7B1vE,EAAGihF,EAAE1Y,SAASsH,GAAGoR,EAAE5Y,UAAUqH,aAC5BA,WACEO,SAAS,oFACdp3C,GAAIooD,EAAErqF,OAAO,CACXmJ,EAAGkhF,EAAE1Y,SAASsH,GAAGoR,EAAE5Y,UAAUqH,WAC7B1vE,EAAGihF,EAAE1Y,SAASsH,GAAGoR,EAAE5Y,UAAUqH,aAC5BA,WACEO,SAAS,kFACd14C,KAAM0pD,EAAE5Y,SAAQ,WACH,cACR4H,SAAS,wDAGHvsC,aAAa,SAAAshG,GAAAzpE,UAAA73B,EAAAshG,GAAA,IAAA/iE,EAAAsjE,eAAA7hG,GACxB,SAAAA,IAAA,OAAAg2B,gBAAA,KAAAh2B,GACQu+B,EAAA/tE,KAAA,MACJwB,KAAM,OACN2mE,YAAa,cACb85C,QAAS,GACTpxB,WAAY,MACZqxB,WAAYkvB,iBAEf,OAAAprE,aAAAx2B,GATuB,CAAQihG,gB,kiBChB3B,IAAMa,eAAiBhB,iBAAiB74H,OAAO,CACpD1S,KAAMgoF,EAAC,QAAM,CAAC,KAAM,QAAO,WACd,MACRhR,SAAS,4CACd14C,KAAM0pD,EAAE5Y,SAAQ,WACH,YACR4H,SAAS,sDAGHh3C,aAAa,SAAA+rG,GAAAzpE,UAAAtiC,EAAA+rG,GAAA,IAAA/iE,EAAAwjE,eAAAxsG,GACxB,SAAAA,IAAA,OAAAygC,gBAAA,KAAAzgC,GACQgpC,EAAA/tE,KAAA,MACJwB,KAAM,OACN2mE,YAAa,cACb85C,QAAS,GACTpxB,WAAY,MACZqxB,WAAYovB,iBAEf,OAAAtrE,aAAAjhC,GATuB,CAAQ0rG,gB,kiBCT3B,IAAMe,eAAiBlB,iBAAiB74H,OAAO,CACpD1S,KAAMgoF,EAAC,QAAM,CAAC,KAAM,QAAO,WACd,MACRhR,SAAS,8CACdqB,OAAQ2P,EAAC,QAAM,CAAC,OAAQ,SAAQ,WACnB,QACRhR,SAAS,uCACd8oD,YAAa93C,EAAE1Y,SAAQ,WACV,IACR0H,SAAS,0DACd14C,KAAM0pD,EAAE5Y,SAAQ,WACH,cACR4H,SAAS,wDAGH01D,aAAa,SAAAX,GAAAzpE,UAAAoqE,EAAAX,GAAA,IAAA/iE,EAAA2jE,eAAAD,GACxB,SAAAA,IAAA,OAAAjsE,gBAAA,KAAAisE,GACQ1jE,EAAA/tE,KAAA,MACJwB,KAAM,OACN2mE,YAAa,YACb85C,QAAS,GACTpxB,WAAY,OACZqxB,WAAYsvB,iBAEf,OAAAxrE,aAAAyrE,GATuB,CAAQhB,gB,kiBCf3B,IAAMkB,cAAgBrB,iBAAiB74H,OAAO,CACnD1S,KAAMgoF,EAAC,QAAM,CAAC,KAAM,QAAO,WACd,MACRhR,SAAS,4CACdl7D,KAAMksE,EAAM,QAAC,CAAC,SAAU,MAAO,OAAQ,UAAS,WACnC,UACRhR,SAAS,oCACd14C,KAAM0pD,EAAE5Y,SAAQ,WACH,cACR4H,SAAS,wDAGH61D,YAAY,SAAAd,GAAAzpE,UAAAuqE,EAAAd,GAAA,IAAA/iE,EAAA8jE,eAAAD,GACvB,SAAAA,IAAA,OAAApsE,gBAAA,KAAAosE,GACQ7jE,EAAA/tE,KAAA,MACJwB,KAAM,MACN2mE,YAAa,cACb85C,QAAS,GACTpxB,WAAY,MACZqxB,WAAYyvB,gBAEf,OAAA3rE,aAAA4rE,GATsB,CAAQnB,gB,kiBCT1B,IAAMqB,gBAAkBxB,iBAAiB74H,OAAO,CACrDoJ,KAAMksE,EAAM,QAAC,CAAC,SAAU,MAAO,OAAQ,UAAS,WACnC,UACRhR,SAAS,oCACd14C,KAAM0pD,EAAE5Y,SAAQ,WACH,cACR4H,SAAS,wDAGHg2D,cAAc,SAAAvrB,GAAAn/C,UAAA0qE,EAAAvrB,GAAA,IAAAz4C,EAAAikE,eAAAD,GACzB,SAAAA,IAAA,OAAAvsE,gBAAA,KAAAusE,GACQhkE,EAAA/tE,KAAA,MACJwB,KAAM,QACN2mE,YAAa,cACb85C,QAAS,GACTpxB,WAAY,MACZqxB,WAAY4vB,kBAWf,OATA9rE,aAAA+rE,EAAA,EAAAxvI,IAAA,cAAAN,MAED,SAA8BqgH,EACAxtG,GAC5B,IAAO0C,EAAkC1C,EAAlC0C,GAAIvS,EAA8B6P,EAA9B7P,OAAQ7B,EAAsB0R,EAAtB1R,OAAQyd,EAAc/L,EAAd+L,KAAMwiB,EAAQvuB,EAARuuB,KACjC,OAAOiiF,IAAIC,UACNr2G,IAAI,OACJ4F,MAAM,CAAC0C,KAAIvS,SAAQ7B,SAAQyd,OAAM9b,KAAM,KAAMs+B,SAC7C4xD,YACN88C,EAlBwB,CAAQ5rB,mB,kiBCT5B,IAAM8rB,iBAAmB3B,iBAAiB74H,OAAO,CACtDoJ,KAAMksE,EAAM,QAAC,CAAC,SAAU,MAAO,OAAQ,UAAS,WACnC,UACRhR,SAAS,oCACd14C,KAAM0pD,EAAE5Y,SAAQ,WACH,cACR4H,SAAS,wDAGHm2D,eAAe,SAAA1rB,GAAAn/C,UAAA6qE,EAAA1rB,GAAA,IAAAz4C,EAAAokE,eAAAD,GAC1B,SAAAA,IAAA,OAAA1sE,gBAAA,KAAA0sE,GACQnkE,EAAA/tE,KAAA,MACJwB,KAAM,SACN2mE,YAAa,cACb85C,QAAS,GACTpxB,WAAY,MACZqxB,WAAY+vB,mBAWf,OATAjsE,aAAAksE,EAAA,EAAA3vI,IAAA,cAAAN,MAED,SAA8BqgH,EACAxtG,GAC5B,IAAO0C,EAAkC1C,EAAlC0C,GAAIvS,EAA8B6P,EAA9B7P,OAAQ7B,EAAsB0R,EAAtB1R,OAAQyd,EAAc/L,EAAd+L,KAAMwiB,EAAQvuB,EAARuuB,KACjC,OAAOiiF,IAAIC,UACNr2G,IAAI,OACJ4F,MAAM,CAAC0C,KAAIvS,SAAQ7B,SAAQyd,OAAM9b,KAAM,MAAOs+B,SAC9C4xD,YACNi9C,EAlByB,CAAQ/rB,mB,kiBCZ7B,IAAMisB,eAAiB9B,iBAAiB74H,OAAO,CACpD1S,KAAMgoF,EAAC,QAAM,CAAC,KAAM,QAAO,WACd,MACRhR,SAAS,4CACdl7D,KAAMksE,EAAM,QAAC,CAAC,SAAU,MAAO,OAAQ,UAAS,WACnC,UACRhR,SAAS,yCACd14C,KAAM0pD,EAAE5Y,SAAQ,WACH,cACR4H,SAAS,wDAGH54C,aAAa,SAAA2tG,GAAAzpE,UAAAlkC,EAAA2tG,GAAA,IAAA/iE,EAAAskE,eAAAlvG,GACxB,SAAAA,IAAA,OAAAqiC,gBAAA,KAAAriC,GACQ4qC,EAAA/tE,KAAA,MACJwB,KAAM,OACN2mE,YAAa,cACb85C,QAAS,GACTpxB,WAAY,MACZqxB,WAAYkwB,iBAEf,OAAApsE,aAAA7iC,GATuB,CAAQstG,gB,kiBCZ3B,IAAM6B,sBAAwBhC,iBAAiB74H,OAAO,CAC3D1S,KAAMgoF,EAAC,QAAM,CAAC,KAAM,SAAQ,WACf,MACRhR,SAAS,6CACd1uE,KAAM0/E,EAAE5Y,SAAQ,WACH,WACR4H,SAAS,oCACd14C,KAAM0pD,EAAE5Y,SAAQ,WACH,cACR4H,SAAS,wDAGHz1C,oBAAoB,SAAAwqG,GAAAzpE,UAAA/gC,EAAAwqG,GAAA,IAAA/iE,EAAAwkE,eAAAjsG,GAC/B,SAAAA,IAAA,OAAAk/B,gBAAA,KAAAl/B,GACQynC,EAAA/tE,KAAA,MACJwB,KAAM,cACN2mE,YAAa,cACb85C,QAAS,GACTpxB,WAAY,MACZqxB,WAAYowB,wBAEf,OAAAtsE,aAAA1/B,GAT8B,CAAQmqG,gB,kiBCTlC,IAAM+B,mBAAqBlC,iBAAiB74H,OAAO,CACxD5L,EAAGkhF,EAAE1Y,SAASsH,GAAGoR,EAAE5Y,UAAUqH,WAC7B1vE,EAAGihF,EAAE1Y,SAASsH,GAAGoR,EAAE5Y,UAAUqH,WAC7Bn4C,KAAM0pD,EAAE5Y,SAAQ,WACH,cACR4H,SAAS,wDAGH33C,iBAAiB,SAAAoiF,GAAAn/C,UAAAjjC,EAAAoiF,GAAA,IAAAz4C,EAAA0kE,eAAAruG,GAC5B,SAAAA,IAAA,OAAAohC,gBAAA,KAAAphC,GACQ2pC,EAAA/tE,KAAA,MACJwB,KAAM,WACN2mE,YAAa,cACb85C,QAAS,GACTpxB,WAAY,MACZqxB,WAAYswB,qBAWf,OATAxsE,aAAA5hC,EAAA,EAAA7hC,IAAA,cAAAN,MAED,SAA8BqgH,EACAxtG,GAC5B,IAAO0C,EAAkC1C,EAAlC0C,GAAIvS,EAA8B6P,EAA9B7P,OAAQ7B,EAAsB0R,EAAtB1R,OAAQyI,EAAciJ,EAAdjJ,EAAGC,EAAWgJ,EAAXhJ,EAAGu3B,EAAQvuB,EAARuuB,KACjC,OAAOiiF,IAAIC,UACNr2G,IAAI,QACJ4F,MAAM,CAAC0C,KAAIvS,SAAQ7B,SAAQyd,KAAM,CAAChV,IAAGC,KAAIu3B,SACzC4xD,YACN7wD,EAlB2B,CAAQ+hF,mB,kiBCR/B,IAAMusB,iBAAmBpC,iBAAiB74H,OAAO,CACtD5L,EAAGkhF,EAAE1Y,SAASsH,GAAGoR,EAAE5Y,UAAUqH,WAC7B1vE,EAAGihF,EAAE1Y,SAASsH,GAAGoR,EAAE5Y,UAAUqH,WAC7Bn4C,KAAM0pD,EAAE5Y,SAAQ,WACH,cACR4H,SAAS,wDAGH/3C,eAAe,SAAAwiF,GAAAn/C,UAAArjC,EAAAwiF,GAAA,IAAAz4C,EAAA4kE,eAAA3uG,GAC1B,SAAAA,IAAA,OAAAwhC,gBAAA,KAAAxhC,GACQ+pC,EAAA/tE,KAAA,MACJwB,KAAM,SACN2mE,YAAa,cACb85C,QAAS,GACTpxB,WAAY,MACZqxB,WAAYwwB,mBAWf,OATA1sE,aAAAhiC,EAAA,EAAAzhC,IAAA,cAAAN,MAED,SAA8BqgH,EACAxtG,GAC5B,IAAO0C,EAAkC1C,EAAlC0C,GAAIvS,EAA8B6P,EAA9B7P,OAAQ7B,EAAsB0R,EAAtB1R,OAAQyI,EAAciJ,EAAdjJ,EAAGC,EAAWgJ,EAAXhJ,EAAGu3B,EAAQvuB,EAARuuB,KACjC,OAAOiiF,IAAIC,UACNr2G,IAAI,QACJ4F,MAAM,CAAC0C,KAAIvS,SAAQ7B,SAAQuhC,GAAI,CAAC94B,IAAGC,KAAIu3B,SACvC4xD,YACNjxD,EAlByB,CAAQmiF,mB,kiBCV7B,IAAMysB,gBAAkBtC,iBAAiB74H,OAAO,CACrD1S,KAAMgoF,EAAC,QAAM,CAAC,KAAM,QAAO,WACd,MACRhR,SAAS,oDAOdxrC,WAAYw8C,EAAE1Y,SAAQ,WACT,GACR0H,SAAS,2DACdvrC,WAAYu8C,EAAE1Y,SAAQ,WACT,KACR0H,SAAS,6DACd14C,KAAM0pD,EAAE5Y,SAAQ,WACH,cACR4H,SAAS,wDAGHrsC,cAAc,SAAAohG,GAAAzpE,UAAA33B,EAAAohG,GAAA,IAAA/iE,EAAA8kE,eAAAnjG,GACzB,SAAAA,IAAA,OAAA81B,gBAAA,KAAA91B,GACQq+B,EAAA/tE,KAAA,MACJwB,KAAM,QACN2mE,YAAa,cACb85C,QAAS,GACTpxB,WAAY,MACZqxB,WAAY0wB,kBAEf,OAAA5sE,aAAAt2B,GATwB,CAAQ+gG,gB,kiBCjB5B,IAAMqC,wBAA0B1xB,cAAc3pG,OAAO,CAC1DoJ,KAAMksE,EAAM,QAAC,CAAC,SAAU,MAAO,OAAQ,UAAS,WACnC,UACRhR,SAAS,oCACd14C,KAAM0pD,EAAE5Y,SAAQ,WACH,cACR4H,SAAS,wDAGHg3D,sBAAsB,SAAAvsB,GAAAn/C,UAAA0rE,EAAAvsB,GAAA,IAAAz4C,EAAAilE,eAAAD,GACjC,SAAAA,IAAA,OAAAvtE,gBAAA,KAAAutE,GACQhlE,EAAA/tE,KAAA,MACJwB,KAAM,gBACN2mE,YAAa,aACb85C,QAAS,GACTpxB,WAAY,sBACZqxB,WAAY4wB,0BAgCf,OA9BA9sE,aAAA+sE,EAAA,EAAAxwI,IAAA,cAAAN,MAED,SAAYqgH,EACAxtG,GACV,IAAO0C,EAAkC1C,EAAlC0C,GAAIvS,EAA8B6P,EAA9B7P,OAAQ7B,EAAsB0R,EAAtB1R,OAAQyd,EAAc/L,EAAd+L,KAAMwiB,EAAQvuB,EAARuuB,KAS3ByF,EAAcw8E,IAAIC,UACnBr2G,IAAI,QACJrB,UAAU,mBACViH,MAAM,CAAC/P,KAAM,KAAMs+B,SACnB4xD,QAECg+C,EAAU3tB,IAAIC,UACfr2G,IAAI,QACJrB,UAAU,iBACViH,MAAM,CAAC+L,OAAMwiB,SACb4xD,QAEL,OAAO80B,KAAKxE,UACPzwG,MAAM,CAAC0C,KAAIvS,SAAQ7B,WACnBiH,OAAOy+B,GACPz+B,OAAO4oI,GACPh+C,YACN89C,EAvCgC,CAAQ5sB,mB,kiBCZpC,IAAM+sB,sBAAwB5C,iBAAiB74H,OAAO,CAC3DsvB,iBAAkBgmD,EAAS,aACf,YAAC,GACRhR,SAAS,gDACdqqD,QAASr5C,EAAE1Y,SAAQ,WACN,GACR0H,SAAS,4CACdj1C,YAAaimD,EAAE1Y,SAAQ,WACV,GACR0H,SAAS,0CACd14C,KAAM0pD,EAAE5Y,SAAQ,WACH,cACR4H,SAAS,wDAGHo3D,oBAAoB,SAAArC,GAAAzpE,UAAA8rE,EAAArC,GAAA,IAAA/iE,EAAAqlE,eAAAD,GAC/B,SAAAA,IAAA,OAAA3tE,gBAAA,KAAA2tE,GACQplE,EAAA/tE,KAAA,MACJwB,KAAM,cACN2mE,YAAa,YACb85C,QAAS,GACTpxB,WAAY,OACZqxB,WAAYgxB,wBAOf,OALAltE,aAAAmtE,EAAA,EAAA5wI,IAAA,SAAAN,MAED,SAAOqgH,EAAuCxtG,GAC5C,IAAoD67H,EAAArsI,KAAKm9G,KAAlDjgH,EAAImvI,EAAJnvI,KAAM2mE,EAAWwoE,EAAXxoE,YAAa0oB,EAAU8/C,EAAV9/C,WAAYqxB,EAAUyuB,EAAVzuB,WACtC,OAAO,IAAImxB,kBAAkB7xI,EAAM2mE,EAAa0oB,EAAYqxB,EAAYptG,OACzEq+H,EAd8B,CAAQ1C,gBAiB5B4C,kBAAkB,SAAAC,GAAAjsE,UAAAgsE,EAAAC,GAAA,IAAAC,EAAAH,eAAAC,GAAA,SAAAA,IAAA,OAAA7tE,gBAAA,KAAA6tE,GAAAE,EAAAhzI,MAAA,KAAAoM,WAmB5B,OAnB4Bq5D,aAAAqtE,EAAA,EAAA9wI,IAAA,kBAAAN,MAC7B,SAAgBqgH,G,MACd,OAA2B,QAApBh6C,EAAAhkE,KAAKlB,OAAOG,gBAAQ,IAAA+kE,IAAIhkE,KAAKkvI,qBACrC,CAAAjxI,IAAA,mBAAAN,MAED,WACE,OAA8B,EAAvBqC,KAAK+9G,KAAK,WAAiB/9G,KAAK+9G,KAAK,iBAC7C,CAAA9/G,IAAA,QAAAN,MAED,WACE,OAAO,IAAIoxI,EAAkB/uI,KAAK9C,KAAM8C,KAAK6jE,YAAa7jE,KAAKusF,WAAYvsF,KAAK49G,WAAY,CAC1F1qG,GAAIlT,KAAKkT,GACTvS,OAAQX,KAAKW,OAAOsB,QACpBnD,OAAQkB,KAAKlB,OAAOmD,QACpBwgC,iBAAkBziC,KAAK+9G,KAAK,oBAC5B+jB,QAAS9hI,KAAK+9G,KAAK,WACnBv7E,YAAaxiC,KAAK+9G,KAAK,eACvBh/E,KAAM/+B,KAAK+9G,KAAK,cAEnBgxB,EAnB4B,CAAQ9C,iB,kiBCjChC,IAAMkD,mBAAqBnD,iBAAiB74H,OAAO,CACxDsvB,iBAAkBgmD,EAAS,aACf,YAAC,GACRhR,SAAS,gDACd14C,KAAM0pD,EAAE5Y,SAAQ,WACH,cACR4H,SAAS,wDAGH23D,iBAAiB,SAAA5C,GAAAzpE,UAAAqsE,EAAA5C,GAAA,IAAA/iE,EAAA4lE,eAAAD,GAC5B,SAAAA,IAAA,OAAAluE,gBAAA,KAAAkuE,GACQ3lE,EAAA/tE,KAAA,MACJwB,KAAM,WACN2mE,YAAa,YACb85C,QAAS,GACTpxB,WAAY,OACZqxB,WAAYuxB,qBAEf,OAAAztE,aAAA0tE,GAT2B,CAAQjD,gB,kiBCT/B,IAAMmD,iBAAmBtD,iBAAiB74H,OAAO,CACtDY,UAAW00E,EAAC,QAAM,CAAC,YAAa,qBAAoB,WACvC,aACRhR,SAAS,0FACdqqD,QAASr5C,EAAE1Y,SAAQ,WACN,GACR0H,SAAS,mDACdj1C,YAAaimD,EAAE1Y,SAAQ,WACV,GACR0H,SAAS,iDACd6tD,OAAQ78C,EAAE5Y,SAAQ,WACL,WACR4H,SAAS,sDACdp2C,YAAaonD,EAAE1Y,SAAQ,WACV,GACR0H,SAAS,gDAad14C,KAAM0pD,EAAE5Y,SAAQ,WACH,cACR4H,SAAS,wDAGHtuC,eAAe,SAAAqjG,GAAAzpE,UAAA55B,EAAAqjG,GAAA,IAAA/iE,EAAA8lE,eAAApmG,GAC1B,SAAAA,IAAA,OAAA+3B,gBAAA,KAAA/3B,GACQsgC,EAAA/tE,KAAA,MACJwB,KAAM,SACN2mE,YAAa,kBACb85C,QAAS,GACTpxB,WAAY,MACZqxB,WAAY0xB,mBAOf,OALA5tE,aAAAv4B,EAAA,EAAAlrC,IAAA,SAAAN,MAED,SAAOqgH,EAAuCxtG,GAC5C,IAAoD67H,EAAArsI,KAAKm9G,KAAlDjgH,EAAImvI,EAAJnvI,KAAM2mE,EAAWwoE,EAAXxoE,YAAa0oB,EAAU8/C,EAAV9/C,WAAYqxB,EAAUyuB,EAAVzuB,WACtC,OAAO,IAAI4xB,aAAatyI,EAAM2mE,EAAa0oB,EAAYqxB,EAAYptG,OACpE24B,EAdyB,CAAQgjG,gBAiBvBqD,aAAa,SAAAR,GAAAjsE,UAAAysE,EAAAR,GAAA,IAAAC,EAAAM,eAAAC,GAAA,SAAAA,IAAA,OAAAtuE,gBAAA,KAAAsuE,GAAAP,EAAAhzI,MAAA,KAAAoM,WAoBvB,OApBuBq5D,aAAA8tE,EAAA,EAAAvxI,IAAA,kBAAAN,MACxB,SAAgBqgH,G,MACd,OAA2B,QAApBh6C,EAAAhkE,KAAKlB,OAAOG,gBAAQ,IAAA+kE,IAAIhkE,KAAKkvI,qBACrC,CAAAjxI,IAAA,mBAAAN,MAED,WACE,OAA8B,EAAvBqC,KAAK+9G,KAAK,WAAiB/9G,KAAK+9G,KAAK,iBAC7C,CAAA9/G,IAAA,QAAAN,MAED,WACE,OAAO,IAAI6xI,EAAaxvI,KAAK9C,KAAM8C,KAAK6jE,YAAa7jE,KAAKusF,WAAYvsF,KAAK49G,WAAY,CACrF1qG,GAAIlT,KAAKkT,GACTvS,OAAQX,KAAKW,OAAOsB,QACpBnD,OAAQkB,KAAKlB,OAAOmD,QACpB8R,UAAW/T,KAAKwQ,QAAQuD,UACxB+tH,QAAS9hI,KAAKwQ,QAAQsxH,QACtBt/F,YAAaxiC,KAAKwQ,QAAQgyB,YAC1B8iG,OAAQtlI,KAAKwQ,QAAQ80H,OACrBjkG,YAAarhC,KAAKwQ,QAAQ6wB,kBAE7BmuG,EApBuB,CAAQvD,iB,kiBChD3B,IAAMwD,iBAAmBzD,iBAAiB74H,OAAO,CACtDoJ,KAAMksE,EAAM,QAAC,CAAC,SAAU,MAAO,OAAQ,UAAS,WACnC,UACRhR,SAAS,oCACd14C,KAAM0pD,EAAE5Y,SAAQ,WACH,cACR4H,SAAS,wDAGHi4D,eAAe,SAAAxtB,GAAAn/C,UAAA2sE,EAAAxtB,GAAA,IAAAz4C,EAAAkmE,eAAAD,GAC1B,SAAAA,IAAA,OAAAxuE,gBAAA,KAAAwuE,GACQjmE,EAAA/tE,KAAA,MACJwB,KAAM,SACN2mE,YAAa,cACb85C,QAAS,GACTpxB,WAAY,MACZqxB,WAAY6xB,mBAWf,OATA/tE,aAAAguE,EAAA,EAAAzxI,IAAA,cAAAN,MAED,SAA8BqgH,EACAxtG,GAC5B,IAAO0C,EAAkC1C,EAAlC0C,GAAIvS,EAA8B6P,EAA9B7P,OAAQ7B,EAAsB0R,EAAtB1R,OAAQyd,EAAc/L,EAAd+L,KAAMwiB,EAAQvuB,EAARuuB,KACjC,OAAOiiF,IAAIC,UACNr2G,IAAI,QACJ4F,MAAM,CAAC0C,KAAIvS,SAAQ7B,SAAQyd,OAAM9b,KAAM,KAAMs+B,SAC7C4xD,YACN++C,EAlByB,CAAQ7tB,mB,kiBCT7B,IAAM+tB,kBAAoB5D,iBAAiB74H,OAAO,CACvDoJ,KAAMksE,EAAM,QAAC,CAAC,SAAU,MAAO,OAAQ,UAAS,WACnC,UACRhR,SAAS,oCACd14C,KAAM0pD,EAAE5Y,SAAQ,WACH,cACR4H,SAAS,wDAGHo4D,gBAAgB,SAAA3tB,GAAAn/C,UAAA8sE,EAAA3tB,GAAA,IAAAz4C,EAAAqmE,eAAAD,GAC3B,SAAAA,IAAA,OAAA3uE,gBAAA,KAAA2uE,GACQpmE,EAAA/tE,KAAA,MACJwB,KAAM,UACN2mE,YAAa,cACb85C,QAAS,GACTpxB,WAAY,MACZqxB,WAAYgyB,oBAWf,OATAluE,aAAAmuE,EAAA,EAAA5xI,IAAA,cAAAN,MAED,SAA8BqgH,EACAxtG,GAC5B,IAAO0C,EAAkC1C,EAAlC0C,GAAIvS,EAA8B6P,EAA9B7P,OAAQ7B,EAAsB0R,EAAtB1R,OAAQyd,EAAc/L,EAAd+L,KAAMwiB,EAAQvuB,EAARuuB,KACjC,OAAOiiF,IAAIC,UACNr2G,IAAI,QACJ4F,MAAM,CAAC0C,KAAIvS,SAAQ7B,SAAQyd,OAAM9b,KAAM,MAAOs+B,SAC9C4xD,YACNk/C,EAlB0B,CAAQhuB,mB,kiBCT9B,IAAMkuB,iBAAmB/D,iBAAiB74H,OAAO,CACtD4rB,KAAM0pD,EAAE5Y,SAAQ,WACH,YACR4H,SAAS,sDAGHu4D,eAAe,SAAA9tB,GAAAn/C,UAAAitE,EAAA9tB,GAAA,IAAAz4C,EAAAwmE,eAAAD,GAC1B,SAAAA,IAAA,OAAA9uE,gBAAA,KAAA8uE,GACQvmE,EAAA/tE,KAAA,MACJwB,KAAM,SACN2mE,YAAa,cACb85C,QAAS,GACTpxB,WAAY,MACZqxB,WAAYmyB,mBAWf,OATAruE,aAAAsuE,EAAA,EAAA/xI,IAAA,cAAAN,MAED,SAA8BqgH,EACAxtG,GAC5B,IAAO0C,EAA4B1C,EAA5B0C,GAAIvS,EAAwB6P,EAAxB7P,OAAQ7B,EAAgB0R,EAAhB1R,OAAQigC,EAAQvuB,EAARuuB,KAC3B,OAAOiiF,IAAIC,UACNr2G,IAAI,QACJ4F,MAAM,CAAC0C,KAAIvS,SAAQ7B,SAAQ2B,KAAM,KAAMs+B,SACvC4xD,YACNq/C,EAlByB,CAAQnuB,mB,kiBCN7B,IAAMquB,kBAAoBlE,iBAAiB74H,OAAO,CACvD4rB,KAAM0pD,EAAE5Y,SAAQ,WACH,YACR4H,SAAS,sDAGH04D,gBAAgB,SAAAjuB,GAAAn/C,UAAAotE,EAAAjuB,GAAA,IAAAz4C,EAAA2mE,eAAAD,GAC3B,SAAAA,IAAA,OAAAjvE,gBAAA,KAAAivE,GACQ1mE,EAAA/tE,KAAA,MACJwB,KAAM,UACN2mE,YAAa,cACb85C,QAAS,GACTpxB,WAAY,MACZqxB,WAAYsyB,oBAWf,OATAxuE,aAAAyuE,EAAA,EAAAlyI,IAAA,cAAAN,MAED,SAA8BqgH,EACAxtG,GAC5B,IAAO0C,EAA4B1C,EAA5B0C,GAAIvS,EAAwB6P,EAAxB7P,OAAQ7B,EAAgB0R,EAAhB1R,OAAQigC,EAAQvuB,EAARuuB,KAC3B,OAAOiiF,IAAIC,UACNr2G,IAAI,QACJ4F,MAAM,CAAC0C,KAAIvS,SAAQ7B,SAAQ2B,KAAM,MAAOs+B,SACxC4xD,YACNw/C,EAlB0B,CAAQtuB,mB,kiBCV9B,IAAMwuB,gBAAkBrE,iBAAiB74H,OAAO,IAG1Cm8B,cAAc,SAAAk9F,GAAAzpE,UAAAzzB,EAAAk9F,GAAA,IAAA/iE,EAAA6mE,eAAAhhG,GACzB,SAAAA,IAAA,OAAA4xB,gBAAA,KAAA5xB,GACQm6B,EAAA/tE,KAAA,MACJwB,KAAM,QACN2mE,YAAa,cACb85C,QAAS,GACTpxB,WAAY,MACZqxB,WAAYyyB,kBAEf,OAAA3uE,aAAApyB,GATwB,CAAQ68F,gB,kiBCF5B,IAAMoE,sBAAwBvE,iBAAiB74H,OAAO,CAC3D1S,KAAMgoF,EAAC,QAAM,CAAC,KAAM,QAAO,WACd,MACRhR,SAAS,mCACd+uD,aAAc/9C,EAAE5Y,SAAQ,WACX,IACR4H,SAAS,+HACd2uD,UAAW39C,EAAE5Y,SAAQ,WACR,IACR4H,SAAS,oGACdxrC,WAAYw8C,EAAE1Y,SAAQ,WACT,GACR0H,SAAS,yCACdvrC,WAAYu8C,EAAE1Y,SAAQ,WACT,KACR0H,SAAS,2CACd14C,KAAM0pD,EAAE5Y,SAAQ,WACH,cACR4H,SAAS,wDAGH3nC,oBAAoB,SAAA08F,GAAAzpE,UAAAjzB,EAAA08F,GAAA,IAAA/iE,EAAA+mE,eAAA1gG,GAC/B,SAAAA,IAAA,OAAAoxB,gBAAA,KAAApxB,GACQ25B,EAAA/tE,KAAA,MACJwB,KAAM,cACN2mE,YAAa,aACb85C,QAAS,GACTpxB,WAAY,MACZqxB,WAAY2yB,wBAEf,OAAA7uE,aAAA5xB,GAT8B,CAAQq8F,gB,kiBCrBlC,IAAMsE,gBAAkBzE,iBAAiB74H,OAAO,CACrD1S,KAAMgoF,EAAC,QAAM,CAAC,KAAM,QAAO,WACd,MACRhR,SAAS,4CACdl7D,KAAMksE,EAAM,QAAC,CAAC,SAAU,MAAO,OAAQ,UAAS,WACnC,UACRhR,SAAS,yCACd1vE,SAAU0gF,EAAE1Y,SAAQ,WACP,IACR0H,SAAS,uCACd14C,KAAM0pD,EAAE5Y,SAAQ,WACH,cACR4H,SAAS,wDAGH13C,cAAc,SAAAysG,GAAAzpE,UAAAhjC,EAAAysG,GAAA,IAAA/iE,EAAAinE,eAAA3wG,GACzB,SAAAA,IAAA,OAAAmhC,gBAAA,KAAAnhC,GACQ0pC,EAAA/tE,KAAA,MACJwB,KAAM,QACN2mE,YAAa,cACb85C,QAAS,GACTpxB,WAAY,MACZqxB,WAAY6yB,kBAEf,OAAA/uE,aAAA3hC,GATwB,CAAQosG,gB,kiBCf5B,IAAMwE,cAAgB3E,iBAAiB74H,OAAO,CACnD1S,KAAMgoF,EAAC,QAAM,CAAC,KAAM,QAAO,WACd,MACRhR,SAAS,4CACdl7D,KAAMksE,EAAM,QAAC,CAAC,SAAU,MAAO,OAAQ,UAAS,WACnC,UACRhR,SAAS,yCACd14C,KAAM0pD,EAAE5Y,SAAQ,WACH,cACR4H,SAAS,wDAGHm5D,YAAY,SAAApE,GAAAzpE,UAAA6tE,EAAApE,GAAA,IAAA/iE,EAAAonE,eAAAD,GACvB,SAAAA,IAAA,OAAA1vE,gBAAA,KAAA0vE,GACQnnE,EAAA/tE,KAAA,MACJwB,KAAM,MACN2mE,YAAa,cACb85C,QAAS,GACTpxB,WAAY,MACZqxB,WAAY+yB,gBAEf,OAAAjvE,aAAAkvE,GATsB,CAAQzE,gB,kiBCZ1B,IAAM2E,oBAAsB9E,iBAAiB74H,OAAO,CACzD00H,eAAgBp/C,EAAE5Y,SAAQ,WACb,KACR4H,SAAS,wFACdswD,gBAAiBt/C,EAAE1Y,SAAQ,WACd,IACR0H,SAAS,6CACd14C,KAAM0pD,EAAE5Y,SAAQ,WACH,cACR4H,SAAS,wDAGHl0C,kBAAkB,SAAAipG,GAAAzpE,UAAAx/B,EAAAipG,GAAA,IAAA/iE,EAAAsnE,eAAAxtG,GAC7B,SAAAA,IAAA,OAAA29B,gBAAA,KAAA39B,GACQkmC,EAAA/tE,KAAA,MACJwB,KAAM,YACN2mE,YAAa,cACb85C,QAAS,GACTpxB,WAAY,MACZqxB,WAAYkzB,sBAEf,OAAApvE,aAAAn+B,GAT4B,CAAQ4oG,gB,kiBCZhC,IAAM6E,wBAA0BhF,iBAAiB74H,OAAO,CAC7Dg1H,SAAU1/C,EAAE1Y,SACPoH,WACO,WAAC,GACRM,SAAS,+GACd2wD,OAAQ3/C,EAAE1Y,SACLoH,WACO,WAAC,MACRM,SAAS,8GACdliE,QAASkzE,EAAE1Y,SAAQ,WACN,GACR0H,SAAS,yDACd14C,KAAM0pD,EAAE5Y,SAAQ,WACH,cACR4H,SAAS,wDAGHluC,sBAAsB,SAAAijG,GAAAzpE,UAAAx5B,EAAAijG,GAAA,IAAA/iE,EAAAwnE,eAAA1nG,GACjC,SAAAA,IAAA,OAAA23B,gBAAA,KAAA33B,GACQkgC,EAAA/tE,KAAA,MACJwB,KAAM,gBACN2mE,YAAa,YACb85C,QAAS,GACTpxB,WAAY,OACZqxB,WAAYozB,0BAEf,OAAAtvE,aAAAn4B,GATgC,CAAQ4iG,gB,kiBCjBpC,IAAM+E,cAAgBlF,iBAAiB74H,OAAO,CACnDnN,KAAMyiF,EAAE5Y,SACH4H,SAAS,oBACd95E,MAAO8qF,EAAEe,MAAM,CAACf,EAAE5Y,SAAU4Y,EAAE1Y,SAAU0Y,EAAS,eAC5ChR,SAAS,4BAGH05D,YAAY,SAAA3E,GAAAzpE,UAAAouE,EAAA3E,GAAA,IAAA/iE,EAAA2nE,eAAAD,GACvB,SAAAA,IAAA,OAAAjwE,gBAAA,KAAAiwE,GACQ1nE,EAAA/tE,KAAA,MACJwB,KAAM,MACN2mE,YAAa,cACb85C,QAAS,GACTpxB,WAAY,MACZqxB,WAAYszB,gBAEf,OAAAxvE,aAAAyvE,GATsB,CAAQhF,gB,kiBCN1B,IAAMkF,mBAAqBrF,iBAAiB74H,OAAO,CACxDsvB,iBAAkBgmD,EAAS,aACf,YAAC,GACRhR,SAAS,gDACdixD,KAAMjgD,EAAE5Y,SAAQ,WACH,WACR4H,SAAS,qDACdkxD,MAAOlgD,EAAE1Y,SAAQ,WACJ,GACR0H,SAAS,sDACd14C,KAAM0pD,EAAE5Y,SAAQ,WACH,UACR4H,SAAS,oDAGH65D,iBAAiB,SAAA9E,GAAAzpE,UAAAuuE,EAAA9E,GAAA,IAAA/iE,EAAA8nE,eAAAD,GAC5B,SAAAA,IAAA,OAAApwE,gBAAA,KAAAowE,GACQ7nE,EAAA/tE,KAAA,MACJwB,KAAM,WACN2mE,YAAa,YACb85C,QAAS,GACTpxB,WAAY,OACZqxB,WAAYyzB,qBAEf,OAAA3vE,aAAA4vE,GAT2B,CAAQnF,gB,kiBCf/B,IAAMqF,iBAAmBxF,iBAAiB74H,OAAO,CACtDoJ,KAAMksE,EAAErqF,OAAO,CACboiC,MAAOioD,EAAE1Y,SAASmH,WAClB3vE,EAAGkhF,EAAE1Y,SAASsH,GAAGoR,EAAE5Y,UAAUqH,WAC7B1vE,EAAGihF,EAAE1Y,SAASsH,GAAGoR,EAAE5Y,UAAUqH,aAC5BA,WACEO,SAAS,0GACdp3C,GAAIooD,EAAErqF,OAAO,CACXoiC,MAAOioD,EAAE1Y,SAASmH,WAClB3vE,EAAGkhF,EAAE1Y,SAASsH,GAAGoR,EAAE5Y,UAAUqH,WAC7B1vE,EAAGihF,EAAE1Y,SAASsH,GAAGoR,EAAE5Y,UAAUqH,aAC5BA,WACEO,SAAS,4FACd9xE,OAAQ8iF,EAAE5Y,SAAQ,WACL,WACR4H,SAAS,iDACdt8C,MAAOstD,EAAS,aACJ,YAAC,GACRhR,SAAS,8CACd14C,KAAM0pD,EAAE5Y,SAAQ,WACH,cACR4H,SAAS,wDAGHg6D,eAAe,SAAAjF,GAAAzpE,UAAA0uE,EAAAjF,GAAA,IAAA/iE,EAAAioE,eAAAD,GAC1B,SAAAA,IAAA,OAAAvwE,gBAAA,KAAAuwE,GACQhoE,EAAA/tE,KAAA,MACJwB,KAAM,SACN2mE,YAAa,cACb85C,QAAS,GACTpxB,WAAY,MACZqxB,WAAY4zB,mBAOf,OALA9vE,aAAA+vE,EAAA,EAAAxzI,IAAA,SAAAN,MAED,SAAOqgH,EAAuCxtG,GAC5C,IAAoD67H,EAAArsI,KAAKm9G,KAAlDjgH,EAAImvI,EAAJnvI,KAAM2mE,EAAWwoE,EAAXxoE,YAAa0oB,EAAU8/C,EAAV9/C,WAAYqxB,EAAUyuB,EAAVzuB,WACtC,OAAO,IAAI+zB,aAAaz0I,EAAM2mE,EAAa0oB,EAAYqxB,EAAYptG,OACpEihI,EAdyB,CAAQtF,gBAiBvBwF,aAAa,SAAA3C,GAAAjsE,UAAA4uE,EAAA3C,GAAA,IAAAC,EAAAyC,eAAAC,GAAA,SAAAA,IAAA,OAAAzwE,gBAAA,KAAAywE,GAAA1C,EAAAhzI,MAAA,KAAAoM,WAOvB,OAPuBq5D,aAAAiwE,EAAA,EAAA1zI,IAAA,uBAAAN,MACxB,SAAqBqgH,GACnB,OAAOh+G,KAAKuB,gBAAgBy8G,KAC7B,CAAA//G,IAAA,QAAAN,MAED,WACE,MAAM,IAAIy2D,MAAM,oCACjBu9E,EAPuB,CAAQ1F,iBCL5B,SAAU2F,mBAAmB9vE,GACjC,MAAO,CAEL,IAAIyqE,eACJ,IAAIj9F,cACJ,IAAI1E,aACJ,IAAIhK,aACJ,IAAI8uG,eACJ,IAAIG,gBACJ,IAAI3kG,aACJ,IAAIzK,aACJ,IAAIuvG,eACJ,IAAIG,gBACJ,IAAI7C,YACJ,IAAIG,cACJ,IAAIG,eACJ,IAAI/uG,aACJ,IAAImD,oBACJ,IAAIlC,iBACJ,IAAIJ,eACJ,IAAI0L,cACJ,IAAIrL,cACJ,IAAI6wG,YACJ,IAAIrtG,kBACJ,IAAI4tG,YACJ,IAAIM,eAGJ,IAAItE,aACJ,IAAI5jG,sBAGJ,IAAIslG,oBACJ,IAAIO,iBACJ,IAAIkC,iBAGJ,IAAI7C,sBAGJ,IAAI3+F,oBAGJ,IAAI3G,gB,8rDC3ER,IAAa0oG,gBAAgB,SAAAC,GAAA/uE,UAAA8uE,EAAAC,GAAA,IAAAroE,EAAAsoE,eAAAF,GAK3B,SAAYA,EAAAlsI,EAAuB0qD,GAAc,IAAA5qD,EAG0C,OAH1Cy7D,gBAAA,KAAA2wE,GAC/CpsI,EAAAgkE,EAAA/tE,KAAA,KAAMiK,GAHEF,EAAAusI,eAAsC,IAAIp7H,IAIlDnR,EAAK4qD,OAASA,EACdqvD,OAAsB,OAAfrvD,EAAO9zC,KAAe,6DAA4D9W,EAyJ1F,OAxJAi8D,aAAAmwE,EAAA,EAAA5zI,IAAA,eAAAN,MAED,WAEE,GADAqC,KAAKwiI,eAAiBxiI,KAAK8hE,QAAQshE,YAAY7lI,IAAIyC,KAAKqwD,OAAOhwB,IACpC,MAAvBrgC,KAAKwiI,eACP,MAAM,IAAIpuE,MAAqB,eAAAp0C,OAAAhgB,KAAKqwD,OAAOhwB,GAAoE,sEAElH,CAAApiC,IAAA,uBAAAN,MAED,WAAoB,I,EAAA0rE,EAAA,KACd4oE,EAAQ,EACNC,EAAY,WAChBD,IACA,IAAIpxB,EAAY,MAAA7gG,OAAAiyH,GAChB,MAAO5oE,EAAKu5D,iBAAiBtzG,IAAIuxF,GAC/BoxB,IACApxB,EAAG,MAAA7gG,OAASiyH,GAEd,OAAOpxB,GAGT,GAAiC,QAA7B7gH,KAAKwiI,eAAetlI,KAAgB,CAClC8C,KAAKqwD,OAAOs4D,MAAMrtH,OAAS,GAC7BinI,YAAYv0C,OAAOxrF,KAA8E,0EAG7E,MAAlBxC,KAAK2F,OAAOuN,IAAgC,IAAlBlT,KAAK2F,OAAOuN,KACxClT,KAAK2F,OAAOuN,GAAKg/H,KAEnB9uI,MAAMmZ,KAAKvc,KAAK2F,OAAOygB,iBAAiB,MAAMnmB,SAAQ,SAAAomB,GACvC,MAATA,EAAGnT,IAAuB,IAATmT,EAAGnT,KACtBmT,EAAGnT,GAAKg/H,KAEV7oE,EAAK2oE,eAAe/wI,IAAIolB,EAAGnT,GAAImT,EAAGnT,OAGpC,IAAM8Y,EAAKhsB,KAAKisB,aACVi5G,EAAMllI,KAAK2F,OAAOqyB,WAAU,GAKlC,OAJAhM,EAAGqH,YAAY6xG,QAGfllI,KAAK0vH,cAAgB,IAAIpB,gBAAgB,CAAC4W,GAAMllI,KAAM,OAEvD,IAEmCknE,EAFnCK,EAAA4qE,6BAEkBnyI,KAAKqwD,OAAOs4D,OAAK,QAAA8B,EAAA,eAAzB79C,EAAI1F,EAAAvpE,MACPi9C,EAAWyuB,EAAK1jE,OAAOygB,iBAA6BwmD,EAAKrwD,MAC/D,GAAuB,GAAnBq+B,EAASt/C,OAEX,OADAinI,YAAYv0C,OAAOxrF,KAAK,QAADwd,OAAS0W,KAAKjL,UAAUmhD,GAAkC,+BACjF,WAGF,GAAkB,WAAdA,EAAKnsE,KAAmB,CAC1Bi/G,OAA0B,GAAnB9kE,EAASt/C,OACa,yBAAA0kB,OAAA0W,KAAKjL,UAAUmhD,GAAK,uCAAA5sD,OAAsC46B,EAASt/C,OAAU,MAC1GokH,OAAwB,MAAjB9yC,EAAKi8C,SAA2C,yBAAA7oG,OAAA0W,KAAKjL,UAAUmhD,GAA8B,2BACpG,IAMIwlE,EANE/rH,EAAKu0B,EAAS,GAGdy3F,EAAuB,MAAThsH,EAAGnT,IAAuB,IAATmT,EAAGnT,GAClCo/H,EAA2B,MAAX1lE,EAAK15D,IAAyB,IAAX05D,EAAK15D,GAI1Cm/H,GAAeC,EAEjBF,EAAUxlE,EAAK15D,GACNm/H,EAETD,EAAU/rH,EAAGnT,GACJo/H,GAETjsH,EAAGnT,GAAK05D,EAAK15D,GACbk/H,EAAUxlE,EAAK15D,KAGfk/H,EAAUF,IACV7rH,EAAGnT,GAAKk/H,GAEV/oE,EAAK2oE,eAAe/wI,IAAImxI,EAAS/rH,EAAGnT,IAIpC,IAAMq/H,EAAWlpE,EAAKmpE,iBAAiB5lE,EAAKvsC,IACtCsD,EAAY4uG,EAASlQ,cAC3Bz1D,EAAKjpC,UAAU1jC,SAAQ,SAAAkpD,GAChBxlB,EAAUtxB,SAAS82C,IACtBxlB,EAAU/nC,KAAKutD,MAInB,IAAMspF,EAAMppE,EAAKqpE,qBAAqBrsH,EAAI+rH,EAASzuG,EAAwB,QAAbqgC,EAAA4I,EAAK9xE,YAAQ,IAAAkpE,IAAA,IAC3EqF,EAAKp9C,aAAaoH,YAAYo/G,OAEzB,IAAkB,UAAd7lE,EAAKnsE,KA8Cd,MAAM,IAAI2zD,MAAM,sBAADp0C,OAAuB4sD,EAAKnsE,OA7C3Ci/G,OAAoB,MAAb9yC,EAAK9xE,MAAiC,MAAjB8xE,EAAKi8C,SAAiB,sBAAD7oG,OACvB0W,KAAKjL,UAAUmhD,GAA4C,yCAChE,MAAjBA,EAAKi8C,UACPnJ,OAAO9kE,EAASt/C,QAAUsxE,EAAKi8C,SAASvtH,OAAO,sBAAD0kB,OACpB0W,KAAKjL,UAAUmhD,GAAiB,aAAA5sD,OAAA46B,EAASt/C,OAA4B,uBAAA0kB,OAAA4sD,EAAKi8C,SAASvtH,OAAe,WAI9H,IAAMq3I,EAAWtpE,EAAKmpE,iBAAiB5lE,EAAKvsC,IACtC+hG,EAAYuQ,EAAStQ,cAC3Bz1D,EAAKjpC,UAAU1jC,SAAQ,SAAAkpD,GAChBi5E,EAAU/vH,SAAS82C,IACtBi5E,EAAUxmI,KAAKutD,MAInBvO,EAAS36C,SAAQ,SAAComB,EAAIpK,GAEpB,IAAIm2H,EAWAt3I,EAVEu3I,EAAuB,MAAThsH,EAAGnT,IAAuB,IAATmT,EAAGnT,GACnCm/H,EAIHD,EAAU/rH,EAAGnT,IAHbk/H,EAAUF,IACV7rH,EAAGnT,GAAKk/H,GAIV/oE,EAAK2oE,eAAe/wI,IAAImxI,EAAS/rH,EAAGnT,IAMlCpY,EAFmB,MAAjB8xE,EAAKi8C,SAEAj8C,EAAKi8C,SAAS5sG,GACC,MAAb2wD,EAAK9xE,KAEP8xE,EAAK9xE,KAEL,GAGT,IAAMoqI,EAAM77D,EAAKqpE,qBAAqBrsH,EAAI+rH,EAAShQ,EAAe,OAAJtnI,QAAI,IAAJA,IAAQ,IACtEuuE,EAAKp9C,aAAaoH,YAAY6xG,QA3FpC,IAAsC39D,EAAA7qE,MAAAwqE,EAAAK,EAAAppE,KAAAspE,MAAAgjD,IAiGrC,MAAAxkE,GAAAshB,EAAA9gE,EAAAw/C,GAAA,QAAAshB,EAAAO,IAED,IAAM8qE,EAAkBxvI,MAAMmZ,KAAKvc,KAAKisB,aAAaE,UACrDnsB,KAAK0vH,cAAgB,IAAIpB,gBAAgBskB,EAAiB5yI,KAAM,QACjE,CAAA/B,IAAA,qBAAAN,MAED,SAAmBuV,GACjB,IAAM2/H,EAAS7yI,KAAKgyI,eAAez0I,IAAI2V,GAEvC,OADAwsG,OAAiB,MAAVmzB,EAAe,sCAAD7yH,OAAwC9M,EAAM,MAC5DlT,KAAK2F,OAAOmP,cAAc,IAADkL,OAAK6yH,QACtChB,EAjK0B,CAAQnN,oB,4hBCHrC,IAAaoO,gBAAgB,SAAAhB,GAAA/uE,UAAA+vE,EAAAhB,GAAA,IAAAroE,EAAAspE,aAAAD,GAQ3B,SAAAA,EAAYntI,GAAqB,IAAAF,EAFwB,OAExBy7D,gBAAA,KAAA4xE,GAC/BrtI,EAAAgkE,EAAA/tE,KAAA,KAAMiK,GAHEF,EAAAusI,eAAsC,IAAIp7H,IAAKnR,EAmGxD,OA/FAi8D,aAAAoxE,EAAA,EAAA70I,IAAA,eAAAN,MAED,WACE,IACIq1I,EADEC,EAASjzI,KAAK2F,OAAOmP,cAAkB,IAAAkL,OAAA8yH,EAAgBI,iBAAoB,MAQjF,GALEF,EADY,MAAVC,GAA2E,IAAzDA,EAAOhlH,aAAa6kH,EAAgBI,kBACvC,MAEAD,EAAOhlH,aAAa6kH,EAAgBI,kBAEvDlzI,KAAKwiI,eAAiBxiI,KAAK8hE,QAAQshE,YAAY7lI,IAAIy1I,GACxB,MAAvBhzI,KAAKwiI,eACP,MAAM,IAAIpuE,MAAqB,eAAAp0C,OAAAgzH,EAAkE,wDAEpG,CAAA/0I,IAAA,uBAAAN,MAED,WAAoB,IAAA0rE,EAAA,KACd4oE,EAAQ,EACNC,EAAY,WAChBD,IACA,IAAIpxB,EAAY,MAAA7gG,OAAAiyH,GAChB,MAAO5oE,EAAKu5D,iBAAiBtzG,IAAIuxF,GAC/BoxB,IACApxB,EAAG,MAAA7gG,OAASiyH,GAEd,OAAOpxB,GAGT,GAAiC,QAA7B7gH,KAAKwiI,eAAetlI,KAAgB,CAEhB,MAAlB8C,KAAK2F,OAAOuN,IAAgC,IAAlBlT,KAAK2F,OAAOuN,KACxClT,KAAK2F,OAAOuN,GAAKg/H,KAEnB9uI,MAAMmZ,KAAKvc,KAAK2F,OAAOygB,iBAAiB,MAAMnmB,SAAQ,SAAAomB,GACvC,MAATA,EAAGnT,IAAuB,IAATmT,EAAGnT,KACtBmT,EAAGnT,GAAKg/H,KAEV7oE,EAAK2oE,eAAe/wI,IAAIolB,EAAGnT,GAAImT,EAAGnT,OAGpC,IAAM8Y,EAAKhsB,KAAKisB,aACVi5G,EAAMllI,KAAK2F,OAAOqyB,WAAU,GAKlC,OAJAhM,EAAGqH,YAAY6xG,QAGfllI,KAAK0vH,cAAgB,IAAIpB,gBAAgB,CAAC4W,GAAMllI,KAAM,OAIxD,IAAM46C,EAAW56C,KAAK2F,OAAOygB,iBAAiC,IAAApG,OAAA8yH,EAAgBK,UAAa,MAC3Fv4F,EAAS36C,SAAQ,SAAAomB,GACf,IAII+rH,EAJEgB,EAAe/sH,EAAG4H,aAAa6kH,EAAgBK,WAC/CE,EAAUhtH,EAAG4H,aAAa6kH,EAAgBQ,WAI1CjB,EAAuB,MAAThsH,EAAGnT,IAAuB,IAATmT,EAAGnT,GACpCm/H,EACFD,EAAU/rH,EAAGnT,IAEbk/H,EAAUF,IACV7rH,EAAGnT,GAAKk/H,GAEV/oE,EAAK2oE,eAAe/wI,IAAImxI,EAAS/rH,EAAGnT,IAGpC,IAAMq/H,EAAWlpE,EAAKmpE,iBAAiBY,GACjCzvG,EAAY4uG,EAAS5uG,UAC3B,GAAItd,EAAGk5G,aAAauT,EAAgBS,YAAa,CAC/C,IAAMC,EAAiBntH,EAAG4H,aAAa6kH,EAAgBS,YAAYv3H,MAAM,KACzEw3H,EAAevzI,SAAQ,SAAAjD,GAChB2mC,EAAUtxB,SAASrV,IACtB2mC,EAAU/nC,KAAKoB,MAMrB,IAAIlC,EAAO,GACI,MAAXu4I,GAA8B,IAAXA,IACrBv4I,EAAO8vB,MAAMC,MAAMwoH,IAGrB,IAAMnO,EAAM77D,EAAKqpE,qBAAqBrsH,EAAI+rH,EAASzuG,EAAW7oC,GAC9DuuE,EAAKp9C,aAAaoH,YAAY6xG,MAGhC,IAAM0N,EAAkBxvI,MAAMmZ,KAAKvc,KAAKisB,aAAaE,UACrDnsB,KAAK0vH,cAAgB,IAAIpB,gBAAgBskB,EAAiB5yI,KAAM,QACjE,CAAA/B,IAAA,qBAAAN,MAED,SAAmBuV,GACjB,IAAM2/H,EAAS7yI,KAAKgyI,eAAez0I,IAAI2V,GAEvC,OADAwsG,OAAiB,MAAVmzB,EAAe,sCAAD7yH,OAAwC9M,EAAM,MAC5DlT,KAAK2F,OAAOmP,cAAc,IAADkL,OAAK6yH,QACtCC,EAzG0B,CAAQpO,oB,gpCACnBoO,gBAASK,UAAG,SACZL,gBAAUS,WAAG,UACbT,gBAASQ,UAAG,SACZR,gBAAgBI,iBAAG,gBCcrC,IAAaO,YAAW,WAatB,SAAAA,IAAAvyE,gBAAA,KAAAuyE,GACE,IAAM56F,EAAS74C,KAAK64C,OAAS,IAAIgxE,eAOjC7pH,KAAK0zI,mBAAqB,SAAS5xE,EAAsBnhE,EAAoB0vD,GAE3E,YAAelxD,IAAXkxD,EACK,IAAIyiF,gBAAgBnyI,GAEpB,IAAIkxI,gBAAgBlxI,EAAyBk4C,EAAO86F,YAAYtjF,KAI3ErwD,KAAK4zI,gBAAkB,SAAS9xE,EAAsBugD,GACpD,OAAO,IAAI6O,SAAS7O,IAGtBriH,KAAK6zI,mBAAqB,SAAS/xE,EAAsBugD,GACvD,OAAO,IAAI4mB,gBAAgB5mB,IAG7BriH,KAAKuR,SAAWA,SAgKjB,OA/JAmwD,aAAA+xE,EAAA,EAAAx1I,IAAA,OAAAN,MAED,WAEE81I,EAAYzlD,OAAOlhB,MAAM,oCACzB9sE,KAAKwiE,gBAAkB,IAAIhoC,gBAC3Bx6B,KAAKwiE,gBAAgBo8D,SAASgT,sBAE9B6B,EAAYzlD,OAAOlhB,MAAM,gCACzB9sE,KAAKojI,YAAc,IAAIgG,YACvBppI,KAAKojI,YAAYxE,SAASqL,eAAejqI,OAEzCyzI,EAAYzlD,OAAOzqC,KAAK,gCAADvjC,OAAiChgB,KAAKwiE,gBAAgBj2C,KAAI,gBAAAvM,OAAehgB,KAAKojI,YAAY72G,KAAa,WAC9HknH,EAAYzlD,OAAO9nC,MAAM,qBAADlmC,OAAsBhgB,KAAKwiE,gBAAgBsxE,SAAS7vI,KAAI,SAAAwoE,GAAE,OAAIA,EAAGvvE,QAAM2qB,KAAK,QACpG4rH,EAAYzlD,OAAO9nC,MAAM,iBAADlmC,OAAkBhgB,KAAKojI,YAAY0Q,SAAS7vI,KAAI,SAAAwoE,GAAE,OAAIA,EAAGvvE,QAAM2qB,KAAK,UAC7F,CAAA5pB,IAAA,OAAAV,IAED,WACE,OAAOmwE,cAAcqmE,UACtB,CAAA91I,IAAA,2BAAAN,MAID,SAAyBq2I,GACvB,QAAsB70I,GAAlB60I,EACJ,GAAIA,aAA0BnyI,aAC5B7B,KAAKwiE,gBAAgByxE,iBAAiBD,OACjC,CACL,IAAM7jF,EAAOyiD,YAAUohC,GACjB1+G,EAAWt1B,KAAK64C,OAAOq7F,cAAc/jF,GAC3CnwD,KAAKwiE,gBAAgByxE,iBAAiB3+G,MAEzC,CAAAr3B,IAAA,4BAAAN,MAED,SAA0Bw2I,GACxB,QAAgBh1I,GAAZg1I,EAAJ,CAAiC,IACIjtE,EADJK,EAAA6sE,2BACJD,GAAQ,IAArC,IAAuC5sE,EAAA7qE,MAAAwqE,EAAAK,EAAAppE,KAAAspE,MAAA,KAA5BusE,EAAc9sE,EAAAvpE,MACvBqC,KAAKq0I,yBAAyBL,IAC/B,MAAA/tF,GAAAshB,EAAA9gE,EAAAw/C,GAAA,QAAAshB,EAAAO,QACF,CAAA7pE,IAAA,qBAAAN,MAED,SAAmBmE,GACjB,IAAMwzB,EAAWt1B,KAAKwiE,gBAAgBjlE,IAAIuE,GAC1C,YAAgB3C,GAAZm2B,GAGGt1B,KAAKwiE,gBAAgB8xE,WAAWh/G,EAAS4yC,YACjD,CAAAjqE,IAAA,uBAAAN,MAID,SAAqB42I,GACnB,QAAkBp1I,GAAdo1I,EACJ,GAAIA,aAAsBnzB,WACxBphH,KAAKojI,YAAY6Q,iBAAiBM,OAC7B,CACL,IAAMpkF,EAAOyiD,YAAU2hC,GACjB9zI,EAAOT,KAAK64C,OAAOqxF,gBAAgB/5E,GACzCnwD,KAAKojI,YAAY6Q,iBAAiBxzI,MAErC,CAAAxC,IAAA,wBAAAN,MAED,SAAsBw2I,GACpB,QAAgBh1I,GAAZg1I,EAAJ,CAAiC,IACAxnB,EADAC,EAAAwnB,2BACRD,GAAQ,IAAjC,IAAmCvnB,EAAAlwH,MAAAiwH,EAAAC,EAAAzuH,KAAAspE,MAAA,KAAxB8sE,EAAU5nB,EAAAhvH,MAGjBqC,KAAKw0I,qBAAqBD,IAI7B,MAAAtuF,GAAA2mE,EAAAnmH,EAAAw/C,GAAA,QAAA2mE,EAAA9kD,QACF,CAAA7pE,IAAA,iBAAAN,MAED,SAAei7E,GACb,IAAMn4E,EAAOT,KAAKojI,YAAY7lI,IAAIq7E,GAClC,YAAYz5E,GAARsB,GAGGT,KAAKojI,YAAYkR,WAAW7zI,EAAKynE,YACzC,CAAAjqE,IAAA,cAAAN,MAED,SAA8BwyD,EAAyBxvD,GAErD,IAAI8zI,EADJtkF,EAAOyiD,YAAUziD,GAEjB,IACE,IAAM76B,EAAWt1B,KAAK64C,OAAOq7F,cAAc/jF,GACrCkyD,EAAcxgD,YAAY6yE,UAAU10I,MACpCg+G,EAAM,IAAIoQ,eAAe/L,GAC/BoyB,EAAan/G,EAASt3B,OAAOggH,EAAK,IAClC,MAAOv3G,GAEP,MADAgtI,EAAYzlD,OAAOxpE,MAAM,oCAAsC/d,GACzDA,EACP,QAAA8kE,EAAAljE,UAAA/M,OAXwEq5I,EAAqB,IAAAvxI,MAAAmoE,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAArBmpE,EAAqBnpE,EAAA,GAAAnjE,UAAAmjE,GAY9F,OAAOxrE,KAAKyM,QAALxQ,MAAA+D,KAAa,CAAAy0I,EAAY9zI,GAAWqf,OAAA20H,MAC5C,CAAA12I,IAAA,UAAAN,MAED,SAA0B8D,EAA+Bd,GACvD,IAAK,IAAD,IAAA+qE,EAAArjE,UAAA/M,OADuEq5I,EAAqB,IAAAvxI,MAAAsoE,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAArBgpE,EAAqBhpE,EAAA,GAAAtjE,UAAAsjE,GAE9F,IAAM5/C,EAAc/rB,KAAK0zI,mBAAkBz3I,MAAvB+D,KAAI,CAAoBA,KAAMW,GAAMqf,OAAK20H,IAC7D5oH,EAAYnY,KAAK5T,MACjByzI,EAAYzlD,OAAOlhB,MAAM,wBAEzB,IAAMu1C,EAAcxgD,YAAY+yE,UAA4B50I,KAAMyB,EAAWsqB,GAK7E,OAJAs2F,EAAYwyB,YAAY70I,KAAK4zI,gBAAgB5zI,KAAMqiH,IAC9CyyB,eAAe90I,KAAK6zI,mBAAmB7zI,KAAMqiH,IAClDoxB,EAAYzlD,OAAOlhB,MAAM,wBAElBu1C,EAAY0yB,UAEnB,MAAOtuI,GAEP,MADAgtI,EAAYzlD,OAAOxpE,MAAM,+BAAiC/d,GACpDA,KAET,CAAAxI,IAAA,cAAAN,MAED,SAAqBwyD,EAAyBxvD,GAE5C,IAAI8zI,EADJtkF,EAAOyiD,YAAUziD,GAEjB,IACE,IAAM76B,EAAWt1B,KAAK64C,OAAOq7F,cAAc/jF,GACrCkyD,EAAcxgD,YAAY6yE,UAAU10I,MACpCg+G,EAAM,IAAIoQ,eAAe/L,GAC/BoyB,EAAan/G,EAASt3B,OAAOggH,EAAK,IAClC,MAAOv3G,GAEP,MADAgtI,EAAYzlD,OAAOxpE,MAAM,oCAAsC/d,GACzDA,EACP,QAAAolE,EAAAxjE,UAAA/M,OAX+Dq5I,EAAqB,IAAAvxI,MAAAyoE,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAArB6oE,EAAqB7oE,EAAA,GAAAzjE,UAAAyjE,GAYrF,OAAO9rE,KAAK+mD,QAAL9qD,MAAA+D,KAAa,CAAAy0I,EAAY9zI,GAAWqf,OAAA20H,MAC5C,CAAA12I,IAAA,UAAAN,MAED,SAAiB82I,EAAgC9zI,GAC/C,IAAK,IAAD,IAAAqrE,EAAA3jE,UAAA/M,OAD+Dq5I,EAAqB,IAAAvxI,MAAA4oE,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAArB0oE,EAAqB1oE,EAAA,GAAA5jE,UAAA4jE,GAEtF,IAAMlgD,EAAc/rB,KAAK0zI,mBAAkBz3I,MAAvB+D,KAAI,CAAoBA,KAAMW,GAAMqf,OAAK20H,IAC7D5oH,EAAYnY,KAAK5T,MAEjB,IAAMqiH,EAAcxgD,YAAY+yE,UAA4B50I,KAAMy0I,EAAY1oH,GAG9E,OAFAs2F,EAAYwyB,YAAY70I,KAAK4zI,gBAAgB5zI,KAAMqiH,IAE5CA,EAAY3/C,SACnB,MAAOj8D,GAEP,MADAgtI,EAAYzlD,OAAOxpE,MAAM,+BAAiC/d,GACpDA,KAET,CAAAxI,IAAA,iBAAAN,MAED,SAAwBgD,GACtB,IAAK,IAAD,IAAAwrE,EAAA9jE,UAAA/M,OADsCq5I,EAAqB,IAAAvxI,MAAA+oE,EAAA,EAAAA,EAAA,KAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAArBuoE,EAAqBvoE,EAAA,GAAA/jE,UAAA+jE,GAE7D,IAAMrgD,EAAc/rB,KAAK0zI,mBAAkBz3I,MAAvB+D,KAAI,CAAoBA,KAAMW,GAAMqf,OAAK20H,IAE7D,OADA5oH,EAAYnY,KAAK5T,MACV+rB,EACP,MAAOtlB,GAEP,MADAgtI,EAAYzlD,OAAOxpE,MAAM,wCAA0C/d,GAC7DA,MAET,EAAAxI,IAAA,UAAAN,MAED,WACE,OAAO,IAAIq3I,uBACZvB,EAtMqB,GACEA,YAAAzlD,OAAiBtgB,cAAcmhB,UAAU,eAwMnE,IAAammD,mBAAkB,WAG7B,SAAAA,IAAA9zE,gBAAA,KAAA8zE,GACEh1I,KAAKi1I,SAAW,IAAIxB,YAyCrB,OAxCA/xE,aAAAszE,EAAA,EAAA/2I,IAAA,SAAAN,MAED,SAAiBu3I,GAEf,OADAl1I,KAAKi1I,SAASp8F,OAASq8F,EAChBl1I,OACR,CAAA/B,IAAA,qBAAAN,MAED,SAAmBw3I,GAEjB,OADAn1I,KAAKi1I,SAASvB,mBAAqByB,EAC5Bn1I,OACR,CAAA/B,IAAA,kBAAAN,MAED,SAAgBw3I,GAEd,OADAn1I,KAAKi1I,SAASrB,gBAAkBuB,EACzBn1I,OACR,CAAA/B,IAAA,qBAAAN,MAED,SAAmBw3I,GAEjB,OADAn1I,KAAKi1I,SAASpB,mBAAqBsB,EAC5Bn1I,OACR,CAAA/B,IAAA,kBAAAN,MAED,SAAgBy3I,GAEd,OADAp1I,KAAKi1I,SAASzyE,gBAAkB4yE,EACzBp1I,OACR,CAAA/B,IAAA,cAAAN,MAED,SAAY03I,GAEV,OADAr1I,KAAKi1I,SAAS7R,YAAciS,EACrBr1I,OACR,CAAA/B,IAAA,WAAAN,MAAA,SAAA23I,GAAA,SAAA/jI,EAAAk9D,GAAA,OAAA6mE,EAAAr5I,MAAA,KAAAoM,WAAA,OAAAkJ,EAAA2zD,SAAA,kBAAAowE,EAAApwE,YAAA3zD,EAAA,EAED,SAASA,GAEP,OADAvR,KAAKi1I,SAAS1jI,SAAWA,EAClBvR,SACR,CAAA/B,IAAA,QAAAN,MAED,WAEE,OADAqC,KAAKi1I,SAASrhI,OACP5T,KAAKi1I,aACbD,EA7C4B,GAgDlB1kF,eAAiBmjF,YAAYxyB,UAAUtwB,Q,qOCjRpD,kDAEO,MAAMxyD,UAAuBt8B,OAClCjD,cACE4B,QACAR,KAAKS,KAAO,Y,quDCIT,MAAMqvC,4BAA4B3R,8EACvCv/B,cACE4B,QACAR,KAAK8B,aAAe,eACpB9B,KAAKgC,WAAa,CAChB,IAAIg1B,gFAAgB,cAAel0B,0EAAUE,QAAQ,EAAO,SAC5D,IAAIg0B,gFAAgB,WAAYl0B,0EAAUC,QAAQ,EAAO,GACzD,IAAIi0B,gFAAgB,OAAQl0B,0EAAUE,QAAQ,EAAO,cACrD,IAAIg0B,gFAAgB,UAAWl0B,0EAAUC,QAAQ,EAAO,GACxD,IAAIi0B,gFAAgB,cAAel0B,0EAAUE,QAAQ,EAAO,gBAC5D,IAAIg0B,gFAAgB,cAAel0B,0EAAUC,QAAQ,EAAO,IAIhEN,kBACE,MAAMhB,EAAY,IAAI8zI,qBAItB,OADA9zI,EAAUT,eAAehB,KAAKkD,kBACvBzB,GAIX,MAAM8zI,6BAA6Bl1I,gFAAgBzB,eAAAiwC,GAAA,SAAAA,GAAAhwC,yIAAA,iBAAAA,yIAAA,iBAAAA,yIAAA,qBAAAA,yIAAA,sBAUjDb,OAAOmD,SACL,MAAMC,OAASD,QAAQE,UAAUrB,KAAKW,QAChCmgC,KAAO3/B,QAAQo4B,aACf3E,GAAKC,uCAAK5S,YACV,QAAC+c,QAAO,YAAEw2G,YAAW,YAAEC,aAAez1I,KAAKO,SAEjD,IAAIgH,EAAIwnC,IAAUvnC,EAAIunC,IAAU3nC,MAAQ,EAAGE,OAAS,EACpDlG,OAAOnB,QAAQm4B,IACb,MAAMgH,EAAOhH,EAAMe,UACnB5xB,EAAIN,KAAK0K,IAAIpK,EAAG63B,EAAK73B,GACrBC,EAAIP,KAAK0K,IAAInK,EAAG43B,EAAK53B,GACrBJ,MAAQH,KAAKyK,IAAItK,MAAOg4B,EAAK73B,EAAI63B,EAAKh4B,MAAQG,GAC9CD,OAASL,KAAKyK,IAAIpK,OAAQ83B,EAAK53B,EAAI43B,EAAK93B,OAASE,KAEnDxH,KAAKuH,EAAIA,EACTvH,KAAKwH,EAAIA,EACTxH,KAAKoH,MAAQA,MACbpH,KAAKsH,OAASA,OACd/E,QAAQyR,IAAI,SAAUzM,EAAGC,EAAGJ,MAAOE,QAEnC,MAAM3D,KAAO6xI,YACR1xI,WAAW,aAAc,sBACzBA,WAAW,MAAO,+BAClBA,WAAW,SAAU,aACrBA,WAAW,SAAU,wDACrBA,WAAW,MAAO,YACvBvB,QAAQyR,IAAI,qBAAsBrQ,MAElC,MAAMs3B,OAAS75B,OAAO6C,IAAI,CAACC,SAAUC,YAE5BC,KAAKT,OAER+xI,IAAMz6G,OAAO6M,OAAO,CAACO,EAAKs2E,IAAMt2E,EAAMs2E,EAAG,GACzCg3B,KAAO,CAAC,GACd16G,OAAOh7B,QAAQ,CAAC0+G,EAAGvjH,IAAMu6I,KAAK/5I,KAAK+5I,KAAKv6I,GAAKujH,IAC7C,MAAMi3B,aAAe36G,OAAOh3B,IAAI,CAAC06G,EAAGvjH,IAAMu6I,KAAKv6I,GAAKs6I,IAAM,KACpDG,WAAa56G,OAAOh3B,IAAI,CAAC06G,EAAGvjH,IAAOu6I,KAAKv6I,EAAI,GAAMs6I,IAAM,KAU9D,OATAnzI,QAAQyR,IAAI,CAACinB,cAAQ26G,0BAAcC,wBAEnCz0I,OAAOnB,QAAQ,CAACm4B,EAAOh9B,KACrB,MAAMmwC,EAAOvrC,KAAK0rC,mBAAmB5K,KAAM1I,GACrC6G,EAAKj/B,KAAK2rC,gBAAgBJ,EAAMnT,EAAOw9G,aAAax6I,GAAKq6I,YAAaI,WAAWz6I,GAAKq6I,aACtFt2G,EAAiB,IAAN/jC,EAAU,EAAK,IAAM4jC,QACtCpK,GAAGF,IAAIuK,EAAIE,KAGNvK,GAQT8W,mBAAmB5K,EAAM1I,GAAO,IAAA8I,EACzB9I,EAAMnK,aAAa,OACtBmK,EAAMlK,aAAa,KAAMnsB,+DAE3B,MAAM6pC,EAAS,aAAexT,EAAMnK,aAAa,MACjD,IAAIsd,EAAOzK,EAAKz3B,OAAQ,IAAGuiC,GACvBL,EAAKzR,UACPyR,EAAOzK,EAAK/6B,OAAO,YACdC,KAAK,KAAM4lC,GACXjiC,QAAQkiC,wDAAiB,GAC9BzT,EAAMlK,aAAa,YAAc,QAAO0d,OAE1C,MAAME,EAAeP,EAAKliC,OAAO,iBACjC,IAAKyiC,EAAahS,QAChB,OAAOgS,EAAa1jB,OAGtB,IAAIiZ,EAAc/hC,WAA6C,QAAnC4hC,EAAC9I,EAAMnK,aAAa,uBAAe,IAAAiT,IAAI,KACnEj8B,qCAAUmzB,GAAO7uB,UAAU,KAAK+3B,MAAK,WAAY,IAAAC,EAC/C,MAAMC,EAAYliC,WAA4C,QAAlCiiC,EAACvhC,KAAKiuB,aAAa,uBAAe,IAAAsT,IAAI,KAClEF,EAAcp6B,KAAKyK,IAAI8vB,EAAWH,MAGpC,MAAM0K,EAAcR,EAAKxlC,OAAO,QAC3BC,KAAK,QAAS,gBACdA,KAAK,IAAK,IAEf,OAAO+lC,EAAY3jB,OAWrBujB,gBAAgBJ,EAAMnT,EAAO4W,EAAaC,GACxC,MAAM,KAAClQ,EAAI,SAAE9/B,GAAYe,KAAKO,SACxB0rC,EAAa+C,EAAa9C,EAAa+C,EAAYD,EAEzD,IAAI7C,EAAKC,EACTD,EAAM,CACJF,WAAsB,OAAVA,QAAU,IAAVA,IAAc,EAC1BC,WAAY,EACZI,GAAItsC,KAAKuH,EAAIvH,KAAKoH,MAAQ,EAC1BmlC,GAAIvsC,KAAKwH,EAAIxH,KAAKsH,OAAS,EAC3BklC,GAAIvlC,KAAKyK,IAAI1R,KAAKoH,MAAOpH,KAAKsH,QAC9BmlC,GAAIxlC,KAAKyK,IAAI1R,KAAKoH,MAAOpH,KAAKsH,SAEhC/E,QAAQyR,IAAIm4B,EAAIG,GAAIH,EAAII,GAAIJ,GAC5BC,EAAkBF,EAElB,MAAMQ,EAAa,WACjB,MAAMC,EAAOC,WACTT,EAAIG,GACJH,EAAII,GACJJ,EAAIK,GACJL,EAAIM,GACJN,EAAIF,WACJE,EAAID,YAERX,EAAKrd,aAAa,IAAKye,IAMzB,OAHAD,IAGO7X,uCAAKwL,GAAG8L,EAAK,CAClBD,WAAYE,EACZrN,OACAgL,SAAU2C,EACVztC,cAMN,SAAS2tC,WAAWN,EAAIC,EAAIC,EAAIC,EAAIR,EAAYC,GAE9C,IAAKA,EAAY,MAAQ,IAAGI,KAAMC,IAGlCN,GAAc,IACdC,GAAc,IAGd,MAAMa,EAA0B,IAAfb,EAGba,IACFb,EAAa,KAIXA,EAAa,IACfA,GAAc,KAGhB,MAAMc,EAAWd,EAAa,IAAM,EAAI,EAGlCe,EAAMhB,EAAahlC,KAAKimC,GAAM,IAC9BC,GAAOlB,EAAaC,GAAcjlC,KAAKimC,GAAM,IAG7CE,EAAKd,EAAKE,EAAKvlC,KAAKomC,IAAIJ,GACxBK,EAAKf,EAAKE,EAAKxlC,KAAKsmC,IAAIN,GAExBO,EAAKlB,EAAKE,EAAKvlC,KAAKomC,IAAIF,GACxBM,EAAKlB,EAAKE,EAAKxlC,KAAKsmC,IAAIJ,GAe9B,OAAIJ,EACM,aACFK,KAAME,cACNd,KAAMC,WAAYe,KAAMC,cACxBjB,KAAMC,WAAYW,KAAME,KAGxB,WACFF,KAAME,YACNd,KAAMC,OAAQO,OAAcQ,KAAMC,YAClCnB,KAAMC,O,oCCxOd,W,kLCOO,MAAM1Y,EAAOj1B,cAClBC,eAAA,yBAGA,0BACE,OAAO,IAAIk1B,EAGb,oBAAoB30B,GAClB,GAAoB,kBAATA,EACT,OAAOA,EAET,MAAMjD,EAAS,GAKf,GAHI,aAAciD,GAA0B,MAAlBA,EAAK04B,UAA6C,KAAzB14B,EAAK04B,SAAStP,SAC/DrsB,EAAO27B,SAAW14B,EAAK04B,UAErB,cAAe14B,EAAM,CACvB,IAAI+6B,EAAQ/6B,EAAK40B,UAOjB,GANqB,kBAAVmG,GAAuC,KAAjBA,EAAM3R,SACrC2R,EAAQvP,IAAMC,MAAMsP,IAED,kBAAVA,GAAuB/2B,MAAMC,QAAQ82B,KAC9Ch+B,EAAO63B,UAAYmG,GAEjB/2B,MAAMC,QAAQ82B,IAA2B,IAAjBA,EAAM7+B,OAAc,CAC9C,IAAK,IAAIF,EAAI,EAAGA,EAAI++B,EAAM7+B,OAAQF,IACR,kBAAb++B,EAAM/+B,KACf++B,EAAM/+B,GAAKwvB,IAAMC,MAAMsP,EAAM/+B,KAGjCe,EAAO63B,UAAYmG,GAIvB,OAAmC,IAA/B5+B,OAAOqE,KAAKzD,GAAQb,OAGW,IAA/BC,OAAOqE,KAAKzD,GAAQb,QAAgB,aAAca,EAC7CA,EAAO27B,SAET37B,OANP,GAiBG,MAAM43B,UAAqBF,EAIhCj1B,YAAYk5B,EAAS,IAAK9D,EAAU,IAClCxzB,QAJF3B,eAAA,wBAKEmB,KAAK83B,SAAWA,EAChB93B,KAAKg0B,UAAYA,K,oCClErB,W,oCCAA,W,+ECCA,SAASjyB,IACP,IAAIrF,EAAI,GACJo5I,EAAY,mBAChB,IAAK,IAAI16I,EAAI,EAAGA,EAAI,GAAIA,IACtBsB,EAAEtB,GAAK06I,EAAUh/G,OAAO7vB,KAAK6L,MAAsB,GAAhB7L,KAAK+B,UAAkB,GAE5DtM,EAAE,IAAM,IACRA,EAAE,IAAMo5I,EAAUh/G,OAAgB,EAARp6B,EAAE,IAAa,EAAK,GAC9CA,EAAE,GAAKA,EAAE,IAAMA,EAAE,IAAMA,EAAE,IAAM,IAE/B,IAAIkS,EAAOlS,EAAEmrB,KAAK,IAClB,OAAOjZ,EAZT,mC,oCCCA,SAAS7M,IACP,IAAIrF,EAAI,GACJo5I,EAAY,mBAChB,IAAK,IAAI16I,EAAI,EAAGA,EAAI,GAAIA,IACtBsB,EAAEtB,GAAK06I,EAAUh/G,OAAO7vB,KAAK6L,MAAsB,GAAhB7L,KAAK+B,UAAkB,GAE5DtM,EAAE,IAAM,IACRA,EAAE,IAAMo5I,EAAUh/G,OAAgB,EAARp6B,EAAE,IAAa,EAAK,GAC9CA,EAAE,GAAKA,EAAE,IAAMA,EAAE,IAAMA,EAAE,IAAM,IAE/B,IAAIkS,EAAOlS,EAAEmrB,KAAK,IAClB,OAAOjZ,EAZT,mC,sDCAA,W,+tBCGO,MAAM8kB,sBAAsBhwB,oEAiBjC9E,cACE4B,QAjBF3B,yIAAA,oBAEAA,yIAAA,oBAEAA,yIAAA,oBAEAA,yIAAA,oBAEAA,yIAAA,qBAUEmB,KAAKS,KAAO,OACZT,KAAK2D,KAAO,IAOdC,QAAQC,WACN,MAAMq4D,QAAyB,QAAfl8D,KAAKuvB,MACfxrB,MAAQF,UAAUE,QAExB,IAAIJ,KAEFA,KADE3D,KAAKlF,KACC,qBAAoBkF,KAAKlF,KACxBkF,KAAKgG,KACN,0BAAyBhG,KAAKgG,SAC7BhG,KAAK2D,KACP3D,KAAK2D,KACPG,WAAW,aAAc,sBACzBA,WAAW,MAAO,+BAClBA,WAAW,SAAU,aACrBA,WAAW,SAAU,qBACrBA,WAAW,MAAO,YAEhB,IAETvB,QAAQyR,IAAI,YAAarQ,MACzB,MAAMoyI,YAAcA,CAAC3tH,KAAM3S,SACzB,IAAIugI,SAAWryI,KAAMsyI,UAAYj2I,KAAKuvB,MACD,KAAjCnH,KAAK6F,aAAa,YAAqBjuB,KAAKlF,OAC9Ck7I,SAAW,wDAA0Dh2I,KAAKlF,MAG5E,MAAMo7B,KAAO,SAAUhyB,SAAUC,WAC/B,OAAIf,MAAMC,QAAQ4yI,WACTA,UAAUttI,QAAQvE,KAAK4xI,WAEzB5xI,KAAK4xI,WAEd,OAAO9/G,KAAK9N,KAAM3S,QAGdygI,SAAW,IAAIt/H,IAMrB,OALA7S,MAAM9D,QAAQ,CAAC9B,EAAG/C,IAAM86I,SAASj1I,IAAI9C,EAAG/C,IACxC2I,MAAMyrB,KAAK,CAAC2mH,EAAIC,KACd,MAAM/2I,EAAM02I,YAAYI,EAAID,SAAS34I,IAAI44I,IAAOJ,YAAYK,EAAIF,SAAS34I,IAAI44I,IAC7E,OAAOj6E,SAAW78D,EAAMA,IAEnB4F,qCAAalB,U,oCCvExB,W,gGCEO,MAAMizB,EAgBXp4B,YACI8D,EAAU,QACVG,EAAUC,OAAU68B,IACpBn8B,GAAS,EACTb,GAnBJ9D,eAAA,yBAEAA,eAAA,yBAEAA,eAAA,wBAEAA,eAAA,4BAeEmB,KAAK0C,UAAYA,EACjB1C,KAAK6C,UAAqCA,EAAUmlB,cACpDhoB,KAAKwD,SAAWA,EAChBxD,KAAK2C,aAAeA,EAOtB0zI,aAAa14I,GACX,QAAcwB,IAAVxB,GAAuBqC,KAAKwD,SAC9B,OAAO,EAET,OAAQxD,KAAK6C,WACX,KAAKC,OAAUC,OAAQ,MAAwB,kBAAVpF,EACrC,KAAKmF,OAAUE,OAAQ,MAAwB,kBAAVrF,EACrC,KAAKmF,OAAU88B,OAAQ,MAAwB,kBAAVjiC,EACrC,KAAKmF,OAAUwzI,MAAO,OAAOlzI,MAAMC,QAAQ1F,GAC3C,KAAKmF,OAAU68B,IAAK,OAAO,EAC3B,KAAK78B,OAAUw/B,QAAS,MAAwB,mBAAV3kC,EACtC,KAAKmF,OAAUyzI,gBAAiB,MAAwB,kBAAV54I,GAAsByF,MAAMC,QAAQ1F,GAClF,KAAKmF,OAAUunC,gBAAiB,MAAwB,kBAAV1sC,GAAsByF,MAAMC,QAAQ1F,GAEpF,OAAO,K,kCChDX,sGAAO,MAEMo8B,EAAa,iBACbC,EAAmB,uBACnB6R,EAAkB,uB,uGCJ/B,kCAIO,MAAM/oC,EAAY,CACvBC,OAAQ,SACRC,OAAQ,SACR48B,OAAQ,SACR02G,MAAO,QACP32G,IAAK,MACL2C,QAAS,UACTi0G,gBAAiB,kBACjBlsG,gBAAiB,oB,kCCZnB,W,kICAO,MAAM3mC,EASX9E,cARAC,eAAA,oBASEmB,KAAKS,KAAO,UAQdmD,QAAQC,GACN,KAAM,wC,yDCnBV,W,mICGO,MAAMvD,EAcX1B,YAAY2B,EAAS,IAbrB1B,eAAA,sBAEAA,eAAA,sBAGAA,eAAA,oBAEAA,eAAA,wBAOEmB,KAAKW,OAASkzB,OAAOC,mBACrB9zB,KAAKlB,OAAS,IAAIH,OAClBqB,KAAKS,KAAO,UACZ,MAAM4B,EAAkBrC,KAAKe,qBAC7Bf,KAAKO,SAAWhF,OAAOiE,OAAO6C,EAAiB9B,GAOjDG,UAAUC,GAMR,OAJEX,KAAKW,OADe,kBAAXA,EACK,IAAIozB,OAAapzB,GAEjBA,EAETX,KAOTY,aAAaD,GAEX,OADApF,OAAOiE,OAAOQ,KAAKW,OAAQA,GACpBX,KAOTa,UAAU/B,GAER,OADAkB,KAAKlB,OAASA,EACPkB,KAOTc,aAAahC,GAMX,OALAvD,OAAOqE,KAAKd,GAAQmB,QAAQhC,SACNkB,IAAhBL,EAAOb,KACT+B,KAAKlB,OAAOb,GAAOa,EAAOb,MAGvB+B,KAMTe,qBACE,MAAO,GAOTC,eAAeT,GAEb,OADAhF,OAAOiE,OAAOQ,KAAKO,SAAUA,GACtBP,KAQTiB,IAAIhD,EAAKN,GAEP,OADAqC,KAAKO,SAAStC,GAAON,EACdqC,KAQTuB,gBAAgBJ,GACd,KAAM,+BAQRD,wBAAwBC,GACtB,KAAM,+BAQRnD,OAAOmD,GACL,KAAM,kC,kCCvHV","file":"static/js/app.cbc98510.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([7,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export class Timing {\n  /** @type {number | string} */\n  start\n  /** @type {number} */\n  offset\n  /** @type {number} */\n  duration\n  // /** @type {number} */\n  // stagger\n  /** @type {{repeat: number, delay: number} | boolean} */\n  yoyo\n\n  constructor() {\n  }\n\n  /**\n   * @returns {Timing}\n   */\n  static getDefaultTiming() {\n    const timing = new Timing();\n    timing.start = 0;\n    timing.offset = 0;\n    timing.duration = 1;\n    // timing.stagger = 0;\n    timing.yoyo = undefined;\n    return timing;\n  }\n\n  static simplifyJSON(json) {\n    if (typeof json !== 'object') {\n      return json;\n    }\n    const result = {};\n    if ('start' in json && json.start !== 0 && json.start !== '0') {\n      const num = parseFloat(json.start);\n      if (!isNaN(num)) {\n        result.start = num;\n      }\n    }\n    if ('offset' in json && json.offset !== 0 && json.offset !== '0') {\n      const num = parseFloat(json.offset);\n      if (!isNaN(num)) {\n        result.offset = num;\n      }\n    }\n    if ('duration' in json && json.duration !== 0 && json.duration !== '0') {\n      const num = parseFloat(json.duration);\n      if (!isNaN(num)) {\n        result.duration = num;\n      }\n    }\n    if ('yoyo' in json) {\n      const yoyo = Object.assign({}, Timing.getDefaultYoyo(), json.yoyo);\n      if (yoyo.repeat !== 1 || yoyo.delay !== 0) {\n        result.yoyo = json.yoyo;\n      }\n    }\n    return Object.keys(result).length === 0 ? undefined : result;\n  }\n\n  /**\n   * @returns {{delay: number, repeat: number}}\n   */\n  static getDefaultYoyo() {\n    return {repeat: 1, delay: 0};\n  }\n\n  getComputedTiming() {\n    const computedTiming = Timing.getDefaultTiming();\n\n    Object.keys(this).forEach(key => {\n      if (key === 'yoyo') {\n        return;\n      }\n      if (this[key] != null) {\n        computedTiming[key] = this[key];\n      }\n    });\n\n    if (this.yoyo === true) {\n      computedTiming.yoyo = Timing.getDefaultYoyo();\n    } else if (this.yoyo && typeof this.yoyo === 'object') {\n      computedTiming.yoyo = Timing.getDefaultYoyo();\n      Object.keys(this.yoyo).forEach(key => {\n        if (this.yoyo[key] != null) {\n          computedTiming.yoyo[key] = this.yoyo[key];\n        }\n      });\n    }\n\n    return computedTiming;\n  }\n\n  startPlusOffset() {\n    return (this.start ?? 0) + (this.offset ?? 0);\n  }\n}\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextPanel.vue?vue&type=style&index=0&id=6c09299e&prod&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GalleryView.vue?vue&type=style&index=0&id=388f08aa&prod&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AniSVGContainer.vue?vue&type=style&index=0&id=5484ec26&prod&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorView.vue?vue&type=style&index=0&id=0567f386&prod&scoped=true&lang=css&\"","import {BaseAnimation} from \"@/core/entities/spec/BaseAnimation\";\n\nexport class NativeAnimation extends BaseAnimation {\n  /**\n   * @param {Object<string, any>} settings\n   */\n  constructor(settings={}) {\n    super(settings);\n    this.type = 'native';\n  }\n\n  /**\n   * @param {Target | string} target\n   * @returns {NativeAnimation} this\n   */\n  setTarget(target) {\n    super.setTarget(target);\n    return this;\n  }\n\n  /**\n   * @param {Object} target\n   * @returns {NativeAnimation} this\n   */\n  updateTarget(target) {\n    super.updateTarget(target);\n    return this;\n  }\n\n  /**\n   * @param {Timing} timing\n   * @returns {NativeAnimation} this\n   */\n  setTiming(timing) {\n    super.setTarget(timing);\n    return this;\n  }\n\n  /**\n   * @param {Timing | Object} timing\n   * @returns {NativeAnimation} this\n   */\n  updateTiming(timing) {\n    super.updateTiming(timing);\n    return this;\n  }\n\n  /**\n   * @returns {Object<string, any>}\n   */\n  getDefaultSettings() {\n    return {};\n  }\n\n  /**\n   * @param {Object<string, any>} settings\n   * @returns {NativeAnimation} this\n   */\n  updateSettings(settings) {\n    Object.assign(this.settings, settings);\n    return this;\n  }\n\n  /**\n   * @param {String} key\n   * @param {*} value\n   * @returns {NativeAnimation} this\n   */\n  set(key, value) {\n    this.settings[key] = value;\n    return this;\n  }\n\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {Set<HTMLElement>}\n   */\n  computePossibleElements(context) {\n    const glyphs = context.getGlyphs(this.target);\n    return new Set(glyphs);\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  computeDuration(context) {\n    const {yoyo} = this.timing.getComputedTiming();\n    if (this.timing?.duration) {\n      return this.timing.duration;\n    }\n\n    const animation = this.create(context);\n    if (!animation) {\n      return 0;\n    }\n    if (yoyo) {\n      animation.yoyo(true);\n      animation.repeat(yoyo.repeat);\n      animation.repeatDelay(yoyo.delay);\n    }\n    const duration = animation.duration();\n\n    if (animation.clear) {\n      // is timeline not tween\n      animation.clear(true);\n    }\n    animation.kill();\n\n    return duration;\n  }\n}\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&id=299fb35c&prod&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExportSVGContainer.vue?vue&type=style&index=0&id=47eb8106&prod&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SVGContainer.vue?vue&type=style&index=0&id=62cf0b57&prod&scoped=true&lang=css&\"","import {computeUUID} from \"@/utils/common/uuid\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\n\nexport class BaseTemplate {\n  /** @type {string} */\n  templateName\n  /** @type {ParamDefinition[]} */\n  parameters\n\n  /** @type {string} */\n  type\n  /** @type {Object<string, any>} */\n  settings\n\n  constructor() {\n    // when not giving it a name...\n    // hope we never use this\n    this.templateName = computeUUID();\n    this.parameters = [];\n    this.type = 'unknown';\n    this.settings = {};\n  }\n\n  /**\n   * @returns {BaseTemplate}\n   */\n  clone() {\n    const obj = this.constructor();\n    return Object.assign(obj, this);\n  }\n\n  /**\n   * @param {Object<string, any>} settings\n   * @param {boolean=true} toCheck\n   * @returns {BaseAnimation}\n   */\n  instantiate(settings, toCheck=true) {\n    // init settings first\n    const defaultSettings = this.getDefaultSettings();\n    if (settings) {\n      this.settings = Object.assign(defaultSettings, settings);\n    } else {\n      this.settings = defaultSettings;\n    }\n\n    if (toCheck && !this.isValid()) {\n      console.warn('Failed to instantiate using template ' + this.templateName\n          + '. Params are not valid');\n      return null;\n    }\n    return this.createAnimation();\n  }\n\n  getDefaultSettings() {\n    const defaultSettings = {};\n    this.parameters.forEach(p => defaultSettings[p.paramName] = p.defaultValue);\n    return defaultSettings;\n  }\n\n  parseSettingsJSON(json) {\n    if (!json || typeof json !== 'object') {\n      return undefined;\n    }\n    const result = {};\n    this.parameters.forEach(p => {\n      if (p.paramName in json) {\n        const value = json[p.paramName];\n        if (value === undefined) {\n          return;\n        }\n        switch(p.paramType) {\n          case ParamType.NUMBER:\n            if (typeof value === 'string') {\n              const num = parseFloat(value);\n              if (!isNaN(num)) {\n                result[p.paramName] = num;\n              }\n            } else {\n              result[p.paramName] = value;\n            }\n            break;\n          case ParamType.STRING:\n            if (value !== '') {\n              result[p.paramName] = value;\n            }\n            break;\n          default:\n            result[p.paramName] = value;\n        }\n      }\n    });\n    return Object.keys(result).length === 0 ? undefined : result;\n  }\n\n  /**\n   * @param {string} paramName\n   * @returns {*}\n   */\n  getParamValue(paramName) {\n    return this.getParamValues()[paramName];\n  }\n\n  /**\n   * @returns {Object<string, any>}\n   */\n  getParamValues(paramNames=null) {\n    if (paramNames == null || !Array.isArray(paramNames)) {\n      return this.settings;\n    }\n    const ret = {};\n    paramNames.forEach(paramName => {\n      ret[paramName] = this.getParamValue(paramName);\n    });\n    return ret;\n  }\n\n  /**\n   * @returns {boolean}\n   */\n  isValid() {\n    return this.parameters.every(p => !p.required\n        || this.getParamValue(p.paramName) !== undefined);\n  }\n\n  /**\n   * @returns {BaseAnimation}\n   */\n  createAnimation() {\n    throw 'Template is not implemented';\n  }\n}\n","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TestView.vue?vue&type=style&index=0&id=a96b42aa&prod&scoped=true&lang=css&\"","import {BaseTransform} from \"@/core/entities/spec/BaseTransform\";\n\nexport class FilterTransform extends BaseTransform {\n  /** @type {string} */\n  type\n  /** @type {string} */\n  expr\n\n  constructor() {\n    super();\n    this.type = 'filter';\n    this.expr = 'true';\n  }\n\n  /**\n   * @param {d3.Selection} selection\n   * @returns {d3.Selection}\n   */\n  execute(selection) {\n    const expr = this.expr\n        .replaceAll('@classList', '__node__.classList')\n        .replaceAll('@id', '__node__.getAttribute(\"id\")')\n        .replaceAll('@index', '__index__')\n        .replaceAll('@datum', '(JSON.parse(__node__.getAttribute(\"ac-data\")) ?? {})')\n        .replaceAll('@el', '__node__');\n    // console.log('filter expr', expr)\n    const nodes = selection.nodes();\n    // eslint-disable-next-line no-unused-vars\n    const keepArray = nodes.map((__node__, __index__) => {\n      // console.log(__node__, eval(expr));\n      return eval(expr);\n    })\n    return selection.filter((d, i) => keepArray[i]);\n  }\n}\n\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div id=\"app\">\n    <router-view/>\n  </div>\n</template>\n\n<script>\n  export default {\n    name: 'App',\n  }\n</script>\n\n<style>\n  html, body, #app{\n    height: 100%;\n    width: 100%;\n    margin: 0;\n    padding: 0;\n  }\n  #app {\n    font-family: Avenir, Helvetica, Arial, sans-serif;\n    -webkit-font-smoothing: antialiased;\n    -moz-osx-font-smoothing: grayscale;\n  }\n\n  body .el-select-dropdown__wrap {\n    max-height: 600px;\n  }\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--1-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=299fb35c&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&id=299fb35c&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"test-view\"},[_c('svg')])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import * as d3 from 'd3';\nimport classifyPoint from \"robust-point-in-polygon\";\n\nexport default function lasso() {\n\n  let items = d3.selection(),\n      closePathDistance = 75,\n      closePathSelect = true,\n      isPathClosed = false,\n      hoverSelect = true,\n      targetArea,\n      on = {start: function(){}, draw: function(){}, end: function(){}};\n\n  // Function to execute on call\n  function lasso(_this) {\n\n    // add a new group for the lasso\n    let g = _this.append(\"g\")\n        .attr(\"class\",\"lasso\");\n\n    // add the drawn path for the lasso\n    let dyn_path = g.append(\"path\")\n        .attr(\"class\",\"drawn\");\n\n    // add a closed path\n    let close_path = g.append(\"path\")\n        .attr(\"class\",\"loop_close\");\n\n    // add an origin node\n    let origin_node = g.append(\"circle\")\n        .attr(\"class\",\"origin\");\n\n    // The transformed lasso path for rendering\n    let tpath;\n\n    // The lasso origin for calculations\n    let origin;\n\n    // The transformed lasso origin for rendering\n    let torigin;\n\n    // Store off coordinates drawn\n    let drawnCoords;\n\n    // Apply drag behaviors\n    let dragAction = d3.drag()\n        .on(\"start\",dragstart)\n        .on(\"drag\",dragmove)\n        .on(\"end\",dragend);\n\n    // Call drag\n    targetArea.call(dragAction);\n\n    function dragstart(event) {\n      // Init coordinates\n      drawnCoords = [];\n\n      // Initialize paths\n      tpath = \"\";\n      dyn_path.attr(\"d\",null);\n      close_path.attr(\"d\",null);\n\n      // Set every item to have a false selection and reset their center point and counters\n      items.nodes().forEach(function(e) {\n        e.__lasso.possible = false;\n        e.__lasso.selected = false;\n        e.__lasso.hoverSelect = false;\n        e.__lasso.loopSelect = false;\n\n        let box = e.getBoundingClientRect();\n        e.__lasso.lassoPoint = [Math.round(box.left + box.width/2),Math.round(box.top + box.height/2)];\n      });\n\n      // if hover is on, add hover function\n      if(hoverSelect) {\n        items.on(\"mouseover.lasso\",function() {\n          // if hovered, change lasso selection attribute to true\n          this.__lasso.hoverSelect = true;\n        });\n      }\n\n      // Run user defined start function\n      on.start(event);\n    }\n\n    function dragmove(event) {\n      // Get mouse position within body, used for calculations\n      let x,y;\n      if(event.sourceEvent.type === \"touchmove\") {\n        x = event.sourceEvent.touches[0].clientX;\n        y = event.sourceEvent.touches[0].clientY;\n      }\n      else {\n        x = event.sourceEvent.clientX;\n        y = event.sourceEvent.clientY;\n      }\n\n\n      // Get mouse position within drawing area, used for rendering\n      let tx = d3.pointer(event, this)[0];\n      let ty = d3.pointer(event, this)[1];\n\n      // Initialize the path or add the latest point to it\n      if (tpath===\"\") {\n        tpath = tpath + \"M \" + tx + \" \" + ty;\n        origin = [x,y];\n        torigin = [tx,ty];\n        // Draw origin node\n        origin_node\n            .attr(\"cx\",tx)\n            .attr(\"cy\",ty)\n            .attr(\"r\",4)\n            .attr(\"display\",null);\n      }\n      else {\n        tpath = tpath + \" L \" + tx + \" \" + ty;\n      }\n\n      drawnCoords.push([x,y]);\n\n      // Calculate the current distance from the lasso origin\n      let distance = Math.sqrt(Math.pow(x-origin[0],2)+Math.pow(y-origin[1],2));\n\n      // Set the closed path line\n      let close_draw_path = \"M \" + tx + \" \" + ty + \" L \" + torigin[0] + \" \" + torigin[1];\n\n      // Draw the lines\n      dyn_path.attr(\"d\",tpath);\n\n      close_path.attr(\"d\",close_draw_path);\n\n      // Check if the path is closed\n      isPathClosed = distance<=closePathDistance ? true : false;\n\n      // If within the closed path distance parameter, show the closed path. otherwise, hide it\n      if(isPathClosed && closePathSelect) {\n        close_path.attr(\"display\",null);\n      }\n      else {\n        close_path.attr(\"display\",\"none\");\n      }\n\n      items.nodes().forEach(function(n) {\n        n.__lasso.loopSelect = (isPathClosed && closePathSelect) ? (classifyPoint(drawnCoords,n.__lasso.lassoPoint) < 1) : false;\n        n.__lasso.possible = n.__lasso.hoverSelect || n.__lasso.loopSelect;\n      });\n\n      on.draw(event);\n    }\n\n    function dragend(event) {\n      // Remove mouseover tagging function\n      items.on(\"mouseover.lasso\",null);\n\n      items.nodes().forEach(function(n) {\n        n.__lasso.selected = n.__lasso.possible;\n        n.__lasso.possible = false;\n      });\n\n      // Clear lasso\n      dyn_path.attr(\"d\",null);\n      close_path.attr(\"d\",null);\n      origin_node.attr(\"display\",\"none\");\n\n      // Run user defined end function\n      on.end(event);\n    }\n  }\n\n  // Set or get list of items for lasso to select\n  lasso.items  = function(_) {\n    if (!arguments.length) return items;\n    items = _;\n    let nodes = items.nodes();\n    nodes.forEach(function(n) {\n      n.__lasso = {\n        \"possible\": false,\n        \"selected\": false\n      };\n    });\n    return lasso;\n  };\n\n  // Return possible items\n  lasso.possibleItems = function() {\n    return items.filter(function() {\n      return this.__lasso.possible;\n    });\n  }\n\n  // Return selected items\n  lasso.selectedItems = function() {\n    return items.filter(function() {\n      return this.__lasso.selected;\n    });\n  }\n\n  // Return not possible items\n  lasso.notPossibleItems = function() {\n    return items.filter(function() {\n      return !this.__lasso.possible;\n    });\n  }\n\n  // Return not selected items\n  lasso.notSelectedItems = function() {\n    return items.filter(function() {\n      return !this.__lasso.selected;\n    });\n  }\n\n  // Distance required before path auto closes loop\n  lasso.closePathDistance  = function(_) {\n    if (!arguments.length) return closePathDistance;\n    closePathDistance = _;\n    return lasso;\n  };\n\n  // Option to loop select or not\n  lasso.closePathSelect = function(_) {\n    if (!arguments.length) return closePathSelect;\n    closePathSelect = _===true ? true : false;\n    return lasso;\n  };\n\n  // Not sure what this is for\n  lasso.isPathClosed = function(_) {\n    if (!arguments.length) return isPathClosed;\n    isPathClosed = _===true ? true : false;\n    return lasso;\n  };\n\n  // Option to select on hover or not\n  lasso.hoverSelect = function(_) {\n    if (!arguments.length) return hoverSelect;\n    hoverSelect = _===true ? true : false;\n    return lasso;\n  };\n\n  // Events\n  lasso.on = function(type,_) {\n    if(!arguments.length) return on;\n    if(arguments.length===1) return on[type];\n    let types = [\"start\",\"draw\",\"end\"];\n    if(types.indexOf(type)>-1) {\n      on[type] = _;\n    }\n    return lasso;\n  };\n\n  // Area where lasso can be triggered from\n  lasso.targetArea = function(_) {\n    if(!arguments.length) return targetArea;\n    targetArea = _;\n    return lasso;\n  }\n\n  return lasso;\n}","<template>\n  <div class=\"test-view\">\n    <svg/>\n  </div>\n</template>\n\n<script>\n  import * as d3 from 'd3';\n  import d3Lasso from '@/utils/lasso/lasso';\n\n  export default {\n    name: 'TestView',\n    components: {\n    },\n    data() {\n      return {\n      }\n    },\n    methods: {\n      initLasso() {\n        let data = new Array(100).fill(null).map(()=>[Math.random(),Math.random()]);\n        let w = 960;\n        let h = 500;\n        let r = 3.5;\n\n        let svg = d3.select(this.$el).select('svg')\n            .attr(\"width\",w)\n            .attr(\"height\",h);\n\n        let circles = svg.selectAll(\"circle\")\n            .data(data)\n            .enter()\n            .append(\"circle\")\n            .attr(\"cx\",d=>d[0]*w)\n            .attr(\"cy\",d=>d[1]*h)\n            .attr(\"r\",r);\n\n        let lasso = d3Lasso()\n            .closePathSelect(true)\n            .closePathDistance(100)\n            .items(circles)\n            .targetArea(svg);\n\n        // Lasso functions\n        let lassoStart = function() {\n          lasso.items()\n              .attr(\"r\",3.5) // reset size\n              .classed(\"not_possible\",true)\n              .classed(\"selected\",false);\n        };\n\n        let lassoDraw = function() {\n\n          // Style the possible dots\n          lasso.possibleItems()\n              .classed(\"not_possible\",false)\n              .classed(\"possible\",true);\n\n          // Style the not possible dot\n          lasso.notPossibleItems()\n              .classed(\"not_possible\",true)\n              .classed(\"possible\",false);\n        };\n\n        let lassoEnd = function() {\n          // Reset the color of all dots\n          lasso.items()\n              .classed(\"not_possible\",false)\n              .classed(\"possible\",false);\n\n          // Style the selected dots\n          lasso.selectedItems()\n              .classed(\"selected\",true)\n              .attr(\"r\",7);\n\n          // Reset the style of the not selected dots\n          lasso.notSelectedItems()\n              .attr(\"r\",3.5);\n        };\n\n        lasso.on(\"start\", lassoStart)\n            .on(\"draw\", lassoDraw)\n            .on(\"end\", lassoEnd);\n\n        svg.call(lasso);\n      },\n    },\n    mounted() {\n      this.initLasso();\n    },\n    computed: {\n    }\n  }\n</script>\n\n<style scoped>\n.test-view >>> circle {\n  fill-opacity: 0.5;\n}\n\n.test-view >>> .lasso path {\n  stroke: rgb(80,80,80);\n  stroke-width:2px;\n}\n\n.test-view >>> .lasso .drawn {\n  fill-opacity:.05 ;\n}\n\n.test-view >>> .lasso .loop_close {\n  fill:none;\n  stroke-dasharray: 4,4;\n}\n\n.test-view >>> .lasso .origin {\n  fill:#3399FF;\n  fill-opacity:.5;\n}\n\n.test-view >>> .not_possible {\n  fill: rgb(200,200,200);\n}\n\n.test-view >>> .possible {\n  fill: #EC888C;\n}\n\n.test-view >>> .selected {\n  fill: steelblue;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TestView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TestView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TestView.vue?vue&type=template&id=a96b42aa&scoped=true&\"\nimport script from \"./TestView.vue?vue&type=script&lang=js&\"\nexport * from \"./TestView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TestView.vue?vue&type=style&index=0&id=a96b42aa&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a96b42aa\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-row',{staticClass:\"editor-view\",attrs:{\"tabindex\":\"0\"},on:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&$event.keyCode!==67)return null;if(!$event.altKey)return null;return _vm.clickLeftCollapseButton.apply(null, arguments)}}},[_c('div',{staticClass:\"header-container\",style:({height: _vm.headerHeight + 'px'})},[_c('el-row',{staticStyle:{\"height\":\"100%\"},attrs:{\"gutter\":5,\"type\":\"flex\",\"align\":\"middle\"}},[_c('el-col',{attrs:{\"span\":3}},[_c('span',{staticClass:\"header-text\",staticStyle:{\"user-select\":\"none\",\"cursor\":\"pointer\"},attrs:{\"title\":\"Gaia Homepage\"},on:{\"click\":_vm.clickHeaderText}},[_vm._v(\"Gaia\")])]),_c('el-col',{staticStyle:{\"text-align\":\"left\"},attrs:{\"span\":10}},[_c('el-button',{staticStyle:{\"font-size\":\"0.9rem\",\"margin-left\":\"10px\"},attrs:{\"icon\":\"el-icon-folder-opened\",\"type\":\"primary\",\"plain\":\"\",\"size\":\"medium\"},on:{\"click\":_vm.openProjSelPanel}},[_vm._v(\"Load\")]),_c('el-button',{staticStyle:{\"font-size\":\"0.9rem\",\"margin-left\":\"20px\"},attrs:{\"icon\":\"el-icon-download\",\"type\":\"primary\",\"plain\":\"\",\"size\":\"medium\"},on:{\"click\":_vm.saveSpec}},[_vm._v(\"Save Spec\")])],1),_c('el-col',{staticStyle:{\"text-align\":\"center\"},attrs:{\"span\":5,\"offset\":6}},[_c('el-button',{staticStyle:{\"font-size\":\"0.9rem\"},attrs:{\"icon\":\"el-icon-magic-stick\",\"type\":_vm.showCode ? 'primary': '',\"size\":\"medium\"},on:{\"click\":_vm.clickLeftCollapseButton}},[_vm._v(\"Code Panel \")])],1),_c('el-col',{attrs:{\"span\":0}},[_c('audio',{ref:\"audioEl\",staticStyle:{\"margin-left\":\"auto\",\"display\":\"none\"},attrs:{\"controls\":\"controls\",\"src\":_vm.audioSrc}})])],1)],1),_c('el-row',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isExportingFiles),expression:\"isExportingFiles\"}],staticClass:\"content-container\",attrs:{\"element-loading-text\":\"Exporting...It will take a few minutes.\"}},[_c('div',{staticClass:\"left-aside-container\",staticStyle:{\"margin-right\":\"4px\"},style:({width: _vm.asideWidth + 'px'})},[_c('DebugPanel',{staticStyle:{\"width\":\"calc(100% - 3px)\"},style:({height: '100%'}),attrs:{\"pane-height\":_vm.debugPanelHeight,\"pane-width\":_vm.asideWidth}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.asideWidthCache === null),expression:\"asideWidthCache === null\"}],staticClass:\"v-resizer\",attrs:{\"id\":\"resize-left\"}}),_c('div',{staticClass:\"middle-container\",staticStyle:{\"margin-left\":\"-2px\"}},[_c('div',{ref:\"mainContainer\",staticClass:\"main-container\",style:({height: _vm.svgHeight + 'px'}),on:{\"click\":_vm.clearSelection}},[_c('ExportSVGContainer',{staticStyle:{\"position\":\"absolute\",\"z-index\":\"992\"}}),_c('SVGContainer',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.aniStatus === 'stop'),expression:\"aniStatus === 'stop'\"}],staticStyle:{\"position\":\"absolute\",\"z-index\":\"993\"}}),_c('div',{staticStyle:{\"width\":\"90%\",\"height\":\"90%\",\"background\":\"white\",\"position\":\"absolute\",\"z-index\":\"995\"},style:({ visibility: _vm.aniStatus === 'playing' ? 'visible' : 'hidden' })}),_c('AniSVGContainer',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.aniStatus !== 'stop'),expression:\"aniStatus !== 'stop'\"}],staticStyle:{\"position\":\"absolute\",\"z-index\":\"995\"}})],1),_c('div',{staticClass:\"footer-container\",style:({height: _vm.footerHeight + 'px'})},[_c('div',{staticClass:\"h-resizer\",style:({\n            width: _vm.controlPanelWidth + 'px',\n            bottom: (_vm.footerHeight-6) + 'px',\n            }),attrs:{\"id\":\"hResizer\"},on:{\"mousedown\":_vm.bottomResizerMousedown}}),_c('ControlPanel',{attrs:{\"footerHeight\":_vm.footerHeight}})],1)])]),_c('el-dialog',{attrs:{\"title\":\"Load\",\"visible\":_vm.projSelPanelVisible,\"lock-scroll\":\"\",\"fullscreen\":\"\",\"width\":\"800px\"},on:{\"update:visible\":function($event){_vm.projSelPanelVisible=$event}}},[_c('ProjSelectionPanel',{on:{\"closeProjSelPanel\":_vm.closeProjSelPanel}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"footer\"},[_c('div',{staticClass:\"operation-group\"},[_c('el-button',{staticStyle:{\"width\":\"100px\",\"font-size\":\"0.9rem\"},attrs:{\"icon\":_vm.runIcon,\"type\":\"primary\",\"plain\":\"\",\"size\":\"mini\"},on:{\"click\":_vm.switchRunningState}},[_vm._v(_vm._s(this.running ? \"Pause\" : \"Play\")+\" \")]),_c('el-button',{staticStyle:{\"width\":\"100px\",\"margin-left\":\"20px\",\"font-size\":\"0.9rem\"},attrs:{\"icon\":\"el-icon-refresh\",\"type\":\"warning\",\"plain\":\"\",\"size\":\"mini\"},on:{\"click\":_vm.stopAndSeekToZero}},[_vm._v(\"Reset\")])],1),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.audioCompiling),expression:\"audioCompiling\"}],staticClass:\"timeline-group\",attrs:{\"element-loading-text\":\"Updating Audio\",\"element-loading-spinner\":\"el-icon-loading\"}},[_c('TextPanel',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.timelineMode === 'text' && false),expression:\"timelineMode === 'text' && false\"}],style:({ width: _vm.tlContainerWidth + 'px' }),attrs:{\"panelHeight\":_vm.showTimeline ? _vm.emptyHeight * 0.4 : _vm.emptyHeight,\"audioRunning\":_vm.running,\"compile\":_vm.compile},on:{\"aniChange\":_vm.handleAniChange}}),_c('el-slider',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.timelineMode === 'time'),expression:\"timelineMode === 'time'\"}],staticClass:\"slider\",style:({ width: _vm.timelineWidth + 'px' }),attrs:{\"max\":_vm.duration,\"marks\":_vm.marks,\"disabled\":_vm.disabled,\"format-tooltip\":_vm.formatTooltip},on:{\"input\":_vm.changeTime},model:{value:(_vm.time),callback:function ($$v) {_vm.time=$$v},expression:\"time\"}}),_c('TimelinePanel',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showTimeline),expression:\"showTimeline\"}],attrs:{\"duration\":_vm.duration,\"panelHeight\":_vm.emptyHeight},on:{\"aniChange\":_vm.handleAniChange,\"timeChange\":_vm.handleTimeChange}})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"timeline-panel\",style:({ height: _vm.panelHeight + 'px' }),attrs:{\"draggable\":\"false\"},on:{\"wheel\":_vm.wheelHandler,\"onmousewheel\":_vm.onmousewheel}},[_c('div',{staticClass:\"timeline-cursor-tooltip noSelection\",class:{ 'hided-div': !_vm.cursorInRange()},style:({ 'margin-left': _vm.cursorLeft - _vm.documentScrollLeft - 22 + 'px' }),on:{\"mousedown\":function($event){return _vm.moveTimeCursor()}}},[_vm._v(\" \"+_vm._s(_vm.getTimeString())+\" \")]),_c('div',{staticClass:\"timeline-scroller\",style:({\n        width: _vm.tlContainerWidth + 'px',\n        cursor: 'auto',\n        'overflow-x': 'auto',\n        'overflow-y': 'hidden',\n      }),on:{\"scroll\":function($event){return _vm.updateDocumentScrollLeft($event)},\"mousedown\":function($event){return _vm.mousedownTimeline($event)},\"mouseup\":function($event){return _vm.mouseupTimeline()},\"mousemove\":function($event){return _vm.mousemoveTimeline($event)}}},[_c('div',{style:({ width: _vm.timelineWidth + 'px', 'padding-bottom': '20px' })},[_c('div',{staticClass:\"timerow-scroller\",staticStyle:{\"overflow-y\":\"hidden\"},style:({\n            height: (_vm.panelHeight - 55) + 'px',\n          })},_vm._l((_vm.rowMapList),function(rowMap,rowIdx){return _c('div',{key:`row-${rowIdx}`,staticClass:\"timeline-row\",style:({\n              height: _vm.rowHeight + 'px',\n              width: '100%',\n            })},[_vm._l((rowMap.get(_vm.ItemType.HIDDEN)),function(vItem,itemIdx){return _c('div',{key:'rect-' + vItem.uuid,staticClass:\"timeline-item\",staticStyle:{\"cursor\":\"pointer\"},style:({\n                height: _vm.rectHeight + 'px',\n                width: vItem.width + 'px',\n                left: vItem.startX + 'px',\n                top: '1px',\n                background: _vm.getColor(vItem),\n              }),attrs:{\"id\":'rect-' + vItem.uuid,\"item-idx\":itemIdx,\"title\":`${_vm.getVItemTitle(vItem)} (${_vm.getDurationString(vItem)})`}},[_c('div',{staticClass:\"timeline-item-container\",on:{\"click\":function($event){return _vm.clickVItem(vItem)}}},[_c('font-awesome-icon',{staticStyle:{\"margin-right\":\"2px\"},style:({\n                    'background-color': 'white',\n                    color: _vm.getColor(vItem),\n                    'border-color': _vm.getColor(vItem),\n                  }),attrs:{\"id\":\"animationIcon\",\"icon\":_vm.getAnimationIcon(vItem)}}),_c('div',[_vm._v(\" \"+_vm._s(_vm.getVItemTitle(vItem))+\" (\"+_vm._s(_vm.getDurationString(vItem))+\") \")])],1),_c('div',{staticClass:\"timeline-item-cover\"})])}),_vm._l((rowMap.get(_vm.ItemType.SHOWN)),function(vItem,itemIdx){return _c('div',{key:'rect-' + vItem.uuid,staticClass:\"timeline-item\",style:({\n                height: _vm.rectHeight + 'px',\n                width: vItem.width + 'px',\n                left: vItem.startX + 'px',\n                top: '1px',\n                background: _vm.getColor(vItem),\n              }),attrs:{\"id\":'rect-' + vItem.uuid,\"item-idx\":itemIdx,\"title\":`${_vm.getVItemTitle(vItem)} (${_vm.getDurationString(vItem)})`}},[_c('div',{staticClass:\"timeline-item-container\",on:{\"mouseenter\":function($event){return _vm.mouseenter(vItem)},\"mouseleave\":function($event){return _vm.mouseleave(vItem)},\"mousedown\":function($event){return _vm.mousedown($event, vItem, itemIdx)}}},[_c('font-awesome-icon',{staticStyle:{\"margin-right\":\"2px\"},style:({\n                    'background-color': 'white',\n                    color: _vm.getColor(vItem),\n                    'border-color': _vm.getColor(vItem),\n                  }),attrs:{\"id\":\"animationIcon\",\"icon\":_vm.getAnimationIcon(vItem)}}),_c('div',[_vm._v(\" \"+_vm._s(_vm.getVItemTitle(vItem))+\" (\"+_vm._s(_vm.getDurationString(vItem))+\") \")])],1)])}),_vm._l((rowMap.get(_vm.ItemType.SHOWN)),function(vItem,itemIdx){return _c('div',{key:'tooltip-' + vItem.uuid,staticClass:\"timeline-item-tooltip\",style:({\n                height: _vm.rectHeight + 'px',\n                width: vItem.width + 'px',\n                left: vItem.startX + 'px',\n                top: '2px',\n              }),attrs:{\"id\":'tooltip-' + vItem.uuid,\"item-idx\":itemIdx},on:{\"mouseenter\":function($event){return _vm.mouseenter(vItem)},\"mouseleave\":function($event){return _vm.mouseleave(vItem)},\"mousedown\":function($event){return _vm.mousedown($event, vItem, itemIdx)}}},[_c('div',{staticClass:\"button-container\",staticStyle:{\"position\":\"absolute\",\"top\":\"0\",\"height\":\"100%\",\"border-radius\":\"5px 0 0 5px\"},style:({\n                  left: `-${_vm.dragButtonWidth}px`,\n                  width: _vm.dragButtonWidth + 'px',\n                  clipPath: `url(#rect-${vItem.uuid})`,\n                  cursor: _vm.isFadeColor(vItem.originItem) ? 'auto' : 'e-resize'\n                }),on:{\"mousedown\":function($event){return _vm.dragEdge($event, vItem, 'left')}}},[_c('el-icon',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],staticClass:\"el-icon-arrow-left my-icon\"})],1),_c('div',{staticClass:\"button-container\",staticStyle:{\"position\":\"absolute\",\"top\":\"0\",\"height\":\"100%\",\"border-radius\":\"0 5px 5px 0\"},style:({\n                  right: `-${_vm.dragButtonWidth + 2}px`,\n                  width: _vm.dragButtonWidth + 'px',\n                  cursor: _vm.isFadeColor(vItem.originItem) ? 'auto' : 'e-resize'\n                }),on:{\"mousedown\":function($event){return _vm.dragEdge($event, vItem, 'right')}}},[_c('el-icon',{directives:[{name:\"show\",rawName:\"v-show\",value:(false),expression:\"false\"}],staticClass:\"el-icon-arrow-right my-icon\"})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(vItem.mouseOn || vItem === _vm.movingVItem),expression:\"vItem.mouseOn || vItem === movingVItem\"}],staticClass:\"button-container foot-button-container\",staticStyle:{\"position\":\"absolute\",\"width\":\"100%\",\"left\":\"0\",\"min-width\":\"50px\",\"justify-content\":\"start\",\"border-radius\":\"0 0 4px 4px\"},style:({ marginTop: `${_vm.rectHeight}px`, height: '25px' })})])}),(_vm.newItem)?_c('div',{staticClass:\"timeline-item\",style:({\n                height: '16px',\n                width: _vm.newItem.width + 'px',\n                left: _vm.newItem.startX + 'px',\n                top: '1px',\n              })},[_c('span',{staticClass:\"timeline-item-text\"},[_vm._v(_vm._s(_vm.newItem.use))])]):_vm._e()],2)}),0)])]),_c('div',{staticStyle:{\"position\":\"relative\",\"pointer-events\":\"none\"},style:({\n               'margin-top': (-(_vm.panelHeight - 55) - _vm.rowHeight) + 'px',\n               // 'margin-top': -(rowHeight + 1) * visRows.length + 'px',\n             }),attrs:{\"id\":\"timeline-cursor-wrapper\"}},[_c('div',{staticClass:\"timeline-marks noSelection\",staticStyle:{\"pointer-events\":\"all\",\"position\":\"absolute\",\"margin-top\":\"-25px\",\"height\":\"25px\",\"z-index\":\"-10\",\"overflow\":\"hidden\"},style:({})},[_c('svg',{staticStyle:{\"height\":\"100%\"},style:({\n              'margin-left':  -_vm.documentScrollLeft + 'px',\n              width: _vm.timelineWidth + 'px'\n            }),attrs:{\"id\":\"timeline-marks-svg\"}})]),_c('div',{staticClass:\"timeline-cursor noSelection\",class:{ 'red-bg': _vm.cursorInRange()},style:({\n              'margin-top': 24 + 'px',\n              'margin-left': (_vm.cursorLeft - _vm.documentScrollLeft) + 'px',\n              height: (_vm.rowHeight + 1) * _vm.visRows.length + 'px',\n            })})])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div\n    class=\"timeline-panel\"\n    draggable=\"false\"\n    @wheel=\"wheelHandler\"\n    @onmousewheel=\"onmousewheel\"\n    :style=\"{ height: panelHeight + 'px' }\"\n  >\n    <!-- <svg width=\"100%\" height=\"200\" style=\"background: none\">\n     <g transform=\"translate(0,2)\">\n       <g>\n         <g v-for=\"(visRow, rowIdx) in visRows\" :key=\"`row-${rowIdx}`\">\n           <rect x=\"0\" :y=\"rowIdx * rowHeight\" :width=\"timelineWidth\" :height=\"rowHeight\"\n                 fill=\"none\"\n                 @drop=\"drop($event, visRow, rowIdx)\"\n                 @dragover=\"dragover($event, visRow, rowIdx)\"/>\n         </g>\n         <line v-for=\"(lineId) in Array.from({length: visRows.length+1},(o,i)=>i)\"\n               :key=\"'separate-line' + lineId\"\n               x1=\"0\" :y1=\"lineId * rowHeight\" :x2=\"timelineWidth\" :y2=\"lineId * rowHeight\"\n               stroke=\"gray\" stroke-width=\"2\"></line>\n       </g>\n     </g>\n   </svg> -->\n    <!-- <el-tooltip placement=\"top\" :value=\"timelineMode==='time'\" :content=\"getTimeString()\"> -->\n    <div\n      class=\"timeline-cursor-tooltip noSelection\"\n      :class=\"{ 'hided-div': !cursorInRange()}\"\n      :style=\"{ 'margin-left': cursorLeft - documentScrollLeft - 22 + 'px' }\"\n      @mousedown=\"moveTimeCursor()\"\n    >\n      {{ getTimeString() }}\n    </div>\n\n    <div\n      class=\"timeline-scroller\"\n      :style=\"{\n        width: tlContainerWidth + 'px',\n        cursor: 'auto',\n        'overflow-x': 'auto',\n        'overflow-y': 'hidden',\n      }\"\n      @scroll=\"updateDocumentScrollLeft($event)\"\n      @mousedown=\"mousedownTimeline($event)\"\n      @mouseup=\"mouseupTimeline()\"\n      @mousemove=\"mousemoveTimeline($event)\"\n    >\n      <div :style=\"{ width: timelineWidth + 'px', 'padding-bottom': '20px' }\">\n        <!-- el-slider__button -->\n        <!-- </el-tooltip> -->\n        <div\n          class=\"timerow-scroller\"\n          style=\"overflow-y: hidden\"\n          :style=\"{\n            height: (panelHeight - 55) + 'px',\n          }\"\n        >\n\n          <div\n            class=\"timeline-row\"\n            v-for=\"(rowMap, rowIdx) in rowMapList\"\n            :key=\"`row-${rowIdx}`\"\n            :style=\"{\n              height: rowHeight + 'px',\n              width: '100%',\n            }\"\n          >\n            <div\n                v-for=\"(vItem, itemIdx) in rowMap.get(ItemType.HIDDEN)\"\n                :key=\"'rect-' + vItem.uuid\"\n                class=\"timeline-item\"\n                :id=\"'rect-' + vItem.uuid\"\n                :style=\"{\n                height: rectHeight + 'px',\n                width: vItem.width + 'px',\n                left: vItem.startX + 'px',\n                top: '1px',\n                background: getColor(vItem),\n              }\"\n                style=\"cursor: pointer;\"\n                :item-idx=\"itemIdx\"\n                :title=\"`${getVItemTitle(vItem)} (${getDurationString(vItem)})`\"\n            >\n              <!-- an animation block -->\n              <div class=\"timeline-item-container\"\n                  @click=\"clickVItem(vItem)\">\n                <font-awesome-icon\n                    id=\"animationIcon\"\n                    :icon=\"getAnimationIcon(vItem)\"\n                    style=\"margin-right: 2px\"\n                    :style=\"{\n                    'background-color': 'white',\n                    color: getColor(vItem),\n                    'border-color': getColor(vItem),\n                  }\"\n                />\n                <div>\n                  {{ getVItemTitle(vItem) }} ({{ getDurationString(vItem) }})\n                </div>\n              </div>\n\n              <div class=\"timeline-item-cover\"/>\n            </div>\n\n            <div\n              v-for=\"(vItem, itemIdx) in rowMap.get(ItemType.SHOWN)\"\n              :key=\"'rect-' + vItem.uuid\"\n              class=\"timeline-item\"\n              :id=\"'rect-' + vItem.uuid\"\n              :style=\"{\n                height: rectHeight + 'px',\n                width: vItem.width + 'px',\n                left: vItem.startX + 'px',\n                top: '1px',\n                background: getColor(vItem),\n              }\"\n              :item-idx=\"itemIdx\"\n              :title=\"`${getVItemTitle(vItem)} (${getDurationString(vItem)})`\"\n            >\n              <!-- an animation block -->\n              <div\n                class=\"timeline-item-container\"\n                @mouseenter=\"mouseenter(vItem)\"\n                @mouseleave=\"mouseleave(vItem)\"\n                @mousedown=\"mousedown($event, vItem, itemIdx)\"\n              >\n<!--                <i class=\"el-icon-close\" @click=\"deleteVItem(vItem)\"></i>-->\n                <font-awesome-icon\n                  id=\"animationIcon\"\n                  :icon=\"getAnimationIcon(vItem)\"\n                  style=\"margin-right: 2px\"\n                  :style=\"{\n                    'background-color': 'white',\n                    color: getColor(vItem),\n                    'border-color': getColor(vItem),\n                  }\"\n                />\n                <div>\n                  {{ getVItemTitle(vItem) }} ({{ getDurationString(vItem) }})\n                </div>\n\n              </div>\n            </div>\n\n            <div\n              v-for=\"(vItem, itemIdx) in rowMap.get(ItemType.SHOWN)\"\n              :key=\"'tooltip-' + vItem.uuid\"\n              class=\"timeline-item-tooltip\"\n              :id=\"'tooltip-' + vItem.uuid\"\n              :item-idx=\"itemIdx\"\n              :style=\"{\n                height: rectHeight + 'px',\n                width: vItem.width + 'px',\n                left: vItem.startX + 'px',\n                top: '2px',\n              }\"\n              @mouseenter=\"mouseenter(vItem)\"\n              @mouseleave=\"mouseleave(vItem)\"\n              @mousedown=\"mousedown($event, vItem, itemIdx)\"\n            >\n              <div\n                class=\"button-container\"\n                :style=\"{\n                  left: `-${dragButtonWidth}px`,\n                  width: dragButtonWidth + 'px',\n                  clipPath: `url(#rect-${vItem.uuid})`,\n                  cursor: isFadeColor(vItem.originItem) ? 'auto' : 'e-resize'\n                }\"\n                style=\"\n                  position: absolute;\n                  top: 0;\n                  height: 100%;\n                  border-radius: 5px 0 0 5px;\n                \"\n                @mousedown=\"dragEdge($event, vItem, 'left')\"\n              >\n                <el-icon class=\"el-icon-arrow-left my-icon\" v-show=\"false\" />\n              </div>\n              <div\n                class=\"button-container\"\n                :style=\"{\n                  right: `-${dragButtonWidth + 2}px`,\n                  width: dragButtonWidth + 'px',\n                  cursor: isFadeColor(vItem.originItem) ? 'auto' : 'e-resize'\n                }\"\n                style=\"\n                  position: absolute;\n                  top: 0;\n                  height: 100%;\n                  border-radius: 0 5px 5px 0;\n                \"\n                @mousedown=\"dragEdge($event, vItem, 'right')\"\n              >\n                <el-icon class=\"el-icon-arrow-right my-icon\" v-show=\"false\" />\n              </div>\n\n              <!-- delete icon -->\n              <!-- v-show=\"vItem.mouseOn || vItem === movingVItem\" -->\n              <!-- <div\n                class=\"button-container head-button-container\"\n                :style=\"{ top: `-26px`, height: '25px' }\"\n                style=\"\n                  position: absolute;\n                  width: 100%;\n                  left: 0;\n                  min-width: 50px;\n                  justify-content: start;\n                  border-radius: 4px 4px 0 0;\n                  z-index: 10;\n                \"\n              >\n                <el-icon\n                  class=\"el-icon-delete delete-icon\"\n                  style=\"\n                    margin-left: auto;\n                    margin-right: 4px;\n                    cursor: pointer;\n                    border-radius: 4px;\n                    padding: 2px;\n                  \"\n                  @click.native=\"deleteVItem(vItem)\"\n                />\n              </div> -->\n              <div\n                class=\"button-container foot-button-container\"\n                v-show=\"vItem.mouseOn || vItem === movingVItem\"\n                :style=\"{ marginTop: `${rectHeight}px`, height: '25px' }\"\n                style=\"\n                  position: absolute;\n                  width: 100%;\n                  left: 0;\n                  min-width: 50px;\n                  justify-content: start;\n                  border-radius: 0 0 4px 4px;\n                \"\n              >\n              </div>\n            </div>\n\n            <div\n              v-if=\"newItem\"\n              class=\"timeline-item\"\n              :style=\"{\n                height: '16px',\n                width: newItem.width + 'px',\n                left: newItem.startX + 'px',\n                top: '1px',\n              }\"\n            >\n              <span class=\"timeline-item-text\">{{ newItem.use }}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <div id=\"timeline-cursor-wrapper\"\n         style=\"position: relative; pointer-events: none;\"\n         :style=\"{\n               'margin-top': (-(panelHeight - 55) - rowHeight) + 'px',\n               // 'margin-top': -(rowHeight + 1) * visRows.length + 'px',\n             }\">\n      <div\n          class=\"timeline-marks noSelection\"\n          style=\"\n              pointer-events: all;\n              position: absolute;\n              margin-top: -25px;\n              height: 25px;\n              z-index: -10;\n              overflow: hidden;\n            \"\n          :style=\"{}\"\n      >\n        <svg\n            id=\"timeline-marks-svg\"\n            style=\"height: 100%;\"\n            :style=\"{\n              'margin-left':  -documentScrollLeft + 'px',\n              width: timelineWidth + 'px'\n            }\"\n        ></svg>\n      </div>\n\n      <div\n          class=\"timeline-cursor noSelection\"\n          :class=\"{ 'red-bg': cursorInRange()}\"\n          :style=\"{\n              'margin-top': 24 + 'px',\n              'margin-left': (cursorLeft - documentScrollLeft) + 'px',\n              height: (rowHeight + 1) * visRows.length + 'px',\n            }\"\n      ></div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\n// import {aniChart} from \"@/core\";\nimport { computeUUID } from \"@/utils/common/uuid\";\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\nimport {faFlag, faStar} from \"@fortawesome/free-solid-svg-icons\";\nimport * as d3 from \"d3\";\n/* eslint-disable */\nexport default {\n  name: \"TimelinePanel\",\n  components: {\n    FontAwesomeIcon,\n  },\n  props: [\"duration\", \"panelHeight\"],\n  data() {\n    return {\n      rowHeight: 44,\n      rectHeight: 40,\n      tipHeight: 20,\n      dragButtonWidth: 20,\n      newItem: null,\n      inMoving: false,\n      movingVItem: null,\n\n      visRows: [],\n      shownVisRows: [],\n      hiddenVisRows: [],\n\n      cursorLeft: 0,\n      iconLeft: [],\n      faFlag: faFlag,\n      documentScrollLeft: 0,\n      moveTimeline: false,\n      moveTimelineX: 0,\n      moveTimelineY: 0,\n\n      ItemType: {\n        SHOWN: 'shown',\n        HIDDEN: 'hidden',\n      },\n    };\n  },\n  methods: {\n    onmousewheel() {\n      return false\n    },\n    cursorInRange() {\n      return this.cursorLeft - this.documentScrollLeft > -1\n    },\n    wheelHandler(event) {\n      this.$store.commit(\n        \"editor/updateTimelineScale\",\n        event.deltaY > 0 ? 1.1 : 0.9\n      );\n      this.$store.commit(\"editor/fixScrollPos\", event);\n    },\n    moveTimeCursor() {\n      if (this.aniStatus === 'stop') {\n        this.$notify({\n          type: 'warning',\n          title: 'Click play button first'\n        })\n        return\n      }\n      const left = document\n        .getElementById(\"timeline-cursor-wrapper\")\n        .getBoundingClientRect().left;\n      document.onmousemove = (e) => {\n        this.cursorLeft = Math.max(e.clientX - left, 0);\n        this.cursorLeft = Math.min(this.cursorLeft, this.timelineWidth);\n        this.$store.commit(\n          \"editor/changeTime\",\n          (this.cursorLeft * this.duration) / this.timelineWidth\n        );\n      };\n      document.onmouseup = () => {\n        document.onmousemove = null;\n        document.onmouseup = null;\n        this.$emit(\"timeChange\");\n      };\n    },\n    mousedown(event, vItem, itemIdx) {\n      event.stopPropagation();\n\n      if (this.isFadeColor(vItem.originItem)) {\n        return;\n      }\n\n      const element = document.getElementById(\"rect-\" + vItem.uuid);\n      const disX = event.clientX - element.offsetLeft;\n      let disY = element.getBoundingClientRect().top;\n      let rowIdx = this.visRows.findIndex((row) => row.includes(vItem));\n\n      this.inMoving = false;\n      this.movingVItem = null;\n      this.changeIconLeft(itemIdx, 0);\n\n      let moveCnt = 5;\n      // drag mouse\n      document.onmousemove = (e) => {\n        if (moveCnt-- > 0) {\n          return;\n        }\n        this.inMoving = true;\n        this.movingVItem = vItem;\n        const left = e.clientX - disX;\n        const start = Math.round(this.timelineScale.invert(left) * 100) / 100;\n        const castedLeft = this.timelineScale(start);\n        const top = e.clientY - disY;\n        // the distance towards timeline right destination\n        const right = castedLeft + vItem.width;\n\n        const rowCnt = this.timelineRows.length;\n        const rowOffset = Math.floor(top / this.rowHeight);\n        let curRow = rowIdx + rowOffset;\n        curRow = Math.max(0, curRow);\n        curRow = Math.min(rowCnt - 1, curRow);\n\n        // console.log('move', castedLeft, right, top, curRow, rowCnt, rowOffset);\n        // have changed row\n        if (rowOffset !== 0) {\n          // check conflict\n          this.moveVItemBetweenRow(vItem, rowIdx, curRow);\n          disY += this.rowHeight * rowOffset;\n          rowIdx = curRow;\n        }\n        if (castedLeft < 0 || right > this.timelineWidth) {\n          return;\n        }\n        // console.log(top);\n        this.$store.commit(\"editor/updateItemTiming\", {\n          itemId: vItem.originItem.id,\n          start,\n        });\n        // vItem.originItem will be update in last commit function\n        // this.$store.commit('editor/changeItemUpdateTuple', {\n        //   itemId: vItem.originItem.id,\n        //   newItemInfo: {},\n        // })\n        vItem.startX = castedLeft;\n      };\n      // release mouse\n      document.onmouseup = (e) => {\n\n        this.movingVItem = null;\n        document.onmousemove = null;\n        document.onmouseup = null;\n\n        if (!this.inMoving) {\n          // just click\n          this.clickVItem(vItem);\n          return;\n        }\n\n        this.inMoving = false;\n\n        const left = e.clientX - disX;\n        const right = left + vItem.width;\n        if (right > this.timelineWidth) {\n          this.extend();\n        }\n\n        this.$store.commit(\"editor/updateAniJSONUsingTimelineRows\");\n        this.$store.commit(\"editor/updateItemRow\", {\n          item: vItem.originItem,\n          rowIdx,\n        });\n        // vItem.originItem will be update in last commit function\n        // this.$store.commit('editor/changeItemUpdateTuple', {\n        //   item: vItem.originItem,\n        //   newItemInfo: {},\n        // })\n\n        this.$emit(\"aniChange\");\n      };\n    },\n    // dblclickVItem(event, vItem) {\n    //   // console.log('dblclick', event, vItem);\n    //   if (this.inMoving) {\n    //     // in moving\n    //     return;\n    //   }\n    //   this.$store.commit('editor/showSettingPanel', vItem.originItem);\n    // },\n    clickVItem(vItem) {\n      // console.log('>>> click', vItem)\n      // this.$store.commit(\"editor/changeClickIconSignal\", vItem.originItem);\n    },\n    deleteVItem(vItem) {\n      this.$store.commit(\"editor/deleteItem\", vItem.originItem);\n      this.$emit(\"aniChange\");\n    },\n    mouseenter(vItem) {\n      if (this.inMoving && this.movingVItem !== vItem) {\n        return;\n      }\n      vItem.mouseOn = true;\n\n      this.$store.commit('editor/changeHighlightItem', vItem.originItem)\n    },\n    mouseleave(vItem) {\n      if (this.inMoving && this.movingVItem !== vItem) {\n        return;\n      }\n      vItem.mouseOn = false;\n\n      if (this.itemForSettings !== this.highlightItem) {\n        this.$store.commit('editor/changeHighlightItem', null)\n      }\n    },\n    ifOverlap(vItem) {\n      const overlapItems = this.overlapVisRows.get(vItem.startX);\n      return (\n        overlapItems.length !== 1 &&\n        overlapItems.indexOf(vItem) === overlapItems.length - 1\n      );\n    },\n    flatIcons(vItem, init = false) {\n      if (!init) {\n        vItem.clicked = !vItem.clicked;\n      }\n      let left = 0;\n      this.visRows.flat().forEach((item, itemIdx) => {\n        if (item.startX === vItem.startX) {\n          this.changeIconLeft(itemIdx, left);\n          left += vItem.clicked ? 25 : 5;\n        }\n      });\n    },\n    dragEdge(event, vItem, direction) {\n      event.stopPropagation();\n      if (this.isFadeColor(vItem.originItem)) {\n        return;\n      }\n\n      console.log(\"mousedown\", event, vItem, direction);\n      const obj = event.target;\n      console.log(\"target\", obj);\n\n      this.inMoving = false;\n      this.movingVItem = null;\n\n      if (direction === \"left\") {\n        const element = document.getElementById(\"rect-\" + vItem.uuid);\n        const disX = event.clientX - element.offsetLeft;\n        document.onmousemove = (e) => {\n          this.inMoving = true;\n          this.movingVItem = vItem;\n          const left = e.clientX - disX;\n          const start = Math.round(this.timelineScale.invert(left) * 100) / 100;\n          const castedLeft = this.timelineScale(start);\n\n          // console.log(disX, castedLeft)\n          if (castedLeft < 0 || castedLeft > vItem.endX) {\n            return;\n          }\n          const width = vItem.width + vItem.startX - castedLeft;\n          const duration =\n            this.timelineScale.invert(width) - this.timelineScale.invert(0);\n          const castedDuration = Math.round(duration * 100) / 100;\n          this.$store.commit(\"editor/updateItemTiming\", {\n            itemId: vItem.originItem.id,\n            start,\n            duration: castedDuration,\n          });\n          // vItem.originItem will be update in last commit function\n          // this.$store.commit('editor/changeItemUpdateTuple', {\n          //   itemId: vItem.originItem.id,\n          //   newItemInfo: {},\n          // })\n          vItem.width =\n            this.timelineScale(castedDuration) - this.timelineScale(0);\n          vItem.startX = castedLeft;\n        };\n        document.onmouseup = (e) => {\n          const left = e.clientX - disX;\n          const right = left + vItem.width;\n          if (right > this.timelineWidth) {\n            this.extend();\n          }\n          this.inMoving = false;\n          this.movingVItem = null;\n          document.onmousemove = null;\n          document.onmouseup = null;\n\n          this.$store.commit(\"editor/updateAniJSONUsingTimelineRows\");\n        };\n      } else if (direction === \"right\") {\n        const element = document.getElementById(\"rect-\" + vItem.uuid);\n        const disX = event.clientX - element.offsetLeft - vItem.width;\n        document.onmousemove = (e) => {\n          this.inMoving = true;\n          const left = e.clientX - disX;\n          const start = Math.round(this.timelineScale.invert(left) * 100) / 100;\n          const castedLeft = this.timelineScale(start);\n\n          // console.log(disX, castedLeft)\n          if (castedLeft <= vItem.startX || castedLeft > this.timelineWidth) {\n            return;\n          }\n          const width = castedLeft - vItem.startX;\n          const duration =\n            this.timelineScale.invert(width) - this.timelineScale.invert(0);\n          const castedDuration = Math.round(duration * 100) / 100;\n          this.$store.commit(\"editor/updateItemTiming\", {\n            itemId: vItem.originItem.id,\n            duration: castedDuration,\n          });\n          // vItem.originItem will be update in last commit function\n          // this.$store.commit('editor/changeItemUpdateTuple', {\n          //   itemId: vItem.originItem.id,\n          //   newItemInfo: {},\n          // })\n          vItem.width =\n            this.timelineScale(castedDuration) - this.timelineScale(0);\n          vItem.endX = castedLeft;\n        };\n        document.onmouseup = (e) => {\n          const left = e.clientX - disX;\n          const right = left + vItem.width;\n          if (right > this.timelineWidth) {\n            this.extend();\n          }\n          this.inMoving = false;\n          document.onmousemove = null;\n          document.onmouseup = null;\n\n          this.$store.commit(\"editor/updateAniJSONUsingTimelineRows\");\n          this.$emit(\"aniChange\");\n        };\n      }\n    },\n\n    moveVItemBetweenRow(vItem, oldRowIdx, newRowIdx) {\n      const oldRow = this.visRows[oldRowIdx];\n      const newRow = this.visRows[newRowIdx];\n      oldRow.splice(oldRow.indexOf(vItem), 1);\n      newRow.push(vItem);\n    },\n\n    extend() {\n      console.log(\"extend\");\n      this.$store.commit(\n        \"editor/changeTimelineWidth\",\n        this.timelineWidth * 1.5\n      );\n    },\n    compress() {\n      console.log(\"compress\");\n    },\n\n    dragover(event) {\n      event.preventDefault();\n    },\n    drop(event, tlRow, rowIdx) {\n      const templateName = event.dataTransfer.getData(\"templateName\");\n      console.log(\"drop\", templateName);\n      if (!templateName) {\n        return;\n      }\n\n      const startX =\n        event.clientX -\n        document.querySelector(\".timeline-row\").getBoundingClientRect().left;\n      // console.log(event.clientX, this.$el.clientLeft)\n      this.$store.commit(\"editor/appendTimelineItem\", {\n        rowIdx,\n        templateName,\n        startX,\n      });\n    },\n    computeVisRows() {\n      this.visRows = this.timelineRows.map((tlRow) => {\n        return tlRow.map((item) => {\n          const duration = item.computedTotalDuration\n          const visItem = {\n            ...item,\n            originItem: item,\n            uuid: computeUUID(),\n            mouseOn: false,\n          };\n          visItem.startX = this.timelineScale(item.timing.offset ?? 0);\n          visItem.width = this.timelineScale(duration) - this.timelineScale(0);\n          visItem.endX = visItem.startX + visItem.width;\n          return visItem;\n        });\n      });\n    },\n    getColor(vItem) {\n      // return '#5288e8'\n      return '#3692d1'\n      // const title = this.getVItemTitle(vItem);\n      // const clazz = this.useToAniMap[title] ?? vItem.ani_type ?? \"Other\";\n      // return this.animationStyle[clazz]\n      //   ? this.animationStyle[clazz].color\n      //   : \"#b5b5d8\";\n    },\n    getAnimationIcon(vItem) {\n      return faStar\n      // const title = this.getVItemTitle(vItem);\n      // const clazz = this.useToAniMap[title] ?? vItem.ani_type ?? \"Other\";\n      // return this.animationStyle[clazz]\n      //   ? this.animationStyle[clazz].icon\n      //   : faFlag;\n    },\n    getVItemTitle(vItem) {\n      const item = vItem.originItem\n      if (item.initialRefSrc) {\n        return item.initialRefSrc.ref\n      }\n      return item.name\n      // if (vItem.originItem.sync || vItem.originItem.concat) {\n      //   this.storeVItemTitle(\n      //     vItem.originItem.sync ? \"sync\" : \"concat\"\n      //   );\n      //   return vItem.originItem.sync ? \"sync\" : \"concat\";\n      // }\n      // this.storeVItemTitle(\n      //   vItem.ref\n      //   // this.useToAniMap[vItem.use] ?? vItem.ani_type ?? \"Other\"\n      // );\n      // // return this.useToAniMap[vItem.use] ?? vItem.ani_type ?? \"Other\";\n      // return vItem.ref;\n    },\n    storeVItemTitle(vItemTitle) {\n      this.$store.commit(\"editor/storeVItemTitle\", vItemTitle);\n    },\n    getDurationString(vItem) {\n      let duration = vItem.originItem.computedTotalDuration\n      duration = (Math.round(duration * 100) / 100).toFixed(2);\n      return duration + \"s\";\n    },\n    getTimeString() {\n      return (this.time / 1000).toFixed(2) + \"s\";\n    },\n    updateCursorPositionByTime() {\n      this.cursorLeft = Math.max(\n        (this.time / this.duration) * this.timelineWidth,\n        0\n      );\n    },\n    changeIconLeft(index, left) {\n      this.iconLeft[index] = left;\n    },\n    updateDocumentScrollLeft(event) {\n      this.documentScrollLeft = event.target.scrollLeft;\n    },\n    mousedownTimeline(event) {\n      this.moveTimeline = true;\n      this.moveTimelineX = event.x;\n      this.moveTimelineY = event.y;\n    },\n    mousemoveTimeline(event) {\n      if (this.moveTimeline) {\n        const changeLeft = this.moveTimelineX - event.x;\n        const changeTop = this.moveTimelineY - event.y;\n        this.moveTimelineX = event.x;\n        this.moveTimelineY = event.y;\n        this.timelineScroller.scrollLeft += changeLeft;\n        this.timerowScroller.scrollTop += changeTop;\n      }\n    },\n    mouseupTimeline() {\n      this.moveTimeline = false;\n      this.moveTimelineX = 0;\n      this.moveTimelineY = 0;\n    },\n    getCoverItems(visRow) {\n      if (this.highlightItem === null) {\n        return [];\n      } else {\n        return visRow.filter(o => o.originItem !== this.highlightItem);\n      }\n    },\n    isFadeColor(item) {\n      return this.highlightItem !== null && this.highlightItem !== item;\n    },\n    hasHighlightItem() {\n      return this.highlightItem !== null;\n    }\n  },\n  mounted() {\n    this.$store.commit(\"editor/mountTimelinePanel\", this.$el);\n  },\n  watch: {\n    timelineRenderSign() {\n      this.computeVisRows();\n    },\n    time() {\n      this.updateCursorPositionByTime();\n    },\n    timelineWidth() {\n      this.updateCursorPositionByTime();\n      this.$store.commit(\"editor/updateTimelineSvg\");\n    },\n    overlapVisRows(newV) {\n      this.iconLeft = Array.apply(0, Array(newV.length)).map(function () {});\n      this.visRows.flat().forEach((vItem) => {\n        this.flatIcons(vItem, true);\n      });\n    },\n    scrollLeft(newV) {\n      this.timelineScroller.scrollLeft = newV;\n    },\n  },\n  computed: {\n    ...mapState(\"editor\", {\n      sceneEl: (state) => state.sceneEl,\n      time: (state) => state.time,\n      timelineRows: (state) => state.timelineRows,\n      timelineScale: (state) => state.timelineScale,\n      tlContainerWidth: (state) => state.tlContainerWidth,\n      timelineWidth: (state) => state.timelineWidth,\n      timelineRenderSign: (state) => state.timelineRenderSign,\n      durationMap: (state) => state.durationMap,\n      animationStyle: (state) => state.animationStyle,\n      useToAniMap: (state) => state.useToAniMap,\n      scrollLeft: (state) => state.scrollLeft,\n      highlightItem: state => state.highlightItem,\n      itemForSettings: state => state.itemForSettings,\n      aniStatus: state => state.aniStatus,\n    }),\n    overlapVisRows() {\n      return d3.group(this.visRows.flat(), (d) => d.startX);\n    },\n    timelineScroller() {\n      return document.querySelector(\".timeline-scroller\");\n    },\n    timerowScroller() {\n      return document.querySelector(\".timerow-scroller\");\n    },\n    rowMapList() {\n      return this.visRows.map(row => {\n        const rowMap = new Map();\n        if (this.highlightItem !== null) {\n          const shown = row.filter(vItem => vItem.originItem === this.highlightItem);\n          const hidden = row.filter(vItem => vItem.originItem !== this.highlightItem)\n          rowMap.set(this.ItemType.SHOWN, shown);\n          rowMap.set(this.ItemType.HIDDEN, hidden);\n        } else {\n          rowMap.set(this.ItemType.SHOWN, row);\n          rowMap.set(this.ItemType.HIDDEN, []);\n        }\n        return rowMap;\n      });\n    },\n  },\n};\n</script>\n\n<style scoped>\n.timeline-panel {\n  padding: 0 20px 5px 20px;\n  position: relative;\n  cursor: auto;\n}\n.timeline-cursor {\n  width: 0.1em;\n}\n.red-bg {\n  background-color: rgb(243, 0, 0);\n}\n.timeline-scroller::-webkit-scrollbar {\n  display: none;\n}\n.timeline-row {\n  border: 1px none #adadad;\n  border-top-style: solid;\n  /*background: #efefef;*/\n  position: relative;\n}\n.timeline-row:last-child {\n  border: #adadad solid 1px;\n  border-left: none;\n  border-right: none;\n}\n.timeline-item {\n  cursor: move;\n  position: absolute;\n  background: #b5b5d8;\n  border: #dddddd solid 1px;\n  border-radius: 5px;\n}\n.timeline-item-container {\n  margin: 0px 4px;\n  height: 100%;\n  width: 100%;\n  position: relative;\n  display: flex;\n  justify-content: left;\n  align-items: center;\n\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n\n  color: white;\n  font-weight: bold;\n  user-select: none;\n  font-size: 14px;\n}\n.timeline-item-text {\n  user-select: none;\n  font-family: \"Lato\", \"Lucida Grande\", \"Segoe UI\", sans-serif;\n\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  /*pointer-events: none;*/\n}\n.timeline-item-tooltip {\n  position: absolute;\n  pointer-events: none;\n}\n.button-container {\n  z-index: 999;\n  pointer-events: all;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  /* background: rgba(179, 179, 179, 0.7); */\n}\n.head-button-container > .delete-icon:hover {\n  background: rgba(102, 102, 102, 0.4);\n}\n\n.my-icon {\n  overflow: hidden;\n  pointer-events: none;\n}\n.timeline-cursor-tooltip {\n  cursor: move;\n  background: #24476e;\n  color: #ffffff;\n  font-size: smaller;\n  padding: 5px;\n  width: fit-content;\n  border-radius: 5px;\n}\n.hided-div {\n  opacity: 0;\n}\n#animationIcon {\n  font-size: small;\n  padding: 2px;\n  border-radius: 5px;\n  border: solid 2px;\n}\n.noSelection {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  outline: 0;\n}\n.el-icon-close {\n  position: absolute;\n  top: 3px;\n  right: -3px;\n  width: 20px;\n  height: 10px;\n}\n.el-icon-close:hover {\n  cursor: pointer;\n}\n\n.timeline-item-cover {\n  width: 100%;\n  height: 100%;\n  background: rgba(255, 255, 255, 0.75);\n  position: relative;\n  top: -100%;\n  pointer-events: none;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelinePanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelinePanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TimelinePanel.vue?vue&type=template&id=c6ba2622&scoped=true&\"\nimport script from \"./TimelinePanel.vue?vue&type=script&lang=js&\"\nexport * from \"./TimelinePanel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TimelinePanel.vue?vue&type=style&index=0&id=c6ba2622&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c6ba2622\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{ref:\"textPanel\",staticClass:\"text-panel\",style:({'height': _vm.panelHeight + 'px'}),attrs:{\"id\":\"text-panel\"},on:{\"click\":_vm.click}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.inEditMode),expression:\"inEditMode\"}],staticStyle:{\"padding\":\"0 10px\",\"position\":\"relative\"},attrs:{\"id\":\"editBox\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"placeholder\":\"Enter your script here\",\"rows\":5,\"autosize\":\"\"},model:{value:(_vm.textPanelText),callback:function ($$v) {_vm.textPanelText=$$v},expression:\"textPanelText\"}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.inEditMode),expression:\"!inEditMode\"}],staticStyle:{\"padding\":\"0 10px\",\"position\":\"relative\"},attrs:{\"id\":\"showBox\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.audioRunning&&_vm.showToolbox),expression:\"!audioRunning&&showToolbox\"}],staticClass:\"timeStampWrapper\",style:({\n                'top': _vm.timeStampTop,\n                'left': _vm.timeStampLeft\n              }),attrs:{\"contenteditable\":\"false\"}},[_c('span',{staticClass:\"timeStamp\"},[_vm._v(\" \"+_vm._s(_vm.timeStamp)+\" \")])]),_c('div',{staticClass:\"word-container\"},_vm._l((_vm.words),function(wordObj,wordIdx){return _c('div',{key:'word-' + wordIdx,ref:'word-' + wordIdx,refInFor:true,class:'narration-wrapper-'+wordIdx},[_vm._l((_vm.wordIdxIcons(wordIdx)),function(iconObj,iconIdx){return _c('div',{key:'animationIcon-'+iconIdx,staticClass:\"narration-icon noSelection\",staticStyle:{\"display\":\"contents\"},attrs:{\"id\":'animationIcon-wrapper-'+wordIdx+'-'+iconIdx}},[_c('el-tooltip',{attrs:{\"placement\":\"top\",\"content\":iconObj.use}},[_c('div',{staticClass:\"animationIcon\",attrs:{\"id\":'animationIcon-'+wordIdx+'-'+iconIdx},on:{\"click\":function($event){return _vm.clickIcon(iconObj, true)},\"mouseenter\":function($event){return _vm.mouseenterIcon(iconObj)},\"mouseleave\":function($event){return _vm.mouseleaveIcon(iconObj)}}},[_c('font-awesome-icon',{style:({\n                    'background-color': _vm.animationTypeToColor(iconObj,'background'),\n                    'color': _vm.animationTypeToColor(iconObj,'color'),\n                    'border-color': _vm.animationTypeToColor(iconObj,'border'),\n                  }),attrs:{\"id\":\"animationIcon\",\"icon\":_vm.animationTypeToIcon(iconObj)}})],1)]),_c('span',{staticClass:\"narration-word noSelection\"},[_vm._v(\" \")])],1)}),_vm._l((_vm.keywordIcons(wordIdx)),function(iconObj,iconIdx){return _c('div',{key:'keywordIcon-'+iconIdx,staticClass:\"narration-icon noSelection\",staticStyle:{\"display\":\"contents\"},attrs:{\"id\":'keywordIcon-wrapper-'+wordIdx}},[_c('div',{staticClass:\"keywordIcon\",attrs:{\"id\":'keywordIcon-'+wordIdx+'-'+iconIdx},on:{\"click\":function($event){return _vm.clickIcon(iconObj, false)},\"mouseenter\":function($event){return _vm.mouseenterIcon(iconObj)},\"mouseleave\":function($event){return _vm.mouseleaveIcon(iconObj)}}},[_c('font-awesome-icon',{style:({\n                    'background-color': _vm.keywordIconStyle(iconObj, 'background'),\n                    'color': _vm.keywordIconStyle(iconObj, 'color'),\n                    'border-color': _vm.keywordIconStyle(iconObj, 'border'),\n                  }),attrs:{\"id\":\"keywordIcon\",\"icon\":iconObj.icon}})],1),_c('span',{staticClass:\"narration-word noSelection\"},[_vm._v(\" \")])])}),_c('span',{staticClass:\"narration-word noSelection\",class:{\n                  'highlight-word': !_vm.audioRunning&&_vm.highlightWordIndex===wordIdx,\n                  'selected-word': _vm.inSelectedRange(wordIdx),\n                  'audio-word': _vm.aniStatus !== 'stop' && _vm.audioWordIndex === wordIdx,\n                  // 'bolden-word': isLinkedWord(wordIdx),\n                  'underline-word': _vm.isLinkedWord(wordIdx),\n                },attrs:{\"id\":'narration-word-'+wordIdx},on:{\"mousedown\":function($event){return _vm.mousedown($event, wordIdx)},\"mouseenter\":function($event){return _vm.mouseenter(wordIdx)},\"mouseleave\":function($event){return _vm.mouseleave(wordIdx)}}},[_vm._v(_vm._s(wordObj.word))]),_c('span',{staticClass:\"narration-word noSelection\",class:{\n                  'selected-word': _vm.inSelectedRange(wordIdx) && wordIdx !== Math.max(_vm.selectedStart, _vm.selectedEnd),\n                  'underline-word': _vm.isLinkedWord(wordIdx) && wordIdx !== Math.max(_vm.linkedStart, _vm.linkedEnd),\n                },on:{\"mousedown\":function($event){return _vm.mousedown($event, wordIdx)}}},[_vm._v(\" \")])],2)}),0)])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/**\n * @enum {string}\n * @readonly\n */\nexport const SelectionToolType = {\n  NORMAL: 'normal',\n  RECT: 'rect',\n  LASSO: 'lasso',\n  CLICK: 'click',\n  COMP: 'component',\n}","<template>\n  <div class=\"text-panel\" id=\"text-panel\" ref=\"textPanel\"\n    :style=\"{'height': panelHeight + 'px'}\"\n        @click=\"click\">\n\n    <div v-show=\"inEditMode\"\n      id=\"editBox\" style=\"padding: 0 10px; position: relative;\">\n      <el-input\n      type=\"textarea\"\n      placeholder=\"Enter your script here\"\n      :rows=\"5\"\n      v-model=\"textPanelText\"\n      autosize>\n      </el-input>\n    </div>\n\n    <div v-show=\"!inEditMode\"\n      id=\"showBox\" style=\"padding: 0 10px; position: relative;\">\n\n      <div class=\"timeStampWrapper\" v-show=\"!audioRunning&&showToolbox\" contenteditable=\"false\"\n        :style=\"{\n                  'top': timeStampTop,\n                  'left': timeStampLeft\n                }\">\n        <span class=\"timeStamp\">\n          {{timeStamp}}\n        </span>\n      </div>\n\n      <div class=\"word-container\">\n        <div v-for=\"(wordObj, wordIdx) in words\" :key=\"'word-' + wordIdx\" :ref=\"'word-' + wordIdx\"\n            :class=\"'narration-wrapper-'+wordIdx\">\n\n          <div class=\"narration-icon noSelection\"\n              v-for=\"(iconObj, iconIdx) in wordIdxIcons(wordIdx)\" :key=\"'animationIcon-'+iconIdx\"\n                :id=\"'animationIcon-wrapper-'+wordIdx+'-'+iconIdx\"\n                style=\"display:contents;\">\n            <el-tooltip placement=\"top\"\n                        :content=\"iconObj.use\" >\n              <div class=\"animationIcon\" :id=\"'animationIcon-'+wordIdx+'-'+iconIdx\"\n                    @click=\"clickIcon(iconObj, true)\"\n                    @mouseenter=\"mouseenterIcon(iconObj)\"\n                    @mouseleave=\"mouseleaveIcon(iconObj)\">\n                <font-awesome-icon id=\"animationIcon\"\n                    :icon=\"animationTypeToIcon(iconObj)\"\n                    :style=\"{\n                      'background-color': animationTypeToColor(iconObj,'background'),\n                      'color': animationTypeToColor(iconObj,'color'),\n                      'border-color': animationTypeToColor(iconObj,'border'),\n                    }\"/>\n              </div>\n            </el-tooltip>\n\n            <span class=\"narration-word noSelection\">&nbsp;</span>\n\n          </div>\n\n          <div class=\"narration-icon noSelection\"\n              v-for=\"(iconObj, iconIdx) in keywordIcons(wordIdx)\" :key=\"'keywordIcon-'+iconIdx\"\n              :id=\"'keywordIcon-wrapper-'+wordIdx\"\n              style=\"display:contents;\">\n\n              <div class=\"keywordIcon\" :id=\"'keywordIcon-'+wordIdx+'-'+iconIdx\"\n                  @click=\"clickIcon(iconObj, false)\"\n                  @mouseenter=\"mouseenterIcon(iconObj)\"\n                  @mouseleave=\"mouseleaveIcon(iconObj)\">\n                <font-awesome-icon id=\"keywordIcon\"\n                    :icon=\"iconObj.icon\"\n                    :style=\"{\n                      'background-color': keywordIconStyle(iconObj, 'background'),\n                      'color': keywordIconStyle(iconObj, 'color'),\n                      'border-color': keywordIconStyle(iconObj, 'border'),\n                    }\"/>\n              </div>\n\n              <span class=\"narration-word noSelection\">&nbsp;</span>\n\n          </div>\n\n          <span class=\"narration-word noSelection\"\n                :id=\"'narration-word-'+wordIdx\"\n                :class=\"{\n                    'highlight-word': !audioRunning&&highlightWordIndex===wordIdx,\n                    'selected-word': inSelectedRange(wordIdx),\n                    'audio-word': aniStatus !== 'stop' && audioWordIndex === wordIdx,\n                    // 'bolden-word': isLinkedWord(wordIdx),\n                    'underline-word': isLinkedWord(wordIdx),\n                  }\"\n                @mousedown=\"mousedown($event, wordIdx)\"\n                @mouseenter=\"mouseenter(wordIdx)\"\n                @mouseleave=\"mouseleave(wordIdx)\">{{wordObj.word}}</span>\n\n          <!-- Keep this format as it is now, or there will be hidden spaces -->\n          <span class=\"narration-word noSelection\"\n                :class=\"{\n                    'selected-word': inSelectedRange(wordIdx) && wordIdx !== Math.max(selectedStart, selectedEnd),\n                    'underline-word': isLinkedWord(wordIdx) && wordIdx !== Math.max(linkedStart, linkedEnd),\n                  }\"\n                @mousedown=\"mousedown($event, wordIdx)\">&nbsp;</span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {mapGetters, mapState} from 'vuex';\nimport {SelectionToolType} from \"@/utils/common/SeletionToolType\";\nimport {FontAwesomeIcon} from '@fortawesome/vue-fontawesome';\n\nexport default {\n    name: 'TextPanel',\n    components: {\n      FontAwesomeIcon\n    },\n    props: ['audioRunning','compile','panelHeight'],\n    data() {\n      return {\n        highlightWordIndex: -1,\n        audioWordIndex: -1,\n\n        // don't confuse with textHasChanged\n        // this means the text has changed while editing text\n        textChanged: false,\n\n        selectedStart: -1,\n        selectedEnd: -1,\n        isSelecting: false,\n\n        linkedStart: -1,\n        linkedEnd: -1,\n\n        textPanelWords: [],\n\n        showToolbox: false,\n        isTargetButtonClicked: false,\n\n        timeStamp: 0,\n        timeStampTop: 0,\n        timeStampLeft: 0,\n\n        animationButtonsTop: 0,\n        animationButtonsLeft: 0,\n\n        animationTargets: null,\n        justHoveredIcon: null,\n\n        animationActions: [],\n\n        isPreviewingIcon: false,\n        isEditingIcon: false,\n        iconHasChanged: false,\n\n        isEditingText: false,\n        // This is a bad name.\n        // It means \"selected target has changed while editing text\"\n        textHasChanged: false,\n\n        changeHighlightItemInTextPanel: false,\n\n        isCreatingItem: false,\n      }\n    },\n    methods: {\n      handleSelect (key, keyPath) {\n        console.log(key, keyPath)\n      },\n      shortNotify(msg = 'Please commit your selection before continuing.') {\n        this.$notify({\n          title: msg,\n          type: 'warning',\n        });\n      },\n      inRange(wordIdx, bound1, bound2) {\n        return Math.min(bound1, bound2) <= wordIdx\n            && Math.max(bound1, bound2) >= wordIdx;\n      },\n      inSelectedRange(wordIdx) {\n        return this.inRange(wordIdx, this.selectedStart, this.selectedEnd);\n      },\n      isLinkedWord(wordIdx) {\n        return this.inRange(wordIdx, this.linkedStart, this.linkedEnd);\n      },\n      animationTypeToIcon(iconObj){\n        const ani_type = this.useToAniMap[iconObj.use] ?? iconObj.ani_type ?? 'Other';\n        return this.animationStyle[ani_type].icon;\n      },\n      animationTypeToColor(iconObj, type){\n        const ani_type = this.useToAniMap[iconObj.use] ?? iconObj.ani_type ?? 'Other';\n        if (type === \"background\")\n          return (iconObj.originItem === this.highlightItem)\n                ? this.animationStyle[ani_type].color\n                : \"white\";\n        else if (type === \"color\")\n          return (iconObj.originItem === this.highlightItem)\n                ? \"white\"\n                : this.animationStyle[ani_type].color;\n        else if (type === \"border\")\n          return this.animationStyle[ani_type].color;\n      },\n      keywordIconStyle(iconObj, type) {\n        if (type === 'background')\n          return (iconObj.originItem === this.highlightItem)?\n            'gray': 'white';\n        else if (type === 'color')\n          return (iconObj.originItem === this.highlightItem)?\n            'white': 'gray';\n        else if (type === \"border\")\n          return 'gray';\n      },\n      click(event) {\n        const target = event.target;\n        if (target !== this.$refs.textPanel) {\n          if (!target.id.includes(\"animationIcon\") && !target.id.includes(\"keywordIcon\")) {\n            // Seems no use here\n            this.keyup(event);\n          }\n          return;\n        }\n\n        const leave = (out, save) => {\n          if (out) {\n            if (save)\n              this.$store.commit('editor/clearSelectionConfirm', true);\n            else\n              this.$store.commit('editor/clearSelectionLeave', true);\n\n            this.$store.commit('editor/changeSelectionTool', SelectionToolType.NORMAL);\n          }\n\n          this.selectedStart = this.selectedEnd = -1;\n        }\n\n        if (this.isEditingText) {\n          if (this.textHasChanged) {\n            this.$confirm('Do you want to save your edit before leaving? (Close to cancel)', 'Warning', {\n              confirmButtonText: 'Yes',\n              cancelButtonText: 'No',\n              type: 'warning',\n              distinguishCancelAndClose: true,\n            })\n            .then(() => leave(true, true))\n            .catch(action => {\n              if (action === 'cancel')\n                leave(true, false);\n            });\n          }\n          else leave(true, false);\n        }\n        else leave(false);\n\n      },\n      changeTextContent(event){\n        let textPanelText = \"\";\n        this.textPanelWords = [];\n        this.textPanelWords = event.target.innerText.split(/[\\s\\n]/).filter(_ => _);\n        this.textPanelWords.forEach((word,idx)=>{\n          if (!word.includes(\"s\")||idx!==0){\n            textPanelText += word+\" \";\n          }\n        });\n        textPanelText = textPanelText.slice(0,-1);\n        if (this.textPanelText != textPanelText) {\n          this.textPanelText = textPanelText;\n          this.$emit('textChange');\n        }\n      },\n      keyup(){\n        if (this.isTargetButtonClicked) return;\n      },\n      handleKeyDelete(event) {\n        event.stopPropagation();\n\n        const textpanel = this.$refs.textPanel;\n        const aniIcons = textpanel.getElementsByClassName('animationIcon');\n        if (aniIcons.length !== this.animationActions.length) {\n          const aniIconIds = Array.from(aniIcons).map(d => d.id);\n          for (let index in this.animationActions) {\n            const i = this.animationActions[index];\n            const wordIconIdx = this.animationActions.filter(d => d.startIdx === i.startIdx).indexOf(i);\n            const thisId = 'animationIcon-' + i.startIdx + \"-\" + wordIconIdx;\n            if (!aniIconIds.find(id => id === thisId)) {\n              this.animationActions.splice(index, 1);\n              this.$store.commit('editor/deleteItemByIcon', i);\n            }\n          }\n        }\n\n        const keyIcons = textpanel.getElementsByClassName('keywordIcon');\n        if (aniIcons.length !== this.wordTargetIconPos.length) {\n          const keyIconIds = Array.from(keyIcons).map(d => d.id);\n          for (let index in this.wordTargetIconPos) {\n            const i = this.wordTargetIconPos[index];\n            const wordIconIdx = this.wordTargetIconPos.filter(d => d.startIdx === i.startIdx).indexOf(i);\n            const thisId = 'keywordIcon-' + i.startIdx + \"-\" + wordIconIdx;\n            if (!keyIconIds.find(id => id === thisId)) {\n              this.$store.commit('editor/deleteWordTarget', i);\n            }\n          }\n        }\n      },\n      mousedown(event, wordIdx) {\n        const work = () => {\n          console.log('mousedown', wordIdx);\n\n          this.selectedStart = this.selectedEnd = wordIdx;\n          this.isSelecting = false;\n\n          this.transcriptSrc.words.forEach(w => w.selected = false);\n\n          document.onmousemove = () => {\n            if (this.isTargetButtonClicked) return;\n\n            this.isSelecting = true;\n            if (this.highlightWordIndex !== -1) {\n              this.selectedEnd = this.highlightWordIndex;\n              const min = Math.min(this.selectedStart, this.selectedEnd),\n                    max = Math.max(this.selectedStart, this.selectedEnd);\n              for (let i = min; i <= max; i++) {\n                this.transcriptSrc.words.selected = true;\n              }\n            }\n          };\n          document.onmouseup = () => {\n            if (this.isTargetButtonClicked) return;\n\n            console.log('select:', this.selectedStart, this.selectedEnd);\n            this.isSelecting = false;\n            document.onmousemove = null;\n            document.onmouseup = null;\n\n            this.clickTargetButton();\n          };\n        }\n\n        if (this.isTargetButtonClicked) {\n          if (!this.isEditingText) {\n            this.shortNotify('Please commit your edit before continuing.');\n            return;\n          }\n          const leave = (out, save) => {\n            if (out) {\n              if (save)\n                this.$store.commit('editor/clearSelectionConfirm', true);\n              else\n                this.$store.commit('editor/clearSelectionLeave', true);\n            }\n            work();\n          }\n\n          if (this.textHasChanged) {\n            this.$confirm('Do you want to save your edit before leaving? (Close to cancel)', 'Warning', {\n              confirmButtonText: 'Yes',\n              cancelButtonText: 'No',\n              type: 'warning',\n              distinguishCancelAndClose: true,\n            })\n            .then(() => leave(true, true))\n            .catch(action => {\n              if (action === 'cancel')\n                leave(true, false);\n            });\n          }\n          else leave(true, false);\n        }\n        else work();\n      },\n      mouseenter(index) {\n        this.highlightWordIndex = index;\n        const editingEle = this.$refs['word-' + index][0];\n        const word = this.words[index];\n        this.timeStamp = parseFloat(word.startTime).toFixed(2)+\"s\";\n        this.computeTopLeft(editingEle, [-15,0]);\n        this.showToolbox = true;\n      },\n      mouseleave() {\n        this.highlightWordIndex = -1;\n        this.showToolbox = false;\n      },\n\n      createNewItem() {\n        const minWordIdx = Math.min(this.selectedStart, this.selectedEnd),\n            maxWordIdx = Math.max(this.selectedStart, this.selectedEnd);\n        const start = this.words[minWordIdx].startTime,\n            end = this.words[maxWordIdx].endTime;\n        const duration = Math.round((end - start) * 1000) / 1000;\n\n        return {\n          use: '',\n          target: '',\n          timing: {\n            start: start,\n            offset: 0,\n            duration: duration,\n          },\n          ani_type: '',\n        };\n      },\n      clickTargetButton(){\n        this.isTargetButtonClicked = true;\n        this.animationTargets = null;\n        const beforeState = this.aniStatus;\n\n        this.isEditingText = true;\n        this.textHasChanged = false;\n\n        this.$store.commit('editor/changeMode', 'animation');\n\n        // this.isCreatingItem = true;\n        // const newItem = this.createNewItem();\n        // this.$store.commit('editor/changeItemForSettings', newItem);\n        // this.$store.commit('editor/changeHighlightItem', newItem);\n\n        this.$nextTick(() => {\n          this.$store.commit('target/changeSelectedTargets', []);\n          this.$store.commit('target/changeSvgSelectionChangeSign');\n        });\n\n        const clear = () => {\n          this.selectedStart = this.selectedEnd = -1;\n          this.isEditingText = false;\n          this.$store.commit('editor/changeMode', 'normal');\n\n          this.$store.commit('target/changeSelectedTargets', []);\n\n          this.$store.commit('editor/changeTempAnimationSelection', {\n            aniName: '',\n            aniType: '',\n          });\n\n          this.$store.commit('editor/changeSettingPanelVisible', false);\n        }\n\n        this.$store.commit('editor/registerSelectionConfirm', () => {\n          this.commitSelectedChange(\n            Math.min(this.selectedStart, this.selectedEnd),\n            Math.max(this.selectedStart, this.selectedEnd));\n          clear();\n        });\n\n        this.$store.commit('editor/registerSelectionLeave', () => {\n          clear();\n          this.$store.commit('editor/changeAniStatus', beforeState);\n        });\n      },\n      commitSelectedChange(min, max) {\n        if (this.selectedTargets.length === 0) {\n          this.shortNotify('No element selected!');\n          return;\n        }\n\n        if (this.tempAnimationName && this.tempAnimationName !== '') {\n          this.$store.commit('editor/appendItemByTextView',{\n            minWordIdx: min,\n            maxWordIdx: max,\n            target: this.computeAniTarget(this.selectedTargets),\n            toFitDuration: true,\n            settings: this.aniSettings,\n          });\n          this.$emit('aniChange');\n        } else {\n          // this.$store.commit('editor/addWordTarget', {\n          //   start: min,\n          //   end: max,\n          //   target: this.selectedTargets.map(d => d.id),\n          // });\n\n          this.shortNotify('No animation selected!');\n          return;\n        }\n\n        this.selectedStart = this.selectedEnd = -1;\n      },\n\n      computeAniTarget(targets){\n        var target = \"\";\n        if (!targets) return null;\n        targets.forEach(item=>{\n          target += \"#\"+item.id +\", \"\n        })\n        target = target.slice(0, -2);\n        return target;\n      },\n\n\n      clickIcon(iconObj) {\n        if (this.audioRunning) return;\n        if (this.selectionTool !== SelectionToolType.NORMAL) {\n          if (this.isTargetButtonClicked && !this.isEditingIcon) { // editing other words\n            this.shortNotify();\n            return;\n          }\n          if (!this.isTargetButtonClicked && !this.isPreviewingIcon) { // editing something else\n            this.shortNotify();\n            return;\n          }\n        }\n\n        const clear = () => {\n          iconObj.clicked = false;\n          iconObj.hovered = false;\n          this.isEditingIcon = false;\n          this.linkedStart = -1;\n          this.linkedEnd = -1;\n          this.$store.commit('editor/changeMode', 'normal');\n          // this.$store.commit('editor/changeAnimationName', {\n          //   aniName: '',\n          //   aniType: '',\n          //   aniItem: null,\n          // });\n          this.$store.commit('target/changeSelectedTargets', []);\n\n          this.$store.commit('editor/changeHighlightItem', null);\n          this.$store.commit('editor/changeItemForSettings', null);\n        }\n\n        const work = (fromOther, save) => {\n          if (fromOther) {\n            if (save)\n              this.$store.commit('editor/clearSelectionConfirm', true);\n            else\n              this.$store.commit('editor/clearSelectionLeave', true);\n\n            this.$store.commit('editor/changeSelectionTool', SelectionToolType.CLICK);\n            this.$nextTick(() => {\n              this.$store.commit('target/changeSelectedTargetsByIcon', iconObj);\n              this.$store.commit('target/changeSvgSelectionChangeSign');\n            });\n          }\n\n          this.$store.commit('editor/showToolBox');\n\n          this.$store.commit('editor/changeHighlightItem', iconObj.originItem);\n          this.$store.commit('editor/changeItemForSettings', iconObj.originItem);\n\n          this.$store.commit('editor/registerSelectionConfirm', () => {\n            // first, delete the icon\n            // if (isAniIcon) {\n            //   this.$store.commit('editor/deleteItemByIcon', iconObj);\n            //   this.$emit('aniChange');\n            // }\n            // else\n            //   this.$store.commit('editor/deleteWordTarget', iconObj);\n\n            this.$store.commit('editor/updateItemByTextView', {\n              item: iconObj.originItem,\n              target: this.computeAniTarget(this.selectedTargets),\n            })\n            this.$emit('aniChange');\n\n            this.selectedStart = this.selectedEnd = -1;\n            clear();\n          });\n\n          this.$store.commit('editor/registerSelectionLeave', () => {\n            clear();\n          });\n\n          // this.$store.commit('editor/changeAnimationName', {\n          //   aniName: isAniIcon? iconObj.use: '',\n          //   aniType: isAniIcon? iconObj.ani_type: '',\n          //   aniItem: isAniIcon? iconObj.originItem: null,\n          // });\n\n          this.isTargetButtonClicked = true;\n          this.isEditingIcon = true;\n          this.isPreviewingIcon = false;\n          this.iconHasChanged = false;\n          iconObj.clicked = true;\n          iconObj.hovered = true;\n          this.linkedStart = iconObj.startIdx;\n          this.linkedEnd = Math.max(iconObj.startIdx, iconObj.endIdx - 1);\n          // use max to fix the bug  start might larger than end\n          this.$store.commit('editor/changeMode', 'animation');\n        }\n\n        if (this.isEditingIcon) {\n          if (this.iconHasChanged) {\n            this.$confirm('Do you want to save your edit before editing another icon? (Close to cancel)', 'Warning', {\n              confirmButtonText: 'Yes',\n              cancelButtonText: 'No',\n              type: 'warning',\n              distinguishCancelAndClose: true,\n            })\n            .then(() => work(true, true))\n            .catch(action => {\n              if (action === 'cancel')\n                work(true, false);\n            });\n          }\n          else work(true, false);\n        }\n        else if (this.isPreviewingIcon) work(false, false);\n      },\n\n\n      mouseenterIcon(iconObj){\n        this.changeHighlightItemInTextPanel = true;\n        this.mouseenterIconHandler(iconObj);\n      },\n      mouseenterIconHandler(iconObj) {\n        if (this.audioRunning || this.isPreviewingIcon || this.isEditingIcon || this.aniPlaying) return;\n        if (this.selectionTool !== SelectionToolType.NORMAL) return;\n        if (this.isSelecting) return;\n\n        this.$store.commit('editor/changeHighlightItem', iconObj.originItem)\n\n        iconObj.hovered = true;\n        this.isPreviewingIcon = true;\n\n        this.linkedStart = iconObj.startIdx;\n        this.linkedEnd = Math.max(iconObj.startIdx, iconObj.endIdx - 1);\n        // use max to fix the bug  start might larger than end\n\n        this.$nextTick(() => {\n          this.$store.commit('target/changeSelectedTargetsByIcon', iconObj);\n          this.$store.commit('target/changeSvgSelectionChangeSign');\n        });\n      },\n\n      mouseleaveIcon(iconObj) {\n        this.changeHighlightItemInTextPanel = true;\n        this.mouseleaveIconHandler(iconObj);\n      },\n      mouseleaveIconHandler(iconObj) {\n        if (this.isPreviewingIcon) {\n          this.isPreviewingIcon = false;\n          this.$store.commit('editor/changeHighlightItem', null)\n          this.$store.commit('editor/changeSelectionTool', SelectionToolType.NORMAL);\n          iconObj.hovered = false;\n          this.linkedStart = -1;\n          this.linkedEnd = -1;\n        }\n      },\n      computeTopLeft(element, timeStampOffset){\n        const textPanel = document.getElementsByClassName(\"text-panel\")[0];\n        const textpanelPosition = textPanel.getBoundingClientRect();\n        const wordPosition = element.getBoundingClientRect();\n\n        this.timeStampTop = (wordPosition.top-textpanelPosition.top+textPanel.scrollTop+timeStampOffset[0])+\"px\";\n        this.timeStampLeft = (wordPosition.left-textpanelPosition.left+timeStampOffset[1])+\"px\";\n\n        // this.animationButtonsTop = (wordPosition.top-textpanelPosition.top+textPanel.scrollTop+animationButtonsOffset[0])+\"px\";\n        // this.animationButtonsLeft = (wordPosition.left-textpanelPiosition.left+animationButtonsOffset[1])+\"px\";\n      },\n      computeDuration(startIdx,endIdx){\n        const duration = Math.max(1, this.wordToEndTime(endIdx)-this.wordToStartTime(startIdx));\n        return parseFloat(duration.toFixed(3));\n      },\n      startTimeToWord(time){\n        for (let wordIdx in this.words){\n          if (time<this.words[wordIdx].startTime){\n            return parseInt(wordIdx)-1;\n          }\n        }\n      },\n      endTimeToWord(startIdx, endTime){\n        for (let wordIdx=startIdx;wordIdx<this.words.length;wordIdx++){\n          if (this.words[wordIdx].startTime>endTime) return wordIdx-1;\n        }\n        return this.words.length-1;\n      },\n      wordToStartTime(wordIdx){\n        return this.words[wordIdx].startTime;\n      },\n      wordToEndTime(wordIdx){\n        return this.words[wordIdx].endTime;\n      },\n      updateIconTiming(iconObj){\n        iconObj.timing.start = this.wordToStartTime(iconObj.startIdx);\n        iconObj.timing.duration = this.computeDuration(iconObj.startIdx, iconObj.endIdx);\n        this.$store.commit('editor/updateItemTimingByIcon', iconObj);\n      },\n      createAnimationAction(ani_type, target, startTime, offset, startIdx, duration, use, originItem, selected=false){\n        this.animationActions.push(\n          {\n            ani_type: ani_type,\n            target: target,\n            timing:{\n              start: startTime,\n              offset: offset,\n              duration: duration,\n            },\n            startIdx: startIdx,\n            endIdx: this.endTimeToWord(startIdx,duration + startTime + offset),\n            clicked: selected,\n            hovered: selected,\n            use: use,\n            originItem: originItem,\n          }\n        );\n      },\n      createAniActionsBytimelineRows(item, timing, selected=false){\n        const duration = timing?.duration ?? 1;\n        const startTime = (timing?.start ?? 0);\n        const offset = timing?.offset ?? 0;\n        const startIdx = this.startTimeToWord(startTime + offset);\n        this.createAnimationAction(\n          item.ani_type,\n          item.target,\n          startTime,\n          offset,\n          startIdx,\n          duration,\n          item.use,\n          item,\n          selected,\n        );\n      },\n      initAniActions(){\n        // console.log('>>>', this.animationActions, this.timelineRows)\n\n        this.animationActions = [];\n        this.timelineRows.flat().forEach((items)=>{\n          if (items.sequence) {\n            const sequence = items.sequence?.sync ?? items.sequence?.concat ?? [];\n            sequence.forEach(item=>{\n              this.createAniActionsBytimelineRows(item, items.timing);\n            })\n          } else {\n            this.createAniActionsBytimelineRows(items, items.timing);\n          }\n        });\n\n        if (this.highlightItem) {\n          const newIcon = this.animationActions.find(o => o.originItem === this.highlightItem);\n          if (newIcon) {\n            newIcon.clicked = true;\n            newIcon.hovered = true;\n          }\n        }\n\n      },\n      renewAniIconByItem(aniIcon, item) {\n        return; // deprecated\n        const duration = item.timing?.duration ?? 1;\n        const startTime = item.timing?.start ?? 0;\n        const offset = item.timing?.offset ?? 0;\n        const startIdx = this.startTimeToWord(startTime + offset);\n        const endIdx = this.endTimeToWord(startIdx, duration + startTime + offset);\n\n        const updateObj = {\n          ani_type: item.ani_type,\n          target: item.target,\n          timing:{\n            start: startTime,\n            offset: offset,\n            duration: duration,\n          },\n          startIdx: startIdx,\n          endIdx: endIdx,\n          use: item.use,\n          originItem: item,\n        };\n\n        Object.assign(aniIcon, updateObj);\n      },\n      handleOutsideResize() {\n        this.$store.commit('editor/changeTlContainerWidth', 80);\n      },\n      isFadeColor(iconObj) {\n        return this.highlightItem !== null && this.highlightItem !== iconObj.originItem;\n      }\n    },\n    mounted() {\n      this.$store.commit('editor/mountTextPanel', this.$el);\n    },\n    watch: {\n      windowWidth() {\n        this.handleOutsideResize();\n      },\n      leftPanelWidth() {\n        this.handleOutsideResize();\n      },\n      targetPanelWidth() {\n        this.handleOutsideResize();\n      },\n      selectionTool() {\n        if (this.selectionTool === SelectionToolType.NORMAL)\n          this.isTargetButtonClicked = false;\n      },\n      time(newV) {\n        this.audioWordIndex = this.startTimeToWord(newV/1000);\n        if (this.audioRunning) this.selectedStart = this.selectedEnd = -1;\n      },\n      timelineRows() {\n        this.initAniActions();\n      },\n      selectedStart(){\n        this.animationTargets = null;\n        this.isTargetButtonClicked = false;\n      },\n      transcriptSrc(){\n        this.audioWordIndex = -1;\n      },\n      tableSelectionChangeSign() {\n        if (this.isEditingIcon)\n          this.iconHasChanged = true;\n        if (this.isEditingText)\n          this.textHasChanged = true;\n      },\n      inEditMode() {\n        // leave the mode\n        if (!this.inEditMode) {\n          if (this.textChanged)\n            this.$store.commit('editor/updateAudio', this.textPanelText);\n        }\n        else {\n          this.textChanged = false;\n        }\n      },\n      textPanelText() {\n        if (this.inEditMode) {\n          this.textChanged = true;\n        }\n      },\n      projectId() {\n        this.selectedStart = this.selectedEnd = -1;\n      },\n      clearTextHighlightSign() {\n        this.linkedStart = -1;\n        this.linkedEnd = -1;\n      },\n      itemUpdateTuple() {\n        if (this.itemUpdateTuple == null) {\n          return;\n        }\n        const {item} = this.itemUpdateTuple;\n        const aniIcon = this.animationActions.find(act => act.originItem === item);\n\n        this.renewAniIconByItem(aniIcon, item);\n\n        if (aniIcon.originItem === this.highlightItem) {\n          this.linkedStart = aniIcon.startIdx;\n          this.linkedEnd = Math.max(aniIcon.startIdx, aniIcon.endIdx - 1);\n        }\n      },\n      highlightItem(newVal, oldVal) {\n        if (this.changeHighlightItemInTextPanel) {\n          this.changeHighlightItemInTextPanel = false;\n          return;\n        }\n        if (newVal !== null) {\n          const iconObj = this.animationActions.find(o => o.originItem === newVal)\n          this.mouseenterIconHandler(iconObj);\n\n        } else if (oldVal !== null) {\n          const iconObj = this.animationActions.find(o => o.originItem === oldVal)\n          this.mouseleaveIconHandler(iconObj);\n        }\n      },\n      clickIconSignal() {\n        const iconObj = this.animationActions.find(o => o.originItem === this.clickIconSignal);\n        this.clickIcon(iconObj);\n      }\n    },\n    computed: {\n      ...mapState('editor', {\n        time: state => state.time,\n        timelineRows: state => state.timelineRows,\n        tlContainerWidth: state => state.tlContainerWidth,\n\n        transcriptSrc: state => state.transcriptSrc,\n        wordTargetIconPos: state => state.wordTargetIconPos,\n        animationStyle: state => state.animationStyle,\n\n        selectionTool: state => state.selectionTool,\n\n        windowWidth: state => state.windowWidth,\n        leftPanelWidth: state => state.leftPanelWidth,\n        targetPanelWidth: state => state.targetPanelWidth,\n\n        aniStatus: state => state.aniStatus,\n\n        tempAnimationName: state => state.animationName,\n        useToAniMap: state => state.useToAniMap,\n\n        aniSettings: state => state.aniSettings,\n        currentMode: state => state.currentMode,\n\n        itemForSettings: state => state.itemForSettings,\n        clearTextHighlightSign: state => state.clearTextHighlightSign,\n        itemUpdateTuple: state => state.itemUpdateTuple,\n\n        highlightItem: state => state.highlightItem,\n        clickIconSignal: state => state.clickIconSignal,\n      }),\n      ...mapState('target', {\n        selectedTargets: state => state.selectedTargets,\n        tableSelectionChangeSign: state => state.tableSelectionChangeSign\n      }),\n      ...mapState('resource', {\n        projectId: state => state.projectId,\n      }),\n      ...mapGetters('editor', [\n          'aniPlaying',\n      ]),\n      animationName() {\n        return this.itemForSettings?.use ?? '';\n      },\n      textPanelText: {\n        set(value) {\n          this.$store.commit('editor/changetextPanelText', value);\n        },\n        get() {\n          return this.$store.state.editor.textPanelText;\n        }\n      },\n      words() {\n        return this.transcriptSrc.words;\n      },\n      wordIdxIcons() {\n        return (wordIdx)=>{\n          return this.animationActions.filter(_=>_.startIdx===wordIdx);\n        }\n      },\n      keywordIcons() {\n        return (wordIdx) => {\n          //if (this.animationActions.some(d => d.startIdx === wordIdx))\n          //  return [];\n          return this.wordTargetIconPos.filter(d => d.startIdx === wordIdx);\n        }\n      },\n      inEditMode() {\n        return this.currentMode === 'text';\n      }\n    },\n  }\n</script>\n\n<style scoped>\n  .text-panel {\n    position: relative;\n    padding: 0 20px 0 0;\n    line-height: 2em;\n    overflow-y: auto;\n  }\n  .timeStampWrapper, .animationButtonGroup{\n    position: absolute;\n    z-index: 2;\n  }\n  .timeStamp {\n    color: grey;\n    opacity: 0.6;\n    font-size: 0.7em;\n    pointer-events: none;\n    user-select: none;\n  }\n  .word-container {\n    width: 100%;\n    position: absolute;\n    left: 0;\n    top: 5px;\n    display: flex;\n    flex-wrap: wrap;\n    align-content: flex-start;\n  }\n  .narration-word {\n    cursor: default;\n    user-select: none;\n    font-size: 1rem;\n    font-family: Avenir, Helvetica, Arial, sans-serif;\n    background-color: white;\n  }\n  .narration-background {\n    cursor: default;\n    user-select: none;\n    color: rgba(255, 255, 255, 0);\n  }\n  .highlight-word {\n    color: #409eff;\n  }\n  .selected-word {\n    background-color: rgb(197,197,197);\n  }\n  .bolden-word {\n    font-weight: bold;\n  }\n  .underline-word {\n    text-decoration: underline;\n  }\n  .animationIcon, .keywordIcon {\n    display: inline-block;\n    cursor: pointer;\n    justify-content: center;\n  }\n  #animationIcon, #keywordIcon {\n    font-size: small;\n    padding: 2px;\n    border-radius: 5px;\n    border: solid 2px;\n    pointer-events: none;\n  }\n  .audio-word {\n    background-color: #c7c4c4;\n  }\n  .noSelection::selection {\n    color: none;\n    background: none;\n  }\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TextPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TextPanel.vue?vue&type=template&id=6c09299e&scoped=true&\"\nimport script from \"./TextPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./TextPanel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TextPanel.vue?vue&type=style&index=0&id=6c09299e&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6c09299e\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"footer\">\n    <div class=\"operation-group\">\n<!--      <el-button-group style=\"margin-left: 10px;\">-->\n<!--        &lt;!&ndash; <el-button :type=\"timelineMode === 'text' ? 'primary' : ''\" size=\"mini\"-->\n<!--                   @click=\"changeTimelineMode('text')\">Narration</el-button> &ndash;&gt;-->\n<!--        &lt;!&ndash; <el-button :type=\"timelineMode === 'time' ? 'primary' : ''\" size=\"mini\"-->\n<!--                   @click=\"changeTimelineMode('time')\">Timeline</el-button> &ndash;&gt;-->\n<!--        <el-tooltip placement=\"top\" style=\"font-size: 0.9rem;\"-->\n<!--          :content=\"showTimeline ? 'Hide Timeline' : 'Show Timeline'\">-->\n<!--          <el-button icon=\"el-icon-time\" :type=\"showTimeline ? 'primary' : ''\" size=\"mini\" @click=\"changeTimelineDisplay\"-->\n<!--            style=\"font-size: 0.9rem;\">Timeline</el-button>-->\n<!--        </el-tooltip>-->\n<!--      </el-button-group>-->\n<!--      <el-divider direction=\"vertical\"></el-divider>-->\n\n<!--      <el-button-group style=\"\">-->\n<!--          <el-button icon=\"el-icon-data-board\" size=\"mini\" @click=\"loadExample('animation')\" style=\"font-size: 0.9rem;\">Load Animations</el-button>-->\n<!--          <el-button icon=\"el-icon-refresh\" size=\"mini\" @click=\"resetScene\" style=\"font-size: 0.9rem;\">Reset Scene</el-button>-->\n<!--      </el-button-group>-->\n\n      <el-button @click=\"switchRunningState\" :icon=\"runIcon\"\n                 type=\"primary\" plain\n                 style=\"width: 100px; font-size: 0.9rem;\"\n                 size=\"mini\">{{ this.running ? \"Pause\" : \"Play\" }}\n      </el-button>\n\n<!--      <el-divider direction=\"vertical\"></el-divider>-->\n\n      <el-button @click=\"stopAndSeekToZero\"\n                 icon=\"el-icon-refresh\"\n                 type=\"warning\" plain\n                 size=\"mini\"\n                 style=\"width: 100px; margin-left: 20px; font-size: 0.9rem;\">Reset</el-button>\n    </div>\n\n    <div class=\"timeline-group\" v-loading=\"audioCompiling\" element-loading-text=\"Updating Audio\"\n      element-loading-spinner=\"el-icon-loading\">\n<!--      TextPanel should be removed, but a bug will occur if remove it. So hide it for now-->\n      <TextPanel v-show=\"timelineMode === 'text' && false\" v-on:aniChange=\"handleAniChange\"\n        :panelHeight=\"showTimeline ? emptyHeight * 0.4 : emptyHeight\" :audioRunning=\"running\" :compile=\"compile\"\n        :style=\"{ width: tlContainerWidth + 'px' }\" />\n      <el-slider v-show=\"timelineMode === 'time'\" class=\"slider\" v-model=\"time\" :style=\"{ width: timelineWidth + 'px' }\"\n        :max=\"duration\" @input=\"changeTime\" :marks=\"marks\" :disabled=\"disabled\" :format-tooltip=\"formatTooltip\"/>\n      <TimelinePanel :duration=\"duration\" v-show=\"showTimeline\" v-on:aniChange=\"handleAniChange\"\n        v-on:timeChange=\"handleTimeChange\" :panelHeight=\"emptyHeight\" />\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapGetters } from 'vuex'\nimport TimelinePanel from \"@/components/editor/ControlPanel/TimelinePanel\";\nimport TextPanel from \"@/components/editor/ControlPanel/TextPanel\";\nimport { SelectionToolType } from \"@/utils/common/SeletionToolType\";\n\nexport default {\n  name: \"ControlPanel\",\n  components: { TimelinePanel, TextPanel },\n  props: [\"footerHeight\"],\n  data() {\n    return {\n      animationRate: 1,\n      duration: 1,\n      running: false,\n      disabled: true,\n\n      needAudio: false,\n      needCompile: true,\n\n      audioReadyCallback: null,\n\n      marks: {},\n\n      timelineMode: 'text', // time or text\n      audioNotification: 'Audio', // Generating Audio... or Audio Updated\n      updateAudioNotificationTimeout: null,\n\n      showTimeline: true,\n      showAnimationPane: false,\n      emptyHeight: 0,\n    }\n  },\n  methods: {\n    init() {\n      this.time = 0;\n      this.running = false;\n      this.disabled = true;\n      this.needCompile = true;\n      this.needAudio = false;\n      this.$store.commit('editor/changeAniStatus', 'stop');\n    },\n    compile(notification = true, callback = null) {\n      this.$store.commit('editor/changeAniStatus', 'pause');\n      this.$store.commit('editor/changeAniSvgRenderSign');\n      let onUpdateFunc = function () {\n        this.time = this.timeline.progress() * this.duration\n      }.bind(this)\n      this.$store.commit('editor/changeSelectionTool', SelectionToolType.NORMAL);\n      this.$store.commit('target/changeSelectedTargets', []);\n\n      const bigCallback = () => {\n        this.$nextTick(() => {\n          this.$store.commit('editor/compile', { onUpdateFunc, notification });\n          if (!this.compileSuccess) return;\n          this.disabled = false;\n          this.needCompile = false;\n          this.stopAndSeekToZero();\n          if (callback) callback();\n        })\n      }\n\n      if (this.needAudio) {\n        this.getAudio();\n        this.audioReadyCallback = bigCallback;\n      }\n      else bigCallback();\n\n    },\n    handleTextChange() {\n      this.needAudio = true;\n    },\n    handleAniChange() {\n      this.needCompile = true;\n    },\n    handleTimeChange() {\n      if (this.audioReady && this.useAudio)\n        this.audioEl.currentTime = this.time / 1000;\n    },\n    changeEditMode() {\n      if (this.currentMode === 'normal') {\n        this.$store.commit('editor/changeMode', 'text');\n      }\n      else {\n        this.$store.commit('editor/changeMode', 'normal');\n      }\n    },\n    resetScene() {\n      this.$store.commit('editor/initWorkspace');\n      // TODO: seperate animation from the scene\n      this.$store.commit('editor/resetEditor');\n    },\n    loadExample(mode = 'animation') {\n      if (mode === 'animation')\n        this.$store.commit('editor/initWorkspace', true);\n      else\n        this.$store.commit('editor/initLinking');\n    },\n    deleteAniItem(event) {\n      this.$store.commit('editor/deleteItem', this.itemForSettings);\n\n      // quit selection mode\n      if (this.selectionTool !== SelectionToolType.NORMAL) {\n        this.$store.commit('editor/clearSelectionLeave', true);\n        if (!this.stopLeave) {\n          this.$store.commit('editor/changeSelectionTool', SelectionToolType.NORMAL);\n          this.$store.commit('editor/clearSelectionConfirm', false);\n        }\n      }\n\n      // refresh button after click\n      let target = event.target;\n      if(target.nodeName === \"I\" || target.nodeName === \"SPAN\"){\n        target = event.target.parentNode;\n      }\n      target.blur();\n    },\n    getWordLinking() {\n      this.$store.dispatch('editor/queryNLPParseResult');\n    },\n    getNLPResult() {\n      this.$store.dispatch('editor/queryNLPGenerateResult');\n      this.$store.commit('editor/changeSelectionTool', SelectionToolType.NORMAL);\n      this.needCompile = true;\n    },\n    getAudio() {\n      const transcript = this.textPanelText;\n      this.$store.commit('editor/updateAudio', transcript);\n      this.needAudio = false;\n      this.restart();\n    },\n    changeTimelineDisplay() {\n      this.showTimeline = !this.showTimeline;\n    },\n    // changeAnimationPaneDisplay() {\n    //   this.showAnimationPane = !this.showAnimationPane;\n    //   // close timeline and text\n    //   if (this.timelineMode !== \"none\") {\n    //     this.changeTimelineMode(\"none\");\n    //   } else {\n    //     this.changeTimelineMode(\"text\");\n    //   }\n    //   this.showTimeline && this.changeTimelineDisplay();\n    // },\n    updateTimelineMarks() {\n      const tickFactor = 10;\n      const tickNum = tickFactor * this.timelineWidth / this.tlContainerWidth;\n      const ticks = this.timelineScale.ticks(tickNum);\n      const tickFormat = this.timelineScale.tickFormat(tickNum, \".2\");\n      const timeTicks = ticks.map(tickFormat);\n      const marks = {}\n      timeTicks.forEach(t => marks[parseInt(t) * 1000] = t);\n      this.marks = marks\n    },\n    switchRunningState() {\n      this.$store.commit('editor/changeSelectionTool', SelectionToolType.NORMAL);\n      this.$store.commit('target/changeSelectedTargets', []);\n\n      if (this.needCompile || this.needAudio) {\n        this.compile(true, () => {\n          if (this.running) {\n            this.pause();\n          } else {\n            this.stopAndSeekToZero();\n            this.resume();\n          }\n        });\n      } else {\n        if (this.running) {\n          this.pause();\n        } else {\n          this.resume();\n        }\n      }\n\n    },\n    pause() {\n      this.running = false\n      this.timeline.pause()\n      if (this.audioReady && this.useAudio) {\n        this.audioEl.pause()\n      }\n      this.$store.commit('editor/changeAniStatus', 'pause');\n    },\n    stopAndSeekToZero() {\n      this.$store.commit('editor/changeSelectionTool', SelectionToolType.NORMAL);\n      this.$store.commit('target/changeSelectedTargets', []);\n\n      this.running = false;\n      if (this.timeline) {\n        this.timeline.time(0);\n        this.timeline.pause();\n      }\n\n\n      if (this.audioReady && this.useAudio) {\n        this.audioEl.pause()\n        this.audioEl.currentTime = 0\n      }\n\n      this.$store.commit('editor/changeAniStatus', 'stop');\n    },\n    resume() {\n      this.running = true\n      this.timeline.play()\n      if (this.audioReady && this.useAudio) {\n        this.audioEl.play()\n      }\n      this.$store.commit('editor/changeAniStatus', 'play');\n    },\n    formatTooltip(val) {\n      val = val / 1000\n      return val.toFixed(2);\n    },\n    changeTime(time) {\n      if (!this.timeline) return\n      let p = time / this.duration\n      this.timeline.progress(p)\n    },\n    changeRate(rate) {\n      try {\n        const r = parseFloat(rate)\n        if (r <= 0) return\n        if (this.timeline)\n          this.timeline.timeScale(r);\n        if (this.audioReady) {\n          this.audioEl.playbackRate = r\n        }\n      } catch (exception) {\n        console.error(exception)\n      }\n    },\n    changeTimelineMode(mode) {\n      this.timelineMode = mode;\n    },\n    recomputeHeight() {\n      const optionEl = document.getElementsByClassName('operation-group')[0];\n      this.emptyHeight = this.footerHeight - optionEl.clientHeight;\n    },\n  },\n  mounted() {\n    this.init();\n    this.$store.commit('editor/changeTlContainerWidth', 80);\n  },\n  watch: {\n    footerHeight() {\n      this.recomputeHeight();\n    },\n    controllerInitSign() {\n      this.init();\n    },\n    audioReady() {\n      if (this.audioReady && this.audioReadyCallback) {\n        this.audioReadyCallback();\n        this.audioReadyCallback = null;\n      }\n      if (this.audioReady) {\n        const audioDuration = this.audioEl.duration * 1000 + 2000\n        if (this.duration < audioDuration) {\n          this.duration = audioDuration\n          this.$store.commit('editor/updateTimelineScaleByAudio', this.duration);\n          this.updateTimelineMarks();\n        }\n      }\n    },\n    timeline() {\n      // this.duration = this.timelineScale.invert(this.timelineWidth) * 1000;\n      //\n      // const onCompleteFunc = function () {\n      //   this.running = false\n      //   this.timeline.pause()\n      // }.bind(this)\n      // if (this.timeline)\n      //   this.timeline.eventCallback('onComplete', onCompleteFunc)\n      //\n      // this.changeRate(this.animationRate)\n      // this.updateTimelineMarks()\n    },\n    timelineWidth() {\n      this.duration = this.timelineScale.invert(this.timelineWidth) * 1000;\n      this.updateTimelineMarks();\n    },\n    audioSrc() {\n      // this.duration = Math.ceil(this.transcriptSrc.words.slice(-1)[0].endTime + 2) * 1000;\n      // this.$store.commit('editor/updateTimelineScaleByAudio', this.duration);\n      // this.updateTimelineMarks();\n    },\n    audioCompiling(newV) {\n      this.audioNotification = newV ? 'Generating audio...' : 'Audio updated'\n      if (newV) {\n        clearTimeout(this.updateAudioNotificationTimeout);\n      } else {\n        this.updateAudioNotificationTimeout = setTimeout(() => {\n          this.audioNotification = 'Audio';\n        }, 2000);\n      }\n    },\n    aniStatus() {\n      if (this.aniStatus === 'preview') {\n        this.needCompile = true;\n      }\n    },\n    aniChangeSign() {\n      this.needCompile = true;\n    },\n  },\n  computed: {\n    ...mapState('resource', {\n    }),\n    ...mapState('editor', {\n      controllerInitSign: state => state.controllerInitSign,\n      timeline: state => state.timeline,\n      timelineScale: state => state.timelineScale,\n      timelineWidth: state => state.timelineWidth,\n      tlContainerWidth: state => state.tlContainerWidth,\n\n      nlpLoading: state => state.nlpLoading,\n      nlpLinking: state => state.nlpLinking,\n\n      audioEl: state => state.audioEl,\n      audioReady: state => state.audioReady,\n      audioSrc: state => state.audioSrc,\n      transcriptSrc: state => state.transcriptSrc,\n      textPanelText: state => state.textPanelText,\n      audioCompiling: state => state.audioCompiling,\n      refresh: state => state.refresh,\n      compileSuccess: state => state.compileSuccess,\n      wordTargetIconPos: state => state.wordTargetIconPos,\n\n      selectionTool: state => state.selectionTool,\n      currentMode: state => state.currentMode,\n      aniStatus: state => state.aniStatus,\n      itemForSettings: state => state.itemForSettings,\n\n      aniChangeSign: state => state.aniChangeSign,\n    }),\n    ...mapGetters('editor', [\n      'svgPanelInSelecting',\n    ]),\n    useAudio: {\n      get() {\n        return this.$store.state.editor.useAudio\n      },\n      set(useAudio) {\n        this.$store.commit('editor/changeUseAudio', useAudio)\n      }\n    },\n    time: {\n      get() {\n        return this.$store.state.editor.time\n      },\n      set(time) {\n        this.$store.commit('editor/changeTime', time)\n      }\n    },\n    showPotential: {\n      get() {\n        return this.$store.state.editor.showPotential\n      },\n      set(showPotential) {\n        this.$store.commit('editor/changeShowPotential', showPotential)\n      }\n    },\n    runIcon: function () {\n      return !this.running ? \"el-icon-video-play\" : \"el-icon-video-pause\"\n    },\n    linkButtonIcon() {\n      return this.nlpLinking ? 'el-icon-loading' : 'el-icon-link';\n    },\n    nlpButtonIcon() {\n      return this.nlpLoading ? 'el-icon-loading' : 'el-icon-magic-stick';\n    },\n    linked() {\n      return this.wordTargetIconPos.length > 0;\n    },\n    editModeDisabled() {\n      return this.selectionTool !== SelectionToolType.NORMAL;\n    },\n    inEditMode() {\n      return this.currentMode === 'text';\n    },\n    // inSettingMode() {\n    //   return this.\n    // }\n    showAniItemButton() {\n      // animation buttons are available when an animation is selected\n      return this.itemForSettings != null;\n    }\n  },\n}\n</script>\n\n<style scoped>\n.footer {\n  width: 100%;\n  height: 100%;\n  overflow: hidden;\n}\n\n.operation-group {\n  width: 100%;\n  padding: 10px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.timeline-group {\n  width: calc(100%);\n  height: 100%;\n  padding: 0 20px;\n  overflow-x: scroll;\n  overflow-y: hidden;\n}\n\n.slider {\n  margin-bottom: 20px;\n}\n\n.el-divider {\n  height: 20px;\n  margin: 0 6px !important;\n}\n\n.operation-group>>>.el-input-group__prepend {\n  padding: 0 10px;\n}\n\n.operation-group>>>.el-input__inner {\n  padding: 0 8px;\n}\n\n.maketooltiphappy {\n  display: flex;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContrlPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContrlPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ContrlPanel.vue?vue&type=template&id=3e39b84e&scoped=true&\"\nimport script from \"./ContrlPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./ContrlPanel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ContrlPanel.vue?vue&type=style&index=0&id=3e39b84e&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e39b84e\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"svg-container-master\"},[_c('svg',{ref:\"svg\"},[_c('g',{staticClass:\"scene\"})])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"svg-container-master\">\n    <svg ref=\"svg\">\n      <g class=\"scene\"/>\n    </svg>\n  </div>\n</template>\n\n<script>\n  import {mapState} from \"vuex\";\n\n  export default {\n    name: 'SVGContainer',\n    data() {\n      return {\n        svg: null,\n        scene: null,\n      }\n    },\n    methods: {\n      loadSVG() {\n        // reset the attr changed by Camera-zoom effect\n        this.scene.innerHTML = this.svgStr;\n        this.scene._gsap = null;      // remove the gsap cache\n        this.scene.removeAttribute('transform')\n\n        this.$store.commit('editor/updateChartSize');\n      }\n    },\n    mounted() {\n      this.svg = this.$refs.svg;\n      this.scene = this.svg.querySelector('.scene');\n      this.$store.commit('editor/mountSvgElement', this.svg);\n      this.$store.commit('editor/mountSceneElement', this.scene);\n    },\n    watch: {\n      svgRenderSign() {\n        this.loadSVG();\n      }\n    },\n    computed: {\n      ...mapState('editor', {\n        svgRenderSign: state => state.svgRenderSign,\n        svgStr: state => state.scene?.svgStr ?? '',\n      }),\n    }\n  }\n</script>\n\n<style scoped>\n.svg-container-master {\n  user-select: none;\n  border: 1px solid rgb(215, 216, 221);\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SVGContainer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SVGContainer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SVGContainer.vue?vue&type=template&id=62cf0b57&scoped=true&\"\nimport script from \"./SVGContainer.vue?vue&type=script&lang=js&\"\nexport * from \"./SVGContainer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SVGContainer.vue?vue&type=style&index=0&id=62cf0b57&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"62cf0b57\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"ani-svg-container-master\"},[_c('svg',{ref:\"svg\"},[_c('g',{staticClass:\"scene\"})])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"ani-svg-container-master\">\n    <svg ref=\"svg\">\n      <g class=\"scene\"/>\n    </svg>\n  </div>\n</template>\n\n<script>\n  import {mapState} from \"vuex\";\n\n  export default {\n    name: 'AniSVGContainer',\n    data() {\n      return {\n        svg: null,\n        scene: null,\n      }\n    },\n    methods: {\n      loadSVG() {\n        // reset svg transform\n        this.svg._gsap = null;      // remove the gsap cache\n        this.svg.removeAttribute('style')\n        this.svg.removeAttribute('transform')\n        // remove all element except the scene\n        this.svg.querySelectorAll('*:not(.scene)').forEach(el => el.remove());\n        // reset the attr changed by Camera-zoom effect\n        this.scene.innerHTML = this.svgStr;\n        this.scene._gsap = null;      // remove the gsap cache\n        this.scene.removeAttribute('transform')\n      }\n    },\n    mounted() {\n      this.svg = this.$refs.svg;\n      this.scene = this.svg.querySelector('.scene');\n      this.$store.commit('editor/mountAniSvgElement', this.svg);\n      this.$store.commit('editor/mountAniSceneElement', this.scene);\n    },\n    watch: {\n      aniSvgRenderSign() {\n        this.loadSVG();\n      }\n    },\n    computed: {\n      ...mapState('editor', {\n        aniSvgRenderSign: state => state.aniSvgRenderSign,\n        svgStr: state => state.scene?.svgStr ?? '',\n      }),\n    }\n  }\n</script>\n\n<style scoped>\n.ani-svg-container-master {\n  user-select: none;\n  overflow: hidden;\n  border: 1px solid #ccc;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AniSVGContainer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AniSVGContainer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AniSVGContainer.vue?vue&type=template&id=5484ec26&scoped=true&\"\nimport script from \"./AniSVGContainer.vue?vue&type=script&lang=js&\"\nexport * from \"./AniSVGContainer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AniSVGContainer.vue?vue&type=style&index=0&id=5484ec26&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5484ec26\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"template-panel\"},[_c('el-tabs',{attrs:{\"tab-position\":\"top\",\"active-name\":_vm.activePaneName,\"type\":\"card\"},on:{\"tab-click\":_vm.changeTab}},[_c('el-tab-pane',{staticClass:\"spec-pane\",style:({height: _vm.paneHeight + 'px'}),attrs:{\"label\":\"Animation\",\"name\":\"animation\"}},[_c('span',{staticClass:\"normal-span\",attrs:{\"slot\":\"label\"},slot:\"label\"},[_c('i',{staticClass:\"el-icon-edit-outline\"}),_vm._v(\" Animation \")]),_c('codemirror',{ref:\"animationTextEditor\",attrs:{\"value\":_vm.animationText,\"options\":_vm.cmOptions},on:{\"changes\":_vm.animationTextChange}}),(!_vm.isSpecTextValid)?_c('div',{staticClass:\"single-line\",staticStyle:{\"position\":\"absolute\",\"top\":\"0\",\"text-align\":\"center\",\"width\":\"100%\",\"background\":\"#f56c6c\",\"z-index\":\"999\"}},[_vm._v(\" Specification is not valid! \"+_vm._s(_vm.specTextErrorMsg)+\" \")]):_vm._e()],1),_c('el-tab-pane',{staticClass:\"spec-pane\",style:({height: _vm.paneHeight + 'px'}),attrs:{\"label\":\"Template\",\"name\":\"template\"}},[_c('span',{staticClass:\"normal-span\",attrs:{\"slot\":\"label\"},slot:\"label\"},[_c('i',{staticClass:\"el-icon-files\"}),_vm._v(\" Template \")]),_c('codemirror',{ref:\"templateTextEditor\",attrs:{\"value\":_vm.templateText,\"options\":_vm.cmOptions},on:{\"changes\":_vm.templateTextChange}}),(!_vm.isSpecTextValid)?_c('div',{staticClass:\"single-line\",staticStyle:{\"position\":\"absolute\",\"top\":\"0\",\"text-align\":\"center\",\"width\":\"100%\",\"background\":\"#f56c6c\",\"z-index\":\"999\"}},[_vm._v(\" Specification is not valid! \"+_vm._s(_vm.specTextErrorMsg)+\" \")]):_vm._e()],1),_c('el-tab-pane',{staticClass:\"spec-pane\",style:({height: _vm.paneHeight + 'px'}),attrs:{\"label\":\"Binder\",\"name\":\"binder\"}},[_c('span',{staticClass:\"normal-span\",attrs:{\"slot\":\"label\"},slot:\"label\"},[_c('i',{staticClass:\"el-icon-connection\"}),_vm._v(\" Binder \")]),_c('codemirror',{ref:\"binderTextEditor\",attrs:{\"value\":_vm.binderText,\"options\":Object.assign({readOnly: true}, _vm.cmOptions)}}),_c('div',{staticStyle:{\"position\":\"absolute\",\"top\":\"10px\",\"right\":\"24px\",\"text-align\":\"center\",\"width\":\"100px\",\"background\":\"rgba(203,203,203,0.27)\",\"z-index\":\"999\",\"border-radius\":\"3px\"}},[_vm._v(\" Read Only \")])],1),_c('el-tab-pane',{staticClass:\"spec-pane\",style:({height: _vm.paneHeight + 'px'}),attrs:{\"label\":\"Target\",\"name\":\"target\"}},[_c('span',{staticClass:\"normal-span\",attrs:{\"slot\":\"label\"},slot:\"label\"},[_c('i',{staticClass:\"el-icon-aim\"}),_vm._v(\" Virtual target model \")]),_c('codemirror',{ref:\"virtualModelTextEditor\",attrs:{\"value\":_vm.virtualModelText,\"options\":_vm.cmHTMLOptions}}),_c('div',{staticStyle:{\"position\":\"absolute\",\"top\":\"10px\",\"right\":\"24px\",\"text-align\":\"center\",\"width\":\"100px\",\"background\":\"rgba(203,203,203,0.27)\",\"z-index\":\"999\",\"border-radius\":\"3px\"}},[_vm._v(\" Read Only \")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export function getFormattedXmlString(element) {\n  return getFormattedXmlStringHelper(element, 0);\n}\n\nfunction getFormattedXmlStringHelper(element, indent = 0) {\n  const indentation = '  '.repeat(indent)\n  const attributes = Array.from(element.attributes)\n      .map(attr => `${attr.name}=\"${attr.value.replace(/\"/g, '\\'')}\"`)\n      .join(' ')\n  const openTag = `<${element.tagName.toLowerCase()}${(attributes === '') ? '' : ' '}${attributes}>`\n  const closeTag = `</${element.tagName.toLowerCase()}>`\n\n  const innerContent = Array.from(element.childNodes)\n      .map(node => {\n        if (node instanceof Element) {\n          return getFormattedXmlStringHelper(node, indent + 1)\n        } else {\n          return `${'  '.repeat(indent + 1)}${node.textContent}`\n        }\n      })\n      .filter(str => str.trim() !== '')\n      .join('\\n')\n  if (innerContent === '') {\n    return `${indentation}${openTag}${closeTag}`\n  }\n  return `${indentation}${openTag}\\n${innerContent}\\n${indentation}${closeTag}`\n}\n","<template>\n  <div class=\"template-panel\">\n    <el-tabs tab-position=\"top\" :active-name=\"activePaneName\" @tab-click=\"changeTab\" type=\"card\">\n      <el-tab-pane class=\"spec-pane\" label=\"Animation\" name=\"animation\"\n                   :style=\"{height: paneHeight + 'px'}\">\n        <span slot=\"label\" class=\"normal-span\">\n          <i class=\"el-icon-edit-outline\"></i> Animation\n        </span>\n        <codemirror\n            ref=\"animationTextEditor\"\n            :value=\"animationText\"\n            :options=\"cmOptions\"\n            @changes=\"animationTextChange\">\n        </codemirror>\n        <div v-if=\"!isSpecTextValid\"\n             class=\"single-line\"\n             style=\"position: absolute; top: 0; text-align: center; width: 100%; background: #f56c6c; z-index:999\">\n          Specification is not valid! {{ specTextErrorMsg }}\n        </div>\n      </el-tab-pane>\n\n      <el-tab-pane class=\"spec-pane\" label=\"Template\" name=\"template\"\n                   :style=\"{height: paneHeight + 'px'}\">\n        <span slot=\"label\" class=\"normal-span\">\n          <i class=\"el-icon-files\"></i> Template\n        </span>\n        <codemirror\n            ref=\"templateTextEditor\"\n            :value=\"templateText\"\n            :options=\"cmOptions\"\n            @changes=\"templateTextChange\">\n        </codemirror>\n        <div v-if=\"!isSpecTextValid\"\n             class=\"single-line\"\n             style=\"position: absolute; top: 0; text-align: center; width: 100%; background: #f56c6c; z-index:999;\">\n          Specification is not valid! {{ specTextErrorMsg }}\n        </div>\n      </el-tab-pane>\n\n      <el-tab-pane class=\"spec-pane\" label=\"Binder\" name=\"binder\"\n                   :style=\"{height: paneHeight + 'px'}\">\n        <span slot=\"label\" class=\"normal-span\">\n          <i class=\"el-icon-connection\"></i> Binder\n        </span>\n        <codemirror\n            ref=\"binderTextEditor\"\n            :value=\"binderText\"\n            :options=\"Object.assign({readOnly: true}, cmOptions)\">\n        </codemirror>\n        <div style=\"position: absolute; top: 10px; right: 24px; text-align: center; width: 100px;\n             background: rgba(203,203,203,0.27); z-index:999; border-radius: 3px;\">\n          Read Only\n        </div>\n      </el-tab-pane>\n\n      <el-tab-pane class=\"spec-pane\" label=\"Target\" name=\"target\"\n                   :style=\"{height: paneHeight + 'px'}\">\n        <span slot=\"label\" class=\"normal-span\">\n          <i class=\"el-icon-aim\"></i> Virtual target model\n        </span>\n        <codemirror\n            ref=\"virtualModelTextEditor\"\n            :value=\"virtualModelText\"\n            :options=\"cmHTMLOptions\">\n        </codemirror>\n        <div style=\"position: absolute; top: 10px; right: 24px; text-align: center; width: 100px;\n             background: rgba(203,203,203,0.27); z-index:999; border-radius: 3px;\">\n          Read Only\n        </div>\n      </el-tab-pane>\n\n<!--      <el-tab-pane class=\"spec-pane\" label=\"Filters\" name=\"filter\"-->\n<!--                   :style=\"{height: paneHeight-2 + 'px'}\">-->\n<!--        <span slot=\"label\" class=\"normal-span\">-->\n<!--          <i class=\"el-icon-discount\"></i> Filters-->\n<!--        </span>-->\n\n<!--        <el-scrollbar style=\"height: 100%;\">-->\n\n<!--          <div style=\"height: 20px;\">-->\n<!--            <span style=\"line-height: 20px;\">Enable Filter: </span>-->\n<!--            <el-switch-->\n<!--              :value=\"enableFilter\"-->\n<!--              @change=\"enableFilterChange\"-->\n<!--            ></el-switch>-->\n<!--          </div>-->\n<!--        -->\n<!--          <el-row v-for=\"(row, rowIndex) in filterTable\"-->\n<!--          :key=\"'row-'+rowIndex\" style=\"margin-top: 10px;\">-->\n<!--            <el-col v-for=\"(filter, colIndex) in row\"-->\n<!--            :style=\"{-->\n<!--              width: (100/numFilterPerRow) + '%',-->\n<!--            }\"-->\n<!--            :key=\"'row-'+rowIndex+'-col-'+colIndex\">-->\n<!--              <el-card shadow=\"hover\" class=\"filter-card\">-->\n\n<!--                <div slot=\"header\" style=\"height: 30px; line-height: 30px;\">-->\n<!--                  <span class=\"normal-span\">-->\n<!--                    {{ filter.getName() }}-->\n<!--                  </span>-->\n<!--                  <el-button style=\"float: right; padding: 7px 0;\" type=\"text\"-->\n<!--                  @click=\"clickFilter(filter)\">-->\n<!--                    Apply-->\n<!--                  </el-button>-->\n<!--                </div>-->\n\n<!--                <div class=\"normal-span\">-->\n<!--                  <b>Hard</b>: {{ filter.getHardElement().join(', ') }}-->\n<!--                </div>-->\n\n<!--                <div class=\"normal-span\">-->\n<!--                  <b>Soft</b>: {{ filter.getSoftElement().join(', ') }}-->\n<!--                </div>-->\n\n<!--                <div class=\"normal-span\">-->\n<!--                  <b>Comp</b>: {{ filter.getComponentType() }}-->\n<!--                </div>-->\n\n<!--                <div class=\"normal-span\">-->\n<!--                  <b>Anim</b>: {{ filter.getAnimationType() }}-->\n<!--                </div>-->\n\n<!--                <div class=\"normal-span\">-->\n<!--                  <b>Effects</b>: {{ filter.getEffectList().join(', ') }}-->\n<!--                </div>-->\n\n<!--              </el-card>-->\n<!--            </el-col>-->\n<!--          </el-row>-->\n<!--        </el-scrollbar>-->\n<!--      </el-tab-pane>-->\n\n    </el-tabs>\n  </div>\n</template>\n\n<script>\n  import { mapState } from 'vuex';\n  import JSON5 from 'json5';\n  import { codemirror } from 'vue-codemirror';\n  import {SelectionToolType} from \"@/utils/common/SeletionToolType\";\n  import 'codemirror/lib/codemirror.css'\n  import 'codemirror/theme/idea.css'\n  import 'codemirror/mode/javascript/javascript'\n  import 'codemirror/mode/xml/xml.js'\n  import 'codemirror/addon/lint/lint'\n  import 'codemirror/addon/lint/json-lint'\n\n  import'codemirror/addon/selection/active-line.js'\n  // autoCloseTags\n  import'codemirror/addon/edit/closetag.js'\n\n  import \"codemirror/addon/fold/foldcode.js\";\n  import \"codemirror/addon/fold/foldgutter.js\";\n  import \"codemirror/addon/fold/foldgutter.css\";\n  import \"codemirror/addon/fold/brace-fold.js\";\n  import 'codemirror/addon/fold/xml-fold.js'\n\n  import 'codemirror/addon/edit/matchbrackets.js'\n  import {getFormattedXmlString, getFormattedXmlStringHelper} from \"@/core/utils/DomUtils\"\n\n  export default {\n    name: 'DebugPanel',\n    components: {\n      codemirror,\n    },\n    props: ['paneHeight', 'paneWidth'],\n    data() {\n      return {\n        activePaneName: 'animation',\n        // activePaneName: 'specification',\n        templateContentDialogVisible: true,\n        cmOptions: {\n          tabSize: 2,\n          mode: 'application/json',\n          theme: 'idea',\n          lineNumbers: true,\n          lineWrapping:true,\n          matchBrackets:true,\n\n          gutters: [\n            \"CodeMirror-lint-markers\",\n            \"CodeMirror-linenumbers\",\n            \"CodeMirror-foldgutter\"\n          ],\n          foldGutter: true,\n\n          line: true,\n        },\n        codeUpdateTimeoutId: null,\n\n        cmHTMLOptions: {\n          tabSize: 2,\n          mode: 'text/html',\n          htmlMode: true,\n          theme: 'idea',\n          lineNumbers: true,\n          // lineWrapping:true,\n          matchBrackets:true,\n          readOnly: true,\n\n          styleActiveLine: true,\n          autoCloseTags: true,\n\n          gutters: [\n            \"CodeMirror-lint-markers\",\n            \"CodeMirror-linenumbers\",\n            \"CodeMirror-foldgutter\"\n          ],\n          foldGutter: true,\n\n          line: true,\n        },\n\n        resourceText: '',\n        templateText: '',\n        animationText: '',\n        binderText: '',\n        virtualModelText: '',\n\n        isHardChangeResource: false,\n        isHardChangeTemplate: false,\n        isHardChangeAnimation: false,\n\n        updateMark: false,\n      }\n    },\n    methods: {\n      emptyAnimation() {\n        this.$store.commit('editor/emptyAnimation')\n      },\n      currentChange(currentPage) {\n        this.currentPage = currentPage\n      },\n      changeTab(tabObj) {\n        this.activePaneName = tabObj.name\n        setTimeout(() => {\n          this.$refs.resourceTextEditor?.refresh();\n          this.$refs.templateTextEditor?.refresh();\n          this.$refs.animationTextEditor?.refresh();\n          this.$refs.binderTextEditor?.refresh();\n          this.$refs.virtualModelTextEditor?.refresh();\n        }, 0);\n      },\n      // eslint-disable-next-line no-unused-vars\n      resourceTextChange(codeEditor) {\n        setTimeout(() => {\n          codeEditor.refresh()\n        }, 50);\n      },\n      templateTextChange(codeEditor) {\n        if (this.isHardChangeTemplate) {\n          this.isHardChangeTemplate = false;\n          return;\n        }\n        clearTimeout(this.codeUpdateTimeoutId);\n        this.codeUpdateTimeoutId = setTimeout(() => {\n          try {\n            const json = JSON5.parse(codeEditor.getValue());\n            this.$store.commit('editor/updateEditorUsingTemplateJSON', json);\n            this.updateMark = true;\n            this.$store.commit('editor/emitAniChangeSign')\n          } catch(e) {\n            console.error(e);\n            this.$store.commit('editor/changeSpecTextValidState',\n                {isValid: false, errorMsg: e.message});\n          }\n        }, 1000);\n      },\n      animationTextChange(codeEditor) {\n        if (this.isHardChangeAnimation) {\n          this.isHardChangeAnimation = false;\n          return;\n        }\n        clearTimeout(this.codeUpdateTimeoutId);\n        this.codeUpdateTimeoutId = setTimeout(() => {\n          try {\n            const json = JSON5.parse(codeEditor.getValue());\n            this.$store.commit('editor/updateEditorUsingAnimationJSON', json);\n            this.updateMark = true;\n            this.$store.commit('editor/emitAniChangeSign')\n          } catch(e) {\n            console.error(e);\n            this.$store.commit('editor/changeSpecTextValidState',\n                {isValid: false, errorMsg: e.message});\n          }\n        }, 1000);\n      },\n      clickFilter(filter) {\n        if (this.selectionTool === SelectionToolType.NORMAL) {\n          this.$notify({title: 'Enter selection mode first', type: 'warning'});\n          return;\n        }\n        const relatedTargets = filter.relatedTargets(this.fullTargetList);\n        this.$store.commit('editor/changeSelectionTool', SelectionToolType.COMP);\n        this.$nextTick(() => {\n          this.$store.commit('target/changeSelectedTargets', relatedTargets);\n          this.$store.commit('target/changeSvgSelectionChangeSign');\n        });\n      },\n      enableFilterChange(enableFilter) {\n        this.$store.commit('editor/changeFilterSwitch', enableFilter);\n      },\n    },\n    mounted() {\n      // this.paneHeight = this.$el.getBoundingClientRect().height - 44;\n    },\n    watch: {\n      resourceJSONRenderSign() {\n        // const newStr = JSON5.stringify(this.resourceJSON, null, 2);\n        // if (this.$refs.resourceTextEditor.codemirror === newStr) {\n        //   return;\n        // }\n        // this.isHardChangeResource = true;\n        // this.resourceText = newStr;\n        // this.$refs.resourceTextEditor.codemirror.setValue(newStr);\n      },\n      templateJSONRenderSign() {\n        const newStr = JSON5.stringify(this.templateJSON, null, 2);\n        if (this.$refs.templateTextEditor.codemirror.getValue() === newStr) {\n          return;\n        }\n        this.isHardChangeTemplate = true;\n        this.templateText = newStr;\n        this.$refs.templateTextEditor.codemirror.setValue(newStr);\n      },\n      animationJSONRenderSign() {\n        const newStr = JSON5.stringify(this.animationJSON, null, 2);\n        if (this.$refs.animationTextEditor.codemirror.getValue() === newStr) {\n          return;\n        }\n        this.isHardChangeAnimation = true;\n        this.animationText = newStr;\n        this.$refs.animationTextEditor.codemirror.setValue(newStr);\n      },\n      binderJSON() {\n        const newStr = this.binderJSON != null\n            ? JSON5.stringify(this.binderJSON, null, 2)\n            : '(No binder)';\n        this.binderText = newStr;\n        this.$refs.binderTextEditor.codemirror.setValue(newStr);\n      },\n      targetModel() {\n        let newStr = '';\n        if (this.targetModel == null) {\n          newStr = '(No target model)';\n        } else {\n          const vm = this.targetModel.virtualModel;   // vm is a DOM object\n          // convert vm dom to string. each element is a line. add indent.\n          // we don't convert the most outer tag, which is the root\n          const lines = ['<!-- Root selection is a list of these elements -->']\n          Array.from(vm.children).forEach((child) => {\n            lines.push(getFormattedXmlString(child));\n          });\n          newStr = lines.join('\\n');\n        }\n        // newStr = \"<html style=\\\"color: green\\\">\\n\" +\n        //     \"  <!-- this is a comment -->\\n\" +\n        //     \"  <head>\\n\" +\n        //     \"    <title>HTML Example</title>\\n\" +\n        //     \"  </head>\\n\" +\n        //     \"  <body>\\n\" +\n        //     \"    The indentation tries to be <em>somewhat &quot;do what\\n\" +\n        //     \"    I mean&quot;</em>... but might not match your style.\\n\" +\n        //     \"  </body>\\n\" +\n        //     \"</html>\\n\"\n        this.virtualModelText = newStr;\n        this.$refs.virtualModelTextEditor.codemirror.setValue(newStr);\n\n        const cm = this.$refs.virtualModelTextEditor.codemirror;\n        console.log('>>', cm)\n\n        setTimeout(() => {\n          // collapse all lines that contain g-v-el\n          let i = 0;\n          while (i < cm.doc.size) {\n            // const lineHandle = cm.getLineHandle(i);\n            const lineText = cm.getLine(i);\n            const toFold = lineText.includes('g-v-el');\n            if (toFold) {\n              cm.foldCode(i);\n            }\n            // console.log(i, lineText, toFold)\n            i++;\n          }\n        })\n      },\n    },\n    computed: {\n      ...mapState('editor', {\n        isSpecTextValid: state => state.isSpecTextValid,\n        specTextErrorMsg: state => state.specTextErrorMsg,\n        resourceJSON: state => state.resourceJSON,\n        templateJSON: state => state.templateJSON,\n        animationJSON: state => state.animationJSON,\n        resourceJSONRenderSign: state => state.resourceJSONRenderSign,\n        templateJSONRenderSign: state => state.templateJSONRenderSign,\n        animationJSONRenderSign: state => state.animationJSONRenderSign,\n        selectionTool: state => state.selectionTool,\n        enableFilter: state => state.enableFilter,\n        binderJSON: state => state.binderJSON,\n        targetModel: state => state.targetModel,\n      }),\n      ...mapState('target', {\n        fullTargetList: state => state.fullTargetList,\n        selectedTargets: state => state.selectedTargets,\n        activeFilters: state => state.activeFilters,\n      }),\n      filterTable() {\n        const filterTable = [];\n        const filters = this.activeFilters;\n        for (let i = 0; i < filters.length; i += this.numFilterPerRow) {\n          filterTable.push(filters.slice(i, i + this.numFilterPerRow));\n        }\n        return filterTable;\n      },\n      numFilterPerRow() {\n        //return Math.max(1, Math.round((this.paneWidth-20)/190));\n        return Math.max(1, Math.round((this.paneWidth-20)/190));\n      }\n    },\n  }\n</script>\n\n<style scoped>\n  .template-panel {\n    height: 100%;\n    width: 100%;\n    overflow: hidden;\n  }\n  .el-card >>> .el-card__header {\n    padding: 0 10px 0;\n  }\n  .el-scrollbar {\n    height: 100%;\n  }\n  .el-scrollbar >>> .el-scrollbar__wrap {\n    height: 100%;\n    padding-right: 15px;\n    overflow: scroll;\n    overflow-x:auto;\n  }\n  .textarea >>> textarea {\n    font-family: \"Courier New\", serif;\n  }\n  .el-collapse-item >>> .el-collapse-item__arrow {\n    margin: 0;\n    float: left;\n  }\n  .el-textarea >>> .el-textarea__inner {\n    height: 500px;\n  }\n  .control-panel >>> .el-tab-pane {\n    padding: 0 0 14px 14px;\n  }\n  .el-tabs >>> .el-tabs__header {\n    margin-bottom: 0;\n  }\n  .vue-codemirror {\n    height: calc(100%);\n  }\n  .vue-codemirror >>> .CodeMirror {\n    border: 1px solid #eee;\n    height: 100%;\n  }\n  .vue-codemirror >>> .CodeMirror-scroll {\n    overflow: scroll;\n  }\n  .spec-pane {\n    padding: 0 !important;\n  }\n  .normal-span {\n    font-size: 0.9rem;\n    user-select: none;\n  }\n  .filter-card {\n    margin-left: 5px;\n    margin-right: 5px;\n  }\n  .single-line {\n    text-overflow: ellipsis;\n    overflow: hidden;\n    word-break: break-all;\n    white-space: nowrap;\n  }\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DebugPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DebugPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DebugPanel.vue?vue&type=template&id=5e32d44a&scoped=true&\"\nimport script from \"./DebugPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./DebugPanel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DebugPanel.vue?vue&type=style&index=0&id=5e32d44a&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5e32d44a\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"proj-selection-panel\"},[_c('el-scrollbar',[_c('div',{staticClass:\"upload-title\"},[_vm._v(\"Upload an SVG\")]),_c('el-upload',{staticClass:\"drag-upload\",staticStyle:{\"width\":\"100%\"},attrs:{\"drag\":\"\",\"on-success\":_vm.handleFile,\"http-request\":_vm.uploadFile,\"before-upload\":_vm.fileFilter,\"show-file-list\":false,\"auto-upload\":true,\"action\":\"none\",\"multiple\":\"\"}},[_c('i',{staticClass:\"el-icon-upload\"}),_c('div',{staticClass:\"el-upload__text\"},[_vm._v(\"Drop or select file (.svg)\")])]),_c('el-divider'),_vm._l((_vm.projectGroups),function(projGroup){return _c('div',{key:projGroup.name},[_c('div',{staticClass:\"upload-title\"},[_vm._v(_vm._s(projGroup.name)+\" (\"+_vm._s(projGroup.projects.length)+\")\")]),_c('div',{staticClass:\"svg-group\"},_vm._l((projGroup.projects),function(project){return _c('el-card',{key:project.id,staticClass:\"svg-item clickable\",attrs:{\"shadow\":\"hover\",\"body-style\":{ padding: '0px'}},nativeOn:{\"click\":function($event){return _vm.handleProjectClick(project)}}},[_c('SvgPreviewer',{attrs:{\"project\":project,\"height\":160,\"width\":240}}),_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"center\",\"align-items\":\"center\",\"height\":\"20px\"}},[_vm._v(_vm._s(project.label))])],1)}),1),_c('el-divider')],1)}),_c('div',{staticClass:\"upload-title\"},[_vm._v(\"Load uploaded charts (\"+_vm._s(_vm.customCharts.length)+\")\")]),_c('div',{staticClass:\"svg-group\"},_vm._l((_vm.customCharts),function(project){return _c('el-card',{key:project.id,staticClass:\"svg-item clickable\",attrs:{\"shadow\":\"hover\",\"body-style\":{ padding: '0px'}},nativeOn:{\"click\":function($event){return _vm.handleProjectClick(project)}}},[_c('SvgPreviewer',{attrs:{\"project\":project,\"height\":160,\"width\":240}}),_c('div',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"center\",\"align-items\":\"center\",\"height\":\"20px\"}},[_vm._v(_vm._s(project.label))])],1)}),1)],2)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"svg-previewer\",style:({height: _vm.height + 'px', width: _vm.width + 'px'})},[_c('svg',{ref:\"svg\",attrs:{\"height\":_vm.height,\"width\":_vm.width}},[_c('g',{staticClass:\"scene\"})])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"svg-previewer\"\n       :style=\"{height: height + 'px', width: width + 'px'}\">\n    <svg ref=\"svg\" :height=\"height\" :width=\"width\">\n      <g class=\"scene\">\n      </g>\n    </svg>\n  </div>\n</template>\n\n<script>\n  import {mapState} from \"vuex\";\n\n  export default {\n    name: 'SvgPreviewer',\n    props: [\n      'project', 'width', 'height'\n    ],\n    data() {\n      return {\n        svg: null,\n        scene: null,\n\n        created: false,\n      }\n    },\n    methods: {\n      loadSVG() {\n        if (this.created) {\n          return;   // one project id, one svg creation\n        }\n        const svgStr = this.staticSvgMap.get(this.project.id);\n        if (!svgStr) {\n          return;\n        }\n        this.created = true;\n\n        this.scene.innerHTML = svgStr;\n        this.$nextTick(() => {\n          const innerSvg = this.scene.querySelector('svg');\n          const width = innerSvg.getAttribute('width');\n          const height = innerSvg.getAttribute('height');\n\n          this.svg.setAttribute('viewBox', `0 0 ${width} ${height}`)\n\n          // innerSvg.setAttribute('width', this.width);\n          // innerSvg.setAttribute('height', this.height);\n          //\n          // let viewBoxStr = innerSvg.getAttribute('viewBox');\n          // if (!viewBoxStr || !viewBoxStr.match(/\\d+ \\d+ \\d+ \\d+/)) {\n          //   // viewBox settings is missing or incorrect\n          //   // try to fix it first\n          //   const {width, height} = this.scene.getBoundingClientRect();\n          //   viewBoxStr = `0 0 ${width} ${height}`;\n          // }\n          //\n          // // fulfill the previewer panel\n          // const numbers = viewBoxStr.split(' ')\n          // const w = parseInt(numbers[2]), h = parseInt(numbers[3])\n          // if (w / h > this.width / this.height) {\n          //   const newWidth = Math.floor(this.width / this.height * h);\n          //   const startX = Math.ceil((w - newWidth) / 2);\n          //   viewBoxStr = `${startX} 0 ${newWidth} ${h}`\n          // } else {\n          //   const newHeight = Math.round(this.height / this.width * w);\n          //   const startY = Math.ceil((h - newHeight) / 2)\n          //   viewBoxStr = `0 ${startY} ${w} ${newHeight}`\n          // }\n          //\n          // innerSvg.setAttribute('viewBox', viewBoxStr);\n        })\n      }\n    },\n    mounted() {\n      this.svg = this.$refs.svg;\n      this.scene = this.svg.querySelector('.scene');\n    },\n    watch: {\n      staticSvgMapSign() {\n        this.loadSVG();\n      }\n    },\n    computed: {\n      ...mapState('resource', {\n        staticSvgMap: state => state.staticSvgMap,\n        staticSvgMapSign: state => state.staticSvgMapSign,\n      }),\n    }\n  }\n</script>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SvgPreviewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SvgPreviewer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SvgPreviewer.vue?vue&type=template&id=ccece566&scoped=true&\"\nimport script from \"./SvgPreviewer.vue?vue&type=script&lang=js&\"\nexport * from \"./SvgPreviewer.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ccece566\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"proj-selection-panel\">\n    <el-scrollbar>\n\n      <div class=\"upload-title\">Upload an SVG</div>\n      <el-upload\n          class=\"drag-upload\"\n          drag\n          style=\"width: 100%\"\n          :on-success=\"handleFile\"\n          :http-request='uploadFile'\n          :before-upload=\"fileFilter\"\n          :show-file-list=\"false\"\n          :auto-upload=\"true\"\n          action=\"none\"\n          multiple>\n        <i class=\"el-icon-upload\"></i>\n        <div class=\"el-upload__text\">Drop or select file (.svg)</div>\n        <!--        <div class=\"el-upload__tip\" slot=\"tip\">/div>-->\n      </el-upload>\n\n      <el-divider></el-divider>\n\n      <div v-for=\"projGroup in projectGroups\" :key=\"projGroup.name\">\n        <div class=\"upload-title\">{{ projGroup.name }} ({{ projGroup.projects.length }})</div>\n        <div class=\"svg-group\">\n          <el-card v-for=\"project in projGroup.projects\" :key=\"project.id\"\n                   class=\"svg-item clickable\"\n                   shadow=\"hover\"\n                   :body-style=\"{ padding: '0px'}\"\n                   @click.native=\"handleProjectClick(project)\">\n            <SvgPreviewer :project=\"project\" :height=\"160\" :width=\"240\"></SvgPreviewer>\n            <div style=\"display: flex; justify-content: center; align-items: center; height: 20px;\">{{ project.label }}</div>\n          </el-card>\n<!--          <div v-for=\"i in [...Array((3 - (projGroup.projects.length % 3)) % 3).keys()]\"-->\n<!--               class=\"svg-item\"-->\n<!--               :key=\"'empty-block-' + i\"></div>-->\n        </div>\n        <el-divider></el-divider>\n      </div>\n\n      <div class=\"upload-title\">Load uploaded charts ({{ customCharts.length }})</div>\n      <div class=\"svg-group \">\n        <el-card v-for=\"project in customCharts\" :key=\"project.id\"\n                 class=\"svg-item clickable\"\n                 shadow=\"hover\"\n                 :body-style=\"{ padding: '0px'}\"\n                 @click.native=\"handleProjectClick(project)\">\n          <SvgPreviewer :project=\"project\" :height=\"160\" :width=\"240\"></SvgPreviewer>\n          <div style=\"display: flex; justify-content: center; align-items: center; height: 20px;\">{{ project.label }}</div>\n        </el-card>\n<!--        <div v-for=\"i in [...Array((3 - (customCharts.length % 3)) % 3).keys()]\"-->\n<!--             class=\"svg-item\"-->\n<!--             :key=\"'empty-block-' + i\"></div>-->\n      </div>\n\n    </el-scrollbar>\n  </div>\n</template>\n\n<script>\n  import {mapState} from \"vuex\";\n  import axios from \"axios\";\n  import SvgPreviewer from \"@/components/editor/ProjSelPanel/SvgPreviewer\";\n\n  export default {\n    name: 'ProjSelectionPanel',\n    components: {\n      SvgPreviewer,\n    },\n    data() {\n      return {\n        customCharts: []\n      }\n    },\n    mounted() {\n      this.$store.dispatch('resource/queryAllSvg')\n          .then(() => {\n            this.$store.commit('resource/changeStaticSvgMapSign');\n          })\n    },\n    methods: {\n      uploadFile(param) {\n        this.svgUrl = URL.createObjectURL(param.file);\n        axios.get(this.svgUrl)\n            .then(rep => {\n              this.$store.dispatch('resource/addProject', {srcId: param.file.name.split('.')[0], svgStr: rep.data});\n            }).catch(error => {\n              this.$message.error(error);\n            })\n        this.$emit('closeProjSelPanel');\n      },\n      handleFile(res, file) {\n        // if need to store svg in backend\n        console.log(res, file)\n      },\n      fileFilter(file) {\n        const isSVG = file.type === 'image/svg+xml'\n        if (!isSVG) {\n          this.$message.error('Only support svg chart!');\n        }\n        return isSVG;\n      },\n      handleProjectClick(project) {\n        console.log('change proj', project)\n        this.$store.commit('resource/changeProjectId', project.id);\n        this.$emit('closeProjSelPanel');\n      },\n    },\n    watch: {\n      staticSvgMap() {\n        console.log(this.staticSvgMap);\n      }\n    },\n    computed: {\n      projectId: {\n        set(value) {\n          this.$store.commit('resource/changeProjectId', value);\n        },\n        get() {\n          return this.$store.state.resource.projectId;\n        }\n      },\n      ...mapState('resource', {\n        projectList: state => state.projectList,\n        staticSvgMap: state => state.staticSvgMap,\n      }),\n      projectGroups() {\n        const groups = []\n        const groupName2idx = new Map();\n        this.projectList.forEach(project => {\n          const groupName = project.group;\n          if (!groupName2idx.has(groupName)) {\n            groupName2idx.set(groupName, groups.length);\n            groups.push({\n              name: groupName,\n              projects: []\n            })\n          }\n          groups[groupName2idx.get(groupName)].projects.push(project);\n        });\n\n        const order = [\n            'Real video reproduction',\n            'Vega-Lite chart',\n            'Infographics from related work',\n            'User study',\n        ]\n        groups.sort((a, b) => {\n          return order.indexOf(a.name) - order.indexOf(b.name);\n        })\n\n        // console.log('>>>', groups);\n        return groups;\n      },\n    }\n  }\n</script>\n\n<style scoped>\n.proj-selection-panel {\n  user-select: none;\n  height: 80%;\n}\n.svg-group {\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  flex-wrap: wrap;\n}\n.svg-item {\n  height: 183px;\n  width: 240px;\n  margin: 0 10px 10px 10px;\n}\n.clickable {\n  cursor: pointer;\n}\n.proj-selection-panel >>> .el-scrollbar__wrap {\n  overflow-x: hidden;\n}\n\n.drag-upload >>> .el-upload-dragger, .drag-upload >>> .el-upload--text {\n  width: 100%;\n}\n.upload-title {\n  font-size: 1.2rem;\n  margin-bottom: 8px;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjSelectionPanel.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjSelectionPanel.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ProjSelectionPanel.vue?vue&type=template&id=62d2b04d&scoped=true&\"\nimport script from \"./ProjSelectionPanel.vue?vue&type=script&lang=js&\"\nexport * from \"./ProjSelectionPanel.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ProjSelectionPanel.vue?vue&type=style&index=0&id=62d2b04d&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"62d2b04d\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"export-svg-container-master\"},[_c('svg',{ref:\"svg\",attrs:{\"viewBox\":`0 0 ${_vm.width} ${_vm.height}`}},[_c('rect',{attrs:{\"x\":\"0\",\"y\":\"0\",\"width\":_vm.width,\"height\":_vm.height,\"fill\":'#ffffff',\"stroke\":\"none\"}}),_c('g',{staticClass:\"scene\"})])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/* eslint-disable */\nimport * as Canvg from 'canvg';\nimport ffmpeg from 'ffmpeg.js/ffmpeg-mp4.js';\nimport dataUriToBuffer from \"data-uri-to-buffer\";\n\nexport function svgStringArrayToMP4(svgStringArray, audioBuffer, width, height, framerate) {\n  const bufferList = svgStringArray.map(str => svgToPngBuffer(str, width, height));\n  return pngListToMP4(bufferList, audioBuffer, width, height, framerate);\n}\n\nexport function svgToPngBuffer(svgStr, width, height) {\n  const canvas = document.createElement(\"canvas\");\n  canvas.setAttribute('width', width);\n  canvas.setAttribute('height', height);\n\n  const ctx = canvas.getContext('2d');\n  const canvg = Canvg.Canvg.fromString(ctx, svgStr);\n  canvg.start();\n\n  const pngDataUrl = canvas.toDataURL(\"img/png\");\n\n  canvg.stop();\n\n  return dataUriToBuffer(pngDataUrl);\n}\n\n\nexport function pngListToMP4(pngList, audioBuffer, width, height, framerate) {\n  const fileSys = pngList.map((png, i) => ({\n    name: `image${i}.png`,\n    data: new Uint8Array(png),\n  }))\n  const wavArray = getWavArray(audioBuffer);\n  fileSys.push({\n    name: 'music.wav',\n    data: wavArray,\n  })\n  let stdout = \"\";\n  let stderr = \"\";\n  let exitCode = -1;\n  const result = ffmpeg({\n    MEMFS: fileSys,\n    arguments: [\n      \"-i\", \"music.wav\",\n      \"-ac\", \"1\",\n      \"-framerate\", \"\" + framerate,\n      \"-i\", \"image%d.png\",\n      \"-r\", \"\" + framerate,\n      \"-c:v\", \"libx264\",\n      \"-s\", `${width}x${height}`,\n      \"-pix_fmt\", \"yuv420p\",\n      \"-ar\", \"16000\",\n      \"output.mp4\",\n    ],\n    print: function(data) { stdout += data + \"\\n\"; },\n    printErr: function(data) { stderr += data + \"\\n\"; },\n    onExit: function(code) {\n      console.log(\"Video synthesis process exited with code \" + code);\n      if (code !== 0) {\n        console.log(stdout);\n        console.error(stderr);\n      }\n      exitCode = code;\n    },\n  });\n  return {\n    result: result.MEMFS[0]?.data ?? null,\n    code: exitCode,\n    message: stdout,\n  }\n}\n\nfunction getWavArray(audioBuffer) {\n  let numOfChan = audioBuffer.numberOfChannels,\n      length = audioBuffer.length * numOfChan * 2 + 44,\n      buffer = new ArrayBuffer(length),\n      view = new DataView(buffer),\n      channels = [], i, sample,\n      offset = 0,\n      pos = 0;\n\n  function setUint16(data) {\n    view.setUint16(pos, data, true);\n    pos += 2;\n  }\n\n  function setUint32(data) {\n    view.setUint32(pos, data, true);\n    pos += 4;\n  }\n\n  // write WAVE header\n  // \"RIFF\"\n  setUint32(0x46464952);\n  // file length - 8\n  setUint32(length - 8);\n  // \"WAVE\"\n  setUint32(0x45564157);\n  // \"fmt \" chunk\n  setUint32(0x20746d66);\n  // length = 16\n  setUint32(16);\n  // PCM (uncompressed)\n  setUint16(1);\n  setUint16(numOfChan);\n  setUint32(audioBuffer.sampleRate);\n  // avg. bytes/sec\n  setUint32(audioBuffer.sampleRate * 2 * numOfChan);\n  // block-align\n  setUint16(numOfChan * 2);\n  // 16-bit (hardcoded in this demo)\n  setUint16(16);\n  // \"data\" - chunk\n  setUint32(0x61746164);\n  // chunk length\n  setUint32(length - pos - 4);\n\n  // write interleaved data\n  for (i = 0; i < audioBuffer.numberOfChannels; i++)\n    channels.push(audioBuffer.getChannelData(i));\n\n  while (pos < length) {\n    // interleave channels\n    for (i = 0; i < numOfChan; i++) {\n      // clamp\n      sample = Math.max(-1, Math.min(1, channels[i][offset]));\n      // scale to 16-bit signed int\n      sample = (0.5 + sample < 0 ? sample * 32768 : sample * 32767) | 0;\n      // write 16-bit sample\n      view.setInt16(pos, sample, true);\n      pos += 2;\n    }\n    // next source sample\n    offset++\n  }\n\n  return buffer;\n}\n\nexport function download(buff, filename) {\n  let url = window.URL.createObjectURL(new Blob( [buff], {type: \"arraybuffer\"}) )\n  const link = document.createElement('a');\n  link.style.display = 'none';\n  link.href = url;\n  link.setAttribute('download', filename);\n  document.body.appendChild(link);\n  link.click();\n  document.body.removeChild(link);\n}\n\n","export class ChartShotAnimation {\n  /** @type {ChartData[]} */\n  charts = []\n  /** @type {(string | Object)[]} */\n  imports = []\n  /** @type {TargetDefinition[]} */\n  targetDefs = []\n  /** @type {BaseTemplate[]} */\n  templates = []\n  /** @type {BaseAnimation} */\n  animation\n}","import {FilterTransform} from \"@/core/entities/spec/transform/FilterTransform\";\nimport {SortTransform} from \"@/core/entities/spec/transform/SortTransform\";\n\nexport class TransformParser {\n  static reviver(key, value) {\n    return key === \"\" ? TransformParser.fromJSON(value) : value;\n  }\n\n  /**\n   * @param {Object} json\n   * @returns {BaseTransform}\n   */\n  static fromJSON(json) {\n    if (json == null || typeof json !== \"object\") {\n      return null;\n    }\n    switch (json.type) {\n      case 'filter':\n        return Object.assign(new FilterTransform(), json);\n      case 'sort':\n        return Object.assign(new SortTransform(), json);\n      default:\n        console.warn('Unsupported transform type ' + json.type);\n        return null;\n    }\n  }\n\n  /**\n   * @param {Object | Object[]} json\n   */\n  static fromObjectOrArray(json) {\n    if (json == null || typeof json !== \"object\") {\n      return [];\n    }\n    if (!Array.isArray(json)) {\n      json = [json];\n    }\n    const resultArray = json.map(item => TransformParser.fromJSON(item));\n    resultArray.filter(item => item != null);\n    return resultArray;\n  }\n}","import {NormalTarget, Target} from \"@/core/entities/spec/Target\";\nimport {TransformParser} from \"@/core/parser/TransformParser\";\n\nexport class TargetParser {\n  static reviver(key, value) {\n    return key === \"\" ? TargetParser.fromJSON(value) : value;\n  }\n\n  /**\n   * @param {Object} json\n   * @returns {Target}\n   */\n  static fromJSON(json) {\n    if (json == null || json === '') {\n      return Target.getDefaultTarget();\n    }\n    if (typeof json === 'string') {\n      return new NormalTarget(json);\n    }\n    if (typeof json !== 'object') {\n      return Target.getDefaultTarget();\n    }\n    if ('selector' in json ||\n        ('transform' in json && Object.keys(json).length === 1)) {\n      // NormalTarget\n      const transform = TransformParser.fromObjectOrArray(json.transform);\n      return Object.assign(Target.getDefaultTarget(), json, {transform});\n    } else {\n      // AnonymousTarget\n      throw 'Target type is not supported';\n    }\n  }\n}","import {BaseAnimation} from \"@/core/entities/spec/BaseAnimation\";\nimport gsap from 'gsap';\n\nexport class SyncAnimation extends BaseAnimation {\n  /** @type {{sync: BaseAnimation[]}} */\n  sequence\n\n  /**\n   * @param {BaseAnimation[]} sync\n   */\n  constructor(sync=[]) {\n    super();\n    this.type = 'sync';\n    this.sequence = {sync}\n  }\n\n  /**\n   * @param {BaseAnimation} animation\n   * @returns {SyncAnimation}\n   */\n  append(animation) {\n    this.sequence.sync.push(animation);\n    return this;\n  }\n\n  computeDuration(context) {\n    const {yoyo} = this.timing.getComputedTiming();\n    if (this.timing?.duration) {\n      return this.timing.duration;\n    }\n    let duration = 0;\n    this.sequence.sync.forEach(ani => {\n      const subDuration = ani.computeDuration(context.deriveBy(this.target));\n      duration = Math.max(duration, subDuration + (ani.timing.start ?? 0) + (ani.timing.offset ?? 0));\n    });\n    if (yoyo) {\n      return duration * (yoyo.repeat + 1) + yoyo.delay * yoyo.repeat;\n    }\n    return duration;\n  }\n\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {Set<HTMLElement>}\n   */\n  computePossibleElements(context) {\n    const set = new Set();\n    this.sequence.sync.forEach(ani => {\n      const subSet = ani.computePossibleElements(context.deriveByWithoutTransform(this.target));\n      subSet.forEach(el => set.add(el));\n    });\n    return set;\n  }\n\n  /**\n   * @param {import('../../context/Context').RenderContext} context\n   * @returns {gsap.core.Timeline}\n   */\n  create(context) {\n    const tl = gsap.timeline();\n    this.sequence.sync.forEach(ani => {\n      const subTl = ani.create(context.deriveBy(this.target));\n      if (subTl === null) {\n        return;\n      }\n      // if (ani.timing.duration) {\n      //   subTl.duration(ani.timing.duration);\n      // }\n      // console.log('add ani: sync', ani, ani.timing.startPlusOffset());\n      tl.add(subTl, ani.timing.startPlusOffset());\n    });\n\n    const {yoyo} = this.timing.getComputedTiming();\n    if (this.timing?.duration) {\n      tl.duration(this.timing.duration);\n    }\n    if (yoyo) {\n      tl.yoyo(true);\n      tl.repeat(yoyo.repeat);\n      tl.repeatDelay(yoyo.delay);\n    }\n    return tl;\n  }\n}\n","import {BaseAnimation} from \"@/core/entities/spec/BaseAnimation\";\nimport gsap from 'gsap';\n\nexport class ConcatAnimation extends BaseAnimation {\n  /** @type {{concat: BaseAnimation[]}} */\n  sequence\n\n  /**\n   * @param {BaseAnimation[]} concat\n   */\n  constructor(concat=[]) {\n    super();\n    this.type = 'concat';\n    this.sequence = {concat}\n  }\n\n  /**\n   * @param {BaseAnimation} animation\n   * @returns {ConcatAnimation}\n   */\n  append(animation) {\n    this.sequence.concat.push(animation);\n    return this;\n  }\n\n  computeDuration(context) {\n    const {yoyo} = this.timing.getComputedTiming();\n    if (this.timing?.duration) {\n      return this.timing.duration;\n    }\n    let duration = 0;\n    this.sequence.concat.forEach(ani => {\n      const subDuration = ani.computeDuration(context.deriveBy(this.target));\n      duration = Math.max(duration, duration + subDuration + (ani.timing.offset ?? 0));\n    });\n    if (yoyo) {\n      return duration * (yoyo.repeat + 1) + yoyo.delay * yoyo.repeat;\n    }\n    return duration;\n  }\n\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {Set<HTMLElement>}\n   */\n  computePossibleElements(context) {\n    const set = new Set();\n    this.sequence.concat.forEach(ani => {\n      const subSet = ani.computePossibleElements(context.deriveByWithoutTransform(this.target));\n      subSet.forEach(el => set.add(el));\n    });\n    return set;\n  }\n\n  /**\n   * @param {import('../../context/Context').RenderContext} context\n   * @returns {gsap.core.Timeline}\n   */\n  // eslint-disable-next-line no-unused-vars\n  create(context) {\n    const tl = gsap.timeline();\n    this.sequence.concat.forEach(ani => {\n      const subTl = ani.create(context.deriveBy(this.target));\n      if (subTl === null) {\n        return;\n      }\n      // if (ani.timing.duration) {\n      //   subTl.duration(ani.timing.duration);\n      // }\n      // console.log('add ani: concat', ani, '>' + (ani.timing.offset ?? 0));\n      tl.add(subTl, '>' + (ani.timing.offset ?? 0));\n    });\n\n    const {yoyo} = this.timing.getComputedTiming();\n    if (this.timing?.duration) {\n      tl.duration(this.timing.duration);\n    }\n    if (yoyo) {\n      tl.yoyo(true);\n      tl.repeat(yoyo.repeat);\n      tl.repeatDelay(yoyo.delay);\n    }\n    return tl;\n  }\n}\n","import {BaseAnimation} from \"@/core/entities/spec/BaseAnimation\";\nimport gsap from 'gsap';\n\nexport class GroupAnimation extends BaseAnimation {\n  /** @type {{grouping: Object, animation: BaseAnimation}} */\n  sequence\n\n  constructor() {\n    super();\n    this.type = 'group';\n  }\n\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {Set<HTMLElement>}\n   */\n  // eslint-disable-next-line no-unused-vars\n  computePossibleElements(context) {\n    return new Set();\n  }\n\n  /**\n   * @param {import('../../context/Context').RenderContext} context\n   * @returns {gsap.core.Timeline}\n   */\n  // eslint-disable-next-line no-unused-vars\n  create(context) {\n    const tl = gsap.timeline();\n    return tl;\n  }\n}\n","import {BaseAnimation} from \"@/core/entities/spec/BaseAnimation\";\n\nexport class TemplateUsage extends BaseAnimation {\n  /** @type {string} */\n  use\n\n  /**\n   * @param {string} use\n   * @param {Object<string, any>} settings\n   */\n  constructor(use='', settings={}) {\n    super(settings);\n    this.use = use;\n    this.type = 'usage';\n  }\n\n  /**\n   * @param {string} use\n   * @returns {TemplateUsage}\n   */\n  useTemplate(use) {\n    this.use = use;\n    return this;\n  }\n\n  computeDuration(context) {\n    const {yoyo} = this.timing.getComputedTiming();\n    if (this.timing?.duration) {\n      return this.timing.duration;\n    }\n    const ani = this.instantiateUsingTemplate(context);\n    let duration = ani?.computeDuration(context.deriveBy(this.target)) ?? 0;\n    if (yoyo) {\n      return duration * (yoyo.repeat + 1) + yoyo.delay * yoyo.repeat;\n    }\n    return duration;\n  }\n\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {Set<HTMLElement>}\n   */\n  computePossibleElements(context) {\n    const ani = this.instantiateUsingTemplate(context, false);\n    if (!ani) {\n      return new Set();\n    }\n    return ani.computePossibleElements(context.deriveByWithoutTransform(this.target));\n  }\n\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {gsap.core.Timeline | gsap.core.Tween}\n   */\n  create(context) {\n    const ani = this.instantiateUsingTemplate(context);\n    if (!ani) {\n      return null;\n    }\n    const tl = ani.create(context.deriveBy(this.target));\n    const {yoyo} = this.timing.getComputedTiming();\n    if (this.timing?.duration) {\n      tl.duration(this.timing.duration);\n    }\n    if (yoyo) {\n      tl.yoyo(true);\n      tl.repeat(yoyo.repeat);\n      tl.repeatDelay(yoyo.delay);\n    }\n    return tl;\n  }\n\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @param {boolean=true} toCheck\n   * @returns {BaseAnimation}\n   */\n  instantiateUsingTemplate(context, toCheck=true) {\n    if (!this.use || this.use === '') {\n      return null;\n    }\n    const template = context.getTemplate(this.use);\n    if (template != null) {\n      return template.instantiate(this.settings, toCheck);\n    } else {\n      console.warn(`Template ${this.use} not found.`)\n      return null;\n    }\n  }\n}\n","import {TargetParser} from \"@/core/parser/TargetParser\";\nimport {SyncAnimation} from \"@/core/entities/spec/animation/SyncAnimation\";\nimport {ConcatAnimation} from \"@/core/entities/spec/animation/ConcatAnimation\";\nimport {GroupAnimation} from \"@/core/entities/spec/animation/GroupAnimation\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\nimport JSON5 from 'json5';\nimport {Timing} from \"@/core/entities/spec/Timing\";\n\nexport class AnimationParser {\n  static reviver(key, value) {\n    return key === \"\" ? AnimationParser.fromJSON(value) : value;\n  }\n\n  /**\n   * @param {Object | string} json\n   * @returns {BaseAnimation}\n   */\n  static fromJSON(json) {\n    if (typeof json === 'string') {\n      return JSON5.parse(json, AnimationParser.reviver);\n    } else if ('sequence' in json) {\n      return AnimationParser.createSequenceAnimation(json);\n    } else if ('use' in json) {\n      return AnimationParser.createTemplateUsage(json);\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * @param {Object} json\n   * @returns {SyncAnimation | ConcatAnimation | GroupAnimation}\n   */\n  static createSequenceAnimation(json) {\n    let obj, sequence;\n    if ('sync' in json.sequence && Array.isArray(json.sequence.sync)) {\n      obj = new SyncAnimation();\n      sequence = {\n        sync: json.sequence.sync.map(subObj => AnimationParser.fromJSON(subObj))\n      };\n\n    } else if ('concat' in json.sequence && Array.isArray(json.sequence.concat)) {\n      obj = new ConcatAnimation();\n      sequence = {\n        concat: json.sequence.concat.map(subObj => AnimationParser.fromJSON(subObj))\n      };\n\n    } else if ('animation' in json.sequence) {\n      obj = new GroupAnimation();\n      sequence = {\n        grouping: json.sequence.grouping,\n        animation: AnimationParser.fromJSON(json.sequence.animation)\n      };\n\n    } else {\n      console.warn('create sequence animation failed', json);\n      return null;\n    }\n\n    const target = TargetParser.fromJSON(json.target);\n    const timing = Object.assign(obj.timing, json.timing ?? {});\n    if (timing.yoyo === true) {\n      timing.yoyo = Timing.getDefaultYoyo();\n    }\n    return Object.assign(obj, json, {target, sequence, timing});\n  }\n\n  /**\n   * @param {Object} json\n   * @returns {TemplateUsage}\n   */\n  static createTemplateUsage(json) {\n    const obj = new TemplateUsage();\n    const target = TargetParser.fromJSON(json.target);\n    const timing = Object.assign(obj.timing, json.timing ?? {});\n    if (timing.yoyo === true) {\n      timing.yoyo = Timing.getDefaultYoyo();\n    }\n    const settings = Object.assign(obj.settings, json.settings ?? {});\n    return Object.assign(obj, json, {target, timing, settings});\n  }\n}","/**\n * @param {object} object\n * @param {function(key: any, item: object, parent: object): boolean} func\n */\nfunction traversalObject(object, func) {\n  if (object == null) return\n  traversalObjectRecursively(object, func)\n}\n\n/**\n * @param {object} object\n * @param {function(key: any, item: object, parent: object): boolean} func\n * @returns {boolean} Not to traversal if return true\n */\nfunction traversalObjectRecursively(object, func) {\n  if (object == null || typeof object !== 'object') return false\n  // console.log(object)\n  for (let key of Object.keys(object)) {\n    const item = object[key]\n    let terminate = func(key, item, object)\n    if (terminate) return true\n    traversalObjectRecursively(item, func)\n  }\n  return false\n}\n\nfunction deepCopy(obj) {\n  if (obj === undefined || obj === null) {\n    return obj\n  }\n  let copy = Array.isArray(obj) ? [] : {}\n  for (let i in obj) {\n    copy[i] = typeof obj[i] === 'object' ? deepCopy(obj[i]) : obj[i]\n  }\n  if (obj.prototype !== undefined) {\n    copy.prototype = obj.prototype\n  }\n  return copy\n}\n\nexport const JsonUtils = {\n  traversalObject, deepCopy\n}","import {BaseAnimation} from \"@/core/entities/spec/BaseAnimation\";\n\nexport class EmptyAnimation extends BaseAnimation {\n  constructor() {\n    super();\n    this.type = 'empty';\n  }\n\n  // eslint-disable-next-line no-unused-vars\n  computeDuration(context) {\n    return 0;\n  }\n\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {Set<HTMLElement>}\n   */\n  // eslint-disable-next-line no-unused-vars\n  computePossibleElements(context) {\n    return new Set();\n  }\n\n  /**\n   * @param {import('../../context/Context').RenderContext} context\n   * @returns {null}\n   */\n  // eslint-disable-next-line no-unused-vars\n  create(context) {\n    return null;    // return nothing\n  }\n}\n","import {AnimationParser} from \"@/core/parser/AnimationParser\";\nimport {BaseTemplate} from \"@/core/entities/spec/BaseTemplate\";\nimport {JsonUtils} from \"@/core/utils/JsonUtils\";\nimport {EmptyAnimation} from \"@/core/entities/spec/animation/EmptyAnimation\";\n\nexport class JsonTemplate extends BaseTemplate {\n  /** @type {{}} */\n  animation\n\n  constructor(animation=null) {\n    super();\n    this.animation = animation;\n    this.type = 'json';\n  }\n\n  /**\n   * @returns {BaseAnimation}\n   */\n  createAnimation() {\n    if (!this.animation) {\n      return new EmptyAnimation();\n    }\n    // get a copy of animation declaration\n    const animation = JSON.parse(JSON.stringify(this.animation));\n    // set all parameters\n    const settings = this.settings;\n    JsonUtils.traversalObject(animation, (key, current, parent) => {\n      if (typeof current !== 'string' || !current.includes('$')) {\n        return;\n      }\n      current = current.trim();\n      if (current.match(/^\\$[0-9a-zA-Z]*$/)) {  // '$xxx'\n        const paramName = current.substr(1);\n        if (paramName in settings) {\n          parent[key] = settings[paramName];\n        }\n      } else {\n        let result = current;\n        Object.keys(settings).forEach(paramName => {\n          result = result.replaceAll('$' + paramName, settings[paramName]);\n        })\n        parent[key] = result;\n      }\n    })\n    return AnimationParser.fromJSON(animation);\n  }\n}\n","import {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport JSON5 from 'json5';\n\nexport class ParamDefinitionParser {\n  static reviver(key, value) {\n    return key === \"\" ? ParamDefinitionParser.fromJSON(value) : value;\n  }\n\n  /**\n   * @param {Object} json\n   * @returns {ParamDefinition}\n   */\n  static fromJSON(json) {\n    if (typeof json === 'string') {\n      return JSON5.parse(json, ParamDefinitionParser.reviver);\n    } else {\n      const obj = new ParamDefinition();\n      return Object.assign(obj, json);\n    }\n  }\n}","import {JsonTemplate} from \"@/core/entities/spec/template/JsonTemplate\";\nimport {ParamDefinitionParser} from \"@/core/parser/ParamDefinitionParser\";\nimport JSON5 from 'json5';\n\nexport class TemplateParser {\n  static reviver(key, value) {\n    return key === \"\" ? TemplateParser.fromJSON(value) : value;\n  }\n\n  /**\n   * @param {Object} json\n   * @returns {BaseTemplate}\n   */\n  static fromJSON(json) {\n    if (typeof json === 'string') {\n      return JSON5.parse(json, TemplateParser.reviver);\n    }\n    if (typeof json !== \"object\") {\n      return null;\n    }\n    const obj = new JsonTemplate();\n    let parameters;\n    if (json.parameters && Array.isArray(json.parameters)) {\n      parameters = json.parameters.map(p => ParamDefinitionParser.fromJSON(p));\n    } else {\n      parameters = [];\n    }\n    return Object.assign(obj, json, {parameters});\n  }\n}\n","import {ChartShotAnimation} from \"@/core/entities/spec/ChartShotAnimation\";\nimport {TemplateParser} from \"@/core/parser/TemplateParser\";\nimport {AnimationParser} from \"@/core/parser/AnimationParser\";\nimport JSON5 from 'json5';\n\nexport class ChartShotAnimationParser {\n  static reviver(key, value) {\n    return key === \"\" ? ChartShotAnimationParser.fromJSON(value) : value;\n  }\n\n  /**\n   * @param {Object} json\n   * @returns {ChartShotAnimation}\n   */\n  static fromJSON(json) {\n    if (typeof json === 'string') {\n      return JSON5.parse(json, ChartShotAnimationParser.reviver);\n    } else {\n      const obj = new ChartShotAnimation();\n\n      let templates;\n      if (json.templates && Array.isArray(json.templates)) {\n        templates = json.templates.map(t => TemplateParser.fromJSON(t));\n      } else {\n        templates = [];\n      }\n      const animation = AnimationParser.fromJSON(json.animation);\n      return Object.assign(obj, json, {templates, animation});\n    }\n  }\n}","import {ChartShotAnimationParser} from \"@/core/parser/ChartShotAnimationParser\";\n\nexport class Parser {\n  /** @type {string | Object} */\n  json\n\n  /**\n   * @param {string | Object} json\n   */\n  init(json) {\n    this.json = json\n  }\n\n  /**\n   * @returns {ChartShotAnimation}\n   */\n  parse() {\n    return ChartShotAnimationParser.fromJSON(this.json)\n  }\n}","export class Context {\n  /** @type {import('@/core/entities/context/RenderContext').RenderContext} */\n  renderContext\n  /** @type {d3.Selection} */\n  parentSelection\n  /** @type {boolean} */\n  fakeRender\n  parentTarget\n\n  /**\n   * @param {import('@/core/entities/context/RenderContext').RenderContext} renderContext\n   * @param {d3.Selection} parentSelection\n   * @param {boolean} fakeRender\n   */\n  constructor(renderContext, parentSelection, parentTarget, fakeRender=false) {\n    this.renderContext = renderContext;\n    this.parentSelection = parentSelection;\n    this.parentTarget = parentTarget;\n    this.fakeRender = fakeRender;\n  }\n\n  /**\n   * @param {d3.Selection} selection\n   * @returns {Context}\n   */\n  derive(selection, parentTarget) {\n    return new Context(this.renderContext, selection, parentTarget, this.fakeRender);\n  }\n\n  /**\n   * @param {Target} target\n   * @returns {Context}\n   */\n  deriveBy(target) {\n    const selection = this.getSelection(target);\n    if (this.parentSelection.size() !== 0 && selection.size() === 0) {\n      console.warn(`Empty select result. \n      parentSelector=${this.parentTarget?.selector ?? 'null'} \n      selector=\"${target.selector}\"`, this);\n    }\n    return this.derive(selection, target);\n  }\n\n  /**\n   * @param {Target} target\n   * @returns {Context}\n   */\n  deriveByWithoutTransform(target) {\n    if (target.selector.includes('$')) {\n      // has param, ignore this target selection\n      return this.derive(this.parentSelection);\n    } else {\n      const selection = this.getSelectionWithoutTransform(target);\n      return this.derive(selection, target);\n    }\n  }\n\n  /**\n   * @param {Target} target\n   * @returns {SVGGraphicsElement[]}\n   */\n  getGlyphs(target) {\n    if (this.fakeRender) {\n      return this.getSelection(target).nodes()\n          .map(node => /** @type {SVGGraphicsElement} */ node.cloneNode(true));\n    }\n    return this.getSelection(target).nodes();\n  }\n\n  /**\n   * @param {Target} target\n   * @returns {SVGGraphicsElement[]}\n   */\n  getExclusiveGlyphs(target, selector) {\n    let glyphs = this.renderContext.targetModel.getExclusiveGlyphs(this.renderContext.rootSel.selectAll(selector), this.parentTarget).nodes();\n    if (this.fakeRender) {\n      return glyphs.map(node => /** @type {SVGGraphicsElement} */ node.cloneNode(true));\n    }\n    return glyphs\n  }\n\n  /**\n   * @param {SVGGraphicsElement} glyph\n   * @returns {}\n   */\n  getBBoxPosition(glyph) {\n    const root_sel = this.renderContext.rootSel;\n    const svg_sel = root_sel.select('svg').node() ?? root_sel.node();\n    const root_point = svg_sel.createSVGPoint();\n    const glyph_ctm = glyph._original?.CTM ?? glyph.getCTM();\n    const glyph_point = root_point.matrixTransform(glyph_ctm);\n    const glyph_bbox = glyph.getBBox();\n\n    var {x, y, width, height} = {\n      x: glyph_point.x,\n      y: glyph_point.y,\n      width: glyph_bbox.width,\n      height: glyph_bbox.height\n    }\n\n    // console.log(\"ERVIN\", root_point, glyph.getCTM(), glyph_point, glyph._original.CTM);\n    if (glyph.nodeName === 'text') {\n      switch (glyph.getAttribute(\"text-anchor\")) {\n        case \"start\":\n          // start at left bottom corner\n          y = y - height * 0.75;\n          break;\n        case \"end\":\n          // start at right bottom corner\n          x = x - width;\n          y = y - height * 0.75;\n          break;\n        case \"middle\":\n          // start at middle bottom\n          x = x - width / 2;\n          y = y - height * 0.75;\n          break;\n        default:\n          break;\n      }\n    } else if (glyph.nodeName === 'path') {\n      y = y + height / 2\n      // TODO: fix the x\n    }\n\n    return {x, y, width, height}\n  }\n\n  /**\n   * @param {Target} target\n   * @returns {d3.Selection}\n   */\n  getSelection(target) {\n    return this.renderContext.targetModel.getGlyphs(this.parentSelection, target);\n  }\n\n  /**\n   * @param {Target} target\n   * @returns {d3.Selection}\n   */\n  getSelectionWithoutTransform(target) {\n    return this.renderContext.targetModel.getGlyphsWithoutTransform(this.parentSelection, target);\n  }\n\n  /**\n   * @param {string} templateName\n   * @returns {BaseTemplate}\n   */\n  getTemplate(templateName){\n    return this.renderContext.templateLib.getTemplate(templateName);\n  }\n\n  /**\n   * @returns {d3.Selection}\n   */\n  getRootSel() {\n    return this.renderContext.rootSel;\n  }\n\n  /**\n   * @returns {d3.Selection}\n   */\n  getDefsSel() {\n    return this.renderContext.getDefsSel();\n  }\n\n  /**\n   * @returns {SVGElement}\n   */\n  getRootSvg() {\n    const ret = this.renderContext.rootSel.node();\n    return ret.tagName === 'svg' ? ret : ret.querySelector('svg');\n  }\n}\n","import {Context} from \"@/core/entities/context/Context\";\nimport {MASK_CLASS} from \"@/core/const/Element\";\nimport {ANNOTATION_CLASS} from \"@/core/const/Element\";\n\nexport class RenderContext {\n  /** @type {d3.Selection} */\n  rootSel\n  /** @type {d3.Selection} */\n  defsSel\n  /** @type {TemplateLibrary} */\n  templateLib\n  /** @type {d3.Selection} */\n  globalSelection\n  /** @type {BaseTargetModel} */\n  targetModel\n\n  /**\n   * @param {d3.Selection} rootSel\n   * @param {TemplateLibrary} templateLib\n   */\n  constructor(rootSel, templateLib) {\n    this.rootSel = rootSel;\n    this.defsSel = null;    // will auto create if not exist at the first usage\n    this.templateLib = templateLib;\n    this.globalSelection = rootSel.selectAll('*');\n  }\n\n  /**\n   * @param templateName\n   * @returns {BaseTemplate}\n   */\n  getTemplate(templateName) {\n    return this.templateLib.getTemplate(templateName);\n  }\n\n  /**\n   * @param {boolean} fakeRender\n   * @returns {Context}\n   */\n  createRootContext(fakeRender=false) {\n    return new Context(this, this.globalSelection, null, fakeRender);\n  }\n\n  clean() {\n    if (!this.defsSel || this.defsSel.empty()) {\n      return;\n    }\n    this.defsSel.selectAll(MASK_CLASS).remove();\n    this.defsSel.selectAll(ANNOTATION_CLASS).remove();\n  }\n\n  /**\n   * @returns {d3.Selection}\n   */\n  getDefsSel() {\n    if (!this.defsSel) {\n      let defsSel = this.rootSel.select('defs')\n      if (defsSel.empty()) {\n        defsSel = this.rootSel.append('defs')\n      }\n      this.defsSel = defsSel;\n    }\n    return this.defsSel;\n  }\n}\n","export class BaseTargetModel {\n  /** @type {d3.Selection} */\n  globalSelection\n\n  /**\n   * @param {d3.Selection} parentSelection\n   * @param {Target} target\n   * @returns {d3.Selection}\n   */\n  // eslint-disable-next-line no-unused-vars\n  getGlyphs(parentSelection, target) {\n    throw 'Target model is abstract';\n  }\n\n  /**\n   * @param {d3.Selection} parentSelection\n   * @param {Target} target\n   * @returns {d3.Selection}\n   */\n  // eslint-disable-next-line no-unused-vars\n  getGlyphsWithoutTransform(parentSelection, target) {\n    throw 'Target model is abstract';\n  }\n}","import {BaseTargetModel} from \"@/core/generator/BaseTargetModel\";\n\nexport class SimpleTargetModel extends BaseTargetModel {\n  /** @type {d3.Selection} */\n  globalSelection\n\n  /**\n   * @param {d3.Selection} globalSelection\n   */\n  constructor(globalSelection) {\n    super();\n    this.globalSelection = globalSelection;\n  }\n\n  /**\n   * @param {d3.Selection} parentSelection\n   * @param {Target} target\n   * @returns {d3.Selection}\n   */\n  getGlyphsWithoutTransform(parentSelection, target) {\n    return parentSelection.filter(target.selector);\n  }\n\n  /**\n   * @param {d3.Selection} parentSelection\n   * @param {Target} target\n   * @returns {d3.Selection}\n   */\n  getGlyphs(parentSelection, target) {\n    // console.log(target, parentSelection, parentSelection.filter(target.selector));\n    let selection = parentSelection.filter(target.selector);\n    target.transform.forEach(trans => {\n      selection = trans.execute(selection);\n    })\n    return selection;\n  }\n\n  /**\n   * @param {d3.Selection} parentSelection\n   * @param {Target} target\n   * @returns {d3.Selection}\n   */\n   getExclusiveGlyphs(parentSelection, target) {\n    // console.log(target, parentSelection, parentSelection.filter(target.selector));\n    let selection = parentSelection.filter(`:not(${target.selector})`);\n    target.transform.forEach(trans => {\n      selection = trans.execute(selection);\n    })\n    return selection;\n  }\n}","import {RenderContext} from \"@/core/entities/context/RenderContext\";\nimport {SimpleTargetModel} from \"@/core/generator/target-model/SimpleTargetModel\";\n\nexport class Generator {\n  /** @type {RenderContext} */\n  renderContext\n  /** @type {BaseAnimation} */\n  animationSpec\n\n  /**\n   * @param {d3.Selection} rootSel\n   * @param {TemplateLibrary} templateLib\n   * @param {BaseAnimation} animationSpec\n   */\n  init(rootSel, templateLib, animationSpec) {\n    this.renderContext = new RenderContext(rootSel, templateLib);\n    this.animationSpec = animationSpec;\n  }\n\n  /**\n   * @returns {gsap.core.Timeline}\n   */\n  generate() {\n    // console.log('spec', this.animationSpec);\n\n    // create target module\n    this.renderContext.targetModel = new SimpleTargetModel(this.renderContext.globalSelection);\n\n    // console.log('renderContext', this.renderContext);\n    this.renderContext.clean();\n    const rootContext = this.renderContext.createRootContext();\n    return this.animationSpec.create(rootContext);\n  }\n\n  computeDuration() {\n    // create target module\n    this.renderContext.targetModel = new SimpleTargetModel(this.renderContext.globalSelection);\n    this.renderContext.clean();\n    const rootContext = this.renderContext.createRootContext(true);\n    return this.animationSpec.computeDuration(rootContext);\n  }\n\n  /**\n   * @param {string} templateName\n   * @returns {Set<HTMLElement>}\n   */\n  computePossibleElements(templateName) {\n    const template = this.renderContext.getTemplate(templateName);\n    if (!template) {\n      return new Set();\n    }\n    const ani = template.instantiate({}, false);\n\n    // create target module\n    this.renderContext.targetModel = new SimpleTargetModel(this.renderContext.globalSelection);\n    this.renderContext.clean();\n    const rootContext = this.renderContext.createRootContext(true);\n\n    return ani.computePossibleElements(rootContext);\n  }\n}\n","export class TemplateLibrary {\n  /** @type {Map<string, BaseTemplate>} */\n  buildInTemplateMap\n  /** @type {Map<string, BaseTemplate>} */\n  templateMap\n\n  constructor() {\n    this.buildInTemplateMap = new Map();\n    this.templateMap = new Map();\n  }\n\n  /**\n   * @param {BaseTemplate} template\n   */\n  registerBuildInTemplate(template) {\n    if (this.buildInTemplateMap.has(template.templateName)) {\n      console.warn('Duplicated template name in build-in scope' + template.templateName);\n    }\n    this.buildInTemplateMap.set(template.templateName, template);\n  }\n\n  /**\n   * @param {...BaseTemplate} template\n   */\n  registerBuildInTemplates(...template) {\n    template.forEach(t => this. registerBuildInTemplate(t));\n  }\n\n  /**\n   * @param {BaseTemplate} template\n   */\n  registerTemplate(template) {\n    if (this.templateMap.has(template.templateName)) {\n      console.warn('Duplicated template name in custom scope' + template.templateName);\n    }\n    this.templateMap.set(template.templateName, template);\n  }\n\n  /**\n   * @param {...BaseTemplate} template\n   */\n  registerTemplates(...template) {\n    template.forEach(t => this.registerTemplate(t));\n  }\n\n  /**\n   * @param {string} templateName\n   * @returns {BaseTemplate}\n   */\n  getTemplate(templateName) {\n    const prototype = this.templateMap.get(templateName)\n        ?? this.buildInTemplateMap.get(templateName);\n    if (!prototype) {\n      return null;\n    }\n    return prototype.clone();\n  }\n\n  /**\n   * @returns {BaseTemplate[]}\n   */\n  getAllBuildInTemplates() {\n    return Array.from(this.buildInTemplateMap.values());\n  }\n\n  /**\n   * @returns {BaseTemplate[]}\n   */\n  getAllCustomTemplate() {\n    return Array.from(this.templateMap.values());\n  }\n\n  reset() {\n    this.templateMap = new Map();\n  }\n}\n","/**\n * @enum {string}\n * @readonly\n */\nexport const PreviewerType = {\n  CUSTOM: 'custom',\n  TITLE: 'title',\n  BLANK: 'blank',\n  GENERAL: 'general',\n  HIGHLIGHT: 'highlight',\n  MOVE: 'move',\n  PATH: 'path',\n  TEXT: 'text',\n  CAMERA: 'camera',\n  ANNOTATION_ARROW: 'annotation-arrow',\n  BAR_CHART: 'bar-chart',\n  BAR_CHART_WITH_LEGEND:'bar-chart-with-legend',\n  CIRCLE_CHART: 'circle-chart',\n  CIRCLE_CHART_WITH_LEGEND: 'circle-chart-with-legend',\n  PIE_CHART: 'pie-chart',\n  PIE_WITH_LEGEND:'pie-with-legend',\n  LINE_CHART: 'line-chart',\n  LINE_CHART_WITH_LEGEND: 'line-chart-with-legend',\n  CHART_FRAMEWORK: 'chart-framework',\n}","/**\n * @enum {string}\n * @readonly\n */\n export const AnimationType = {\n    ENTER: 'Enter',\n    EXIT: 'Exit',\n    // some bad code\n    HIGHLIGHT: 'Emphasis',\n    ANNOTATION: 'Annotate',\n\n    OTHER: 'Other',\n  }","import {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {Target} from \"@/core/entities/spec/Target\";\nimport {TargetParser} from \"@/core/parser/TargetParser\";\nimport {JsonUtils} from \"@/core/utils/JsonUtils\";\n\nexport class PreviewWrapper {\n  /** @type {BaseTemplate} */\n  template\n  /** @type {PreviewerType} */\n  previewerType\n  /** @type {AnimationType} */\n  animationType\n  /** @type {String[]} */\n  templateLabels\n  /** @type {Object<String, any>} */\n  templateSettings\n  /** @type {Target} */\n  target\n  /** @type {number} */\n  staticProgress\n  /** @type {Object<String, any>} */\n  previewSettings\n\n  constructor(\n      template,\n      previewerType=PreviewerType.BLANK,\n      animationType=AnimationType.OTHER,\n      templateLabels=[],\n      templateSettings={},\n      target=undefined,\n      staticProgress=1,\n      previewSettings={},\n  ) {\n    this.type = 'previewer';\n    this.template = template;\n    this.previewerType = previewerType;\n    this.animationType = animationType;\n    this.templateLabels = templateLabels;\n    this.templateSettings = templateSettings;\n    this.previewSettings = previewSettings;\n    this.staticProgress = staticProgress;\n\n    if (!target) {\n      this.target = Target.getDefaultTarget();\n    } else if (target instanceof Target) {\n      this.target = target;\n    } else {\n      this.target = TargetParser.fromJSON(target);\n    }\n  }\n\n  /**\n   * @returns {PreviewWrapper}\n   */\n  clone() {\n    return new PreviewWrapper(\n        this.template.clone(),\n        this.previewerType,\n        this.animationType,\n        [...this.templateLabels],\n        JsonUtils.deepCopy(this.templateSettings),\n        Object.assign(new Target, this.target),\n        this.staticProgress,\n        JsonUtils.deepCopy(this.previewSettings),\n    );\n  }\n\n  /**\n   * @returns {string}\n   */\n  getTemplateName() {\n    return this.template.templateName;\n  }\n\n  /**\n   * @returns {string}\n   */\n  getTemplateType() {\n    return this.template.type;\n  }\n\n  /**\n   * @returns {ParamDefinition[]}\n   */\n  getTemplateParameters() {\n    return this.template.parameters;\n  }\n\n  /**\n   * @returns {BaseAnimation}\n   */\n  createPreviewAnimation() {\n    if (this.template != null) {\n      return this.template.instantiate(this.templateSettings);\n    } else {\n      console.warn(`Can't create animation since preview template is null`)\n      return null;\n    }\n  }\n}\n","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {RenderContext} from \"@/core/entities/context/RenderContext\";\nimport {SimpleTargetModel} from \"@/core/generator/target-model/SimpleTargetModel\";\n\nexport class PreviewerManager {\n  /** @type {TemplateLibrary} */\n  templateLib\n  /**\n   * Mapping the template name to its preview wrapper (if exit)\n   * @type {Map<String, PreviewWrapper>}\n   */\n  previewWrapperMap\n  /**\n   * Mapping previewer type to a corresponding prototype\n   * @type {Map<String, BasePreviewer>}\n   */\n  previewerMap\n\n  /**\n   * @param {TemplateLibrary} templateLib\n   */\n  constructor(templateLib) {\n    this.templateLib = templateLib;\n    this.previewWrapperMap = new Map();\n    this.previewerMap = new Map();\n  }\n\n  /**\n   * @param {PreviewWrapper} wrapper\n   */\n  registerPreviewWrapper(wrapper) {\n    this.previewWrapperMap.set(wrapper.template.templateName, wrapper);\n  }\n\n  /**\n   * @param {BasePreviewer} previewer\n   */\n  registerPreviewer(previewer) {\n    this.previewerMap.set(previewer.previewerType, previewer);\n  }\n\n  /**\n   * @param {string} templateName\n   * @param {d3.Selection} rootSel\n   * @returns {BasePreviewer}\n   */\n  createDefaultPreviewer(templateName, rootSel) {\n    const wrapper = this.getDefaultWrapper(templateName);\n\n    const renderContext = new RenderContext(rootSel, this.templateLib);\n    renderContext.targetModel = new SimpleTargetModel(renderContext.globalSelection);\n\n    const previewer = this.previewerMap.get(wrapper.previewerType).clone();\n    previewer.init(wrapper, renderContext);\n\n    return previewer;\n  }\n\n  /**\n   * @param {string} templateName\n   * @returns {PreviewWrapper}\n   */\n  getDefaultWrapper(templateName) {\n    let wrapper = this.previewWrapperMap.get(templateName)?.clone();\n    if (!wrapper) {\n      const template = this.templateLib.getTemplate(templateName);\n      wrapper = new PreviewWrapper(template);\n    }\n    return wrapper;\n  }\n}","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\n\nexport class FadeInTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Fade-in';\n    this.parameters = [\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n      new ParamDefinition('stagger', ParamType.NUMBER, false, 0),\n    ];\n  }\n\n  createAnimation() {\n    const animation = new TemplateUsage('Fade')\n    animation.updateSettings(this.getParamValues());\n    animation.updateSettings({fadeType: 'in'});\n    return animation;\n  }\n}\n","/**\n * @enum {String}\n * @readonly\n */\nexport const Direction = {\n    TOP: 'top',\n    BOTTOM: 'bottom',\n    LEFT: 'left',\n    RIGHT: 'right',\n    CENTER: 'center',\n    UNKNOWN: 'unknown',\n    AUTO: 'auto'\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {NativeAnimation} from \"@/core/entities/spec/animation/NativeAnimation\";\nimport gsap from \"gsap\";\nimport {Direction} from \"@/core/const/Direction\";\n\nexport class GrowTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Grow';\n    this.parameters = [\n      new ParamDefinition('direction', ParamType.STRING, false, Direction.BOTTOM),\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n      new ParamDefinition('stagger', ParamType.NUMBER, false, 0),\n    ];\n  }\n\n  createAnimation() {\n    const animation = new GrowAnimation();\n    // transfer template settings to this native animation instance\n    // as their parameters are the same\n    animation.updateSettings(this.getParamValues());\n    return animation;\n  }\n}\n\nclass GrowAnimation extends NativeAnimation {\n  getDefaultSettings() {\n    return {direction: Direction.BOTTOM, ease: 'power1.out', stagger: 0, duration: 1};\n  }\n\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {gsap.core.Timeline | gsap.core.Tween}\n   */\n  create(context) {\n    const {stagger} = this.settings;\n    const glyphs = context.getGlyphs(this.target);\n    const tl = gsap.timeline()\n    \n    glyphs.forEach((glyph, i) => {\n      const tw = this.createTwForOneGlyph(glyph);\n      const position = i === 0 ? 0 : ('<' + stagger);\n      tl.add(tw, position);\n    });\n    return tl;\n  }\n  /**\n   * @param {SVGGraphicsElement} glyph\n   * @returns {gsap.core.Tween|null}\n   */\n  createTwForOneGlyph(glyph) {\n    const {direction, ease, duration} = this.settings;\n    const bbox = glyph.getBBox();\n    \n    // console.log(\"glyph = \", glyph);\n    // console.log(\"glyph.width = \", glyph.getAttribute(\"width\"));\n    // console.log(\"bbox = \", bbox);\n    // if (glyph.getAttribute(\"width\")>glyph.getAttribute(\"height\") && glyph.nodeName==\"rect\"){\n    //     this.updateSettings({\n          // direction: Direction.LEFT,\n        // });\n    // }\n\n    let attrName, transFactorX, transFactorY;\n    switch (direction) {\n      case Direction.TOP:\n        attrName = 'scaleY';\n        transFactorX = 0.5;\n        transFactorY = 0;\n        break;\n      case Direction.BOTTOM:\n        attrName = 'scaleY';\n        transFactorX = 0.5;\n        transFactorY = 1;\n        break;\n      case Direction.LEFT:\n        attrName = 'scaleX';\n        transFactorX = 0;\n        transFactorY = 0.5;\n        break;\n      case Direction.RIGHT:\n        attrName = 'scaleX';\n        transFactorX = 1;\n        transFactorY = 0.5;\n        break;\n      default: return null;\n    }\n    const transformOrigin = `${transFactorX * bbox.width}px ${transFactorY * bbox.height}px`\n    const fromVars = {transformOrigin, duration, ease};\n    fromVars[attrName] = 0;\n\n    // console.log('Grow', glyph, fromVars);\n    return gsap.from(glyph, fromVars);\n  }\n}","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\n\nexport class MoveToTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Move-to';\n    this.parameters = [\n      new ParamDefinition('x', ParamType.ANY, false, '+=0'),    // number or string\n      new ParamDefinition('y', ParamType.ANY, false, '+=0'),    // number or string\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n      new ParamDefinition('stagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('yoyo', ParamType.OBJECT, false, null),\n    ];\n  }\n\n  createAnimation() {\n    const animation = new TemplateUsage('move')\n    const toVars = {\n      x: this.getParamValue('x'),\n      y: this.getParamValue('y'),\n    };\n    animation.set('to', toVars);\n    animation.set('duration', this.getParamValue('duration'));\n    animation.set('ease', this.getParamValue('ease'));\n    animation.set('stagger', this.getParamValue('stagger'));\n    animation.set('yoyo', this.getParamValue('yoyo'));\n    return animation;\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\n\nexport class MoveFromTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Move-from';\n    this.parameters = [\n      new ParamDefinition('x', ParamType.ANY, false, '+=0'),    // number or string\n      new ParamDefinition('y', ParamType.ANY, false, '+=0'),    // number or string\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n      new ParamDefinition('stagger', ParamType.NUMBER, false, 0),\n    ];\n  }\n\n  createAnimation() {\n    const animation = new TemplateUsage('move')\n    const fromVars = {\n      x: this.getParamValue('x'),\n      y: this.getParamValue('y'),\n    };\n    animation.set('from', fromVars);\n    animation.set('duration', this.getParamValue('duration'));\n    animation.set('ease', this.getParamValue('ease'));\n    animation.set('stagger', this.getParamValue('stagger'));\n    return animation;\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {NativeAnimation} from \"@/core/entities/spec/animation/NativeAnimation\";\nimport gsap from \"gsap\";\nimport {Direction} from \"@/core/const/Direction\";\n\nexport class FloatTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Float';\n    this.parameters = [\n      new ParamDefinition('enterOrExit', ParamType.STRING, false, 'enter'),\n      new ParamDefinition('direction', ParamType.STRING, false, 'bottom'),\n      new ParamDefinition('distance', ParamType.NUMBER, false, 30),\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n      new ParamDefinition('stagger', ParamType.NUMBER, false, 0),\n    ];\n  }\n\n  createAnimation() {\n    const animation = new FloatAnimation();\n    // transfer template settings to this native animation instance\n    // as their parameters are the same\n    animation.updateSettings(this.getParamValues());\n    return animation;\n  }\n}\n\nclass FloatAnimation extends NativeAnimation {\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {gsap.core.Timeline | gsap.core.Tween}\n   */\n  create(context) {\n    const {enterOrExit, distance, direction, ease, stagger, duration} = this.settings;\n\n    const attr = (direction === Direction.LEFT || direction === Direction.RIGHT) ? 'x' : 'y';\n    const factor = (direction === Direction.RIGHT || direction === Direction.BOTTOM) ? 1 : -1;\n\n    let tw;\n    const glyphs = context.getGlyphs(this.target);\n    const vars = {opacity: 0, ease, duration, stagger};\n    if (enterOrExit === 'enter') {\n      vars[attr] = `+=${distance * factor}px`;\n      tw = gsap.from(glyphs, vars);\n    } else if (enterOrExit === 'exit') {\n      vars[attr] = `-=${distance * factor}px`;\n      tw = gsap.to(glyphs, vars);\n    } else {\n      console.warn(\"Wrong value of enterOrExit: \" + enterOrExit);\n      return null;\n    }\n\n    return tw;\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {NativeAnimation} from \"@/core/entities/spec/animation/NativeAnimation\";\nimport gsap from \"gsap\";\n\nexport class BasicZoomTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'basic-zoom';\n    this.parameters = [\n      new ParamDefinition('enterOrExit', ParamType.STRING, false, 'enter'),\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1),\n      new ParamDefinition('ease', ParamType.STRING, false, 'back.out'),\n      new ParamDefinition('stagger', ParamType.NUMBER, false, 0),\n    ];\n  }\n\n  createAnimation() {\n    const animation = new BasicZoomAnimation();\n    // transfer template settings to this native animation instance\n    // as their parameters are the same\n    animation.updateSettings(this.getParamValues());\n    return animation;\n  }\n}\n\nclass BasicZoomAnimation extends NativeAnimation {\n  getDefaultSettings() {\n    return {enterOrExit: 'enter', ease: 'power1.out', stagger: 0, duration: 1};\n  }\n\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {gsap.core.Timeline | gsap.core.Tween}\n   */\n  create(context) {\n    const {enterOrExit, ease, stagger} = this.settings;\n\n    const tl = gsap.timeline();\n    const glyphs = context.getGlyphs(this.target);\n\n    glyphs.forEach((glyph) => {\n      let tw;\n      const vars = {scale: 0, transformOrigin: 'center center', ease};\n      if (enterOrExit === 'enter') {\n        tw = gsap.from(glyph, vars);\n      } else if (enterOrExit === 'exit') {\n        tw = gsap.to(glyph, vars);\n      } else {\n        console.warn(\"Wrong value of enterOrExit: \" + enterOrExit);\n        return null;\n      }\n\n      const {duration, yoyo} = this.timing.getComputedTiming();\n      tw.duration(duration);\n      if (yoyo) {\n        tw.yoyo(true);\n        tw.repeat(yoyo.repeat);\n        tw.repeatDelay(yoyo.delay);\n      }\n\n      tl.add(tw, '<' + stagger);\n    })\n\n    return tl;\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\nimport {SyncAnimation} from \"@/core/entities/spec/animation/SyncAnimation\";\n\nexport class ZoomTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Zoom';\n    this.parameters = [\n      new ParamDefinition('enterOrExit', ParamType.STRING, false, 'enter'),\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1),\n      new ParamDefinition('FadeEase', ParamType.STRING, false, 'power1.inOut'),\n      new ParamDefinition('zoomEase', ParamType.STRING, false, 'back.out'),\n      new ParamDefinition('stagger', ParamType.NUMBER, false, 0),\n    ];\n  }\n\n  createAnimation() {\n    const enterOrExit = this.getParamValue('enterOrExit');\n\n    if (enterOrExit === 'enter') {\n      const fade = new TemplateUsage('Fade-in')\n          .set('ease', this.getParamValue('FadeEase'))\n          .set('duration', this.getParamValue('duration'))\n          .set('stagger', this.getParamValue('stagger'));\n      const zoom = new TemplateUsage('Basic-zoom-enter')\n          .set('ease', this.getParamValue('zoomEase'))\n          .set('duration', this.getParamValue('duration'))\n          .set('stagger', this.getParamValue('stagger'));\n      return new SyncAnimation([fade, zoom]);\n\n    } else if (enterOrExit === 'exit') {\n      const fade = new TemplateUsage('Fade-out')\n          .set('ease', this.getParamValue('FadeEase'))\n          .set('duration', this.getParamValue('duration'))\n          .set('stagger', this.getParamValue('stagger'));\n      const zoom = new TemplateUsage('basic-zoom-exit')\n          .set('ease', this.getParamValue('zoomEase'))\n          .set('duration', this.getParamValue('duration'))\n          .set('stagger', this.getParamValue('stagger'));\n      return new SyncAnimation([fade, zoom]);\n\n    } else {\n      console.warn('Wrong value of param enterOrExit', enterOrExit);\n      return null;\n    }\n\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {NativeAnimation} from \"@/core/entities/spec/animation/NativeAnimation\";\nimport gsap from \"gsap\";\nimport * as d3 from 'd3';\nimport {Direction} from \"@/core/const/Direction\";\nimport {computeUUID} from \"@/core/utils/uuid\";\nimport {MASK_CLASS} from \"@/core/const/Element\";\n\nexport class WipeTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Wipe';\n    this.parameters = [\n      new ParamDefinition('enterOrExit', ParamType.STRING, false, 'enter'),\n      new ParamDefinition('direction', ParamType.STRING, false, Direction.BOTTOM),\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n      new ParamDefinition('stagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('yoyo', ParamType.OBJECT, false, null),\n    ];\n  }\n\n  createAnimation() {\n    const animation = new WipeAnimation();\n    // transfer template settings to this native animation instance\n    // as their parameters are the same\n    animation.updateSettings(this.getParamValues());\n    return animation;\n  }\n}\n\nclass WipeAnimation extends NativeAnimation {\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {gsap.core.Timeline | gsap.core.Tween}\n   */\n  create(context) {\n    const glyphs = context.getGlyphs(this.target);\n    const defs = context.getDefsSel();\n    const tl = gsap.timeline()\n    const {stagger} = this.settings;\n    glyphs.forEach((glyph, i) => {\n      const mask = this.addMaskRectToGlyph(defs, glyph);\n      const tw = this.createTwForMask(mask, glyph);\n      const position = i === 0 ? 0 : ('<' + stagger);\n      tl.add(tw, position);\n    })\n    return tl;\n  }\n\n  /**\n   * @param {d3.Selection} defs\n   * @param {SVGGraphicsElement} glyph\n   * @returns {SVGGraphicsElement} the mask rect of glyph\n   */\n  addMaskRectToGlyph(defs, glyph) {\n    if (!glyph.getAttribute('id')) {\n      glyph.setAttribute('id', computeUUID());\n    }\n    const maskId = 'mask-' + glyph.getAttribute('id');\n    let mask = defs.select(`#${maskId}`);\n    if (mask.empty()) {\n      mask = defs.append('mask')\n          .attr('id', maskId)\n          .classed(MASK_CLASS, true)\n          .attr('maskUnits', 'userSpaceOnUse');\n      glyph.setAttribute('mask', `url(#${maskId})`);\n    }\n\n    const {enterOrExit} = this.settings;\n    const wipeRectSel = mask.select('.wipe');\n    if (!wipeRectSel.empty() && enterOrExit === 'exit') {\n      return wipeRectSel.node();\n    }\n\n    const bbox = glyph.getBBox();\n    let strokeWidth = parseFloat(glyph.getAttribute('stroke-width') ?? '0');\n    d3.select(glyph).selectAll('*').each(function () {\n      const tempWidth = parseFloat(this.getAttribute('stroke-width') ?? '0');\n      strokeWidth = Math.max(tempWidth, strokeWidth);\n    });\n\n    let x, y, width, height;\n    width = bbox.width + strokeWidth * 2;\n    height = bbox.height + strokeWidth * 2;\n    x = bbox.x - strokeWidth;\n    y = bbox.y - strokeWidth;\n\n    const newMaskRect = mask.append('rect')\n        .attr('transform', 'translate(' + [x, y] + ')')\n        .attr('class', 'Wipe')\n        .attr('width', width)\n        .attr('height', height)\n        .attr('stroke-width', strokeWidth)\n        .attr('fill', 'white')\n        .attr('stroke', 'white')\n\n    return newMaskRect.node();\n  }\n\n  /**\n   * Same as Grow effect, but applied on mark\n   * @param {SVGGraphicsElement} mask\n   * @param {SVGGraphicsElement} glyph\n   * @returns {gsap.core.Tween|null}\n   */\n  createTwForMask(mask, glyph) {\n    const {enterOrExit, direction, ease, duration, yoyo} = this.settings;\n    const bbox = mask.getBBox();\n\n    let offsetFactorX, offsetFactorY;\n\n    switch (direction) {\n      case Direction.TOP:\n        offsetFactorX = 0;\n        offsetFactorY = -1;\n        break;\n      case Direction.BOTTOM:\n        offsetFactorX = 0;\n        offsetFactorY = 1;\n        break;\n      case Direction.LEFT:\n        offsetFactorX = -1;\n        offsetFactorY = 0;\n        break;\n      case Direction.RIGHT:\n        offsetFactorX = 1;\n        offsetFactorY = 0;\n        break;\n    }\n\n    const strokeWidth = parseFloat(glyph.getAttribute('stroke-width') || '0');\n    const vars = {\n      x: '+=' + (offsetFactorX * (bbox.width + strokeWidth)),\n      y: '+=' + (offsetFactorY * (bbox.height + strokeWidth)),\n      duration,\n      ease\n    };\n\n    if (yoyo) {\n      vars.yoyo = true;\n      vars.repeatDelay = yoyo.delay ?? 0;\n      vars.repeat = yoyo.repeat ?? 1;\n    }\n\n    // console.log('Wipe', mask, vars);\n    return enterOrExit === 'exit' ? gsap.to(mask, vars) : gsap.from(mask, vars);\n  }\n}\n","export const ORIGINAL_DATA_STORE_PREFIX = 'ac-original-data--';\n\nexport const ORIGINAL_FILL_ALIAS = '@original-fill';","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {NativeAnimation} from \"@/core/entities/spec/animation/NativeAnimation\";\nimport gsap from \"gsap\";\nimport {Timing} from \"@/core/entities/spec/Timing\";\nimport {ORIGINAL_DATA_STORE_PREFIX, ORIGINAL_FILL_ALIAS} from \"@/core/const/Data\";\n\nexport class ChangeColorTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Change-color';\n    this.parameters = [\n      new ParamDefinition('fill', ParamType.STRING, true, '#e44a4e'),\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n      new ParamDefinition('stagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('yoyo', ParamType.OBJECT, true, null),\n    ];\n  }\n\n  createAnimation() {\n    const animation = new ChangeColorAnimation();\n    // transfer template settings to this native animation instance\n    // as their parameters are the same\n    animation.updateSettings(this.getParamValues());\n    return animation;\n  }\n}\n\nclass ChangeColorAnimation extends NativeAnimation {\n  getDefaultSettings() {\n    return {\n      duration: 1,\n      ease: 'power1.out',\n      stagger: 0,\n      yoyo: null\n    };\n  }\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {gsap.core.Timeline | gsap.core.Tween}\n   */\n  create(context) {\n    const {stagger} = this.settings;\n    const glyphs = context.getGlyphs(this.target);\n    const {duration, yoyo} = this.timing.getComputedTiming();\n    const tl = gsap.timeline()\n    glyphs.forEach((glyph, i) => {\n      const tw = this.createTwForOneGlyph(glyph);\n      if (yoyo) {\n        tw.yoyo(true);\n        tw.repeat(yoyo.repeat);\n        tw.repeatDelay(yoyo.delay);\n      }\n      const position = i === 0 ? 0 : ('<' + stagger);\n      tl.add(tw, position);\n    });\n    tl.duration(duration);\n    return tl;\n  }\n\n  /**\n   * @param {SVGGraphicsElement} glyph\n   * @returns {gsap.core.Tween|null}\n   */\n  createTwForOneGlyph(glyph) {\n    let {fill, duration, ease, yoyo} = this.settings;\n\n    const yoyoVars = {};\n    if (yoyo) {\n      if (yoyo === true) {\n        // not object, use default\n        yoyo = Timing.getDefaultYoyo();\n      }\n      yoyoVars.yoyo = true;\n      yoyoVars.repeat = yoyo.repeat;\n      yoyoVars.repeatDelay = yoyo.delay;\n      duration /= (yoyoVars.repeat + 1);\n    }\n\n    const originalColorAttrName = ORIGINAL_DATA_STORE_PREFIX + 'color'\n    if (fill === ORIGINAL_FILL_ALIAS) {\n      fill = glyph.getAttribute(originalColorAttrName);\n    } else {\n      const curFill = glyph.getAttribute('fill');\n      glyph.setAttribute(originalColorAttrName, curFill);\n    }\n\n    const toVars = {fill, duration, ease, ...yoyoVars};\n\n    return gsap.to(glyph, toVars);\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {NativeAnimation} from \"@/core/entities/spec/animation/NativeAnimation\";\nimport gsap from \"gsap\";\n\nexport class ShowPathTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Show-path';\n    this.parameters = [\n      new ParamDefinition('reverseDirection', ParamType.BOOLEAN, false, false),\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n      new ParamDefinition('stagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('displayTime', ParamType.NUMBER, false, 3),\n    ];\n  }\n\n  createAnimation() {\n    const animation = new ShowPathAnimation();\n    // transfer template settings to this native animation instance\n    // as their parameters are the same\n    animation.updateSettings(this.getParamValues());\n    return animation;\n  }\n}\n\nclass ShowPathAnimation extends NativeAnimation {\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {gsap.core.Timeline | gsap.core.Tween}\n   */\n  create(context) {\n    const {displayTime, ease, stagger, duration, reverseDirection} = this.settings;\n\n    const tl = gsap.timeline();\n    const glyphs = context.getGlyphs(this.target);\n\n    glyphs.forEach((glyph, i) => {\n      let len = 0;\n      try {\n        len = glyph.getTotalLength();\n        // eslint-disable-next-line no-empty\n      } catch(e) {\n      }\n      glyph.setAttribute('stroke-dasharray', len);\n\n      let tw;\n\n      tw = gsap.fromTo(glyph, {strokeDashoffset: reverseDirection ? -len : len},\n          {strokeDashoffset: 0, ease, duration});\n      tl.add(tw, i === 0 ? 0 : ('<' + stagger));\n\n      tw = gsap.to(glyph, {strokeDashoffset: reverseDirection ? len : -len, ease, duration});\n      tl.add(tw, '+=' + displayTime);\n    });\n\n    return tl;\n  }\n}\n","/**\n * @param {any[]} array\n * @param {any} item\n */\nfunction removeItem(array, item) {\n  let index = array.indexOf(item)\n  if (index === -1) return false\n  array.splice(index, 1)\n  return true\n}\n\nfunction getLastItem(array) {\n  let len = array.length\n  if (len === 0) return null\n  return array[len - 1]\n}\n\n/**\n * @param {any[]} array \n * @param {any[]} subArray \n * @returns {boolean}\n */\nfunction includes(array, subArray) {\n  return subArray.every(item => array.includes(item))\n}\n\n/**\n * @param {any[]} array\n * @param {number} start\n * @param {number} end Not include\n * @param {number} [step=1]\n * @returns {any[]}\n */\nfunction slice(array, start, end, step=1) {\n  let result = []\n  for (let i = start; i < end; i += step) {\n    result.push(array[i])\n  }\n  return result\n}\n\n/**\n * @param {any[]} array1\n * @param {any[]} array2\n */\nfunction intersect(array1, array2) {\n  let res = []\n  array1.forEach(item => {\n    if (array2.includes(item)) {\n      res.push(item)\n    }\n  })\n  return res\n}\n\nexport const ArrayUtils = {\n  removeItem, getLastItem, includes, slice, intersect,\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {NativeAnimation} from \"@/core/entities/spec/animation/NativeAnimation\";\nimport {ArrayUtils} from \"@/utils/common/ArrayUtils\";\nimport gsap from \"gsap\";\n\nexport class HighlightTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Highlight';\n    this.parameters = [\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n      new ParamDefinition('stagger', ParamType.NUMBER, false, 0)\n    ];\n  }\n\n  createAnimation() {\n    const animation = new HighlightAnimation();\n    // transfer template settings to this native animation instance\n    // as their parameters are the same\n    animation.updateSettings(this.getParamValues());\n    return animation;\n  }\n}\n\nclass HighlightAnimation extends NativeAnimation {\n  getDefaultSettings() {\n    return {\n      duration: 1,\n      ease: 'power1.out',\n      stagger: 0\n    };\n  }\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {gsap.core.Timeline | gsap.core.Tween}\n   */\n  create(context) {\n\n    const {ease, stagger, duration} = this.settings;\n    duration\n    let tw;\n\n    const selectGlyphs = context.getGlyphs(this.target);\n    let selectType = null;\n    for (let glyph of selectGlyphs) {\n      let type = ArrayUtils.getLastItem(glyph.classList);\n      // console.log(\"ERVIN1\", type)\n      if (selectType === null) {\n        selectType = type;\n      } else if (selectType != type) {\n        selectType = null;\n        break;\n      }\n    }\n    let selector = selectType === null ? '*' : `.${selectType}`; \n\n    const glyphs = context.getExclusiveGlyphs(this.target, selector);\n    const vars = {opacity: 0.3, ease, duration: 0.5, stagger};\n    const tl = gsap.timeline()\n    \n    tw = gsap.to(glyphs, vars);\n    tw.yoyo(true);\n    tw.repeat(1);\n    tw.repeatDelay(3);\n    tl.add(tw, 0)\n\n    return tl;\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {NativeAnimation} from \"@/core/entities/spec/animation/NativeAnimation\";\nimport gsap from \"gsap\";\n\nexport class CameraZoomTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Camera-zoom';\n    this.parameters = [\n      new ParamDefinition('scaleFactor', ParamType.STRING, false, 1.5),\n      new ParamDefinition('transformOrigin', ParamType.STRING, false, '50% 50%'),\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n    ];\n  }\n\n  createAnimation() {\n    const animation = new CameraMoveAnimation();\n    // transfer template settings to this native animation instance\n    // as their parameters are the same\n    animation.updateSettings(this.getParamValues());\n    return animation;\n  }\n}\n\nclass CameraMoveAnimation extends NativeAnimation {\n  getDefaultSettings() {\n    return {transformOrigin: '50% 50%', duration: 1, ease: 'power1.out'};\n  }\n\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {gsap.core.Timeline | gsap.core.Tween}\n   */\n  create(context) {\n    const {scaleFactor, transformOrigin, ease, duration} = this.settings;\n\n    let tw;\n    const scene = context.renderContext.rootSel;\n    const vars = {scale: scaleFactor, transformOrigin, ease, duration};\n    tw = gsap.to(scene.node(), vars);\n    return tw;\n  }\n}\n","export default {templateName:'Zoom-exit',parameters:[{paramName:'duration',paramType:'number',required:false,defaultValue:1},{paramName:'zoomEase',paramType:'string',required:false,defaultValue:'back.in'},{paramName:'FadeEase',paramType:'string',required:false,defaultValue:'power1.inOut'},{paramName:'stagger',paramType:'string',required:false,defaultValue:0}],animation:{use:'Zoom',target:'*',settings:{duration:'$duration',zoomEase:'$zoomEase',fadeEase:'$fadeEase',stagger:'$stagger',enterOrExit:'exit'}}}","export default {templateName:'basic-zoom-exit',parameters:[{paramName:'duration',paramType:'number',required:false,defaultValue:1},{paramName:'ease',paramType:'string',required:false,defaultValue:'back.in'},{paramName:'stagger',paramType:'number',required:false,defaultValue:0}],animation:{use:'basic-zoom',target:'*',settings:{duration:'$duration',ease:'$ease',stagger:'$stagger',enterOrExit:'exit'}}}","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\n\nexport class FadeOutTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Fade-out';\n    this.parameters = [\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n      new ParamDefinition('stagger', ParamType.NUMBER, false, 0),\n    ];\n  }\n\n  createAnimation() {\n    const animation = new TemplateUsage('Fade')\n    animation.updateSettings(this.getParamValues());\n    animation.updateSettings({fadeType: 'out'});\n    return animation;\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\nimport {SyncAnimation} from \"@/core/entities/spec/animation/SyncAnimation\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\n\nexport class TitleTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Title';\n    this.parameters = [\n      new ParamDefinition('titleStagger', ParamType.NUMBER, false, 0.3),\n    ]\n  }\n\n  createAnimation() {\n    const titleFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.title,.subtitle,.main-title,.sub-title')\n      .set('stagger', this.getParamValue('titleStagger'));\n\n    return new SyncAnimation()\n        .append(titleFadeIn);\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\nimport {SyncAnimation} from \"@/core/entities/spec/animation/SyncAnimation\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\n\nexport class ChartWithoutMarkFloatInTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Axes float in';\n    this.parameters = [\n      new ParamDefinition('titleStagger', ParamType.NUMBER, false, 0.2),\n      new ParamDefinition('symbolStagger', ParamType.NUMBER, false, 0.04),\n      new ParamDefinition('axisElementStagger', ParamType.NUMBER, false, 0.04),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n    ]\n  }\n\n  createAnimation() {\n    const titleFadeIn = new TemplateUsage('Float')\n      .setTarget('.title')\n      .set('stagger', this.getParamValue('titleStagger'));\n\n    const xAxisSymbolFadeIn = new TemplateUsage('Float')\n      .setTarget('.axis.symbol')\n      .set('stagger', this.getParamValue('symbolStagger'));\n\n    const xAxisGrow = new TemplateUsage('Fade-in')\n      .setTarget('.x-axis.domain')\n      .updateSettings({ease: this.getParamValue('ease')});\n      \n    const yAxisGrow = new TemplateUsage('Fade-in')\n      .setTarget('.y-axis.domain')\n      .updateSettings({ease: this.getParamValue('ease')});    // default direction is bottom\n\n    const labelFadeIn = new TemplateUsage('Float')\n      .setTarget('.axis.label')\n      .set('stagger', this.getParamValue('axisElementStagger'))\n      .updateTiming({offset: 1});\n    const tickFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.axis.tick')\n      .set('stagger', this.getParamValue('axisElementStagger'))\n      .updateTiming({offset: 1});\n\n    return new SyncAnimation()\n      .append(titleFadeIn)\n      .append(xAxisSymbolFadeIn)\n      .append(xAxisGrow)\n      .append(yAxisGrow)\n      .append(labelFadeIn)\n      .append(tickFadeIn);\n  }\n}\n","export default {templateName:'Axes fade in',animation:{target:'*',sequence:{sync:[{use:'Fade-in',target:'.title, .subtitle, .axis, .tick-group'}]}}}","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\nimport {SyncAnimation} from \"@/core/entities/spec/animation/SyncAnimation\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\n\nexport class BarChartEnterTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Bar chart';\n    this.parameters = [\n      new ParamDefinition('barDirection', ParamType.STRING, false, 'bottom'),\n      new ParamDefinition('titleStagger', ParamType.NUMBER, false, 0.2),\n      new ParamDefinition('symbolStagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('axisElementStagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n    ]\n  }\n\n  createAnimation() {\n    const chartFadeIn = new TemplateUsage('Axes fade in')\n      .setTarget('.chart')\n      .updateSettings(this.getParamValues());\n\n    const barGrow = new TemplateUsage('Grow')\n      .setTarget('.bar')\n      .updateTiming({offset: 1})\n      .updateSettings({\n        ease: this.getParamValue('ease'),\n        direction: this.getParamValue('barDirection'),\n      });\n\n    const barLabelFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.bar-label')\n      .updateTiming({offset: 2});\n\n    return new SyncAnimation()\n      .append(chartFadeIn)\n      .append(barGrow)\n      .append(barLabelFadeIn);\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\nimport {SyncAnimation} from \"@/core/entities/spec/animation/SyncAnimation\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\n\nexport class BarChartWithLegendEnterTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Bar chart with legend';\n    this.parameters = [\n      new ParamDefinition('barDirection', ParamType.STRING, false, 'bottom'),\n      new ParamDefinition('titleStagger', ParamType.NUMBER, false, 0.2),\n      new ParamDefinition('symbolStagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('axisElementStagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n    ]\n  }\n\n  createAnimation() {\n    const chartFadeIn = new TemplateUsage('Axes fade in')\n      .setTarget('.chart')\n      .updateSettings(this.getParamValues());\n\n    const legendFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.legend')\n      .updateTiming({offset: 1})\n      .updateSettings({stagger: 0.25});\n\n    const barGrow = new TemplateUsage('Grow')\n      .setTarget('.bar')\n      .updateTiming({offset: 1})\n      .updateSettings({\n        ease: this.getParamValue('ease'),\n        direction: this.getParamValue('barDirection'),\n        stagger: 0.25\n      });\n\n    const barLabelFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.bar-label')\n      .updateTiming({offset: 2});\n\n    return new SyncAnimation()\n      .append(chartFadeIn)\n      .append(legendFadeIn)\n      .append(barGrow)\n      .append(barLabelFadeIn);\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\nimport {SyncAnimation} from \"@/core/entities/spec/animation/SyncAnimation\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\n\nexport class CircleChartWithLegendEnterTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Scatter chart with legend';\n    this.parameters = [\n      // new ParamDefinition('barDirection', ParamType.STRING, false, 'bottom'),\n      new ParamDefinition('titleStagger', ParamType.NUMBER, false, 0.2),\n      new ParamDefinition('symbolStagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('axisElementStagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n    ]\n  }\n\n  createAnimation() {\n    const chartFadeIn = new TemplateUsage('Axes fade in')\n      .setTarget('.chart')\n      .updateSettings(this.getParamValues());\n\n    const legendFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.legend')\n      .updateTiming({offset: 1})\n    \n    const circleFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.circle, .point, .scatter')\n      .updateTiming({offset: 2})\n      .updateSettings({stagger: 0.02});\n\n    const circleLabelFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.circle-label')\n      .updateTiming({offset: 3});\n\n    return new SyncAnimation()\n      .append(chartFadeIn)\n      .append(legendFadeIn)\n      .append(circleFadeIn)\n      .append(circleLabelFadeIn);\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\nimport {SyncAnimation} from \"@/core/entities/spec/animation/SyncAnimation\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\n\nexport class LineChartEnterTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Line chart';\n    this.parameters = [\n      new ParamDefinition('titleStagger', ParamType.NUMBER, false, 0.2),\n      new ParamDefinition('symbolStagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('axisElementStagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1.5),\n    ]\n  }\n\n  createAnimation() {\n    const chartFadeIn = new TemplateUsage('Axes fade in')\n        .setTarget('.chart')\n        .updateSettings(this.getParamValues());\n    \n  \n    const circleFadeIn = new TemplateUsage('Fade-in')\n        .setTarget('.circle, .point, .scatter')\n        .updateTiming({offset: 1})\n        .set('duration', this.getParamValue('duration'));        \n\n    const lineWipe = new TemplateUsage('Wipe')\n        .setTarget('.mark.line')\n        .updateTiming({start: 1})\n        .updateSettings({\n          stagger: 0.5,\n          ease: this.getParamValue('ease'),\n          direction: 'left',\n        });\n\n    const labelFadeIn = new TemplateUsage('Fade-in')\n        .setTarget('.mark.label')\n        .updateTiming({start: 1})\n        .updateSettings({stagger: 0.1});\n\n\n    return new SyncAnimation()\n        .append(chartFadeIn)\n        .append(circleFadeIn)\n        .append(lineWipe)\n        .append(labelFadeIn)\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\nimport {SyncAnimation} from \"@/core/entities/spec/animation/SyncAnimation\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\n\nexport class LineChartbyLegendTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Line chart by legend';\n    this.parameters = [\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1.5),\n    ]\n  }\n\n  createAnimation() {\n    const chartFadeIn = new TemplateUsage('Axes fade in')\n        .setTarget('.chart')\n        .updateSettings(this.getParamValues());\n\n    const legendFadeIn = new TemplateUsage('Fade-in')\n        .setTarget('.legend')\n        .updateTiming({offset: 1})\n        .updateSettings({stagger: 0.25});\n\n    const circleFadeIn = new TemplateUsage('Fade-in')\n        .setTarget('.circle, .point, .scatter')\n        .updateTiming({offset: 1})\n        .set('duration', this.getParamValue('duration'));\n\n    const lineWipe = new TemplateUsage('Wipe')\n        .setTarget('.mark.line')\n        .updateTiming({offset: 1})\n        .updateSettings({\n          stagger: 0.5,\n          ease: this.getParamValue('ease'),\n          direction: 'left',\n        });\n\n\n\n    return new SyncAnimation()\n        .append(chartFadeIn)\n        .append(legendFadeIn)\n        .append(circleFadeIn)\n        .append(lineWipe);\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\nimport {SyncAnimation} from \"@/core/entities/spec/animation/SyncAnimation\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\n\nexport class LineChartbyOrderTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Line chart by order';\n    this.parameters = [\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1.5),\n    ]\n  }\n\n  createAnimation() {\n    const chartFadeIn = new TemplateUsage('Axes fade in')\n        .setTarget('.chart')\n        .updateSettings(this.getParamValues());\n    \n    const legendFadeIn = new TemplateUsage('Fade-in')\n        .setTarget('.legend')\n        .updateTiming({offset: 1})\n        // .updateSettings({stagger: 0.25});\n\n    const circleFadeIn = new TemplateUsage('Fade-in')\n        .setTarget('.circle, .point, .scatter')\n        .updateTiming({offset: 1})\n        .set('duration', this.getParamValue('duration'));\n      \n    const lineWipe = new TemplateUsage('Wipe')\n        .setTarget('.mark.line')\n        .updateTiming({offset: 1})\n        .updateSettings({\n          // stagger: 0.5,\n          ease: this.getParamValue('ease'),\n          direction: 'left',\n        });\n\n\n\n    return new SyncAnimation()\n        .append(chartFadeIn)\n        .append(legendFadeIn)\n        .append(circleFadeIn)\n        .append(lineWipe);\n  }\n}\n","import { NativeTemplate } from \"@/core/entities/spec/template/NativeTemplate\";\nimport { TemplateUsage } from \"@/core/entities/spec/animation/TemplateUsage\";\nimport { SyncAnimation } from \"@/core/entities/spec/animation/SyncAnimation\";\nimport { ParamType } from \"@/core/entities/spec/parameter/ParamType\";\nimport { ParamDefinition } from \"@/core/entities/spec/parameter/ParamDefinition\";\n\nexport class PieChartEnterTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Pie-wheel';\n    this.parameters = [\n      new ParamDefinition('titleStagger', ParamType.NUMBER, false, 0.2),\n      new ParamDefinition('sectorStagger', ParamType.NUMBER, false, 0.1),\n      new ParamDefinition('lineStagger', ParamType.NUMBER, false, 0.1),\n      new ParamDefinition('labelStagger', ParamType.NUMBER, false, 0.1),\n    ]\n  }\n\n  createAnimation() {\n    const titleFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.title')\n      .set('stagger', this.getParamValue('titleStagger'));\n\n    const sectorWheel = new TemplateUsage('simple-sector-wheel')\n    .setTarget('.sector,.arc,.pie')\n    .set('centerSelector', '.sector,.arc,.pie')\n      .set('stagger', this.getParamValue('sectorStagger'));\n\n    const drawPath = new TemplateUsage('Draw-path')\n      .setTarget('.sector-line,.arc-line')\n      .set('stagger', this.getParamValue('lineStagger'));\n\n    const labelFloat = new TemplateUsage('Fade-in')\n      .setTarget('.sector-label,.arc-label')\n      .set('stagger', this.getParamValue('labelStagger'));\n\n    return new SyncAnimation()\n      .append(titleFadeIn)\n      .append(sectorWheel)\n      .append(drawPath)\n      .append(labelFloat);\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\nimport {SyncAnimation} from \"@/core/entities/spec/animation/SyncAnimation\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\n\nexport class BarEnterTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Bar-grow';\n    this.parameters = [\n      new ParamDefinition('barDirection', ParamType.STRING, false, 'auto'),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n    ]\n  }\n\n  createAnimation() {\n    const growBar = new TemplateUsage('Grow-bar')\n      .setTarget('.bar')\n      .updateSettings({\n        ease: this.getParamValue('ease'),\n        direction: this.getParamValue('barDirection'),\n      });\n\n    const barLabelFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.bar-label')\n      .updateTiming({offset: 1});\n\n    return new SyncAnimation()\n      .append(growBar)\n      .append(barLabelFadeIn);\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\nimport {SyncAnimation} from \"@/core/entities/spec/animation/SyncAnimation\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\n\nexport class BarWithLegendEnterTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Bar with legend';\n    this.parameters = [\n      new ParamDefinition('barDirection', ParamType.STRING, false, 'bottom'),\n      new ParamDefinition('titleStagger', ParamType.NUMBER, false, 0.2),\n      new ParamDefinition('symbolStagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('axisElementStagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n    ]\n  }\n\n  createAnimation() {\n    const legendFadeIn = new TemplateUsage('Fade-in')\n        .setTarget('.legend')\n        // .updateTiming({offset: 2})\n        .updateSettings({stagger: 0.25});\n\n    const barGrow = new TemplateUsage('Grow')\n      .setTarget('.bar')\n      .updateSettings({\n        ease: this.getParamValue('ease'),\n        direction: this.getParamValue('barDirection'),\n        stagger: 0.25\n      });\n\n    const barLabelFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.bar-label')\n      .updateTiming({offset: 1});\n\n    return new SyncAnimation()\n      .append(legendFadeIn)\n      .append(barGrow)\n      .append(barLabelFadeIn);\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\nimport {SyncAnimation} from \"@/core/entities/spec/animation/SyncAnimation\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\n// import {NormalTarget} from \"@/core/entities/spec/Target\";\n\nexport class BarSymbolLabelEnterTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Bar with axis label';\n    this.parameters = [\n      new ParamDefinition('symbol-ease', ParamType.STRING, false, 'back.out'),\n      new ParamDefinition('bar-ease', ParamType.STRING, false, 'power1.out'),\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1.5),\n    ]\n  }\n\n  createAnimation() {\n    const symbolZoomEnter = new TemplateUsage('basic-zoom')\n      .setTarget('.axis.symbol')\n      .updateSettings({\n        ease: this.getParamValue('symbol-ease'),\n        duration: this.getParamValue('duration'),\n      });\n\n    const axisLabelFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.x-axis.label')\n      .set('duration', this.getParamValue('duration'));\n\n    const barGrow = new TemplateUsage('Grow')\n      .setTarget('.bar')\n      .updateSettings({\n        ease: this.getParamValue('bar-ease'),\n        duration: this.getParamValue('duration'),\n      });\n\n    const barLabelFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.bar-label')\n      .set('duration', this.getParamValue('duration'));\n\n    return new SyncAnimation()\n      .append(symbolZoomEnter)\n      .append(axisLabelFadeIn)\n      .append(barGrow)\n      .append(barLabelFadeIn);\n      // .setTarget(new NormalTarget('.bar,.axis.symbol,.bar-label'));\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\nimport {SyncAnimation} from \"@/core/entities/spec/animation/SyncAnimation\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\n\nexport class CircleEnterTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Scatter-fade in';\n    this.parameters = [\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1.5),\n      new ParamDefinition('titleStagger', ParamType.NUMBER, false, 0.2),\n      new ParamDefinition('symbolStagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('axisElementStagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n    ]\n  }\n\n  createAnimation() {\n    const circleFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.circle, .point, .scatter')\n      .set('duration', this.getParamValue('duration'));\n\n    const circleLabelFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.circle-label,.point-label,.scatter-label')\n      .set('duration', this.getParamValue('duration'));\n\n    return new SyncAnimation()\n      .append(circleFadeIn)\n      .append(circleLabelFadeIn);\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\nimport {SyncAnimation} from \"@/core/entities/spec/animation/SyncAnimation\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\n\nexport class CircleWithLegendEnterTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Scatter with legend';\n    this.parameters = [\n      // new ParamDefinition('barDirection', ParamType.STRING, false, 'bottom'),\n      new ParamDefinition('titleStagger', ParamType.NUMBER, false, 0.2),\n      new ParamDefinition('symbolStagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('axisElementStagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n    ]\n  }\n\n  createAnimation() {\n    const legendFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.legend')\n      // .updateTiming({offset: 1})\n    \n    const circleFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.circle, .point, .scatter')\n      .updateTiming({offset: 1})\n      .updateSettings({stagger: 0.02});\n\n    const circleLabelFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.circle-label,.point-label,.scatter-label')\n      .updateTiming({offset: 2});\n\n    return new SyncAnimation()\n      .append(legendFadeIn)\n      .append(circleFadeIn)\n      .append(circleLabelFadeIn);\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\nimport {SyncAnimation} from \"@/core/entities/spec/animation/SyncAnimation\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\n\nexport class CircleChartEnterTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Scatter chart';\n    this.parameters = [\n      // new ParamDefinition('barDirection', ParamType.STRING, false, 'bottom'),\n      new ParamDefinition('titleStagger', ParamType.NUMBER, false, 0.2),\n      new ParamDefinition('symbolStagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('axisElementStagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n    ]\n  }\n\n  createAnimation() {\n    const chartFadeIn = new TemplateUsage('Axes fade in')\n      .setTarget('.chart')\n      .updateSettings(this.getParamValues());\n\n    const circleFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.circle, .point, .scatter')\n      .updateTiming({offset: 1})\n\n    const circleLabelFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.circle-label')\n      .updateTiming({offset: 2});\n\n    return new SyncAnimation()\n      .append(chartFadeIn)\n      .append(circleFadeIn)\n      .append(circleLabelFadeIn);\n  }\n}\n","export function getPosition(svg, element) {\n  const rootPoint = svg.createSVGPoint();\n  const ctm = element.getCTM();\n  const elPoint = rootPoint.matrixTransform(ctm);\n  return {x: elPoint.x, y: elPoint.y};\n}\n\nexport function getSvgBox(svg, element) {\n  const pos = getPosition(svg, element);\n  const {x, y, width, height} = element.getBBox();\n  // console.log(element, pos.x, pos.y, x, y)\n  return {\n    x: x + pos.x,\n    y: y + pos.y,\n    width,\n    height,\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {NativeAnimation} from \"@/core/entities/spec/animation/NativeAnimation\";\nimport {Direction} from \"@/core/const/Direction\";\nimport gsap from \"gsap\";\nimport * as SvgUtils from \"@/core/utils/SvgUtils\";\n\nexport class GrowBarTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Grow-bar';\n    this.parameters = [\n      new ParamDefinition('barDirection', ParamType.STRING, false, 'auto'),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n    ]\n  }\n\n  createAnimation() {\n    const animation = new GrowBarAnimation();\n    // transfer template settings to this native animation instance\n    // as their parameters are the same\n    animation.updateSettings(this.getParamValues());\n    return animation;\n  }\n}\n\nclass GrowBarAnimation extends NativeAnimation {\n  getDefaultSettings() {\n    return {direction: Direction.AUTO, ease: 'power1.out', stagger: 0, duration: 1};\n  }\n\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {gsap.core.Timeline | gsap.core.Tween}\n   */\n  create(context) {\n    const {stagger, direction} = this.settings;\n    const glyphs = context.getGlyphs(this.target);\n    const tl = gsap.timeline()\n\n    if (direction === Direction.AUTO) {\n      this.settings.direction = this.inferDirection(context);\n      console.log('computed direction for bar:', this.settings.direction)\n    }\n\n    glyphs.forEach((glyph, i) => {\n      const tw = this.createTwForOneGlyph(glyph);\n      const position = i === 0 ? 0 : ('<' + stagger);\n      tl.add(tw, position);\n    });\n    return tl;\n  }\n\n  /**\n   * @param {SVGGraphicsElement} glyph\n   * @returns {gsap.core.Tween|null}\n   */\n  createTwForOneGlyph(glyph) {\n    const {ease, duration, direction} = this.settings;\n    const bbox = glyph.getBBox();\n\n    let attrName, transFactorX, transFactorY;\n    switch (direction) {\n      case Direction.TOP:\n        attrName = 'scaleY';\n        transFactorX = 0.5;\n        transFactorY = 0;\n        break;\n      case Direction.BOTTOM:\n        attrName = 'scaleY';\n        transFactorX = 0.5;\n        transFactorY = 1;\n        break;\n      case Direction.LEFT:\n        attrName = 'scaleX';\n        transFactorX = 0;\n        transFactorY = 0.5;\n        break;\n      case Direction.RIGHT:\n        attrName = 'scaleX';\n        transFactorX = 1;\n        transFactorY = 0.5;\n        break;\n      default: return null;\n    }\n    const transformOrigin = `${transFactorX * bbox.width}px ${transFactorY * bbox.height}px`\n    const fromVars = {transformOrigin, duration, ease};\n    fromVars[attrName] = 0;\n\n    // console.log('Grow', glyph, fromVars);\n    return gsap.from(glyph, fromVars);\n  }\n\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @return Direction\n   */\n  inferDirection(context) {\n    const rootSel = context.getRootSel();\n\n    const bars = rootSel.selectAll(\".bar\");\n    const xAxisElements = rootSel.selectAll(\".x-axis\");\n\n    if (xAxisElements.length !== 0 && bars.length !== 0) {\n      return this.inferDirectionByBarsAndAxis(context, bars, xAxisElements);\n    } else if (bars.length > 1) {\n      return this.inferDirectionByBars(context, bars);\n    } else {\n      return Direction.BOTTOM;\n    }\n  }\n\n  /**\n   * Compute and set the direction using the position of bars and x-axis\n   *\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @param {d3.Selection} bars\n   * @return Direction\n   */\n  inferDirectionByBars(context, bars) {\n    const barArray = Array.from(bars.nodes());\n    const barBoxes = barArray.map(b => SvgUtils.getSvgBox(context.getRootSvg(), b));\n\n    const x0List = barBoxes.map(b => b.x);\n    const x1List = barBoxes.map(b => b.x + b.width);\n    const y0List = barBoxes.map(b => b.y);\n    const y1List = barBoxes.map(b => b.y + b.height);\n\n    // let y1 (bottom) have a higher priority\n    const varianceList = [x0List, x1List, y1List, y0List].map(lst => GrowBarAnimation.getVariance(lst));\n\n    let index = 0, minVal = varianceList[0];\n    for (let i = 1; i < 4; i++) {\n      if (varianceList[i] < minVal) {\n        minVal = varianceList[i];\n        index = i;\n      }\n    }\n\n    switch (index) {\n      case 0: return Direction.LEFT;\n      case 1: return Direction.RIGHT;\n      case 2: return Direction.BOTTOM;\n      case 3: return Direction.TOP;\n    }\n  }\n\n  /**\n   * Compute and set the direction using the position of bars and x-axis\n   *\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @param {d3.Selection} bars\n   * @param {d3.Selection} xAxisElements\n   * @return Direction\n   */\n  inferDirectionByBarsAndAxis(context, bars, xAxisElements) {\n    const barArray = Array.from(bars.nodes());\n    const xElArray = Array.from(xAxisElements.nodes());\n\n    const barBoxes = barArray.map(b => SvgUtils.getSvgBox(context.getRootSvg(), b));\n    const xElBoxes = xElArray.map(el => SvgUtils.getSvgBox(context.getRootSvg(), el));\n\n    // get the avg x y of the center of x-axis elements\n    const sumX = xElBoxes.map(box => box.x + box.width / 2)\n        .reduce((a, b) => a + b, 0);\n    const sumY = xElBoxes.map(box => box.y + box.height / 2)\n        .reduce((a, b) => a + b, 0);\n    const avgX = sumX / xElBoxes.length;\n    const avgY = sumY / xElBoxes.length;\n\n    const x0List = barBoxes.map(b => b.x);\n    const x1List = barBoxes.map(b => b.x + b.width);\n    const y0List = barBoxes.map(b => b.y);\n    const y1List = barBoxes.map(b => b.y + b.height);\n\n    const lst1 = [x0List, x1List].map(lst => GrowBarAnimation.getMSE(lst, avgX));\n    // let y1 (bottom) have a higher priority\n    const lst2 = [y1List, y0List].map(lst => GrowBarAnimation.getMSE(lst, avgY));\n    const varianceList = [...lst1, ...lst2];\n\n    // console.log('>>', {xElBoxes, barBoxes, varianceList, avgX, avgY});\n    let index = 0, minVal = varianceList[0];\n    for (let i = 1; i < 4; i++) {\n      if (varianceList[i] < minVal) {\n        minVal = varianceList[i];\n        index = i;\n      }\n    }\n\n    switch (index) {\n      case 0: return Direction.LEFT;\n      case 1: return Direction.RIGHT;\n      case 2: return Direction.BOTTOM;\n      case 3: return Direction.TOP;\n    }\n  }\n\n  /**\n   * @param {number[]} array\n   */\n  static getVariance(array) {\n    let sum = array.reduce((a, b) => a + b, 0);\n    const avg = sum / array.length;\n    return GrowBarAnimation.getMSE(array, avg);\n  }\n\n  /**\n   * @param {number[]} array\n   * @param {number} val\n   */\n  static getMSE(array, val) {\n    let sum = 0;\n    for (let i = 0; i < array.length; i++) {\n      sum += Math.pow(array[i] - val, 2);\n    }\n    return sum / array.length;\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\nimport {SyncAnimation} from \"@/core/entities/spec/animation/SyncAnimation\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\n\nexport class LineEnterTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Line-wipe';\n    this.parameters = [\n      new ParamDefinition('titleStagger', ParamType.NUMBER, false, 0.2),\n      new ParamDefinition('symbolStagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('axisElementStagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1.5),\n    ]\n  }\n\n  createAnimation() {\n\n    const circleFadeIn = new TemplateUsage('Fade-in')\n        .setTarget('.circle, .point, .scatter')\n        .set('duration', this.getParamValue('duration'));\n\n    const lineWipe = new TemplateUsage('Wipe')\n        .setTarget('.mark.line')\n        .updateTiming({start: 0})\n        .updateSettings({\n          // stagger: 0.5,\n          ease: this.getParamValue('ease'),\n          direction: 'left',\n        });\n\n    const labelFadeIn = new TemplateUsage('Fade-in')\n        .setTarget('.mark.label')\n        .updateTiming({start: 0});\n        // .updateSettings({stagger: 0.1});\n\n    return new SyncAnimation()\n        .append(circleFadeIn)\n        .append(lineWipe)\n        .append(labelFadeIn);\n  }\n}\n","import { NativeTemplate } from \"@/core/entities/spec/template/NativeTemplate\";\nimport { TemplateUsage } from \"@/core/entities/spec/animation/TemplateUsage\";\nimport { SyncAnimation } from \"@/core/entities/spec/animation/SyncAnimation\";\nimport { ParamType } from \"@/core/entities/spec/parameter/ParamType\";\nimport { ParamDefinition } from \"@/core/entities/spec/parameter/ParamDefinition\";\n\nexport class LinebyLegendTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Lines by legend';\n    this.parameters = [\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1.5),\n    ]\n  }\n\n  createAnimation() {\n    const legendFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.legend')\n      .updateSettings({ stagger: 0.25 });\n\n    const circleFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.circle, .point, .scatter')\n      .set('duration', this.getParamValue('duration'));\n\n    const lineWipe = new TemplateUsage('Wipe')\n      .setTarget('.mark.line')\n      .updateSettings({\n        stagger: 0.5,\n        ease: this.getParamValue('ease'),\n        direction: 'left',\n      });\n\n    return new SyncAnimation()\n      .append(legendFadeIn)\n      .append(circleFadeIn)\n      .append(lineWipe);\n  }\n}\n","import { NativeTemplate } from \"@/core/entities/spec/template/NativeTemplate\";\nimport { TemplateUsage } from \"@/core/entities/spec/animation/TemplateUsage\";\nimport { SyncAnimation } from \"@/core/entities/spec/animation/SyncAnimation\";\nimport { ParamType } from \"@/core/entities/spec/parameter/ParamType\";\nimport { ParamDefinition } from \"@/core/entities/spec/parameter/ParamDefinition\";\n\nexport class LinebyOrderTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Lines by order';\n    this.parameters = [\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1.5),\n    ]\n  }\n\n  createAnimation() {\n    const legendFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.legend')\n    // .updateSettings({stagger: 0.25});\n\n    const circleFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.circle, .point, .scatter')\n      .set('duration', this.getParamValue('duration'));\n\n    const lineWipe = new TemplateUsage('Wipe')\n      .setTarget('.mark.line')\n      .updateSettings({\n        // stagger: 0.5,\n        ease: this.getParamValue('ease'),\n        direction: 'left',\n      });\n\n\n    return new SyncAnimation()\n      .append(legendFadeIn)\n      .append(circleFadeIn)\n      .append(lineWipe);\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\nimport {SyncAnimation} from \"@/core/entities/spec/animation/SyncAnimation\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\n\nexport class LineHighlightTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Line-highlight';\n    this.parameters = [\n      new ParamDefinition('titleStagger', ParamType.NUMBER, false, 0.2),\n      new ParamDefinition('symbolStagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('axisElementStagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n      // new ParamDefinition('duration', ParamType.NUMBER, false, 1.5),\n    ]\n  }\n\n  createAnimation() {\n    const lineWipe = new TemplateUsage('Draw-path')\n        .setTarget('.mark.line');\n\n    // const linehighlight = new TemplateUsage('custom-effect')\n    //     .setTarget('.mark.line')\n    //     .updateSettings({\n    //       opacity: 0.2,\n    //       transform: {type: 'filter', expr: '@datum.name !== \"$dataName\"'},\n    //     });\n\n    return new SyncAnimation()\n        .append(lineWipe)\n        // .append(linehighlight)\n        ;\n  }\n}\n","import { NativeTemplate } from \"@/core/entities/spec/template/NativeTemplate\";\nimport { TemplateUsage } from \"@/core/entities/spec/animation/TemplateUsage\";\nimport { SyncAnimation } from \"@/core/entities/spec/animation/SyncAnimation\";\nimport { ParamType } from \"@/core/entities/spec/parameter/ParamType\";\nimport { ParamDefinition } from \"@/core/entities/spec/parameter/ParamDefinition\";\n\nexport class PieWithLegendEnterTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Pie with legend';\n    this.parameters = [\n      // new ParamDefinition('titleStagger', ParamType.NUMBER, false, 0.2),\n      new ParamDefinition('sectorStagger', ParamType.NUMBER, false, 1),\n      new ParamDefinition('legendStagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('labelStagger', ParamType.NUMBER, false, 1),\n    ]\n  }\n\n  createAnimation() {\n    // const titleFadeIn = new TemplateUsage('Fade-in')\n    //   .setTarget('.title')\n    //   .set('stagger', this.getParamValue('titleStagger'));\n\n    const sectorWheel = new TemplateUsage('simple-sector-wheel')\n    .setTarget('.sector,.arc,.pie')\n    .set('centerSelector', '.sector,.arc,.pie')\n    // .set('stagger', this.getParamValue('sectorStagger'))\n    .set('duration', 1);\n      // .updateTiming({start: -1});\n\n    // const drawPath = new TemplateUsage('Draw-path')\n    //   .setTarget('.sector-line,.arc-line')\n    //   .set('stagger', this.getParamValue('lineStagger'));\n\n    const labelFloat = new TemplateUsage('Fade-in')\n      .setTarget('.sector-label,.arc-label');\n      // .updateTiming({start: -1});\n      // .set('stagger', this.getParamValue('labelStagger'));\n\n    const legendFlyIn = new TemplateUsage('Fly-in')\n      .setTarget('.legend');\n      // .updateTiming({start: -2});\n      // .set('stagger', this.getParamValue('legendStagger'));\n\n    return new SyncAnimation()\n      // .append(titleFadeIn)\n      .append(legendFlyIn)\n      .append(sectorWheel)\n      .append(labelFloat);\n  }\n}\n","import { NativeTemplate } from \"@/core/entities/spec/template/NativeTemplate\";\nimport { TemplateUsage } from \"@/core/entities/spec/animation/TemplateUsage\";\nimport { ParamType } from \"@/core/entities/spec/parameter/ParamType\";\nimport { ParamDefinition } from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport { NormalTarget } from \"@/core/entities/spec/Target\";\nimport { ConcatAnimation } from \"@/core/entities/spec/animation/ConcatAnimation\";\n\nexport class ShowAnnoZoomTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'show-annotation-zoom';\n    this.parameters = [\n      new ParamDefinition('displayTime', ParamType.NUMBER, false, 3),\n      new ParamDefinition('enter-ease', ParamType.STRING, false, 'back.out'),\n      new ParamDefinition('exit-ease', ParamType.STRING, false, 'back.in'),\n      new ParamDefinition('effect-duration', ParamType.NUMBER, false, 1),\n    ]\n  }\n\n  createAnimation() {\n    const zoomEnter = new TemplateUsage()\n      .useTemplate('Zoom-enter')\n      .set('Zoom-ease', this.getParamValue('enter-ease'))\n      .set('duration', this.getParamValue('effect-duration'));\n\n    const zoomExit = new TemplateUsage()\n      .useTemplate('Zoom-exit')\n      .set('Zoom-ease', this.getParamValue('exit-ease'))\n      .set('duration', this.getParamValue('effect-duration'))\n      .updateTiming({ offset: this.getParamValue('displayTime') });\n\n    return new ConcatAnimation()\n      .append(zoomEnter)\n      .append(zoomExit)\n      .setTarget(new NormalTarget('.annotation'));\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\nimport {SyncAnimation} from \"@/core/entities/spec/animation/SyncAnimation\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {NormalTarget} from \"@/core/entities/spec/Target\";\n\nexport class ShowArrowLabelAnnoTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Show-arrow-label';\n    this.parameters = [\n      new ParamDefinition('distance', ParamType.NUMBER, false, 30),\n      new ParamDefinition('displayTime', ParamType.NUMBER, false, 3),\n      new ParamDefinition('effect-duration', ParamType.NUMBER, false, 1.5),\n    ]\n  }\n\n  createAnimation() {\n    const arrowFloatEnter = new TemplateUsage()\n      .useTemplate('Float')\n      .setTarget('.arrow')\n      .set('distance', this.getParamValue('distance'))\n      .set('duration', this.getParamValue('effect-duration'));\n\n    const labelFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.label,.text')\n      .set('duration', this.getParamValue('effect-duration'));\n\n    const fadeOut = new TemplateUsage()\n      .useTemplate('Fade-out')\n      .setTarget('*')\n      .updateTiming({start: this.getParamValue('displayTime')})\n\n    return new SyncAnimation()\n      .append(arrowFloatEnter)\n      .append(labelFadeIn)\n      .append(fadeOut)\n      .setTarget(new NormalTarget('.annotation'));\n  }\n}\n","import { NativeTemplate } from \"@/core/entities/spec/template/NativeTemplate\";\nimport { ParamType } from \"@/core/entities/spec/parameter/ParamType\";\nimport { ParamDefinition } from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport { NativeAnimation } from \"@/core/entities/spec/animation/NativeAnimation\";\nimport gsap from \"gsap\";\nimport { computeUUID } from \"@/core/utils/uuid\";\nimport { ANNOTATION_CLASS } from \"@/core/const/Element\";\n\nexport class CircleTemplate extends NativeTemplate {\n    constructor() {\n        super();\n        this.templateName = 'Circle';\n        this.parameters = [\n            new ParamDefinition('reverseDirection', ParamType.BOOLEAN, false, false),\n            new ParamDefinition('duration', ParamType.NUMBER, false, 1),\n            new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n            new ParamDefinition('stagger', ParamType.NUMBER, false, 0),\n            new ParamDefinition('displayTime', ParamType.NUMBER, false, 3),\n        ];\n    }\n\n    createAnimation() {\n        const animation = new CircleAnimation();\n        // transfer template settings to this native animation instance\n        // as their parameters are the same\n        animation.updateSettings(this.getParamValues());\n        return animation;\n    }\n}\n\nclass CircleAnimation extends NativeAnimation {\n    /**\n     * @param {import('@/core/entities/context/Context').Context} context\n     * @returns {gsap.core.Timeline | gsap.core.Tween}\n     */\n    create(context) {\n        const {displayTime, ease, stagger, duration, reverseDirection} = this.settings;\n        reverseDirection\n        const glyphs = context.getGlyphs(this.target);\n        const tl = gsap.timeline()\n        glyphs.forEach((glyph, i) => {\n            const circle = this.addMaskRectToGlyph(context, glyph);\n\n            // const vars = {opacity: 0, ease, duration, stagger};\n            // let tw;\n            // tw = gsap.from(circle, vars);\n            // tl.add(tw, i === 0 ? 0 : ('<' + stagger));\n            // tw = gsap.to(circle, vars);\n            // tl.add(tw, '+=' + displayTime);\n\n            let len = 0;\n            try {\n                len = circle.getTotalLength();\n                // eslint-disable-next-line no-empty\n            } catch(e) {\n            }\n            circle.setAttribute('stroke-dasharray', len);\n\n            let tw;\n\n            tw = gsap.fromTo(circle, {strokeDashoffset: reverseDirection ? -len : len},\n                {strokeDashoffset: 0, ease, duration});\n            tl.add(tw, i === 0 ? 0 : ('<' + stagger));\n\n            tw = gsap.to(circle, {strokeDashoffset: reverseDirection ? len : -len, ease, duration});\n            tl.add(tw, '+=' + displayTime);\n        })\n        return tl;\n    }\n\n    /**\n     * @param {import('@/core/entities/context/Context').Context} context\n     * @param {SVGGraphicsElement} glyph\n     * @returns {SVGGraphicsElement} the mask rect of glyph\n     */\n     addMaskRectToGlyph(context, glyph) {\n        if (!glyph.getAttribute('id')) {\n          glyph.setAttribute('id', computeUUID());\n        }\n\n        const {x, y, width, height} = context.getBBoxPosition(glyph);\n        const root_sel = context.getRootSel();\n\n        const el_sel = root_sel.select('svg').node() ? root_sel.select('svg') : root_sel;\n        let newMaskRect = el_sel.append('ellipse')\n            // let a = d3.select(sel.parentNode).append('rect')\n            .attr('transform', 'translate(' + [x+width/2, y-height*0.2] + ')')\n            .classed(ANNOTATION_CLASS, true)\n            .attr('rx', width/2*1.2)\n            .attr('ry', height/2*1.3)\n            .attr('stroke-width', 2)\n            .attr('fill', 'none')\n            .attr('stroke', 'black');\n\n        // let newMaskRect = root_sel.select('svg').append('rect')\n        //     // let a = d3.select(sel.parentNode).append('rect')\n        //     .attr('transform', 'translate(' + [x, y] + ')')\n        //     .classed(ANNOTATION_CLASS, true)\n        //     .attr('width', width)\n        //     .attr('height', height)\n        //     .attr('stroke-width', 2)\n        //     .attr('fill', 'none')\n        //     .attr('stroke', 'black')\n    \n        return newMaskRect.node();\n      }\n}\n","export default {templateName:'Fade-in-then-fade-out',parameters:[{paramName:'displayTime',paramType:'number',required:false,defaultValue:3}],animation:{target:'*',sequence:{sync:[{use:'Fade-in'},{use:'Fade-out',timing:{offset:'$displayTime'}}]}}}","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {NativeAnimation} from \"@/core/entities/spec/animation/NativeAnimation\";\nimport gsap from \"gsap\";\n\nexport class DynamicNumberTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Dynamic-number';\n    this.parameters = [\n      new ParamDefinition('start', ParamType.NUMBER, false, 0),\n      new ParamDefinition('end', ParamType.NUMBER, false, '@num'),\n      new ParamDefinition('formatter', ParamType.STRING, false, 'auto'),\n      new ParamDefinition('toFixed', ParamType.NUMBER, false, 0),\n      new ParamDefinition('duration', ParamType.NUMBER, false, 2),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power3.out'),\n      new ParamDefinition('stagger', ParamType.NUMBER, false, 0),\n    ];\n  }\n\n  createAnimation() {\n    const animation = new DynamicNumberAnimation();\n    // transfer template settings to this native animation instance\n    // as their parameters are the same\n    animation.updateSettings(this.getParamValues());\n    return animation;\n  }\n}\n\nclass DynamicNumberAnimation extends NativeAnimation {\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {gsap.core.Timeline | gsap.core.Tween}\n   */\n  create(context) {\n    const {start, end, formatter, toFixed, ease, stagger, duration} = this.settings;\n\n    const tl = gsap.timeline();\n    const glyphs = context.getGlyphs(this.target);\n    glyphs.forEach((glyph) => {\n\n      let newFormatter\n      if (formatter === 'auto') {\n        const group = glyph.innerHTML.match(/([^\\d]*)(\\d+)(.*)/)\n        if (group) {\n          newFormatter = group[1] + '@num' + group[3];\n        } else {\n          newFormatter = '@num';\n        }\n      } else if (formatter.includes('@num')) {\n        newFormatter = formatter;\n      } else {\n        newFormatter = '@num';\n      }\n\n      // console.log('>>>', {formatter, newFormatter, innerHTML: glyph.innerHTML})\n\n      // parse from html if giving a reg string\n      let computedStart = start, computedEnd = end;\n      if (start === '@num' || end === '@num') {\n        const group = glyph.innerHTML.match(newFormatter.replace('@num', '([\\\\d.]+)'))\n        if (start === '@num') {\n          computedStart = parseFloat(group[1]);\n        }\n        if (end === '@num') {\n          computedEnd = parseFloat(group[1]);\n        }\n      }\n\n      // let newToFixed;\n      // if (toFixed === 'auto') {\n      //   const group = glyph.innerHTML.match(/([\\d]+)\\.([\\d]+)/)\n      //   if (group) {\n      //     newToFixed = group[2].length\n      //   } else {\n      //     newToFixed = 0;\n      //   }\n      // } else if (typeof toFixed === 'number') {\n      //   newToFixed = toFixed\n      // } else {\n      //   newToFixed = 0;\n      // }\n\n      // console.log('>>>', {formatter, newFormatter, innerHTML: glyph.innerHTML, computedStart, computedEnd})\n\n      let tw;\n      const tempNumObj = {tempNum: computedStart};\n      const onUpdate = () => {\n        const num = tempNumObj.tempNum.toFixed(toFixed);\n        const text = newFormatter.replaceAll('@num', num);\n        glyphs.forEach(glyph => glyph.innerHTML = text);\n      }\n      onUpdate();   // call it firstly\n      tw = gsap.to(tempNumObj, {tempNum: computedEnd, ease, duration, onUpdate});\n\n      // console.log('dynamic number', glyphs, tw);\n      tl.add(tw, '<' + stagger);\n    })\n\n    return tl;\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\nimport {ConcatAnimation} from \"@/core/entities/spec/animation/ConcatAnimation\";\n\nexport class ZoomInThenZoomOutTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Zoom-in-then-zoom-out';\n    this.parameters = [\n      new ParamDefinition('displayTime', ParamType.STRING, false, 2),\n    ];\n  }\n\n  createAnimation() {\n    const zoomIn = new TemplateUsage('Zoom-enter');\n    const zoomOut = new TemplateUsage('Zoom-exit')\n      .updateTiming({offset: this.getParamValue('displayTime')});\n    return new ConcatAnimation([zoomIn, zoomOut]);\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {NativeAnimation} from \"@/core/entities/spec/animation/NativeAnimation\";\nimport gsap from \"gsap\";\n\nexport class CustomEffectTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'custom-effect';\n    this.parameters = [\n      new ParamDefinition('attr', ParamType.STRING_OR_ARRAY),\n      new ParamDefinition('from', ParamType.ANY, false, null),\n      new ParamDefinition('to', ParamType.ANY, false, null),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n      new ParamDefinition('stagger', ParamType.NUMBER, false, 0),\n    ];\n  }\n\n  isValid() {\n    if (!super.isValid()) {\n      return false;\n    }\n    const p = this.getParamValues();\n    if (!p.attr) {\n      return false;\n    }\n    if (!Array.isArray(p.attr)) {\n      return p.from !== null || p.to !== null;\n    } else {\n      if (p.from !== null && p.to !== null) {\n        return Array.isArray(p.from) && p.from.length === p.attr.length\n            && Array.isArray(p.to) && p.to.length === p.attr.length;\n      } else if (p.from !== null) {\n        return Array.isArray(p.from) && p.from.length === p.attr.length;\n      } else if (p.to !== null) {\n        return Array.isArray(p.to) && p.to.length === p.attr.length;\n      }\n      return false;\n    }\n  }\n\n  createAnimation() {\n    const animation = new CustomEffectAnimation();\n    // transfer template settings to this native animation instance\n    // as their parameters are the same\n    animation.updateSettings(this.getParamValues());\n    return animation;\n  }\n}\n\nclass CustomEffectAnimation extends NativeAnimation {\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {gsap.core.Timeline | gsap.core.Tween}\n   */\n  create(context) {\n    const {attr, from, to, ease, stagger} = this.settings;\n    const {duration, yoyo} = this.timing.getComputedTiming();\n    const glyphs = context.getGlyphs(this.target);\n\n    let attrArray, fromArray, toArray;\n    let tw;\n\n    if (!Array.isArray(attr)) {\n      attrArray = [attr];\n      if (from !== null) {\n        fromArray = [from];\n      }\n      if (to !== null) {\n        toArray = [to];\n      }\n    } else {\n      attrArray = attr;\n      fromArray = from;\n      toArray = to;\n    }\n\n    const merge = (target, keys, values) => keys.forEach((k, i) => target[k] = values[i]);\n\n    if (from != null && to != null) {\n      const fromVars = {};\n      merge(fromVars, attrArray, fromArray);\n      const toVars = {ease, duration, stagger};\n      merge(toVars, attrArray, toArray);\n      tw = gsap.fromTo(glyphs, fromVars, toVars);\n\n    } else if (from != null) {\n      const fromVars = {ease, duration, stagger};\n      merge(fromVars, attrArray, fromArray);\n      tw = gsap.from(glyphs, fromVars);\n\n    } else if (to != null) {\n      const toVars = {ease, duration, stagger};\n      merge(toVars, attrArray, toArray);\n      tw = gsap.to(glyphs, toVars);\n\n    } else {\n      return null;\n    }\n\n    if (yoyo) {\n      tw.yoyo(true);\n      tw.repeat(yoyo.repeat);\n      tw.repeatDelay(yoyo.delay);\n    }\n\n    return tw;\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {NativeAnimation} from \"@/core/entities/spec/animation/NativeAnimation\";\nimport gsap from \"gsap\";\n\nexport class FadeTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Fade';\n    this.parameters = [\n      new ParamDefinition('FadeType', ParamType.STRING, false, 'in'),\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n      new ParamDefinition('stagger', ParamType.NUMBER, false, 0),\n    ];\n  }\n\n  createAnimation() {\n    const animation = new FadeAnimation();\n    // transfer template settings to this native animation instance\n    // as their parameters are the same\n    animation.updateSettings(this.getParamValues());\n    return animation;\n  }\n}\n\nclass FadeAnimation extends NativeAnimation {\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {gsap.core.Timeline | gsap.core.Tween}\n   */\n  create(context) {\n    const {fadeType, ease, stagger, duration} = this.settings;\n\n    let tw;\n    const glyphs = context.getGlyphs(this.target);\n    const vars = {opacity: 0, ease, duration, stagger};\n    if (fadeType === 'in') {\n      tw = gsap.from(glyphs, vars);\n    } else if (fadeType === 'out') {\n      tw = gsap.to(glyphs, vars);\n    } else {\n      console.warn(\"Wrong value of fadeType: \" + fadeType);\n      return null;\n    }\n\n    // console.log('Fade', glyphs, vars);\n    return tw;\n  }\n}\n","export default {templateName:'Zoom-enter',parameters:[{paramName:'duration',paramType:'number',required:false,defaultValue:1},{paramName:'zoomEase',paramType:'string',required:false,defaultValue:'back.out'},{paramName:'FadeEase',paramType:'string',required:false,defaultValue:'power1.inOut'},{paramName:'stagger',paramType:'string',required:false,defaultValue:0}],animation:{use:'Zoom',target:'*',settings:{duration:'$duration',zoomEase:'$zoomEase',fadeEase:'$fadeEase',stagger:'$stagger',enterOrExit:'enter'}}}","export default {templateName:'Basic-zoom-enter',parameters:[{paramName:'duration',paramType:'number',required:false,defaultValue:1},{paramName:'ease',paramType:'string',required:false,defaultValue:'back.out'},{paramName:'stagger',paramType:'number',required:false,defaultValue:0}],animation:{use:'basic-zoom',target:'*',settings:{duration:'$duration',ease:'$ease',stagger:'$stagger',enterOrExit:'enter'}}}","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\nimport {SyncAnimation} from \"@/core/entities/spec/animation/SyncAnimation\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {NormalTarget} from \"@/core/entities/spec/Target\";\n\nexport class BarSymbolLabelBounceTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Bar-bounce';\n    this.parameters = [\n      new ParamDefinition('symbol-ease', ParamType.STRING, false, 'back.out'),\n      new ParamDefinition('bar-ease', ParamType.STRING, false, 'power1.out'),\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1.5),\n    ]\n  }\n\n  createAnimation() {\n    // const symbolZoomEnter = new TemplateUsage('basic-zoom')\n    //   .setTarget('.axis.symbol')\n    //   .updateSettings({\n    //     ease: this.getParamValue('symbol-ease'),\n    //     duration: this.getParamValue('duration'),\n    //   });\n\n    // const axisLabelFadeIn = new TemplateUsage('Fade-in')\n    //   .setTarget('.x-axis.label')\n    //   .set('duration', this.getParamValue('duration'));\n\n    const barBonce = new TemplateUsage('Move-to')\n    .setTarget('.bar')\n    .updateSettings({\n      y: '-=15',\n      yoyo: true,\n    })\n\n    const barLabelBource = new TemplateUsage('Move-to')\n      .setTarget('.bar-label')\n      .updateTiming({start: 0.4})\n      .updateSettings({\n        y: '-=15',\n        yoyo: true,\n      });\n\n    return new SyncAnimation()\n      // .append(symbolZoomEnter)\n      // .append(axisLabelFadeIn)\n      .append(barBonce)\n      .append(barLabelBource)\n      .setTarget(new NormalTarget('.bar,.axis.symbol,.bar-label'));\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\nimport {SyncAnimation} from \"@/core/entities/spec/animation/SyncAnimation\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\n\nexport class BarChartWithAxisLabelEnterTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Bar chart with axis label';\n    this.parameters = [\n      new ParamDefinition('barDirection', ParamType.STRING, false, 'bottom'),\n      new ParamDefinition('titleStagger', ParamType.NUMBER, false, 0.2),\n      new ParamDefinition('symbolStagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('axisElementStagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n    ]\n  }\n\n  createAnimation() {\n    const chartFadeIn = new TemplateUsage('Axes fade in')\n      .setTarget('.chart')\n      .updateSettings(this.getParamValues());\n\n    const barGrow = new TemplateUsage('Grow')\n      .setTarget('.bar')\n      .updateTiming({offset: 2})\n      .updateSettings({\n        ease: this.getParamValue('ease'),\n        direction: this.getParamValue('barDirection'),\n      });\n\n    const barLabelFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.bar-label')\n      .updateTiming({offset: 3});\n\n    return new SyncAnimation()\n      .append(chartFadeIn)\n      .append(barGrow)\n      .append(barLabelFadeIn);\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {NativeAnimation} from \"@/core/entities/spec/animation/NativeAnimation\";\nimport gsap from \"gsap\";\nimport {Timing} from \"@/core/entities/spec/Timing\";\n\nexport class MoveTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'move';\n    this.parameters = [\n      new ParamDefinition('from', ParamType.OBJECT, false, null),\n      new ParamDefinition('to', ParamType.OBJECT, false, null),\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n      new ParamDefinition('stagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('yoyo', ParamType.OBJECT, false, null),\n    ];\n  }\n\n  createAnimation() {\n    const animation = new MoveAnimation();\n    // transfer template settings to this native animation instance\n    // as their parameters are the same\n    animation.updateSettings(this.getParamValues());\n    return animation;\n  }\n}\n\nclass MoveAnimation extends NativeAnimation {\n  getDefaultSettings() {\n    return {duration: 1, ease: 'power1.out', stagger: 0, yoyo: null};\n  }\n\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {gsap.core.Timeline | gsap.core.Tween}\n   */\n  create(context) {\n    const {from, to, ease, stagger} = this.settings;\n    let {duration, yoyo} = this.settings;\n\n    let tw;\n    const glyphs = context.getGlyphs(this.target);\n\n    const yoyoVars = {};\n    if (yoyo) {\n      if (yoyo === true) {\n        // not object, use default\n        yoyo = Timing.getDefaultYoyo();\n      }\n      yoyoVars.yoyo = true;\n      yoyoVars.repeat = yoyo.repeat;\n      yoyoVars.repeatDelay = yoyo.delay;\n      duration /= (yoyoVars.repeat + 1);\n    }\n\n    if (from != null && to != null) {\n      const fromVars = {...from};\n      const toVars = {...to, ease, duration, stagger, ...yoyoVars};\n      tw = gsap.fromTo(glyphs, fromVars, toVars);\n\n    } else if (from != null) {\n      const fromVars = {...from, ease, duration, stagger, ...yoyoVars};\n      tw = gsap.from(glyphs, fromVars);\n\n    } else if (to != null) {\n      const toVars = {...to, ease, duration, stagger, ...yoyoVars};\n      tw = gsap.to(glyphs, toVars);\n\n    } else {\n      return null;\n    }\n\n    return tw;\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {NativeAnimation} from \"@/core/entities/spec/animation/NativeAnimation\";\nimport gsap from \"gsap\";\nimport * as d3 from 'd3';\nimport {computeUUID} from \"@/core/utils/uuid\";\nimport {CLIP_PATH_CLASS} from \"@/core/const/Element\";\n\nexport class WheelTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'wheel';\n    this.parameters = [\n      new ParamDefinition('enterOrExit', ParamType.STRING, false, 'enter'),\n      new ParamDefinition('direction', ParamType.STRING, false, 'clockwise'),\n      new ParamDefinition('center', ParamType.STRING, false, '50% 50%'),\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n      new ParamDefinition('stagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('startAngle', ParamType.NUMBER, false, 0),\n      new ParamDefinition('sweepAngle', ParamType.NUMBER, false, 360),\n      new ParamDefinition('grouped', ParamType.BOOLEAN, false, false),\n    ];\n  }\n\n  createAnimation() {\n    const animation = new WheelAnimation();\n    // transfer template settings to this native animation instance\n    // as their parameters are the same\n    animation.updateSettings(this.getParamValues());\n    return animation;\n  }\n}\n\nclass WheelAnimation extends NativeAnimation {\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {gsap.core.Timeline | gsap.core.Tween}\n   */\n  create(context) {\n    const glyphs = context.getGlyphs(this.target);\n    const defs = context.getDefsSel();\n    const tl = gsap.timeline()\n    const {grouped, stagger} = this.settings;\n\n    if (glyphs.length === 0) {\n      return null;\n    }\n\n    if (!grouped || glyphs.length === 1) {\n      glyphs.forEach((glyph, i) => {\n        const clip = this.addClipPathToGlyph(defs, glyph);\n        const tw = this.createTwForClip(clip, glyph);\n        const position = i === 0 ? 0 : ('<' + stagger);\n        tl.add(tw, position);\n      })\n    } else {\n      // need to be regard as an entirety\n      const clip = this.addClipPathToEntirety(defs, glyphs);\n      const tw = this.createTwForClipEntirety(clip, glyphs);\n      tl.add(tw);\n    }\n\n    return tl;\n  }\n\n  /**\n   * @param {d3.Selection} defs\n   * @param {SVGGraphicsElement} glyph\n   * @returns {SVGGraphicsElement} the clip path of glyph\n   */\n  addClipPathToGlyph(defs, glyph) {\n    if (!glyph.getAttribute('id')) {\n      glyph.setAttribute('id', computeUUID());\n    }\n    const clipId = 'clip-path-' + glyph.getAttribute('id');\n    let clip = defs.select(`#${clipId}`);\n    if (clip.empty()) {\n      clip = defs.append('clipPath')\n          .attr('id', clipId)\n          .classed(CLIP_PATH_CLASS, true);\n      glyph.setAttribute('clip-path', `url(#${clipId})`);\n    }\n    const wheelPathSel = clip.select('.wheel');\n    if (!wheelPathSel.empty()) {\n      return wheelPathSel.node();\n    }\n\n    let strokeWidth = parseFloat(glyph.getAttribute('stroke-width') ?? '0');\n    d3.select(glyph).selectAll('*').each(function () {\n      const tempWidth = parseFloat(this.getAttribute('stroke-width') ?? '0');\n      strokeWidth = Math.max(tempWidth, strokeWidth);\n    });\n\n    const newClipPath = clip.append('path')\n        .attr('class', 'wheel')\n        .attr('d', '')\n\n    return newClipPath.node();\n  }\n\n  /**\n   * @param {d3.Selection} defs\n   * @param {SVGGraphicsElement[]} glyphs\n   * @returns {SVGGraphicsElement} the clip path of glyph\n   */\n  // eslint-disable-next-line no-unused-vars\n  addClipPathToEntirety(defs, glyphs) {\n    // let x = Infinity, y = Infinity, width = 0, height = 0;\n    // glyphs.forEach(glyph => {\n    //   const bbox = glyph.getBBox();\n    //   x = Math.min(bbox.x);\n    //   y = Math.min(bbox.y);\n    //   width = Math.max(bbox.x + bbox.width - x);\n    //   height = Math.max(bbox.y + bbox.height - y);\n    // });\n    //\n    // const clipId = 'clip-path-' + glyph.getAttribute('id');\n    // let clip = defs.select(`#${clipId}`);\n    // if (clip.empty()) {\n    //   clip = defs.append('clipPath')\n    //       .attr('id', clipId)\n    //       .classed(CLIP_PATH_CLASS, true);\n    //   glyph.setAttribute('clip-path', `url(#${clipId})`);\n    // }\n    //\n    // let strokeWidth = parseFloat(glyph.getAttribute('stroke-width') ?? '0');\n    // d3.select(glyph).selectAll('*').each(function () {\n    //   const tempWidth = parseFloat(this.getAttribute('stroke-width') ?? '0');\n    //   strokeWidth = Math.max(tempWidth, strokeWidth);\n    // });\n    //\n    // const newClipPath = clip.append('path')\n    //     .attr('class', 'clip-path')\n    //     .attr('d', '')\n    //\n    // return newClipPath.node();\n  }\n\n  /**\n   * Same as Grow effect, but applied on mark\n   * @param {SVGGraphicsElement} clip\n   * @param {SVGGraphicsElement} glyph\n   * @returns {gsap.core.Tween|null}\n   */\n  createTwForClip(clip, glyph) {\n    const {ease, duration, startAngle, sweepAngle} = this.settings;\n\n    const bbox = glyph.getBBox();\n    let strokeWidth = parseFloat(glyph.getAttribute('stroke-width') ?? '0');\n    d3.select(glyph).selectAll('*').each(function () {\n      const tempWidth = parseFloat(this.getAttribute('stroke-width') ?? '0');\n      strokeWidth = Math.max(tempWidth, strokeWidth);\n    });\n\n    let width, height, x, y;\n    width = bbox.width + strokeWidth * 2;\n    height = bbox.height + strokeWidth * 2;\n    x = bbox.x - strokeWidth;\n    y = bbox.y - strokeWidth;\n\n    let arc, finalSweepAngle;\n    arc = {\n      startAngle: startAngle ?? 0,\n      sweepAngle: 0,\n      cx: x + width / 2,\n      cy: y + height / 2,\n      rx: width,\n      ry: height,\n    };\n    finalSweepAngle = sweepAngle;\n\n    const updatePath = function updatePath() {\n      const path = getArcPath(\n          arc.cx,\n          arc.cy,\n          arc.rx,\n          arc.ry,\n          arc.startAngle,\n          arc.sweepAngle\n      );\n      clip.setAttribute('d', path);\n    };\n\n    updatePath();\n\n    // set animation\n    return gsap.to(arc, {\n      sweepAngle: finalSweepAngle,\n      ease,\n      onUpdate: updatePath,\n      duration,\n    });\n  }\n\n  /**\n   * Same as Grow effect, but applied on mark\n   * @param {SVGGraphicsElement} clip\n   * @param {SVGGraphicsElement} glyphs\n   * @returns {gsap.core.Tween|null}\n   */\n  createTwForClipEntirety(clip, glyphs) {\n    const {ease, duration, startAngle, sweepAngle} = this.settings;\n\n    const bbox = glyphs.getBBox();\n    let strokeWidth = parseFloat(glyphs.getAttribute('stroke-width') ?? '0');\n    d3.select(glyphs).selectAll('*').each(function () {\n      const tempWidth = parseFloat(this.getAttribute('stroke-width') ?? '0');\n      strokeWidth = Math.max(tempWidth, strokeWidth);\n    });\n\n    let width, height, x, y;\n    width = bbox.width + strokeWidth * 2;\n    height = bbox.height + strokeWidth * 2;\n    x = bbox.x - strokeWidth;\n    y = bbox.y - strokeWidth;\n\n    let arc, finalSweepAngle;\n    arc = {\n      startAngle: startAngle ?? 0,\n      sweepAngle: 0,\n      cx: x + width / 2,\n      cy: y + height / 2,\n      rx: width,\n      ry: height,\n    };\n    finalSweepAngle = sweepAngle;\n\n    const updatePath = function updatePath() {\n      const path = getArcPath(\n          arc.cx,\n          arc.cy,\n          arc.rx,\n          arc.ry,\n          arc.startAngle,\n          arc.sweepAngle\n      );\n      clip.setAttribute('d', path);\n    };\n\n    updatePath();\n\n    // set animation\n    return gsap.to(arc, {\n      sweepAngle: finalSweepAngle,\n      ease,\n      onUpdate: updatePath,\n      duration,\n    });\n  }\n}\n\n/* cite: https://greensock.com/forums/topic/17566-create-a-radial-wipe/?tab=comments#comment-79421 */\nfunction getArcPath(cx, cy, rx, ry, startAngle, sweepAngle) {\n  // 0 degrees, no path\n  if (!sweepAngle) return `M${cx} ${cy}`;\n\n  // mod angles to 360 degrees\n  startAngle %= 360;\n  sweepAngle %= 360;\n\n  // If arc is 360 degrees, the sweep angle is 0 due to mod\n  const isClosed = sweepAngle === 0;\n\n  // If closed, we'll need to use 2 arcs with an angle of 180 degrees\n  if (isClosed) {\n    sweepAngle = 180;\n  }\n\n  // Make angle positive to simplify large arc flag\n  if (sweepAngle < 0) {\n    sweepAngle += 360;\n  }\n\n  const largeArc = sweepAngle > 180 ? 1 : 0;\n\n  // Convert degrees to radians\n  const a1 = (startAngle * Math.PI) / 180;\n  const a2 = ((startAngle + sweepAngle) * Math.PI) / 180;\n\n  // Calculate start and end coords for arc. Starts at 12 o'clock\n  const x1 = cx + rx * Math.sin(a1);\n  const y1 = cy - ry * Math.cos(a1);\n\n  const x2 = cx + rx * Math.sin(a2);\n  const y2 = cy - ry * Math.cos(a2);\n\n  /*\n  NOTE: To orient the starting point to 3 o'clock instead of 12 o'clock,\n  add 90 degrees to the start angle, or change the code above to this...\n\n  var x1 = cx + rx * Math.cos(a1);\n  var y1 = cy + ry * Math.sin(a1);\n\n  var x2 = cx + rx * Math.cos(a2);\n  var y2 = cy + ry * Math.sin(a2);\n  */\n\n  // Related demo using arc path\n  // https://codepen.io/osublake/pen/VbWKMj/\n  if (isClosed) {\n    return `\n      M ${x1} ${y1}\n      A ${rx} ${ry} 0 1 1 ${x2} ${y2}\n      A ${rx} ${ry} 0 1 1 ${x1} ${y1}z`;\n  }\n\n  return `\n    M ${x1} ${y1}\n    A ${rx} ${ry} 0 ${largeArc} 1 ${x2} ${y2}\n    L ${cx} ${cy}z`;\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {NativeAnimation} from \"@/core/entities/spec/animation/NativeAnimation\";\nimport gsap from \"gsap\";\n\nexport class DrawPathTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Draw-path';\n    this.parameters = [\n      new ParamDefinition('enterOrExit', ParamType.STRING, false, 'enter'),\n      new ParamDefinition('reverseDirection', ParamType.BOOLEAN, false, false),\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n      new ParamDefinition('stagger', ParamType.NUMBER, false, 0),\n    ];\n  }\n\n  createAnimation() {\n    const animation = new DrawPathAnimation();\n    // transfer template settings to this native animation instance\n    // as their parameters are the same\n    animation.updateSettings(this.getParamValues());\n    return animation;\n  }\n}\n\nclass DrawPathAnimation extends NativeAnimation {\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {gsap.core.Timeline | gsap.core.Tween}\n   */\n  create(context) {\n    const {enterOrExit, ease, stagger, duration, reverseDirection} = this.settings;\n\n    const tl = gsap.timeline();\n    const glyphs = context.getGlyphs(this.target);\n\n    glyphs.forEach((glyph, i) => {\n      let len = 0;\n      try {\n        len = glyph.getTotalLength();\n        // eslint-disable-next-line no-empty\n      } catch(e) {\n      }\n      glyph.setAttribute('stroke-dasharray', len);\n      let tw;\n      if (enterOrExit === 'enter') {\n        tw = gsap.fromTo(glyph, {strokeDashoffset: reverseDirection ? -len : len},\n            {strokeDashoffset: 0, ease, duration});\n      } else if (enterOrExit === 'exit') {\n        tw = gsap.fromTo(glyph, {strokeDashoffset: 0},\n            {strokeDashoffset: reverseDirection ? len : -len, ease, duration});\n      } else {\n        console.warn(\"Wrong value of enterOrExit: \" + enterOrExit);\n        return;\n      }\n      tl.add(tw, i === 0 ? 0 : ('<' + stagger));\n    });\n\n    return tl;\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\nimport {SyncAnimation} from \"@/core/entities/spec/animation/SyncAnimation\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\n\nexport class HighlightSectorTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Highlight-sector';\n    this.parameters = [\n        new ParamDefinition('duration', ParamType.NUMBER, false, 1),\n    ]\n  }\n\n  createAnimation() {\n    // const sectorLineDrawPath = new TemplateUsage('Draw-path')\n    //   .setTarget('.sector-line');\n\n    // const sectorLabelFloat = new TemplateUsage('Float')\n    //   .setTarget('.sector-label');\n\n    const annoLabelDynamicNumber = new TemplateUsage('show-dynamic-number')\n        .setTarget('.anno-label,.sector-label')\n        .set('start', 0)\n        .set('end', '@num')\n        .set('formatter', '@num%');\n\n    // const sectorHighlight = new TemplateUsage('Highlight')\n    //     .setTarget('.sector,.arc,.pie')\n        // .set('centerSelector', '.sector,.arc,.pie');\n\n    return new SyncAnimation()\n      // .append(sectorLineDrawPath)\n      // .append(sectorLabelFloat)\n      .append(annoLabelDynamicNumber)\n      // .append(sectorHighlight)\n      ;\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\nimport {SyncAnimation} from \"@/core/entities/spec/animation/SyncAnimation\";\n\nexport class ArcWheelWithLegendTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'arc-wheel-with-legend';\n    this.parameters = [\n    ]\n  }\n\n  createAnimation() {\n\n    const arcWheel = new TemplateUsage('simple-sector-wheel')\n        .setTarget('.arc')\n        .updateSettings({\n          centerSelector: '.arc',\n          endAngle: 360,\n          startAngle: 0,\n        });\n\n    const legendFlyIn = new TemplateUsage('Fly-in')\n        .setTarget('.legend')\n        .updateSettings({\n            direction: 'right',\n        });\n\n    return new SyncAnimation()\n        .append(arcWheel)\n        .append(legendFlyIn);\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\nimport {ConcatAnimation} from \"@/core/entities/spec/animation/ConcatAnimation\";\n\nexport class ShowDynamicNumberTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'show-dynamic-number';\n    this.parameters = [\n      new ParamDefinition('start', ParamType.NUMBER, false, 0),\n      new ParamDefinition('end', ParamType.NUMBER, false, 100),\n      new ParamDefinition('formatter', ParamType.STRING, false, '@num'),\n      new ParamDefinition('toFixed', ParamType.NUMBER, false, 0),\n      new ParamDefinition('numChangeDuration', ParamType.NUMBER, false, 1.9),\n      new ParamDefinition('FadeInDuration', ParamType.NUMBER, false, 0.1),\n      new ParamDefinition('FadeOutDuration', ParamType.NUMBER, false, 1),\n      new ParamDefinition('notExit', ParamType.BOOLEAN, false, false),\n      new ParamDefinition('displayTime', ParamType.NUMBER, false, 3),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power3.out'),\n      new ParamDefinition('stagger', ParamType.NUMBER, false, 0),\n    ];\n  }\n\n  createAnimation() {\n    const fadeIn = new TemplateUsage('Fade-in')\n        .set('duration', this.getParamValue('FadeInDuration'));\n\n    const dynamicNumber = new TemplateUsage('Dynamic-number');\n    const params = {...this.getParamValues()};\n    params['duration'] = params['numChangeDuration'];\n    delete params['numChangeDuration'];\n    delete params['FadeInDuration'];\n    delete params['FadeOutDuration'];\n    dynamicNumber.updateSettings(this.getParamValues());\n\n    const concat = [fadeIn, dynamicNumber];\n\n    if (!this.getParamValue('notExit')) {\n      // exit\n      const fadeOut = new TemplateUsage('Fade-out')\n          .set('duration', this.getParamValue('FadeOutDuration'))\n          .updateTiming({'offset': this.getParamValue('displayTime')});\n      concat.push(fadeOut);\n    }\n\n    return new ConcatAnimation(concat);\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {NativeAnimation} from \"@/core/entities/spec/animation/NativeAnimation\";\nimport gsap from \"gsap\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\n\nexport class ShowAnnoAutoEffectTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Show-annotation-auto-effect';\n    this.parameters = [\n      new ParamDefinition('stagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1),\n    ]\n  }\n\n  createAnimation() {\n    const animation = new ShowAnnoAutoEffectAnimation();\n    // transfer template settings to this native animation instance\n    // as their parameters are the same\n    animation.updateSettings(this.getParamValues());\n    return animation;\n  }\n}\n\nclass ShowAnnoAutoEffectAnimation extends NativeAnimation {\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {gsap.core.Timeline | gsap.core.Tween}\n   */\n  create(context) {\n    const {stagger, duration} = this.settings;\n\n    const tl = gsap.timeline();\n\n    const glyphs = context.getGlyphs(this.target);\n\n    glyphs.forEach((glyph) => {\n      let ani;\n      switch (glyph.tagName) {\n        case 'text': ani = new TemplateUsage('Float'); break;\n        case 'circle': ani = new TemplateUsage('wheel'); break;\n        case 'path':\n        case 'line':\n          ani = new TemplateUsage('Draw-path'); break;\n        default: ani = new TemplateUsage('Fade-in');\n      }\n      ani.setTarget('#' + glyph.id)\n         .set('duration', duration);\n      const tw = ani.create(context);\n      tw.yoyo(true);\n      tw.repeat(1);\n      tl.add(tw, '<' + stagger);\n    });\n\n    return tl;\n  }\n}","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {NativeAnimation} from \"@/core/entities/spec/animation/NativeAnimation\";\nimport gsap from \"gsap\";\nimport {Timing} from \"@/core/entities/spec/Timing\";\n\nexport class CameraMoveTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Camera-move';\n    this.parameters = [\n      new ParamDefinition('x', ParamType.ANY, false, '+=50'),    // number or string\n      new ParamDefinition('y', ParamType.ANY, false, '+=50'),    // number or string\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n      new ParamDefinition('yoyo', ParamType.OBJECT, false, null),\n    ];\n  }\n\n  createAnimation() {\n    const animation = new CameraMoveAnimation();\n    // transfer template settings to this native animation instance\n    // as their parameters are the same\n    animation.updateSettings(this.getParamValues());\n    return animation;\n  }\n}\n\nclass CameraMoveAnimation extends NativeAnimation {\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {gsap.core.Timeline | gsap.core.Tween}\n   */\n  create(context) {\n    const {x, y, ease} = this.settings;\n    let {duration, yoyo} = this.settings;\n\n    let tw;\n    const scene = context.renderContext.rootSel;\n\n    const yoyoVars = {};\n    if (yoyo) {\n      if (yoyo === true) {\n        // not object, use default\n        yoyo = Timing.getDefaultYoyo();\n      }\n      yoyoVars.yoyo = true;\n      yoyoVars.repeat = yoyo.repeat;\n      yoyoVars.repeatDelay = yoyo.delay;\n      duration /= (yoyoVars.repeat + 1);\n    }\n\n    // // change percentage to pixel\n    // [from, to].forEach(vars => {\n    //   if (vars != null && typeof from === 'object') {\n    //     let {x, y} = vars;\n    //     if (typeof from === 'string' && x.match(/.*([\\d.]*%).*/)) {\n    //       x = parseFloat(from.replace('%', ''));\n    //       vars.x = x * scene.getBoundingClientRect().width;\n    //     }\n    //     if (typeof from === 'string' && y.match(/\\s*(\\d*)\\.%\\s*/)) {\n    //       y = parseFloat(vars.replace('%', ''));\n    //       vars.y = y * scene.getBoundingClientRect().height;\n    //     }\n    //   }\n    // });\n\n    const translateX = x.replace('+', '-').replace('-', '+');\n    const translateY = y.replace('+', '-').replace('-', '+');\n\n    const vars = {translateX, translateY, ease, duration};\n    tw = gsap.to(scene.node(), vars);\n\n    // console.log('camera move', scene, this.settings, tw);\n    return tw;\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {NativeAnimation} from \"@/core/entities/spec/animation/NativeAnimation\";\nimport gsap from \"gsap\";\nimport * as d3 from 'd3';\nimport {computeUUID} from \"@/core/utils/uuid\";\nimport {CLIP_PATH_CLASS} from \"@/core/const/Element\";\n\nexport class SimpleSectorWheelTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'simple-sector-wheel';\n    this.parameters = [\n      new ParamDefinition('enterOrExit', ParamType.STRING, false, 'enter'),\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n      new ParamDefinition('centerSelector', ParamType.STRING, false, null),\n      new ParamDefinition('startAngle', ParamType.NUMBER, false, 0),\n      new ParamDefinition('endAngle', ParamType.NUMBER, false, 360),\n    ];\n  }\n\n  createAnimation() {\n    const animation = new SingleSectorWheelAnimation();\n    // transfer template settings to this native animation instance\n    // as their parameters are the same\n    animation.updateSettings(this.getParamValues());\n    return animation;\n  }\n}\n\nclass SingleSectorWheelAnimation extends NativeAnimation {\n  x\n  y\n  width\n  height\n\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {gsap.core.Timeline | gsap.core.Tween}\n   */\n  create(context) {\n    const glyphs = context.getGlyphs(this.target);\n    const defs = context.getDefsSel();\n    const tl = gsap.timeline()\n    const {stagger, centerSelector, startAngle, endAngle} = this.settings;\n\n    // compute center\n    let x = Infinity, y = Infinity, width = 0, height = 0;\n    let centerObjs;\n    if (centerSelector != null) {\n      centerObjs = context.getRootSel().selectAll(centerSelector).nodes();\n    } else {\n      centerObjs = glyphs;\n    }\n    centerObjs.forEach(glyph => {\n      const bbox = glyph.getBBox();\n      x = Math.min(x, bbox.x);\n      y = Math.min(y ,bbox.y);\n    });\n    this.x = x;\n    this.y = y;\n\n    // compute width and height\n    centerObjs.forEach(glyph => {\n      const bbox = glyph.getBBox();\n      width = Math.max(width, bbox.x + bbox.width - x);\n      height = Math.max(height, bbox.y + bbox.height - y);\n    });\n    this.width = width;\n    this.height = height;\n\n    console.log('sector', x, y, width, height);\n\n    glyphs.forEach((glyph, i) => {\n      const clip = this.addClipPathToGlyph(defs, glyph);\n      const tw = this.createTwForClip(clip, glyph, startAngle, endAngle);\n      const position = i === 0 ? 0 : ('<' + stagger);\n      tl.add(tw, position);\n    });\n\n    return tl;\n  }\n\n  /**\n   * @param {d3.Selection} defs\n   * @param {SVGGraphicsElement} glyph\n   * @returns {SVGGraphicsElement} the clip path of glyph\n   */\n  addClipPathToGlyph(defs, glyph) {\n    if (!glyph.getAttribute('id')) {\n      glyph.setAttribute('id', computeUUID());\n    }\n    const clipId = 'clip-path-' + glyph.getAttribute('id');\n    let clip = defs.select(`#${clipId}`);\n    if (clip.empty()) {\n      clip = defs.append('clipPath')\n          .attr('id', clipId)\n          .classed(CLIP_PATH_CLASS, true);\n      glyph.setAttribute('clip-path', `url(#${clipId})`);\n    }\n    const wheelPathSel = clip.select('.sector-wheel');\n    if (!wheelPathSel.empty()) {\n      return wheelPathSel.node();\n    }\n\n    let strokeWidth = parseFloat(glyph.getAttribute('stroke-width') ?? '0');\n    d3.select(glyph).selectAll('*').each(function () {\n      const tempWidth = parseFloat(this.getAttribute('stroke-width') ?? '0');\n      strokeWidth = Math.max(tempWidth, strokeWidth);\n    });\n\n    const newClipPath = clip.append('path')\n        .attr('class', 'sector-wheel')\n        .attr('d', '')\n\n    return newClipPath.node();\n  }\n\n  /**\n   * Same as Grow effect, but applied on mark\n   * @param {SVGGraphicsElement} clip\n   * @param {SVGGraphicsElement} glyph\n   * @param startDegree\n   * @param endDegree\n   * @returns {gsap.core.Tween|null}\n   */\n  createTwForClip(clip, glyph, startDegree, endDegree) {\n    const {ease, duration} = this.settings;\n    const startAngle = startDegree, sweepAngle = endDegree - startDegree;\n\n    let arc, finalSweepAngle;\n    arc = {\n      startAngle: startAngle ?? 0,\n      sweepAngle: 0,\n      cx: this.x + this.width / 2,\n      cy: this.y + this.height / 2,\n      rx: Math.max(this.width, this.height),\n      ry: Math.max(this.width, this.height),\n    };\n    console.log(arc.cx, arc.cy, arc)\n    finalSweepAngle = sweepAngle;\n\n    const updatePath = function updatePath() {\n      const path = getArcPath(\n          arc.cx,\n          arc.cy,\n          arc.rx,\n          arc.ry,\n          arc.startAngle,\n          arc.sweepAngle\n      );\n      clip.setAttribute('d', path);\n    };\n\n    updatePath();\n\n    // set animation\n    return gsap.to(arc, {\n      sweepAngle: finalSweepAngle,\n      ease,\n      onUpdate: updatePath,\n      duration,\n    });\n  }\n}\n\n/* cite: https://greensock.com/forums/topic/17566-create-a-radial-wipe/?tab=comments#comment-79421 */\nfunction getArcPath(cx, cy, rx, ry, startAngle, sweepAngle) {\n  // 0 degrees, no path\n  if (!sweepAngle) return `M${cx} ${cy}`;\n\n  // mod angles to 360 degrees\n  startAngle %= 360;\n  sweepAngle %= 360;\n\n  // If arc is 360 degrees, the sweep angle is 0 due to mod\n  const isClosed = sweepAngle === 0;\n\n  // If closed, we'll need to use 2 arcs with an angle of 180 degrees\n  if (isClosed) {\n    sweepAngle = 180;\n  }\n\n  // Make angle positive to simplify large arc flag\n  if (sweepAngle < 0) {\n    sweepAngle += 360;\n  }\n\n  const largeArc = sweepAngle > 180 ? 1 : 0;\n\n  // Convert degrees to radians\n  const a1 = (startAngle * Math.PI) / 180;\n  const a2 = ((startAngle + sweepAngle) * Math.PI) / 180;\n\n  // Calculate start and end coords for arc. Starts at 12 o'clock\n  const x1 = cx + rx * Math.sin(a1);\n  const y1 = cy - ry * Math.cos(a1);\n\n  const x2 = cx + rx * Math.sin(a2);\n  const y2 = cy - ry * Math.cos(a2);\n\n  /*\n  NOTE: To orient the starting point to 3 o'clock instead of 12 o'clock,\n  add 90 degrees to the start angle, or change the code above to this...\n\n  var x1 = cx + rx * Math.cos(a1);\n  var y1 = cy + ry * Math.sin(a1);\n\n  var x2 = cx + rx * Math.cos(a2);\n  var y2 = cy + ry * Math.sin(a2);\n  */\n\n  // Related demo using arc path\n  // https://codepen.io/osublake/pen/VbWKMj/\n  if (isClosed) {\n    return `\n      M ${x1} ${y1}\n      A ${rx} ${ry} 0 1 1 ${x2} ${y2}\n      A ${rx} ${ry} 0 1 1 ${x1} ${y1}z`;\n  }\n\n  return `\n    M ${x1} ${y1}\n    A ${rx} ${ry} 0 ${largeArc} 1 ${x2} ${y2}\n    L ${cx} ${cy}z`;\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {NativeAnimation} from \"@/core/entities/spec/animation/NativeAnimation\";\nimport gsap from \"gsap\";\nimport {Direction} from \"@/core/const/Direction\";\n\nexport class FlyInTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Fly-in';\n    this.parameters = [\n      new ParamDefinition('direction', ParamType.STRING, false, Direction.RIGHT),\n      new ParamDefinition('duration', ParamType.NUMBER, false, 0.2),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n      new ParamDefinition('stagger', ParamType.NUMBER, false, 0),\n    ];\n  }\n\n  createAnimation() {\n    const animation = new GrowAnimation();\n    // transfer template settings to this native animation instance\n    // as their parameters are the same\n    animation.updateSettings(this.getParamValues());\n    return animation;\n  }\n}\n\nclass GrowAnimation extends NativeAnimation {\n  rootBBox\n\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {gsap.core.Timeline | gsap.core.Tween}\n   */\n  create(context) {\n    const {stagger} = this.settings;\n    const glyphs = context.getGlyphs(this.target);\n    this.rootBBox = context.getRootSel().node().getBBox();\n    const tl = gsap.timeline()\n    glyphs.forEach((glyph, i) => {\n      const tw = this.createTwForOneGlyph(glyph);\n      const position = i === 0 ? 0 : ('<' + stagger);\n      tl.add(tw, position);\n    });\n    return tl;\n  }\n  /**\n   * @param {SVGGraphicsElement} glyph\n   * @returns {gsap.core.Tween|null}\n   */\n  createTwForOneGlyph(glyph) {\n    const {direction, ease, duration} = this.settings;\n\n    let transFactorX, transFactorY;\n    switch (direction) {\n      case Direction.TOP:\n        transFactorX = 0;\n        transFactorY = -1;\n        break;\n      case Direction.BOTTOM:\n        transFactorX = 0;\n        transFactorY = 1;\n        break;\n      case Direction.LEFT:\n        transFactorX = -1;\n        transFactorY = 0;\n        break;\n      case Direction.RIGHT:\n        transFactorX = 1;\n        transFactorY = 0;\n        break;\n      default: return null;\n    }\n    const translateX = '+=' + (transFactorX * this.rootBBox.width*0.5);\n    const translateY = '+=' + (transFactorY * this.rootBBox.height*0.5);\n    const fromVars = {translateX, translateY, duration, ease};\n\n    // console.log('fly in:', glyph, fromVars);\n    return gsap.from(glyph, fromVars);\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {NativeAnimation} from \"@/core/entities/spec/animation/NativeAnimation\";\nimport gsap from \"gsap\";\n\nexport class HideTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'hide';\n  }\n\n  createAnimation() {\n    return new HideAnimation();\n  }\n}\n\nclass HideAnimation extends NativeAnimation {\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {gsap.core.Timeline | gsap.core.Tween}\n   */\n  create(context) {\n    const glyphs = context.getGlyphs(this.target);\n    gsap.set(glyphs, {opacity: 0});\n    return gsap.timeline();\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {NativeAnimation} from \"@/core/entities/spec/animation/NativeAnimation\";\nimport gsap from \"gsap\";\n\nexport class EmptyTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'empty';\n    this.parameters = [\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1),\n    ];\n  }\n\n  createAnimation() {\n    const animation = new EmptyAnimation();\n    // transfer template settings to this native animation instance\n    // as their parameters are the same\n    animation.updateSettings(this.getParamValues());\n    return animation;\n  }\n}\n\nclass EmptyAnimation extends NativeAnimation {\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {gsap.core.Timeline | gsap.core.Tween}\n   */\n  // eslint-disable-next-line no-unused-vars\n  create(context) {\n    const {duration} = this.settings;\n    return gsap.to('empty-selector', {duration});\n  }\n}\n","export default {templateName:'show number',parameters:[{paramName:'dataName',paramType:'string'}],animation:{target:{selector:'.annotation',transform:{type:'filter',expr:'@datum.name === \"$dataName\"'}},sequence:{sync:[{use:'Dynamic-number',target:'.label'},{use:'Float',target:'.label',settings:{distance:10}}]}}}","// general 15\nimport { FadeInTemplate } from \"@/core/build-in/templates/general/FadeInTemplate\";\nimport { GrowTemplate } from \"@/core/build-in/templates/general/GrowTemplate\";\nimport { MoveToTemplate } from \"@/core/build-in/templates/general/MoveToTemplate\";\nimport { MoveFromTemplate } from \"@/core/build-in/templates/general/MoveFromTemplate\";\nimport { FloatTemplate } from \"@/core/build-in/templates/general/FloatTemplate\";\nimport { BasicZoomTemplate } from \"@/core/build-in/templates/general/BasicZoomTemplate\";\nimport { ZoomTemplate } from \"@/core/build-in/templates/general/ZoomTemplate\";\nimport { WipeTemplate } from \"@/core/build-in/templates/general/WipeTemplate\";\nimport { ChangeColorTemplate } from \"@/core/build-in/templates/general/ChangeColorTemplate\";\nimport { ShowPathTemplate } from \"@/core/build-in/templates/path/ShowPathTemplate\";\nimport { HighlightTemplate } from \"@/core/build-in/templates/general/HighlightTemplate\";\nimport { CameraZoomTemplate } from \"@/core/build-in/templates/camera/CameraZoomTemplate\";\nimport ZoomExitTemplate from \"@/core/build-in/templates/general/ZoomExitTemplate.json5\";\nimport BasicZoomExitTemplate from \"@/core/build-in/templates/general/BasicZoomExitTemplate.json5\";\nimport { FadeOutTemplate } from \"@/core/build-in/templates/general/FadeOutTemplate\";\n\n// chart 10\nimport { TitleTemplate } from \"@/core/build-in/templates/text/TitleTemplate\";\nimport { ChartWithoutMarkFloatInTemplate } from \"@/core/build-in/templates/chart/ChartWithoutMarkFloatInTemplate\";\nimport ChartWithoutMarkFadeInTemplate from \"@/core/build-in/templates/chart/ChartWithoutMarkFadeInTemplate.json5\";\nimport { BarChartEnterTemplate } from \"@/core/build-in/templates/bar-chart/BarChartEnterTemplate\";\nimport { BarChartWithLegendEnterTemplate } from \"@/core/build-in/templates/bar-chart/BarChartWithLegendEnterTemplate\";\nimport { CircleChartWithLegendEnterTemplate } from \"@/core/build-in/templates/circle-chart/CircleChartWithLegendEnterTemplate\";\nimport { LineChartEnterTemplate } from \"@/core/build-in/templates/line-chart/LineChartEnterTemplate\";\nimport { LineChartbyLegendTemplate } from \"@/core/build-in/templates/line-chart/LineChartbyLegendTemplate\";\nimport { LineChartbyOrderTemplate } from \"@/core/build-in/templates/line-chart/LineChartbyOrderTemplate\";\nimport { PieChartEnterTemplate } from \"@/core/build-in/templates/pie-chart/PieChartEnterTemplate\";\n\n// mark 9 + 1\nimport { BarEnterTemplate } from \"@/core/build-in/templates/bar-chart/BarEnterTemplate\";\nimport { BarWithLegendEnterTemplate } from \"@/core/build-in/templates/bar-chart/BarWithLegendEnterTemplate\";\nimport { BarSymbolLabelEnterTemplate } from \"@/core/build-in/templates/bar-chart/BarSymbolLabelEnterTemplate\";\nimport { CircleEnterTemplate } from \"@/core/build-in/templates/circle-chart/CircleEnterTemplate\";\nimport { CircleWithLegendEnterTemplate } from \"@/core/build-in/templates/circle-chart/CircleWithLegendEnterTemplate\";\nimport { CircleChartEnterTemplate } from \"@/core/build-in/templates/circle-chart/CircleChartEnterTemplate\";\nimport { GrowBarTemplate } from \"@/core/build-in/templates/bar-chart/GrowBarTemplate\";\nimport { LineEnterTemplate } from \"@/core/build-in/templates/line-chart/LineEnterTemplate\";\nimport { LinebyLegendTemplate } from \"@/core/build-in/templates/line-chart/LinebyLegendTemplate\";\nimport { LinebyOrderTemplate } from \"@/core/build-in/templates/line-chart/LinebyOrderTemplate\";\nimport { LineHighlightTemplate } from \"@/core/build-in/templates/line-chart/LineHighlightTemplate\";\nimport { PieWithLegendEnterTemplate } from \"@/core/build-in/templates/pie-chart/PieWithLegendEnterTemplate\";\n\n// annotation 5\nimport { ShowAnnoZoomTemplate } from \"@/core/build-in/templates/annotation/ShowAnnoZoomTemplate\";\nimport { ShowArrowLabelAnnoTemplate } from \"@/core/build-in/templates/annotation/ShowArrowLabelAnnoTemplate\";\nimport { CircleTemplate } from \"@/core/build-in/templates/general/CircleTemplate\";\nimport FadeInThenFadeOutTemplate from \"@/core/build-in/templates/general/FadeInThenFadeOutTemplate.json5\";\nimport { DynamicNumberTemplate } from \"@/core/build-in/templates/text/DynamicNumberTemplate\";\nimport {ZoomInThenZoomOutTemplate} from \"@/core/build-in/templates/general/ZoomInThenZoomOutTemplate\";\n\n// others\nimport { TemplateParser } from \"@/core/parser/TemplateParser\";\nimport { CustomEffectTemplate } from \"@/core/build-in/templates/general/CustomEffectTemplate\";\nimport { FadeTemplate } from \"@/core/build-in/templates/general/FadeTemplate\";\nimport ZoomEnterTemplate from \"@/core/build-in/templates/general/ZoomEnterTemplate.json5\";\nimport BasicZoomEnterTemplate from \"@/core/build-in/templates/general/BasicZoomEnterTemplate.json5\";\nimport { BarSymbolLabelBounceTemplate } from \"@/core/build-in/templates/bar-chart/BarSymbolLabelBounceTemplate\";\nimport { BarChartWithAxisLabelEnterTemplate } from \"@/core/build-in/templates/bar-chart/BarChartWithAxisLabelEnterTemplate\";\nimport { MoveTemplate } from \"@/core/build-in/templates/general/MoveTemplate\";\nimport { WheelTemplate } from \"@/core/build-in/templates/general/WheelTemplate\";\nimport { SectorWheelTemplate } from \"@/core/build-in/templates/pie-chart/SectorWheelTemplate\";\nimport { DrawPathTemplate } from \"@/core/build-in/templates/path/DrawPathTemplate\";\nimport { HighlightSectorTemplate } from \"@/core/build-in/templates/pie-chart/HighlightSectorTemplate\";\nimport { ArcWheelWithLegendTemplate } from \"@/core/build-in/templates/pie-chart/ArcWheelWithLegendTemplate\";\n\nimport { ShowDynamicNumberTemplate } from \"@/core/build-in/templates/text/ShowDynamicNumberTemplate\";\nimport { ShowAnnoAutoEffectTemplate } from \"@/core/build-in/templates/annotation/ShowAnnoAutoEffectTemplate\";\nimport { CameraMoveTemplate } from \"@/core/build-in/templates/camera/CameraMoveTemplate\";\nimport { SimpleSectorWheelTemplate } from \"@/core/build-in/templates/pie-chart/SimpleSectorWheelTemplate\";\nimport { FlyInTemplate } from \"@/core/build-in/templates/general/FlyInTemplate\";\nimport { HideTemplate } from \"@/core/build-in/templates/general/HideTemplate\";\nimport { EmptyTemplate } from \"@/core/build-in/templates/general/EmptyTemplate\";\nimport ShowNumber from \"@/core/build-in/templates/text/ShowNumber.json5\";\n\n\n\n/** @type {BaseTemplate[]} */\nexport const buildInTemplates = [\n  /* general */\n  new CustomEffectTemplate(),\n  new GrowTemplate(),\n\n  new FadeTemplate(),\n  new FadeInTemplate(),\n  new FadeOutTemplate(),\n  // new FadeInThenFadeOutTemplate(),\n  new WipeTemplate(),\n  new CircleTemplate(),\n  new HighlightTemplate(),\n\n  new ZoomTemplate(),\n  TemplateParser.fromJSON(ZoomEnterTemplate),\n  TemplateParser.fromJSON(ZoomExitTemplate),\n\n  new BasicZoomTemplate(),\n  TemplateParser.fromJSON(BasicZoomEnterTemplate),\n  TemplateParser.fromJSON(BasicZoomExitTemplate),\n\n  new MoveTemplate(),\n  new MoveFromTemplate(),\n  new MoveToTemplate(),\n\n  new FloatTemplate(),\n\n  TemplateParser.fromJSON(FadeInThenFadeOutTemplate),\n\n  new ChangeColorTemplate(),\n\n  new WheelTemplate(),\n\n  new FlyInTemplate(),\n\n  new HideTemplate(),\n  new EmptyTemplate(),\n\n  /* camera */\n  new CameraZoomTemplate(),\n  new CameraMoveTemplate(),\n\n  /* chart */\n  TemplateParser.fromJSON(ChartWithoutMarkFadeInTemplate),\n  // new ChartWithoutMarkFadeIn2Template(),\n  new ChartWithoutMarkFloatInTemplate(),\n\n  /* bar-chart */\n  new BarChartEnterTemplate(),\n  new BarSymbolLabelBounceTemplate(),\n  new BarSymbolLabelEnterTemplate(),\n  new BarChartWithAxisLabelEnterTemplate(),\n  new BarChartWithLegendEnterTemplate(),\n  new BarWithLegendEnterTemplate(),\n  new BarEnterTemplate(),\n  new GrowBarTemplate(),\n\n  /* line-chart */\n  new LineEnterTemplate(),\n  new LineChartEnterTemplate(),\n  new LineChartbyLegendTemplate(),\n  new LineChartbyOrderTemplate(),\n  new LinebyLegendTemplate(),\n  new LinebyOrderTemplate(),\n  new LineHighlightTemplate(),\n\n  /* circle-chart */\n  new CircleChartEnterTemplate(),\n  new CircleEnterTemplate(),\n  new CircleChartWithLegendEnterTemplate(),\n  new CircleWithLegendEnterTemplate(),\n\n  /* path */\n  new DrawPathTemplate(),\n  new ShowPathTemplate(),\n\n  /* pie-chart */\n  new SectorWheelTemplate(),\n  new SimpleSectorWheelTemplate(),\n  new PieChartEnterTemplate(),\n  new HighlightSectorTemplate(),\n  new ArcWheelWithLegendTemplate(),\n  new PieWithLegendEnterTemplate(),\n\n  /* annotation */\n  new ShowArrowLabelAnnoTemplate(),\n  new ShowAnnoZoomTemplate(),\n  new ZoomInThenZoomOutTemplate(),\n\n  /* text */\n  new DynamicNumberTemplate(),\n  new ShowDynamicNumberTemplate(),\n\n  new ShowAnnoAutoEffectTemplate(),\n  TemplateParser.fromJSON(ShowNumber),\n  new TitleTemplate(),\n];\n\nconsole.log('buildInTemplates', buildInTemplates);\n","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {FadeTemplate} from \"@/core/build-in/templates/general/FadeTemplate\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\n\nexport const fadeWrapper = new PreviewWrapper(\n    new FadeTemplate(),\n    PreviewerType.GENERAL,\n    AnimationType.OTHER,\n    ['general', 'any', 'opacity', 'enter', 'exit'],\n    {},\n    '.second,.forth',\n    0.5,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {TemplateParser} from \"@/core/parser/TemplateParser\";\nimport BasicZoomEnterTemplate from \"@/core/build-in/templates/general/BasicZoomEnterTemplate.json5\";\n\nexport const basicZoomEnterWrapper = new PreviewWrapper(\n    TemplateParser.fromJSON(BasicZoomEnterTemplate),\n    PreviewerType.GENERAL,\n    AnimationType.ENTER,\n    ['general', 'any', 'zoom', 'enter'],\n    {},\n    '.second,.forth',\n    0.5,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {TemplateParser} from \"@/core/parser/TemplateParser\";\nimport BasicZoomExitTemplate from \"@/core/build-in/templates/general/BasicZoomExitTemplate.json5\";\n\nexport const basicZoomExitWrapper = new PreviewWrapper(\n    TemplateParser.fromJSON(BasicZoomExitTemplate),\n    PreviewerType.GENERAL,\n    AnimationType.EXIT,\n    ['general', 'any', 'zoom', 'exit'],\n    {},\n    '.second,.forth',\n    0.5,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {BasicZoomTemplate} from \"@/core/build-in/templates/general/BasicZoomTemplate\";\n\nexport const basicZoomWrapper = new PreviewWrapper(\n    new BasicZoomTemplate(),\n    PreviewerType.GENERAL,\n    AnimationType.OTHER,\n    ['general', 'any', 'zoom', 'enter', 'exit'],\n    {},\n    '.second,.forth',\n    0.5,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {ChangeColorTemplate} from \"@/core/build-in/templates/general/ChangeColorTemplate\";\n\nexport const changeColorWrapper = new PreviewWrapper(\n    new ChangeColorTemplate(),\n    PreviewerType.GENERAL,\n    AnimationType.HIGHLIGHT,\n    ['general', 'any', 'color', 'emphasize'],\n    {fill: '#2171b5', duration:2},\n    '.second,.first',\n    1,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {CustomEffectTemplate} from \"@/core/build-in/templates/general/CustomEffectTemplate\";\n\nexport const customEffectWrapper = new PreviewWrapper(\n    new CustomEffectTemplate(),\n    PreviewerType.MOVE,\n    AnimationType.OTHER,\n    ['general', 'any', 'custom', 'enter', 'exit'],\n    {attr: ['fill', 'x'], to: ['#fb9b5b', '+=70px'], ease: 'power1.inOut'},\n    '.target',\n    0.5,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {FadeInTemplate} from \"@/core/build-in/templates/general/FadeInTemplate\";\n\nexport const fadeInWrapper = new PreviewWrapper(\n    new FadeInTemplate(),\n    PreviewerType.GENERAL,\n    AnimationType.ENTER,\n    ['general', 'any', 'opacity', 'enter'],\n    {},\n    '.second,.forth',\n    0.5,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {FadeOutTemplate} from \"@/core/build-in/templates/general/FadeOutTemplate\";\n\nexport const fadeOutWrapper = new PreviewWrapper(\n    new FadeOutTemplate(),\n    PreviewerType.GENERAL,\n    AnimationType.EXIT,\n    ['general', 'any', 'opacity', 'exit'],\n    {},\n    '.second,.forth',\n    0.5,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {FloatTemplate} from \"@/core/build-in/templates/general/FloatTemplate\";\n\nexport const floatWrapper = new PreviewWrapper(\n    new FloatTemplate(),\n    PreviewerType.GENERAL,\n    AnimationType.ENTER,\n    ['general', 'any', 'move', 'opacity', 'enter', 'exit'],\n    {},\n    '.second,.forth',\n    0.5,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {FlyInTemplate} from \"@/core/build-in/templates/general/FlyInTemplate\";\n\nexport const flyinWrapper = new PreviewWrapper(\n    new FlyInTemplate(),\n    PreviewerType.GENERAL,\n    AnimationType.ENTER,\n    ['general', 'any', 'move', 'opacity', 'enter', 'exit'],\n    {},\n    '.second,.forth',\n    0.5,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {GrowTemplate} from \"@/core/build-in/templates/general/GrowTemplate\";\n\nexport const growWrapper = new PreviewWrapper(\n    new GrowTemplate(),\n    PreviewerType.GENERAL,\n    AnimationType.ENTER,\n    ['general', 'any', 'width', 'height', 'enter'],\n    {},\n    '.second,.forth',\n    0.5,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {MoveTemplate} from \"@/core/build-in/templates/general/MoveTemplate\";\n\nexport const moveWrapper = new PreviewWrapper(\n    new MoveTemplate(),\n    PreviewerType.MOVE,\n    AnimationType.OTHER,\n    ['general', 'any', 'move', 'from', 'to'],\n    {to: {x: '+=70'}, ease: 'power1.inOut'},\n    '.target',\n    0.5,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {MoveFromTemplate} from \"@/core/build-in/templates/general/MoveFromTemplate\";\n\nexport const moveFromWrapper = new PreviewWrapper(\n    new MoveFromTemplate(),\n    PreviewerType.MOVE,\n    AnimationType.ENTER,\n    ['general', 'any', 'move', 'from'],\n    {x: '+=70', ease: 'power1.inOut'},\n    '.target',\n    0.5,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {MoveToTemplate} from \"@/core/build-in/templates/general/MoveToTemplate\";\n\nexport const moveToWrapper = new PreviewWrapper(\n    new MoveToTemplate(),\n    PreviewerType.MOVE,\n    AnimationType.ENTER,\n    ['general', 'any', 'move', 'to'],\n    {x: '+=70', ease: 'power1.inOut'},\n    '.target',\n    0.5,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {WipeTemplate} from \"@/core/build-in/templates/general/WipeTemplate\";\n\nexport const wipeWrapper = new PreviewWrapper(\n    new WipeTemplate(),\n    PreviewerType.GENERAL,\n    AnimationType.ENTER,\n    ['general', 'any', 'mask', 'enter', 'exit'],\n    {},\n    '.second',\n    0.5,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {TemplateParser} from \"@/core/parser/TemplateParser\";\nimport ZoomEnterTemplate from \"@/core/build-in/templates/general/ZoomEnterTemplate.json5\";\n\nexport const zoomEnterWrapper = new PreviewWrapper(\n    TemplateParser.fromJSON(ZoomEnterTemplate),\n    PreviewerType.GENERAL,\n    AnimationType.ENTER,\n    ['general', 'any', 'zoom', 'enter'],\n    {},\n    '.second,.forth',\n    0.5,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {TemplateParser} from \"@/core/parser/TemplateParser\";\nimport ZoomExitTemplate from \"@/core/build-in/templates/general/ZoomExitTemplate.json5\";\n\nexport const zoomExitWrapper = new PreviewWrapper(\n    TemplateParser.fromJSON(ZoomExitTemplate),\n    PreviewerType.GENERAL,\n    AnimationType.EXIT,\n    ['general', 'any', 'zoom', 'exit'],\n    {},\n    '.second,.forth',\n    0.5,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {ZoomTemplate} from \"@/core/build-in/templates/general/ZoomTemplate\";\n\nexport const zoomWrapper = new PreviewWrapper(\n    new ZoomTemplate(),\n    PreviewerType.GENERAL,\n    AnimationType.OTHER,\n    ['general', 'any', 'zoom', 'enter', 'exit'],\n    {},\n    '.second,.forth',\n    0.5,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {ZoomInThenZoomOutTemplate} from \"@/core/build-in/templates/general/ZoomInThenZoomOutTemplate\";\n\nexport const showAnnoZoomWrapper = new PreviewWrapper(\n    new ZoomInThenZoomOutTemplate(),\n    PreviewerType.GENERAL,\n    AnimationType.HIGHLIGHT,\n    ['annotation', 'zoom', 'show'],\n    {displayTime:0.5},\n    '.second',\n    0.5,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {ShowArrowLabelAnnoTemplate} from \"@/core/build-in/templates/annotation/ShowArrowLabelAnnoTemplate\";\n\nexport const showArrowLabelAnnoWrapper = new PreviewWrapper(\n    new ShowArrowLabelAnnoTemplate(),\n    PreviewerType.ANNOTATION_ARROW,\n    AnimationType.HIGHLIGHT,\n    ['annotation', 'arrow', 'label', 'zoom', 'float', 'show'],\n    {},\n    '.annotation',\n    0.5,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {CameraZoomTemplate} from \"@/core/build-in/templates/camera/CameraZoomTemplate\";\n\nexport const cameraZoomWrapper = new PreviewWrapper(\n    new CameraZoomTemplate(),\n    PreviewerType.CAMERA,\n    AnimationType.HIGHLIGHT,\n    ['camera', 'zoom'],\n    {scaleFactor: 1.5, transformOrigin: '50% 0%'},\n    '*',\n    0.5,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {CameraMoveTemplate} from \"@/core/build-in/templates/camera/CameraMoveTemplate\";\n\nexport const cameraMoveWrapper = new PreviewWrapper(\n    new CameraMoveTemplate(),\n    PreviewerType.CAMERA,\n    AnimationType.HIGHLIGHT,\n    ['camera', 'zoom'],\n    {scaleFactor: 1.5, transformOrigin: '50% 0%'},\n    '*',\n    0.5,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {BarChartEnterTemplate} from \"@/core/build-in/templates/bar-chart/BarChartEnterTemplate\";\n\nexport const barChartEnterWrapper = new PreviewWrapper(\n    new BarChartEnterTemplate(),\n    PreviewerType.BAR_CHART,\n    AnimationType.ENTER,\n    ['chart', 'enter'],\n    {},\n    '.chart',\n    1,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {BarSymbolLabelEnterTemplate} from \"@/core/build-in/templates/bar-chart/BarSymbolLabelEnterTemplate\";\n\nexport const barSymbolLabelEnterWrapper = new PreviewWrapper(\n    new BarSymbolLabelEnterTemplate(),\n    PreviewerType.BAR_CHART,\n    AnimationType.ENTER,\n    ['mark', 'label', 'enter'],\n    {},\n    {selector: '.chart', transform: {type: 'filter', expr: '@datum.name === \"A\"'}},\n    1,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {BarSymbolLabelBounceTemplate} from \"@/core/build-in/templates/bar-chart/BarSymbolLabelBounceTemplate\";\n\nexport const barSymbolLabelBounceWrapper = new PreviewWrapper(\n    new BarSymbolLabelBounceTemplate(),\n    PreviewerType.BAR_CHART,\n    AnimationType.HIGHLIGHT,\n    ['mark', 'label', 'enter'],\n    {},\n    {selector: '.chart', transform: {type: 'filter', expr: '@datum.name === \"A\"'}},\n    1,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {BarEnterTemplate} from \"@/core/build-in/templates/bar-chart/BarEnterTemplate\";\n\nexport const barEnterWrapper = new PreviewWrapper(\n    new BarEnterTemplate(),\n    PreviewerType.BAR_CHART,\n    AnimationType.ENTER,\n    ['chart', 'enter'],\n    {},\n    '.mark',\n    1,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {BarChartWithLegendEnterTemplate} from \"@/core/build-in/templates/bar-chart/BarChartWithLegendEnterTemplate\";\n\nexport const barChartWithLegendEnterWrapper = new PreviewWrapper(\n    new BarChartWithLegendEnterTemplate(),\n    PreviewerType.BAR_CHART_WITH_LEGEND,\n    AnimationType.ENTER,\n    ['chart', 'enter'],\n    {},\n    '.chart',\n    1,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {BarWithLegendEnterTemplate} from \"@/core/build-in/templates/bar-chart/BarWithLegendEnterTemplate\";\n\nexport const barWithLegendEnterWrapper = new PreviewWrapper(\n    new BarWithLegendEnterTemplate(),\n    PreviewerType.BAR_CHART_WITH_LEGEND,\n    AnimationType.ENTER,\n    ['chart', 'enter'],\n    {},\n    '.mark',\n    1,\n);","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\nimport {SyncAnimation} from \"@/core/entities/spec/animation/SyncAnimation\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\n\nexport class ChartWithoutMarkFadeIn2Template extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Axes fade in';\n    this.parameters = [\n      new ParamDefinition('titleStagger', ParamType.NUMBER, false, 0.2),\n      new ParamDefinition('symbolStagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('axisElementStagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n    ]\n  }\n\n  createAnimation() {\n    const titleFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.title,.subtitle,.main-title,.sub-title')\n      .set('stagger', this.getParamValue('titleStagger'));\n\n    const xAxisSymbolFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.x-axis.symbol')\n      .set('stagger', this.getParamValue('symbolStagger'));\n    const xAxisGrow = new TemplateUsage('Grow')\n      .setTarget('.x-axis.domain')\n      .updateSettings({direction: 'left', ease: this.getParamValue('ease')});\n    const yAxisGrow = new TemplateUsage('Grow')\n      .setTarget('.y-axis.domain')\n      .updateSettings({ease: this.getParamValue('ease')});    // default direction is bottom\n\n    const labelFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.axis.label')\n      .set('stagger', this.getParamValue('axisElementStagger'))\n      .updateTiming({offset: 1});\n    const tickFadeIn = new TemplateUsage('Fade-in')\n      .setTarget('.axis.tick')\n      .set('stagger', this.getParamValue('axisElementStagger'))\n      .updateTiming({offset: 1});\n\n    return new SyncAnimation()\n      .append(titleFadeIn)\n      .append(xAxisSymbolFadeIn)\n      .append(xAxisGrow)\n      .append(yAxisGrow)\n      .append(labelFadeIn)\n      .append(tickFadeIn);\n  }\n}\n","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\n// import {TemplateParser} from \"@/core/parser/TemplateParser\";\n// import ChartWithoutMarkFadeInTemplate from \"@/core/build-in/templates/chart/ChartWithoutMarkFadeInTemplate.json5\";\nimport {ChartWithoutMarkFadeIn2Template} from \"@/core/build-in/templates/chart/ChartWithoutMarkFadeIn2Template\";\n\nexport const chartWithoutMarkFadeInWrapper = new PreviewWrapper(\n    // TemplateParser.fromJSON(ChartWithoutMarkFadeInTemplate),\n    new ChartWithoutMarkFadeIn2Template(),\n    PreviewerType.CHART_FRAMEWORK,\n    AnimationType.ENTER,\n    ['chart', 'without-mark', 'enter'],\n    {},\n    '.chart',\n    1,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {ChartWithoutMarkFloatInTemplate} from \"@/core/build-in/templates/chart/ChartWithoutMarkFloatInTemplate\";\n\nexport const chartWithoutMarkFloatInWrapper = new PreviewWrapper(\n    new ChartWithoutMarkFloatInTemplate(),\n    PreviewerType.CHART_FRAMEWORK,\n    AnimationType.ENTER,\n    ['chart', 'without-mark', 'enter'],\n    {},\n    '.chart',\n    1,\n);","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {TemplateUsage} from \"@/core/entities/spec/animation/TemplateUsage\";\nimport {ConcatAnimation} from \"@/core/entities/spec/animation/ConcatAnimation\";\n\nexport class FadeInThenFadeOutTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'Fade-in-then-fade-out';\n    this.parameters = [\n      new ParamDefinition('displayTime', ParamType.STRING, false, 2),\n    ];\n  }\n\n  createAnimation() {\n    const fadeIn = new TemplateUsage('Fade-in');\n    const fadeOut = new TemplateUsage('Fade-out')\n      .updateTiming({offset: this.getParamValue('displayTime')});\n    return new ConcatAnimation([fadeIn, fadeOut]);\n  }\n}\n","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {FadeInThenFadeOutTemplate} from \"@/core/build-in/templates/general/FadeInThenFadeOutTemplate\";\n\nexport const fadeInThenFadeOutWrapper = new PreviewWrapper(\n    new FadeInThenFadeOutTemplate(),\n    PreviewerType.GENERAL,\n    AnimationType.HIGHLIGHT,\n    ['general', 'any', 'opacity', 'show'],\n    {displayTime:0.5},\n    '.second,.forth',\n    0.5,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {CircleTemplate} from \"@/core/build-in/templates/general/CircleTemplate\";\n\nexport const circleWrapper = new PreviewWrapper(\n    new CircleTemplate(),\n    PreviewerType.CHART_FRAMEWORK,\n    AnimationType.HIGHLIGHT,\n    ['general', 'any', 'annotation', 'circle'],\n    {},\n    {selector: '.chart', transform: {type: 'filter', expr: '@datum === 20'}},\n    1,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {ShowPathTemplate} from '@/core/build-in/templates/path/ShowPathTemplate';\n\nexport const showPathWrapper = new PreviewWrapper(\n    new ShowPathTemplate(),\n    PreviewerType.PATH,\n    AnimationType.HIGHLIGHT,\n    ['general', 'any', 'show', 'path', 'enter'],\n    {},\n    '.annotation',\n    0.5,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {HighlightTemplate} from \"@/core/build-in/templates/general/HighlightTemplate\";\n\nexport const highlightWrapper = new PreviewWrapper(\n    new HighlightTemplate(),\n    PreviewerType.GENERAL,\n    AnimationType.HIGHLIGHT,\n    ['general', 'any', 'highlight'],\n    {},\n    '.first,.second',\n    1,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {CircleChartEnterTemplate} from \"@/core/build-in/templates/circle-chart/CircleChartEnterTemplate\";\n\nexport const CircleChartEnterWrapper = new PreviewWrapper(\n    new CircleChartEnterTemplate(),\n    PreviewerType.CIRCLE_CHART,\n    AnimationType.ENTER,\n    [],\n    {},\n    '.chart',\n    1,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {CircleEnterTemplate} from \"@/core/build-in/templates/circle-chart/CircleEnterTemplate\";\n\nexport const CircleEnterWrapper = new PreviewWrapper(\n    new CircleEnterTemplate(),\n    PreviewerType.CIRCLE_CHART,\n    AnimationType.ENTER,\n    [],\n    {},\n    '.mark',\n    1,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {CircleChartWithLegendEnterTemplate} from \"@/core/build-in/templates/circle-chart/CircleChartWithLegendEnterTemplate\";\n\nexport const CircleChartWithLegendEnterWrapper = new PreviewWrapper(\n    new CircleChartWithLegendEnterTemplate(),\n    PreviewerType. CIRCLE_CHART_WITH_LEGEND,\n    AnimationType.ENTER,\n    [],\n    {},\n    '.chart',\n    1,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {CircleWithLegendEnterTemplate} from \"@/core/build-in/templates/circle-chart/CircleWithLegendEnterTemplate\";\n\nexport const CircleWithLegendEnterWrapper = new PreviewWrapper(\n    new CircleWithLegendEnterTemplate(),\n    PreviewerType. CIRCLE_CHART_WITH_LEGEND,\n    AnimationType.ENTER,\n    [],\n    {},\n    '.mark',\n    1,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {PieChartEnterTemplate} from \"@/core/build-in/templates/pie-chart/PieChartEnterTemplate\";\n\nexport const PieChartEnterWrapper = new PreviewWrapper(\n    new PieChartEnterTemplate(),\n    PreviewerType.PIE_CHART,\n    AnimationType.ENTER,\n    [],\n    {},\n    '.third',\n    1,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {PieWithLegendEnterTemplate} from \"@/core/build-in/templates/pie-chart/PieWithLegendEnterTemplate\";\n\nexport const PieWithLegendEnterWrapper = new PreviewWrapper(\n    new PieWithLegendEnterTemplate(),\n    PreviewerType.PIE_WITH_LEGEND,\n    AnimationType.ENTER,\n    [],\n    {},\n    '.third',\n    1,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {HighlightSectorTemplate} from \"@/core/build-in/templates/pie-chart/HighlightSectorTemplate\";\n\nexport const SectorHighlightWrapper = new PreviewWrapper(\n    new HighlightSectorTemplate(),\n    PreviewerType.PIE_CHART,\n    AnimationType.HIGHLIGHT,\n    [],\n    {},\n    '.third',\n    1,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {TitleTemplate} from \"@/core/build-in/templates/text/TitleTemplate\";\n\nexport const TitleWrapper = new PreviewWrapper(\n    new TitleTemplate(),\n    PreviewerType.TITLE,\n    AnimationType.ENTER,\n    [],\n    {},\n    '.chart',\n    1,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\n// import {TemplateParser} from \"@/core/parser/TemplateParser\";\nimport {DynamicNumberTemplate} from \"@/core/build-in/templates/text/DynamicNumberTemplate\";\n\nexport const ShowDynamicNumberWrapper = new PreviewWrapper(\n    // TemplateParser.fromJSON(ShowNumber),\n    new DynamicNumberTemplate(),\n    PreviewerType.TEXT,\n    AnimationType.HIGHLIGHT,\n    ['chart', 'without-mark', 'enter'],\n    {},\n    '.annotation',\n    1,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {LineChartbyLegendTemplate} from \"@/core/build-in/templates/line-chart/LineChartbyLegendTemplate\";\n\n\nexport const LineChartbyLegendEnterWrapper = new PreviewWrapper(\n    new LineChartbyLegendTemplate(),\n    PreviewerType.LINE_CHART_WITH_LEGEND,\n    AnimationType.ENTER,\n    [],\n    {},\n    '.chart',\n    1,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {LinebyLegendTemplate} from \"@/core/build-in/templates/line-chart/LinebyLegendTemplate\";\n\n\nexport const LinebyLegendEnterWrapper = new PreviewWrapper(\n    new LinebyLegendTemplate(),\n    PreviewerType.LINE_CHART_WITH_LEGEND,\n    AnimationType.ENTER,\n    [],\n    {},\n    '.mark',\n    1,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {LineChartbyOrderTemplate} from \"@/core/build-in/templates/line-chart/LineChartbyOrderTemplate\";\n\n\nexport const LineChartbyOrderEnterWrapper = new PreviewWrapper(\n    new LineChartbyOrderTemplate(),\n    PreviewerType.LINE_CHART_WITH_LEGEND,\n    AnimationType.ENTER,\n    [],\n    {},\n    '.chart',\n    1,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {LinebyOrderTemplate} from \"@/core/build-in/templates/line-chart/LinebyOrderTemplate\";\n\n\nexport const LinebyOrderEnterWrapper = new PreviewWrapper(\n    new LinebyOrderTemplate(),\n    PreviewerType.LINE_CHART_WITH_LEGEND,\n    AnimationType.ENTER,\n    [],\n    {},\n    '.mark',\n    1,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {LineChartEnterTemplate} from \"@/core/build-in/templates/line-chart/LineChartEnterTemplate\";\n\nexport const LineChartEnterWrapper = new PreviewWrapper(\n    new LineChartEnterTemplate(),\n    PreviewerType.LINE_CHART,\n    AnimationType.ENTER,\n    [],\n    {},\n    '.chart',\n    1,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {LineEnterTemplate} from \"@/core/build-in/templates/line-chart/LineEnterTemplate\";\n\nexport const LineEnterWrapper = new PreviewWrapper(\n    new LineEnterTemplate(),\n    PreviewerType.LINE_CHART,\n    AnimationType.ENTER,\n    [],\n    {},\n    '.mark',\n    1,\n);","import {PreviewWrapper} from \"@/core/previewer/PreviewWrapper\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport {AnimationType} from \"@/core/const/AnimationType\";\nimport {LineHighlightTemplate} from \"@/core/build-in/templates/line-chart/LineHighlightTemplate\";\n\nexport const LineHighlightWrapper = new PreviewWrapper(\n    new LineHighlightTemplate(),\n    PreviewerType.LINE_CHART_WITH_LEGEND,\n    AnimationType.HIGHLIGHT,\n    [],\n    {},\n    '.first',\n    1,\n);","import { fadeWrapper } from \"@/core/previewer/build-in-wrapper/general/FadeWrapper\";\nimport { basicZoomEnterWrapper } from \"@/core/previewer/build-in-wrapper/general/BasicZoomEnterWrapper\";\nimport { basicZoomExitWrapper } from \"@/core/previewer/build-in-wrapper/general/BasicZoomExitWrapper\";\nimport { basicZoomWrapper } from \"@/core/previewer/build-in-wrapper/general/BasicZoomWrapper\";\nimport { changeColorWrapper } from \"@/core/previewer/build-in-wrapper/general/ChangeColorWrapper\";\nimport { customEffectWrapper } from \"@/core/previewer/build-in-wrapper/general/CustomEffectWrapper\";\nimport { fadeInWrapper } from \"@/core/previewer/build-in-wrapper/general/FadeInWrapper\";\nimport { fadeOutWrapper } from \"@/core/previewer/build-in-wrapper/general/FadeOutWrapper\";\nimport { floatWrapper } from \"@/core/previewer/build-in-wrapper/general/FloatWrapper\";\nimport { flyinWrapper } from \"@/core/previewer/build-in-wrapper/general/FlyinWrapper\";\nimport { growWrapper } from \"@/core/previewer/build-in-wrapper/general/GrowWrapper\";\nimport { moveWrapper } from \"@/core/previewer/build-in-wrapper/general/MoveWrapper\";\nimport { moveFromWrapper } from \"@/core/previewer/build-in-wrapper/general/MoveFromWrapper\";\nimport { moveToWrapper } from \"@/core/previewer/build-in-wrapper/general/MoveToWrapper\";\nimport { wipeWrapper } from \"@/core/previewer/build-in-wrapper/general/WipeWrapper\";\nimport { zoomEnterWrapper } from \"@/core/previewer/build-in-wrapper/general/ZoomEnterWrapper\";\nimport { zoomExitWrapper } from \"@/core/previewer/build-in-wrapper/general/ZoomExitWrapper\";\nimport { zoomWrapper } from \"@/core/previewer/build-in-wrapper/general/ZoomWrapper\";\nimport { showAnnoZoomWrapper } from \"@/core/previewer/build-in-wrapper/annotation/ZoomInThenZoomOutWrapper\";\nimport { showArrowLabelAnnoWrapper } from \"@/core/previewer/build-in-wrapper/annotation/ShowArrowLabelAnnoWrapper\";\nimport { cameraZoomWrapper } from \"@/core/previewer/build-in-wrapper/camera/CameraZoomWrapper\";\nimport { cameraMoveWrapper } from \"@/core/previewer/build-in-wrapper/camera/CameraMoveWrapper\";\n\nimport { barChartEnterWrapper } from \"@/core/previewer/build-in-wrapper/bar-chart/BarChartEnterWrapper\";\nimport { barSymbolLabelEnterWrapper } from \"@/core/previewer/build-in-wrapper/bar-chart/BarSymbolLabelEnterWrapper\";\nimport { barSymbolLabelBounceWrapper } from \"@/core/previewer/build-in-wrapper/bar-chart/BarSymbolLabelBounceWrapper\";\nimport { barEnterWrapper } from \"@/core/previewer/build-in-wrapper/bar-chart/BarEnterWrapper\";\n// import {barChartWithAxisLabelEnterWrapper} from \"@/core/previewer/build-in-wrapper/bar-chart/BarChartWithAxisLabelEnterWrapper\";\nimport { barChartWithLegendEnterWrapper } from \"@/core/previewer/build-in-wrapper/bar-chart/BarChartWithLegendEnterWrapper\";\nimport { barWithLegendEnterWrapper } from \"@/core/previewer/build-in-wrapper/bar-chart/BarWithLegendEnterWrapper\";\n\nimport { chartWithoutMarkFadeInWrapper } from \"@/core/previewer/build-in-wrapper/chart/ChartWithoutMarkFadeInWrapper\";\nimport { chartWithoutMarkFloatInWrapper } from \"@/core/previewer/build-in-wrapper/chart/ChartWithoutMarkFloatInWrapper\";\n\nimport { fadeInThenFadeOutWrapper } from \"@/core/previewer/build-in-wrapper/general/FadeInThenFadeOutWrapper\";\nimport { circleWrapper } from \"@/core/previewer/build-in-wrapper/general/CircleWrapper\";\nimport { showPathWrapper } from \"@/core/previewer/build-in-wrapper/path/ShowPathWrapper\";\nimport { highlightWrapper } from \"@/core/previewer/build-in-wrapper/general/HighlightWrapper\";\n\nimport { CircleChartEnterWrapper } from \"@/core/previewer/build-in-wrapper/circle-chart/CircleChartEnterWrapper\";\nimport { CircleEnterWrapper } from \"@/core/previewer/build-in-wrapper/circle-chart/CircleEnterWrapper\";\nimport { CircleChartWithLegendEnterWrapper } from \"@/core/previewer/build-in-wrapper/circle-chart/CircleChartWithLegendEnterWrapper\";\nimport { CircleWithLegendEnterWrapper } from \"@/core/previewer/build-in-wrapper/circle-chart/CircleWithLegendEnterWrapper\";\n\nimport { PieChartEnterWrapper } from \"@/core/previewer/build-in-wrapper/arc-chart/PieChartEnterWrapper\";\nimport { PieWithLegendEnterWrapper } from \"@/core/previewer/build-in-wrapper/arc-chart/PieWithLegendEnterWrapper\";\nimport { SectorHighlightWrapper } from \"@/core/previewer/build-in-wrapper/arc-chart/SectorHighlightWrapper\";\n\n// import { ShowNumberWrapper } from \"@/core/previewer/build-in-wrapper/Text/ShowNumberWrapper\";\nimport { TitleWrapper } from \"@/core/previewer/build-in-wrapper/Text/TitleWrapper\";\nimport { ShowDynamicNumberWrapper } from \"@/core/previewer/build-in-wrapper/Text/ShowDynamicNumberWrapper\";\n\nimport { LineChartbyLegendEnterWrapper } from \"@/core/previewer/build-in-wrapper/line-chart/LineChartbyLegendEnterWrapper\";\nimport { LinebyLegendEnterWrapper } from \"@/core/previewer/build-in-wrapper/line-chart/LinebyLegendEnterWrapper\";\nimport { LineChartbyOrderEnterWrapper } from \"@/core/previewer/build-in-wrapper/line-chart/LineChartbyOrderEnterWrapper\";\nimport { LinebyOrderEnterWrapper } from \"@/core/previewer/build-in-wrapper/line-chart/LinebyOrderEnterWrapper\";\nimport { LineChartEnterWrapper } from \"@/core/previewer/build-in-wrapper/line-chart/LineChartEnterWrapper\";\nimport { LineEnterWrapper } from \"@/core/previewer/build-in-wrapper/line-chart/LineEnterWrapper\";\nimport { LineHighlightWrapper } from \"@/core/previewer/build-in-wrapper/line-chart/LineHighlightWrapper\";\n\n/**\n * @type {PreviewWrapper[]}\n */\nexport const buildInWrappers = [\n  // general\n  fadeInWrapper,\n  growWrapper,\n  moveToWrapper,\n  moveFromWrapper,\n  floatWrapper,\n  basicZoomWrapper,\n  zoomWrapper,\n  wipeWrapper,\n  changeColorWrapper,\n  showPathWrapper,\n  highlightWrapper,\n  cameraZoomWrapper,\n  cameraMoveWrapper,\n  zoomEnterWrapper,\n  basicZoomExitWrapper,\n  fadeOutWrapper,\n  flyinWrapper,\n\n  // annotation 5\n\n  showArrowLabelAnnoWrapper,\n  circleWrapper,\n  fadeInThenFadeOutWrapper,\n  showAnnoZoomWrapper,\n  ShowDynamicNumberWrapper,\n\n  // chart 10\n  TitleWrapper,\n  chartWithoutMarkFadeInWrapper,\n  chartWithoutMarkFloatInWrapper,\n  barChartEnterWrapper,\n  barChartWithLegendEnterWrapper,\n  CircleChartWithLegendEnterWrapper,\n  LineChartEnterWrapper,\n  LineChartbyLegendEnterWrapper,\n  LineChartbyOrderEnterWrapper,\n  PieChartEnterWrapper,\n\n  // mark\n  barEnterWrapper,\n  barWithLegendEnterWrapper,\n  barSymbolLabelEnterWrapper, // bar with axis label\n  CircleEnterWrapper, // scatter\n  CircleWithLegendEnterWrapper, // scatter with legend\n  CircleChartEnterWrapper, // scatter chart\n  PieWithLegendEnterWrapper,\n  SectorHighlightWrapper,\n  \n  // others not in animation library\n  basicZoomEnterWrapper,\n  customEffectWrapper,\n  fadeWrapper,\n  moveWrapper,\n  zoomExitWrapper, \n  barSymbolLabelBounceWrapper,\n  LineEnterWrapper,\n  LinebyOrderEnterWrapper,\n  LinebyLegendEnterWrapper, \n  LineHighlightWrapper,\n];\n","import {PreviewerType} from \"@/core/const/PreviewerType\";\nimport gsap from 'gsap';\n\nexport class BasePreviewer {\n  /** @type {PreviewerType} */\n  previewerType\n\n  /** @type {PreviewWrapper} */\n  previewWrapper\n  /** @type {import('@/core/entities/context/RenderContext').RenderContext} */\n  previewerContext\n\n  /** @type {gsap.core.Timeline | gsap.core.Tween} */\n  timeline\n\n  constructor() {\n    this.previewerType = PreviewerType.BLANK;\n  }\n\n  /**\n   * @param {PreviewWrapper} previewWrapper\n   * @param {import('@/core/entities/context/RenderContext').RenderContext} renderContext\n   */\n  init(previewWrapper, renderContext) {\n    this.previewerContext = renderContext;\n    this.previewWrapper = previewWrapper;\n  }\n\n  /**\n   * @returns {BasePreviewer}\n   */\n  clone() {\n    return this.constructor();\n  }\n\n  render() {\n    this.clear();\n\n    const {width, height} = this.getCanvasSize();\n    this.previewerContext.rootSel.attr('viewBox', `0 0 ${width} ${height}`);\n\n    this.draw();\n\n    setTimeout(() => this.apply(), 0);\n  }\n\n  /**\n   * Clear the previewer\n   */\n  clear() {\n    this.previewerContext.rootSel.selectAll('*').remove();\n    this.previewerContext.globalSelection = null;\n  }\n\n  draw() {\n    throw 'This previewer is abstract';\n  }\n\n  /**\n   * @returns {{width: number, height: number}}\n   */\n  getCanvasSize() {\n    return {width: 200, height: 150};\n  }\n\n  apply() {\n    if (this.previewerType === PreviewerType.BLANK) {\n      this.timeline = gsap.timeline();\n      return;\n    }\n    this.previewerContext.globalSelection = this.previewerContext.rootSel.selectAll('*');\n    const animation = this.previewWrapper.createPreviewAnimation();\n    const rootContext = this.previewerContext.createRootContext();\n    const context = rootContext.deriveBy(this.previewWrapper.target);\n    this.timeline = animation.create(context);\n    this.timeline\n        .repeat(-1)\n        .repeatDelay(1)\n        .pause()\n        .progress(this.previewWrapper.staticProgress);\n  }\n\n  pause() {\n    if (!this.timeline) {\n      console.warn('Previewer timeline is not ready');\n      return;\n    }\n    this.timeline\n        .pause()\n        .progress(this.previewWrapper.staticProgress);\n  }\n\n  getDuration() {\n    if (!this.timeline) {\n      console.warn('Previewer timeline is not ready');\n      return;\n    }\n    return this.timeline.duration();\n  }\n\n  restart() {\n    if (!this.timeline) {\n      console.warn('Previewer timeline is not ready');\n      return;\n    }\n    this.timeline.restart();\n  }\n}\n","import {BasePreviewer} from \"@/core/previewer/BasePreviewer\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\n\nexport class BlankPreviewer extends BasePreviewer {\n  constructor() {\n    super();\n    this.previewerType = PreviewerType.BLANK;\n  }\n\n  draw() {\n    const rootSel = this.previewerContext.rootSel;\n    const {width, height} = this.getCanvasSize();\n    rootSel.append('text')\n        .attr('transform', 'translate(' + [width / 2, height / 2] + ')')\n        .attr('text-anchor', 'middle')\n        .attr('fill', 'gray')\n        .attr('opacity', 0.5)\n        .style('font-family', 'Verdana, Arial, Helvetica, sans-serif')\n        .text('No preview is available');\n  }\n}\n","import {BasePreviewer} from \"@/core/previewer/BasePreviewer\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport * as d3 from 'd3';\n\nexport class GeneralPreviewer extends BasePreviewer {\n  constructor() {\n    super();\n    this.previewerType = PreviewerType.GENERAL;\n  }\n\n  // barGap*2 barWidth barGap barWidth barGap*2\n  draw() {\n    const rootSel = this.previewerContext.rootSel;\n    const {width, height} = this.getCanvasSize();\n    const barWidth = 25, barGap = 5;\n    const barHeightList = [70, 70];\n    const graphWidth = barHeightList.length * barWidth + (barHeightList.length + 3) * barGap;\n    const left = (width - graphWidth) / 2;\n    const bottom = (height + Math.max(...barHeightList)) / 2;\n    const numTexts = ['first', 'second', 'third', 'forth'];\n\n    const chartGrp = rootSel.append('g')\n        .classed('chart group', true);\n\n    const barGrp = chartGrp.append('g')\n        .classed('mark group', true);\n    barGrp.selectAll('.bar.glyph').data(barHeightList).enter().append('rect')\n        .each(function(d, i) {\n          d3.select(this).classed(`bar glyph ${numTexts[i]}`, true);\n        })\n        .attr('width', barWidth)\n        .attr('height', d => d)\n        .attr('x', (d, i) => left + (i + 2) * barGap + i * barWidth)\n        .attr('y',  (d) => bottom - d)\n        .attr('fill', '#409eff')\n        .attr('rx', 5)\n        .attr('ry', 5);\n\n    // chartGrp.append('line')\n    //     .classed('line axis domain', true)\n    //     .attr('x1', left)\n    //     .attr('y1', bottom)\n    //     .attr('x2', left + graphWidth)\n    //     .attr('y2', bottom)\n    //     .attr('stroke', '#808080')\n    //     .attr('stroke-width', 4)\n    //     .attr('stroke-linecap', 'round');\n  }\n}\n","import {BasePreviewer} from \"@/core/previewer/BasePreviewer\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\n\nexport class MovePreviewer extends BasePreviewer {\n  constructor() {\n    super();\n    this.previewerType = PreviewerType.MOVE;\n  }\n\n  draw() {\n    const rootSel = this.previewerContext.rootSel;\n    const {width, height} = this.getCanvasSize();\n    const radius = 20;\n    const distance = 70;\n\n    rootSel.append('circle')\n        .classed('start circle shadow', true)\n        .attr('fill', '#409eff')\n        .attr('r', radius)\n        .attr('cx', (width - distance) / 2)\n        .attr('cy', height / 2)\n        .attr('opacity', 0.5);\n    rootSel.append('circle')\n        .classed('target circle', true)\n        .attr('fill', '#409eff')\n        .attr('r', radius)\n        .attr('cx', (width - distance) / 2)\n        .attr('cy', height / 2);\n  }\n}\n","import {BasePreviewer} from \"@/core/previewer/BasePreviewer\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport * as d3 from \"d3\";\n\nexport class AnnotationArrowPreviewer extends BasePreviewer {\n  constructor() {\n    super();\n    this.previewerType = PreviewerType.ANNOTATION_ARROW;\n  }\n\n  draw() {\n    const rootSel = this.previewerContext.rootSel;\n    const {width, height} = this.getCanvasSize();\n\n    const barWidth = 25, barGap = 5;\n    const barHeightList = [70, 83, 70, 110];\n    const graphWidth = barHeightList.length * barWidth + (barHeightList.length + 3) * barGap;\n    const left = (width - graphWidth) / 2;\n    const bottom = (height + Math.max(...barHeightList)) / 2;\n    const numTexts = ['first', 'second', 'third', 'forth'];\n\n    const chartGrp = rootSel.append('g')\n        .classed('chart group', true)\n        .attr('transform', 'scale(1.4)')\n        .style('transform-origin', `${width/2}px 0px`);\n\n    const barGrp = chartGrp.append('g')\n        .classed('mark-group', true);\n    barGrp.selectAll('.bar.mark').data(barHeightList).enter().append('rect')\n        .each(function(d, i) {\n          d3.select(this).classed(`mark bar ${numTexts[i]}`, true);\n        })\n        .attr('width', barWidth)\n        .attr('height', d => d)\n        .attr('x', (d, i) => left + (i + 2) * barGap + i * barWidth)\n        .attr('y',  (d) => bottom - d)\n        .attr('fill', '#409eff')\n        .attr('rx', 5)\n        .attr('ry', 5);\n\n    chartGrp.append('line')\n        .classed('line axis domain', true)\n        .attr('x1', left)\n        .attr('y1', bottom)\n        .attr('x2', left + graphWidth)\n        .attr('y2', bottom)\n        .attr('stroke', '#808080')\n        .attr('stroke-width', 4)\n        .attr('stroke-linecap', 'round');\n\n    const annoGrp = chartGrp.append('g')\n        .classed('annotation-group', true);\n\n    const bar1TopX = left + barGap*2 + barWidth/2,\n        bar2TopY = bottom - barHeightList[0];\n\n    annoGrp.append('text')\n        .classed('annotation label', true)\n        .attr('transform', `translate(${bar1TopX},${bar2TopY - 30})`)\n        .style('text-anchor', 'middle')\n        .attr('font-size', 20)\n        .attr('font-weight', 'bold')\n        .attr('font-family', 'system-ui')\n        .attr('fill', '#3b3b3b')\n        .text('21');\n\n    annoGrp.append('g')\n        .classed('annotation arrow', true)\n        .attr('transform', `translate(${bar1TopX - 16},${bar2TopY - 30})`)\n        .append('svg')\n        .attr('width', 30)\n        .attr('height', 30)\n        .attr('viewBox', '0 0 1024 1024')\n        .append('path')\n        .attr('d', 'M819.07712 636.39552l-225.4848 191.488a81.73568 81.73568 0 0 1-53.0432 19.47648 81.77664 81.77664 0 0 1-53.02272-19.47648l-225.4848-191.488a81.92 81.92 0 1 1 106.06592-124.86656l90.5216 76.88192v-329.8304a81.92 81.92 0 0 1 163.84 0v329.8304l90.54208-76.88192a81.89952 81.89952 0 1 1 106.06592 124.86656z')\n        .attr('stroke', '#3b3b3b')\n  }\n}\n","import {BasePreviewer} from \"@/core/previewer/BasePreviewer\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport * as d3 from 'd3';\n\nexport class CameraPreviewer extends BasePreviewer {\n  constructor() {\n    super();\n    this.previewerType = PreviewerType.CAMERA;\n  }\n\n  // barGap*2 barWidth barGap barWidth barGap*2\n  draw() {\n    const rootSel = this.previewerContext.rootSel;\n    const {width, height} = this.getCanvasSize();\n    const barWidth = 25, barGap = 5;\n    const barHeightList = [70, 83, 70, 110];\n    const graphWidth = barHeightList.length * barWidth + (barHeightList.length + 3) * barGap;\n    const left = (width - graphWidth) / 2;\n    const bottom = (height + Math.max(...barHeightList)) / 2;\n    const numTexts = ['first', 'second', 'third', 'forth'];\n\n    const chartGrp = rootSel.append('g')\n        .classed('scene chart-group group container', true);\n\n    const barGrp = chartGrp.append('g')\n        .classed('mark group', true);\n    barGrp.selectAll('.bar.glyph').data(barHeightList).enter().append('rect')\n        .each(function(d, i) {\n          d3.select(this).classed(`chart mark bar ${numTexts[i]}`, true);\n        })\n        .attr('width', barWidth)\n        .attr('height', d => d)\n        .attr('x', (d, i) => left + (i + 2) * barGap + i * barWidth)\n        .attr('y',  (d) => bottom - d)\n        .attr('fill', '#409eff')\n        .attr('rx', 5)\n        .attr('ry', 5);\n\n    chartGrp.append('line')\n        .classed('chart line axis domain', true)\n        .attr('x1', left)\n        .attr('y1', bottom)\n        .attr('x2', left + graphWidth)\n        .attr('y2', bottom)\n        .attr('stroke', '#808080')\n        .attr('stroke-width', 4)\n        .attr('stroke-linecap', 'round');\n\n    // const decorationGrp = rootSel.append('g')\n    //     .classed('decoration group', true);\n    //\n    // const strokeWidth = 6;\n    // const lineLen = 30;   // the half len of each L symbol\n    //\n    // const mask = rootSel.append('defs')\n    //     .append('mask')\n    //     .attr('id', 'decoration-mask')\n    // mask.append('rect')\n    //     .attr('x', 0)\n    //     .attr('y', 0)\n    //     .attr('width', width)\n    //     .attr('height', height)\n    //     .attr('fill', 'white');\n    // mask.append('rect')\n    //     .attr('x', lineLen)\n    //     .attr('y', 0)\n    //     .attr('width', width - 2 * lineLen)\n    //     .attr('height', height);\n    // mask.append('rect')\n    //     .attr('x', 0)\n    //     .attr('y', lineLen)\n    //     .attr('width', width)\n    //     .attr('height', height - 2 * lineLen);\n    //\n    // decorationGrp.append('rect')\n    //     .attr('mask', 'url(#decoration-mask)')\n    //     .attr('x', strokeWidth * 1.2)\n    //     .attr('y', strokeWidth * 1.2)\n    //     .attr('width', width - 2.4 * strokeWidth)\n    //     .attr('height', height - 2.4 * strokeWidth)\n    //     .attr('rx', strokeWidth)\n    //     .attr('ry', strokeWidth)\n    //     .attr('fill', 'none')\n    //     .attr('stroke', '#454545')\n    //     .attr('stroke-width', strokeWidth)\n  }\n}\n","export class ChartLayout {\n  width\n  height\n  topRatio\n  bottomRatio\n  leftRatio\n  rightRatio\n\n  origin\n  top\n  bottom\n  left\n  right\n  chartHeight\n  chartWidth\n\n  constructor({width, height,\n                topRatio, bottomRatio,leftRatio, rightRatio}) {\n    this.width = width\n    this.height = height\n    this.topRatio = topRatio\n    this.bottomRatio = bottomRatio\n    this.leftRatio = leftRatio\n    this.rightRatio = rightRatio\n    this.initLayout()\n  }\n\n  initLayout() {\n    this.origin = {\n      x: this.width * this.leftRatio,\n      y: this.height * (1 - this.bottomRatio)\n    }\n    this.top = this.height * this.topRatio\n    this.bottom = this.height * this.bottomRatio\n    this.left = this.width * this.leftRatio\n    this.right = this.width * this.rightRatio\n\n    this.chartHeight = this.height - this.top - this.bottom\n    this.chartWidth = this.width - this.left - this.right\n  }\n}\n","import {BasePreviewer} from \"@/core/previewer/BasePreviewer\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport * as d3 from 'd3';\nimport {ChartLayout} from \"@/core/utils/ChartLayout\";\n\nexport class BarChartPreviewer extends BasePreviewer {\n  constructor() {\n    super();\n    this.previewerType = PreviewerType.BAR_CHART;\n  }\n\n  draw() {\n    const rootSel = this.previewerContext.rootSel;\n    const {width, height} = this.getCanvasSize();\n\n    const data = [\n      {name: 'A', value: 22},\n      {name: 'B', value: 37},\n    ];\n    const yLabels = [0, 20, 40];\n    const layout = new ChartLayout({\n      width, height,\n      topRatio: 0.30,\n      bottomRatio: 0.17,\n      leftRatio: 0.2,\n      rightRatio: 0.2\n    });\n    const barWidthRatio = 0.3;\n    const barHeightRatio = 0.8;\n\n    const xScale = d3.scaleBand()\n        .domain(data.map(d => d.name))\n        .range([0, layout.chartWidth])\n        .padding(barWidthRatio);\n    const yScale = d3.scaleLinear()\n        .domain([0, d3.max(data, d => d.value) / barHeightRatio])\n        .range([0, layout.chartHeight])\n\n    const chartGrp = rootSel.append('g')\n        .classed('chart-group', true);\n\n    // create axis\n    const axisGrp = chartGrp.append('g')\n        .classed('axis-group', true);\n\n    const xAxisGrp = axisGrp.append('g')\n        .classed('x-axis-group', true)\n        .attr('transform', `translate(${layout.origin.x},${layout.origin.y})`);\n\n    xAxisGrp.selectAll('text').data(data).enter().append('text')\n        .classed(`chart axis x-axis label`, true)\n        .attr('ac-data', d => JSON.stringify(d))\n        .attr('transform', d => `translate(${xScale(d.name) + xScale.bandwidth()/2},0)`)\n        .attr('dy', 18)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text((d, i) => ['A', 'B'][i]);\n\n    xAxisGrp.append('text')\n        .classed(`chart axis x-axis title`, true)\n        .attr('transform', `translate(${layout.chartWidth},0)`)\n        .attr('dx', 10)\n        .attr('dy', 5)\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text('X');\n\n    xAxisGrp.append('line')\n        .classed('chart axis x-axis domain', true)\n        .attr('x1', 0)\n        .attr('y1', 0)\n        .attr('x2', layout.chartWidth)\n        .attr('y2', 0)\n        .attr('stroke', '#808080')\n        .attr('stroke-width', 4)\n        .attr('stroke-linecap', 'round');\n\n    const yAxisGrp = axisGrp.append('g')\n        .classed('y-axis-group', true)\n        .attr('transform', `translate(${layout.origin.x},${layout.top})`);\n\n    yAxisGrp.selectAll('line.tick').data(yLabels.slice(1)).enter().append('line')\n        .classed(`chart axis y-axis tick`, true)\n        .attr('transform', d => `translate(0,${layout.chartHeight - yScale(d)})`)\n        .attr('x1', 0)\n        .attr('y1', 0)\n        .attr('x2', layout.chartWidth)\n        .attr('y2', 0)\n        .attr('stroke', '#d9d9d9')\n        .attr('stroke-width', 4)\n        .attr('stroke-linecap', 'round');\n\n    yAxisGrp.selectAll('text').data(yLabels).enter().append('text')\n        .classed(`chart axis y-axis label`, true)\n        .attr('transform', d => `translate(0,${layout.chartHeight - yScale(d)})`)\n        .attr('dx', -14)\n        .attr('dy', 17/2)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text(d => d);\n\n    yAxisGrp.append('line')\n        .classed('chart axis y-axis domain', true)\n        .attr('x1', 0)\n        .attr('y1', 0)\n        .attr('x2', 0)\n        .attr('y2', layout.chartHeight)\n        .attr('stroke', '#808080')\n        .attr('stroke-width', 4)\n        .attr('stroke-linecap', 'round');\n\n    yAxisGrp.append('text')\n        .classed(`chart axis y-axis title`, true)\n        .attr('dy', -5)\n        .attr('dx', -8)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text('Y');\n\n    // create bars\n    const markGrp = chartGrp.append('g')\n        .classed('mark-group', true)\n        .attr('transform', `translate(${layout.left},${layout.top})`)\n    markGrp.selectAll('rect').data(data).enter().append('rect')\n        .classed('chart mark bar', true)\n        .attr('ac-data', d => JSON.stringify(d))\n        .attr('width', xScale.bandwidth())\n        .attr('height', d => yScale(d.value))\n        .attr('x', d => xScale(d.name))\n        .attr('y',  d => layout.chartHeight - yScale(d.value))\n        .attr('fill', '#409eff')\n        .attr('rx', 5)\n        .attr('ry', 5);\n    markGrp.selectAll('text').data(data).enter().append('text')\n        .attr('ac-data', d => JSON.stringify(d))\n        .classed('chart mark label bar-label', true)\n        .attr('transform', d =>\n            `translate(${xScale(d.name) + xScale.bandwidth()/2},${layout.chartHeight - yScale(d.value)})`)\n        .attr('dy', -10)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text(d => d.value);\n\n    // create title\n    const titleGrp = chartGrp.append('g')\n        .classed('title-group', true)\n    titleGrp.append('text')\n        .classed('chart title main-title', true)\n        .attr('transform', `translate(${layout.left + layout.chartWidth / 2},${layout.top})`)\n        .attr('dy', -20)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text('Bar Chart');\n  }\n}\n","import {BasePreviewer} from \"@/core/previewer/BasePreviewer\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport * as d3 from 'd3';\nimport {ChartLayout} from \"@/core/utils/ChartLayout\";\n\nexport class BarChartWithLegendPreviewer extends BasePreviewer {\n  constructor() {\n    super();\n    this.previewerType = PreviewerType.BAR_CHART_WITH_LEGEND;\n  }\n\n  draw() {\n    const rootSel = this.previewerContext.rootSel;\n    const {width, height} = this.getCanvasSize();\n\n    const data = [\n      {name: 'A', value: 22},\n      {name: 'B', value: 37},\n    ];\n\n    const data0 = [\n        {name: 'A', value: 30},\n        {name: 'B', value: 15},\n    ];\n    const yLabels = [0, 20, 40];\n    const layout = new ChartLayout({\n      width, height,\n      topRatio: 0.30,\n      bottomRatio: 0.17,\n      leftRatio: 0.2,\n      rightRatio: 0.2\n    });\n    const barWidthRatio = 0.3;\n    const barHeightRatio = 0.8;\n\n    const xScale = d3.scaleBand()\n        .domain(data.map(d => d.name))\n        .range([0, layout.chartWidth])\n        .padding(barWidthRatio);\n    const yScale = d3.scaleLinear()\n        .domain([0, d3.max(data, d => d.value) / barHeightRatio])\n        .range([0, layout.chartHeight])\n\n    const chartGrp = rootSel.append('g')\n        .classed('chart-group', true);\n\n    // create axis\n    const axisGrp = chartGrp.append('g')\n        .classed('axis-group', true);\n\n    const xAxisGrp = axisGrp.append('g')\n        .classed('x-axis-group', true)\n        .attr('transform', `translate(${layout.origin.x},${layout.origin.y})`);\n\n    xAxisGrp.selectAll('text').data(data).enter().append('text')\n        .classed(`chart axis x-axis label`, true)\n        .attr('ac-data', d => JSON.stringify(d))\n        .attr('transform', d => `translate(${xScale(d.name) + xScale.bandwidth()/2},0)`)\n        .attr('dy', 18)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text((d, i) => ['A', 'B'][i]);\n\n    xAxisGrp.append('text')\n        .classed(`chart axis x-axis title`, true)\n        .attr('transform', `translate(${layout.chartWidth},0)`)\n        .attr('dx', 10)\n        .attr('dy', 5)\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text('X');\n\n    xAxisGrp.append('line')\n        .classed('chart axis x-axis domain', true)\n        .attr('x1', 0)\n        .attr('y1', 0)\n        .attr('x2', layout.chartWidth)\n        .attr('y2', 0)\n        .attr('stroke', '#808080')\n        .attr('stroke-width', 4)\n        .attr('stroke-linecap', 'round');\n\n    const yAxisGrp = axisGrp.append('g')\n        .classed('y-axis-group', true)\n        .attr('transform', `translate(${layout.origin.x},${layout.top})`);\n\n    yAxisGrp.selectAll('line.tick').data(yLabels.slice(1)).enter().append('line')\n        .classed(`chart axis y-axis tick`, true)\n        .attr('transform', d => `translate(0,${layout.chartHeight - yScale(d)})`)\n        .attr('x1', 0)\n        .attr('y1', 0)\n        .attr('x2', layout.chartWidth)\n        .attr('y2', 0)\n        .attr('stroke', '#d9d9d9')\n        .attr('stroke-width', 4)\n        .attr('stroke-linecap', 'round');\n\n    yAxisGrp.selectAll('text').data(yLabels).enter().append('text')\n        .classed(`chart axis y-axis label`, true)\n        .attr('transform', d => `translate(0,${layout.chartHeight - yScale(d)})`)\n        .attr('dx', -14)\n        .attr('dy', 17/2)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text(d => d);\n\n    yAxisGrp.append('line')\n        .classed('chart axis y-axis domain', true)\n        .attr('x1', 0)\n        .attr('y1', 0)\n        .attr('x2', 0)\n        .attr('y2', layout.chartHeight)\n        .attr('stroke', '#808080')\n        .attr('stroke-width', 4)\n        .attr('stroke-linecap', 'round');\n\n    yAxisGrp.append('text')\n        .classed(`chart axis y-axis title`, true)\n        .attr('dy', -5)\n        .attr('dx', -8)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text('Y');\n\n    // create bars\n    const markGrp = chartGrp.append('g')\n        .classed('mark-group', true)\n        .attr('transform', `translate(${layout.left},${layout.top})`)\n    const markGrp1 = markGrp.append('g')\n        .classed('mark-1-group', true)\n    markGrp1.selectAll('rect').data(data).enter().append('rect')\n        .classed('chart mark bar', true)\n        .attr('ac-data', d => JSON.stringify(d))\n        .attr('width', xScale.bandwidth()/2)\n        .attr('height', d => yScale(d.value))\n        .attr('x', d => xScale(d.name)-1)\n        .attr('y',  d => layout.chartHeight - yScale(d.value))\n        .attr('fill', '#409eff')\n        .attr('rx', 5)\n        .attr('ry', 5);\n    markGrp1.selectAll('text').data(data).enter().append('text')\n        .attr('ac-data', d => JSON.stringify(d))\n        .classed('chart mark label bar-label', true)\n        .attr('transform', d =>`translate(${xScale(d.name) + xScale.bandwidth()/4-3},${layout.chartHeight - yScale(d.value)})`)\n        .attr('dy', -4)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text(d => d.value);\n\n    const markGrp2 = markGrp.append('g')\n        .classed('mark-2-group', true)\n    markGrp2.selectAll('rect').data(data0).enter().append('rect')\n        .classed('chart mark bar', true)\n        .attr('ac-data', d => JSON.stringify(d))\n        .attr('width', xScale.bandwidth()/2)\n        .attr('height', d => yScale(d.value))\n        .attr('x', d => xScale(d.name)+xScale.bandwidth()/2+1)\n        .attr('y',  d => layout.chartHeight - yScale(d.value))\n        .attr('fill', '#9ecae1')\n        .attr('rx', 5)\n        .attr('ry', 5);\n    markGrp2.selectAll('text').data(data0).enter().append('text')\n        .attr('ac-data', d => JSON.stringify(d))\n        .classed('chart mark label bar-label', true)\n        .attr('transform', d =>`translate(${xScale(d.name) + xScale.bandwidth()*0.75+1},${layout.chartHeight - yScale(d.value)})`)\n        .attr('dy', -4)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text(d => d.value);\n\n    // create legend\n    const legendGrp = chartGrp.append('g')\n    .classed('mark-group', true)\n    // .attr('transform', `translate(${layout.right},${layout.top})`);\n\n    legendGrp.append('text')\n        .classed(`chart mark legend`, true)\n        .attr('transform', `translate(${width-layout.right},${layout.top})`)\n        .attr('dx', 0)\n        .attr('dy', 8)\n        .attr('font-weight', 'bold')\n        .attr('fill', '#409eff')\n        .text('ta');\n\n    legendGrp.append('rect')\n        .classed('chart mark legend', true)\n        .attr('transform', `translate(${width-layout.right},${layout.top})`)\n        .attr('width', 18)\n        .attr('height', 8)\n        .attr('x', 20)\n        .attr('y', 0)\n        .attr('fill', '#409eff');\n    \n    legendGrp.append('text')\n        .classed(`chart mark legend`, true)\n        .attr('transform', `translate(${width-layout.right},${layout.top})`)\n        .attr('dx', 0)\n        .attr('dy', 26)\n        .attr('font-weight', 'bold')\n        .attr('fill', '#9ecae1')\n        .text('tb');\n\n    legendGrp.append('rect')\n        .classed('chart mark legend', true)\n        .attr('transform', `translate(${width-layout.right},${layout.top})`)\n        .attr('width', 18)\n        .attr('height', 8)\n        .attr('x', 20)\n        .attr('y', 18)\n        .attr('fill', '#9ecae1');\n\n    // create title\n    const titleGrp = chartGrp.append('g')\n        .classed('title-group', true)\n    titleGrp.append('text')\n        .classed('chart title main-title', true)\n        .attr('transform', `translate(${layout.left + layout.chartWidth / 2},${layout.top})`)\n        .attr('dy', -20)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text('Bar Chart with Legend');\n  }\n}\n","import {BasePreviewer} from \"@/core/previewer/BasePreviewer\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport * as d3 from 'd3';\nimport {ChartLayout} from \"@/core/utils/ChartLayout\";\n\nexport class ChartFrameworkPreviewer extends BasePreviewer {\n  constructor() {\n    super();\n    this.previewerType = PreviewerType.CHART_FRAMEWORK;\n  }\n\n  draw() {\n    const rootSel = this.previewerContext.rootSel;\n    const {width, height} = this.getCanvasSize();\n\n    const data = [\n      {name: 'A', value: 22},\n      {name: 'B', value: 37},\n    ];\n    const yLabels = [0, 20, 40];\n    const layout = new ChartLayout({\n      width, height,\n      topRatio: 0.30,\n      bottomRatio: 0.17,\n      leftRatio: 0.2,\n      rightRatio: 0.2\n    });\n    const barWidthRatio = 0.3;\n    const barHeightRatio = 0.8;\n\n    const xScale = d3.scaleBand()\n        .domain(data.map(d => d.name))\n        .range([0, layout.chartWidth])\n        .padding(barWidthRatio);\n    const yScale = d3.scaleLinear()\n        .domain([0, d3.max(data, d => d.value) / barHeightRatio])\n        .range([0, layout.chartHeight])\n\n    const chartGrp = rootSel.append('g')\n        .classed('chart-group', true);\n\n    // create axis\n    const axisGrp = chartGrp.append('g')\n        .classed('axis-group', true);\n\n    const xAxisGrp = axisGrp.append('g')\n        .classed('x-axis-group', true)\n        .attr('transform', `translate(${layout.origin.x},${layout.origin.y})`);\n\n    xAxisGrp.selectAll('text').data(data).enter().append('text')\n        .classed(`chart axis x-axis label`, true)\n        .attr('ac-data', d => JSON.stringify(d))\n        .attr('transform', d => `translate(${xScale(d.name) + xScale.bandwidth()/2},0)`)\n        .attr('dy', 18)\n        .attr('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text((d, i) => ['A', 'B'][i]);\n\n    xAxisGrp.append('text')\n        .classed(`chart axis x-axis title`, true)\n        .attr('transform', `translate(${layout.chartWidth},0)`)\n        .attr('dx', 10)\n        .attr('dy', 5)\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text('X');\n\n    xAxisGrp.append('line')\n        .classed('chart axis x-axis domain', true)\n        .attr('x1', 0)\n        .attr('y1', 0)\n        .attr('x2', layout.chartWidth)\n        .attr('y2', 0)\n        .attr('stroke', '#808080')\n        .attr('stroke-width', 4)\n        .attr('stroke-linecap', 'round');\n\n    const yAxisGrp = axisGrp.append('g')\n        .classed('y-axis-group', true)\n        .attr('transform', `translate(${layout.origin.x},${layout.top})`);\n\n    yAxisGrp.selectAll('line.tick').data(yLabels.slice(1)).enter().append('line')\n        .classed(`chart axis y-axis tick`, true)\n        .attr('transform', d => `translate(0,${layout.chartHeight - yScale(d)})`)\n        .attr('x1', 0)\n        .attr('y1', 0)\n        .attr('x2', layout.chartWidth)\n        .attr('y2', 0)\n        .attr('stroke', '#d9d9d9')\n        .attr('stroke-width', 4)\n        .attr('stroke-linecap', 'round');\n\n    yAxisGrp.selectAll('text').data(yLabels).enter().append('text')\n        .classed(`chart axis y-axis label`, true)\n        .attr('ac-data', d => d)\n        .attr('transform', d => `translate(0,${layout.chartHeight - yScale(d)})`)\n        .attr('dx', -14)\n        .attr('dy', 17/2)\n        .attr('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text(d => d);\n\n    yAxisGrp.append('line')\n        .classed('chart axis y-axis domain', true)\n        .attr('x1', 0)\n        .attr('y1', 0)\n        .attr('x2', 0)\n        .attr('y2', layout.chartHeight)\n        .attr('stroke', '#808080')\n        .attr('stroke-width', 4)\n        .attr('stroke-linecap', 'round');\n\n    yAxisGrp.append('text')\n        .classed(`chart axis y-axis title`, true)\n        .attr('dy', -5)\n        .attr('dx', -8)\n        .attr('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text('Y');\n\n    // // create bars\n    // const markGrp = chartGrp.append('g')\n    //     .classed('mark-group', true)\n    //     .attr('transform', `translate(${layout.left},${layout.top})`)\n    // markGrp.selectAll('rect').data(data).enter().append('rect')\n    //     .classed('chart mark bar', true)\n    //     .attr('ac-data', d => JSON.stringify(d))\n    //     .attr('width', xScale.bandwidth())\n    //     .attr('height', d => yScale(d.value))\n    //     .attr('x', d => xScale(d.name))\n    //     .attr('y',  d => layout.chartHeight - yScale(d.value))\n    //     .attr('fill', '#d9d9d9')\n    //     .attr('rx', 5)\n    //     .attr('ry', 5);\n    // markGrp.selectAll('text').data(data).enter().append('text')\n    //     .attr('ac-data', d => JSON.stringify(d))\n    //     .classed('chart mark label bar-label', true)\n    //     .attr('transform', d =>\n    //         `translate(${xScale(d.name) + xScale.bandwidth()/2},${layout.chartHeight - yScale(d.value)})`)\n    //     .attr('dy', -10)\n    //     .style('text-anchor', 'middle')\n    //     .attr('font-weight', 'bold')\n    //     .attr('fill', '#d9d9d9')\n    //     .text(d => d.value);\n\n    // create title\n    const titleGrp = chartGrp.append('g')\n        .classed('title-group', true)\n    titleGrp.append('text')\n        .classed('chart title main-title', true)\n        .attr('transform', `translate(${layout.left + layout.chartWidth / 2},${layout.top})`)\n        .attr('dy', -20)\n        .attr('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text('Chart Title');\n  }\n}\n","import {BasePreviewer} from \"@/core/previewer/BasePreviewer\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport * as d3 from 'd3';\nimport {ChartLayout} from \"@/core/utils/ChartLayout\";\n\nexport class CirclePreviewer extends BasePreviewer {\n  constructor() {\n    super();\n    this.previewerType = PreviewerType.CIRCLE_CHART;\n  }\n\n  draw() {\n    const rootSel = this.previewerContext.rootSel;\n    const {width, height} = this.getCanvasSize();\n\n    const scatterdata=[\n        [22,11],\n        [16,39],\n        [22,20],\n        [5,5],\n        [29,39],\n        [30,20],\n        [10,18],\n    ];\n    const xLabels = [0, 15, 30];\n    const yLabels = [20, 40];\n    const layout = new ChartLayout({\n      width, height,\n      topRatio: 0.30,\n      bottomRatio: 0.17,\n      leftRatio: 0.2,\n      rightRatio: 0.2\n    });\n    const barWidthRatio = 0.8;\n    const barHeightRatio = 0.8;\n\n    const xScale = d3.scaleLinear()\n        .domain([0, d3.max(scatterdata, d => d[0]) / barWidthRatio])\n        .range([0, layout.chartWidth])\n        // .padding(barWidthRatio);\n    const yScale = d3.scaleLinear()\n        .domain([0, d3.max(scatterdata, d => d[1]) / barHeightRatio])\n        .range([0, layout.chartHeight])\n\n    const chartGrp = rootSel.append('g')\n        .classed('chart-group', true);\n\n    // create axis\n    const axisGrp = chartGrp.append('g')\n        .classed('axis-group', true);\n\n    const xAxisGrp = axisGrp.append('g')\n        .classed('x-axis-group', true)\n        .attr('transform', `translate(${layout.origin.x},${layout.origin.y})`);\n\n    xAxisGrp.selectAll('text').data(xLabels).enter().append('text')\n        .classed(`chart axis y-axis label`, true)\n        .attr('transform', d => `translate(${xScale(d)},0)`)\n        .attr('dx', 0)\n        .attr('dy', 17)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text(d => d);\n\n    xAxisGrp.append('text')\n        .classed(`chart axis x-axis title`, true)\n        .attr('transform', `translate(${layout.chartWidth},0)`)\n        .attr('dx', 10)\n        .attr('dy', 5)\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text('X');\n\n    xAxisGrp.append('line')\n        .classed('chart axis x-axis domain', true)\n        .attr('x1', 0)\n        .attr('y1', 0)\n        .attr('x2', layout.chartWidth)\n        .attr('y2', 0)\n        .attr('stroke', '#808080')\n        .attr('stroke-width', 4)\n        .attr('stroke-linecap', 'round');\n\n    const yAxisGrp = axisGrp.append('g')\n        .classed('y-axis-group', true)\n        .attr('transform', `translate(${layout.origin.x},${layout.top})`);\n\n    yAxisGrp.selectAll('text').data(yLabels).enter().append('text')\n        .classed(`chart axis y-axis label`, true)\n        .attr('transform', d => `translate(0,${layout.chartHeight - yScale(d)})`)\n        .attr('dx', -14)\n        .attr('dy', 0)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text(d => d);\n\n    yAxisGrp.append('line')\n        .classed('chart axis y-axis domain', true)\n        .attr('x1', 0)\n        .attr('y1', 0)\n        .attr('x2', 0)\n        .attr('y2', layout.chartHeight)\n        .attr('stroke', '#808080')\n        .attr('stroke-width', 4)\n        .attr('stroke-linecap', 'round');\n\n    yAxisGrp.append('text')\n        .classed(`chart axis y-axis title`, true)\n        .attr('dy', -10)\n        .attr('dx', -5)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text('Y');\n\n    // create scatter\n    const markGrp = chartGrp.append('g')\n        .classed('mark-group', true)\n        .attr('transform', `translate(${layout.left},${layout.top})`)\n    markGrp.selectAll('circle').data(scatterdata).enter().append('circle')\n        .classed('chart mark circle', true)\n        .attr('cx', d => xScale(d[0]))\n        .attr('cy', d => layout.chartHeight-yScale(d[1]))\n        .attr('r', 5)\n        .attr('fill', '#409eff');\n\n    // create title\n    const titleGrp = chartGrp.append('g')\n        .classed('title-group', true)\n    titleGrp.append('text')\n        .classed('chart title main-title', true)\n        .attr('transform', `translate(${layout.left + layout.chartWidth / 2},${layout.top})`)\n        .attr('dy', -20)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text('Scatter Chart');\n  }\n}\n","import {BasePreviewer} from \"@/core/previewer/BasePreviewer\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport * as d3 from 'd3';\nimport {ChartLayout} from \"@/core/utils/ChartLayout\";\n\nexport class CircleWithLegendPreviewer extends BasePreviewer {\n  constructor() {\n    super();\n    this.previewerType = PreviewerType. CIRCLE_CHART_WITH_LEGEND;\n  }\n\n  draw() {\n    const rootSel = this.previewerContext.rootSel;\n    const {width, height} = this.getCanvasSize();\n\n    // const data = [\n    //   {name: 'A', value: 22},\n    //   {name: 'B', value: 37},\n    //   {name: 'C', value: 30},\n    //   {name: 'D', value: 15},\n    // ];\n\n    const scatterdata=[\n        [22,11],\n        [16,39],\n        [22,20],\n        [5,5],\n        [29,39],\n        [30,20],\n        [10,18],\n    ];\n    const scatterdata1=[\n        [29,39],\n        [30,20],\n        [10,18],\n    ];\n    const scatterdata2=[\n        [22,11],\n        [16,39],\n        [22,20],\n        [5,5],\n    ];\n    const xLabels = [0, 15, 30];\n    const yLabels = [20, 40];\n    const layout = new ChartLayout({\n      width, height,\n      topRatio: 0.30,\n      bottomRatio: 0.17,\n      leftRatio: 0.2,\n      rightRatio: 0.35\n    });\n    const barWidthRatio = 0.8;\n    const barHeightRatio = 0.8;\n\n    const xScale = d3.scaleLinear()\n        .domain([0, d3.max(scatterdata, d => d[0]) / barWidthRatio])\n        .range([0, layout.chartWidth])\n        // .padding(barWidthRatio);\n    const yScale = d3.scaleLinear()\n        .domain([0, d3.max(scatterdata, d => d[1]) / barHeightRatio])\n        .range([0, layout.chartHeight])\n\n    const chartGrp = rootSel.append('g')\n        .classed('chart-group', true);\n\n    // create legend\n    const legendGrp = chartGrp.append('g')\n        .classed('mark-group', true)\n        // .attr('transform', `translate(${layout.right},${layout.top})`);\n\n    legendGrp.append('text')\n        .classed(`chart mark legend`, true)\n        .attr('transform', `translate(${width-layout.right},${layout.top})`)\n        .attr('dx', 0)\n        .attr('dy', 8)\n        .attr('font-weight', 'bold')\n        .attr('fill', '#409eff')\n        .text('ta');\n\n    legendGrp.append('rect')\n        .classed('chart mark legend', true)\n        .attr('transform', `translate(${width-layout.right},${layout.top})`)\n        .attr('width', 18)\n        .attr('height', 8)\n        .attr('x', 20)\n        .attr('y', 0)\n        .attr('fill', '#409eff');\n    \n    legendGrp.append('text')\n        .classed(`chart mark legend`, true)\n        .attr('transform', `translate(${width-layout.right},${layout.top})`)\n        .attr('dx', 0)\n        .attr('dy', 26)\n        .attr('font-weight', 'bold')\n        .attr('fill', '#9ecae1')\n        .text('tb');\n\n    legendGrp.append('rect')\n        .classed('chart mark legend', true)\n        .attr('transform', `translate(${width-layout.right},${layout.top})`)\n        .attr('width', 18)\n        .attr('height', 8)\n        .attr('x', 20)\n        .attr('y', 18)\n        .attr('fill', '#9ecae1');\n\n    // create axis\n    const axisGrp = chartGrp.append('g')\n        .classed('axis-group', true);\n\n    const xAxisGrp = axisGrp.append('g')\n        .classed('x-axis-group', true)\n        .attr('transform', `translate(${layout.origin.x},${layout.origin.y})`);\n\n    xAxisGrp.selectAll('text').data(xLabels).enter().append('text')\n        .classed(`chart axis y-axis label`, true)\n        .attr('transform', d => `translate(${xScale(d)},0)`)\n        .attr('dx', 0)\n        .attr('dy', 17)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text(d => d);\n\n    xAxisGrp.append('text')\n        .classed(`chart axis x-axis title`, true)\n        .attr('transform', `translate(${layout.chartWidth},0)`)\n        .attr('dx', 10)\n        .attr('dy', 5)\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text('X');\n\n    xAxisGrp.append('line')\n        .classed('chart axis x-axis domain', true)\n        .attr('x1', 0)\n        .attr('y1', 0)\n        .attr('x2', layout.chartWidth)\n        .attr('y2', 0)\n        .attr('stroke', '#808080')\n        .attr('stroke-width', 4)\n        .attr('stroke-linecap', 'round');\n\n    const yAxisGrp = axisGrp.append('g')\n        .classed('y-axis-group', true)\n        .attr('transform', `translate(${layout.origin.x},${layout.top})`);\n\n    // yAxisGrp.selectAll('line.tick').data(yLabels.slice(1)).enter().append('line')\n    //     .classed(`chart axis y-axis tick`, true)\n    //     .attr('transform', d => `translate(0,${layout.chartHeight - yScale(d)})`)\n    //     .attr('x1', 0)\n    //     .attr('y1', 0)\n    //     .attr('x2', layout.chartWidth)\n    //     .attr('y2', 0)\n    //     .attr('stroke', '#d9d9d9')\n    //     .attr('stroke-width', 4)\n    //     .attr('stroke-linecap', 'round');\n\n    yAxisGrp.selectAll('text').data(yLabels).enter().append('text')\n        .classed(`chart axis y-axis label`, true)\n        .attr('transform', d => `translate(0,${layout.chartHeight - yScale(d)})`)\n        .attr('dx', -14)\n        .attr('dy', 0)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text(d => d);\n\n    yAxisGrp.append('line')\n        .classed('chart axis y-axis domain', true)\n        .attr('x1', 0)\n        .attr('y1', 0)\n        .attr('x2', 0)\n        .attr('y2', layout.chartHeight)\n        .attr('stroke', '#808080')\n        .attr('stroke-width', 4)\n        .attr('stroke-linecap', 'round');\n\n    yAxisGrp.append('text')\n        .classed(`chart axis y-axis title`, true)\n        .attr('dy', -10)\n        .attr('dx', -5)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text('Y');\n\n    // create scatter\n    const markGrp = chartGrp.append('g')\n        .classed('mark-group', true)\n    \n    const tamarkGrp = markGrp.append('g')\n        .classed('x-axis-group', true)\n        .attr('transform', `translate(${layout.left},${layout.top})`)\n\n    tamarkGrp.selectAll('circle').data(scatterdata1).enter().append('circle')\n        .classed('chart mark circle', true)\n        .attr('cx', d => xScale(d[0]))\n        .attr('cy', d => layout.chartHeight-yScale(d[1]))\n        .attr('r', 5)\n        .attr('fill', '#409eff');\n\n    const tbmarkGrp = markGrp.append('g')\n        .classed('x-axis-group', true)\n        .attr('transform', `translate(${layout.left},${layout.top})`)\n\n    tbmarkGrp.selectAll('circle').data(scatterdata2).enter().append('circle')\n        .classed('chart mark circle', true)\n        .attr('cx', d => xScale(d[0]))\n        .attr('cy', d => layout.chartHeight-yScale(d[1]))\n        .attr('r', 5)\n        .attr('fill', '#9ecae1');\n    // markGrp.selectAll('text').data(data).enter().append('text')\n    //     .attr('ac-data', d => JSON.stringify(d))\n    //     .classed('chart mark label bar-label', true)\n    //     .attr('transform', d =>\n    //         `translate(${xScale(d.name) + xScale.bandwidth()/2},${layout.chartHeight - yScale(d.value)})`)\n    //     .attr('dy', -10)\n    //     .style('text-anchor', 'middle')\n    //     .attr('font-weight', 'bold')\n    //     .attr('fill', '#3d3d3d')\n    //     .text(d => d.value);\n\n    // create title\n    const titleGrp = chartGrp.append('g')\n        .classed('title-group', true)\n    titleGrp.append('text')\n        .classed('chart title main-title', true)\n        .attr('transform', `translate(${layout.left + layout.chartWidth / 2},${layout.top})`)\n        .attr('dy', -30)\n        .attr('dx', 5)\n        .attr('font-size', 13)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text('Scatter Chart with Legend');\n  }\n}\n","import {BasePreviewer} from \"@/core/previewer/BasePreviewer\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport * as d3 from 'd3';\n// import {ChartLayout} from \"@/core/utils/ChartLayout\";\n\nexport class ArcPreviewer extends BasePreviewer {\n  constructor() {\n    super();\n    this.previewerType = PreviewerType.PIE_CHART;\n  }\n\n  draw() {\n    const rootSel = this.previewerContext.rootSel;\n    const {width, height} = this.getCanvasSize();\n\n    const  dataset = [ 20 , 25, 55] \n    const outerRadius = 55; \n    const innerRadius = 20; \n\n    // const layout = new ChartLayout({\n    //   width, height,\n    //   topRatio: 0.30,\n    //   bottomRatio: 0.17,\n    //   leftRatio: 0.2,\n    //   rightRatio: 0.35\n    // });\n\n    const piedata = d3.pie()(dataset);\n    const colorlist = ['#409eff','#9ecae1','#2171b5'];\n    const color = d3.scaleOrdinal(colorlist);\n    const numTexts = ['first', 'second', 'third'];\n\n    const arc = d3.arc()\n        .innerRadius(innerRadius)\n        .outerRadius(outerRadius)\n        .padAngle(0.02);\n\n    const chartGrp = rootSel.append('g')\n        .classed('chart-group', true);\n\n    const arcs = chartGrp.append('g')\n        .classed('mark-group', true)\n\n    arcs.selectAll('path').data(piedata).enter().append('path')\n        .each(function(d, i) {\n          d3.select(this).classed(`chart mark sector sector-wheel ${numTexts[i]}`, true);\n        })\n        .attr('transform', 'translate(' + (width / 2) + ',' + (height / 2+10)+')')\n        .attr('fill', (d, i) => {\n            return color(i);\n        })\n        .attr('d', (d) => {\n            return arc(d);\n        });\n\n    const arcslabel = chartGrp.append('g')\n        .classed('label-group', true)\n\n    arcslabel.selectAll('text').data(piedata).enter().append('text')\n        .each(function(d, i) {\n          d3.select(this).classed(`cchart label sector-label ${numTexts[i]}`, true);\n        })\n        // .classed('chart label sector-label', true)\n        .attr('transform', (d) => {\n          return 'translate(' + arc.centroid(d) + ')';\n        })\n        .attr('dx', 100)\n        .attr('dy', 90)\n        .attr('fill', 'white')\n        .attr('text-anchor', 'middle')\n        .text((d) => {\n          return d.data + '%';\n        });\n\n\n    // create title\n    // const titleGrp = chartGrp.append('g')\n    //     .classed('title-group', true)\n    // titleGrp.append('text')\n    //     .classed('chart title main-title', true)\n    //     .attr('transform', `translate(${layout.left + layout.chartWidth / 2},${layout.top})`)\n    //     .attr('dy', -30)\n    //     .attr('dx', 5)\n    //     .attr('font-size', 13)\n    //     .style('text-anchor', 'middle')\n    //     .attr('font-weight', 'bold')\n    //     .attr('fill', '#3d3d3d')\n    //     .text('Arc Chart');\n  }\n}\n","import {BasePreviewer} from \"@/core/previewer/BasePreviewer\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport * as d3 from 'd3';\nimport {ChartLayout} from \"@/core/utils/ChartLayout\";\n\nexport class ArcWithLegendPreviewer extends BasePreviewer {\n  constructor() {\n    super();\n    this.previewerType = PreviewerType.PIE_WITH_LEGEND;\n  }\n\n  draw() {\n    const rootSel = this.previewerContext.rootSel;\n    const {width, height} = this.getCanvasSize();\n\n    const  dataset = [ 20 , 25, 55] \n    const outerRadius = 55; \n    const innerRadius = 20; \n\n    const layout = new ChartLayout({\n      width, height,\n      topRatio: 0.30,\n      bottomRatio: 0.17,\n      leftRatio: 0.2,\n      rightRatio: 0.35\n    });\n\n    const piedata = d3.pie()(dataset);\n    const colorlist = ['#409eff','#9ecae1','#2171b5'];\n    const color = d3.scaleOrdinal(colorlist);\n    const arc = d3.arc()\n        .innerRadius(innerRadius)\n        .outerRadius(outerRadius)\n        .padAngle(0.02);\n    const numTexts = ['first', 'second', 'third'];\n\n    const chartGrp = rootSel.append('g')\n        .classed('chart-group', true);\n\n    const arcs = chartGrp.append('g')\n        .classed('mark-group', true)\n    \n    const arcslabel = chartGrp.append('g')\n        .classed('label-group', true)\n\n    const legendGrp = chartGrp.append('g')\n        .classed('mark-group', true)\n        // .attr('transform', `translate(${layout.right},${layout.top})`);\n\n    // arcs.selectAll('path').data(piedata).enter().append('path')\n    //     .classed('chart mark sector sector-wheel', true)\n    //     .attr('transform', 'translate(' + (width / 2-20) + ',' + (height / 2+10)+')')\n    //     .attr('fill', (d, i) => {\n    //         return color(i);\n    //     })\n    //     .attr('d', (d) => {\n    //         return arc(d);\n    //     });\n\n    // arcslabel.selectAll('text').data(piedata).enter().append('text')\n    //     .classed('chart label arc-label', true)\n    //     .attr('transform', (d) => {\n    //       return 'translate(' + arc.centroid(d) + ')';\n    //     })\n    //     .attr('dx', 80)\n    //     .attr('dy', 90)\n    //     .attr('fill', 'white')\n    //     .attr('text-anchor', 'middle')\n    //     .text((d) => {\n    //       return d.data;\n    //     });\n\n    for (var i=0;i<dataset.length;i++){\n      // if (i===dataset.length-1){\n        arcs.append('path')\n            .classed('chart mark sector sector-wheel ' + numTexts[i], true)\n            .attr('transform', 'translate(' + (width / 2-20) + ',' + (height / 2+10)+')')\n            .attr('fill', color(i))\n            .attr('d', arc(piedata[i]));\n\n        arcslabel.append('text')\n            .classed('chart mark arc-label ' + numTexts[i], true)\n            .attr('transform', 'translate(' + arc.centroid(piedata[i]) + ')')\n            .attr('dx', 80)\n            .attr('dy', 90)\n            .attr('fill', 'white')\n            .attr('text-anchor', 'middle')\n            .text(piedata[i].data+'%');\n      \n        legendGrp.append('text')\n            .classed(`chart mark legend legend-label ` + numTexts[i], true)\n            .attr('transform', `translate(${width-40},${layout.top})`)\n            .attr('dx', 0)\n            .attr('dy', 13*(i+1)-4)\n            .attr('font-weight', 'bold')\n            .attr('fill', color(i))\n            .text('ta');\n    \n         legendGrp.append('rect')\n            .classed('chart mark legend legend-symbol '  + numTexts[i], true)\n            .attr('transform', `translate(${width-40},${layout.top})`)\n            .attr('width', 18)\n            .attr('height', 8)\n            .attr('x', 20)\n            .attr('y', 13*i)\n            .attr('fill', color(i));\n      // }\n      // else{\n      //   arcs.append('path')\n      //   .classed('chart mark sector sector-wheel', true)\n      //     .attr('transform', 'translate(' + (width / 2-20) + ',' + (height / 2+10)+')')\n      //     .attr('fill', color(i))\n      //     .attr('d', arc(piedata[i]));\n\n      //   arcslabel.append('text')\n      //     .classed('chart label arc-label', true)\n      //     .attr('transform', 'translate(' + arc.centroid(piedata[i]) + ')')\n      //     .attr('dx', 80)\n      //     .attr('dy', 90)\n      //     .attr('fill', 'white')\n      //     .attr('text-anchor', 'middle')\n      //     .text(piedata[i].data);\n\n      //   legendGrp.append('text')\n      //     .classed(`chart mark legend legend-label`, true)\n      //     .attr('transform', `translate(${width-40},${layout.top})`)\n      //     .attr('dx', 0)\n      //     .attr('dy', 13*(i+1)-4)\n      //     .attr('font-weight', 'bold')\n      //     .attr('fill', color(i))\n      //     .text('ta');\n  \n      //  legendGrp.append('rect')\n      //     .classed('chart mark legend legend-symbol', true)\n      //     .attr('transform', `translate(${width-40},${layout.top})`)\n      //     .attr('width', 18)\n      //     .attr('height', 8)\n      //     .attr('x', 20)\n      //     .attr('y', 13*i)\n      //     .attr('fill', color(i));\n      // }\n\n    }\n\n\n\n  // for (var i=0;i<dataset.length;i++){\n  //   legendGrp.append('text')\n  //       .classed(`chart mark legend legend-label`, true)\n  //       .attr('transform', `translate(${width-40},${layout.top})`)\n  //       .attr('dx', 0)\n  //       .attr('dy', 13*(i+1)-4)\n  //       .attr('font-weight', 'bold')\n  //       .attr('fill', color(i))\n  //       .text('ta');\n\n  //    legendGrp.append('rect')\n  //       .classed('chart mark legend legend-symbol', true)\n  //       .attr('transform', `translate(${width-40},${layout.top})`)\n  //       .attr('width', 18)\n  //       .attr('height', 8)\n  //       .attr('x', 20)\n  //       .attr('y', 13*i)\n  //       .attr('fill', color(i));\n  // }\n\n\n    // create title\n    // const titleGrp = chartGrp.append('g')\n    //     .classed('title-group', true)\n    // titleGrp.append('text')\n    //     .classed('chart title main-title', true)\n    //     .attr('transform', `translate(${layout.left + layout.chartWidth / 2},${layout.top})`)\n    //     .attr('dy', -30)\n    //     .attr('dx', 5)\n    //     .attr('font-size', 13)\n    //     .style('text-anchor', 'middle')\n    //     .attr('font-weight', 'bold')\n    //     .attr('fill', '#3d3d3d')\n    //     .text('Arc Chart');\n  }\n}\n","import {BasePreviewer} from \"@/core/previewer/BasePreviewer\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\n// import * as d3 from 'd3';\n// import {ChartLayout} from \"@/core/utils/ChartLayout\";\n\nexport class TextPreviewer extends BasePreviewer {\n  constructor() {\n    super();\n    this.previewerType = PreviewerType.TEXT;\n  }\n\n  draw() {\n    const rootSel = this.previewerContext.rootSel;\n    const {width, height} = this.getCanvasSize();\n\n    const chartGrp = rootSel.append('g')\n        .classed('chart-group', true);\n\n    const annotationGrp = chartGrp.append('g')\n        .classed('annotation-group', true);\n\n\n    // create text\n    annotationGrp.append('text')\n        .classed('annotation label number', true)\n        .attr('transform', 'translate(' + (width / 2) + ',' + (height / 2+10)+')')\n        .attr('dy', 0)\n        .attr('dx', 0)\n        .attr('font-size', 35)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text('66%');\n  }\n}\n","import {BasePreviewer} from \"@/core/previewer/BasePreviewer\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\n// import * as d3 from 'd3';\n// import {ChartLayout} from \"@/core/utils/ChartLayout\";\n\nexport class TitlePreviewer extends BasePreviewer {\n  constructor() {\n    super();\n    this.previewerType = PreviewerType.TITLE;\n  }\n\n  draw() {\n    const rootSel = this.previewerContext.rootSel;\n    const {width, height} = this.getCanvasSize();\n\n\n    const chartGrp = rootSel.append('g')\n        .classed('chart-group', true);\n\n    const titleGrp = chartGrp.append('g')\n        .classed('title-group', true);\n\n    // create text\n    titleGrp.append('text')\n        .classed('chart title main-title', true)\n        .attr('transform', 'translate(' + (width / 3) + ',' + (height / 3)+')')\n        .attr('dy', 0)\n        .attr('dx', 0)\n        .attr('font-size', 25)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text('main title');\n\n    titleGrp.append('text')\n        .classed('chart title sub-title', true)\n        .attr('transform', 'translate(' + (width / 2) + ',' + (height / 2+10)+')')\n        .attr('dy', 0)\n        .attr('dx', 0)\n        .attr('font-size', 20)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text('—— sub title');\n  }\n}\n","import {BasePreviewer} from \"@/core/previewer/BasePreviewer\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport * as d3 from 'd3';\nimport {ChartLayout} from \"@/core/utils/ChartLayout\";\n\nexport class LinePreviewer extends BasePreviewer {\n  constructor() {\n    super();\n    this.previewerType = PreviewerType.LINE_CHART;\n  }\n\n  draw() {\n    const rootSel = this.previewerContext.rootSel;\n    const {width, height} = this.getCanvasSize();\n\n    const scatterdata=[\n        [5,15],\n        [15,18],\n        [22,20],\n        [29,39],\n\n    ];\n    const xLabels = [0, 15, 30];\n    const yLabels = [20, 40];\n    const layout = new ChartLayout({\n      width, height,\n      topRatio: 0.30,\n      bottomRatio: 0.17,\n      leftRatio: 0.2,\n      rightRatio: 0.2\n    });\n    const barWidthRatio = 0.8;\n    const barHeightRatio = 0.8;\n\n    const xScale = d3.scaleLinear()\n        .domain([0, d3.max(scatterdata, d => d[0]) / barWidthRatio])\n        .range([0, layout.chartWidth])\n        // .padding(barWidthRatio);\n    const yScale = d3.scaleLinear()\n        .domain([0, d3.max(scatterdata, d => d[1]) / barHeightRatio])\n        .range([0, layout.chartHeight])\n\n    const chartGrp = rootSel.append('g')\n        .classed('chart-group', true);\n\n    // create axis\n    const axisGrp = chartGrp.append('g')\n        .classed('axis-group', true);\n\n    const xAxisGrp = axisGrp.append('g')\n        .classed('x-axis-group', true)\n        .attr('transform', `translate(${layout.origin.x},${layout.origin.y})`);\n\n    xAxisGrp.selectAll('text').data(xLabels).enter().append('text')\n        .classed(`chart axis y-axis label`, true)\n        .attr('transform', d => `translate(${xScale(d)},0)`)\n        .attr('dx', 0)\n        .attr('dy', 17)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text(d => d);\n\n    xAxisGrp.append('text')\n        .classed(`chart axis x-axis title`, true)\n        .attr('transform', `translate(${layout.chartWidth},0)`)\n        .attr('dx', 10)\n        .attr('dy', 5)\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text('X');\n\n    xAxisGrp.append('line')\n        .classed('chart axis x-axis domain', true)\n        .attr('x1', 0)\n        .attr('y1', 0)\n        .attr('x2', layout.chartWidth)\n        .attr('y2', 0)\n        .attr('stroke', '#808080')\n        .attr('stroke-width', 4)\n        .attr('stroke-linecap', 'round');\n\n    const yAxisGrp = axisGrp.append('g')\n        .classed('y-axis-group', true)\n        .attr('transform', `translate(${layout.origin.x},${layout.top})`);\n\n    yAxisGrp.selectAll('text').data(yLabels).enter().append('text')\n        .classed(`chart axis y-axis label`, true)\n        .attr('transform', d => `translate(0,${layout.chartHeight - yScale(d)})`)\n        .attr('dx', -14)\n        .attr('dy', 0)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text(d => d);\n\n    yAxisGrp.append('line')\n        .classed('chart axis y-axis domain', true)\n        .attr('x1', 0)\n        .attr('y1', 0)\n        .attr('x2', 0)\n        .attr('y2', layout.chartHeight)\n        .attr('stroke', '#808080')\n        .attr('stroke-width', 4)\n        .attr('stroke-linecap', 'round');\n\n    yAxisGrp.append('text')\n        .classed(`chart axis y-axis title`, true)\n        .attr('dy', -10)\n        .attr('dx', -5)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text('Y');\n\n\n    // create mark\n    const markGrp = chartGrp.append('g')\n        .classed('mark-group', true);\n    \n    const labelGrp = markGrp.append('g')\n        .classed('label-group', true)\n        .attr('transform', `translate(${layout.left},${layout.top})`);\n\n    labelGrp.selectAll('text').data(scatterdata).enter().append('text')\n        .classed('chart mark label', true)\n        // .attr('transform', d =>`translate(${xScale(d[0])},${layout.chartHeight-yScale(d[1])})`)\n        .attr('dx', d =>xScale(d[0]))\n        .attr('dy', d =>layout.chartHeight-yScale(d[1])-15)\n        .style('text-anchor', 'middle')\n        // .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text(d => d[1]);\n    \n    const scatterGrp = markGrp.append('g')\n        .classed('mark-group', true)\n        .attr('transform', `translate(${layout.left},${layout.top})`)\n\n    scatterGrp.selectAll('circle').data(scatterdata).enter().append('circle')\n        .classed('chart mark circle', true)\n        .attr('cx', d => xScale(d[0]))\n        .attr('cy', d => layout.chartHeight-yScale(d[1]))\n        .attr('r', 5)\n        .attr('fill', '#409eff');\n\n\n    const lineGrp = markGrp.append('g')\n        .classed('line-group', true)\n\n    for (var i=0;i<scatterdata.length;i++){\n        scatterdata[i][0]=xScale(scatterdata[i][0]);\n        scatterdata[i][1]=layout.chartHeight-yScale(scatterdata[i][1]);\n    }\n\n    lineGrp.append('polyline')\n        .classed('chart mark line', true)\n        .attr('transform', `translate(${layout.left},${layout.top})`)\n        .attr(\"points\",scatterdata)\n        .attr('fill','none')\n        .attr('stroke', '#409eff')\n        .attr('stroke-width', 4)\n        .attr('stroke-linecap', 'round');\n        \n\n    // for (var i=0;i<scatterdata.length-1;i++){\n    //     lineGrp.append('line')\n    //     .classed('chart mark line', true)\n    //     .attr('transform', `translate(${layout.left},${layout.top})`)\n    //     .attr('x1', xScale(scatterdata[i][0]))\n    //     .attr('y1', layout.chartHeight-yScale(scatterdata[i][1]))\n    //     .attr('x2', xScale(scatterdata[i+1][0]))\n    //     .attr('y2', layout.chartHeight-yScale(scatterdata[i+1][1]))\n    //     .attr('stroke', '#808080')\n    //     .attr('stroke-width', 4)\n    //     .attr('stroke-linecap', 'round');\n    // }\n\n\n\n    // create title\n    const titleGrp = chartGrp.append('g')\n        .classed('title-group', true)\n    titleGrp.append('text')\n        .classed('chart title main-title', true)\n        .attr('transform', `translate(${layout.left + layout.chartWidth / 2},${layout.top})`)\n        .attr('dy', -20)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text('Line Chart');\n  }\n}\n","import {BasePreviewer} from \"@/core/previewer/BasePreviewer\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport * as d3 from 'd3';\nimport {ChartLayout} from \"@/core/utils/ChartLayout\";\n\nexport class LineWithLegendPreviewer extends BasePreviewer {\n  constructor() {\n    super();\n    this.previewerType = PreviewerType.LINE_CHART_WITH_LEGEND;\n  }\n\n  draw() {\n    const rootSel = this.previewerContext.rootSel;\n    const {width, height} = this.getCanvasSize();\n\n    const data1=[\n        [5,15],\n        [15,18],\n        [22,20],\n        [29,39],\n    ];\n    const data2=[\n        [5,26],\n        [15,28],\n        [22,36],\n        [29,10],\n    ];\n    const xLabels = [0, 15, 30];\n    const yLabels = [20, 40];\n    const layout = new ChartLayout({\n      width, height,\n      topRatio: 0.30,\n      bottomRatio: 0.17,\n      leftRatio: 0.2,\n      rightRatio: 0.2\n    });\n    const barWidthRatio = 0.8;\n    const barHeightRatio = 0.8;\n\n    const xScale = d3.scaleLinear()\n        .domain([0, d3.max(data1, d => d[0]) / barWidthRatio])\n        .range([0, layout.chartWidth])\n        // .padding(barWidthRatio);\n    const yScale = d3.scaleLinear()\n        .domain([0, d3.max(data1, d => d[1]) / barHeightRatio])\n        .range([0, layout.chartHeight])\n\n    const chartGrp = rootSel.append('g')\n        .classed('chart-group', true);\n\n    // create axis\n    const axisGrp = chartGrp.append('g')\n        .classed('axis-group', true);\n\n    const xAxisGrp = axisGrp.append('g')\n        .classed('x-axis-group', true)\n        .attr('transform', `translate(${layout.origin.x},${layout.origin.y})`);\n\n    xAxisGrp.selectAll('text').data(xLabels).enter().append('text')\n        .classed(`chart axis y-axis label`, true)\n        .attr('transform', d => `translate(${xScale(d)},0)`)\n        .attr('dx', 0)\n        .attr('dy', 17)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text(d => d);\n\n    xAxisGrp.append('text')\n        .classed(`chart axis x-axis title`, true)\n        .attr('transform', `translate(${layout.chartWidth},0)`)\n        .attr('dx', 10)\n        .attr('dy', 5)\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text('X');\n\n    xAxisGrp.append('line')\n        .classed('chart axis x-axis domain', true)\n        .attr('x1', 0)\n        .attr('y1', 0)\n        .attr('x2', layout.chartWidth)\n        .attr('y2', 0)\n        .attr('stroke', '#808080')\n        .attr('stroke-width', 4)\n        .attr('stroke-linecap', 'round');\n\n    const yAxisGrp = axisGrp.append('g')\n        .classed('y-axis-group', true)\n        .attr('transform', `translate(${layout.origin.x},${layout.top})`);\n\n    yAxisGrp.selectAll('text').data(yLabels).enter().append('text')\n        .classed(`chart axis y-axis label`, true)\n        .attr('transform', d => `translate(0,${layout.chartHeight - yScale(d)})`)\n        .attr('dx', -14)\n        .attr('dy', 0)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text(d => d);\n\n    yAxisGrp.append('line')\n        .classed('chart axis y-axis domain', true)\n        .attr('x1', 0)\n        .attr('y1', 0)\n        .attr('x2', 0)\n        .attr('y2', layout.chartHeight)\n        .attr('stroke', '#808080')\n        .attr('stroke-width', 4)\n        .attr('stroke-linecap', 'round');\n\n    yAxisGrp.append('text')\n        .classed(`chart axis y-axis title`, true)\n        .attr('dy', -3)\n        .attr('dx', -5)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text('Y');\n\n    // create legend\n    const legendGrp = chartGrp.append('g')\n    .classed('mark-group', true)\n    // .attr('transform', `translate(${layout.right},${layout.top})`);\n\n    legendGrp.append('text')\n        .classed(`chart mark legend`, true)\n        .attr('transform', `translate(${width-layout.right},${layout.top})`)\n        .attr('dx', 0)\n        .attr('dy', 8)\n        .attr('font-weight', 'bold')\n        .attr('fill', '#409eff')\n        .text('ta');\n\n    legendGrp.append('rect')\n        .classed('chart mark legend', true)\n        .attr('transform', `translate(${width-layout.right},${layout.top})`)\n        .attr('width', 18)\n        .attr('height', 8)\n        .attr('x', 20)\n        .attr('y', 0)\n        .attr('fill', '#409eff');\n    \n    legendGrp.append('text')\n        .classed(`chart mark legend`, true)\n        .attr('transform', `translate(${width-layout.right},${layout.top})`)\n        .attr('dx', 0)\n        .attr('dy', 26)\n        .attr('font-weight', 'bold')\n        .attr('fill', '#9ecae1')\n        .text('tb');\n\n    legendGrp.append('rect')\n        .classed('chart mark legend', true)\n        .attr('transform', `translate(${width-layout.right},${layout.top})`)\n        .attr('width', 18)\n        .attr('height', 8)\n        .attr('x', 20)\n        .attr('y', 18)\n        .attr('fill', '#9ecae1');\n\n    // create mark\n    const markGrp = chartGrp.append('g')\n        .classed('mark-group', true);\n\n    const scatterGrp = markGrp.append('g')\n        .classed('mark-group', true)\n        .attr('transform', `translate(${layout.left},${layout.top})`)\n\n    const scatter1Grp = scatterGrp.append('g')\n        .classed('scatter1-group', true)\n\n    scatter1Grp.selectAll('circle').data(data1).enter().append('circle')\n        .classed('chart mark circle', true)\n        .attr('cx', d => xScale(d[0]))\n        .attr('cy', d => layout.chartHeight-yScale(d[1]))\n        .attr('r', 5)\n        .attr('fill', '#409eff');\n\n    const scatter2Grp = scatterGrp.append('g')\n        .classed('scatter2-group', true)\n\n    scatter2Grp.selectAll('circle').data(data2).enter().append('circle')\n        .classed('chart mark circle', true)\n        .attr('cx', d => xScale(d[0]))\n        .attr('cy', d => layout.chartHeight-yScale(d[1]))\n        .attr('r', 5)\n        .attr('fill', '#9ecae1');\n    \n    for (var i=0;i<data1.length;i++){\n        data1[i][0]=xScale(data1[i][0]);\n        data1[i][1]=layout.chartHeight-yScale(data1[i][1]);\n    }\n    \n    for (i=0;i<data2.length;i++){\n        data2[i][0]=xScale(data2[i][0]);\n        data2[i][1]=layout.chartHeight-yScale(data2[i][1]);\n    }\n    \n    const lineGrp = markGrp.append('g')\n        .classed('line-group', true)\n    \n    const line1Grp = lineGrp.append('g')\n        .classed('line1-group', true)\n\n    // for (var i=0;i<data1.length-1;i++){\n    //     line1Grp.append('line')\n    //     .classed('chart mark line', true)\n    //     .attr('transform', `translate(${layout.left},${layout.top})`)\n    //     .attr('x1', xScale(data1[i][0]))\n    //     .attr('y1', layout.chartHeight-yScale(data1[i][1]))\n    //     .attr('x2', xScale(data1[i+1][0]))\n    //     .attr('y2', layout.chartHeight-yScale(data1[i+1][1]))\n    //     .attr('stroke', '#808080')\n    //     .attr('stroke-width', 4)\n    //     .attr('stroke-linecap', 'round');\n    // }\n\n    line1Grp.append('polyline')\n        .classed('chart mark line first', true)\n        .attr('transform', `translate(${layout.left},${layout.top})`)\n        .attr(\"points\",data1)\n        .attr('fill','none')\n        .attr('stroke', '#409eff')\n        .attr('stroke-width', 4)\n        .attr('stroke-linecap', 'round');\n\n    const line2Grp = lineGrp.append('g')\n        .classed('line2-group', true)\n\n    // for (i=0;i<data2.length-1;i++){\n    //     line2Grp.append('line')\n    //     .classed('chart mark line', true)\n    //     .attr('transform', `translate(${layout.left},${layout.top})`)\n    //     .attr('x1', xScale(data2[i][0]))\n    //     .attr('y1', layout.chartHeight-yScale(data2[i][1]))\n    //     .attr('x2', xScale(data2[i+1][0]))\n    //     .attr('y2', layout.chartHeight-yScale(data2[i+1][1]))\n    //     .attr('stroke', '#808080')\n    //     .attr('stroke-width', 4)\n    //     .attr('stroke-linecap', 'round');\n    // }\n\n    line2Grp.append('polyline')\n        .classed('chart mark line second', true)\n        .attr('transform', `translate(${layout.left},${layout.top})`)\n        .attr(\"points\",data2)\n        .attr('fill','none')\n        .attr('stroke', '#9ecae1')\n        .attr('stroke-width', 4)\n        .attr('stroke-linecap', 'round');\n\n    // create title\n    const titleGrp = chartGrp.append('g')\n        .classed('title-group', true)\n    titleGrp.append('text')\n        .classed('chart title main-title', true)\n        .attr('transform', `translate(${layout.left + layout.chartWidth / 2},${layout.top})`)\n        .attr('dy', -20)\n        .style('text-anchor', 'middle')\n        .attr('font-weight', 'bold')\n        .attr('fill', '#3d3d3d')\n        .text('Line Chart with Legend');\n  }\n}\n","import {BasePreviewer} from \"@/core/previewer/BasePreviewer\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport * as d3 from 'd3';\nimport {ChartLayout} from \"@/core/utils/ChartLayout\";\n\nexport class PathPreviewer extends BasePreviewer {\n  constructor() {\n    super();\n    this.previewerType = PreviewerType.PATH;\n  }\n\n  draw() {\n    const rootSel = this.previewerContext.rootSel;\n    const {width, height} = this.getCanvasSize();\n\n    const scatterdata=[\n        [5,10],\n        [40,10],\n        [40,35],\n        [5,35],\n        [5,10],\n\n    ];\n    const layout = new ChartLayout({\n      width, height,\n      topRatio: 0.30,\n      bottomRatio: 0.17,\n      leftRatio: 0.2,\n      rightRatio: 0.2\n    });\n    const barWidthRatio = 0.8;\n    const barHeightRatio = 0.8;\n\n    const xScale = d3.scaleLinear()\n        .domain([0, d3.max(scatterdata, d => d[0]) / barWidthRatio])\n        .range([0, layout.chartWidth])\n        // .padding(barWidthRatio);\n    const yScale = d3.scaleLinear()\n        .domain([0, d3.max(scatterdata, d => d[1]) / barHeightRatio])\n        .range([0, layout.chartHeight])\n\n    const chartGrp = rootSel.append('g')\n        .classed('chart-group', true);\n\n\n    // create annotation\n    const annotationGrp = chartGrp.append('g')\n        .classed('annotation-group', true);\n\n\n    for (var i=0;i<scatterdata.length;i++){\n        scatterdata[i][0]=xScale(scatterdata[i][0]);\n        scatterdata[i][1]=layout.chartHeight-yScale(scatterdata[i][1]);\n    }\n\n    annotationGrp.append('polyline')\n        .classed('chart annotation path', true)\n        .attr('transform', `translate(${layout.left},${layout.top})`)\n        .attr(\"points\",scatterdata)\n        .attr('fill','none')\n        .attr('stroke', '#409eff')\n        .attr('stroke-width', 4)\n        .attr('stroke-linecap', 'round');\n        \n  }\n}\n","import {BasePreviewer} from \"@/core/previewer/BasePreviewer\";\nimport {PreviewerType} from \"@/core/const/PreviewerType\";\nimport * as d3 from 'd3';\n\nexport class HighlightPreviewer extends BasePreviewer {\n  constructor() {\n    super();\n    this.previewerType = PreviewerType.HIGHLIGHT;\n  }\n\n  // barGap*2 barWidth barGap barWidth barGap*2\n  draw() {\n    const rootSel = this.previewerContext.rootSel;\n    const {width, height} = this.getCanvasSize();\n    const barWidth = 25, barGap = 5;\n    const barHeightList = [70, 70, 70];\n    const graphWidth = barHeightList.length * barWidth + (barHeightList.length + 3) * barGap;\n    const left = (width - graphWidth) / 2;\n    const bottom = (height + Math.max(...barHeightList)) / 2;\n    const numTexts = ['first', 'second', 'third', 'forth'];\n\n    const chartGrp = rootSel.append('g')\n        .classed('chart group', true);\n\n    const barGrp = chartGrp.append('g')\n        .classed('mark group', true);\n    barGrp.selectAll('.bar.glyph').data(barHeightList).enter().append('rect')\n        .each(function(d, i) {\n          d3.select(this).classed(`bar glyph ${numTexts[i]}`, true);\n        })\n        .attr('width', barWidth)\n        .attr('height', d => d)\n        .attr('x', (d, i) => left + (i + 2) * barGap + i * barWidth)\n        .attr('y',  (d) => bottom - d)\n        .attr('fill', '#409eff')\n        .attr('rx', 5)\n        .attr('ry', 5);\n    \n    chartGrp.append('rect')\n        .attr('width', barWidth)\n        .attr('height', 70)\n        .attr('x', left + (3 + 2) * barGap + 3 * barWidth)\n        .attr('y', bottom-70)\n        .attr('fill', '#409eff')\n        .attr('rx', 5)\n        .attr('ry', 5);\n\n    chartGrp.append('line')\n        .classed('line axis domain', true)\n        .attr('x1', left)\n        .attr('y1', bottom)\n        .attr('x2', left + graphWidth)\n        .attr('y2', bottom)\n        .attr('stroke', '#808080')\n        .attr('stroke-width', 4)\n        .attr('stroke-linecap', 'round');\n  }\n}\n","import {BlankPreviewer} from \"@/core/previewer/template-previewer/BlankPreviewer\";\nimport {GeneralPreviewer} from \"@/core/previewer/template-previewer/GeneralPreviewer\";\nimport {MovePreviewer} from \"@/core/previewer/template-previewer/MovePreviewer\";\nimport {AnnotationArrowPreviewer} from \"@/core/previewer/template-previewer/AnnotationArrowPreviewer\";\nimport {CameraPreviewer} from \"@/core/previewer/template-previewer/CameraPreviewer\";\nimport {BarChartPreviewer} from \"@/core/previewer/template-previewer/BarChartPreviewer\";\nimport {BarChartWithLegendPreviewer} from \"@/core/previewer/template-previewer/BarChartWithLegendPreviewer\";\nimport {ChartFrameworkPreviewer} from \"@/core/previewer/template-previewer/ChartFrameworkPreviewer\";\nimport {CirclePreviewer} from \"@/core/previewer/template-previewer/CirclePreviewer\";\nimport {CircleWithLegendPreviewer} from \"@/core/previewer/template-previewer/CircleWithLegendPreviewer\";\nimport {ArcPreviewer} from \"@/core/previewer/template-previewer/ArcPreviewer\";\nimport {ArcWithLegendPreviewer} from \"@/core/previewer/template-previewer/ArcWithLegendPreviewer\";\nimport {TextPreviewer} from \"@/core/previewer/template-previewer/TextPreviewer\";\nimport {TitlePreviewer} from \"@/core/previewer/template-previewer/TitlePreviewer\";\nimport {LinePreviewer} from \"@/core/previewer/template-previewer/LinePreviewer\";\nimport {LineWithLegendPreviewer} from \"@/core/previewer/template-previewer/LineWithLegendPreviewer\";\nimport {PathPreviewer} from \"@/core/previewer/template-previewer/PathPreviewer\";\nimport {HighlightPreviewer} from \"@/core/previewer/template-previewer/HighlightPreviewer\";\n\nexport const buildInPreviewers = [\n    new BlankPreviewer(),\n    new GeneralPreviewer(),\n    new MovePreviewer(),\n    new AnnotationArrowPreviewer(),\n    new CameraPreviewer(),\n    new BarChartPreviewer(),\n    new BarChartWithLegendPreviewer(),\n    new ChartFrameworkPreviewer(),\n    new CirclePreviewer(),\n    new CircleWithLegendPreviewer(),\n    new ArcPreviewer(),\n    new ArcWithLegendPreviewer(),\n    new TextPreviewer(),\n    new TitlePreviewer(),\n    new LinePreviewer(),\n    new LineWithLegendPreviewer(),\n    new PathPreviewer(),\n    new HighlightPreviewer(),\n]","/**\n * @param {object} object\n * @param {function(key: any, item: object, parent: object): boolean} func\n */\nfunction traversalObject(object, func) {\n  if (object == null) return\n  traversalObjectRecursively(object, func)\n}\n\n/**\n * @param {object} object\n * @param {function(key: any, item: object, parent: object): boolean} func\n * @returns {boolean} Not to traversal if return true\n */\nfunction traversalObjectRecursively(object, func) {\n  if (object == null || typeof object !== 'object') return false\n  // console.log(object)\n  for (let key of Object.keys(object)) {\n    const item = object[key]\n    let terminate = func(key, item, object)\n    if (terminate) return true\n    traversalObjectRecursively(item, func)\n  }\n  return false\n}\n\nexport const ObjectUtils = {\n  traversalObject\n}","import {Parser} from \"@/core/parser/Parser\";\nimport {Generator} from \"@/core/generator/Generator\";\nimport * as d3 from 'd3';\nimport gsap from \"gsap\";\nimport {TemplateLibrary} from \"@/core/library/TemplateLibrary\";\nimport {PreviewerManager} from \"@/core/previewer/PreviewerManager\";\nimport {buildInTemplates} from \"@/core/build-in\";\nimport {buildInWrappers} from \"@/core/previewer/build-in-wrapper\";\nimport {buildInPreviewers} from \"@/core/previewer/template-previewer\";\nimport {AnimationParser} from \"@/core/parser/AnimationParser\";\nimport {JsonUtils} from \"@/core/utils/JsonUtils\";\nimport {ObjectUtils} from \"@/utils/common/ObjectUtils\";\n\nfunction UserException(message) {\n  this.message = message;\n}\n\nexport class Compiler {\n  /** @type {Parser} */\n  parser\n  /** @type {Generator} */\n  generator\n  /** @type {TemplateLibrary} */\n  templateLib\n  /** @type {PreviewerManager} */\n  previewerManager\n\n  constructor() {\n    this.parser = new Parser();\n\n    this.templateLib = new TemplateLibrary();\n    buildInTemplates.forEach(t => this.templateLib.registerBuildInTemplate(t));\n\n    this.previewerManager =  new PreviewerManager(this.templateLib);\n    buildInWrappers.forEach(w => this.previewerManager.registerPreviewWrapper(w));\n    buildInPreviewers.forEach(p => this.previewerManager.registerPreviewer(p));\n  }\n\n  /**\n   * @param {string | HTMLElement} elementOrSelector\n   * @param {string | Object} animationJSON\n   * @param {Object<string, any>} vars\n   * @returns {gsap.core.Timeline}\n   */\n  compile(elementOrSelector, animationJSON, vars={}) {\n    console.log(\"animationJSON\", animationJSON)\n\n    if (animationJSON.variable != null && animationJSON.sequence != null) {\n      animationJSON = this.createReplacedAnimationJSON(animationJSON, animationJSON.variable);\n    }\n    // check children\n    ObjectUtils.traversalObject(animationJSON, (key, current, parent) => {\n      if (current && current.variable != null && current.sequence != null) {\n        parent[key] = this.createReplacedAnimationJSON(current, current.variable);\n      }\n    });\n    const animation = AnimationParser.fromJSON(animationJSON);\n    if (!animation) {\n      throw new UserException('No Animation!');\n    }\n\n    const rootSel = d3.select(elementOrSelector);\n    this.generator = new Generator();\n    this.generator.init(rootSel, this.templateLib, animation);\n\n    rootSel.selectAll('*').each(function() {\n      this._original = {}\n      if (typeof this.getCTM === 'function') {\n        this._original.CTM = this.getCTM();\n      }\n    });\n    const resultTimeline = this.generator.generate();\n\n    const timeline = gsap.timeline({autoRemoveChildren: false, ...vars});\n    timeline.add(resultTimeline);\n    timeline.pause();\n    return timeline;\n  }\n\n  /**\n   * @param {string | HTMLElement} elementOrSelector\n   * @param {string} templateName\n   * @returns {Set<Element>}\n   */\n  computePossibleElements(elementOrSelector, templateName) {\n    const originalRoot = d3.select(elementOrSelector).node();\n\n    const rootSel = d3.select(originalRoot.cloneNode(true));    // type element is ok for d3.select\n    this.generator = new Generator();\n    this.generator.init(rootSel, this.templateLib, null);\n\n    return this.generator.computePossibleElements(templateName);\n  }\n\n  /**\n   * @param {string | HTMLElement} elementOrSelector\n   * @param {string | Object} animationJSON\n   * @param {Object?} variable\n   * @returns {number}\n   */\n  computeDuration(elementOrSelector, animationJSON, variable) {\n    if (variable != null) {\n      animationJSON = this.createReplacedAnimationJSON(animationJSON, variable);\n    }\n    const animation = AnimationParser.fromJSON(animationJSON);\n\n    const originalRoot = d3.select(elementOrSelector).node();\n\n    const rootSel = d3.select(originalRoot.cloneNode(true));    // type element is ok for d3.select\n    this.generator = new Generator();\n    this.generator.init(rootSel, this.templateLib, animation);\n\n    return this.generator.computeDuration() || 1;\n  }\n\n  createReplacedAnimationJSON(animationJSON, variable) {\n    const retJSON = JsonUtils.deepCopy(animationJSON);\n    JsonUtils.traversalObject(retJSON, (key, current, parent) => {\n      if (typeof current !== 'string' || !current.includes('$')) {\n        return;\n      }\n      current = current.trim();\n      if (current.match(/^\\$[0-9a-zA-Z]*$/)) {  // '$xxx'\n        const paramName = current.substr(1);\n        if (paramName in variable) {\n          parent[key] = variable[paramName];\n        }\n      } else {\n        let result = current;\n        Object.keys(variable).forEach(paramName => {\n          result = result.replaceAll('$' + paramName, variable[paramName]);\n        })\n        parent[key] = result;\n      }\n    });\n    console.log(\"animationJSON\", retJSON)\n    return retJSON;\n  }\n}\n","/**\n * @enum {string}\n * @readonly\n */\n export const ComponentType = {\n    GENERAL: 'General',\n    MARK: 'Mark',\n    ANNOTATION: 'Annotation',\n    CHART: 'Chart',\n}","export class BaseFilter {\n    name\n    hardElement\n    softElement\n    componentType\n    animationType\n    effectList\n\n    constructor(\n        name,\n        hardElement,\n        softElement,\n        componentType,\n        animationType,\n        effectList\n    ) {\n        this.name = name;\n        this.hardElement = hardElement;\n        this.softElement = softElement;\n        this.componentType = componentType;\n        this.animationType = animationType;\n        this.effectList = effectList;\n    }\n\n    clone() {\n        return new BaseFilter(\n            this.name,\n            this.hardElement,\n            this.softElement,\n            this.componentType,\n            this.animationType,\n            this.effectList\n        );\n    }\n\n    getName() {\n        return this.name;\n    }\n\n    getHardElement() {\n        return this.hardElement;\n    }\n\n    getSoftElement() {\n        return this.softElement;\n    }\n\n    getComponentType() {\n        return this.componentType;\n    }\n\n    getAnimationType() {\n        return this.animationType;\n    }\n\n    getEffectList() {\n        return this.effectList;\n    }\n\n    relatedTargets(fullTargetList) {\n        const relatedTargets = [];\n        fullTargetList.forEach(ele => {\n            const clist = ele.classList;\n            if (this.hardElement.some(el => clist.includes(el))\n            ||  this.softElement.some(el => clist.includes(el))) {\n                relatedTargets.push(ele);\n            }\n        })\n        return relatedTargets;\n    }\n\n    hasLabel(target) {\n        const cl = target.classList;\n        return cl.includes('x-label') || cl.includes('y-label')\n            || cl.includes('sector-label') || cl.includes('legend-label');\n    }\n\n    isWanted(target, elementList) {\n        const cl = target.classList;\n        let elements=[];\n        elementList.forEach((elem)=> {\n            const elArr = elem.split(' | ');\n            elements=elements.concat(elArr)\n        })\n        return elements.some(el => {\n            if (el === 'label') {\n                return this.hasLabel(target);\n            }\n            else {\n                return cl.includes(el);\n            }\n        });\n    }\n\n    shouldAppear(selectedTargets) {\n        // console.log('selecttarget = ', selectedTargets);\n        // general filter\n        if (this.hardElement.length === 0 && this.softElement.length === 0) {\n            return true;\n        }\n        // includes all hard elements\n        if (!this.hardElement.every(el => {\n            // extra lebel process\n            const elArr = el.split(' | ');\n            const len = elArr.length;\n            // do not include OR element\n            // console.log('ActiveElArr = ', elArr);\n            if (len === 1) {\n                if (el === 'label') {\n                    return selectedTargets.some(t => this.hasLabel(t));\n                } else {\n                    return selectedTargets.some(t => t.classList.includes(el));\n                }   \n            } else {\n                // len > 1\n                // console.log('len > 1  | elArr = ', elArr);\n                let isMeetOr = false;\n                elArr.forEach((elem)=> {\n                    if (elem === 'label') {\n                        isMeetOr ||= selectedTargets.some(t => this.hasLabel(t));\n                    } else {\n                        isMeetOr ||= selectedTargets.some(t => t.classList.includes(elem));\n                    }  \n                })\n                // console.log('isMeetOr = ', isMeetOr);\n                return isMeetOr;\n            }   \n        })) {\n            // do not include all hardElement in this filter\n            return false;\n        }\n        // else\n        // return true;\n\n        // has no other elements except soft elements\n        return selectedTargets.every(el => {\n            return this.isWanted(el, this.hardElement) || this.isWanted(el, this.softElement);\n        });\n    }\n}","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const barWithAxisLabelFilter = new BaseFilter(\n    'Bar with axis label',\n    ['bar', 'axis symbol | x-symbol | y-symbol'],\n    ['bar-label'],\n    ComponentType.MARK,\n    AnimationType.ENTER,\n    ['grow bar and zoom label']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const barWithLegendFilter = new BaseFilter(\n    'Bar with legend',\n    ['bar', 'legend'],\n    ['bar-label'],\n    ComponentType.MARK,\n    AnimationType.ENTER,\n    ['grow bar and fade in legend']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const lineFilter = new BaseFilter(\n    'Line-wipe',\n    ['line'],\n    ['scatter', 'label','point'],\n    ComponentType.MARK,\n    AnimationType.ENTER,\n    ['wipe line']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const linesByLegendFilter = new BaseFilter(\n    'Lines by legend',\n    ['line', 'legend'],\n    ['scatter', 'label','point'],\n    ComponentType.MARK,\n    AnimationType.ENTER,\n    ['wipe line and fade in legend']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const linesByOrderFilter = new BaseFilter(\n    'Lines by order',\n    ['line', 'legend'],\n    ['scatter', 'label','point'],\n    ComponentType.MARK,\n    AnimationType.ENTER,\n    ['wipe line and fade in legend']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const scatterChartFilter = new BaseFilter(\n    'Scatter chart',\n    ['scatter | point', 'axis'],\n    ['title', 'label'],\n    ComponentType.MARK,\n    AnimationType.ENTER,\n    ['fade in scatter and axis']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const scatterFilter = new BaseFilter(\n    'Scatter-fade in',\n    ['scatter | point'],\n    ['label'],\n    ComponentType.MARK,\n    AnimationType.ENTER,\n    ['fade in scatter']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const scatterWithLegendFilter = new BaseFilter(\n    'Scatter with legend',\n    ['scatter | point', 'legend'],\n    ['label'],\n    ComponentType.MARK,\n    AnimationType.ENTER,\n    ['fade in legend and scatter']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const barFilter = new BaseFilter(\n    'Bar-grow',\n    ['bar'],\n    ['bar-label'],\n    ComponentType.MARK,\n    AnimationType.ENTER,\n    ['grow bar']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const barBounceFilter = new BaseFilter(\n    'Bar-bounce',\n    ['bar'],\n    ['bar-label'],\n    ComponentType.MARK,\n    AnimationType.HIGHLIGHT,\n    ['move to bar']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const pieFilter = new BaseFilter(\n    'Pie-wheel',\n    ['arc | sector | pie'],\n    ['sector-label','label','sector-line','anno-label'],\n    ComponentType.MARK,\n    AnimationType.ENTER,\n    ['fade in pie']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const pieWithLegendFilter = new BaseFilter(\n    'Pie with legend',\n    ['arc | sector | pie', 'legend'],\n    ['sector-label','label','sector-line','anno-label'],\n    ComponentType.MARK,\n    AnimationType.ENTER,\n    ['fade in pie and fly in legend']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const sectorHighlightFilter = new BaseFilter(\n    'Highlight-sector',\n    ['arc | sector | pie'],\n    ['sector-label','label','sector-line','anno-label'],\n    ComponentType.MARK,\n    AnimationType.HIGHLIGHT,\n    ['fade in pie']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const lineHighlightFilter = new BaseFilter(\n    'Line-highlight',\n    ['line'],\n    [],\n    ComponentType.MARK,\n    AnimationType.HIGHLIGHT,\n    ['highlight line']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const fadeInFilter = new BaseFilter(\n    'Fade-in',\n    [],\n    [],\n    ComponentType.GENERAL,\n    AnimationType.ENTER,\n    ['fade in']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const growFilter = new BaseFilter(\n    'Grow',\n    [],\n    [],\n    ComponentType.GENERAL,\n    AnimationType.ENTER,\n    ['grow']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const floatFilter = new BaseFilter(\n    'Float',\n    [],\n    [],\n    ComponentType.GENERAL,\n    AnimationType.ENTER,\n    ['float']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const zoomEnterFilter = new BaseFilter(\n    'Zoom-enter',\n    [],\n    [],\n    ComponentType.GENERAL,\n    AnimationType.ENTER,\n    ['zoom']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const changeColorFilter = new BaseFilter(\n    'Change-color',\n    [],\n    [],\n    ComponentType.GENERAL,\n    AnimationType.HIGHLIGHT,\n    ['change color']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const showPathFilter = new BaseFilter(\n    'Show-path',\n    ['annotation'],\n    [],\n    ComponentType.ANNOTATION,\n    AnimationType.HIGHLIGHT,\n    ['show path']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const highLightFilter = new BaseFilter(\n    'Highlight',\n    [],\n    [],\n    ComponentType.GENERAL,\n    AnimationType.HIGHLIGHT,\n    ['highlight']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const cameraZoomFilter = new BaseFilter(\n    'Camera-zoom',\n    [],\n    [],\n    ComponentType.GENERAL,\n    AnimationType.HIGHLIGHT,\n    ['camera zoom']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const cameraMoveFilter = new BaseFilter(\n    'Camera-move',\n    [],\n    [],\n    ComponentType.GENERAL,\n    AnimationType.HIGHLIGHT,\n    ['camera move']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const moveToFilter = new BaseFilter(\n    'Move-to',\n    [],\n    [],\n    ComponentType.GENERAL,\n    AnimationType.ENTER,\n    ['move to']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const moveFromFilter = new BaseFilter(\n    'Move-from',\n    [],\n    [],\n    ComponentType.GENERAL,\n    AnimationType.ENTER,\n    ['move from']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const zoomExitFilter = new BaseFilter(\n    'Zoom-exit',\n    [],\n    [],\n    ComponentType.GENERAL,\n    AnimationType.EXIT,\n    ['zoom exit']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const fadeOutFilter = new BaseFilter(\n    'Fade-out',\n    [],\n    [],\n    ComponentType.GENERAL,\n    AnimationType.EXIT,\n    ['fade out']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const flyinFilter = new BaseFilter(\n    'Fly-in',\n    [],\n    [],\n    ComponentType.GENERAL,\n    AnimationType.ENTER,\n    ['Fly-in']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const showAnnotationZoomFilter = new BaseFilter(\n    'Zoom-in-then-zoom-out',\n    [],\n    [],\n    ComponentType.ANNOTATION,\n    AnimationType.HIGHLIGHT,\n    ['zoom-in-then-zoom-out']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const showArrowLabelAnnotationFilter = new BaseFilter(\n    'Show-arrow-label',\n    ['annotation', 'arrow'],\n    [],\n    ComponentType.ANNOTATION,\n    AnimationType.HIGHLIGHT,\n    ['fade in then fade out annotation']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const fadeInFadeOutFilter = new BaseFilter(\n    'Fade-in-then-fade-out',\n    [],\n    [],\n    ComponentType.ANNOTATION,\n    AnimationType.HIGHLIGHT,\n    ['fade in then fade out']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const dynamicNumFilter = new BaseFilter(\n    'Dynamic-number',\n    ['annotation'],\n    [],\n    ComponentType.ANNOTATION,\n    AnimationType.HIGHLIGHT,\n    ['dynamtic number']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const titleFilter = new BaseFilter(\n    'Title',\n    ['title'],\n    ['subtitle'],\n    ComponentType.CHART,\n    AnimationType.ENTER,\n    ['fade in title']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const axisFloatInFilter = new BaseFilter(\n    'Axes float in',\n    ['axis'],\n    ['title'],\n    ComponentType.CHART,\n    AnimationType.ENTER,\n    ['float in axis']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const axisFadeInFilter = new BaseFilter(\n    'Axes fade in',\n    ['axis'],\n    ['title'],\n    ComponentType.CHART,\n    AnimationType.ENTER,\n    ['fade in axis']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const barChartFilter = new BaseFilter(\n    'Bar chart',\n    ['bar', 'axis'],\n    ['title','bar-label'],\n    ComponentType.CHART,\n    AnimationType.ENTER,\n    ['grow bar and fade in axis']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const barChartWithLegendFilter = new BaseFilter(\n    'Bar chart with legend',\n    ['bar', 'axis', 'legend'],\n    ['title','bar-label'],\n    ComponentType.CHART,\n    AnimationType.ENTER,\n    ['grow bar and fade in axis and legend']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const scatterChartWithLegendFilter = new BaseFilter(\n    'Scatter chart with legend',\n    ['scatter | point', 'legend', 'axis'],\n    ['title', 'label'],\n    ComponentType.CHART,\n    AnimationType.ENTER,\n    ['fade in scatter and axis']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const lineChartFilter = new BaseFilter(\n    'Line chart',\n    ['line', 'axis'],\n    ['scatter', 'title', 'label','point'],\n    ComponentType.CHART,\n    AnimationType.ENTER,\n    ['wipe line and fade in axis']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const lineChartByLegendFilter = new BaseFilter(\n    'Line chart by legend',\n    ['line', 'axis'],\n    ['scatter', 'title','legend', 'label','point'],\n    ComponentType.CHART,\n    AnimationType.ENTER,\n    ['wipe line and fade in axis']\n);","import {AnimationType} from \"@/core/const/AnimationType\";\nimport {ComponentType} from \"@/core/const/ComponentType\";\nimport {BaseFilter} from \"@/core/filters/BaseFilter\";\n\nexport const lineChartByOrderFilter = new BaseFilter(\n    'Line chart by order',\n    ['line', 'axis'],\n    ['scatter', 'title','legend', 'label','point'],\n    ComponentType.CHART,\n    AnimationType.ENTER,\n    ['wipe line and fade in axis']\n);","// Mark 12\nimport { barWithAxisLabelFilter } from \"@/core/filters/MarkFilter/MarkBarWithAxisLabelFilter\";\nimport { barWithLegendFilter } from \"@/core/filters/MarkFilter/MarkBarWithLegendFilter\";\nimport { lineFilter } from \"@/core/filters/MarkFilter/MarkLineFilter\";\nimport { linesByLegendFilter } from \"@/core/filters/MarkFilter/MarkLinesByLegendFilter\";\nimport { linesByOrderFilter } from \"@/core/filters/MarkFilter/MarkLinesByOrderFilter\";\nimport { scatterChartFilter } from \"@/core/filters/MarkFilter/MarkScatterChartFilter\";\nimport { scatterFilter } from \"@/core/filters/MarkFilter/MarkScatterFilter\";\nimport { scatterWithLegendFilter } from \"@/core/filters/MarkFilter/MarkScatterWithLegendFilter\";\nimport { barFilter} from \"@/core/filters/MarkFilter/MarkBarFilter\";\nimport { barBounceFilter} from \"@/core/filters/MarkFilter/MarkBarBounceFilter\";\nimport { pieFilter } from \"@/core/filters/MarkFilter/MarkPieFilter\";\nimport { pieWithLegendFilter } from \"@/core/filters/MarkFilter/MarkPieWithLegendFilter\";\nimport { sectorHighlightFilter } from \"@/core/filters/MarkFilter/MarkSectorHighlightFilter\";\nimport { lineHighlightFilter } from \"@/core/filters/MarkFilter/MarkLineHighlightFilter\";\n\n\n// General 15\nimport { fadeInFilter } from \"@/core/filters/GeneralFilter/GeneralFadeInFilter\";\nimport { growFilter } from \"@/core/filters/GeneralFilter/GeneralGrowFilter\";\nimport { floatFilter } from \"@/core/filters/GeneralFilter/GeneralFloatFilter\";\n// import { basicZoomFilter } from \"@/core/filters/GeneralFilter/GeneralBasicZoomFilter\";\nimport { zoomEnterFilter } from \"@/core/filters/GeneralFilter/GeneralZoomEnterFilter\";\n// import { wipeFilter } from \"@/core/filters/GeneralFilter/GeneralWipeFilter\";\nimport { changeColorFilter } from \"@/core/filters/GeneralFilter/GeneralChangeColorFilter\";\nimport { showPathFilter } from \"@/core/filters/GeneralFilter/GeneralShowPathFilter\";\nimport { highLightFilter } from \"@/core/filters/GeneralFilter/GeneralHighlightFilter\";\nimport { cameraZoomFilter } from \"@/core/filters/GeneralFilter/GeneralCameraZoomFilter\";\nimport { cameraMoveFilter } from \"@/core/filters/GeneralFilter/GeneralCameraMoveFilter\";\nimport { moveToFilter } from \"@/core/filters/GeneralFilter/GeneralMoveToFilter\";\nimport { moveFromFilter } from \"@/core/filters/GeneralFilter/GeneralMoveFromFilter\";\nimport { zoomExitFilter } from \"@/core/filters/GeneralFilter/GeneralZoomExitFilter\";\n// import { basicZoomExitFilter } from \"@/core/filters/GeneralFilter/GeneralBasicZoomExitFilter\";\nimport { fadeOutFilter } from \"@/core/filters/GeneralFilter/GeneralFadeOutFilter\";\nimport { flyinFilter } from \"@/core/filters/GeneralFilter/GeneralFlyinFilter\";\n\n// Annotation 5\nimport { showAnnotationZoomFilter } from \"@/core/filters/AnnotationFilter/AnnotationZoomInThenZoomOutFilter\";\nimport { showArrowLabelAnnotationFilter } from \"@/core/filters/AnnotationFilter/AnnotationShowArrowLabelAnnotationFilter\";\n// import { circleFilter } from \"@/core/filters/AnnotationFilter/AnnotationCircleFilter\";\nimport { fadeInFadeOutFilter } from \"@/core/filters/AnnotationFilter/AnnotationFadeInFadeOutFilter\";\nimport { dynamicNumFilter } from \"@/core/filters/AnnotationFilter/AnnotationDynamicNumFilter\";\n\n// Chart 9\nimport { titleFilter } from \"@/core/filters/ChartFilter/ChartTitleFilter\";\nimport { axisFloatInFilter } from \"@/core/filters/ChartFilter/ChartAxisFloatInFilter\";\nimport { axisFadeInFilter } from \"@/core/filters/ChartFilter/ChartAxisFadeInFilter\";\nimport { barChartFilter } from \"@/core/filters/ChartFilter/ChartBarChartFilter\";\nimport { barChartWithLegendFilter } from \"@/core/filters/ChartFilter/ChartBarChartWithLegendFilter\";\nimport { scatterChartWithLegendFilter } from \"@/core/filters/ChartFilter/ChartScatterChartWithLegendFilter\";\nimport { lineChartFilter } from \"@/core/filters/ChartFilter/ChartLineChartFilter\";\nimport { lineChartByLegendFilter } from \"@/core/filters/ChartFilter/ChartLineChartByLegendFilter\";\nimport { lineChartByOrderFilter } from \"@/core/filters/ChartFilter/ChartLineChartByOrderFilter\";\n\n\n// grammatically it should be builtInWrappers\nexport const buildInFilters = [\n  // Chart 9\n  titleFilter,\n  axisFloatInFilter,\n  axisFadeInFilter,\n\n  barFilter,\n  barBounceFilter,\n  barWithAxisLabelFilter,\n  barChartFilter,\n  barWithLegendFilter,\n  barChartWithLegendFilter,\n\n\n  lineFilter,\n  lineChartFilter,\n  lineHighlightFilter,\n  linesByLegendFilter,\n  linesByOrderFilter,\n  lineChartByLegendFilter,\n  lineChartByOrderFilter,\n\n  scatterFilter,\n  scatterChartFilter,\n  scatterWithLegendFilter,\n  scatterChartWithLegendFilter,\n\n  pieFilter,\n  sectorHighlightFilter,\n  pieWithLegendFilter,\n\n  // Annotation 5\n\n  showArrowLabelAnnotationFilter,\n  showPathFilter,\n  dynamicNumFilter,\n  showAnnotationZoomFilter,\n  fadeInFadeOutFilter,\n  changeColorFilter,\n  highLightFilter,\n  // circleFilter,\n\n  // General 17\n  fadeInFilter,\n  growFilter,\n\n  floatFilter,\n  flyinFilter,\n  // basicZoomFilter,\n  zoomEnterFilter,\n  // wipeFilter,\n\n  moveToFilter,\n  moveFromFilter,\n  cameraZoomFilter,\n  cameraMoveFilter,\n  \n  zoomExitFilter,\n  // basicZoomExitFilter,\n  fadeOutFilter,\n\n\n\n];\n","import {Compiler} from \"@/core/compiler/Compiler\";\nimport {buildInWrappers} from \"@/core/previewer/build-in-wrapper\";\nimport {buildInPreviewers} from \"@/core/previewer/template-previewer\";\nimport {buildInFilters} from \"@/core/filters\";\nimport gsap from 'gsap';\nimport {TemplateParser} from \"@/core/parser/TemplateParser\";\n\n// gsap.defaults({\n//   immediateRender: false,\n// })\n\nconst compiler = new Compiler();\n\n/**\n * @param {Element | string} elementOrSelector\n * @param {Object} json\n * @param {Object<string, any>} vars\n * @returns {gsap.core.Timeline}\n */\nfunction render(elementOrSelector, json, vars) {\n  return compiler.compile(elementOrSelector, json, vars);\n}\n\n/**\n * @returns {PreviewerManager}\n */\nfunction getPreviewerManager() {\n  return compiler.previewerManager;\n}\n\n/**\n * @param {string} templateName\n * @returns {BaseTemplate}\n */\nfunction getTemplate(templateName) {\n  return compiler.templateLib.getTemplate(templateName);\n}\n\n/**\n * Reset the custom templates in lib\n */\nfunction resetTemplateLib() {\n  compiler.templateLib.reset();\n}\n\n/**\n * @param {...Object} templateJSON\n */\nfunction registerTemplates(...templateJSON) {\n  templateJSON.forEach(json => {\n    const template = TemplateParser.fromJSON(json);\n    compiler.templateLib.registerTemplates(template);\n  });\n}\n\n/**\n * @param {string} templateName\n * @returns {string}\n */\nfunction getTemplateClass(templateName) {\n  const wrapper = getPreviewerManager().getDefaultWrapper(templateName);\n  if (wrapper) {\n    return wrapper.templateLabels[0];\n  } else {\n    return 'custom';\n  }\n}\n\n/**\n * @returns {{templateName: string, isBuildIn: boolean}[]}\n */\nfunction getTemplateInfoList() {\n  const templates = [];\n  compiler.templateLib.getAllBuildInTemplates().forEach(template => {\n    templates.push({templateName: template.templateName, isBuildIn: true});\n  });\n  compiler.templateLib.getAllCustomTemplate().forEach(template => {\n    templates.push({templateName: template.templateName, isBuildIn: false});\n  });\n  return templates;\n}\n\n/**\n * @param {string | HTMLElement} elementOrSelector\n * @param {string | Object} animationJSON\n * @param {Object?} variable\n * @returns {number}\n */\nfunction computeDuration(elementOrSelector, animationJSON, variable) {\n  return compiler.computeDuration(elementOrSelector, animationJSON, variable);\n}\n\n/**\n * @param {string | HTMLElement} elementOrSelector\n * @param {string} templateName\n * @returns {Set<Element>}\n */\nfunction computePossibleElements(elementOrSelector, templateName) {\n  return compiler.computePossibleElements(elementOrSelector, templateName);\n}\n\nexport const aniChart = {\n  compiler,\n  buildInWrappers,\n  buildInPreviewers,\n  buildInFilters,\n  render,\n  getPreviewerManager,\n  getTemplate,\n  getTemplateInfoList,\n  resetTemplateLib,\n  registerTemplates,\n  getTemplateClass,\n  computeDuration,\n  computePossibleElements,\n};\n","<template>\n  <div class=\"export-svg-container-master\">\n    <svg ref=\"svg\" :viewBox=\"`0 0 ${width} ${height}`\">\n      <rect x=\"0\" y=\"0\" :width=\"width\" :height=\"height\" :fill=\"'#ffffff'\" stroke=\"none\"></rect>\n      <g class=\"scene\"/>\n    </svg>\n  </div>\n</template>\n\n<script>\n  import {mapState} from \"vuex\";\n  import * as ExportUtils from \"@/utils/output/ExportUtils\";\n  import {aniChart} from \"@/core\";\n\n  export default {\n    name: 'ExportSVGContainer',\n    data() {\n      return {\n        svg: null,\n        scene: null,\n\n        // constance\n        framerate: 24,  // frame every sec\n\n        // temp var\n        width: 0,\n        height: 0,\n        timeline: null,\n        totalTime: 0,\n        curTime: 0,\n        svgList: [],\n      }\n    },\n    methods: {\n      exportVideo() {\n        this.loadSVG();\n        this.$nextTick(() => {\n          this.collectFrames();\n        })\n      },\n      loadSVG() {\n        // reset the attr changed by Camera-zoom effect\n        this.scene.innerHTML = this.svgStr;\n        this.scene._gsap = null;      // remove the gsap cache\n        this.scene.removeAttribute('transform')\n\n        // update size\n        const chart = this.scene.querySelector('svg');\n        this.width = chart.getAttribute('width');\n        this.height = chart.getAttribute('height');\n      },\n      collectFrames() {\n        this.timeline = aniChart.render(this.scene, this.animationJSON, {});\n\n        this.$nextTick(() => {\n          this.startCollect()\n        })\n      },\n      startCollect() {\n        console.log('start collect')\n        this.totalTime = this.timeline.totalDuration();\n        console.log('total duration', this.totalTime)\n        this.timeline.progress(0)\n        this.curTime = 0;\n        this.svgList = [];\n        this.$nextTick(this.collectCurrentFrame);\n      },\n      collectCurrentFrame() {\n        // console.log('collect')\n        const svg = this.$el.innerHTML;\n        this.svgList.push(svg);\n        this.$nextTick(this.moveToNext);\n      },\n      moveToNext() {\n        // console.log('seek time ptr')\n        if (this.curTime > this.totalTime) {\n          this.$nextTick(this.convertFramesToVideo);\n          return;\n        }\n        this.timeline.progress(this.curTime / this.totalTime)\n        // console.log('time:', this.curTime)\n        this.curTime += 1 / this.framerate;\n        this.$nextTick(this.collectCurrentFrame);\n      },\n      convertFramesToVideo() {\n        const innerSvg = this.scene.querySelector('svg');\n        let width = parseInt(innerSvg.getAttribute(\"width\"))\n        let height = parseInt(innerSvg.getAttribute(\"height\"))\n\n        // make the size smaller. Otherwise, we will get an OOM\n        const maxWidth = 540, maxHeight = 360;\n        const wFactor = width > maxWidth ? maxWidth / width : 1.0;\n        const hFactor = height > maxHeight ? maxHeight / height : 1.0;\n        const factor = Math.min(wFactor, hFactor);\n        width = Math.floor(width * factor);\n        height = Math.floor(height * factor);\n        // make them be even number (required by ffmpeg)\n        width += width & 1;\n        height += height & 1;\n\n        console.log('export', {svgList: this.svgList, audioBuffer: this.audioBuffer, width, height})\n\n        this.$store.commit('editor/setIsExportingFiles', true);\n\n        const generateAndDownload = () => {\n          let mp4, code, message;\n          try {\n            let ret = ExportUtils.svgStringArrayToMP4(this.svgList, this.audioBuffer, width, height, this.framerate)\n            mp4 = ret.result;\n            code = ret.code;\n            message = ret.message;\n          } catch (e) {\n            console.error(e);\n          }\n\n          console.log('create finished')\n          if (code === 0) {\n            this.$notify({\n              type: 'success',\n              title: 'Generate MP4 file successfully',\n            });\n            ExportUtils.download(mp4, 'output.mp4')\n          } else {\n            this.$notify({\n              type: 'error',\n              title: 'Fail to generate MP4 file',\n              message: 'Message returned: ' + message\n            });\n          }\n\n          this.$store.commit('editor/setIsExportingFiles', false);\n        }\n\n        // wait 1 sec to play the loading animation\n        setTimeout(generateAndDownload, 1000);\n      },\n    },\n    mounted() {\n      this.svg = this.$refs.svg;\n      this.scene = this.svg.querySelector('.scene');\n    },\n    watch: {\n      exportSign() {\n        this.exportVideo();\n      }\n    },\n    computed: {\n      ...mapState('editor', {\n        exportSign: state => state.exportSign,\n        svgStr: state => state.scene?.svgStr ?? '',\n        animationJSON: state => state.animationJSON,\n        audioBuffer: state => state.audioBuffer,\n      }),\n    }\n  }\n</script>\n\n<style scoped>\n.export-svg-container-master {\n  user-select: none;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExportSVGContainer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExportSVGContainer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ExportSVGContainer.vue?vue&type=template&id=47eb8106&scoped=true&\"\nimport script from \"./ExportSVGContainer.vue?vue&type=script&lang=js&\"\nexport * from \"./ExportSVGContainer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ExportSVGContainer.vue?vue&type=style&index=0&id=47eb8106&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"47eb8106\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <el-row class=\"editor-view\"\n          tabindex=\"0\"\n          v-on:keyup.alt.67=\"clickLeftCollapseButton\">\n    <div class=\"header-container\" :style=\"{height: headerHeight + 'px'}\">\n        <el-row :gutter=\"5\" style=\"height: 100%;\" type=\"flex\" align=\"middle\">\n          <el-col :span=\"3\">\n            <span class=\"header-text\" style=\"user-select: none; cursor: pointer\"\n                  @click=\"clickHeaderText\"\n                  title=\"Gaia Homepage\">Gaia</span>\n          </el-col>\n\n          <!--<el-button @click=\"exitEditor\" icon=\"el-icon-back\" style=\"margin-left: 20px;\" size=\"medium\">Back</el-button>-->\n          <el-col :span=\"10\" style=\"text-align: left;\">\n            <el-button icon=\"el-icon-folder-opened\"\n                       type=\"primary\" plain\n                       size=\"medium\"\n                       style=\"font-size: 0.9rem; margin-left: 10px;\"\n                       @click=\"openProjSelPanel\">Load</el-button>\n            <el-button icon=\"el-icon-download\"\n                       type=\"primary\" plain\n                       size=\"medium\"\n                       style=\"font-size: 0.9rem; margin-left: 20px;\"\n                       @click=\"saveSpec\">Save Spec</el-button>\n<!--            <el-button icon=\"el-icon-download\"-->\n<!--                       type=\"primary\" plain-->\n<!--                       size=\"medium\"-->\n<!--                       style=\"font-size: 0.9rem; margin-left: 20px;\"-->\n<!--                       @click=\"exportClick\">Export</el-button>-->\n            <!-- <el-button :type=\"activeSidePanel === 'elements'? 'primary': ''\" size=\"medium\"\n                       style=\"font-size: 0.9rem; margin-left: 10px;\"\n                       :disabled=\"targetDisabled\"\n                       @click=\"changeRightPanel('elements')\">Elements\n            </el-button> -->\n            <!-- <el-button size=\"medium\"\n                       style=\"font-size: 0.9rem; margin-left: 10px;\"\n                       @click=\"redo()\">Redo\n            </el-button>\n            <el-button size=\"medium\"\n                       style=\"font-size: 0.9rem; margin-left: 10px;\"\n                       @click=\"undo()\">Undo\n            </el-button> -->\n          </el-col>\n\n          <el-col :span=\"5\" :offset=\"6\" style=\"text-align: center;\">\n            <el-button icon=\"el-icon-magic-stick\" :type=\"showCode ? 'primary': ''\" size=\"medium\"\n                      style=\"font-size: 0.9rem;\"\n                      @click=\"clickLeftCollapseButton\">Code Panel\n            </el-button>\n            <!-- <el-button :type=\"activeSidePanel === 'pane'? 'primary': ''\" size=\"medium\"\n                      style=\"font-size: 0.9rem;\"\n                      :disabled=\"targetDisabled\"\n                      @click=\"changeRightPanel('pane')\">Animation Pane\n            </el-button> -->\n          </el-col>\n<!--\n          <el-col :span=\"1\" style=\"text-align: center;\">\n            <el-popover placement=\"bottom\" title=\"How to use\" trigger=\"click\" width=\"500\">\n              <div>Follow these steps to create a data video:</div>\n              <div style=\"padding-left: 0px;\">1. <strong>Input Narration</strong> Enter text description as narrations, the system can automatically generate audio as voiceover.</div>\n              <div style=\"padding-left: 0px;\">2. <strong>Input Static Design</strong> Upload an image that you want to animate.</div>\n              <div style=\"padding-left: 0px;\">3. <strong>Narration-Visual Linking</strong></div>\n              <div style=\"padding-left: 10px;\">(1) Select text in the text panel.</div>\n              <div style=\"padding-left: 10px;\">(2) A toolbox will pop up above the selected text. Click the green button and select related elements on the SVG to create a link between the selected text and elements.</div>\n              <div style=\"padding-left: 0px;\">4. <strong>Apply animation to Create Videos</strong> Click the red button in the toolbox, and apply an animation to the link. This animation will be aligned to the selected text.</div>\n              <el-button slot=\"reference\" type=\"text\" size=\"medium\">Help</el-button>\n            </el-popover>\n          </el-col> -->\n\n          <el-col :span=\"0\">\n            <audio ref=\"audioEl\" style=\"margin-left: auto; display: none\" controls=\"controls\" :src=\"audioSrc\"/>\n          </el-col>\n        </el-row>\n    </div>\n\n    <el-row class=\"content-container\"\n            v-loading=\"isExportingFiles\"\n            element-loading-text=\"Exporting...It will take a few minutes.\">\n\n      <div class=\"left-aside-container\"\n           style=\"margin-right: 4px;\"\n           :style=\"{width: asideWidth + 'px'}\">\n        <DebugPanel\n          :pane-height=\"debugPanelHeight\"\n          :pane-width=\"asideWidth\"\n          :style=\"{height: '100%'}\"\n          style=\"width: calc(100% - 3px);\"/>\n      </div>\n\n      <div id=\"resize-left\" class=\"v-resizer\" v-show=\"asideWidthCache === null\"></div>\n\n      <div class=\"middle-container\" style=\"margin-left: -2px;\">\n        <div class=\"main-container\" @click=\"clearSelection\"\n        :style=\"{height: svgHeight + 'px'}\"\n        ref=\"mainContainer\">\n          <ExportSVGContainer style=\"position: absolute; z-index: 992;\"/>\n          <SVGContainer style=\"position: absolute; z-index: 993;\" v-show=\"aniStatus === 'stop'\"/>\n          <div style=\"width: 90%; height: 90%; background: white; position: absolute; z-index: 995;\"\n               :style=\"{ visibility: aniStatus === 'playing' ? 'visible' : 'hidden' }\"/>\n          <AniSVGContainer style=\"position: absolute; z-index: 995;\"\n                           v-show=\"aniStatus !== 'stop'\"/>\n        </div>\n\n        <div class=\"footer-container\" :style=\"{height: footerHeight + 'px'}\">\n          <div class=\"h-resizer\" id=\"hResizer\"\n          :style=\"{\n            width: controlPanelWidth + 'px',\n            bottom: (footerHeight-6) + 'px',\n            }\"\n          @mousedown=\"bottomResizerMousedown\">\n          </div>\n          <ControlPanel\n          :footerHeight=\"footerHeight\"/>\n        </div>\n      </div>\n\n    </el-row>\n\n    <el-dialog\n        title=\"Load\"\n        :visible.sync=\"projSelPanelVisible\"\n        lock-scroll\n        fullscreen\n        width=\"800px\">\n      <ProjSelectionPanel @closeProjSelPanel=\"closeProjSelPanel\"></ProjSelectionPanel>\n    </el-dialog>\n\n  </el-row>\n</template>\n\n<script>\n  import {mapGetters, mapState} from 'vuex'\n  import * as d3 from 'd3'\n  import ControlPanel from \"@/components/editor/ControlPanel/ContrlPanel\";\n  import SVGContainer from \"@/components/editor/SVGContainer\";\n  import AniSVGContainer from \"@/components/editor/AniSVGContainer\";\n  import DebugPanel from \"@/components/editor/AsidePanel/DebugPanel\";\n  import ProjSelectionPanel from \"@/components/editor/ProjSelPanel/ProjSelectionPanel\";\n  import ExportSVGContainer from \"@/components/editor/ExportSVGContainer\";\n\n\n  export default {\n    name: 'EditorView',\n    components: {\n      ExportSVGContainer,\n      DebugPanel,\n      SVGContainer,\n      ControlPanel,\n      AniSVGContainer,\n      ProjSelectionPanel,\n    },\n    data() {\n      return {\n        asideWidth: 590,\n        asideWidthArray: [210, 400, 590, 780, 970],\n        asideWidthScale: null,\n        asideWidthCache: null,\n\n        showCode: true,\n        debugPanelHeight: 0,\n\n        activeSidePanel: '',\n\n        headerHeight: 50,\n        footerRatio: 0.25,\n        footerHeight: 0,\n\n        svgUrl: '',\n        targetDisabled: false,\n\n        projSelPanelVisible: false,\n      }\n    },\n    mounted() {\n      // if (!this.scene) {\n      //   // this.$router.push('system');\n      // }\n      let index = 0;\n      try {\n        index = parseInt(this.$route.query['example-index'] ?? ('' + index))\n      } catch (e) {\n        console.error('Failed to parse example index')\n        console.log(e)\n      }\n      this.$store.commit('resource/changeProjectId', this.projectList[index].id)\n\n      this.$store.commit('editor/mountAudioElement', this.$refs.audioEl);\n\n      this.initAsideWidthScale()\n      this.setupLeftResizer();\n      this.setupLeftMiddleResizer();\n\n      // initWorkspace will be called by project store\n      // this.$store.commit('editor/initWorkspace');\n\n      const el = this.$el.querySelector('.left-aside-container');\n      this.debugPanelHeight = el.getBoundingClientRect().height - 44;\n\n      this.$store.commit('editor/changeWindowSize');\n\n      this.$store.commit('editor/mountMainContainer', this.$refs.mainContainer);\n\n      let lastCall = Date.now();\n\n      // Register the window size listener\n      window.onresize = () => {\n        if (Date.now() - lastCall > 100) {\n          this.$store.commit('editor/changeWindowSize');\n          lastCall = Date.now();\n        }\n      }\n\n      this.footerHeight = this.footerRatio * this.windowHeight;\n\n      this.$store.commit('editor/changeHeaderHeight', this.headerHeight);\n      this.$store.commit('editor/changeFooterHeight', this.footerHeight);\n\n      this.$store.commit('editor/changeLeftPanelWidth', this.asideWidth);\n    },\n    methods: {\n      saveSpec() {\n        this.$store.commit('editor/saveSpec');\n      },\n      clickHeaderText() {\n        this.$router.push('homepage');\n      },\n      openProjSelPanel() {\n        this.projSelPanelVisible = true;\n      },\n      closeProjSelPanel() {\n        this.projSelPanelVisible = false;\n      },\n      /* eslint-disable */\n      exportClick() {\n        this.$store.commit('editor/changeExportSign');\n      },\n      isRenewedOption(id) {\n        return this.renewedOptions.has(id);\n      },\n      disableTargetButton() {\n        this.targetDisabled = true;\n      },\n      enableTargetButton() {\n        this.targetDisabled = false;\n      },\n      initAsideWidthScale() {\n        let domain = []\n        for (let i = 0; i < this.asideWidthArray.length - 1; ++i) {\n          domain.push((this.asideWidthArray[i] + this.asideWidthArray[i + 1]) / 2)\n        }\n        this.asideWidthScale = d3.scaleThreshold()\n            .domain(domain)\n            .range(this.asideWidthArray)\n      },\n      getTTSResult() {\n        this.$store.dispatch('resource/queryTTSAudioGoogle', {\n          el: this,\n        })\n      },\n      setupLeftResizer() {\n        const that = this;\n        const resize = document.getElementById(\"resize-left\");\n        let inEl = false\n        let moving = false\n        resize.onmouseenter = function() {\n          inEl = true\n          resize.style.background = \"rgba(33,150,243,0.67)\";\n        }\n        resize.onmouseleave = function() {\n          inEl = false\n          if (moving) return\n          resize.style.background = \"\"\n        }\n\n        resize.onmousedown = function() {\n          moving = true\n          document.onmousemove = function(e) {\n            const curX = e.clientX;\n            that.asideWidth = that.asideWidthScale(curX)\n            that.$store.commit('editor/changeLeftPanelWidth', that.asideWidth);\n            // console.log(that.asideWidth)\n          };\n          document.onmouseup = function() {\n            moving = false\n            document.onmousemove = null;\n            document.onmouseup = null;\n            if (!inEl) {\n              resize.style.background = \"\"\n            }\n          };\n          return false;\n        };\n      },\n      setupLeftMiddleResizer() {\n        const that = this;\n        const resize = document.getElementById(\"resize-left-middle\");\n        if (!resize) {\n          return;\n        }\n        let inEl = false\n        let moving = false\n        resize.onmouseenter = function() {\n          inEl = true\n          resize.style.background = \"rgba(33,150,243,0.67)\";\n        }\n        resize.onmouseleave = function() {\n          inEl = false\n          if (moving) return\n          resize.style.background = \"\"\n        }\n\n        resize.onmousedown = function() {\n          moving = true\n          const rect = document.getElementsByClassName('content-container')[0].getBoundingClientRect();\n          document.onmousemove = function(e) {\n            that.topPercentage = (e.clientY - rect.top) / rect.height * 100;\n            console.log(rect, that.topPercentage);\n          };\n          document.onmouseup = function() {\n            moving = false\n            document.onmousemove = null;\n            document.onmouseup = null;\n            if (!inEl) {\n              resize.style.background = \"\"\n            }\n          };\n          return false;\n        };\n      },\n      bottomResizerMousedown() {\n        const that = this;\n        let lastUpdate = Date.now() - 100;\n\n        document.onmousemove = function(event) {\n          if (Date.now() - lastUpdate < 100) return;\n          lastUpdate = Date.now();\n\n          const nowY = event.clientY;\n          let nowRatio = (that.windowHeight-nowY) / that.windowHeight;\n          nowRatio = Math.max(0.1, nowRatio);\n          nowRatio = Math.min(0.8, nowRatio);\n          that.footerRatio = nowRatio;\n\n          document.onmouseup = function() {\n            document.onmousemove = null;\n            document.onmouseup = null;\n          }\n        }\n      },\n      changeDebugPanelStatus() {\n        this.showCode = !this.showCode;\n        if (this.showCode) {\n          const el = this.$el.querySelector('.left-aside-container');\n          this.debugPanelHeight = el.getBoundingClientRect().height - 44;\n        }\n      },\n      changeRightPanel(target) {\n        if (this.activeSidePanel === target)\n          this.activeSidePanel = '';\n        else {\n          this.activeSidePanel = target;\n        }\n      },\n      undo() {\n\n      },\n      redo() {\n\n      },\n      exitEditor() {\n        this.$store.commit('editor/stashScene');\n        this.$router.push('system');\n      },\n      clearSelection(/*event*/) {\n        // const {currentTarget, target} = event;\n        // if (currentTarget !== target) {\n        //   return;\n        // }\n        // if (this.svgPanelInSelecting) {\n        //   this.$store.commit('target/changeSelectedTargets', []);\n        // }\n      },\n      clickLeftCollapseButton() {\n        this.changeDebugPanelStatus();\n        if (this.asideWidthCache === null) {\n          this.asideWidthCache = this.asideWidth;\n          this.asideWidth = 0;\n        } else {\n          this.asideWidth = this.asideWidthCache;\n          this.asideWidthCache = null;\n        }\n        this.$store.commit('editor/changeLeftPanelWidth', this.asideWidth);\n      },\n    },\n    watch: {\n      projectId() {\n        if (!this.projectId) {    // first time\n          return;\n        }\n        this.$store.dispatch('resource/queryProjectSpec2', this.projectId);\n      },\n      windowWidth() {\n        this.$store.commit('editor/updateChartSize');\n      },\n      windowHeight() {\n        this.footerHeight = this.windowHeight * this.footerRatio;\n        this.$store.commit('editor/changeFooterHeight', this.footerHeight);\n        this.$store.commit('editor/updateChartSize');\n      },\n      leftPanelWidth() {\n        this.$store.commit('editor/updateChartSize');\n      },\n      targetPanelWidth() {\n        this.$store.commit('editor/updateChartSize');\n      },\n      footerRatio() {\n        this.footerHeight = this.windowHeight * this.footerRatio;\n        this.$store.commit('editor/changeFooterHeight', this.footerHeight);\n        this.$store.commit('editor/updateChartSize');\n      },\n      currentMode() {\n        if (this.currentMode === 'animation') {\n          this.activeSidePanel = 'effect';\n        }\n      },\n    },\n    computed: {\n      ...mapState('resource', {\n        projectList: state => state.projectList,\n        examples: () => [],\n      }),\n      ...mapState('editor', {\n        scene: state => state.scene,\n        audioSrc: state => state.audioSrc,\n        nlpLoading: state => state.nlpLoading,\n        windowWidth: state => state.windowWidth,\n        windowHeight: state => state.windowHeight,\n        aniStatus: state => state.aniStatus,\n        leftPanelWidth: state => state.leftPanelWidth,\n        targetPanelWidth: state => state.targetPanelWidth,\n        currentMode: state => state.currentMode,\n\n        timeline: state => state.timeline,\n        isExportingFiles: state => state.isExportingFiles,\n      }),\n      ...mapGetters('editor', [\n          'svgPanelInSelecting',\n      ]),\n      sampleFileOptions() {\n        return this.examples.map(e => ({label: e.label, value: e}))\n      },\n      projectId: {\n        set(value) {\n          this.$store.commit('resource/changeProjectId', value);\n        },\n        get() {\n          return this.$store.state.resource.projectId;\n        }\n      },\n      optionGroups() {\n        const groupMap = new Map();\n        this.projectList.forEach(project => {\n          const group = project.group;\n          if (group === 'Single chart' || group === 'Custom chart' || group.includes('Vega')) {\n            if (groupMap.has(group)) {\n              groupMap.get(group).push(project);\n            } else {\n              groupMap.set(group, [project]);\n            }\n          }\n        });\n        const groups = [];\n        groupMap.forEach((projects, group) => {\n          groups.push({\n            label: group ?? 'Other',\n            options: projects.map(p => ({label: p.label, value: p})),\n          });\n        });\n\n        return groups;\n      },\n      nlpButtonIcon() {\n        return this.nlpLoading ? 'el-icon-loading' : 'el-icon-magic-stick';\n      },\n      controlPanelWidth() {\n        return this.windowWidth - this.targetPanelWidth - this.leftPanelWidth;\n      },\n      svgHeight() {\n        return this.windowHeight - this.headerHeight - this.footerHeight;\n      },\n      renewedOptions() {\n        const newOptions = [\n          'vega-lite1',\n          'vega-lite2',\n          'vega-lite4',\n          'vega-lite5',\n          'vega-lite6',\n          'vega-lite7',\n          'vega-lite9',\n          'vega-lite21',\n          'vega-lite22',\n        ];\n        return new Set(newOptions);\n      },\n    }\n  }\n</script>\n\n<style scoped>\n  .editor-view {\n    height: 100%;\n    width: 100%;\n    overflow: hidden;\n  }\n  .header-container {\n    width: 100%;\n    border: 1px solid #d7d8dd;\n  }\n  .header {\n    height: 100%;\n    display: flex;\n    align-items: center;\n  }\n  .header-text {\n    margin-left: 10px;\n    font-size: 1.7em;\n    font-weight:bold;\n    /*font-family: 'Courier New', Courier, monospace;*/\n    font-family: 'Copperplate', 'Papyrus', 'fantasy';\n    color: #5190CC;\n  }\n  .content-container {\n    height: calc(100% - 50px);\n    width: 100%;\n    display: flex;\n    overflow: hidden;\n    position: relative;\n  }\n  .left-aside-container {\n    /*border: 1px solid #d7d8dd;*/\n    overflow: hidden;\n    padding: 0;\n    flex: none;\n    left: 0;\n  }\n  .middle-container {\n    width: auto;\n    overflow: hidden;\n    flex:1;\n  }\n  .main-container {\n    position: relative;\n\n    box-shadow: inset 0 0 10px rgb(221, 221, 221);\n    width: 100%;\n    overflow: auto;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n  .footer-container {\n    border: 1px solid #d7d8dd;\n  }\n  .right-aside-container {\n    border: 1px solid #d7d8dd;\n    overflow: hidden;\n    padding: 0;\n    right: 0;\n  }\n\n  .v-resizer {\n    z-index: 999;\n    transition: all 0.1s linear;\n  }\n\n  .v-resizer {\n    width: 6px;\n    height: 100%;\n    margin-left: -2px;\n    box-sizing: border-box;\n    cursor: ew-resize;\n  }\n\n  .h-resizer {\n    position: absolute;\n    z-index: 777;\n    height: 6px;\n    cursor: ns-resize;\n    transition: background-color 0.1s linear;\n  }\n\n  .h-resizer:hover {\n    background-color: rgba(33,150,243,0.67);\n  }\n\n  .collapse-button-container {\n    z-index: 888;\n    position: absolute;\n    display: flex;\n    align-items: center;\n    height: 100%;\n  }\n  .collapse-button-container.left {\n    margin-left: 6px;\n  }\n  .collapse-button-container.right {\n    margin-right: 3px;\n  }\n  .collapse-button {\n    height: 70px;\n    display: flex;\n    align-items: center;\n    background-color: rgba(217, 217, 217, 0.3);\n    cursor: pointer;\n    transition: background-color 0.2s;\n  }\n  .collapse-button.left {\n    border-radius: 0 5px 5px 0;\n  }\n  .collapse-button.right {\n    border-radius: 5px 0 0 5px;\n  }\n  .collapse-button:hover {\n    background-color: rgba(184, 184, 184, 0.82);\n  }\n\n  .inline-block {\n    display: inline-block;\n  }\n\n  .editor-view >>> .el-dialog__wrapper {\n    overflow: hidden;\n  }\n\n  .editor-view >>> .el-dialog {\n    margin-top: 50px !important;\n  }\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./EditorView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./EditorView.vue?vue&type=template&id=0567f386&scoped=true&\"\nimport script from \"./EditorView.vue?vue&type=script&lang=js&\"\nexport * from \"./EditorView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./EditorView.vue?vue&type=style&index=0&id=0567f386&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0567f386\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-container',{staticClass:\"homepage-view\"},[_c('el-header',[_c('PageHeader')],1),_c('el-main',[_c('el-col',{attrs:{\"span\":12,\"offset\":6}},[_c('el-row',{staticStyle:{\"display\":\"flex\",\"justify-content\":\"center\",\"align-items\":\"center\"}},[_c('div',{staticClass:\"title-text\"},[_vm._v(\"Gaia: A Grammar for Animated Infographics\")])]),_c('el-row',{staticStyle:{\"margin-bottom\":\"20px\",\"display\":\"flex\",\"justify-content\":\"center\",\"align-items\":\"center\",\"flex-direction\":\"column\"}},[_c('video',{staticClass:\"local-video\",staticStyle:{\"box-shadow\":\"0 0 5px #d7d7d7\"},attrs:{\"src\":'/Gaia_video.mp4',\"controls\":\"\",\"width\":\"100%\",\"height\":\"100%\"}}),_c('div',[_vm._v(\" You can also access the video at GaiaUI/public/Gaia_video.mp4. \")])])],1)],1),_c('el-footer',[_c('PageFooter')],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"page-header\"},[_c('el-row',{staticStyle:{\"height\":\"100%\"},attrs:{\"gutter\":5,\"type\":\"flex\",\"align\":\"middle\"}},[_c('el-col',{attrs:{\"span\":3,\"offset\":6}},[_c('span',{staticClass:\"header-text\",staticStyle:{\"user-select\":\"none\",\"cursor\":\"pointer\"},attrs:{\"title\":\"Gaia Homepage\"},on:{\"click\":_vm.clickHome}},[_vm._v(\"Gaia\")])]),_c('el-col',{attrs:{\"span\":9,\"offset\":6}},[_c('el-button',{staticClass:\"header-button\",attrs:{\"type\":\"text\"},nativeOn:{\"click\":function($event){return _vm.clickHome.apply(null, arguments)}}},[_vm._v(\"Home\")]),_c('el-button',{staticClass:\"header-button\",attrs:{\"type\":\"text\"},nativeOn:{\"click\":function($event){return _vm.clickGallery.apply(null, arguments)}}},[_vm._v(\"Gallery\")]),_c('el-button',{staticClass:\"header-button\",attrs:{\"type\":\"primary\",\"round\":\"\"},nativeOn:{\"click\":function($event){return _vm.clickLaunch.apply(null, arguments)}}},[_vm._v(\"Launch\")])],1)],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"page-header\">\n    <el-row :gutter=\"5\" style=\"height: 100%;\" type=\"flex\" align=\"middle\">\n      <el-col :span=\"3\" :offset=\"6\">\n        <span class=\"header-text\" style=\"user-select: none; cursor: pointer\"\n              @click=\"clickHome\"\n              title=\"Gaia Homepage\">Gaia</span>\n      </el-col>\n\n      <el-col :span=\"9\" :offset=\"6\">\n        <el-button type=\"text\" class=\"header-button\"\n                   @click.native=\"clickHome\">Home</el-button>\n        <el-button type=\"text\" class=\"header-button\"\n                   @click.native=\"clickGallery\">Gallery</el-button>\n        <el-button type=\"primary\" round class=\"header-button\"\n                   @click.native=\"clickLaunch\">Launch</el-button>\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: 'PageHeader',\n  components: {},\n  data() {\n    return {}\n  },\n  methods: {\n    clickHome() {\n      console.log(this.$route)\n      if (this.$route.path === '/homepage') {\n        return;\n      }\n      this.$router.push('homepage')\n    },\n    clickGallery() {\n      if (this.$route.path === '/gallery') {\n        return;\n      }\n      this.$router.push('gallery')\n    },\n    clickLaunch() {\n      if (this.$route.path === '/editor') {\n        return;\n      }\n      this.$router.push('editor')\n    },\n  },\n  mounted() {\n  },\n  computed: {}\n}\n</script>\n\n<style scoped>\n.page-header {\n  width: 100%;\n  height: 100%;\n  background: white;\n}\n\n.header-text {\n  font-size: 1.7em;\n  font-weight: bold;\n  /*font-family: 'Courier New', Courier, monospace;*/\n  font-family: 'Copperplate', 'Papyrus', 'fantasy';\n  color: #409eff;\n}\n\n.header-button {\n  font-size: 1.07rem;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageHeader.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageHeader.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PageHeader.vue?vue&type=template&id=82648678&scoped=true&\"\nimport script from \"./PageHeader.vue?vue&type=script&lang=js&\"\nexport * from \"./PageHeader.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PageHeader.vue?vue&type=style&index=0&id=82648678&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"82648678\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"page-footer\"},[_c('el-row',{staticStyle:{\"height\":\"100%\"},attrs:{\"gutter\":5,\"type\":\"flex\",\"align\":\"middle\"}},[_c('el-col',{attrs:{\"span\":3,\"offset\":6}},[_c('span',{staticClass:\"footer-text\",staticStyle:{\"user-select\":\"none\"}},[_vm._v(\"Gaia\")])]),_c('el-col',{attrs:{\"span\":12,\"offset\":3}},[_vm._v(\" A Grammar for Animated Infographics \")])],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"page-footer\">\n    <el-row :gutter=\"5\" style=\"height: 100%;\" type=\"flex\" align=\"middle\">\n      <el-col :span=\"3\" :offset=\"6\">\n        <span class=\"footer-text\" style=\"user-select: none\">Gaia</span>\n      </el-col>\n      <el-col :span=\"12\" :offset=\"3\">\n        A Grammar for Animated Infographics\n      </el-col>\n    </el-row>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  name: 'PageFooter',\n  components: {},\n  data() {\n    return {}\n  },\n  methods: {\n  },\n  mounted() {\n  },\n  computed: {}\n}\n</script>\n\n<style scoped>\n.page-footer {\n  width: 100%;\n  height: 100%;\n}\n\n.footer-text {\n  font-size: 1.7em;\n  font-weight: bold;\n  /*font-family: 'Courier New', Courier, monospace;*/\n  font-family: 'Copperplate', 'Papyrus', 'fantasy';\n  color: #9b9b9b;\n}\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageFooter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageFooter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PageFooter.vue?vue&type=template&id=bec64318&scoped=true&\"\nimport script from \"./PageFooter.vue?vue&type=script&lang=js&\"\nexport * from \"./PageFooter.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PageFooter.vue?vue&type=style&index=0&id=bec64318&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"bec64318\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <el-container class=\"homepage-view\">\n    <el-header>\n      <PageHeader></PageHeader>\n    </el-header>\n\n    <el-main>\n      <el-col :span=\"12\" :offset=\"6\">\n        <el-row style=\"display: flex; justify-content: center; align-items: center;\">\n          <div class=\"title-text\">Gaia: A Grammar for Animated Infographics</div>\n        </el-row>\n        <el-row style=\"margin-bottom: 20px; display: flex; justify-content: center; align-items: center; flex-direction: column;\">\n<!--          <p>-->\n<!--            Animated infographics are a potent storytelling tool in various fields, from business to science communication. However, their creation is often laborious, involving meticulous element selection, property adjustments, and timing management.-->\n<!--          </p>-->\n<!--          <p>-->\n<!--            Therefore, we propose Gaia, a declarative grammar designed to streamline animated infographic creation. With Gaia, users can craft animations expressively and intuitively, abstracting away the underlying implementation. Via an abstraction of animated targets, Gaia provides an approach to express, save and share infographic animations from expert designers and allows novices to reuse them, significantly speeding up the creation process.-->\n<!--          </p>-->\n<!--          <p>-->\n<!--            We implemented a componentized Gaia compiler prototype and built a demo system based on it with diverse examples to showcase its usability. In a user study involving non-expert participants, individuals with no prior animation experience successfully replicated real-world animations within just one hour of learning. Gaia has been applied in several practical projects, further advancing the field of animated infographic authoring.-->\n<!--          </p>-->\n          <video\n              class=\"local-video\"\n              style=\"box-shadow: 0 0 5px #d7d7d7;\"\n              :src=\"'/Gaia_video.mp4'\"\n              controls\n              width=\"100%\"\n              height=\"100%\"></video>\n          <div>\n            You can also access the video at GaiaUI/public/Gaia_video.mp4.\n          </div>\n        </el-row>\n      </el-col>\n    </el-main>\n\n    <el-footer>\n      <PageFooter></PageFooter>\n    </el-footer>\n  </el-container>\n</template>\n\n<script>\n\nimport PageHeader from \"@/components/webpage/common/PageHeader\";\nimport PageFooter from \"@/components/webpage/common/PageFooter\";\n\nexport default {\n  name: 'HomepageView',\n  components: {PageFooter, PageHeader},\n  data() {\n    return {}\n  },\n  methods: {},\n  mounted() {\n  },\n  computed: {}\n}\n</script>\n\n<style scoped>\n.homepage-view  {\n  overflow: auto;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  min-height: 100%;\n}\nheader {\n  border-bottom: 1px solid #d7d7d7;\n  width: 100%;\n  height: 60px;\n  position: fixed;\n  z-index: 999;\n}\nmain {\n  margin-top: 60px;\n  padding-bottom: 60px;\n  box-sizing: border-box;\n  flex: 1 0 auto;\n}\nfooter {\n  height: 60px;\n  border-top: 1px solid #d7d7d7;\n  flex: 0 0 auto;\n}\n\n.title-text {\n  font-size: 1.7rem;\n  font-weight: bold;\n  margin: 10px 0 30px 0;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HomepageView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HomepageView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./HomepageView.vue?vue&type=template&id=151d5a1b&scoped=true&\"\nimport script from \"./HomepageView.vue?vue&type=script&lang=js&\"\nexport * from \"./HomepageView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./HomepageView.vue?vue&type=style&index=0&id=151d5a1b&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"151d5a1b\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-container',{staticClass:\"gallery-view\"},[_c('el-header',[_c('PageHeader')],1),_c('el-main',[_c('el-col',{attrs:{\"span\":18,\"offset\":3}},[_c('el-row',[_c('span',{staticClass:\"page-text\"},[_vm._v(\"Gallery\")])]),_vm._l((_vm.projectGroups),function(projGroup){return _c('el-row',{key:projGroup.name},[_c('div',{staticClass:\"group-title\"},[_vm._v(_vm._s(projGroup.name)+\" (\"+_vm._s(projGroup.projects.length)+\")\")]),_c('div',{staticClass:\"svg-group\"},_vm._l((projGroup.projects),function(project){return _c('el-card',{key:project.id,staticClass:\"svg-item clickable\",attrs:{\"shadow\":\"hover\",\"body-style\":{ padding: '0px'}},nativeOn:{\"click\":function($event){return _vm.handleProjectClick(project)}}},[_c('SvgPreviewer',{attrs:{\"project\":project,\"height\":180,\"width\":290}}),_c('div',{staticClass:\"item-text-container\"},[_c('div',[_vm._v(_vm._s(project.label))])])],1)}),1)])})],2)],1),_c('el-footer',[_c('PageFooter')],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-container class=\"gallery-view\">\n    <el-header>\n      <PageHeader></PageHeader>\n    </el-header>\n\n    <el-main>\n      <el-col :span=\"18\" :offset=\"3\">\n        <el-row>\n          <span class=\"page-text\">Gallery</span>\n        </el-row>\n\n        <el-row v-for=\"projGroup in projectGroups\" :key=\"projGroup.name\">\n          <div class=\"group-title\">{{ projGroup.name }} ({{ projGroup.projects.length }})</div>\n          <div class=\"svg-group\">\n            <el-card v-for=\"project in projGroup.projects\" :key=\"project.id\"\n                     class=\"svg-item clickable\"\n                     shadow=\"hover\"\n                     :body-style=\"{ padding: '0px'}\"\n                     @click.native=\"handleProjectClick(project)\">\n              <SvgPreviewer :project=\"project\" :height=\"180\" :width=\"290\"></SvgPreviewer>\n              <div class=\"item-text-container\">\n                <div>{{ project.label }}</div>\n              </div>\n            </el-card>\n<!--            <div v-for=\"i in [...Array((3 - (presetCharts.length % 3)) % 3).keys()]\"-->\n<!--                 class=\"svg-item\"-->\n<!--                 :key=\"'empty-block-' + i\"></div>-->\n          </div>\n        </el-row>\n      </el-col>\n    </el-main>\n\n    <el-footer>\n      <PageFooter></PageFooter>\n    </el-footer>\n  </el-container>\n</template>\n\n<script>\n\nimport PageHeader from \"@/components/webpage/common/PageHeader\";\nimport PageFooter from \"@/components/webpage/common/PageFooter\";\n// use the svg previewer from editor\nimport SvgPreviewer from \"@/components/editor/ProjSelPanel/SvgPreviewer\";\nimport {mapState} from \"vuex\";\n\nexport default {\n  name: 'GalleryView',\n  components: {\n    SvgPreviewer, PageFooter, PageHeader\n  },\n  data() {\n    return {\n    }\n  },\n  mounted() {\n    this.$store.dispatch('resource/queryAllSvg')\n        .then(() => {\n          this.$store.commit('resource/changeStaticSvgMapSign');\n        })\n  },\n  methods: {\n    handleProjectClick(project) {\n      // this.$router.push({\n      //   path: 'example',\n      //   query: {\n      //     'example-index': this.projectList.indexOf(project)\n      //   },\n      // })\n      this.$router.push({\n        path: 'editor',\n        query: {\n          'example-index': this.projectList.indexOf(project),\n        }\n      })\n    },\n  },\n  computed: {\n    ...mapState('resource', {\n      projectList: state => state.projectList,\n    }),\n    projectGroups() {\n      const groups = []\n      const groupName2idx = new Map();\n      this.projectList.forEach(project => {\n        const groupName = project.group;\n        if (!groupName2idx.has(groupName)) {\n          groupName2idx.set(groupName, groups.length);\n          groups.push({\n            name: groupName,\n            projects: []\n          })\n        }\n        groups[groupName2idx.get(groupName)].projects.push(project);\n      });\n\n      const order = [\n        'Real video reproduction',\n        'Vega-Lite chart',\n        'Infographics from related work',\n        'User study',\n      ]\n      groups.sort((a, b) => {\n        return order.indexOf(a.name) - order.indexOf(b.name);\n      })\n\n      // remove user study group\n      groups.splice(3, 1);\n\n      // console.log('>>>', groups);\n      return groups;\n    },\n  }\n}\n</script>\n\n<style scoped>\n.gallery-view {\n  overflow: auto;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  min-height: 100%;\n}\nheader {\n  border-bottom: 1px solid #d7d7d7;\n  width: 100%;\n  height: 60px;\n  position: fixed;\n  z-index: 999;\n}\nmain {\n  margin-top: 60px;\n  padding-bottom: 60px;\n  box-sizing: border-box;\n  flex: 1 0 auto;\n}\nfooter {\n  height: 60px;\n  border-top: 1px solid #d7d7d7;\n  flex: 0 0 auto;\n}\n\n.page-text {\n  font-size: 1.7em;\n  font-weight: bold;\n}\n\n/*.svg-group {*/\n/*  margin-top: 20px;*/\n/*  display: flex;*/\n/*  justify-content: space-between;*/\n/*  align-items: center;*/\n/*  flex-wrap: wrap;*/\n/*}*/\n.svg-group {\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  flex-wrap: wrap;\n}\n\n.svg-item {\n  height: 230px;\n  width: 290px;\n  margin: 0 10px 10px 10px;\n}\n.item-text-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  flex-direction: column;\n  height: 40px;\n  padding-top: 4px;\n  border-top: 1px solid #eeeeee;\n}\n\n.clickable {\n  cursor: pointer;\n}\n\n.group-title {\n  font-size: 1.2rem;\n  margin-bottom: 8px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GalleryView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GalleryView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GalleryView.vue?vue&type=template&id=388f08aa&scoped=true&\"\nimport script from \"./GalleryView.vue?vue&type=script&lang=js&\"\nexport * from \"./GalleryView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./GalleryView.vue?vue&type=style&index=0&id=388f08aa&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"388f08aa\",\n  null\n  \n)\n\nexport default component.exports","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('el-container',{staticClass:\"example-view\"},[_c('el-header',[_c('PageHeader')],1),_c('el-main',[_c('el-col',{attrs:{\"span\":12,\"offset\":6}},[_c('el-row',[_c('div',{staticStyle:{\"width\":\"100%\",\"display\":\"flex\"}},[_c('span',{staticClass:\"page-text\"},[_vm._v(_vm._s(_vm.project.label))]),_c('el-button',{staticClass:\"back-button\",attrs:{\"type\":\"text\"},nativeOn:{\"click\":function($event){return _vm.clickBack.apply(null, arguments)}}},[_vm._v(\"< Back to gallery\")])],1),_c('span',{staticClass:\"page-text-small\"},[_vm._v(_vm._s(_vm.project.chartType))])]),_c('el-row',{staticStyle:{\"display\":\"flex\",\"flex-wrap\":\"wrap\",\"margin-top\":\"20px\"}},[_c('SvgPreviewer',{staticStyle:{\"border\":\"1px solid #cecece\",\"border-radius\":\"4px\",\"margin-right\":\"20px\"},attrs:{\"project\":_vm.project,\"height\":320,\"width\":500}}),_c('div',[_c('el-button',{staticClass:\"launch-button\",attrs:{\"round\":\"\",\"type\":\"primary\",\"icon\":\"\"},nativeOn:{\"click\":function($event){return _vm.clickLaunch.apply(null, arguments)}}},[_vm._v(\"Open Demo\")])],1)],1),_c('el-row',{staticStyle:{\"margin-top\":\"10px\"}},[_c('div',{staticClass:\"title-text\"},[_vm._v(\"Link to Original Video\")]),_c('a',{staticClass:\"content-text\",attrs:{\"href\":_vm.galleryInfo.link}},[_vm._v(_vm._s(_vm.galleryInfo.videoName))])]),_c('el-row',{staticStyle:{\"margin-top\":\"10px\"}},[_c('div',{staticClass:\"title-text\"},[_vm._v(\"Narration\")]),_c('div',{staticClass:\"content-text\"},[_vm._v(_vm._s(_vm.galleryInfo.transcript))])]),_c('el-row',[_c('div',{staticClass:\"title-text\"},[_vm._v(\"Creation Process\")]),_c('video',{staticClass:\"local-video\",attrs:{\"src\":`/video/V${_vm.projectIndex + 1}_1.mp4`,\"controls\":\"\",\"width\":\"100%\",\"height\":\"100%\"}})]),_c('el-row',[_c('div',{staticClass:\"title-text\"},[_vm._v(\"Final Version\")]),_c('video',{staticClass:\"local-video\",attrs:{\"src\":`/video/V${_vm.projectIndex + 1}_2.mp4`,\"controls\":\"\",\"width\":\"100%\",\"height\":\"100%\"}})])],1)],1),_c('el-footer',[_c('PageFooter')],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <el-container class=\"example-view\">\n    <el-header>\n      <PageHeader></PageHeader>\n    </el-header>\n\n    <el-main>\n      <el-col :span=\"12\" :offset=\"6\">\n        <el-row>\n          <div style=\"width: 100%; display: flex;\">\n            <span class=\"page-text\">{{ project.label }}</span>\n            <el-button class=\"back-button\" type=\"text\"\n                       @click.native=\"clickBack\">&lt; Back to gallery</el-button>\n          </div>\n          <span class=\"page-text-small\">{{ project.chartType }}</span>\n        </el-row>\n\n        <el-row style=\"display: flex; flex-wrap: wrap; margin-top: 20px;\">\n          <SvgPreviewer :project=\"project\" :height=\"320\" :width=\"500\"\n                        style=\"border: 1px solid #cecece; border-radius: 4px; margin-right: 20px;\"></SvgPreviewer>\n          <div>\n            <el-button class=\"launch-button\" round type=\"primary\"\n                       @click.native=\"clickLaunch\" icon=\"\">Open Demo</el-button>\n          </div>\n        </el-row>\n\n        <el-row style=\"margin-top: 10px;\">\n          <div class=\"title-text\">Link to Original Video</div>\n          <a class=\"content-text\"\n             :href=\"galleryInfo.link\">{{ galleryInfo.videoName }}</a>\n        </el-row>\n\n        <el-row style=\"margin-top: 10px;\">\n          <div class=\"title-text\">Narration</div>\n          <div class=\"content-text\">{{ galleryInfo.transcript }}</div>\n        </el-row>\n\n        <el-row>\n          <div class=\"title-text\">Creation Process</div>\n          <video\n              class=\"local-video\"\n              :src=\"`/video/V${projectIndex + 1}_1.mp4`\"\n              controls\n              width=\"100%\"\n              height=\"100%\"></video>\n        </el-row>\n\n        <el-row>\n          <div class=\"title-text\">Final Version</div>\n          <video\n              class=\"local-video\"\n              :src=\"`/video/V${projectIndex + 1}_2.mp4`\"\n              controls\n              width=\"100%\"\n              height=\"100%\"></video>\n        </el-row>\n      </el-col>\n    </el-main>\n\n    <el-footer>\n      <PageFooter></PageFooter>\n    </el-footer>\n  </el-container>\n</template>\n\n<script>\n\nimport PageHeader from \"@/components/webpage/common/PageHeader\";\nimport PageFooter from \"@/components/webpage/common/PageFooter\";\nimport {mapState} from \"vuex\";\nimport SvgPreviewer from \"@/components/editor/ProjSelPanel/SvgPreviewer\";\n\nexport default {\n  name: 'ExampleView',\n  components: {\n    SvgPreviewer,\n    PageFooter, PageHeader\n  },\n  data() {\n    return {\n      projectIndex: -1,\n      project: {},\n    }\n  },\n  mounted() {\n    let index = 1;\n    try {\n      index = parseInt(this.$route.query['example-index'] ?? ('' + index))\n    } catch (e) {\n      console.log(e)\n    }\n    this.projectIndex = index;\n    this.project = this.projectList[this.projectIndex];\n\n    this.$store.dispatch('resource/queryAllSvg')\n        .then(() => {\n          this.$store.commit('resource/changeStaticSvgMapSign');\n        })\n  },\n  methods: {\n    clickBack() {\n      this.$router.push('gallery')\n    },\n    clickLaunch() {\n      this.$router.push({\n        path: 'editor',\n        query: {\n          'example-index': this.projectIndex,\n        }\n      })\n    }\n  },\n  watch: {\n  },\n  computed: {\n    ...mapState('resource', {\n      projectList: state => state.projectList,\n      galleryList: state => state.galleryList,\n    }),\n    galleryInfo() {\n      if (!this.project) {\n        return {};\n      }\n      return this.galleryList.find(info => info.id === this.project.id) ?? {}\n    }\n  }\n}\n</script>\n\n<style scoped>\n.example-view {\n  overflow: auto;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  min-height: 100%;\n}\nheader {\n  border-bottom: 1px solid #d7d7d7;\n  width: 100%;\n  height: 60px;\n  position: fixed;\n  z-index: 999;\n}\nmain {\n  margin-top: 60px;\n  padding-bottom: 60px;\n  box-sizing: border-box;\n  flex: 1 0 auto;\n}\nfooter {\n  height: 60px;\n  border-top: 1px solid #d7d7d7;\n  flex: 0 0 auto;\n}\n\n.page-text {\n  font-size: 1.7em;\n  font-weight: bold;\n}\n.page-text-small {\n  font-size: 1.3em;\n  color: #9b9b9b;\n}\n\n.back-button {\n  margin-left: auto;\n  font-size: 1.07rem;\n}\n\n.launch-button {\n  font-size: 1.05rem;\n}\n\n/*.title-text {*/\n/*  font-size: 1.5rem;*/\n/*  margin: 20px 0 10px 0;*/\n/*}*/\n.title-text {\n  margin-left: 10px;\n  font-size: 1.7em;\n  font-weight:bold;\n  /*font-family: 'Courier New', Courier, monospace;*/\n  font-family: 'Copperplate', 'Papyrus', 'fantasy';\n  color: #5190CC;\n}\n.content-text {\n  font-size: 1.1rem;\n  color: #9b9b9b;\n  margin-bottom: 10px;\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExampleView.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExampleView.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ExampleView.vue?vue&type=template&id=b356a9b2&scoped=true&\"\nimport script from \"./ExampleView.vue?vue&type=script&lang=js&\"\nexport * from \"./ExampleView.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ExampleView.vue?vue&type=style&index=0&id=b356a9b2&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b356a9b2\",\n  null\n  \n)\n\nexport default component.exports","import VueRouter from 'vue-router'\nimport TestView from \"@/views/TestView\";\nimport EditorView from \"@/views/EditorView\";\n\nimport HomepageView from \"@/views/webpage/HomepageView\";\nimport GalleryView from \"@/views/webpage/GalleryView\";\nimport ExampleView from \"@/views/webpage/ExampleView\";\n\nconst routes = [\n  {path: '/editor', component: EditorView},\n  {path: '/test', component: TestView},\n\n  {path: '/homepage', component: HomepageView},\n  {path: '/gallery', component: GalleryView},\n  {path: '/example', component: ExampleView},\n\n  {path: '/', redirect: '/homepage'}\n]\n\nexport default new VueRouter({\n  mode: 'hash',\n  routes\n})\n","import axios from \"axios\";\n\n// backend url\nconst baseURL = 'api'\n\nexport function queryNLPParseResult(payload, callback, errorCallBack) {\n  const url = `${baseURL}/nlp/parse`;\n  console.log(\"post\", payload)\n  axios.post(url, payload)\n    .then(rep => {\n      callback(rep.data)\n    }).catch(error => {\n      errorCallBack(error)\n    })\n}\n\nexport function queryNLPGenerateResult(payload, callback, errorCallBack) {\n  const url = `${baseURL}/nlp/generate`;\n  console.log(\"post\", payload)\n  axios.post(url, payload)\n    .then(rep => {\n      callback(rep.data)\n    }).catch(error => {\n      errorCallBack(error)\n    })\n}\n\n","function deepCopy(obj) {\n  if (obj === undefined || obj === null) {\n    return obj\n  }\n  let copy = Array.isArray(obj) ? [] : {}\n  for (let i in obj) {\n    copy[i] = typeof obj[i] === 'object' ? deepCopy(obj[i]) : obj[i]\n  }\n  if (obj.prototype !== undefined) {\n    copy.prototype = obj.prototype\n  }\n  return copy\n}\n\n/** @deprecated */\nfunction getReadableAniUnit(/** @type {AnimationUnit} */ au) {\n  const exclude = ['tween', 'target', 'effect', 'times']\n  let ret = {}\n  Object.keys(au).forEach(k => {\n    if (exclude.includes(k)) return\n    ret[k] = au[k]\n  })\n  ret.target = {\n    id: au.target[\"__data__\"].id,\n    \"class\": au.target[\"__data__\"].class.join(' ')\n  }\n  ret.effect = au.effect.effId\n  return ret\n}\n\nexport {\n  deepCopy, getReadableAniUnit\n}\n","function generateTranscript(text, cb) {\n  var sdk = require(\"microsoft-cognitiveservices-speech-sdk\");\n  var subscriptionKey = \"09336b849227439bb2432601c4850a28\";\n  var serviceRegion = \"eastus\";\n  // var filename = \"YourAudioFile.wav\";\n\n  // var audioConfig = sdk.AudioConfig.fromAudioFileOutput(filename);\n  var speechConfig = sdk.SpeechConfig.fromSubscription(subscriptionKey, serviceRegion);\n\n  // create the speech synthesizer.\n  // var synthesizer = new sdk.SpeechSynthesizer(speechConfig, audioConfig);\n  var synthesizer = new sdk.SpeechSynthesizer(speechConfig, null);\n\n  const trans = {\n      transcript: text,\n      words: [],\n  };\n\n  const startIndices = []\n\n  var preTime = 0;\n  synthesizer.wordBoundary = function (s, e) {\n      // console.log(\"(WordBoundary), Text: \" + e.text + \", Audio offset: \" + e.audioOffset / 10000 + \"ms.\");\n      let curTime = parseFloat((e.audioOffset / 10000000).toFixed(3));\n      trans.words.push({\n          startTime: preTime,\n          endTime: curTime,\n          selected: false,\n          speakerTag: 0\n      })\n      startIndices.push(e.textOffset);\n      preTime = curTime;\n  };\n\n  synthesizer.speakTextAsync(text,\n      function (result) {\n          if (result.reason === sdk.ResultReason.SynthesizingAudioCompleted) {\n              console.log(\"synthesis finished.\");\n          } else {\n              console.error(\"Speech synthesis canceled, \" + result.errorDetails +\n                  \"\\nDid you update the subscription info?\");\n          }\n          synthesizer.close();\n          synthesizer = undefined;\n\n          for (let i = 0; i < startIndices.length; i++) {\n            var word = '';\n            if (i != startIndices.length - 1) {\n                word = text.slice(startIndices[i], startIndices[i+1])\n            } else {\n                word = text.slice(startIndices[i])\n            }\n            trans.words[i].word = word.trim()\n          }\n          const audioContext = new AudioContext();\n          cb(trans, audioContext.decodeAudioData(result.audioData));\n      },\n      function (err) {\n          console.trace(\"err - \" + err);\n          synthesizer.close();\n          synthesizer = undefined;\n          cb(undefined, undefined)\n      });\n}\n\n\nfunction dataURItoBlob(dataURI) {\n  if (!dataURI) {\n    return null;\n  }\n  const mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0]; // mime类型\n  const byteString = atob(dataURI.split(',')[1]); //base64 解码\n  const arrayBuffer = new ArrayBuffer(byteString.length); //创建缓冲数组\n  const intArray = new Uint8Array(arrayBuffer); //创建视图\n\n  for (let i = 0; i < byteString.length; i++) {\n    intArray[i] = byteString.charCodeAt(i);\n  }\n  return new Blob([intArray], {type: mimeString});\n}\n\nasync function blobToAudioBuffer(blob) {\n  if (!blob) {\n    return new Promise((resolve) => {\n      resolve(new AudioBuffer({length: 8000, numberOfChannels: 2, sampleRate: 8000}));\n    });\n  }\n  const arrayBuffer = await blob.arrayBuffer();\n  const audioCtx = new AudioContext();\n  return audioCtx.decodeAudioData(arrayBuffer);\n}\n\nfunction computeAudioDuration(audioBuffer) {\n  return audioBuffer.length / audioBuffer.sampleRate;\n}\n\nfunction copy3Sec(audioBuffer) {\n  const channels = audioBuffer.numberOfChannels;\n  const rate = audioBuffer.sampleRate;\n\n  const totFrameCount = rate * 4;\n  const copyFrameCount = rate * 3;\n\n  const newAudioBuffer = new AudioContext().createBuffer(channels, totFrameCount, rate);\n  const tempArray = new Float32Array(copyFrameCount);\n\n  for (let channel = 0; channel < channels; channel++) {\n    audioBuffer.copyFromChannel(tempArray, channel, 0);\n    newAudioBuffer.copyToChannel(tempArray, channel, 0);\n  }\n\n  return newAudioBuffer;\n}\n\nfunction extend1Sec(audioBuffer) {\n  const channels = audioBuffer.numberOfChannels;\n  const rate = audioBuffer.sampleRate;\n\n  const totFrameCount = audioBuffer.length + rate;\n  const copyFrameCount = audioBuffer.length;\n\n  const newAudioBuffer = new AudioContext().createBuffer(channels, totFrameCount, rate);\n  const tempArray = new Float32Array(copyFrameCount);\n\n  for (let channel = 0; channel < channels; channel++) {\n    audioBuffer.copyFromChannel(tempArray, channel, 0);\n    newAudioBuffer.copyToChannel(tempArray, channel, 0);\n  }\n\n  return newAudioBuffer;\n}\n\n\nfunction concatAudio(audioBuffers, extendTimes) {\n  if (audioBuffers.length === 0) {\n    return new AudioContext().createBuffer(2, 0, 1);\n  }\n  const channels = audioBuffers[0].numberOfChannels;\n  const rate = audioBuffers[0].sampleRate;\n\n  let totFrameCount = audioBuffers.reduce((sum, ab) => sum + ab.length, 0);\n  if (extendTimes) {\n    extendTimes.forEach(time => totFrameCount += time * rate);\n  }\n  const newAudioBuffer = new AudioContext().createBuffer(channels, totFrameCount, rate);\n\n  let bufferOffset = 0;\n  for (let i = 0; i < audioBuffers.length; ++i) {\n    const buffer = audioBuffers[i];\n    const srcFrameCount = buffer.length;\n    const tempArray = new Float32Array(srcFrameCount);\n\n    for (let channel = 0; channel < channels; channel++) {\n      buffer.copyFromChannel(tempArray, channel, 0);\n      newAudioBuffer.copyToChannel(tempArray, channel, bufferOffset);\n    }\n    bufferOffset += srcFrameCount;\n    bufferOffset += extendTimes ? extendTimes[i] : 0;\n  }\n\n  return newAudioBuffer;\n}\n\nfunction audioBufferToBlob(abuffer) {\n  let numOfChan = abuffer.numberOfChannels,\n      length = abuffer.length * numOfChan * 2 + 44,\n      buffer = new ArrayBuffer(length),\n      view = new DataView(buffer),\n      channels = [], i, sample,\n      offset = 0,\n      pos = 0;\n\n  // write WAVE header\n  // \"RIFF\"\n  setUint32(0x46464952);\n  // file length - 8\n  setUint32(length - 8);\n  // \"WAVE\"\n  setUint32(0x45564157);\n  // \"fmt \" chunk\n  setUint32(0x20746d66);\n  // length = 16\n  setUint32(16);\n  // PCM (uncompressed)\n  setUint16(1);\n  setUint16(numOfChan);\n  setUint32(abuffer.sampleRate);\n  // avg. bytes/sec\n  setUint32(abuffer.sampleRate * 2 * numOfChan);\n  // block-align\n  setUint16(numOfChan * 2);\n  // 16-bit (hardcoded in this demo)\n  setUint16(16);\n  // \"data\" - chunk\n  setUint32(0x61746164);\n  // chunk length\n  setUint32(length - pos - 4);\n\n  // write interleaved data\n  for (i = 0; i < abuffer.numberOfChannels; i++)\n    channels.push(abuffer.getChannelData(i));\n\n  while (pos < length) {\n    // interleave channels\n    for (i = 0; i < numOfChan; i++) {\n      // clamp\n      sample = Math.max(-1, Math.min(1, channels[i][offset]));\n      // scale to 16-bit signed int\n      sample = (0.5 + sample < 0 ? sample * 32768 : sample * 32767) | 0;\n      // write 16-bit sample\n      view.setInt16(pos, sample, true);\n      pos += 2;\n    }\n    // next source sample\n    offset++\n  }\n\n  // create Blob\n  return new Blob([buffer], {type: \"audio/wav\"});\n\n  function setUint16(data) {\n    view.setUint16(pos, data, true);\n    pos += 2;\n  }\n\n  function setUint32(data) {\n    view.setUint32(pos, data, true);\n    pos += 4;\n  }\n}\n\nexport const AudioUtils = {\n  dataURItoBlob,\n  blobToAudioBuffer,\n  audioBufferToBlob,\n  concatAudio,\n  computeAudioDuration,\n  generateTranscript,\n  extend1Sec,\n  copy3Sec,\n}\n","import {computeUUID} from \"@/utils/common/uuid\";\n\nfunction updateSVGModel(svgStr, chartId) {\n  const svg = (new DOMParser())\n      .parseFromString(svgStr, 'image/svg+xml')\n      .querySelector('svg');\n\n  const domElList = Array.from(svg.querySelectorAll('*:not(g,svg,defs,defs *)'));\n\n  // fix id\n  domElList.forEach(domEl => {\n    const elId = domEl.getAttribute('id');\n    if (!elId || elId === '') {\n      domEl.setAttribute('id', 'ac-' + computeUUID());\n    } else {\n      domEl.setAttribute('id', elId.replaceAll(' ', '-'));\n    }\n  });\n\n  // fix class\n  domElList.forEach(domEl => {\n    if (!domEl.classList.contains(chartId)) {\n      domEl.classList.add(chartId);\n      domEl.classList.add('unknown-type')\n    }\n  })\n\n  const elements = getElements(domElList);\n  const targetModel = {chartType: 'unknown', elements};\n  const newSvgStr = domElToString(svg);\n\n  console.log('svg model', elements, targetModel);\n\n  return {\n    targetModel,\n    svgStr: newSvgStr,\n  };\n}\n\nfunction domElToString(domEl) {\n  const tmp = document.createElement(\"div\");\n  tmp.appendChild(domEl);\n  return tmp.innerHTML;\n}\n\nfunction getElements(domElList) {\n  const elements = [];\n  domElList.forEach(domEl => {\n    const el = {};\n    const id = domEl.getAttribute('id');\n    const clazz = domEl.getAttribute('class');\n\n    const clazzList = clazz.split(' ');\n    const tag = domEl.tagName;\n    const data = {};\n\n    el.type = clazzList[clazzList.length - 1];\n    el.id = id;\n    el.clazz = clazz;\n    el.data = data;\n    el.tag = tag;\n\n    if (tag === 'text') {\n      if (domEl.children.length !== 0) {\n        el.text = Array.from(domEl.children)\n            .reduce((str, node) => str + ' ' + node.innerHTML, '')\n            .trim();\n      } else {\n        el.text = domEl.innerHTML;\n      }\n    } else {\n      el.text = null;\n    }\n\n    elements.push(el);\n  });\n  return elements;\n}\n\nexport const TargetUtils = {\n  updateSVGModel, domElToString,\n}","import {aniChart} from \"@/core\";\nimport * as d3 from 'd3';\nimport gsap from 'gsap';\nimport {AnimationParser} from \"@/core/parser/AnimationParser\";\nimport {Timing} from \"@/core/entities/spec/Timing\";\nimport {computeUUID} from \"@/utils/common/uuid\";\nimport {Notification} from \"element-ui\";\nimport {queryNLPParseResult, queryNLPGenerateResult} from \"@/service/nlpService\";\nimport {deepCopy} from \"@/utils/common/copy\";\nimport {LayoutUtils} from \"@/utils/common/LayoutUtils\";\nimport {SelectionToolType} from \"@/utils/common/SeletionToolType\";\nimport {AudioUtils} from \"@/utils/audio/AudioUtils\";\nimport {TargetUtils} from \"@/utils/target/TargetUtils\";\nimport { faSignInAlt, faSignOutAlt, faLink, faBars, faStar } from '@fortawesome/free-solid-svg-icons';\nimport { faTag, faChartLine, faMapMarkerAlt} from \"@fortawesome/free-solid-svg-icons\";\nimport {DefaultSession} from \"gaia\"\n\nfunction indicesToString(startIdx, endIdx) {\n  const range = (start, end) => Array.from({length: end - start}, (_, i) => i + start);\n  const indices = range(startIdx, endIdx + 1);\n  return '[' + indices.join(',') + ']';\n}\n\nfunction indicesDictToTargetPos(indices_dict) {\n  const wordTargetIconPos = [];\n\n  Object.keys(indices_dict).forEach(k => {\n    const indices = JSON.parse(k);\n    const targets = indices_dict[k];\n\n    wordTargetIconPos.push({\n      startIdx: indices[0],\n      endIdx: indices[indices.length-1],\n      indices: k,\n      target: targets,\n      icon: faLink,\n      id: computeUUID(),\n    });\n  });\n  return wordTargetIconPos;\n}\n\nfunction TargetPosToindicesDict(wordTargetIconPos) {\n  const indices_dict = new Object();\n\n  wordTargetIconPos.forEach((iconPos) => {\n    indices_dict[iconPos.indices] = iconPos.target;\n  });\n  return indices_dict;\n}\n\nfunction getUseToAniMap(aniChart) {\n  const wrappers = aniChart.buildInWrappers;\n  const useToAniMap = new Object();\n  wrappers.forEach(wrapper => {\n    const use = wrapper.getTemplateName();\n    const ani_type = wrapper.animationType;\n    useToAniMap[use] = ani_type;\n  });\n  return useToAniMap;\n}\n\n// initial state\nconst state = () => ({\n  aniChart: aniChart,\n\n  windowWidth: 0,\n  windowHeight: 0,\n\n  headerHeight: 0,\n  footerHeight: 0,\n\n  scene: null,\n\n  // Temporarily disable drag function\n  enableDrag: false,\n\n  sceneEl: null,\n  svgEl: null,\n  aniSceneEl: null,\n  aniSvgEl: null,\n  selectionSvgEl: null,\n  resourceJSON: [],\n  templateJSON: [],\n  animationJSON: {\n    main: {\n      sync: [],\n    }\n  },\n  binderJSON: null,\n  targetModel: null,\n  animationId2jsonItem: new Map(),\n  previewAniJSON: {\n    sequence: {\n      sync: [],\n    }\n  },\n  resourceJSONRenderSign: 0,\n  templateJSONRenderSign: 0,\n  animationJSONRenderSign: 0,\n  isSpecTextValid: true,\n  specTextErrorMsg: '',\n\n  timeline: null,\n  timelinePanelEl: null,\n  textPanelEl: null,\n  targetPanelEl: null,\n  textPanelEmpty: false,\n\n  controllerInitSign: 0,\n  svgRenderSign: 0,\n  aniSvgRenderSign: 0,\n\n  aniChangeSign: 0,\n\n  mainContainerEl: null,\n  toolboxEl: null,\n  submitToolboxEl: null,\n  staticToolboxEl: null,\n\n  // row: [{use, target, timing}]\n  // matrix of originItem\n  time: 0,\n  timelineRows: [[], [], []],\n  timelineScale: d3.scaleLinear().domain([0, 20]),\n  oldTimelineScale: d3.scaleLinear().domain([0, 20]),\n  timelineWidth: 1000,\n  tlContainerWidth: 0,\n  tlContainerWidthBuffer: 0,\n  timelineRenderSign: 0,\n  // durationMap: new Map(),    // deprecated as we use new Gaia, duration is computed during resolving\n\n  targetPanelWidth: 0,\n  leftPanelWidth: 0,\n\n  /** @type {{wordIdx: set()}[]} */\n  wordTargetIconPos: [],\n  transcriptSrc: {\n    transcript: '',\n    words: [],\n  },\n  groupedTargetsMap: new Map(),\n\n  useAudio: true,\n  showPotential: true,\n  audioSrc: '',\n  audioEl: null,\n  audioReady: false,\n\n  nlpLinking: false,\n  nlpLoading: false,\n\n  selectionTool: SelectionToolType.NORMAL,\n  // Register a callback function\n  selectionConfirm: null,\n  stopConfirm: false,\n  selectionLeave: null,\n  stopLeave: false,\n  // hide the toolbox when previewing\n  hideToolbox: false,\n\n  animationStyle: {\n    Enter: {\n      color:'#78c679',\n      icon: faSignInAlt},\n    Emphasis: {\n      color:'#238b45',\n      icon: faStar},\n    Exit: {\n      color:'#99d8c9',\n      icon: faSignOutAlt},\n    Annotate: {\n      color: \"#f56c6c\",\n      icon: faStar},\n    Other: {\n      color: \"#9e4ccd\",\n      icon: faBars},\n  },\n  templateStyle: {\n    Chart: {\n      color: d3.color(d3.schemeCategory10[6]),\n      icon: faChartLine,\n    },\n    Mark: {\n      color: d3.color(d3.schemeCategory10[4]),\n      icon: faMapMarkerAlt,\n    },\n    Annotation: {\n      color: d3.color(d3.schemeCategory10[3]),\n      icon: faTag,\n    },\n    // General: {\n    //   color: d3.color(d3.schemeCategory10[0]),\n    //   icon: faFolderOpen,\n    // },\n  },\n  useToAniMap: getUseToAniMap(aniChart),\n\n  animationName: '',\n  animationType: '',\n  itemForSettings: null,\n  aniSettings: {},\n\n  textPanelText: \"\",\n  audioCompiling: false,\n\n  refresh: true,\n  scrollLeft: 0,\n\n  aniStatus: 'stop', // stop, pause, play\n  compileSuccess: false,\n\n  currentMode: 'normal', // normal, animation, text\n\n  // for debug use\n  enableFilter: true,\n\n  settingPanelVisible: false,\n  clearTextHighlightSign: false,\n  itemUpdateTuple: null,    // the update data for icon in text panel\n\n  highlightItem: null,\n\n  clickIconSignal: null,    // the ani item that invoke click action, from TimelinePanel to TextPanel\n\n  exportSvgEl: null,\n  exportSceneEl: null,\n  exportSign: 0,\n\n  audioBuffer: null,\n  isExportingFiles: false,\n})\n\n// getters\nconst getters = {\n  svgPanelInSelecting: state => state.selectionTool !== SelectionToolType.NORMAL,\n  aniPlaying: state => state.aniStatus === 'play',\n}\n\n// actions\nconst actions = {\n  queryNLPParseResult({state, commit}) {\n    commit('changeNLPLinking', true);\n    const transcript = deepCopy(state.transcriptSrc);\n    transcript.words.forEach(word => delete word.selected);\n    var dataGroup = {}\n    this.state.target.groupedTargetsMap.forEach((value, key) => {\n      dataGroup[key] = Array.from(value);\n    });\n    const payload = {\n      target_model: state.scene.targetModel,\n      transcript,\n      dataGroup,\n    };\n    queryNLPParseResult(payload, resp => {\n      commit('changeNLPLinking', false);\n      commit('computeWordIdxTargets', resp.indices_dict);\n    }, errorResp => {\n      commit('changeNLPLinking', false);\n      Notification({title: `NLP Parse failed`,\n        message: errorResp.message, type: 'warning'})\n      console.log(errorResp);\n    })\n  },\n  queryNLPGenerateResult({state, commit}) {\n    commit('changeNLPLoading', true);\n\n    const transcript = deepCopy(state.transcriptSrc);\n    transcript.words.forEach(word => delete word.selected);\n    var dataGroup = {}\n    this.state.target.groupedTargetsMap.forEach((value, key) => {\n      dataGroup[key] = Array.from(value);\n    });\n    const indices_dict = TargetPosToindicesDict(state.wordTargetIconPos);\n    const payload = {\n      target_model: state.scene.targetModel,\n      transcript,\n      dataGroup,\n      indices_dict\n    };\n\n    console.log('nlp payload', payload);\n    queryNLPGenerateResult(payload, resp => {\n      console.log('nlp resp', resp);\n      const animationJSON = resp.AnimationJSON;\n\n      commit('changeNLPLoading', false);\n\n      state.wordTargetIconPos = [];\n\n      commit('updateEditorUsingAnimationJSON', animationJSON ?? {});\n      commit('changeAnimationJSONRenderSign');\n      Notification({title: `Generate finished`, type: 'success'})\n    }, errorResp => {\n      commit('changeNLPLoading', false);\n      Notification({title: `Generate failed`,\n        message: errorResp.message, type: 'warning'})\n      console.log(errorResp);\n    })\n  },\n}\n\n// mutations\nconst mutations = {\n  changeAniStatus(state, status) {\n    state.aniStatus = status;\n  },\n  changeWindowSize(state) {\n    state.windowWidth = document.body.clientWidth;\n    state.windowHeight = document.body.clientHeight;\n  },\n  changeLeftPanelWidth(state, leftPanelWidth) {\n    state.leftPanelWidth = leftPanelWidth;\n  },\n  changeHeaderHeight(state, headerHeight) {\n    state.headerHeight = headerHeight;\n  },\n  changeFooterHeight(state, footerHeight) {\n    state.footerHeight = footerHeight;\n  },\n  changeScene(state, scene) {\n    state.scene = scene;\n  },\n  changeSceneById(state, id) {\n    state.scene = this.state.project.scenes[id];\n  },\n  changetextPanelText(state, textPanelText){\n    state.textPanelText = textPanelText;\n    if (textPanelText === '') {\n      state.textPanelEmpty = true;\n    }\n  },\n  changeRefresh(state) {\n    state.refresh = !state.refresh;\n  },\n  mountSceneElement(state, sceneEl) {\n    state.sceneEl = sceneEl;\n  },\n  mountAniSceneElement(state, sceneEl) {\n    state.aniSceneEl = sceneEl;\n  },\n  mountSvgElement(state, svgEl) {\n    state.svgEl = svgEl;\n  },\n  mountSelectionSvgElement(state, svgEl) {\n    state.selectionSvgEl = svgEl;\n  },\n  mountAniSvgElement(state, svgEl) {\n    state.aniSvgEl = svgEl;\n  },\n  mountAudioElement(state, audioEl) {\n    state.audioEl = audioEl;\n  },\n  mountMainContainer(state, mainContainerEl) {\n    state.mainContainerEl = mainContainerEl;\n  },\n  mountTb(state, tbEl) {\n    state.toolboxEl = tbEl;\n  },\n  mountToolbox(state, submitToolboxEl) {\n    state.submitToolboxEl = submitToolboxEl;\n  },\n  mountStaticToolbox(state, staticToolboxEl) {\n    state.staticToolboxEl = staticToolboxEl;\n  },\n  changeTempAnimationSelection(state, {aniName = '', aniType = ''}) {\n    state.animationName = aniName;\n    state.animationType = aniType;\n  },\n  changeItemForSettings(state, item) {\n    state.itemForSettings = item;\n    console.log('changeItemForSettings', state.itemForSettings)\n  },\n  updateItemType(state, {aniName, aniType}) {\n    if (state.itemForSettings) {\n      // otherwise, is creating a new item\n      state.itemForSettings.use = aniName;\n      state.itemForSettings.ani_type = aniType;\n    }\n  },\n  changeItemSettings(state, setting) {\n    state.aniSettings = setting;\n  },\n  changeMode(state, mode) {\n    state.currentMode = mode;\n  },\n  changeFilterSwitch(state, enableFilter) {\n    state.enableFilter = enableFilter;\n  },\n  initToolboxPos(state) {\n    const el = state.toolboxEl;\n    const pos = el.getBoundingClientRect();\n    this.commit('editor/moveToolbox', {\n      ele: state.submitToolboxEl,\n      right: pos.right,\n      top: pos.top + pos.height + 10,\n    });\n    this.commit('editor/moveToolbox', {\n      ele: state.staticToolboxEl,\n      right: pos.right,\n      top: pos.top + pos.height + 10,\n    });\n  },\n  moveToolbox(state, {ele, left=null, top=null, right=null, bottom=null}) {\n    if (!ele) ele = state.submitToolboxEl;\n    if (!ele) return;\n    const faEle = state.mainContainerEl;\n    const faPos = faEle.getBoundingClientRect();\n    if (left) {\n      ele.style.left = left - faPos.left + 'px';\n    }\n    else ele.style.left = '';\n\n    if (right) {\n      ele.style.right = faPos.right - right + 'px';\n    }\n    else ele.style.right = '';\n\n    if (top) {\n      ele.style.top = top - faPos.top + 'px';\n    }\n    else ele.style.top = '';\n\n    if (bottom) {\n      ele.style.bottom = faPos.bottom - bottom + 'px';\n    }\n    else ele.style.bottom = '';\n  },\n  initLinking(state) {\n    // init text linking\n    if (state.scene?.linking) {\n      this.commit('editor/computeWordIdxTargets', deepCopy(state.scene.linking));\n    }\n  },\n  initWorkspace(state, loadExample=false) {\n    state.controllerInitSign ^= 1;\n    state.selectionTool = SelectionToolType.NORMAL;\n    state.wordTargetIconPos = [];\n    state.indice_dict = new Map();\n\n    if (state.timeline) {\n      state.timeline.kill();\n      state.timeline.clear();\n      state.timeline = null;\n    }\n\n    // init svg\n    // do it before update animation / template\n    // because Gaia will use the svg to build virtual target model\n    this.commit('editor/changeSvgRenderSign');\n\n    setTimeout(() => {\n      try {\n        const json = deepCopy(state.scene?.spec);\n        this.commit('editor/updateEditorUsingResourcesJSON', json?.charts ?? []);\n        this.commit('editor/updateEditorUsingTemplateJSON', json?.templates ?? []);\n        this.commit('editor/changeTargetBinder', json?.binder ?? null)\n\n        let targetModel;\n        if (json?.binder) {\n          targetModel = DefaultSession.getTargetModel(state.aniSvgEl, json.binder);\n        } else {\n          targetModel = DefaultSession.getTargetModel(state.aniSvgEl);\n        }\n        this.commit('editor/changeTargetModel', targetModel)\n\n        const nullAnimation = {\n          main: {\n            sync: [],\n          }};\n\n        if (loadExample)\n          this.commit('editor/updateEditorUsingAnimationJSON', json?.animation ?? nullAnimation);\n        else\n          this.commit('editor/updateEditorUsingAnimationJSON', nullAnimation);\n\n        setTimeout(() => {\n          state.resourceJSONRenderSign ^= 1;\n          state.templateJSONRenderSign ^= 1;\n          state.animationJSONRenderSign ^= 1;\n        }, 0);\n      } catch (e) {\n        console.error(e);\n      }\n    })\n\n    // init target model\n    // we don't need this target model as Gaia now does it by itself\n    if (this.scene?.targetModel)\n      this.commit('target/initTargetModel', deepCopy(state.scene.targetModel));\n\n    // init transcript\n    const rawTrans = deepCopy(state.scene?.transcript);\n    const trans = {\n      transcript: '',\n      words: [],\n    };\n    rawTrans?.results?.forEach(result => {\n      result.alternatives.forEach(alt => {\n        trans.transcript += alt.transcript;\n        trans.words.push(...alt.words);\n        alt.words.forEach(w => {\n          w.startTime = parseFloat(w.startTime.replace('s', ''));\n          w.endTime = parseFloat(w.endTime.replace('s', ''));\n          w.selected = false;\n        })\n      });\n    });\n\n    // this.commit('editor/updateAudio', trans.transcript)\n    // use previous audio when init\n    state.transcriptSrc = trans;\n    this.commit('editor/changetextPanelText', trans.transcript)\n\n    // init target model\n    if (state.scene?.targetModel)\n      this.commit('target/initTargetModel', deepCopy(state.scene.targetModel));\n\n    // init audio resource\n    if (state.scene?.audioStr) {\n      const dataURI = state.scene.audioStr;\n      const audioBlob = AudioUtils.dataURItoBlob(dataURI);\n      // const audioSrc = window.URL.createObjectURL(audioBlob);\n      // this.commit('editor/setAudioSrc', audioSrc);\n      AudioUtils.blobToAudioBuffer(audioBlob)\n          .then(audioBuffer => {\n            const newAudioBuffer = AudioUtils.extend1Sec(audioBuffer);\n            const newAudioBlob = AudioUtils.audioBufferToBlob(newAudioBuffer);\n            const audioSrc = window.URL.createObjectURL(newAudioBlob);\n            this.commit('editor/setAudioSrc', audioSrc);\n            this.commit('editor/setAudioBuffer', newAudioBuffer);\n          });\n    }\n\n  },\n  changeTargetBinder(state, binder) {\n    state.binderJSON = binder\n  },\n  changeTargetModel(state, targetModel) {\n    state.targetModel = targetModel\n  },\n  updateAudio(state, transcript){\n    state.audioCompiling = true;\n    let _this = this;\n    if (typeof transcript!==\"string\") state.audioCompiling = false;\n    AudioUtils.generateTranscript(transcript, function(trans, audioPromise) {\n      state.transcriptSrc = trans;\n      if (audioPromise != undefined) {\n        audioPromise.then(audioBuffer => {\n          const newAudioBuffer = AudioUtils.extend1Sec(audioBuffer);\n          const newAudioBlob = AudioUtils.audioBufferToBlob(newAudioBuffer);\n          const audioSrc = window.URL.createObjectURL(newAudioBlob);\n          _this.commit('editor/setAudioSrc', audioSrc);\n          _this.commit('editor/setAudioBuffer', newAudioBuffer)\n        }).catch(() => {\n          state.audioReady = false;\n          state.audioCompiling = false;\n        });\n      }\n    });\n  },\n  resetEditor(state) {\n    try {\n      this.commit('editor/updateEditorUsingResourcesJSON', []);\n      this.commit('editor/updateEditorUsingTemplateJSON', []);\n      this.commit('editor/updateEditorUsingAnimationJSON', {\n          main: {\n            sync: [\n            ],\n          },\n        });\n\n      state.wordTargetIconPos = [];\n\n      setTimeout(() => {\n        state.resourceJSONRenderSign ^= 1;\n        state.templateJSONRenderSign ^= 1;\n        state.animationJSONRenderSign ^= 1;\n      }, 0);\n    } catch (e) {\n      console.error(e);\n    }\n  },\n  updateChartSize(state) {\n    const svg = state.svgEl;\n    const aniSvg = state.aniSvgEl;\n    if (!svg || !aniSvg) {\n      console.warn('svg el is not ready')\n      return;\n    }\n    const chart = svg.querySelector('svg');\n    if (!chart) {\n      console.warn('chart element is not ready')\n      return;\n    }\n\n    const width = chart.getAttribute('width');\n    const height = chart.getAttribute('height');\n\n    const w = Math.max(0, state.windowWidth - state.leftPanelWidth - state.targetPanelWidth);\n    const h = Math.max(0, state.windowHeight - state.headerHeight - state.footerHeight);\n\n    const wFactor = w / width * 0.84, hFactor = h / height * 0.84;\n    const factor = Math.min(wFactor, hFactor);\n\n    svg.setAttribute('width', width * factor);\n    svg.setAttribute('height', height * factor)\n    svg.setAttribute('viewBox', `0 0 ${width} ${height}`);\n\n    aniSvg.setAttribute('width', width * factor);\n    aniSvg.setAttribute('height', height * factor)\n    aniSvg.setAttribute('viewBox', `0 0 ${width} ${height}`);\n  },\n  updateEditorUsingResourcesJSON(state, resourceJSON) {\n    state.resourceJSON = resourceJSON;\n  },\n  updateEditorUsingTemplateJSON(state, templateJSON) {\n    if (templateJSON == null) {\n      return;\n    }\n    // const oldTemplateJSON = state.templateJSON;\n    // // unregister them\n    // oldTemplateJSON.forEach(t => {\n    //   DefaultSession.unregisterTemplate(t.name);\n    // })\n\n    state.templateJSON = templateJSON;\n    console.log('registerOrUpdateTemplate', templateJSON)\n    DefaultSession.registerOrUpdateTemplates(templateJSON);\n\n    // refresh animation\n    this.commit('editor/updateEditorUsingAnimationJSON', state.animationJSON);\n    state.animationJSONRenderSign ^= 1;\n  },\n  updateEditorUsingAnimationJSON(state, animationJSON) {\n    if (animationJSON === null) {\n      return;\n    }\n    // use set timeout to wait for svg ready\n    setTimeout(() => {\n      try {\n        console.log('>>>>', animationJSON)\n        state.animationJSON = animationJSON\n\n        const logical = state.binderJSON\n            ? DefaultSession.resolveJson(animationJSON, state.aniSvgEl, state.binderJSON)\n            : DefaultSession.resolveJson(animationJSON, state.aniSvgEl);\n\n        // build link between animationJSON and logical animation\n        state.animationId2jsonItem = new Map()\n        state.animationJSON.main.sync.forEach((jsonItem, i) => {\n          state.animationId2jsonItem.set(logical.children[i].id, jsonItem)\n        })\n\n        this.commit('editor/changeSpecTextValidState', {isValid: true, errorMsg: ''});\n\n        this.commit('editor/computeTimelineRows', logical);\n\n        // render timeline\n        setTimeout(() => {\n          this.commit('editor/updateVisTimeline');\n        }, 0);\n\n      } catch (e) {\n        console.error('Spec update failed');\n        console.error(e);\n        this.commit('editor/changeSpecTextValidState', {isValid: true, errorMsg: e.message});\n        Notification({title: `Update timeline failed`,\n          message: e.message.substring(0, 60), type: 'warning'})\n      }\n    })\n  },\n  emitAniChangeSign(state) {\n    state.aniChangeSign ^= 1;\n  },\n  changeSpecTextValidState(state, {isValid, errorMsg}) {\n    state.isSpecTextValid = isValid;\n    state.specTextErrorMsg = errorMsg;\n  },\n  mountTimelinePanel(state, timelinePanelEl) {\n    state.timelinePanelEl = timelinePanelEl;\n  },\n  mountTextPanel(state, textPanelEl) {\n    state.textPanelEl = textPanelEl;\n  },\n  mountTargetPanel(state, targetPanelEl) {\n    state.targetPanelEl = targetPanelEl;\n  },\n  compile(state, {onUpdateFunc, notification=true}) {\n    // if (state.audioEl) {\n    //   state.context.audioDuration = state.audioEl.duration\n    // }\n\n    state.compileSuccess = false;\n\n    // update class\n    // this.commit('editor/updateElementClasses');\n\n    if (state.timeline) {\n      state.timeline.kill();\n      state.timeline.clear();\n      state.timeline = null;\n    }\n\n    // update timeline end time\n    // const endtime = state.transcriptSrc.words.slice(-1)[0].endTime;\n    // state.timelineScale = d3.scaleLinear().domain([0, Math.round(endtime)]);\n\n    try {\n      console.log('compiling animation json', state.aniSvgEl, state.animationJSON)\n      // state.timeline = DefaultSession.compile(state.aniSceneEl, state.animationJSON, {onUpdate: onUpdateFunc});\n      const timeline = state.binderJSON\n          ? DefaultSession.compileJson(state.animationJSON, state.aniSvgEl, state.binderJSON)\n          : DefaultSession.compileJson(state.animationJSON, state.aniSvgEl);\n\n      const totDuration = state.timelineScale.invert(state.timelineWidth);\n\n      // const tl = gsap.timeline({onUpdate: onUpdateFunc, autoRemoveChildren: false})\n      // tl.add(timeline, 0)\n      // tl.add(gsap.to('empty-selector', {duration: 1}), '<' + (totDuration - 1));\n      // tl.pause()\n\n      timeline.addPause(totDuration)    // extends to totDuration\n      Object.assign(timeline.vars, {onUpdate: onUpdateFunc, autoRemoveChildren: false})\n      timeline.pause()\n\n      // play it first\n      timeline.seek(totDuration)\n      timeline.seek(0)\n\n      state.timeline = timeline\n\n      if (notification){\n        Notification({title: `Compile finished`,\n        message: 'Play the animation!', type: 'success'});\n      }\n      state.compileSuccess = true;\n\n    } catch (exception) {\n      console.error(exception)\n      Notification({title: `Compile failed`,\n        message: exception.message, type: 'warning'});\n      state.compileSuccess = false;\n    }\n\n  },\n\n  computeTimelineRows(state, logical) {\n    const items = [...logical.children]\n\n    const getStartTime = item => item.timing.offset ?? 0\n    const getEndTime = item => getStartTime(item) + item.computedTotalDuration\n\n    items.sort((o1, o2) => getEndTime(o1) - getEndTime(o2));\n    const rowMap = items.map(() => -1);\n    const conflictLists = items.map(() => []);    // list of conflict item index\n\n    // compute conflict set\n    for (let i = items.length - 1; i >= 1; --i) {\n      for (let j = i - 1; j >= 0; --j) {\n        if (getStartTime(items[i]) < getEndTime(items[j])) {\n          conflictLists[i].push(j);\n        }\n      }\n    }\n\n    // compute row layout\n    for (let i = 0; i < items.length; ++i) {\n      const item = items[i];\n      for (let rowIdx = 0; rowIdx < items.length; rowIdx++) {\n        while (state.timelineRows.length <= rowIdx) {\n          state.timelineRows.push([]);\n        }\n        const row = state.timelineRows[rowIdx];\n        const hasConflict = conflictLists[i].some(conflictItemIdx => rowMap[conflictItemIdx] === rowIdx);\n        if (!hasConflict) {\n          row.push(item);\n          rowMap[i] = rowIdx;\n          break;\n        }\n      }\n    }\n\n    state.timelineRows = [[]];\n    items.forEach((item, i) => {\n      const rowIdx = rowMap[i];\n      while (rowIdx >= state.timelineRows.length) {\n        state.timelineRows.push([]);\n      }\n      state.timelineRows[rowIdx].push(item);\n    });\n  },\n\n  computeWordIdxTargets(state, indices_dict) {\n    state.wordTargetIconPos = indicesDictToTargetPos(indices_dict);\n  },\n\n  changeSvgRenderSign(state) {\n    state.svgRenderSign ^= 1;\n    state.aniSvgRenderSign ^= 1;\n  },\n\n  changeAniSvgRenderSign(state) {\n    state.aniSvgRenderSign ^= 1;\n  },\n\n  changeExportSign(state) {\n    state.exportSign ^= 1;\n  },\n\n  setIsExportingFiles(state, isExportingFiles) {\n    state.isExportingFiles = isExportingFiles;\n  },\n\n  addWordTarget(state, {start, end, target}) {\n    let duplicateLink = false;\n    // check duplicate link\n    for (let i = 0; i < state.wordTargetIconPos.length; ++i) {\n      const pos = state.wordTargetIconPos[i];\n      if (pos.startIdx === start && pos.endIdx === end) {\n        // add target\n        pos.target.push(...target);\n        // remove duplicate\n        pos.target = [...new Set(pos.target)];\n        duplicateLink = true;\n        Notification({title: 'Merged duplicate link', type: 'info'});\n        break;\n      }\n    }\n\n    // add new link\n    if (!duplicateLink) {\n      state.wordTargetIconPos.push({\n        startIdx: start,\n        endIdx: end,\n        target: target,\n        icon: faLink,\n        id: computeUUID(),\n        indices: indicesToString(start, end),\n      });\n    }\n  },\n\n  editWordTarget(state, iconObj) {\n    for (let i=0; i<state.wordTargetIconPos.length; ++i) {\n      if (state.wordTargetIconPos[i].id === iconObj.id) {\n        state.wordTargetIconPos[i].target = iconObj.target;\n        break;\n      }\n    }\n  },\n\n  deleteWordTarget(state, iconObj) {\n    for (let i=0; i<state.wordTargetIconPos.length; ++i) {\n      if (state.wordTargetIconPos[i].id === iconObj.id) {\n        state.wordTargetIconPos.splice(i,1);\n        break;\n      }\n    }\n  },\n\n  /* timeline */\n  changeTlContainerWidth(state, offset) {\n    const containerWidth = state.windowWidth - state.leftPanelWidth - state.targetPanelWidth - offset;\n    state.tlContainerWidthBuffer = containerWidth;\n    state.tlContainerWidth = containerWidth;\n    state.timelineScale.range([0, containerWidth]);\n    state.timelineWidth = containerWidth;\n    this.commit('editor/updateVisTimeline');\n  },\n  changeTimelineWidth(state, width) {\n    const rate = width / state.timelineWidth;\n    const domain = state.timelineScale.domain();\n    const range = state.timelineScale.range();\n    state.timelineScale\n        .domain([0, domain[1] * rate])\n        .range([0, range[1] * rate]);\n    state.timelineWidth = width;\n    this.commit('editor/updateVisTimeline');\n  },\n  updateTimelineScale(state, rate) {\n    if (state.timelineWidth / rate < state.tlContainerWidth) {\n      rate = state.timelineWidth / state.tlContainerWidth;\n    }\n    const domain = state.timelineScale.domain();\n    const range = state.timelineScale.range();\n    state.timelineScale\n        .domain([0, domain[1]])\n        .range([0, range[1] / rate]);\n    state.timelineWidth = state.timelineWidth / rate;\n    this.commit('editor/updateVisTimeline');\n\n    state.oldTimelineScale\n          .domain([0, domain[1]])\n          .range([0, range[1]]);\n  },\n  updateTimelineScaleByAudio(state, duration) {\n    state.timelineScale\n        .domain([0, duration/1000]);\n    this.commit('editor/updateVisTimeline');\n  },\n  updateTimelineSvg(state){\n\n    const svg = d3.select(\"#timeline-marks-svg\");\n    svg.selectAll(\"*\").remove();\n    const g = svg.append(\"g\");\n\n    const tickFactor = 10;\n    const tickNum = tickFactor * state.timelineWidth / state.tlContainerWidth;\n    const axis = d3.axisTop(state.timelineScale)\n                    .ticks(tickNum);\n\n    const axisContainer = g.attr('transform', `translate(0,27)`).call(axis);\n    axisContainer.select('.tick:first-of-type text').remove();\n    axisContainer.selectAll(\".tick\").attr(\"color\", \"#adadad\")\n    axisContainer.selectAll('.tick line')\n                  .attr('stroke-width','1.5px')\n                  .attr('y2','-14')\n    axisContainer.selectAll('.tick text')\n                  .attr('font-size', 14)\n                  .attr('y','-16')\n  },\n  updateItemTiming(state, {itemId, start, duration}) {\n    // start is offset\n    const offset = start\n    // item now is logical animation instance\n    const json = state.animationId2jsonItem.get(itemId)\n\n    const temp = {}\n    if (offset != null) {\n      temp.offset = offset\n    }\n    if (duration != null) {\n      temp.duration = duration\n    }\n\n    Object.assign(json, temp)\n\n    // simplify json\n    if ('offset' in json && json.offset === 0) {\n      delete json.offset\n    }\n    if ('duration' in json && json.duration === 0) {\n      json.duration = 0.01\n    }\n\n    // if (item.timing === undefined) {\n    //   item.timing = {start, duration};\n    // } else {\n    //   if (start != null) {\n    //     item.timing.offset = start - (item.timing.start ?? 0);\n    //   }\n    //   if (duration != null) {\n    //     item.timing.duration = duration;\n    //     state.durationMap.set(item, duration);\n    //   }\n    // }\n    // item.timing = Timing.simplifyJSON(item.timing);\n    //\n    // for(const field in item.timing) {\n    //   item.timing[field] = Math.round(item.timing[field] * 1000) / 1000\n    // }\n  },\n  appendTimelineItem(state, {rowIdx, templateName, startX}) {\n    const row = state.timelineRows[rowIdx];\n    let start = state.timelineScale.invert(startX);\n    start = Math.round(start * 100) / 100;\n\n    const newItem = {use: templateName, timing: {start}}\n    row.push(newItem);\n\n    new Error(\"Never go here\")\n    // const duration = aniChart.computeDuration(state.sceneEl, newItem, state.animationJSON.variable);\n    // state.durationMap.set(newItem, duration);\n\n    this.commit('editor/updateVisTimeline');\n    this.commit('editor/updateAniJSONUsingTimelineRows');\n  },\n  appendItemByTextView(state, {minWordIdx, maxWordIdx, target, toFitDuration, settings}) {\n    new Error(\"Never go here\")\n    const start = state.transcriptSrc.words[minWordIdx].startTime,\n          end = state.transcriptSrc.words[maxWordIdx].endTime;\n    const newItem = {\n      use: state.animationName,\n      timing: {\n        start,\n        duration: 1,\n        offset: 0,\n      },\n      target: target,\n      ani_type: state.animationType,\n      settings: settings,\n    };\n    if (toFitDuration) {\n      let duration = end - start;\n      newItem.timing.duration = Math.round(duration * 100) / 100;\n    }\n    // state.durationMap.set(newItem, aniChart.computeDuration(state.sceneEl, newItem, state.animationJSON.variable));\n\n    if (state.animationJSON?.sequence?.sync) {\n      state.animationJSON.sequence.sync.push(newItem);\n      state.animationJSON = {...state.animationJSON};   // self-assign to invoke vue setter\n      this.commit('editor/computeTimelineRows', state.animationJSON);\n    }\n    this.commit('editor/updateVisTimeline');\n  },\n  updateItemByTextView(state, {item, target}) {\n    new Error(\"Never go here\")\n    // item.target = target;\n    // state.durationMap.set(item, aniChart.computeDuration(state.sceneEl, item, state.animationJSON.variable));\n    // this.commit('editor/updateVisTimeline');\n  },\n  deleteItemByIcon(state, iconObj) {\n    for (const row of state.timelineRows) {\n      const idx = row.indexOf(iconObj.originItem);\n      if (idx !== -1) {\n        row.splice(idx, 1);\n        break;\n      }\n    }\n    this.commit('editor/updateAniJSONUsingTimelineRows');\n    this.commit('editor/updateVisTimeline');\n  },\n  updateItemTimingByIcon(state, iconObj){\n    const item = state.timelineRows.flat().find(i=>i.use==iconObj.use&&i.target==iconObj.target),\n          start = iconObj.timing.start,\n          duration = iconObj.timing.duration;\n\n    this.commit('editor/updateItemTiming',{item, start, duration});\n    this.commit('editor/updateAniJSONUsingTimelineRows');\n    this.commit('editor/updateVisTimeline');\n  },\n  deleteItem(state, item) {\n    for (let i = 0; i < state.timelineRows.length; i++) {\n      const row = state.timelineRows[i];\n      const index = row.indexOf(item);\n      if (index >= 0) {\n        row.splice(index, 1);\n        break;\n      }\n    }\n    new Error(\"Never go here\")\n    // state.durationMap.delete(item);\n\n    this.commit('editor/changeHighlightItem', null);\n\n    // this.commit('editor/updateVisIcons');\n    this.commit('editor/changeClearTextHighlightSign')\n    this.commit('editor/updateVisTimeline');\n    this.commit('editor/updateAniJSONUsingTimelineRows');\n  },\n  changeSettingPanelVisible(state, visible) {\n    state.settingPanelVisible = visible;\n  },\n  // updateVisIcons(state) {\n  //   state.\n  // },\n  changeClearTextHighlightSign(state) {\n    state.clearTextHighlightSign ^= true;\n  },\n  changeHighlightItem(state, item) {\n    state.highlightItem = item;\n  },\n  changeClickIconSignal(state, clickIconSignal) {\n    state.clickIconSignal = clickIconSignal;\n  },\n  updateVisTimeline(state) {\n    // change timeline if need\n    // let extended = false;\n    const maxTime = Math.max(...state.timelineRows.flat()\n        .map(item => (item.timing?.offset ?? 0) + item.computedTotalDuration));\n    console.log('maxTime', maxTime, state.timelineScale.invert(state.timelineWidth))\n    while (maxTime >= state.timelineScale.invert(state.timelineWidth)) {\n      this.commit('editor/changeTimelineWidth', state.timelineWidth * 1.5);\n      // extended = true;\n    }\n    // while (!extended && maxDuration <= state.timelineScale.invert(state.timelineWidth * 0.75)) {\n    //   if (state.timelineScale.invert(state.timelineWidth * 0.75) <= 20) {\n    //     break;\n    //   }\n    //   this.commit('editor/changeTimelineWidth', state.timelineWidth * 0.75);\n    // }\n    setTimeout(() => {\n      state.timelineRenderSign ^= 1;\n    }, 0);\n\n    this.commit('editor/updateTimelineSvg');\n  },\n  updateAniJSONUsingTimelineRows(state) {\n    if (!state.animationJSON?.main?.sync) {\n      return;\n    }\n    state.animationJSON.main.sync = state.timelineRows.flat()\n        .map(item => state.animationId2jsonItem.get(item.id))\n        .sort((a, b) => (a.timing?.offset ?? 0) - (b.timing?.offset ?? 0))\n    state.animationJSONRenderSign ^= 1;\n    console.log('updateAniJSONUsingTimelineRows', state.animationJSON)\n  },\n  storeVItemTitle(state, vItemTitle) {\n    state.vItemTitle = vItemTitle;\n  },\n  updateItemRow(state, {item, rowIdx}) {\n    const oldRow = state.timelineRows.find(row => row.includes(item));\n    if (!oldRow) {\n      return;\n    }\n    const newRow = state.timelineRows[rowIdx];\n    oldRow.splice(oldRow.indexOf(item), 1);\n    newRow.push(item);\n    const getStartTime = item => (item.timing?.start ?? 0) + (item.timing?.offset ?? 0);\n    newRow.sort((o1, o2) => getStartTime(o1) - getStartTime(o2));\n\n    // if (rowIdx === state.timelineRows.length - 1) {\n    //   state.timelineRows.push([]);\n    // }\n  },\n  updateItemSettings(state, {item, newItemInfo}) {\n    // console.log('>>>>', item, newItemInfo)\n    Object.assign(item, newItemInfo)\n    // outer:\n    // for (let i = 0; i < state.timelineRows.length; i++) {\n    //   const row = state.timelineRows[i];\n    //   for (let j = 0; j < row.length; j++) {\n    //     if (row[j] === oldItem) {\n    //       row[j] = newItem;\n    //       break outer;\n    //     }\n    //   }\n    // }\n    // if (state.itemForSettings !== newItem) {\n    //   state.itemForSettings = newItem;\n    // }\n\n    new Error(\"Never go here\")\n    // state.durationMap.set(item, aniChart.computeDuration(state.sceneEl, item, state.animationJSON.variable));\n\n    // this.commit('editor/changeHighlightItem', newItem);\n\n    // this.commit('editor/changeItemUpdateTuple', {item, newItemInfo})\n    this.commit('editor/updateVisTimeline');\n    this.commit('editor/updateAniJSONUsingTimelineRows');\n  },\n  /**\n   * When change value in animation item, timelineRows will be updated,\n   * but won't invoke the watcher function in **TextPanel**.\n   * So use this function to invoke icon update after modifying item\n   */\n  changeItemUpdateTuple(state, {itemId, newItemInfo}) {\n    state.itemUpdateTuple = {itemId, newItemInfo};\n  },\n  changeAnimationJSONRenderSign(state) {\n    state.animationJSONRenderSign ^= 1;\n  },\n  changeNLPLoading(state, loading) {\n    state.nlpLoading = loading;\n  },\n  changeNLPLinking(state, linking) {\n    state.nlpLinking = linking;\n  },\n\n  changeSelectionTool(state, selectionTool) {\n    state.selectionTool = selectionTool;\n    state.hideToolbox = false;\n  },\n  showToolBox(state) {\n    state.hideToolbox = false;\n  },\n\n  registerSelectionConfirm(state, callback) {\n    state.selectionConfirm = callback;\n  },\n  clearSelectionConfirm(state, call) {\n    state.stopConfirm = false;\n    if (call && state.selectionConfirm)\n      state.stopConfirm = state.selectionConfirm();\n    if (!state.stopConfirm)\n      state.selectionConfirm = null;\n  },\n  registerSelectionLeave(state, callback) {\n    state.selectionLeave = callback;\n  },\n  clearSelectionLeave(state, call) {\n    state.stopLeave = false;\n    if (call && state.selectionLeave)\n      state.stopLeave = state.selectionLeave();\n    if (!state.stopLeave)\n      state.selectionLeave = null;\n  },\n\n  updateElementClasses(state) {\n    const targets = this.state.target.fullTargetList;\n    targets.forEach(target => {\n      d3.select(state.sceneEl)\n          .select('#' + target.id)\n          .attr('class', target.clazz);\n    });\n  },\n\n  stashScene(state) {\n    if (!state.scene) {\n      return;\n    }\n\n    const targetItemKeys = ['type', 'id', 'clazz', 'data', 'tag', 'text'];\n    state.scene.targetModel.elements = this.state.target.fullTargetList.map(t => {\n      const el = {};\n      targetItemKeys.forEach(key => el[key] = t[key]);\n      return el;\n    });\n\n    state.scene.spec = {\n      charts: state.resourceJSON,\n      templates: state.templateJSON,\n      animation: state.animationJSON,\n    };\n\n    const svg = (new DOMParser())\n        .parseFromString(state.scene.svgStr, 'image/svg+xml')\n        .querySelector('svg');\n    state.scene.targetModel.elements.forEach(target => {\n      d3.select(svg)\n          .select('#' + target.id)\n          .attr('class', target.clazz);\n    });\n    state.scene.svgStr = TargetUtils.domElToString(svg);\n  },\n\n  setAudioSrc(state, audioSrc) {\n    state.audioSrc = audioSrc\n    if (state.setAudioReadyFunc) {\n      state.audioEl.removeEventListener(\"canplaythrough\", state.setAudioReadyFunc, false)\n    } else {\n      state.setAudioReadyFunc = function() {\n        state.audioReady = true\n      }.bind(this)\n    }\n    state.audioReady = false;\n    state.audioCompiling = false;\n    state.audioEl.addEventListener(\"canplaythrough\", state.setAudioReadyFunc, false);\n  },\n  setAudioBuffer(state, audioBuffer) {\n    state.audioBuffer = audioBuffer;\n  },\n  changeUseAudio(state, useAudio) {\n    state.useAudio = useAudio;\n  },\n  changeTime(state, time) {\n    state.time = time;\n  },\n  changeShowPotential(state, showPotential) {\n    state.showPotential = showPotential;\n  },\n  changeAudioReady(state, isReady) {\n    state.audioReady = isReady\n  },\n  fixScrollPos(state, event) {\n    // debug: adjust position\n    const offsetLeft = document.querySelector(\".timeline-panel\").offsetLeft;\n    const commonDomain = state.oldTimelineScale.invert(state.scrollLeft+event.x-offsetLeft);\n    const newRange = state.timelineScale(commonDomain);\n    state.scrollLeft = Math.max(newRange-(event.x-offsetLeft),0);\n  },\n  saveSpec(state) {\n    const spec = {\n      projectId: this.state.resource.projectId,\n      animation: state.animationJSON,\n      templates: state.templateJSON,\n    }\n    // download spec as a json file\n    const blob = new Blob([JSON.stringify(spec, null, 2)], {type: \"application/json\"});\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `${spec.projectId}.json`;\n    a.click();\n    URL.revokeObjectURL(url);\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  actions,\n  mutations\n}\n","import axios from \"axios\";\n\nexport function queryProjectSpec(fileName, callback, errorCallBack) {\n  let url = './data/gaia-proj/' + fileName\n  axios.get(url)\n    .then(rep => {\n      callback(rep)\n    }).catch(error => {\n      errorCallBack(error)\n    })\n}\n\nexport function queryStaticSVG(fileName, callback, errorCallBack) {\n  let url = './data/svg/' + fileName\n  return axios.get(url)\n    .then(rep => {\n      callback(rep)\n    }).catch(error => {\n      errorCallBack(error)\n    })\n}\n\nexport function querySampleFile(fileName, callback, errorCallBack) {\n  let url = './data/spec/' + fileName\n  return axios.get(url)\n    .then(rep => {\n      callback(rep)\n    }).catch(error => {\n      errorCallBack(error)\n    })\n}\n\nexport function queryTranscript(fileName, callback, errorCallBack) {\n  let url = './data/transcript/' + fileName\n  return axios.get(url)\n    .then(rep => {\n      callback(rep)\n    }).catch(error => {\n      errorCallBack(error)\n    })\n}\n\nexport function queryStaticAudio(fileName, callback, errorCallBack){\n  let url = './data/audio/' + fileName\n  return axios.get(url)\n      .then(rep => {\n        callback(rep)\n      }).catch(error => {\n    errorCallBack(error)\n  })\n}\n\nexport function queryTargetModel(fileName, callback, errorCallBack) {\n  let url = './data/target-v2/' + fileName\n  return axios.get(url)\n    .then(rep => {\n      callback(rep)\n    }).catch(error => {\n      errorCallBack(error)\n    })\n}\n\n","export default [{id:'dc-courts-0',label:'2017 DC Courts',group:'Real video reproduction',chartType:'Bar chart'},{id:'bar-chart-task-example',label:'Bar Chart Example',group:'User study',chartType:'Bar chart'},{id:'dc-courts-task1',label:'2017 DC Courts (Task 1)',group:'User study',chartType:'Bar chart'},{id:'dc-courts-task2',label:'2017 DC Courts (Task 2)',group:'User study',chartType:'Bar chart'},{id:'dc-courts-task3',label:'2017 DC Courts (Task 3)',group:'User study',chartType:'Bar chart'},{id:'sat-score-task4',label:'SAT Score (Task 4)',group:'User study',chartType:'Bar chart'},{id:'example-bar-chart-task1',label:'Bar Chart (Task 1 Example)',group:'User study',chartType:'Bar chart'},{id:'example-bar-chart-task2',label:'Bar Chart (Task 2 Example)',group:'User study',chartType:'Bar chart'},{id:'example-bar-chart-task3',label:'Bar Chart (Task 3 Example)',group:'User study',chartType:'Bar chart'},{id:'example-bar-chart-task4',label:'Bar Chart (Task 4 Example)',group:'User study',chartType:'Bar chart'},{id:'dc-courts-task1-ans',label:'2017 DC Courts (Task 1 Answer)',group:'User study',chartType:'Bar chart'},{id:'dc-courts-task2-ans',label:'2017 DC Courts (Task 2 Answer)',group:'User study',chartType:'Bar chart'},{id:'dc-courts-task3-ans',label:'2017 DC Courts (Task 3 Answer)',group:'User study',chartType:'Bar chart'},{id:'sat-score-task4-ans',label:'SAT Score (Task 4 Answer)',group:'User study',chartType:'Bar chart'},{id:'example-bar-chart-task1-ans',label:'Bar Chart (Task 1 Example Answer)',group:'User study',chartType:'Bar chart'},{id:'example-bar-chart-task2-ans',label:'Bar Chart (Task 2 Example Answer)',group:'User study',chartType:'Bar chart'},{id:'example-bar-chart-task3-ans',label:'Bar Chart (Task 3 Example Answer)',group:'User study',chartType:'Bar chart'},{id:'example-bar-chart-task4-ans',label:'Bar Chart (Task 4 Example Answer)',group:'User study',chartType:'Bar chart'},{id:'sat-score-0',label:'SAT Score',group:'Real video reproduction',chartType:'Bar chart'},{id:'army-military-comparison-0',label:'GDP Comparison',group:'Real video reproduction',chartType:'Bar chart'},{id:'accounting-of-pirates-0',label:'Accounting of Pirates',group:'Real video reproduction',chartType:'Pie chart'},{id:'commute-mode-0',label:'Commute Mode',group:'Real video reproduction',chartType:'Pie chart'},{id:'australia-fire-0',label:'Australia Fire',group:'Real video reproduction',chartType:'Bar chart'},{id:'share-of-profits-0',label:'Share of Profits',group:'Real video reproduction',chartType:'Line chart'},{id:'shortage-of-water-0',label:'Shortage of Water',group:'Real video reproduction',chartType:'Map chart'},{id:'scottish-independence-referendum-0',label:'Scottish Independence Referendum',group:'Real video reproduction',chartType:'Pie chart'},{id:'house-prices-0',label:'House Prices',group:'Real video reproduction',chartType:'Line chart'},{id:'transportation-mode-0',label:'Transportation Mode',group:'Real video reproduction',chartType:'Grouped Bar chart'},{id:'wealth-inequality-0',label:'Wealth Inequality',group:'Real video reproduction',chartType:'Bar chart'},{id:'vega-bar-chart-0',label:'Bar Chart 1',group:'Vega-Lite chart',chartType:'Grouped Bar chart'},{id:'vega-bar-chart-1',label:'Bar Chart 1 (no type binding)',group:'Vega-Lite chart',chartType:'Grouped Bar chart'},{id:'vega-bar-chart-2',label:'Bar Chart 2',group:'Vega-Lite chart',chartType:'Grouped Bar chart'},{id:'vega-line-chart-0',label:'Line Chart 1',group:'Vega-Lite chart',chartType:'Line chart'},{id:'vega-line-chart-1',label:'Line Chart 2',group:'Vega-Lite chart',chartType:'Line chart'},{id:'vega-scatter-plot-0',label:'Scatter Plot  1',group:'Vega-Lite chart',chartType:'Scatter plot'},{id:'vega-scatter-plot-1',label:'Scatter Plot 2',group:'Vega-Lite chart',chartType:'Scatter plot'},{id:'vega-pie-chart-0',label:'Pie chart',group:'Vega-Lite chart',chartType:'Pie chart'},{id:'vega-pie-chart-1',label:'Radial plot',group:'Vega-Lite chart',chartType:'Radial plot'},{id:'mobile-os-0',label:'Mobile OS',group:'Infographics from related work',chartType:'Mixed chart'},{id:'tornado-chart-0',label:'Tornado chart',group:'Infographics from related work',chartType:'Tornado chart'},{id:'travel-modes-0',label:'Travel Modes',group:'Infographics from related work',chartType:'Isotype'},{id:'timeline-linear-0',label:'Timeline (Linear)',group:'Infographics from related work',chartType:'Timeline'}]","import { computeUUID } from \"@/utils/common/uuid\";\nimport vegaChartDirectionJSON from \"@/assets/vegaChartDirection.json5\";\n\nfunction csv2JSON(str) {\n    var lines = str.split(\"; \");\n    var result = {};\n\n    for (var i = 0; i < lines.length; i++) {\n        var currentline = lines[i].split(\": \");\n        result[currentline[0]] = currentline[1]\n    }\n\n    return result; //JSON\n}\n\nfunction updateSVGModel(svgStr, chartId) {\n    // assume it's bar chart for now\n    const chartType = 'bar-chart'\n\n    const svg = (new DOMParser())\n        .parseFromString(svgStr, 'image/svg+xml')\n        .querySelector('svg');\n\n    const domElList = Array.from(svg.querySelectorAll('*:not(g,svg,defs,defs *)')).filter(domEl => domEl.ariaHidden != \"true\");\n\n    const parentElList = Array.from(svg.querySelectorAll('*')).filter(domEl => domEl.ariaRoleDescription != null);\n    // axis, rect mark container (with bar in it), legend\n\n    var all_data = []\n\n    domElList.forEach(domEl => {\n        domEl.classList.add('chart');\n        if (domEl.ariaLabel != null) {\n           domEl.setAttribute('ac-data', JSON.stringify(csv2JSON(domEl.ariaLabel)));\n           all_data.push(csv2JSON(domEl.ariaLabel))\n        }\n    })\n\n    parentElList.forEach(domEl => {\n        const ariaLabel = domEl.ariaLabel;\n        switch (domEl.ariaRoleDescription) {\n            case 'axis':\n                var XY = domEl.ariaLabel[0].toLowerCase();\n                // role-axis-tick, role-axis-label, role-axis-domain, role-axis-title\n                \n                if (domEl.getElementsByClassName('role-axis-tick').length > 0) {\n                    Array.from(domEl.getElementsByClassName('role-axis-tick')).forEach(el => {\n                        Array.from(el.querySelectorAll('*:not(g,svg,defs,defs *)')).forEach(domEl => {\n                            domEl.classList.add(chartId);\n                            domEl.classList.add('axis');\n                            domEl.classList.add(XY+'-axis');\n                            domEl.classList.add(XY+'-tick');\n                        })\n                    });\n                }\n\n                if (domEl.getElementsByClassName('role-axis-label').length > 0) {\n                    Array.from(domEl.getElementsByClassName('role-axis-label')).forEach(el => {\n                        Array.from(el.querySelectorAll('*:not(g,svg,defs,defs *)')).forEach(domEl => {\n                            if (ariaLabel.includes('discrete')) {\n                                // only record categorical data\n                                domEl.setAttribute('ac-data', JSON.stringify({'TEXT': domEl.innerHTML}))\n                            }\n                            domEl.classList.add(chartId);\n                            domEl.classList.add('axis');\n                            domEl.classList.add(XY+'-axis');\n                            domEl.classList.add(XY+'-label');\n                        })\n                    });\n                }\n\n                if (domEl.getElementsByClassName('role-axis-domain').length > 0) {\n                    Array.from(domEl.getElementsByClassName('role-axis-domain')).forEach(el => {\n                        Array.from(el.querySelectorAll('*:not(g,svg,defs,defs *)')).forEach(domEl => {\n                            domEl.classList.add(chartId);\n                            domEl.classList.add('axis');\n                            domEl.classList.add(XY+'-axis');\n                            domEl.classList.add(XY+'-domain');\n                        })\n                    });\n                }\n                \n                if (domEl.getElementsByClassName('role-axis-title').length > 0) {\n                    Array.from(domEl.getElementsByClassName('role-axis-title')).forEach(el => {\n                        Array.from(el.querySelectorAll('*:not(g,svg,defs,defs *)')).forEach(domEl => {\n                            domEl.classList.add(chartId);\n                            domEl.classList.add('axis');\n                            domEl.classList.add(XY+'-title');\n                        })\n                    });\n                }\n\n                break;\n            case 'rect mark container':\n                var barEls = Array.from(domEl.querySelectorAll('*:not(g,svg,defs,defs *)'));\n                if (barEls.length > 0) {\n                    barEls.forEach(el => {\n                        el.classList.add(chartId);\n                        el.classList.add('mark');\n                        el.classList.add('bar');\n                    })\n                }\n                break;\n            case 'line mark container':\n                var lineEls = Array.from(domEl.querySelectorAll('*:not(g,svg,defs,defs *)'));\n                if (lineEls.length > 0) {\n                    lineEls.forEach(el => {\n                        el.classList.add(chartId);\n                        el.classList.add('mark');\n                        el.classList.add('line');\n                    })\n                }\n                break;\n            case 'arc mark container':\n                var arcEls = Array.from(domEl.querySelectorAll('*:not(g,svg,defs,defs *)'));\n                if (arcEls.length > 0) {\n                    arcEls.forEach(el => {\n                        el.classList.add(chartId);\n                        el.classList.add('mark');\n                        el.classList.add('sector');\n                    })\n                }\n                break;\n            case 'text mark container':\n                var textEls = Array.from(domEl.querySelectorAll('*:not(g,svg,defs,defs *)'));\n                if (textEls.length > 0) {\n                    textEls.forEach(el => {\n                        el.classList.add(chartId);\n                        el.classList.add('mark');\n                        el.classList.add('sector-label');\n                    })\n                }\n                break;\n            case 'point':\n                domEl.classList.add(chartId);\n                domEl.classList.add('mark');\n                domEl.classList.add('point');\n                break;\n            case 'legend':\n                // legend label, legend symbol\n\n                if (domEl.getElementsByClassName('role-legend-label').length > 0 && domEl.getElementsByClassName('role-legend-symbol').length > 0) {\n                    var labelArr = Array.from(domEl.getElementsByClassName('role-legend-label'));\n                    var symbolArr = Array.from(domEl.getElementsByClassName('role-legend-symbol'));\n                    labelArr.forEach((labelEl, idx) => {\n                        var legend_text = labelEl.textContent.trim();\n                        var symbolEl = symbolArr[idx];\n                        Array.from(labelEl.querySelectorAll('*:not(g,svg,defs,defs *)')).forEach(domEl => {\n                            domEl.setAttribute('ac-data', JSON.stringify({'TEXT': legend_text}))\n                            domEl.classList.add(chartId);\n                            domEl.classList.add('legend');\n                            domEl.classList.add('legend-label')\n                        })\n\n                        Array.from(symbolEl.querySelectorAll('*:not(g,svg,defs,defs *)')).forEach(domEl => {\n                            domEl.setAttribute('ac-data', JSON.stringify({'TEXT': legend_text}))\n                            domEl.classList.add(chartId);\n                            domEl.classList.add('legend');\n                            domEl.classList.add('legend-symbol')\n                        })\n                    });\n                } \n                break;   \n            case 'title':\n                Array.from(domEl.querySelectorAll('*:not(g,svg,defs,defs *)')).forEach(domEl => {\n                    domEl.classList.add(chartId);\n                    domEl.classList.add('title');\n                    domEl.classList.add('sub-title')\n                })\n                break\n        }\n    });\n\n    // role-axis-grid\n    Array.from(svg.getElementsByClassName('role-axis-grid')).forEach(el => {\n        Array.from(el.querySelectorAll('*:not(g,svg,defs,defs *)')).forEach(domEl => {\n            domEl.classList.add(chartId);\n            domEl.classList.add('axis');\n            domEl.classList.add('grid');\n        })\n    })\n\n    // fix id\n    const counters = new Map();\n    domElList.forEach(domEl => {\n        let type = domEl.classList[domEl.classList.length-1]\n        if (type) {\n            counters.set(type, (counters.get(type) ?? 0) + 1);\n        }\n    });\n\n    counters.forEach((value, key) => {\n      if (value >= 1) {\n        domElList\n            .filter(domEl => domEl.classList[domEl.classList.length-1] === key)\n            .forEach((domEl, i) => domEl.setAttribute('id', `${key}-${i}`));\n      }\n    });\n\n    // fix id\n    domElList.forEach(domEl => {\n        const elId = domEl.getAttribute('id');\n        if (!elId || elId === '') {\n            domEl.setAttribute('id', domEl.classList[domEl.classList.length-1] + '-ac-' + computeUUID());\n        }\n    });\n\n    // fix class\n    domElList.forEach(domEl => {\n        if (!domEl.classList.contains(chartId)) {\n            domEl.classList.add(chartId);\n            // TODO: more unkown types\n            if (domEl.tagName === 'rect') {\n                domEl.classList.add('background');\n                domEl.classList.add('bg-rect')\n            } else {\n                domEl.classList.add('unknown-type')\n            }\n        }\n    })\n\n    const elements = getElements(domElList, all_data);\n    \n    // TODO: determine direction automatically\n    const layout = vegaChartDirectionJSON[chartId] === undefined ? {\n        \"xAxis\": \"left\",\n        \"yAxis\": \"unknown\",\n        \"title\": \"bottom\"\n      } : vegaChartDirectionJSON[chartId];\n\n    const targetModel = { chartType: chartType, elements, layout, target_type: 'vega' };\n    const newSvgStr = domElToString(svg);\n\n    // Array.from(svg.querySelectorAll('*:not(svg *)')).filter(domEl => domEl.classList.length > 0).forEach(domEl => {\n    //     domEl\n    //     return\n    // });\n\n    return {\n        targetModel,\n        svgStr: newSvgStr,\n    };\n}\n\nfunction domElToString(domEl) {\n    const tmp = document.createElement(\"div\");\n    tmp.appendChild(domEl);\n    return tmp.innerHTML;\n}\n\nfunction getChartData(domEl) {\n    let data = domEl.getAttribute('ac-data');\n    if (!data) {\n        return null;\n    }\n    return JSON.parse(data);\n}\n\nfunction getElements(domElList, all_data) {\n    const elements = [];\n    domElList.forEach(domEl => {\n        const el = {};\n        const id = domEl.getAttribute('id');\n        const clazz = domEl.getAttribute('class');\n\n        const clazzList = clazz.split(' ');\n        const tag = domEl.tagName;\n        const data = getChartData(domEl);\n\n        el.type = clazzList[clazzList.length - 1];\n        el.id = id;\n        el.clazz = clazz;\n        el.data = data;\n        el.tag = tag;\n\n        if (tag === 'text') {\n            if (domEl.children.length !== 0) {\n                el.text = Array.from(domEl.children)\n                    .reduce((str, node) => str + ' ' + node.innerHTML, '')\n                    .trim();\n            } else {\n                el.text = domEl.innerHTML;\n            }\n        } else {\n            el.text = null;\n        }\n\n        if (el.data != null && 'TEXT' in el.data) {\n            // TODO: store into el.data before get stage\n            el.data = all_data.filter(d => JSON.stringify(d).toLowerCase().includes(el.data['TEXT'].toLowerCase()));\n        }\n\n        elements.push(el);\n    });\n    return elements;\n}\n\nexport const VegaTargetUtils = {\n    updateSVGModel, domElToString,\n}","import {Notification} from 'element-ui';\nimport {\n  queryStaticSVG,\n  queryTargetModel,\n  queryStaticAudio,\n  queryTranscript,\n  queryProjectSpec,\n} from \"@/service/projService\";\nimport JSON5 from 'json5';\nimport PROJECT_LIST from '@/assets/projects.json5';\nimport {VegaTargetUtils} from \"@/utils/target/VegaTargetUtils\";\n\n// initial state\nconst state = () => ({\n  projectList: PROJECT_LIST,\n\n  staticSvgMap: new Map(),\n  staticSvgMapSign: false,\n\n  projectId: null,    // default project\n  projectSpec: null,    // list of single spec\n\n  svgStrMap: new Map(),\n  audioStrMap: new Map(),\n  transcriptMap: new Map(),\n  targetModelMap: new Map(),\n  extraProjectSpecMap: new Map(),\n  linkingMap: new Map(),\n\n  audioEl: null,\n})\n\n// getters\nconst getters = {\n}\n\n// actions\nconst actions = {\n  async queryProjectSpec2({state, commit, dispatch}, projectId) {\n    function queryAllSceneData(projSpec) {\n      const promiseList = [];\n      const projectId = projSpec.projectId;\n      const svgFileName = projSpec.chart;\n      // const transcriptFileName = projSpec.transcript;\n      const audioFileName = projSpec.audio;\n      promiseList.push(dispatch('queryStaticSVG', {projectId, svgFileName}));\n      // promiseList.push(dispatch('queryTranscript', {projectId, fileName: transcriptFileName}));\n      promiseList.push(dispatch('queryStaticAudio', {projectId, fileName: audioFileName}));\n      // promiseList.push(dispatch('queryTargetModel', projectId));\n      return Promise.all(promiseList);\n    }\n\n    if (state.extraProjectSpecMap.has(projectId)) {\n      commit('changeProjectId', projectId);\n      commit('initResources');\n      const {svgStr, fakeProjectSpec} = state.extraProjectSpecMap.get(projectId);\n      commit('changeProjectSpec', fakeProjectSpec);\n      commit('addSVGStr', {projectId, svgStr});\n      commit('addStaticSVGStr', {projectId, svgStr});\n\n      commit('project/initProjectView', null, {root: true});\n      commit('editor/changeSceneById', 0, {root: true});\n      commit('editor/initWorkspace', true, {root: true});   // load example (a special empty aniamtion spec)\n    } else {\n      commit('changeProjectId', projectId);\n      commit('initResources');\n\n      const projectFileName = projectId + '.json5';\n      queryProjectSpec(projectFileName, resp => {\n        const projectSpec = typeof resp.data === 'string' ? JSON5.parse(resp.data) : resp.data;\n        commit('changeProjectSpec', projectSpec);\n        queryAllSceneData(projectSpec).then(() => {\n          commit('project/initProjectView', null, {root: true});\n          commit('editor/changeSceneById', 0, {root: true});\n          commit('editor/initWorkspace', true, {root: true});\n        });\n      }, errorResp => {\n        Notification({title: \"Fail to get sample file.\", message: errorResp.message, type: 'error'})\n        console.error(errorResp);\n      })\n    }\n// In 2017, 94% of defendants were released pretrial, 88% of those returned for every single court date, 86% weren't arrested during that time.\n\n  },\n  async queryAllSvg({state, commit}) {\n    state.projectList.forEach(project => {\n      const projectId = project.id;\n\n      if (state.staticSvgMap.has(projectId)) {\n        return;\n      }\n\n      const projectFileName = projectId + '.json5';\n\n      queryProjectSpec(projectFileName, resp => {\n        console.log(\"queryProjectSpec success: \" + projectFileName)\n        const projectSpec = typeof resp.data === 'string' ? JSON5.parse(resp.data) : resp.data;\n        const svgFileName = projectSpec.chart\n\n        if (svgFileName !== '') {\n          const srcId = svgFileName.trim().replace('./', '').replace('.svg', '');\n          const fileName = srcId + '.svg';\n          queryStaticSVG(fileName, resp => {\n            commit('addStaticSVGStr', {projectId, svgStr: resp.data});\n          }, errorResp => {\n            commit('addStaticSVGStr', {projectId, svgStr: ''});\n            console.error(errorResp);\n          })\n        }\n      }, errorResp => {\n        console.error(errorResp);\n      })\n    })\n  },\n  queryStaticSVG({commit}, {projectId, svgFileName}) {\n    return queryStaticSVG(svgFileName, resp => {\n      commit('addSVGStr', {projectId, svgStr: resp.data});\n    }, errorResp => {\n      commit('addSVGStr', {projectId, svgStr: ''});\n      Notification({title: `Chart resource ${svgFileName} not found.`,\n        message: errorResp.message, type: 'warning'})\n      console.error(errorResp);\n    })\n  },\n  queryStaticAudio({commit}, {projectId, fileName}) {\n    return queryStaticAudio(fileName, resp => {\n      commit('addAudioStr', {projectId, audioStr: resp.data});\n    }, errorResp => {\n      commit('addAudioStr', {projectId, audioStr: ''});\n      Notification({title: \"Fail to get static audio.\", message: errorResp.message, type: 'error'})\n      console.log(errorResp)\n    })\n  },\n  queryTranscript({commit}, {projectId, fileName}) {\n    return queryTranscript(fileName, resp => {\n      commit('addTranscript', {projectId, transcript: resp.data});\n    }, errorResp => {\n      commit('addTranscript', {projectId, transcript: {}});\n      Notification({title: `Transcript resource ${fileName} not found.`,\n        message: errorResp.message, type: 'warning'})\n      console.error(errorResp);\n    })\n  },\n  queryTargetModel({commit}, srcId) {\n    const fileName = srcId + '.json';\n    return queryTargetModel(fileName, resp => {\n      commit('addTargetModel', {srcId, targetModel: resp.data});\n    }, errorResp => {\n      commit('addTargetModel', {srcId, targetModel: null});\n      if (fileName.includes('vega')) {\n        return;\n      }\n      Notification({title: `Target model ${fileName} not found.`,\n        message: errorResp.message, type: 'warning'})\n      console.log(errorResp);\n    })\n  },\n  addProject({state, commit}, {srcId, svgStr}) {\n    // chartId = srcId\n    // let projectId = srcId.toLowerCase().replace(/\\s+/g, '-');\n    let projectId = srcId\n\n    // add count no. to project id\n    let no = 0;\n    const projectIdSet = new Set(state.projectList.map(p => p.id));\n    let newProjectId = projectId;\n    while (projectIdSet.has(newProjectId)) {\n      no += 1;\n      newProjectId = projectId + '-' + no;\n    }\n    projectId = newProjectId;\n\n    state.projectList.unshift({id: projectId, label: projectId, group: \"Uploaded\"});\n    // generate svg, empty transcript, empty audio, target model\n    const projectSpec = {\n      svgStr: svgStr,\n      fakeProjectSpec: {\n        projectId,\n        chart: `./${projectId}.svg`,\n        animation: {\n          main: {\n            target: {selectAll: '*:not(g)'},\n            sync: [],\n          }\n        },\n        templates: [],\n      }\n    }\n    state.extraProjectSpecMap.set(projectId, projectSpec)\n    commit('addStaticSVGStr', {projectId, svgStr})\n    commit('changeProjectId', projectId);\n  },\n}\n\n// mutations\nconst mutations = {\n  changeProjectId(state, projectId) {\n    state.projectId = projectId;\n  },\n  initResources(state) {\n    state.projectSpec = null;\n\n    state.svgStrMap = new Map();\n    state.audioStrMap = new Map();\n    state.transcriptMap = new Map();\n    state.targetModelMap = new Map();\n  },\n  changeProjectSpec(state, projectSpec) {\n    state.projectSpec = projectSpec;\n  },\n\n  addSVGStr(state, {projectId, svgStr}) {\n    state.svgStrMap.set(projectId, svgStr);\n  },\n  addStaticSVGStr(state, {projectId, svgStr}) {\n    state.staticSvgMap.set(projectId, svgStr);\n    setTimeout(() => this.commit('resource/changeStaticSvgMapSign'), 0);\n  },\n  changeStaticSvgMapSign(state) {\n    state.staticSvgMapSign ^= true;\n  },\n\n  addAudioStr(state, {projectId, audioStr}) {\n    state.audioStrMap.set(projectId, audioStr);\n  },\n  addTranscript(state, {projectId, transcript}) {\n    state.transcriptMap.set(projectId, transcript);\n  },\n  addTargetModel(state, {projectId, targetModel}) {\n    state.targetModelMap.set(projectId, targetModel);\n  },\n  addLinking(state, {srcId, linking}) {\n    state.linkingMap.set(srcId, linking);\n  },\n\n  updateSVGModel(state, {chartId, svgStr, targetModel}) {\n    state.svgStrMap.set(chartId, svgStr);\n    state.targetModelMap.set(chartId, targetModel);\n  },\n\n  registerAudioEl(state, audioEl) {\n    state.audioEl = audioEl\n  },\n}\n\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  actions,\n  mutations\n}\n","export function getDefaultTargetTree() {\n  let nodeId = 0;\n\n  const addLeafChildren = (node, childClassesList) => {\n    childClassesList.forEach(classes => {\n      node.children.push(new TargetTreeNode(nodeId++, classes, true));\n    });\n  };\n\n  const scene = new TargetTreeNode(nodeId++, 'scene');\n\n  const background = new TargetTreeNode(nodeId++, 'background');\n  scene.children.push(background);\n\n  const chart = new TargetTreeNode(nodeId++, 'chart');\n  scene.children.push(chart);\n\n  const title = new TargetTreeNode(nodeId++, 'title');\n  chart.children.push(title);\n  addLeafChildren(title, ['main-title', 'sub-title']);\n\n  const mark = new TargetTreeNode(nodeId++, 'mark');\n  chart.children.push(mark);\n  addLeafChildren(mark, ['bar', 'label bar-label', 'line', 'point', 'area', 'sector']);\n\n  const axis = new TargetTreeNode(nodeId++, 'axis');\n  chart.children.push(axis);\n\n  const legend = new TargetTreeNode(nodeId++, 'legend');\n  chart.children.push(legend);\n  addLeafChildren(legend, ['legend-label', 'legend-symbol']);\n\n  const xAxis = new TargetTreeNode(nodeId++, 'x-axis');\n  axis.children.push(xAxis);\n  addLeafChildren(xAxis, ['domain x-domain', 'label x-label', 'tick x-tick', 'symbol x-symbol', 'title x-title']);\n\n  const yAxis = new TargetTreeNode(nodeId++, 'y-axis');\n  axis.children.push(yAxis);\n  addLeafChildren(yAxis, ['domain y-domain', 'label y-label', 'tick y-tick', 'symbol y-symbol', 'title y-title']);\n\n  setFullClassesRecursively(scene);\n  return TargetTreeNode.toJSON(scene);\n}\n\nfunction setFullClassesRecursively(node, parentStr) {\n  let fullClasses;\n  if (!parentStr) {\n    fullClasses = node.classes;\n  } else {\n    fullClasses = parentStr + ' ' + node.classes;\n  }\n  node.fullClasses = fullClasses;\n  node.children.forEach(child => setFullClassesRecursively(child, fullClasses));\n}\n\nclass TargetTreeNode {\n  id\n  type\n  classes\n  fullClasses\n  children\n  isLeaf\n\n  constructor(id, classes, isLeaf) {\n    this.id = id;\n    this.classes = classes;\n    const classList = classes.split(' ');\n    this.type = classList[classList.length - 1];\n    this.children = [];\n    this.isLeaf = isLeaf ?? false;\n  }\n\n  static toJSON(object) {\n    return Object.assign({}, object, {\n      children: object.children.map(child => TargetTreeNode.toJSON(child)),\n    });\n  }\n}","import {getDefaultTargetTree} from \"@/core/target/TargetUtils\";\n\nconst mainClassSet = new Set(['mark', 'axis', 'title', 'annotation', 'background', 'legend', 'unknown-type']);\n\n// initial state\nconst state = () => ({\n  chartType: 'unknown',\n  fullTargetList: [],\n  selectedTargets: [],\n  groupedTargetsMap: new Map(),\n  dataGroupUpdateKeyword: null,\n\n  fullTargetLoadSign: 0,\n  tableSelectionChangeSign: 0,\n  dataGroupChangeSign: 0,\n  dataGroupClearSign: 0,\n  svgSelectionChangeSign: 0,\n  visibilityChangeSign: 0,\n  new_counter: 0,\n\n  dragDropSVG: null,\n  clientX: 0,\n  clientY: 0,\n\n  targetTree: getDefaultTargetTree(),\n\n  activeFilters: [],\n})\n\n// getters\nconst getters = {\n  isDragging: state => state.dragDropSVG != null,\n}\n\n// actions\nconst actions = {\n}\n\n// mutations\nconst mutations = {\n  initTargetModel(state, targetModel) {\n    state.chartType = targetModel.chartType;\n    state.fullTargetList = targetModel.elements;\n    state.groupedTargetsMap = new Map();\n    state.selectedTargets = [];\n\n    // compute classList\n    state.fullTargetList.forEach(target => {\n      target.classList = target.clazz.split(' ').reverse();\n    });\n\n    // compute target default name\n    state.fullTargetList.forEach(target => {\n      // find a name\n      let name = target.classList.find(cls => cls.match(`${target.type}-\\\\d*`));\n      if (name) {\n        const group = name.match(/^.*-(\\d*)$/);\n        const no = group[1];\n        name = target.type + ' #' + no;\n      } else {\n        name = target.type;\n      }\n      target.name = name;\n    });\n    const counters = new Map();\n    state.fullTargetList.forEach(target => {\n      counters.set(target.name, (counters.get(target.name) ?? 0) + 1);\n    });\n    counters.forEach((value, key) => {\n      if (value > 1) {\n        state.fullTargetList\n            .filter(target => target.name === key)\n            .forEach((target, i) => target.name = `${key} #${i}`);\n      }\n    });\n\n    // compute main class\n    state.fullTargetList.forEach(target => {\n      const mainClass = target.classList.find(cls => mainClassSet.has(cls));\n      target.mainClass = mainClass ?? null;\n    });\n\n    state.fullTargetList.forEach(target => {\n      target.visibility = true;\n    });\n\n    state.fullTargetList.forEach(target => {\n      if (target.data === null) {\n        return;\n      }\n      var tgt_data = target.data;\n      if (tgt_data.constructor != Array) {\n        tgt_data = new Array(tgt_data);\n      }\n      tgt_data = tgt_data.map(t => JSON.stringify(t).toLowerCase())\n      target.related_targets = state.fullTargetList.filter(t => {\n        if (t.id == target.id || t.data === null) {\n          return false;\n        }\n        var data = t.data;\n        if (data.constructor != Array) {\n          data = new Array(data);\n        }\n        data = data.map(t => JSON.stringify(t).toLowerCase())\n        return data.every(d=>tgt_data.includes(d)) && data.length > 0;\n      });\n    });\n\n    state.fullTargetList.forEach(target => {\n      var keyword = null;\n      if (target.text != null) {\n        keyword = target.text.toLowerCase().trim();\n      } else if (target.data != null) {\n        if (target.type.includes('symbol') || target.type.includes('sector-line')) {\n          if (typeof target.data === 'object' && target.data.name != undefined) {\n            keyword = target.data.name.toLowerCase().trim();\n          } else if (typeof target.data === 'string' || target.data instanceof String) {\n            keyword = target.data.toLowerCase().trim();\n          }\n        }\n      }\n      target.keyword = keyword;\n    });\n\n    state.fullTargetList.forEach(target => { \n      if (target.keyword === null || target.keyword === undefined) {\n        return;\n      }\n      if (!state.groupedTargetsMap.has(target.keyword)) {\n        state.groupedTargetsMap.set(target.keyword, new Set());\n      }\n      var tmp = state.groupedTargetsMap.get(target.keyword);\n      tmp.add(target.id);\n      if (target.related_targets != null) {\n        target.related_targets.forEach(t => tmp.add(t.id));\n      }\n      state.groupedTargetsMap.set(target.keyword, tmp);\n    });\n\n    this.commit('target/changeFullTargetLoadSign');\n    this.commit('target/changeTableSelectionSign');\n  },\n  updateDataGroup(state, {targets, keyword, oldkeyword}) {\n    state.groupedTargetsMap.set(keyword, new Set(targets));\n    this.commit('target/changeDataGroupSign');\n    if (oldkeyword)\n      this.commit('target/changeDataGroupKeyword', keyword);\n  },\n  changeFullTargetLoadSign(state) {\n    state.fullTargetLoadSign ^= 1;\n  },\n  changeSelectedTargets(state, selectedTargets) {\n    state.selectedTargets = selectedTargets;\n  },\n  changeSelectedTargetsById(state, targetIds) {\n    const idSet = new Set(targetIds)\n    state.selectedTargets = state.fullTargetList.filter(t => idSet.has(t.id));\n  },\n  changeSelectedTargetsByIcon(state, iconObj){\n    if (typeof iconObj.target === \"string\") {\n      const idSet = new Set(iconObj.target.replace(/[#,]/g,\"\").split(/[\\s\\n]/));\n      state.selectedTargets = state.fullTargetList.filter(t => idSet.has(t.id));\n    }\n    else if (Array.isArray(iconObj.target)) {\n      const idSet = new Set(iconObj.target);\n      state.selectedTargets = state.fullTargetList.filter(t => idSet.has(t.id));\n    }\n  },\n  changeActiveFilters(state, activeFilters) {\n    state.activeFilters = activeFilters;\n  },\n  changeTableSelectionSign(state) {\n    state.tableSelectionChangeSign ^= 1;\n  },\n  changeDataGroupSign(state) {\n    state.dataGroupChangeSign ^= 1;\n  },\n  changeDataGroupKeyword(state, keyword) {\n    state.dataGroupUpdateKeyword = keyword;\n  },\n  resetDataGroupKeyword(state) {\n    state.dataGroupUpdateKeyword = null;\n  },\n  changeSvgSelectionChangeSign(state) {\n    state.svgSelectionChangeSign ^= 1;\n  },\n  changeVisibilityChangeSign(state) {\n    state.visibilityChangeSign ^= 1;\n  },\n  changeDragDropSVG(state, svg) {\n    state.dragDropSVG = svg;\n  },\n  changeCursorPosition(state, {x, y}) {\n    state.clientX = x;\n    state.clientY = y;\n  },\n  setTargetType(state, {targetIdList, targetNode}) {\n    const idSet = new Set(targetIdList);\n    const targets = state.fullTargetList.filter(target => idSet.has(target.id));\n    const chartId = this.state.editor.scene.chartId;\n    targets.forEach(target => {\n      target.clazz = chartId + ' ' + targetNode.fullClasses;\n      target.classList = targetNode.fullClasses.split(' ').reverse();\n      target.type = targetNode.type;\n\n      const mainClass = target.classList.find(cls => mainClassSet.has(cls));\n      target.mainClass = mainClass ?? null;\n    });\n\n    state.fullTargetList = [...state.fullTargetList];   // self-assign to trigger the setter function\n    this.commit('target/changeTableSelectionSign');\n  },\n  setTargetClass(state, {targetIdList, targetClass}) {\n    const idSet = new Set(targetIdList);\n    state.fullTargetList.forEach((target, index) => {\n      if (idSet.has(target.id)) {\n        target.mainClass = targetClass;\n        state.fullTargetList[index] = target;\n      }\n    });\n    state.fullTargetList = [...state.fullTargetList];\n  },\n  changeVisibility(state, {showIdList, hideIdList}) {\n    const showIdSet = new Set(showIdList);\n    const hideIdSet = new Set(hideIdList);\n    for (let i = 0; i < state.fullTargetList.length; i++) {\n      const t = state.fullTargetList[i];\n      if (showIdSet.has(t.id)) {\n        t.visibility = true;\n        state.fullTargetList[i] = t;    // self-assign\n      } else if (hideIdSet.has(t.id)) {\n        t.visibility = false;\n        state.fullTargetList[i] = t;    // self-assign\n      }\n    }\n    this.commit('target/changeVisibilityChangeSign');\n  },\n}\n\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  actions,\n  mutations\n}\n","import {computeUUID} from \"@/utils/common/uuid\";\n\nexport class Scene {\n  id\n  spec\n\n  chartId\n\n  svgStr\n  audioStr\n  transcript\n  targetModel\n\n  sceneEl\n\n  audioDuration\n\n  constructor() {\n    this.id = computeUUID();\n    this.spec = {\n      charts: [],\n      templates: [],\n      animation: null,\n      binder: null\n    };\n  }\n}\n","// import JSON5 from 'json5';\n\n// initial state\nimport {Scene} from \"@/utils/common/Scene\";\nimport {aniChart} from \"@/core\";\nimport {Notification} from \"element-ui\";\nimport {deepCopy} from \"@/utils/common/copy\";\nimport {AudioUtils} from \"@/utils/audio/AudioUtils\";\nimport {VegaTargetUtils} from \"@/utils/target/VegaTargetUtils\";\nimport {GaiaSession} from 'gaia'\n\nconst state = () => ({\n  isInitialized: false,\n\n  scenes: [],\n  selectedScene: null,\n  canvasHeight: 500,\n  canvasWidth: 800,\n\n  canvasRenderSign: 0,\n\n  sceneEl: null,\n\n  animationJSON: null,\n  timeline: null,\n  running: false,\n\n  useAudio: true,\n  audioSrc: '',\n  audioEl: null,\n  audioReady: false,\n})\n\n// getters\nconst getters = {\n}\n\n// actions\nconst actions = {\n  async compile({commit, dispatch}) {\n    await dispatch('createAudioSrc');\n    commit('createAnimationJSON');\n    commit('createTimeline');\n  },\n  createAudioSrc({state, commit}) {\n    if (state.scenes.some(s => !s.audioSrc)) {\n      console.warn('Missing audio resources');\n      commit('setAudioSrc', '');\n    }\n    const audioBlobList = state.scenes\n        .map(scene => scene.audioStr)\n        .map(dataURI => AudioUtils.dataURItoBlob(dataURI))\n\n    const promiseList = audioBlobList.map(blob => AudioUtils.blobToAudioBuffer(blob));\n    return Promise.all(promiseList)\n        .then(audioBufferList => {\n          console.log(audioBufferList);\n\n          // set audio duration\n          audioBufferList.map((ab, i) => {\n            const duration = AudioUtils.computeAudioDuration(ab)\n            commit('setSceneAudioDuration', {sceneIndex: i, duration});\n          });\n\n          const extendTimes = audioBufferList.map(() => 1);\n          const newAudioBuffer = AudioUtils.concatAudio(audioBufferList, extendTimes);\n          const newAudioBlob = AudioUtils.audioBufferToBlob(newAudioBuffer);\n          const audioSrc = window.URL.createObjectURL(newAudioBlob);\n          commit('setAudioSrc', audioSrc);\n        });\n  },\n}\n\n// mutations\nconst mutations = {\n  initProjectView(state) {\n    state.scenes = [];\n    const sceneSpec = this.state.resource.projectSpec\n    const scene = new Scene()\n    const projectId = scene.id = sceneSpec.projectId\n    const chartId = scene.chartId = sceneSpec.chart.replace('./', '').replace('.svg', '')\n    scene.spec = {\n      charts: [chartId],\n      templates: sceneSpec.templates,\n      animation: sceneSpec.animation,\n      binder: sceneSpec.binder\n    }\n\n    scene.svgStr = this.state.resource.svgStrMap.get(projectId);\n    scene.audioStr = this.state.resource.audioStrMap.get(projectId);\n    scene.transcript = this.state.resource.transcriptMap.get(projectId);\n    scene.targetModel = this.state.resource.targetModelMap.get(projectId);\n    scene.linking = this.state.resource.linkingMap.get(projectId);\n\n    console.log(scene)\n\n    state.scenes.push(scene);\n    state.selectedScene = state.scenes[0];\n\n    state.isInitialized = true;\n    this.commit('project/changeCanvasRenderSign');\n  },\n  changeSelectedScene(state, scene) {\n    state.selectedScene = scene;\n  },\n\n  addScene(state, {charts}) {\n    const newScene = new Scene();\n    state.scenes.push(newScene);\n\n    if (charts) {\n      newScene.spec.charts = charts;\n    }\n  },\n\n  mountSceneElement(state, sceneEl) {\n    state.sceneEl = sceneEl;\n  },\n\n  createTimeline(state) {\n    // reset template lib\n    aniChart.resetTemplateLib();\n    state.scenes.map(s => s.spec.templates).forEach(templates => {\n      if (!templates) {\n        return;\n      }\n      aniChart.registerTemplates(...templates);\n    });\n\n    if (state.timeline) {\n      state.timeline.kill();\n      state.timeline.clear();\n      state.timeline = null;\n    }\n\n    try {\n      state.timeline = aniChart.render(state.sceneEl, state.animationJSON, {});\n\n      const onCompleteFunc = function() {\n        state.running = false;\n        state.timeline.pause();\n      };\n      state.timeline.eventCallback('onComplete', onCompleteFunc);\n\n      // Notification({title: `Compile finished`,\n      //   message: 'Play the animation!', type: 'success'});\n    } catch (exception) {\n      alert(exception)\n      console.error(exception)\n      Notification({title: `Compile failed`,\n        message: exception.message, type: 'warning'});\n    }\n  },\n\n  createAnimationJSON(state) {\n    const sceneSVGList = [...state.sceneEl.querySelectorAll(':scope > svg')].reverse();\n    const concat = [];\n\n    state.scenes.forEach((scene, sceneIndex) => {\n      const sceneContainerId = sceneSVGList[sceneIndex].id;\n\n      concat.push({\n        target: `#scene-cover-${sceneIndex}`,\n        use: 'fade-out',\n        timing: {duration: 0.5, offset: sceneIndex === 0 ? 0 : -0.5},\n      });\n\n      let animation;\n      if (scene.spec.animation.sequence.sync.length !== 0) {\n        animation = deepCopy(scene.spec.animation);\n      } else {\n        animation = {\n          use: 'empty',\n          timing: {duration: 2},\n        }\n      }\n      animation.target = '.' + scene.chartId;\n      const subSync = {\n        sequence: {\n          sync: [\n            animation,\n            {\n              use: \"empty\",\n              timing: {duration: scene.audioDuration},\n            }\n          ]\n        }\n      }\n      concat.push(subSync);\n\n      concat.push({\n        target: `#${sceneContainerId}`,\n        use: 'fade-out',\n        timing: {duration: 0.5, offset: 1},\n      });\n    });\n\n    state.animationJSON = {\n      sequence: {concat},\n    };\n  },\n\n  changeCanvasRenderSign(state) {\n    state.canvasRenderSign ^= 1;\n  },\n\n  // audio\n  mountAudioElement(state, audioEl) {\n    state.audioEl = audioEl;\n  },\n  setAudioSrc(state, audioSrc) {\n    state.audioSrc = audioSrc\n    if (state.setAudioReadyFunc) {\n      state.audioEl.removeEventListener(\"canplaythrough\", state.setAudioReadyFunc, false)\n    } else {\n      state.setAudioReadyFunc = function() {\n        state.audioReady = true\n      }\n    }\n    state.audioReady = false;\n    state.audioEl.addEventListener(\"canplaythrough\", state.setAudioReadyFunc, false);\n  },\n  changeUseAudio(state, useAudio) {\n    state.useAudio = useAudio;\n  },\n  changeAudioReady(state, isReady) {\n    state.audioReady = isReady\n  },\n  setSceneAudioDuration(state, {sceneIndex, duration}) {\n    state.scenes[sceneIndex].audioDuration = duration;\n  },\n\n  // timeline\n  playAnimation(state) {\n    state.running = true;\n    state.timeline.resume();\n\n    if (state.audioReady && state.useAudio) {\n      state.audioEl.play()\n    }\n  },\n  pauseAnimation(state) {\n    state.running = false;\n    state.timeline.pause();\n\n    if (state.audioReady && state.useAudio) {\n      state.audioEl.pause()\n    }\n  },\n  restartAnimation(state) {\n    state.running = true;\n    state.timeline.restart();\n\n    if (state.audioReady && state.useAudio) {\n      state.audioEl.pause()\n      state.audioEl.currentTime = 0\n      state.audioEl.play()\n    }\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  getters,\n  actions,\n  mutations\n}\n","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport editor from \"@/store/modules/editor\";\nimport resource from \"@/store/modules/resource\";\nimport target from \"@/store/modules/target\";\nimport project from \"@/store/modules/project\";\n\nVue.use(Vuex)\n\n// const debug = process.env.NODE_ENV !== 'production'\n\nexport default new Vuex.Store({\n  modules: {\n    editor, resource, target, project,\n  },\n  // strict: debug,\n  strict: false,\n})\n","import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport App from './App.vue'\nimport router from '@/router'\nimport store from '@/store'\nimport ElementUI from 'element-ui'\n// import 'element-ui/lib/theme-chalk/index.css'\nimport '@/assets/element-theme/index.css'\nimport locale from 'element-ui/lib/locale/lang/en'\nimport {saveAs} from 'file-saver';\nimport VueCodeMirror from 'vue-codemirror'\nimport 'codemirror/lib/codemirror.css'\n\nexport const eventBus = new Vue();\n\nVue.config.productionTip = false\n\nVue.use(VueRouter)\nVue.use(ElementUI, {locale})\nVue.use(VueCodeMirror)\n\nVue.prototype.$saveAs = saveAs\n\nnew Vue({\n  render: h => h(App),\n  router,\n  store,\n}).$mount('#app')\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}","import {GaiaSession} from \"@/session/GaiaSession\"\nimport {TemplateLibrary} from \"@/core/library/TemplateLibrary\"\nimport {Resolver} from \"@/core/exec/resolve/Resolver\"\nimport {TargetModel} from \"@/core/ast/target/TargetModel\"\nimport {BaseLogicalAniType} from \"@/core/ast/animation/logical/LogicalAnimation\"\nimport {PhysicalAnimation} from \"@/core/ast/animation/physical/PhysicalAnimation\"\nimport {Synthesizer} from \"@/core/exec/synthesis/Synthesizer\"\n\n\nexport class CompileExec<ObjType, AniType> {\n  readonly session: GaiaSession\n  readonly _unresolved: BaseLogicalAniType | null\n  readonly _targetModel: TargetModel<ObjType> | null\n\n  private _resolver: Resolver<ObjType, AniType>\n  private _synthesizer: Synthesizer<ObjType, AniType>\n\n  private _resolved: BaseLogicalAniType = null\n  private _planned: PhysicalAnimation<ObjType, BaseLogicalAniType, AniType> = null\n  private _generated: AniType = null\n\n  /**\n   * Used for converting spec to a LogicalAnimation via template.\n   * @param session\n   */\n  static quickExec(session: GaiaSession): CompileExec<unknown, unknown> {\n    return new CompileExec<unknown, unknown>(session, null, null)\n  }\n\n  static fullyExec<ObjType, AniType>(session: GaiaSession, input: BaseLogicalAniType, targetModel: TargetModel<ObjType>): CompileExec<ObjType, AniType> {\n    return new CompileExec<ObjType, AniType>(session, input, targetModel)\n  }\n\n  private constructor(session: GaiaSession, input: BaseLogicalAniType, targetModel: TargetModel<ObjType>) {\n    this.session = session\n    this._unresolved = input\n    this._targetModel = targetModel\n  }\n\n  setResolver(resolver: Resolver<ObjType, AniType>): this {\n    this._resolver = resolver\n    return this\n  }\n\n  setSynthesizer(synthesizer: Synthesizer<ObjType, AniType>): this {\n    this._synthesizer = synthesizer\n    return this\n  }\n\n  get templateLibrary(): TemplateLibrary {\n    return this.session.templateLibrary\n  }\n\n  get targetModel(): TargetModel<ObjType> {\n    if (this._unresolved === null) {\n      throw new Error('QuickExec does not contain a TargetModel.')\n    }\n    return this._targetModel\n  }\n\n  get parsed(): BaseLogicalAniType {\n    if (this._unresolved === null) {\n      throw new Error('QuickExec does not contain a LogicalAnimation.')\n    }\n    return this._unresolved\n  }\n\n  get resolved(): BaseLogicalAniType {\n    if (this._unresolved === null) {\n      throw new Error('QuickExec cannot be used to resolve LogicalAnimation.')\n    }\n    if (this._resolved === null) {\n      this._resolved = this._resolver.execute(this._unresolved)\n    }\n    return this._resolved\n  }\n\n  get planned(): PhysicalAnimation<ObjType, BaseLogicalAniType, AniType> {\n    if (this._planned === null) {\n      this._planned = this._synthesizer.plan(this.resolved)\n    }\n    return this._planned\n  }\n\n  get generated(): AniType {\n    if (this._generated === null) {\n      this._generated = this._synthesizer.generate(this.planned)\n    }\n    return this._generated\n  }\n}\n","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  Object.defineProperty(subClass, \"prototype\", {\n    writable: false\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n  return self;\n}","import _typeof from \"./typeof.js\";\nimport assertThisInitialized from \"./assertThisInitialized.js\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n  return assertThisInitialized(self);\n}","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","import {Proto} from \"@/module/Proto\"\n\n\nexport class Package {\n  readonly packageName: string\n  readonly parent: Package | null\n\n  private classMap: Map<string, unknown> = new Map()\n  private subPackageMap: Map<string, Package> = new Map()\n\n  private constructor(name: string, parent: Package) {\n    this.packageName = name\n    this.parent = parent\n  }\n\n  static createPackage(name: string, parent: Package) {\n    return new Package(name, parent)\n  }\n\n  static createDefaultPackage(): Package {\n    return new Package('', null)\n  }\n\n  isDefault(): boolean {\n    return this.parent === null\n  }\n\n  registerProto<T extends Proto<T>>(proto: T): Package {\n    this.classMap.set(proto.name, proto)\n    return this\n  }\n\n  unregisterProto(name: string): boolean {\n    return this.classMap.delete(name)\n  }\n\n  queryAllProto<T extends Proto<T>>(): T[] {\n    return Array.from(this.classMap.values()) as T[]\n  }\n\n  queryProto<T extends Proto<T>>(clsName: string): T | null {\n    return this.classMap.get(clsName) as T ?? null\n  }\n\n  addSubPackage(pkg: Package) {\n    this.subPackageMap.set(pkg.packageName, pkg)\n  }\n\n  querySubPackages(): Array<Package> {\n    return Array.from(this.subPackageMap.values())\n  }\n\n  querySubPackage(pkgName: string): Package | null {\n    return this.subPackageMap.get(pkgName) ?? null\n  }\n}\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var baseGetTag = require('./_baseGetTag'),\n    isArray = require('./isArray'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n}\n\nmodule.exports = isString;\n","import {Proto} from \"@/module/Proto\"\nimport {Package} from \"@/module/Package\"\nimport {isString} from \"lodash\"\n\nexport class ProtoManager<T extends Proto<T>> {\n  readonly rootPackage: Package = Package.createDefaultPackage()\n  private _protoSize = 0\n\n  get protoSize() {\n    return this._protoSize\n  }\n\n  private createPackage(packageName: string | string[]): Package {\n    const pathArr = isString(packageName) ? ProtoManager.splitPath(packageName) : packageName\n    let curPkg = this.rootPackage\n    for (const name of pathArr) {\n      let subPkg = curPkg.querySubPackage(name)\n      if (subPkg === null) {\n        subPkg = Package.createPackage(name, curPkg)\n        curPkg.addSubPackage(subPkg)\n      }\n      curPkg = subPkg\n    }\n    return curPkg\n  }\n\n  private queryPackage(packageName: string | string[]): Package {\n    const pathArr = isString(packageName) ? ProtoManager.splitPath(packageName) : packageName\n    let curPkg = this.rootPackage\n    for (let i = 0; i < pathArr.length; ++i) {\n      const subPkg = curPkg.querySubPackage(pathArr[i])\n      if (subPkg === null) {\n        return null\n      }\n      curPkg = subPkg\n    }\n    return curPkg\n  }\n\n  registerProto(proto: Proto<T>) {\n    const protoName = proto.name\n    const packageName = proto.packageName\n\n    let pkg = this.queryPackage(packageName)\n    if (pkg === null) {\n      pkg = this.createPackage(packageName)\n    } else {\n      // package exists\n      if (pkg.queryProto(protoName) !== null) {\n        throw new Error(`Proto ${proto.fullName} has already been registered.`)\n      }\n    }\n    pkg.registerProto(proto)\n    this._protoSize += 1\n  }\n\n  registerOrUpdateProto(proto: Proto<T>) {\n    const protoName = proto.name\n    const packageName = proto.packageName\n\n    let pkg = this.queryPackage(packageName)\n    if (pkg === null) {\n      pkg = this.createPackage(packageName)\n    }\n    if (pkg.queryProto(protoName) === null) {\n      // is a new proto\n      this._protoSize += 1\n    } else {\n      pkg.unregisterProto(protoName)\n    }\n    pkg.registerProto(proto)\n  }\n\n  unregisterProto(fullName: string) {\n    const proto = this.queryProtoByFullName(fullName)\n    if (proto === null) {\n      throw new Error(`Proto ${fullName} doesn't exist.`)\n    }\n    const pkg = this.queryPackage(proto.packageName)\n    const success = pkg.unregisterProto(proto.name)\n    if (success) {\n      this._protoSize -= 1\n    }\n    return success\n  }\n\n  queryProtoByFullName(fullName: string | string[]): T {\n    const pathArr = isString(fullName) ? ProtoManager.splitPath(fullName) : fullName\n    if (pathArr.length === 0) {\n      throw new Error(`Invalid proto name path ${fullName}.`)\n    }\n    const clsName = pathArr.pop()\n    const pkg = this.queryPackage(pathArr)\n    return pkg.queryProto(clsName)\n  }\n\n  containProtoByFullName(fullName: string | string[]): boolean {\n    return this.queryProtoByFullName(fullName) === null\n  }\n\n  queryProto(protoName: string | string[]): T | undefined {\n    const pathArr = isString(protoName) ? ProtoManager.splitPath(protoName) : protoName\n    if (pathArr.length === 0) {\n      throw new Error(`Invalid proto name path ${protoName}.`)\n    }\n\n    const clsName = pathArr.pop()\n    const suffix = pathArr.join('.')\n    const candidates = this.findProto(clsName)\n        .filter(c => c.packageName.endsWith(suffix))\n\n    if (candidates.length === 1) {\n      return candidates[0] as T\n    } else if (candidates.length === 0) {\n      // throw new Error(`Invalid class path ${protoName}.`)\n      return undefined\n    } else {\n      // return class in default package if it exists\n      const candidateInDefaultPkg = candidates.find(c => c.packageName === '')\n      if (candidateInDefaultPkg !== undefined) {\n        return candidateInDefaultPkg as T\n      } else {\n        throw new Error(`Ambiguous proto name. ` +\n            `${candidates.length} prototypes found: \\n` +\n            `${candidates.map(c => c.fullName).join('\\n')}\\n`)\n      }\n    }\n  }\n\n  queryProtoByPackage(pkgName: string): T[] {\n    const pkg = this.queryPackage(pkgName)\n    if (pkg === null) {\n      return undefined\n    }\n    return pkg.queryAllProto()\n  }\n\n  queryAllProto(): T[] {\n    const result: T[] = []\n    this.queryAllProtoHelper(this.rootPackage, result)\n    return result\n  }\n\n  private queryAllProtoHelper(pkg: Package, ret: T[]) {\n    pkg.queryAllProto().forEach(p => ret.push(p as T))\n    pkg.querySubPackages().forEach(p => this.queryAllProtoHelper(p, ret))\n  }\n\n  private findProto(protoName: string): T[] {\n    const ret: T[] = []\n    const dfs = (pkg: Package) => {\n      const proto = pkg.queryProto(protoName) as T\n      if (proto !== null) {\n        ret.push(proto)\n      }\n      pkg.querySubPackages().forEach(p => dfs(p))\n    }\n    dfs(this.rootPackage)\n    return ret\n  }\n\n  static splitPath(path: string): string[] {\n    if (path.trim() === '') {\n      return []\n    }\n    const pathArr = path.split('.').map(s => s.trim())\n    const valid = pathArr.every(s => s.match('[a-zA-Z0-9]+'))\n    if (!valid) {\n      throw new Error(`Invalid package/proto path ${path}.`)\n    }\n    return pathArr\n  }\n}\n","import {ProtoManager} from \"@/module/ProtoManager\"\nimport {Proto} from \"@/module/Proto\"\n\n\nexport class Library<P extends Proto<P>> {\n  protected protoManager: ProtoManager<P>\n\n  constructor() {\n    this.protoManager = new ProtoManager()\n  }\n\n  get size() {\n    return this.protoManager.protoSize\n  }\n\n  register(proto: P): this\n  register(protoList: P[]): this\n  register(proto: P | P[]): this {\n    if (Array.isArray(proto)) {\n      proto.forEach(p => this.protoManager.registerProto(p))\n    } else {\n      this.protoManager.registerProto(proto)\n    }\n    return this\n  }\n\n  registerOrUpdate(proto: P): this\n  registerOrUpdate(protoList: P[]): this\n  registerOrUpdate(proto: P | P[]): this {\n    if (Array.isArray(proto)) {\n      proto.forEach(p => this.protoManager.registerOrUpdateProto(p))\n    } else {\n      this.protoManager.registerOrUpdateProto(proto)\n    }\n    return this\n  }\n\n  unregister(fullName: string) {\n    return this.protoManager.unregisterProto(fullName)\n  }\n\n  /**\n   * @param name Proto name (might be with identifier prefix, e.g., \"b.Clazz\")\n   * @returns Proto instance (full name might be \"a.b.Clazz\"). If not found, return undefined.\n   */\n  get(name: string): P | undefined {\n    return this.protoManager.queryProto(name)\n  }\n\n  getAll() {\n    return this.protoManager.queryAllProto()\n  }\n\n  /**\n   * @param pkg Package name (e.g., \"a.b\")\n   * @returns All protos in the package. If not found, return undefined.\n   */\n  getByPackage(pkg: string): P[] | undefined {\n    return this.protoManager.queryProtoByPackage(pkg)\n  }\n}\n","import {BaseTemplateType} from \"@/core/ast/template/BaseTemplate\"\nimport {Library} from \"@/core/library/Library\"\n\nexport class TemplateLibrary extends Library<BaseTemplateType> {\n}\n","import {BaseLogicalAniType} from \"@/core/ast/animation/logical/LogicalAnimation\"\nimport {ResolveRule} from \"@/core/exec/resolve/ResolveRule\"\nimport {toTreeString} from \"@/core/utils/TreeUtils\"\n\nexport enum LogLevel {\n  TRACE = 'TRACE',\n  DEBUG = 'DEBUG',\n  INFO = 'INFO',\n  WARN = 'WARN',\n  ERROR = 'ERROR',\n}\n\nexport type LogRecord = {\n  level: LogLevel\n  timestamp: number\n  caller: string\n  msg: string\n}\n\nexport class Logger {\n  private readonly manager: LoggerManagerClass\n  private readonly caller: string\n\n  constructor(logManager: LoggerManagerClass, caller: string) {\n    this.manager = logManager\n    this.caller = caller\n  }\n\n  trace(...msg: any[]) {\n    this.log(LogLevel.TRACE, ...msg)\n  }\n\n  debug(...msg: any[]) {\n    this.log(LogLevel.DEBUG, ...msg)\n  }\n\n  info(...msg: any[]) {\n    this.log(LogLevel.INFO, ...msg)\n  }\n\n  warn(...msg: any[]) {\n    this.log(LogLevel.WARN, ...msg)\n  }\n\n  error(...msg: any[]) {\n    this.log(LogLevel.ERROR, ...msg)\n  }\n\n  log(level: LogLevel, ...msg: any[]) {\n    this.manager.log(level, this.caller, msg.map(it => String(it)).join(' '))\n  }\n\n  logResolve(before: BaseLogicalAniType, after: BaseLogicalAniType, rule: ResolveRule): void {\n    const msg = `Resolve ${before.toString()} -> ${after.toString()} by rule ${rule.ruleName}\\n`\n        + `Before:\\n${toTreeString(before)}\\nAfter:\\n${toTreeString(after)}`\n    this.debug(msg)\n  }\n}\n\nclass LoggerManagerClass {\n  logLevel: LogLevel = LogLevel.TRACE\n\n  static readonly logLevel2Method = {\n    [LogLevel.TRACE]: console.debug,   // not to use console.trace, it's too verbose\n    [LogLevel.DEBUG]: console.debug,\n    [LogLevel.INFO]: console.info,\n    [LogLevel.WARN]: console.warn,\n    [LogLevel.ERROR]: console.error,\n  }\n\n  static readonly logLevel2Rank = {\n    [LogLevel.TRACE]: 0,\n    [LogLevel.DEBUG]: 1,\n    [LogLevel.INFO]: 2,\n    [LogLevel.WARN]: 3,\n    [LogLevel.ERROR]: 4,\n  }\n\n  private _records: LogRecord[] = []\n\n  getLogger(caller: string): Logger {\n    return new Logger(this, caller)\n  }\n\n  setLogLevel(level: LogLevel) {\n    this.logLevel = level\n  }\n\n  clear() {\n    this._records = []\n  }\n\n  log(level: LogLevel, caller: string, msg: string) {\n    const record = {\n      timestamp: Date.now(),\n      level,\n      caller,\n      msg\n    }\n    this._records.push(record)\n\n    if (LoggerManagerClass.logLevel2Rank[level] >= LoggerManagerClass.logLevel2Rank[this.logLevel]) {\n      LoggerManagerClass.logLevel2Method[level](LoggerManagerClass.log2Str(record))\n    }\n  }\n\n  get records(): LogRecord[] {\n    return [...this._records]\n  }\n\n  static log2Str(log: LogRecord): string {\n    return `${new Date(log.timestamp).toLocaleString()} [${log.level}] [${log.caller}] ${log.msg}`\n  }\n}\n\nexport const LoggerManager = new LoggerManagerClass()\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","export interface TreeLike {\n  visitChildren(): TreeLike[]\n  toOneLineString(): string\n}\n\n/**\n * Creates a tree string like\n * ```\n * Root\n * ├─ Child1\n * │  ├─ Child1.1\n * │  └─ Child1.2\n * └─ Child2\n *    └─ Child2.1\n * ```\n *\n * @param root\n */\nexport function toTreeString(root: TreeLike): string {\n  return toTreeStringHelper(root).join('\\n')\n}\n\nfunction toTreeStringHelper(node: TreeLike, prefix = '', isLast = true): string[] {\n  const ret: string[] = []\n  const isRoot = prefix === ''\n  // const oneLineString = prefix + (isRoot ? '' : (isLast ? '+- ' : ':- ')) + node.toOneLineString()\n  const oneLineString = prefix + (isRoot ? '' : (isLast ? '└─ ' : '├─ ')) + node.toOneLineString()\n  ret.push(oneLineString)\n  const children = node.visitChildren()\n  for (let i = 0; i < children.length; i++) {\n    const child = children[i]\n    const isLastChild = i === children.length - 1\n    // const childPrefix = prefix + (isRoot ? ' ' : (isLast ? '   ' : ':  '))\n    const childPrefix = prefix + (isRoot ? ' ' : (isLast ? '   ' : '│  '))\n    const childLines = toTreeStringHelper(child, childPrefix, isLastChild)\n    ret.push(...childLines)\n  }\n  return ret\n}\n\n// function preorderTraversal(root: TreeLike, func: ((node: TreeLike) => boolean)) {\n//   preorderTraversalHelper(root, func)\n// }\n//\n// function preorderTraversalHelper(node: TreeLike, func: ((node: TreeLike) => boolean)) {\n//   const fastStop = func(node)\n//   if (fastStop) {\n//     return true\n//   }\n//   for (const child of node.children) {\n//     const childFastStop = preorderTraversalHelper(child, func)\n//     if (childFastStop) {\n//       return true\n//     }\n//   }\n//   return false\n// }\n//\n// function transformUp(root: TreeLike, func: ((node: TreeLike) => TreeLike)): TreeLike {\n//   return transformUpHelper(root, func)\n// }\n//\n// function transformUpHelper(node: TreeLike, func: ((node: TreeLike) => TreeLike)): TreeLike {\n//   const newNode = func(node)\n//   newNode. = []\n//   for (const child of node.children) {\n//     const newChild = transformUpHelper(child, func)\n//     newNode.children.push(newChild)\n//   }\n//   return newNode\n// }\n//\n// export const TreeUtils = {\n//   preorderTraversal,\n//   transformUp,\n// }\n","var util;\n(function (util) {\n    util.assertEqual = (val) => val;\n    function assertIs(_arg) { }\n    util.assertIs = assertIs;\n    function assertNever(_x) {\n        throw new Error();\n    }\n    util.assertNever = assertNever;\n    util.arrayToEnum = (items) => {\n        const obj = {};\n        for (const item of items) {\n            obj[item] = item;\n        }\n        return obj;\n    };\n    util.getValidEnumValues = (obj) => {\n        const validKeys = util.objectKeys(obj).filter((k) => typeof obj[obj[k]] !== \"number\");\n        const filtered = {};\n        for (const k of validKeys) {\n            filtered[k] = obj[k];\n        }\n        return util.objectValues(filtered);\n    };\n    util.objectValues = (obj) => {\n        return util.objectKeys(obj).map(function (e) {\n            return obj[e];\n        });\n    };\n    util.objectKeys = typeof Object.keys === \"function\" // eslint-disable-line ban/ban\n        ? (obj) => Object.keys(obj) // eslint-disable-line ban/ban\n        : (object) => {\n            const keys = [];\n            for (const key in object) {\n                if (Object.prototype.hasOwnProperty.call(object, key)) {\n                    keys.push(key);\n                }\n            }\n            return keys;\n        };\n    util.find = (arr, checker) => {\n        for (const item of arr) {\n            if (checker(item))\n                return item;\n        }\n        return undefined;\n    };\n    util.isInteger = typeof Number.isInteger === \"function\"\n        ? (val) => Number.isInteger(val) // eslint-disable-line ban/ban\n        : (val) => typeof val === \"number\" && isFinite(val) && Math.floor(val) === val;\n    function joinValues(array, separator = \" | \") {\n        return array\n            .map((val) => (typeof val === \"string\" ? `'${val}'` : val))\n            .join(separator);\n    }\n    util.joinValues = joinValues;\n    util.jsonStringifyReplacer = (_, value) => {\n        if (typeof value === \"bigint\") {\n            return value.toString();\n        }\n        return value;\n    };\n})(util || (util = {}));\nvar objectUtil;\n(function (objectUtil) {\n    objectUtil.mergeShapes = (first, second) => {\n        return {\n            ...first,\n            ...second, // second overwrites first\n        };\n    };\n})(objectUtil || (objectUtil = {}));\nconst ZodParsedType = util.arrayToEnum([\n    \"string\",\n    \"nan\",\n    \"number\",\n    \"integer\",\n    \"float\",\n    \"boolean\",\n    \"date\",\n    \"bigint\",\n    \"symbol\",\n    \"function\",\n    \"undefined\",\n    \"null\",\n    \"array\",\n    \"object\",\n    \"unknown\",\n    \"promise\",\n    \"void\",\n    \"never\",\n    \"map\",\n    \"set\",\n]);\nconst getParsedType = (data) => {\n    const t = typeof data;\n    switch (t) {\n        case \"undefined\":\n            return ZodParsedType.undefined;\n        case \"string\":\n            return ZodParsedType.string;\n        case \"number\":\n            return isNaN(data) ? ZodParsedType.nan : ZodParsedType.number;\n        case \"boolean\":\n            return ZodParsedType.boolean;\n        case \"function\":\n            return ZodParsedType.function;\n        case \"bigint\":\n            return ZodParsedType.bigint;\n        case \"symbol\":\n            return ZodParsedType.symbol;\n        case \"object\":\n            if (Array.isArray(data)) {\n                return ZodParsedType.array;\n            }\n            if (data === null) {\n                return ZodParsedType.null;\n            }\n            if (data.then &&\n                typeof data.then === \"function\" &&\n                data.catch &&\n                typeof data.catch === \"function\") {\n                return ZodParsedType.promise;\n            }\n            if (typeof Map !== \"undefined\" && data instanceof Map) {\n                return ZodParsedType.map;\n            }\n            if (typeof Set !== \"undefined\" && data instanceof Set) {\n                return ZodParsedType.set;\n            }\n            if (typeof Date !== \"undefined\" && data instanceof Date) {\n                return ZodParsedType.date;\n            }\n            return ZodParsedType.object;\n        default:\n            return ZodParsedType.unknown;\n    }\n};\n\nconst ZodIssueCode = util.arrayToEnum([\n    \"invalid_type\",\n    \"invalid_literal\",\n    \"custom\",\n    \"invalid_union\",\n    \"invalid_union_discriminator\",\n    \"invalid_enum_value\",\n    \"unrecognized_keys\",\n    \"invalid_arguments\",\n    \"invalid_return_type\",\n    \"invalid_date\",\n    \"invalid_string\",\n    \"too_small\",\n    \"too_big\",\n    \"invalid_intersection_types\",\n    \"not_multiple_of\",\n    \"not_finite\",\n]);\nconst quotelessJson = (obj) => {\n    const json = JSON.stringify(obj, null, 2);\n    return json.replace(/\"([^\"]+)\":/g, \"$1:\");\n};\nclass ZodError extends Error {\n    constructor(issues) {\n        super();\n        this.issues = [];\n        this.addIssue = (sub) => {\n            this.issues = [...this.issues, sub];\n        };\n        this.addIssues = (subs = []) => {\n            this.issues = [...this.issues, ...subs];\n        };\n        const actualProto = new.target.prototype;\n        if (Object.setPrototypeOf) {\n            // eslint-disable-next-line ban/ban\n            Object.setPrototypeOf(this, actualProto);\n        }\n        else {\n            this.__proto__ = actualProto;\n        }\n        this.name = \"ZodError\";\n        this.issues = issues;\n    }\n    get errors() {\n        return this.issues;\n    }\n    format(_mapper) {\n        const mapper = _mapper ||\n            function (issue) {\n                return issue.message;\n            };\n        const fieldErrors = { _errors: [] };\n        const processError = (error) => {\n            for (const issue of error.issues) {\n                if (issue.code === \"invalid_union\") {\n                    issue.unionErrors.map(processError);\n                }\n                else if (issue.code === \"invalid_return_type\") {\n                    processError(issue.returnTypeError);\n                }\n                else if (issue.code === \"invalid_arguments\") {\n                    processError(issue.argumentsError);\n                }\n                else if (issue.path.length === 0) {\n                    fieldErrors._errors.push(mapper(issue));\n                }\n                else {\n                    let curr = fieldErrors;\n                    let i = 0;\n                    while (i < issue.path.length) {\n                        const el = issue.path[i];\n                        const terminal = i === issue.path.length - 1;\n                        if (!terminal) {\n                            curr[el] = curr[el] || { _errors: [] };\n                            // if (typeof el === \"string\") {\n                            //   curr[el] = curr[el] || { _errors: [] };\n                            // } else if (typeof el === \"number\") {\n                            //   const errorArray: any = [];\n                            //   errorArray._errors = [];\n                            //   curr[el] = curr[el] || errorArray;\n                            // }\n                        }\n                        else {\n                            curr[el] = curr[el] || { _errors: [] };\n                            curr[el]._errors.push(mapper(issue));\n                        }\n                        curr = curr[el];\n                        i++;\n                    }\n                }\n            }\n        };\n        processError(this);\n        return fieldErrors;\n    }\n    toString() {\n        return this.message;\n    }\n    get message() {\n        return JSON.stringify(this.issues, util.jsonStringifyReplacer, 2);\n    }\n    get isEmpty() {\n        return this.issues.length === 0;\n    }\n    flatten(mapper = (issue) => issue.message) {\n        const fieldErrors = {};\n        const formErrors = [];\n        for (const sub of this.issues) {\n            if (sub.path.length > 0) {\n                fieldErrors[sub.path[0]] = fieldErrors[sub.path[0]] || [];\n                fieldErrors[sub.path[0]].push(mapper(sub));\n            }\n            else {\n                formErrors.push(mapper(sub));\n            }\n        }\n        return { formErrors, fieldErrors };\n    }\n    get formErrors() {\n        return this.flatten();\n    }\n}\nZodError.create = (issues) => {\n    const error = new ZodError(issues);\n    return error;\n};\n\nconst errorMap = (issue, _ctx) => {\n    let message;\n    switch (issue.code) {\n        case ZodIssueCode.invalid_type:\n            if (issue.received === ZodParsedType.undefined) {\n                message = \"Required\";\n            }\n            else {\n                message = `Expected ${issue.expected}, received ${issue.received}`;\n            }\n            break;\n        case ZodIssueCode.invalid_literal:\n            message = `Invalid literal value, expected ${JSON.stringify(issue.expected, util.jsonStringifyReplacer)}`;\n            break;\n        case ZodIssueCode.unrecognized_keys:\n            message = `Unrecognized key(s) in object: ${util.joinValues(issue.keys, \", \")}`;\n            break;\n        case ZodIssueCode.invalid_union:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_union_discriminator:\n            message = `Invalid discriminator value. Expected ${util.joinValues(issue.options)}`;\n            break;\n        case ZodIssueCode.invalid_enum_value:\n            message = `Invalid enum value. Expected ${util.joinValues(issue.options)}, received '${issue.received}'`;\n            break;\n        case ZodIssueCode.invalid_arguments:\n            message = `Invalid function arguments`;\n            break;\n        case ZodIssueCode.invalid_return_type:\n            message = `Invalid function return type`;\n            break;\n        case ZodIssueCode.invalid_date:\n            message = `Invalid date`;\n            break;\n        case ZodIssueCode.invalid_string:\n            if (typeof issue.validation === \"object\") {\n                if (\"includes\" in issue.validation) {\n                    message = `Invalid input: must include \"${issue.validation.includes}\"`;\n                    if (typeof issue.validation.position === \"number\") {\n                        message = `${message} at one or more positions greater than or equal to ${issue.validation.position}`;\n                    }\n                }\n                else if (\"startsWith\" in issue.validation) {\n                    message = `Invalid input: must start with \"${issue.validation.startsWith}\"`;\n                }\n                else if (\"endsWith\" in issue.validation) {\n                    message = `Invalid input: must end with \"${issue.validation.endsWith}\"`;\n                }\n                else {\n                    util.assertNever(issue.validation);\n                }\n            }\n            else if (issue.validation !== \"regex\") {\n                message = `Invalid ${issue.validation}`;\n            }\n            else {\n                message = \"Invalid\";\n            }\n            break;\n        case ZodIssueCode.too_small:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `more than`} ${issue.minimum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? \"exactly\" : issue.inclusive ? `at least` : `over`} ${issue.minimum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact\n                    ? `exactly equal to `\n                    : issue.inclusive\n                        ? `greater than or equal to `\n                        : `greater than `}${issue.minimum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact\n                    ? `exactly equal to `\n                    : issue.inclusive\n                        ? `greater than or equal to `\n                        : `greater than `}${new Date(Number(issue.minimum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.too_big:\n            if (issue.type === \"array\")\n                message = `Array must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `less than`} ${issue.maximum} element(s)`;\n            else if (issue.type === \"string\")\n                message = `String must contain ${issue.exact ? `exactly` : issue.inclusive ? `at most` : `under`} ${issue.maximum} character(s)`;\n            else if (issue.type === \"number\")\n                message = `Number must be ${issue.exact\n                    ? `exactly`\n                    : issue.inclusive\n                        ? `less than or equal to`\n                        : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"bigint\")\n                message = `BigInt must be ${issue.exact\n                    ? `exactly`\n                    : issue.inclusive\n                        ? `less than or equal to`\n                        : `less than`} ${issue.maximum}`;\n            else if (issue.type === \"date\")\n                message = `Date must be ${issue.exact\n                    ? `exactly`\n                    : issue.inclusive\n                        ? `smaller than or equal to`\n                        : `smaller than`} ${new Date(Number(issue.maximum))}`;\n            else\n                message = \"Invalid input\";\n            break;\n        case ZodIssueCode.custom:\n            message = `Invalid input`;\n            break;\n        case ZodIssueCode.invalid_intersection_types:\n            message = `Intersection results could not be merged`;\n            break;\n        case ZodIssueCode.not_multiple_of:\n            message = `Number must be a multiple of ${issue.multipleOf}`;\n            break;\n        case ZodIssueCode.not_finite:\n            message = \"Number must be finite\";\n            break;\n        default:\n            message = _ctx.defaultError;\n            util.assertNever(issue);\n    }\n    return { message };\n};\n\nlet overrideErrorMap = errorMap;\nfunction setErrorMap(map) {\n    overrideErrorMap = map;\n}\nfunction getErrorMap() {\n    return overrideErrorMap;\n}\n\nconst makeIssue = (params) => {\n    const { data, path, errorMaps, issueData } = params;\n    const fullPath = [...path, ...(issueData.path || [])];\n    const fullIssue = {\n        ...issueData,\n        path: fullPath,\n    };\n    let errorMessage = \"\";\n    const maps = errorMaps\n        .filter((m) => !!m)\n        .slice()\n        .reverse();\n    for (const map of maps) {\n        errorMessage = map(fullIssue, { data, defaultError: errorMessage }).message;\n    }\n    return {\n        ...issueData,\n        path: fullPath,\n        message: issueData.message || errorMessage,\n    };\n};\nconst EMPTY_PATH = [];\nfunction addIssueToContext(ctx, issueData) {\n    const issue = makeIssue({\n        issueData: issueData,\n        data: ctx.data,\n        path: ctx.path,\n        errorMaps: [\n            ctx.common.contextualErrorMap,\n            ctx.schemaErrorMap,\n            getErrorMap(),\n            errorMap, // then global default map\n        ].filter((x) => !!x),\n    });\n    ctx.common.issues.push(issue);\n}\nclass ParseStatus {\n    constructor() {\n        this.value = \"valid\";\n    }\n    dirty() {\n        if (this.value === \"valid\")\n            this.value = \"dirty\";\n    }\n    abort() {\n        if (this.value !== \"aborted\")\n            this.value = \"aborted\";\n    }\n    static mergeArray(status, results) {\n        const arrayValue = [];\n        for (const s of results) {\n            if (s.status === \"aborted\")\n                return INVALID;\n            if (s.status === \"dirty\")\n                status.dirty();\n            arrayValue.push(s.value);\n        }\n        return { status: status.value, value: arrayValue };\n    }\n    static async mergeObjectAsync(status, pairs) {\n        const syncPairs = [];\n        for (const pair of pairs) {\n            syncPairs.push({\n                key: await pair.key,\n                value: await pair.value,\n            });\n        }\n        return ParseStatus.mergeObjectSync(status, syncPairs);\n    }\n    static mergeObjectSync(status, pairs) {\n        const finalObject = {};\n        for (const pair of pairs) {\n            const { key, value } = pair;\n            if (key.status === \"aborted\")\n                return INVALID;\n            if (value.status === \"aborted\")\n                return INVALID;\n            if (key.status === \"dirty\")\n                status.dirty();\n            if (value.status === \"dirty\")\n                status.dirty();\n            if (typeof value.value !== \"undefined\" || pair.alwaysSet) {\n                finalObject[key.value] = value.value;\n            }\n        }\n        return { status: status.value, value: finalObject };\n    }\n}\nconst INVALID = Object.freeze({\n    status: \"aborted\",\n});\nconst DIRTY = (value) => ({ status: \"dirty\", value });\nconst OK = (value) => ({ status: \"valid\", value });\nconst isAborted = (x) => x.status === \"aborted\";\nconst isDirty = (x) => x.status === \"dirty\";\nconst isValid = (x) => x.status === \"valid\";\nconst isAsync = (x) => typeof Promise !== \"undefined\" && x instanceof Promise;\n\nvar errorUtil;\n(function (errorUtil) {\n    errorUtil.errToObj = (message) => typeof message === \"string\" ? { message } : message || {};\n    errorUtil.toString = (message) => typeof message === \"string\" ? message : message === null || message === void 0 ? void 0 : message.message;\n})(errorUtil || (errorUtil = {}));\n\nclass ParseInputLazyPath {\n    constructor(parent, value, path, key) {\n        this._cachedPath = [];\n        this.parent = parent;\n        this.data = value;\n        this._path = path;\n        this._key = key;\n    }\n    get path() {\n        if (!this._cachedPath.length) {\n            if (this._key instanceof Array) {\n                this._cachedPath.push(...this._path, ...this._key);\n            }\n            else {\n                this._cachedPath.push(...this._path, this._key);\n            }\n        }\n        return this._cachedPath;\n    }\n}\nconst handleResult = (ctx, result) => {\n    if (isValid(result)) {\n        return { success: true, data: result.value };\n    }\n    else {\n        if (!ctx.common.issues.length) {\n            throw new Error(\"Validation failed but no issues detected.\");\n        }\n        return {\n            success: false,\n            get error() {\n                if (this._error)\n                    return this._error;\n                const error = new ZodError(ctx.common.issues);\n                this._error = error;\n                return this._error;\n            },\n        };\n    }\n};\nfunction processCreateParams(params) {\n    if (!params)\n        return {};\n    const { errorMap, invalid_type_error, required_error, description } = params;\n    if (errorMap && (invalid_type_error || required_error)) {\n        throw new Error(`Can't use \"invalid_type_error\" or \"required_error\" in conjunction with custom error map.`);\n    }\n    if (errorMap)\n        return { errorMap: errorMap, description };\n    const customMap = (iss, ctx) => {\n        if (iss.code !== \"invalid_type\")\n            return { message: ctx.defaultError };\n        if (typeof ctx.data === \"undefined\") {\n            return { message: required_error !== null && required_error !== void 0 ? required_error : ctx.defaultError };\n        }\n        return { message: invalid_type_error !== null && invalid_type_error !== void 0 ? invalid_type_error : ctx.defaultError };\n    };\n    return { errorMap: customMap, description };\n}\nclass ZodType {\n    constructor(def) {\n        /** Alias of safeParseAsync */\n        this.spa = this.safeParseAsync;\n        this._def = def;\n        this.parse = this.parse.bind(this);\n        this.safeParse = this.safeParse.bind(this);\n        this.parseAsync = this.parseAsync.bind(this);\n        this.safeParseAsync = this.safeParseAsync.bind(this);\n        this.spa = this.spa.bind(this);\n        this.refine = this.refine.bind(this);\n        this.refinement = this.refinement.bind(this);\n        this.superRefine = this.superRefine.bind(this);\n        this.optional = this.optional.bind(this);\n        this.nullable = this.nullable.bind(this);\n        this.nullish = this.nullish.bind(this);\n        this.array = this.array.bind(this);\n        this.promise = this.promise.bind(this);\n        this.or = this.or.bind(this);\n        this.and = this.and.bind(this);\n        this.transform = this.transform.bind(this);\n        this.brand = this.brand.bind(this);\n        this.default = this.default.bind(this);\n        this.catch = this.catch.bind(this);\n        this.describe = this.describe.bind(this);\n        this.pipe = this.pipe.bind(this);\n        this.isNullable = this.isNullable.bind(this);\n        this.isOptional = this.isOptional.bind(this);\n    }\n    get description() {\n        return this._def.description;\n    }\n    _getType(input) {\n        return getParsedType(input.data);\n    }\n    _getOrReturnCtx(input, ctx) {\n        return (ctx || {\n            common: input.parent.common,\n            data: input.data,\n            parsedType: getParsedType(input.data),\n            schemaErrorMap: this._def.errorMap,\n            path: input.path,\n            parent: input.parent,\n        });\n    }\n    _processInputParams(input) {\n        return {\n            status: new ParseStatus(),\n            ctx: {\n                common: input.parent.common,\n                data: input.data,\n                parsedType: getParsedType(input.data),\n                schemaErrorMap: this._def.errorMap,\n                path: input.path,\n                parent: input.parent,\n            },\n        };\n    }\n    _parseSync(input) {\n        const result = this._parse(input);\n        if (isAsync(result)) {\n            throw new Error(\"Synchronous parse encountered promise.\");\n        }\n        return result;\n    }\n    _parseAsync(input) {\n        const result = this._parse(input);\n        return Promise.resolve(result);\n    }\n    parse(data, params) {\n        const result = this.safeParse(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    safeParse(data, params) {\n        var _a;\n        const ctx = {\n            common: {\n                issues: [],\n                async: (_a = params === null || params === void 0 ? void 0 : params.async) !== null && _a !== void 0 ? _a : false,\n                contextualErrorMap: params === null || params === void 0 ? void 0 : params.errorMap,\n            },\n            path: (params === null || params === void 0 ? void 0 : params.path) || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const result = this._parseSync({ data, path: ctx.path, parent: ctx });\n        return handleResult(ctx, result);\n    }\n    async parseAsync(data, params) {\n        const result = await this.safeParseAsync(data, params);\n        if (result.success)\n            return result.data;\n        throw result.error;\n    }\n    async safeParseAsync(data, params) {\n        const ctx = {\n            common: {\n                issues: [],\n                contextualErrorMap: params === null || params === void 0 ? void 0 : params.errorMap,\n                async: true,\n            },\n            path: (params === null || params === void 0 ? void 0 : params.path) || [],\n            schemaErrorMap: this._def.errorMap,\n            parent: null,\n            data,\n            parsedType: getParsedType(data),\n        };\n        const maybeAsyncResult = this._parse({ data, path: ctx.path, parent: ctx });\n        const result = await (isAsync(maybeAsyncResult)\n            ? maybeAsyncResult\n            : Promise.resolve(maybeAsyncResult));\n        return handleResult(ctx, result);\n    }\n    refine(check, message) {\n        const getIssueProperties = (val) => {\n            if (typeof message === \"string\" || typeof message === \"undefined\") {\n                return { message };\n            }\n            else if (typeof message === \"function\") {\n                return message(val);\n            }\n            else {\n                return message;\n            }\n        };\n        return this._refinement((val, ctx) => {\n            const result = check(val);\n            const setError = () => ctx.addIssue({\n                code: ZodIssueCode.custom,\n                ...getIssueProperties(val),\n            });\n            if (typeof Promise !== \"undefined\" && result instanceof Promise) {\n                return result.then((data) => {\n                    if (!data) {\n                        setError();\n                        return false;\n                    }\n                    else {\n                        return true;\n                    }\n                });\n            }\n            if (!result) {\n                setError();\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    refinement(check, refinementData) {\n        return this._refinement((val, ctx) => {\n            if (!check(val)) {\n                ctx.addIssue(typeof refinementData === \"function\"\n                    ? refinementData(val, ctx)\n                    : refinementData);\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n    }\n    _refinement(refinement) {\n        return new ZodEffects({\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"refinement\", refinement },\n        });\n    }\n    superRefine(refinement) {\n        return this._refinement(refinement);\n    }\n    optional() {\n        return ZodOptional.create(this, this._def);\n    }\n    nullable() {\n        return ZodNullable.create(this, this._def);\n    }\n    nullish() {\n        return this.nullable().optional();\n    }\n    array() {\n        return ZodArray.create(this, this._def);\n    }\n    promise() {\n        return ZodPromise.create(this, this._def);\n    }\n    or(option) {\n        return ZodUnion.create([this, option], this._def);\n    }\n    and(incoming) {\n        return ZodIntersection.create(this, incoming, this._def);\n    }\n    transform(transform) {\n        return new ZodEffects({\n            ...processCreateParams(this._def),\n            schema: this,\n            typeName: ZodFirstPartyTypeKind.ZodEffects,\n            effect: { type: \"transform\", transform },\n        });\n    }\n    default(def) {\n        const defaultValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodDefault({\n            ...processCreateParams(this._def),\n            innerType: this,\n            defaultValue: defaultValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodDefault,\n        });\n    }\n    brand() {\n        return new ZodBranded({\n            typeName: ZodFirstPartyTypeKind.ZodBranded,\n            type: this,\n            ...processCreateParams(this._def),\n        });\n    }\n    catch(def) {\n        const catchValueFunc = typeof def === \"function\" ? def : () => def;\n        return new ZodCatch({\n            ...processCreateParams(this._def),\n            innerType: this,\n            catchValue: catchValueFunc,\n            typeName: ZodFirstPartyTypeKind.ZodCatch,\n        });\n    }\n    describe(description) {\n        const This = this.constructor;\n        return new This({\n            ...this._def,\n            description,\n        });\n    }\n    pipe(target) {\n        return ZodPipeline.create(this, target);\n    }\n    isOptional() {\n        return this.safeParse(undefined).success;\n    }\n    isNullable() {\n        return this.safeParse(null).success;\n    }\n}\nconst cuidRegex = /^c[^\\s-]{8,}$/i;\nconst cuid2Regex = /^[a-z][a-z0-9]*$/;\nconst ulidRegex = /[0-9A-HJKMNP-TV-Z]{26}/;\nconst uuidRegex = /^([a-f0-9]{8}-[a-f0-9]{4}-[1-5][a-f0-9]{3}-[a-f0-9]{4}-[a-f0-9]{12}|00000000-0000-0000-0000-000000000000)$/i;\n// from https://stackoverflow.com/a/46181/1550155\n// old version: too slow, didn't support unicode\n// const emailRegex = /^((([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+(\\.([a-z]|\\d|[!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])+)*)|((\\x22)((((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(([\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f]|\\x21|[\\x23-\\x5b]|[\\x5d-\\x7e]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(\\\\([\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))))*(((\\x20|\\x09)*(\\x0d\\x0a))?(\\x20|\\x09)+)?(\\x22)))@((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))$/i;\n//old email regex\n// const emailRegex = /^(([^<>()[\\].,;:\\s@\"]+(\\.[^<>()[\\].,;:\\s@\"]+)*)|(\".+\"))@((?!-)([^<>()[\\].,;:\\s@\"]+\\.)+[^<>()[\\].,;:\\s@\"]{1,})[^-<>()[\\].,;:\\s@\"]$/i;\n// eslint-disable-next-line\nconst emailRegex = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\])|(\\[IPv6:(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))\\])|([A-Za-z0-9]([A-Za-z0-9-]*[A-Za-z0-9])*(\\.[A-Za-z]{2,})+))$/;\n// from https://thekevinscott.com/emojis-in-javascript/#writing-a-regular-expression\nconst emojiRegex = /^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$/u;\nconst ipv4Regex = /^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/;\nconst ipv6Regex = /^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/;\n// Adapted from https://stackoverflow.com/a/3143231\nconst datetimeRegex = (args) => {\n    if (args.precision) {\n        if (args.offset) {\n            return new RegExp(`^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}\\\\.\\\\d{${args.precision}}(([+-]\\\\d{2}(:?\\\\d{2})?)|Z)$`);\n        }\n        else {\n            return new RegExp(`^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}\\\\.\\\\d{${args.precision}}Z$`);\n        }\n    }\n    else if (args.precision === 0) {\n        if (args.offset) {\n            return new RegExp(`^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}(([+-]\\\\d{2}(:?\\\\d{2})?)|Z)$`);\n        }\n        else {\n            return new RegExp(`^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}Z$`);\n        }\n    }\n    else {\n        if (args.offset) {\n            return new RegExp(`^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}(\\\\.\\\\d+)?(([+-]\\\\d{2}(:?\\\\d{2})?)|Z)$`);\n        }\n        else {\n            return new RegExp(`^\\\\d{4}-\\\\d{2}-\\\\d{2}T\\\\d{2}:\\\\d{2}:\\\\d{2}(\\\\.\\\\d+)?Z$`);\n        }\n    }\n};\nfunction isValidIP(ip, version) {\n    if ((version === \"v4\" || !version) && ipv4Regex.test(ip)) {\n        return true;\n    }\n    if ((version === \"v6\" || !version) && ipv6Regex.test(ip)) {\n        return true;\n    }\n    return false;\n}\nclass ZodString extends ZodType {\n    constructor() {\n        super(...arguments);\n        this._regex = (regex, validation, message) => this.refinement((data) => regex.test(data), {\n            validation,\n            code: ZodIssueCode.invalid_string,\n            ...errorUtil.errToObj(message),\n        });\n        /**\n         * @deprecated Use z.string().min(1) instead.\n         * @see {@link ZodString.min}\n         */\n        this.nonempty = (message) => this.min(1, errorUtil.errToObj(message));\n        this.trim = () => new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"trim\" }],\n        });\n        this.toLowerCase = () => new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toLowerCase\" }],\n        });\n        this.toUpperCase = () => new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, { kind: \"toUpperCase\" }],\n        });\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = String(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.string) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.string,\n                received: ctx.parsedType,\n            }\n            //\n            );\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.length < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.length > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"string\",\n                        inclusive: true,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"length\") {\n                const tooBig = input.data.length > check.value;\n                const tooSmall = input.data.length < check.value;\n                if (tooBig || tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    if (tooBig) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_big,\n                            maximum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    else if (tooSmall) {\n                        addIssueToContext(ctx, {\n                            code: ZodIssueCode.too_small,\n                            minimum: check.value,\n                            type: \"string\",\n                            inclusive: true,\n                            exact: true,\n                            message: check.message,\n                        });\n                    }\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"email\") {\n                if (!emailRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"email\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"emoji\") {\n                if (!emojiRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"emoji\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"uuid\") {\n                if (!uuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"uuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid\") {\n                if (!cuidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"cuid2\") {\n                if (!cuid2Regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"cuid2\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ulid\") {\n                if (!ulidRegex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ulid\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"url\") {\n                try {\n                    new URL(input.data);\n                }\n                catch (_a) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"url\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"regex\") {\n                check.regex.lastIndex = 0;\n                const testResult = check.regex.test(input.data);\n                if (!testResult) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"regex\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"trim\") {\n                input.data = input.data.trim();\n            }\n            else if (check.kind === \"includes\") {\n                if (!input.data.includes(check.value, check.position)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { includes: check.value, position: check.position },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"toLowerCase\") {\n                input.data = input.data.toLowerCase();\n            }\n            else if (check.kind === \"toUpperCase\") {\n                input.data = input.data.toUpperCase();\n            }\n            else if (check.kind === \"startsWith\") {\n                if (!input.data.startsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { startsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"endsWith\") {\n                if (!input.data.endsWith(check.value)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: { endsWith: check.value },\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"datetime\") {\n                const regex = datetimeRegex(check);\n                if (!regex.test(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_string,\n                        validation: \"datetime\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"ip\") {\n                if (!isValidIP(input.data, check.version)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        validation: \"ip\",\n                        code: ZodIssueCode.invalid_string,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    _addCheck(check) {\n        return new ZodString({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    email(message) {\n        return this._addCheck({ kind: \"email\", ...errorUtil.errToObj(message) });\n    }\n    url(message) {\n        return this._addCheck({ kind: \"url\", ...errorUtil.errToObj(message) });\n    }\n    emoji(message) {\n        return this._addCheck({ kind: \"emoji\", ...errorUtil.errToObj(message) });\n    }\n    uuid(message) {\n        return this._addCheck({ kind: \"uuid\", ...errorUtil.errToObj(message) });\n    }\n    cuid(message) {\n        return this._addCheck({ kind: \"cuid\", ...errorUtil.errToObj(message) });\n    }\n    cuid2(message) {\n        return this._addCheck({ kind: \"cuid2\", ...errorUtil.errToObj(message) });\n    }\n    ulid(message) {\n        return this._addCheck({ kind: \"ulid\", ...errorUtil.errToObj(message) });\n    }\n    ip(options) {\n        return this._addCheck({ kind: \"ip\", ...errorUtil.errToObj(options) });\n    }\n    datetime(options) {\n        var _a;\n        if (typeof options === \"string\") {\n            return this._addCheck({\n                kind: \"datetime\",\n                precision: null,\n                offset: false,\n                message: options,\n            });\n        }\n        return this._addCheck({\n            kind: \"datetime\",\n            precision: typeof (options === null || options === void 0 ? void 0 : options.precision) === \"undefined\" ? null : options === null || options === void 0 ? void 0 : options.precision,\n            offset: (_a = options === null || options === void 0 ? void 0 : options.offset) !== null && _a !== void 0 ? _a : false,\n            ...errorUtil.errToObj(options === null || options === void 0 ? void 0 : options.message),\n        });\n    }\n    regex(regex, message) {\n        return this._addCheck({\n            kind: \"regex\",\n            regex: regex,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    includes(value, options) {\n        return this._addCheck({\n            kind: \"includes\",\n            value: value,\n            position: options === null || options === void 0 ? void 0 : options.position,\n            ...errorUtil.errToObj(options === null || options === void 0 ? void 0 : options.message),\n        });\n    }\n    startsWith(value, message) {\n        return this._addCheck({\n            kind: \"startsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    endsWith(value, message) {\n        return this._addCheck({\n            kind: \"endsWith\",\n            value: value,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    min(minLength, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    max(maxLength, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxLength,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    length(len, message) {\n        return this._addCheck({\n            kind: \"length\",\n            value: len,\n            ...errorUtil.errToObj(message),\n        });\n    }\n    get isDatetime() {\n        return !!this._def.checks.find((ch) => ch.kind === \"datetime\");\n    }\n    get isEmail() {\n        return !!this._def.checks.find((ch) => ch.kind === \"email\");\n    }\n    get isURL() {\n        return !!this._def.checks.find((ch) => ch.kind === \"url\");\n    }\n    get isEmoji() {\n        return !!this._def.checks.find((ch) => ch.kind === \"emoji\");\n    }\n    get isUUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"uuid\");\n    }\n    get isCUID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid\");\n    }\n    get isCUID2() {\n        return !!this._def.checks.find((ch) => ch.kind === \"cuid2\");\n    }\n    get isULID() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ulid\");\n    }\n    get isIP() {\n        return !!this._def.checks.find((ch) => ch.kind === \"ip\");\n    }\n    get minLength() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxLength() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodString.create = (params) => {\n    var _a;\n    return new ZodString({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodString,\n        coerce: (_a = params === null || params === void 0 ? void 0 : params.coerce) !== null && _a !== void 0 ? _a : false,\n        ...processCreateParams(params),\n    });\n};\n// https://stackoverflow.com/questions/3966484/why-does-modulus-operator-return-fractional-number-in-javascript/31711034#31711034\nfunction floatSafeRemainder(val, step) {\n    const valDecCount = (val.toString().split(\".\")[1] || \"\").length;\n    const stepDecCount = (step.toString().split(\".\")[1] || \"\").length;\n    const decCount = valDecCount > stepDecCount ? valDecCount : stepDecCount;\n    const valInt = parseInt(val.toFixed(decCount).replace(\".\", \"\"));\n    const stepInt = parseInt(step.toFixed(decCount).replace(\".\", \"\"));\n    return (valInt % stepInt) / Math.pow(10, decCount);\n}\nclass ZodNumber extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n        this.step = this.multipleOf;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Number(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.number) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.number,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"int\") {\n                if (!util.isInteger(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.invalid_type,\n                        expected: \"integer\",\n                        received: \"float\",\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"min\") {\n                const tooSmall = check.inclusive\n                    ? input.data < check.value\n                    : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        minimum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive\n                    ? input.data > check.value\n                    : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        maximum: check.value,\n                        type: \"number\",\n                        inclusive: check.inclusive,\n                        exact: false,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (floatSafeRemainder(input.data, check.value) !== 0) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"finite\") {\n                if (!Number.isFinite(input.data)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_finite,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodNumber({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    int(message) {\n        return this._addCheck({\n            kind: \"int\",\n            message: errorUtil.toString(message),\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: 0,\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value: value,\n            message: errorUtil.toString(message),\n        });\n    }\n    finite(message) {\n        return this._addCheck({\n            kind: \"finite\",\n            message: errorUtil.toString(message),\n        });\n    }\n    safe(message) {\n        return this._addCheck({\n            kind: \"min\",\n            inclusive: true,\n            value: Number.MIN_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        })._addCheck({\n            kind: \"max\",\n            inclusive: true,\n            value: Number.MAX_SAFE_INTEGER,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n    get isInt() {\n        return !!this._def.checks.find((ch) => ch.kind === \"int\" ||\n            (ch.kind === \"multipleOf\" && util.isInteger(ch.value)));\n    }\n    get isFinite() {\n        let max = null, min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"finite\" ||\n                ch.kind === \"int\" ||\n                ch.kind === \"multipleOf\") {\n                return true;\n            }\n            else if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n            else if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return Number.isFinite(min) && Number.isFinite(max);\n    }\n}\nZodNumber.create = (params) => {\n    return new ZodNumber({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodNumber,\n        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,\n        ...processCreateParams(params),\n    });\n};\nclass ZodBigInt extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.min = this.gte;\n        this.max = this.lte;\n    }\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = BigInt(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.bigint) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.bigint,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        let ctx = undefined;\n        const status = new ParseStatus();\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                const tooSmall = check.inclusive\n                    ? input.data < check.value\n                    : input.data <= check.value;\n                if (tooSmall) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        type: \"bigint\",\n                        minimum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                const tooBig = check.inclusive\n                    ? input.data > check.value\n                    : input.data >= check.value;\n                if (tooBig) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        type: \"bigint\",\n                        maximum: check.value,\n                        inclusive: check.inclusive,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"multipleOf\") {\n                if (input.data % check.value !== BigInt(0)) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.not_multiple_of,\n                        multipleOf: check.value,\n                        message: check.message,\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return { status: status.value, value: input.data };\n    }\n    gte(value, message) {\n        return this.setLimit(\"min\", value, true, errorUtil.toString(message));\n    }\n    gt(value, message) {\n        return this.setLimit(\"min\", value, false, errorUtil.toString(message));\n    }\n    lte(value, message) {\n        return this.setLimit(\"max\", value, true, errorUtil.toString(message));\n    }\n    lt(value, message) {\n        return this.setLimit(\"max\", value, false, errorUtil.toString(message));\n    }\n    setLimit(kind, value, inclusive, message) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [\n                ...this._def.checks,\n                {\n                    kind,\n                    value,\n                    inclusive,\n                    message: errorUtil.toString(message),\n                },\n            ],\n        });\n    }\n    _addCheck(check) {\n        return new ZodBigInt({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    positive(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    negative(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: false,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonpositive(message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    nonnegative(message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: BigInt(0),\n            inclusive: true,\n            message: errorUtil.toString(message),\n        });\n    }\n    multipleOf(value, message) {\n        return this._addCheck({\n            kind: \"multipleOf\",\n            value,\n            message: errorUtil.toString(message),\n        });\n    }\n    get minValue() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min;\n    }\n    get maxValue() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max;\n    }\n}\nZodBigInt.create = (params) => {\n    var _a;\n    return new ZodBigInt({\n        checks: [],\n        typeName: ZodFirstPartyTypeKind.ZodBigInt,\n        coerce: (_a = params === null || params === void 0 ? void 0 : params.coerce) !== null && _a !== void 0 ? _a : false,\n        ...processCreateParams(params),\n    });\n};\nclass ZodBoolean extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = Boolean(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.boolean) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.boolean,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodBoolean.create = (params) => {\n    return new ZodBoolean({\n        typeName: ZodFirstPartyTypeKind.ZodBoolean,\n        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,\n        ...processCreateParams(params),\n    });\n};\nclass ZodDate extends ZodType {\n    _parse(input) {\n        if (this._def.coerce) {\n            input.data = new Date(input.data);\n        }\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.date) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.date,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (isNaN(input.data.getTime())) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_date,\n            });\n            return INVALID;\n        }\n        const status = new ParseStatus();\n        let ctx = undefined;\n        for (const check of this._def.checks) {\n            if (check.kind === \"min\") {\n                if (input.data.getTime() < check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_small,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        minimum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else if (check.kind === \"max\") {\n                if (input.data.getTime() > check.value) {\n                    ctx = this._getOrReturnCtx(input, ctx);\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.too_big,\n                        message: check.message,\n                        inclusive: true,\n                        exact: false,\n                        maximum: check.value,\n                        type: \"date\",\n                    });\n                    status.dirty();\n                }\n            }\n            else {\n                util.assertNever(check);\n            }\n        }\n        return {\n            status: status.value,\n            value: new Date(input.data.getTime()),\n        };\n    }\n    _addCheck(check) {\n        return new ZodDate({\n            ...this._def,\n            checks: [...this._def.checks, check],\n        });\n    }\n    min(minDate, message) {\n        return this._addCheck({\n            kind: \"min\",\n            value: minDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    max(maxDate, message) {\n        return this._addCheck({\n            kind: \"max\",\n            value: maxDate.getTime(),\n            message: errorUtil.toString(message),\n        });\n    }\n    get minDate() {\n        let min = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"min\") {\n                if (min === null || ch.value > min)\n                    min = ch.value;\n            }\n        }\n        return min != null ? new Date(min) : null;\n    }\n    get maxDate() {\n        let max = null;\n        for (const ch of this._def.checks) {\n            if (ch.kind === \"max\") {\n                if (max === null || ch.value < max)\n                    max = ch.value;\n            }\n        }\n        return max != null ? new Date(max) : null;\n    }\n}\nZodDate.create = (params) => {\n    return new ZodDate({\n        checks: [],\n        coerce: (params === null || params === void 0 ? void 0 : params.coerce) || false,\n        typeName: ZodFirstPartyTypeKind.ZodDate,\n        ...processCreateParams(params),\n    });\n};\nclass ZodSymbol extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.symbol) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.symbol,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodSymbol.create = (params) => {\n    return new ZodSymbol({\n        typeName: ZodFirstPartyTypeKind.ZodSymbol,\n        ...processCreateParams(params),\n    });\n};\nclass ZodUndefined extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.undefined,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodUndefined.create = (params) => {\n    return new ZodUndefined({\n        typeName: ZodFirstPartyTypeKind.ZodUndefined,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNull extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.null) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.null,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodNull.create = (params) => {\n    return new ZodNull({\n        typeName: ZodFirstPartyTypeKind.ZodNull,\n        ...processCreateParams(params),\n    });\n};\nclass ZodAny extends ZodType {\n    constructor() {\n        super(...arguments);\n        // to prevent instances of other classes from extending ZodAny. this causes issues with catchall in ZodObject.\n        this._any = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodAny.create = (params) => {\n    return new ZodAny({\n        typeName: ZodFirstPartyTypeKind.ZodAny,\n        ...processCreateParams(params),\n    });\n};\nclass ZodUnknown extends ZodType {\n    constructor() {\n        super(...arguments);\n        // required\n        this._unknown = true;\n    }\n    _parse(input) {\n        return OK(input.data);\n    }\n}\nZodUnknown.create = (params) => {\n    return new ZodUnknown({\n        typeName: ZodFirstPartyTypeKind.ZodUnknown,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNever extends ZodType {\n    _parse(input) {\n        const ctx = this._getOrReturnCtx(input);\n        addIssueToContext(ctx, {\n            code: ZodIssueCode.invalid_type,\n            expected: ZodParsedType.never,\n            received: ctx.parsedType,\n        });\n        return INVALID;\n    }\n}\nZodNever.create = (params) => {\n    return new ZodNever({\n        typeName: ZodFirstPartyTypeKind.ZodNever,\n        ...processCreateParams(params),\n    });\n};\nclass ZodVoid extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.undefined) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.void,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n}\nZodVoid.create = (params) => {\n    return new ZodVoid({\n        typeName: ZodFirstPartyTypeKind.ZodVoid,\n        ...processCreateParams(params),\n    });\n};\nclass ZodArray extends ZodType {\n    _parse(input) {\n        const { ctx, status } = this._processInputParams(input);\n        const def = this._def;\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (def.exactLength !== null) {\n            const tooBig = ctx.data.length > def.exactLength.value;\n            const tooSmall = ctx.data.length < def.exactLength.value;\n            if (tooBig || tooSmall) {\n                addIssueToContext(ctx, {\n                    code: tooBig ? ZodIssueCode.too_big : ZodIssueCode.too_small,\n                    minimum: (tooSmall ? def.exactLength.value : undefined),\n                    maximum: (tooBig ? def.exactLength.value : undefined),\n                    type: \"array\",\n                    inclusive: true,\n                    exact: true,\n                    message: def.exactLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.minLength !== null) {\n            if (ctx.data.length < def.minLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxLength !== null) {\n            if (ctx.data.length > def.maxLength.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxLength.value,\n                    type: \"array\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxLength.message,\n                });\n                status.dirty();\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.all([...ctx.data].map((item, i) => {\n                return def.type._parseAsync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n            })).then((result) => {\n                return ParseStatus.mergeArray(status, result);\n            });\n        }\n        const result = [...ctx.data].map((item, i) => {\n            return def.type._parseSync(new ParseInputLazyPath(ctx, item, ctx.path, i));\n        });\n        return ParseStatus.mergeArray(status, result);\n    }\n    get element() {\n        return this._def.type;\n    }\n    min(minLength, message) {\n        return new ZodArray({\n            ...this._def,\n            minLength: { value: minLength, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxLength, message) {\n        return new ZodArray({\n            ...this._def,\n            maxLength: { value: maxLength, message: errorUtil.toString(message) },\n        });\n    }\n    length(len, message) {\n        return new ZodArray({\n            ...this._def,\n            exactLength: { value: len, message: errorUtil.toString(message) },\n        });\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodArray.create = (schema, params) => {\n    return new ZodArray({\n        type: schema,\n        minLength: null,\n        maxLength: null,\n        exactLength: null,\n        typeName: ZodFirstPartyTypeKind.ZodArray,\n        ...processCreateParams(params),\n    });\n};\nfunction deepPartialify(schema) {\n    if (schema instanceof ZodObject) {\n        const newShape = {};\n        for (const key in schema.shape) {\n            const fieldSchema = schema.shape[key];\n            newShape[key] = ZodOptional.create(deepPartialify(fieldSchema));\n        }\n        return new ZodObject({\n            ...schema._def,\n            shape: () => newShape,\n        });\n    }\n    else if (schema instanceof ZodArray) {\n        return new ZodArray({\n            ...schema._def,\n            type: deepPartialify(schema.element),\n        });\n    }\n    else if (schema instanceof ZodOptional) {\n        return ZodOptional.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodNullable) {\n        return ZodNullable.create(deepPartialify(schema.unwrap()));\n    }\n    else if (schema instanceof ZodTuple) {\n        return ZodTuple.create(schema.items.map((item) => deepPartialify(item)));\n    }\n    else {\n        return schema;\n    }\n}\nclass ZodObject extends ZodType {\n    constructor() {\n        super(...arguments);\n        this._cached = null;\n        /**\n         * @deprecated In most cases, this is no longer needed - unknown properties are now silently stripped.\n         * If you want to pass through unknown properties, use `.passthrough()` instead.\n         */\n        this.nonstrict = this.passthrough;\n        // extend<\n        //   Augmentation extends ZodRawShape,\n        //   NewOutput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_output\"]\n        //       : k extends keyof Output\n        //       ? Output[k]\n        //       : never;\n        //   }>,\n        //   NewInput extends util.flatten<{\n        //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n        //       ? Augmentation[k][\"_input\"]\n        //       : k extends keyof Input\n        //       ? Input[k]\n        //       : never;\n        //   }>\n        // >(\n        //   augmentation: Augmentation\n        // ): ZodObject<\n        //   extendShape<T, Augmentation>,\n        //   UnknownKeys,\n        //   Catchall,\n        //   NewOutput,\n        //   NewInput\n        // > {\n        //   return new ZodObject({\n        //     ...this._def,\n        //     shape: () => ({\n        //       ...this._def.shape(),\n        //       ...augmentation,\n        //     }),\n        //   }) as any;\n        // }\n        /**\n         * @deprecated Use `.extend` instead\n         *  */\n        this.augment = this.extend;\n    }\n    _getCached() {\n        if (this._cached !== null)\n            return this._cached;\n        const shape = this._def.shape();\n        const keys = util.objectKeys(shape);\n        return (this._cached = { shape, keys });\n    }\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.object) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const { status, ctx } = this._processInputParams(input);\n        const { shape, keys: shapeKeys } = this._getCached();\n        const extraKeys = [];\n        if (!(this._def.catchall instanceof ZodNever &&\n            this._def.unknownKeys === \"strip\")) {\n            for (const key in ctx.data) {\n                if (!shapeKeys.includes(key)) {\n                    extraKeys.push(key);\n                }\n            }\n        }\n        const pairs = [];\n        for (const key of shapeKeys) {\n            const keyValidator = shape[key];\n            const value = ctx.data[key];\n            pairs.push({\n                key: { status: \"valid\", value: key },\n                value: keyValidator._parse(new ParseInputLazyPath(ctx, value, ctx.path, key)),\n                alwaysSet: key in ctx.data,\n            });\n        }\n        if (this._def.catchall instanceof ZodNever) {\n            const unknownKeys = this._def.unknownKeys;\n            if (unknownKeys === \"passthrough\") {\n                for (const key of extraKeys) {\n                    pairs.push({\n                        key: { status: \"valid\", value: key },\n                        value: { status: \"valid\", value: ctx.data[key] },\n                    });\n                }\n            }\n            else if (unknownKeys === \"strict\") {\n                if (extraKeys.length > 0) {\n                    addIssueToContext(ctx, {\n                        code: ZodIssueCode.unrecognized_keys,\n                        keys: extraKeys,\n                    });\n                    status.dirty();\n                }\n            }\n            else if (unknownKeys === \"strip\") ;\n            else {\n                throw new Error(`Internal ZodObject error: invalid unknownKeys value.`);\n            }\n        }\n        else {\n            // run catchall validation\n            const catchall = this._def.catchall;\n            for (const key of extraKeys) {\n                const value = ctx.data[key];\n                pairs.push({\n                    key: { status: \"valid\", value: key },\n                    value: catchall._parse(new ParseInputLazyPath(ctx, value, ctx.path, key) //, ctx.child(key), value, getParsedType(value)\n                    ),\n                    alwaysSet: key in ctx.data,\n                });\n            }\n        }\n        if (ctx.common.async) {\n            return Promise.resolve()\n                .then(async () => {\n                const syncPairs = [];\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    syncPairs.push({\n                        key,\n                        value: await pair.value,\n                        alwaysSet: pair.alwaysSet,\n                    });\n                }\n                return syncPairs;\n            })\n                .then((syncPairs) => {\n                return ParseStatus.mergeObjectSync(status, syncPairs);\n            });\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get shape() {\n        return this._def.shape();\n    }\n    strict(message) {\n        errorUtil.errToObj;\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strict\",\n            ...(message !== undefined\n                ? {\n                    errorMap: (issue, ctx) => {\n                        var _a, _b, _c, _d;\n                        const defaultError = (_c = (_b = (_a = this._def).errorMap) === null || _b === void 0 ? void 0 : _b.call(_a, issue, ctx).message) !== null && _c !== void 0 ? _c : ctx.defaultError;\n                        if (issue.code === \"unrecognized_keys\")\n                            return {\n                                message: (_d = errorUtil.errToObj(message).message) !== null && _d !== void 0 ? _d : defaultError,\n                            };\n                        return {\n                            message: defaultError,\n                        };\n                    },\n                }\n                : {}),\n        });\n    }\n    strip() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"strip\",\n        });\n    }\n    passthrough() {\n        return new ZodObject({\n            ...this._def,\n            unknownKeys: \"passthrough\",\n        });\n    }\n    // const AugmentFactory =\n    //   <Def extends ZodObjectDef>(def: Def) =>\n    //   <Augmentation extends ZodRawShape>(\n    //     augmentation: Augmentation\n    //   ): ZodObject<\n    //     extendShape<ReturnType<Def[\"shape\"]>, Augmentation>,\n    //     Def[\"unknownKeys\"],\n    //     Def[\"catchall\"]\n    //   > => {\n    //     return new ZodObject({\n    //       ...def,\n    //       shape: () => ({\n    //         ...def.shape(),\n    //         ...augmentation,\n    //       }),\n    //     }) as any;\n    //   };\n    extend(augmentation) {\n        return new ZodObject({\n            ...this._def,\n            shape: () => ({\n                ...this._def.shape(),\n                ...augmentation,\n            }),\n        });\n    }\n    /**\n     * Prior to zod@1.0.12 there was a bug in the\n     * inferred type of merged objects. Please\n     * upgrade if you are experiencing issues.\n     */\n    merge(merging) {\n        const merged = new ZodObject({\n            unknownKeys: merging._def.unknownKeys,\n            catchall: merging._def.catchall,\n            shape: () => ({\n                ...this._def.shape(),\n                ...merging._def.shape(),\n            }),\n            typeName: ZodFirstPartyTypeKind.ZodObject,\n        });\n        return merged;\n    }\n    // merge<\n    //   Incoming extends AnyZodObject,\n    //   Augmentation extends Incoming[\"shape\"],\n    //   NewOutput extends {\n    //     [k in keyof Augmentation | keyof Output]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_output\"]\n    //       : k extends keyof Output\n    //       ? Output[k]\n    //       : never;\n    //   },\n    //   NewInput extends {\n    //     [k in keyof Augmentation | keyof Input]: k extends keyof Augmentation\n    //       ? Augmentation[k][\"_input\"]\n    //       : k extends keyof Input\n    //       ? Input[k]\n    //       : never;\n    //   }\n    // >(\n    //   merging: Incoming\n    // ): ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"],\n    //   NewOutput,\n    //   NewInput\n    // > {\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    setKey(key, schema) {\n        return this.augment({ [key]: schema });\n    }\n    // merge<Incoming extends AnyZodObject>(\n    //   merging: Incoming\n    // ): //ZodObject<T & Incoming[\"_shape\"], UnknownKeys, Catchall> = (merging) => {\n    // ZodObject<\n    //   extendShape<T, ReturnType<Incoming[\"_def\"][\"shape\"]>>,\n    //   Incoming[\"_def\"][\"unknownKeys\"],\n    //   Incoming[\"_def\"][\"catchall\"]\n    // > {\n    //   // const mergedShape = objectUtil.mergeShapes(\n    //   //   this._def.shape(),\n    //   //   merging._def.shape()\n    //   // );\n    //   const merged: any = new ZodObject({\n    //     unknownKeys: merging._def.unknownKeys,\n    //     catchall: merging._def.catchall,\n    //     shape: () =>\n    //       objectUtil.mergeShapes(this._def.shape(), merging._def.shape()),\n    //     typeName: ZodFirstPartyTypeKind.ZodObject,\n    //   }) as any;\n    //   return merged;\n    // }\n    catchall(index) {\n        return new ZodObject({\n            ...this._def,\n            catchall: index,\n        });\n    }\n    pick(mask) {\n        const shape = {};\n        util.objectKeys(mask).forEach((key) => {\n            if (mask[key] && this.shape[key]) {\n                shape[key] = this.shape[key];\n            }\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    omit(mask) {\n        const shape = {};\n        util.objectKeys(this.shape).forEach((key) => {\n            if (!mask[key]) {\n                shape[key] = this.shape[key];\n            }\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => shape,\n        });\n    }\n    /**\n     * @deprecated\n     */\n    deepPartial() {\n        return deepPartialify(this);\n    }\n    partial(mask) {\n        const newShape = {};\n        util.objectKeys(this.shape).forEach((key) => {\n            const fieldSchema = this.shape[key];\n            if (mask && !mask[key]) {\n                newShape[key] = fieldSchema;\n            }\n            else {\n                newShape[key] = fieldSchema.optional();\n            }\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    required(mask) {\n        const newShape = {};\n        util.objectKeys(this.shape).forEach((key) => {\n            if (mask && !mask[key]) {\n                newShape[key] = this.shape[key];\n            }\n            else {\n                const fieldSchema = this.shape[key];\n                let newField = fieldSchema;\n                while (newField instanceof ZodOptional) {\n                    newField = newField._def.innerType;\n                }\n                newShape[key] = newField;\n            }\n        });\n        return new ZodObject({\n            ...this._def,\n            shape: () => newShape,\n        });\n    }\n    keyof() {\n        return createZodEnum(util.objectKeys(this.shape));\n    }\n}\nZodObject.create = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.strictCreate = (shape, params) => {\n    return new ZodObject({\n        shape: () => shape,\n        unknownKeys: \"strict\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nZodObject.lazycreate = (shape, params) => {\n    return new ZodObject({\n        shape,\n        unknownKeys: \"strip\",\n        catchall: ZodNever.create(),\n        typeName: ZodFirstPartyTypeKind.ZodObject,\n        ...processCreateParams(params),\n    });\n};\nclass ZodUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const options = this._def.options;\n        function handleResults(results) {\n            // return first issue-free validation if it exists\n            for (const result of results) {\n                if (result.result.status === \"valid\") {\n                    return result.result;\n                }\n            }\n            for (const result of results) {\n                if (result.result.status === \"dirty\") {\n                    // add issues from dirty option\n                    ctx.common.issues.push(...result.ctx.common.issues);\n                    return result.result;\n                }\n            }\n            // return invalid\n            const unionErrors = results.map((result) => new ZodError(result.ctx.common.issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return Promise.all(options.map(async (option) => {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                return {\n                    result: await option._parseAsync({\n                        data: ctx.data,\n                        path: ctx.path,\n                        parent: childCtx,\n                    }),\n                    ctx: childCtx,\n                };\n            })).then(handleResults);\n        }\n        else {\n            let dirty = undefined;\n            const issues = [];\n            for (const option of options) {\n                const childCtx = {\n                    ...ctx,\n                    common: {\n                        ...ctx.common,\n                        issues: [],\n                    },\n                    parent: null,\n                };\n                const result = option._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: childCtx,\n                });\n                if (result.status === \"valid\") {\n                    return result;\n                }\n                else if (result.status === \"dirty\" && !dirty) {\n                    dirty = { result, ctx: childCtx };\n                }\n                if (childCtx.common.issues.length) {\n                    issues.push(childCtx.common.issues);\n                }\n            }\n            if (dirty) {\n                ctx.common.issues.push(...dirty.ctx.common.issues);\n                return dirty.result;\n            }\n            const unionErrors = issues.map((issues) => new ZodError(issues));\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union,\n                unionErrors,\n            });\n            return INVALID;\n        }\n    }\n    get options() {\n        return this._def.options;\n    }\n}\nZodUnion.create = (types, params) => {\n    return new ZodUnion({\n        options: types,\n        typeName: ZodFirstPartyTypeKind.ZodUnion,\n        ...processCreateParams(params),\n    });\n};\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\n//////////                                 //////////\n//////////      ZodDiscriminatedUnion      //////////\n//////////                                 //////////\n/////////////////////////////////////////////////////\n/////////////////////////////////////////////////////\nconst getDiscriminator = (type) => {\n    if (type instanceof ZodLazy) {\n        return getDiscriminator(type.schema);\n    }\n    else if (type instanceof ZodEffects) {\n        return getDiscriminator(type.innerType());\n    }\n    else if (type instanceof ZodLiteral) {\n        return [type.value];\n    }\n    else if (type instanceof ZodEnum) {\n        return type.options;\n    }\n    else if (type instanceof ZodNativeEnum) {\n        // eslint-disable-next-line ban/ban\n        return Object.keys(type.enum);\n    }\n    else if (type instanceof ZodDefault) {\n        return getDiscriminator(type._def.innerType);\n    }\n    else if (type instanceof ZodUndefined) {\n        return [undefined];\n    }\n    else if (type instanceof ZodNull) {\n        return [null];\n    }\n    else {\n        return null;\n    }\n};\nclass ZodDiscriminatedUnion extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const discriminator = this.discriminator;\n        const discriminatorValue = ctx.data[discriminator];\n        const option = this.optionsMap.get(discriminatorValue);\n        if (!option) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_union_discriminator,\n                options: Array.from(this.optionsMap.keys()),\n                path: [discriminator],\n            });\n            return INVALID;\n        }\n        if (ctx.common.async) {\n            return option._parseAsync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n        else {\n            return option._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n        }\n    }\n    get discriminator() {\n        return this._def.discriminator;\n    }\n    get options() {\n        return this._def.options;\n    }\n    get optionsMap() {\n        return this._def.optionsMap;\n    }\n    /**\n     * The constructor of the discriminated union schema. Its behaviour is very similar to that of the normal z.union() constructor.\n     * However, it only allows a union of objects, all of which need to share a discriminator property. This property must\n     * have a different value for each object in the union.\n     * @param discriminator the name of the discriminator property\n     * @param types an array of object schemas\n     * @param params\n     */\n    static create(discriminator, options, params) {\n        // Get all the valid discriminator values\n        const optionsMap = new Map();\n        // try {\n        for (const type of options) {\n            const discriminatorValues = getDiscriminator(type.shape[discriminator]);\n            if (!discriminatorValues) {\n                throw new Error(`A discriminator value for key \\`${discriminator}\\` could not be extracted from all schema options`);\n            }\n            for (const value of discriminatorValues) {\n                if (optionsMap.has(value)) {\n                    throw new Error(`Discriminator property ${String(discriminator)} has duplicate value ${String(value)}`);\n                }\n                optionsMap.set(value, type);\n            }\n        }\n        return new ZodDiscriminatedUnion({\n            typeName: ZodFirstPartyTypeKind.ZodDiscriminatedUnion,\n            discriminator,\n            options,\n            optionsMap,\n            ...processCreateParams(params),\n        });\n    }\n}\nfunction mergeValues(a, b) {\n    const aType = getParsedType(a);\n    const bType = getParsedType(b);\n    if (a === b) {\n        return { valid: true, data: a };\n    }\n    else if (aType === ZodParsedType.object && bType === ZodParsedType.object) {\n        const bKeys = util.objectKeys(b);\n        const sharedKeys = util\n            .objectKeys(a)\n            .filter((key) => bKeys.indexOf(key) !== -1);\n        const newObj = { ...a, ...b };\n        for (const key of sharedKeys) {\n            const sharedValue = mergeValues(a[key], b[key]);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newObj[key] = sharedValue.data;\n        }\n        return { valid: true, data: newObj };\n    }\n    else if (aType === ZodParsedType.array && bType === ZodParsedType.array) {\n        if (a.length !== b.length) {\n            return { valid: false };\n        }\n        const newArray = [];\n        for (let index = 0; index < a.length; index++) {\n            const itemA = a[index];\n            const itemB = b[index];\n            const sharedValue = mergeValues(itemA, itemB);\n            if (!sharedValue.valid) {\n                return { valid: false };\n            }\n            newArray.push(sharedValue.data);\n        }\n        return { valid: true, data: newArray };\n    }\n    else if (aType === ZodParsedType.date &&\n        bType === ZodParsedType.date &&\n        +a === +b) {\n        return { valid: true, data: a };\n    }\n    else {\n        return { valid: false };\n    }\n}\nclass ZodIntersection extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const handleParsed = (parsedLeft, parsedRight) => {\n            if (isAborted(parsedLeft) || isAborted(parsedRight)) {\n                return INVALID;\n            }\n            const merged = mergeValues(parsedLeft.value, parsedRight.value);\n            if (!merged.valid) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.invalid_intersection_types,\n                });\n                return INVALID;\n            }\n            if (isDirty(parsedLeft) || isDirty(parsedRight)) {\n                status.dirty();\n            }\n            return { status: status.value, value: merged.data };\n        };\n        if (ctx.common.async) {\n            return Promise.all([\n                this._def.left._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n                this._def.right._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                }),\n            ]).then(([left, right]) => handleParsed(left, right));\n        }\n        else {\n            return handleParsed(this._def.left._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }), this._def.right._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            }));\n        }\n    }\n}\nZodIntersection.create = (left, right, params) => {\n    return new ZodIntersection({\n        left: left,\n        right: right,\n        typeName: ZodFirstPartyTypeKind.ZodIntersection,\n        ...processCreateParams(params),\n    });\n};\nclass ZodTuple extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.array) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.array,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        if (ctx.data.length < this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_small,\n                minimum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            return INVALID;\n        }\n        const rest = this._def.rest;\n        if (!rest && ctx.data.length > this._def.items.length) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.too_big,\n                maximum: this._def.items.length,\n                inclusive: true,\n                exact: false,\n                type: \"array\",\n            });\n            status.dirty();\n        }\n        const items = [...ctx.data]\n            .map((item, itemIndex) => {\n            const schema = this._def.items[itemIndex] || this._def.rest;\n            if (!schema)\n                return null;\n            return schema._parse(new ParseInputLazyPath(ctx, item, ctx.path, itemIndex));\n        })\n            .filter((x) => !!x); // filter nulls\n        if (ctx.common.async) {\n            return Promise.all(items).then((results) => {\n                return ParseStatus.mergeArray(status, results);\n            });\n        }\n        else {\n            return ParseStatus.mergeArray(status, items);\n        }\n    }\n    get items() {\n        return this._def.items;\n    }\n    rest(rest) {\n        return new ZodTuple({\n            ...this._def,\n            rest,\n        });\n    }\n}\nZodTuple.create = (schemas, params) => {\n    if (!Array.isArray(schemas)) {\n        throw new Error(\"You must pass an array of schemas to z.tuple([ ... ])\");\n    }\n    return new ZodTuple({\n        items: schemas,\n        typeName: ZodFirstPartyTypeKind.ZodTuple,\n        rest: null,\n        ...processCreateParams(params),\n    });\n};\nclass ZodRecord extends ZodType {\n    get keySchema() {\n        return this._def.keyType;\n    }\n    get valueSchema() {\n        return this._def.valueType;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.object) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.object,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const pairs = [];\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        for (const key in ctx.data) {\n            pairs.push({\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, key)),\n                value: valueType._parse(new ParseInputLazyPath(ctx, ctx.data[key], ctx.path, key)),\n            });\n        }\n        if (ctx.common.async) {\n            return ParseStatus.mergeObjectAsync(status, pairs);\n        }\n        else {\n            return ParseStatus.mergeObjectSync(status, pairs);\n        }\n    }\n    get element() {\n        return this._def.valueType;\n    }\n    static create(first, second, third) {\n        if (second instanceof ZodType) {\n            return new ZodRecord({\n                keyType: first,\n                valueType: second,\n                typeName: ZodFirstPartyTypeKind.ZodRecord,\n                ...processCreateParams(third),\n            });\n        }\n        return new ZodRecord({\n            keyType: ZodString.create(),\n            valueType: first,\n            typeName: ZodFirstPartyTypeKind.ZodRecord,\n            ...processCreateParams(second),\n        });\n    }\n}\nclass ZodMap extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.map) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.map,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const keyType = this._def.keyType;\n        const valueType = this._def.valueType;\n        const pairs = [...ctx.data.entries()].map(([key, value], index) => {\n            return {\n                key: keyType._parse(new ParseInputLazyPath(ctx, key, ctx.path, [index, \"key\"])),\n                value: valueType._parse(new ParseInputLazyPath(ctx, value, ctx.path, [index, \"value\"])),\n            };\n        });\n        if (ctx.common.async) {\n            const finalMap = new Map();\n            return Promise.resolve().then(async () => {\n                for (const pair of pairs) {\n                    const key = await pair.key;\n                    const value = await pair.value;\n                    if (key.status === \"aborted\" || value.status === \"aborted\") {\n                        return INVALID;\n                    }\n                    if (key.status === \"dirty\" || value.status === \"dirty\") {\n                        status.dirty();\n                    }\n                    finalMap.set(key.value, value.value);\n                }\n                return { status: status.value, value: finalMap };\n            });\n        }\n        else {\n            const finalMap = new Map();\n            for (const pair of pairs) {\n                const key = pair.key;\n                const value = pair.value;\n                if (key.status === \"aborted\" || value.status === \"aborted\") {\n                    return INVALID;\n                }\n                if (key.status === \"dirty\" || value.status === \"dirty\") {\n                    status.dirty();\n                }\n                finalMap.set(key.value, value.value);\n            }\n            return { status: status.value, value: finalMap };\n        }\n    }\n}\nZodMap.create = (keyType, valueType, params) => {\n    return new ZodMap({\n        valueType,\n        keyType,\n        typeName: ZodFirstPartyTypeKind.ZodMap,\n        ...processCreateParams(params),\n    });\n};\nclass ZodSet extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.set) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.set,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const def = this._def;\n        if (def.minSize !== null) {\n            if (ctx.data.size < def.minSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_small,\n                    minimum: def.minSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.minSize.message,\n                });\n                status.dirty();\n            }\n        }\n        if (def.maxSize !== null) {\n            if (ctx.data.size > def.maxSize.value) {\n                addIssueToContext(ctx, {\n                    code: ZodIssueCode.too_big,\n                    maximum: def.maxSize.value,\n                    type: \"set\",\n                    inclusive: true,\n                    exact: false,\n                    message: def.maxSize.message,\n                });\n                status.dirty();\n            }\n        }\n        const valueType = this._def.valueType;\n        function finalizeSet(elements) {\n            const parsedSet = new Set();\n            for (const element of elements) {\n                if (element.status === \"aborted\")\n                    return INVALID;\n                if (element.status === \"dirty\")\n                    status.dirty();\n                parsedSet.add(element.value);\n            }\n            return { status: status.value, value: parsedSet };\n        }\n        const elements = [...ctx.data.values()].map((item, i) => valueType._parse(new ParseInputLazyPath(ctx, item, ctx.path, i)));\n        if (ctx.common.async) {\n            return Promise.all(elements).then((elements) => finalizeSet(elements));\n        }\n        else {\n            return finalizeSet(elements);\n        }\n    }\n    min(minSize, message) {\n        return new ZodSet({\n            ...this._def,\n            minSize: { value: minSize, message: errorUtil.toString(message) },\n        });\n    }\n    max(maxSize, message) {\n        return new ZodSet({\n            ...this._def,\n            maxSize: { value: maxSize, message: errorUtil.toString(message) },\n        });\n    }\n    size(size, message) {\n        return this.min(size, message).max(size, message);\n    }\n    nonempty(message) {\n        return this.min(1, message);\n    }\n}\nZodSet.create = (valueType, params) => {\n    return new ZodSet({\n        valueType,\n        minSize: null,\n        maxSize: null,\n        typeName: ZodFirstPartyTypeKind.ZodSet,\n        ...processCreateParams(params),\n    });\n};\nclass ZodFunction extends ZodType {\n    constructor() {\n        super(...arguments);\n        this.validate = this.implement;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.function) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.function,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        function makeArgsIssue(args, error) {\n            return makeIssue({\n                data: args,\n                path: ctx.path,\n                errorMaps: [\n                    ctx.common.contextualErrorMap,\n                    ctx.schemaErrorMap,\n                    getErrorMap(),\n                    errorMap,\n                ].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_arguments,\n                    argumentsError: error,\n                },\n            });\n        }\n        function makeReturnsIssue(returns, error) {\n            return makeIssue({\n                data: returns,\n                path: ctx.path,\n                errorMaps: [\n                    ctx.common.contextualErrorMap,\n                    ctx.schemaErrorMap,\n                    getErrorMap(),\n                    errorMap,\n                ].filter((x) => !!x),\n                issueData: {\n                    code: ZodIssueCode.invalid_return_type,\n                    returnTypeError: error,\n                },\n            });\n        }\n        const params = { errorMap: ctx.common.contextualErrorMap };\n        const fn = ctx.data;\n        if (this._def.returns instanceof ZodPromise) {\n            return OK(async (...args) => {\n                const error = new ZodError([]);\n                const parsedArgs = await this._def.args\n                    .parseAsync(args, params)\n                    .catch((e) => {\n                    error.addIssue(makeArgsIssue(args, e));\n                    throw error;\n                });\n                const result = await fn(...parsedArgs);\n                const parsedReturns = await this._def.returns._def.type\n                    .parseAsync(result, params)\n                    .catch((e) => {\n                    error.addIssue(makeReturnsIssue(result, e));\n                    throw error;\n                });\n                return parsedReturns;\n            });\n        }\n        else {\n            return OK((...args) => {\n                const parsedArgs = this._def.args.safeParse(args, params);\n                if (!parsedArgs.success) {\n                    throw new ZodError([makeArgsIssue(args, parsedArgs.error)]);\n                }\n                const result = fn(...parsedArgs.data);\n                const parsedReturns = this._def.returns.safeParse(result, params);\n                if (!parsedReturns.success) {\n                    throw new ZodError([makeReturnsIssue(result, parsedReturns.error)]);\n                }\n                return parsedReturns.data;\n            });\n        }\n    }\n    parameters() {\n        return this._def.args;\n    }\n    returnType() {\n        return this._def.returns;\n    }\n    args(...items) {\n        return new ZodFunction({\n            ...this._def,\n            args: ZodTuple.create(items).rest(ZodUnknown.create()),\n        });\n    }\n    returns(returnType) {\n        return new ZodFunction({\n            ...this._def,\n            returns: returnType,\n        });\n    }\n    implement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    strictImplement(func) {\n        const validatedFunc = this.parse(func);\n        return validatedFunc;\n    }\n    static create(args, returns, params) {\n        return new ZodFunction({\n            args: (args\n                ? args\n                : ZodTuple.create([]).rest(ZodUnknown.create())),\n            returns: returns || ZodUnknown.create(),\n            typeName: ZodFirstPartyTypeKind.ZodFunction,\n            ...processCreateParams(params),\n        });\n    }\n}\nclass ZodLazy extends ZodType {\n    get schema() {\n        return this._def.getter();\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const lazySchema = this._def.getter();\n        return lazySchema._parse({ data: ctx.data, path: ctx.path, parent: ctx });\n    }\n}\nZodLazy.create = (getter, params) => {\n    return new ZodLazy({\n        getter: getter,\n        typeName: ZodFirstPartyTypeKind.ZodLazy,\n        ...processCreateParams(params),\n    });\n};\nclass ZodLiteral extends ZodType {\n    _parse(input) {\n        if (input.data !== this._def.value) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_literal,\n                expected: this._def.value,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n    get value() {\n        return this._def.value;\n    }\n}\nZodLiteral.create = (value, params) => {\n    return new ZodLiteral({\n        value: value,\n        typeName: ZodFirstPartyTypeKind.ZodLiteral,\n        ...processCreateParams(params),\n    });\n};\nfunction createZodEnum(values, params) {\n    return new ZodEnum({\n        values: values,\n        typeName: ZodFirstPartyTypeKind.ZodEnum,\n        ...processCreateParams(params),\n    });\n}\nclass ZodEnum extends ZodType {\n    _parse(input) {\n        if (typeof input.data !== \"string\") {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (this._def.values.indexOf(input.data) === -1) {\n            const ctx = this._getOrReturnCtx(input);\n            const expectedValues = this._def.values;\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get options() {\n        return this._def.values;\n    }\n    get enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Values() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    get Enum() {\n        const enumValues = {};\n        for (const val of this._def.values) {\n            enumValues[val] = val;\n        }\n        return enumValues;\n    }\n    extract(values) {\n        return ZodEnum.create(values);\n    }\n    exclude(values) {\n        return ZodEnum.create(this.options.filter((opt) => !values.includes(opt)));\n    }\n}\nZodEnum.create = createZodEnum;\nclass ZodNativeEnum extends ZodType {\n    _parse(input) {\n        const nativeEnumValues = util.getValidEnumValues(this._def.values);\n        const ctx = this._getOrReturnCtx(input);\n        if (ctx.parsedType !== ZodParsedType.string &&\n            ctx.parsedType !== ZodParsedType.number) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                expected: util.joinValues(expectedValues),\n                received: ctx.parsedType,\n                code: ZodIssueCode.invalid_type,\n            });\n            return INVALID;\n        }\n        if (nativeEnumValues.indexOf(input.data) === -1) {\n            const expectedValues = util.objectValues(nativeEnumValues);\n            addIssueToContext(ctx, {\n                received: ctx.data,\n                code: ZodIssueCode.invalid_enum_value,\n                options: expectedValues,\n            });\n            return INVALID;\n        }\n        return OK(input.data);\n    }\n    get enum() {\n        return this._def.values;\n    }\n}\nZodNativeEnum.create = (values, params) => {\n    return new ZodNativeEnum({\n        values: values,\n        typeName: ZodFirstPartyTypeKind.ZodNativeEnum,\n        ...processCreateParams(params),\n    });\n};\nclass ZodPromise extends ZodType {\n    unwrap() {\n        return this._def.type;\n    }\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        if (ctx.parsedType !== ZodParsedType.promise &&\n            ctx.common.async === false) {\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.promise,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        const promisified = ctx.parsedType === ZodParsedType.promise\n            ? ctx.data\n            : Promise.resolve(ctx.data);\n        return OK(promisified.then((data) => {\n            return this._def.type.parseAsync(data, {\n                path: ctx.path,\n                errorMap: ctx.common.contextualErrorMap,\n            });\n        }));\n    }\n}\nZodPromise.create = (schema, params) => {\n    return new ZodPromise({\n        type: schema,\n        typeName: ZodFirstPartyTypeKind.ZodPromise,\n        ...processCreateParams(params),\n    });\n};\nclass ZodEffects extends ZodType {\n    innerType() {\n        return this._def.schema;\n    }\n    sourceType() {\n        return this._def.schema._def.typeName === ZodFirstPartyTypeKind.ZodEffects\n            ? this._def.schema.sourceType()\n            : this._def.schema;\n    }\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        const effect = this._def.effect || null;\n        if (effect.type === \"preprocess\") {\n            const processed = effect.transform(ctx.data);\n            if (ctx.common.async) {\n                return Promise.resolve(processed).then((processed) => {\n                    return this._def.schema._parseAsync({\n                        data: processed,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                });\n            }\n            else {\n                return this._def.schema._parseSync({\n                    data: processed,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n            }\n        }\n        const checkCtx = {\n            addIssue: (arg) => {\n                addIssueToContext(ctx, arg);\n                if (arg.fatal) {\n                    status.abort();\n                }\n                else {\n                    status.dirty();\n                }\n            },\n            get path() {\n                return ctx.path;\n            },\n        };\n        checkCtx.addIssue = checkCtx.addIssue.bind(checkCtx);\n        if (effect.type === \"refinement\") {\n            const executeRefinement = (acc\n            // effect: RefinementEffect<any>\n            ) => {\n                const result = effect.refinement(acc, checkCtx);\n                if (ctx.common.async) {\n                    return Promise.resolve(result);\n                }\n                if (result instanceof Promise) {\n                    throw new Error(\"Async refinement encountered during synchronous parse operation. Use .parseAsync instead.\");\n                }\n                return acc;\n            };\n            if (ctx.common.async === false) {\n                const inner = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inner.status === \"aborted\")\n                    return INVALID;\n                if (inner.status === \"dirty\")\n                    status.dirty();\n                // return value is ignored\n                executeRefinement(inner.value);\n                return { status: status.value, value: inner.value };\n            }\n            else {\n                return this._def.schema\n                    ._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx })\n                    .then((inner) => {\n                    if (inner.status === \"aborted\")\n                        return INVALID;\n                    if (inner.status === \"dirty\")\n                        status.dirty();\n                    return executeRefinement(inner.value).then(() => {\n                        return { status: status.value, value: inner.value };\n                    });\n                });\n            }\n        }\n        if (effect.type === \"transform\") {\n            if (ctx.common.async === false) {\n                const base = this._def.schema._parseSync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (!isValid(base))\n                    return base;\n                const result = effect.transform(base.value, checkCtx);\n                if (result instanceof Promise) {\n                    throw new Error(`Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.`);\n                }\n                return { status: status.value, value: result };\n            }\n            else {\n                return this._def.schema\n                    ._parseAsync({ data: ctx.data, path: ctx.path, parent: ctx })\n                    .then((base) => {\n                    if (!isValid(base))\n                        return base;\n                    return Promise.resolve(effect.transform(base.value, checkCtx)).then((result) => ({ status: status.value, value: result }));\n                });\n            }\n        }\n        util.assertNever(effect);\n    }\n}\nZodEffects.create = (schema, effect, params) => {\n    return new ZodEffects({\n        schema,\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        effect,\n        ...processCreateParams(params),\n    });\n};\nZodEffects.createWithPreprocess = (preprocess, schema, params) => {\n    return new ZodEffects({\n        schema,\n        effect: { type: \"preprocess\", transform: preprocess },\n        typeName: ZodFirstPartyTypeKind.ZodEffects,\n        ...processCreateParams(params),\n    });\n};\nclass ZodOptional extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.undefined) {\n            return OK(undefined);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodOptional.create = (type, params) => {\n    return new ZodOptional({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodOptional,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNullable extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType === ZodParsedType.null) {\n            return OK(null);\n        }\n        return this._def.innerType._parse(input);\n    }\n    unwrap() {\n        return this._def.innerType;\n    }\n}\nZodNullable.create = (type, params) => {\n    return new ZodNullable({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodNullable,\n        ...processCreateParams(params),\n    });\n};\nclass ZodDefault extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        let data = ctx.data;\n        if (ctx.parsedType === ZodParsedType.undefined) {\n            data = this._def.defaultValue();\n        }\n        return this._def.innerType._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    removeDefault() {\n        return this._def.innerType;\n    }\n}\nZodDefault.create = (type, params) => {\n    return new ZodDefault({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodDefault,\n        defaultValue: typeof params.default === \"function\"\n            ? params.default\n            : () => params.default,\n        ...processCreateParams(params),\n    });\n};\nclass ZodCatch extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        // newCtx is used to not collect issues from inner types in ctx\n        const newCtx = {\n            ...ctx,\n            common: {\n                ...ctx.common,\n                issues: [],\n            },\n        };\n        const result = this._def.innerType._parse({\n            data: newCtx.data,\n            path: newCtx.path,\n            parent: {\n                ...newCtx,\n            },\n        });\n        if (isAsync(result)) {\n            return result.then((result) => {\n                return {\n                    status: \"valid\",\n                    value: result.status === \"valid\"\n                        ? result.value\n                        : this._def.catchValue({\n                            get error() {\n                                return new ZodError(newCtx.common.issues);\n                            },\n                            input: newCtx.data,\n                        }),\n                };\n            });\n        }\n        else {\n            return {\n                status: \"valid\",\n                value: result.status === \"valid\"\n                    ? result.value\n                    : this._def.catchValue({\n                        get error() {\n                            return new ZodError(newCtx.common.issues);\n                        },\n                        input: newCtx.data,\n                    }),\n            };\n        }\n    }\n    removeCatch() {\n        return this._def.innerType;\n    }\n}\nZodCatch.create = (type, params) => {\n    return new ZodCatch({\n        innerType: type,\n        typeName: ZodFirstPartyTypeKind.ZodCatch,\n        catchValue: typeof params.catch === \"function\" ? params.catch : () => params.catch,\n        ...processCreateParams(params),\n    });\n};\nclass ZodNaN extends ZodType {\n    _parse(input) {\n        const parsedType = this._getType(input);\n        if (parsedType !== ZodParsedType.nan) {\n            const ctx = this._getOrReturnCtx(input);\n            addIssueToContext(ctx, {\n                code: ZodIssueCode.invalid_type,\n                expected: ZodParsedType.nan,\n                received: ctx.parsedType,\n            });\n            return INVALID;\n        }\n        return { status: \"valid\", value: input.data };\n    }\n}\nZodNaN.create = (params) => {\n    return new ZodNaN({\n        typeName: ZodFirstPartyTypeKind.ZodNaN,\n        ...processCreateParams(params),\n    });\n};\nconst BRAND = Symbol(\"zod_brand\");\nclass ZodBranded extends ZodType {\n    _parse(input) {\n        const { ctx } = this._processInputParams(input);\n        const data = ctx.data;\n        return this._def.type._parse({\n            data,\n            path: ctx.path,\n            parent: ctx,\n        });\n    }\n    unwrap() {\n        return this._def.type;\n    }\n}\nclass ZodPipeline extends ZodType {\n    _parse(input) {\n        const { status, ctx } = this._processInputParams(input);\n        if (ctx.common.async) {\n            const handleAsync = async () => {\n                const inResult = await this._def.in._parseAsync({\n                    data: ctx.data,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n                if (inResult.status === \"aborted\")\n                    return INVALID;\n                if (inResult.status === \"dirty\") {\n                    status.dirty();\n                    return DIRTY(inResult.value);\n                }\n                else {\n                    return this._def.out._parseAsync({\n                        data: inResult.value,\n                        path: ctx.path,\n                        parent: ctx,\n                    });\n                }\n            };\n            return handleAsync();\n        }\n        else {\n            const inResult = this._def.in._parseSync({\n                data: ctx.data,\n                path: ctx.path,\n                parent: ctx,\n            });\n            if (inResult.status === \"aborted\")\n                return INVALID;\n            if (inResult.status === \"dirty\") {\n                status.dirty();\n                return {\n                    status: \"dirty\",\n                    value: inResult.value,\n                };\n            }\n            else {\n                return this._def.out._parseSync({\n                    data: inResult.value,\n                    path: ctx.path,\n                    parent: ctx,\n                });\n            }\n        }\n    }\n    static create(a, b) {\n        return new ZodPipeline({\n            in: a,\n            out: b,\n            typeName: ZodFirstPartyTypeKind.ZodPipeline,\n        });\n    }\n}\nconst custom = (check, params = {}, \n/*\n * @deprecated\n *\n * Pass `fatal` into the params object instead:\n *\n * ```ts\n * z.string().custom((val) => val.length > 5, { fatal: false })\n * ```\n *\n */\nfatal) => {\n    if (check)\n        return ZodAny.create().superRefine((data, ctx) => {\n            var _a, _b;\n            if (!check(data)) {\n                const p = typeof params === \"function\"\n                    ? params(data)\n                    : typeof params === \"string\"\n                        ? { message: params }\n                        : params;\n                const _fatal = (_b = (_a = p.fatal) !== null && _a !== void 0 ? _a : fatal) !== null && _b !== void 0 ? _b : true;\n                const p2 = typeof p === \"string\" ? { message: p } : p;\n                ctx.addIssue({ code: \"custom\", ...p2, fatal: _fatal });\n            }\n        });\n    return ZodAny.create();\n};\nconst late = {\n    object: ZodObject.lazycreate,\n};\nvar ZodFirstPartyTypeKind;\n(function (ZodFirstPartyTypeKind) {\n    ZodFirstPartyTypeKind[\"ZodString\"] = \"ZodString\";\n    ZodFirstPartyTypeKind[\"ZodNumber\"] = \"ZodNumber\";\n    ZodFirstPartyTypeKind[\"ZodNaN\"] = \"ZodNaN\";\n    ZodFirstPartyTypeKind[\"ZodBigInt\"] = \"ZodBigInt\";\n    ZodFirstPartyTypeKind[\"ZodBoolean\"] = \"ZodBoolean\";\n    ZodFirstPartyTypeKind[\"ZodDate\"] = \"ZodDate\";\n    ZodFirstPartyTypeKind[\"ZodSymbol\"] = \"ZodSymbol\";\n    ZodFirstPartyTypeKind[\"ZodUndefined\"] = \"ZodUndefined\";\n    ZodFirstPartyTypeKind[\"ZodNull\"] = \"ZodNull\";\n    ZodFirstPartyTypeKind[\"ZodAny\"] = \"ZodAny\";\n    ZodFirstPartyTypeKind[\"ZodUnknown\"] = \"ZodUnknown\";\n    ZodFirstPartyTypeKind[\"ZodNever\"] = \"ZodNever\";\n    ZodFirstPartyTypeKind[\"ZodVoid\"] = \"ZodVoid\";\n    ZodFirstPartyTypeKind[\"ZodArray\"] = \"ZodArray\";\n    ZodFirstPartyTypeKind[\"ZodObject\"] = \"ZodObject\";\n    ZodFirstPartyTypeKind[\"ZodUnion\"] = \"ZodUnion\";\n    ZodFirstPartyTypeKind[\"ZodDiscriminatedUnion\"] = \"ZodDiscriminatedUnion\";\n    ZodFirstPartyTypeKind[\"ZodIntersection\"] = \"ZodIntersection\";\n    ZodFirstPartyTypeKind[\"ZodTuple\"] = \"ZodTuple\";\n    ZodFirstPartyTypeKind[\"ZodRecord\"] = \"ZodRecord\";\n    ZodFirstPartyTypeKind[\"ZodMap\"] = \"ZodMap\";\n    ZodFirstPartyTypeKind[\"ZodSet\"] = \"ZodSet\";\n    ZodFirstPartyTypeKind[\"ZodFunction\"] = \"ZodFunction\";\n    ZodFirstPartyTypeKind[\"ZodLazy\"] = \"ZodLazy\";\n    ZodFirstPartyTypeKind[\"ZodLiteral\"] = \"ZodLiteral\";\n    ZodFirstPartyTypeKind[\"ZodEnum\"] = \"ZodEnum\";\n    ZodFirstPartyTypeKind[\"ZodEffects\"] = \"ZodEffects\";\n    ZodFirstPartyTypeKind[\"ZodNativeEnum\"] = \"ZodNativeEnum\";\n    ZodFirstPartyTypeKind[\"ZodOptional\"] = \"ZodOptional\";\n    ZodFirstPartyTypeKind[\"ZodNullable\"] = \"ZodNullable\";\n    ZodFirstPartyTypeKind[\"ZodDefault\"] = \"ZodDefault\";\n    ZodFirstPartyTypeKind[\"ZodCatch\"] = \"ZodCatch\";\n    ZodFirstPartyTypeKind[\"ZodPromise\"] = \"ZodPromise\";\n    ZodFirstPartyTypeKind[\"ZodBranded\"] = \"ZodBranded\";\n    ZodFirstPartyTypeKind[\"ZodPipeline\"] = \"ZodPipeline\";\n})(ZodFirstPartyTypeKind || (ZodFirstPartyTypeKind = {}));\nconst instanceOfType = (\n// const instanceOfType = <T extends new (...args: any[]) => any>(\ncls, params = {\n    message: `Input not instance of ${cls.name}`,\n}) => custom((data) => data instanceof cls, params);\nconst stringType = ZodString.create;\nconst numberType = ZodNumber.create;\nconst nanType = ZodNaN.create;\nconst bigIntType = ZodBigInt.create;\nconst booleanType = ZodBoolean.create;\nconst dateType = ZodDate.create;\nconst symbolType = ZodSymbol.create;\nconst undefinedType = ZodUndefined.create;\nconst nullType = ZodNull.create;\nconst anyType = ZodAny.create;\nconst unknownType = ZodUnknown.create;\nconst neverType = ZodNever.create;\nconst voidType = ZodVoid.create;\nconst arrayType = ZodArray.create;\nconst objectType = ZodObject.create;\nconst strictObjectType = ZodObject.strictCreate;\nconst unionType = ZodUnion.create;\nconst discriminatedUnionType = ZodDiscriminatedUnion.create;\nconst intersectionType = ZodIntersection.create;\nconst tupleType = ZodTuple.create;\nconst recordType = ZodRecord.create;\nconst mapType = ZodMap.create;\nconst setType = ZodSet.create;\nconst functionType = ZodFunction.create;\nconst lazyType = ZodLazy.create;\nconst literalType = ZodLiteral.create;\nconst enumType = ZodEnum.create;\nconst nativeEnumType = ZodNativeEnum.create;\nconst promiseType = ZodPromise.create;\nconst effectsType = ZodEffects.create;\nconst optionalType = ZodOptional.create;\nconst nullableType = ZodNullable.create;\nconst preprocessType = ZodEffects.createWithPreprocess;\nconst pipelineType = ZodPipeline.create;\nconst ostring = () => stringType().optional();\nconst onumber = () => numberType().optional();\nconst oboolean = () => booleanType().optional();\nconst coerce = {\n    string: ((arg) => ZodString.create({ ...arg, coerce: true })),\n    number: ((arg) => ZodNumber.create({ ...arg, coerce: true })),\n    boolean: ((arg) => ZodBoolean.create({\n        ...arg,\n        coerce: true,\n    })),\n    bigint: ((arg) => ZodBigInt.create({ ...arg, coerce: true })),\n    date: ((arg) => ZodDate.create({ ...arg, coerce: true })),\n};\nconst NEVER = INVALID;\n\nvar z = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    defaultErrorMap: errorMap,\n    setErrorMap: setErrorMap,\n    getErrorMap: getErrorMap,\n    makeIssue: makeIssue,\n    EMPTY_PATH: EMPTY_PATH,\n    addIssueToContext: addIssueToContext,\n    ParseStatus: ParseStatus,\n    INVALID: INVALID,\n    DIRTY: DIRTY,\n    OK: OK,\n    isAborted: isAborted,\n    isDirty: isDirty,\n    isValid: isValid,\n    isAsync: isAsync,\n    get util () { return util; },\n    get objectUtil () { return objectUtil; },\n    ZodParsedType: ZodParsedType,\n    getParsedType: getParsedType,\n    ZodType: ZodType,\n    ZodString: ZodString,\n    ZodNumber: ZodNumber,\n    ZodBigInt: ZodBigInt,\n    ZodBoolean: ZodBoolean,\n    ZodDate: ZodDate,\n    ZodSymbol: ZodSymbol,\n    ZodUndefined: ZodUndefined,\n    ZodNull: ZodNull,\n    ZodAny: ZodAny,\n    ZodUnknown: ZodUnknown,\n    ZodNever: ZodNever,\n    ZodVoid: ZodVoid,\n    ZodArray: ZodArray,\n    ZodObject: ZodObject,\n    ZodUnion: ZodUnion,\n    ZodDiscriminatedUnion: ZodDiscriminatedUnion,\n    ZodIntersection: ZodIntersection,\n    ZodTuple: ZodTuple,\n    ZodRecord: ZodRecord,\n    ZodMap: ZodMap,\n    ZodSet: ZodSet,\n    ZodFunction: ZodFunction,\n    ZodLazy: ZodLazy,\n    ZodLiteral: ZodLiteral,\n    ZodEnum: ZodEnum,\n    ZodNativeEnum: ZodNativeEnum,\n    ZodPromise: ZodPromise,\n    ZodEffects: ZodEffects,\n    ZodTransformer: ZodEffects,\n    ZodOptional: ZodOptional,\n    ZodNullable: ZodNullable,\n    ZodDefault: ZodDefault,\n    ZodCatch: ZodCatch,\n    ZodNaN: ZodNaN,\n    BRAND: BRAND,\n    ZodBranded: ZodBranded,\n    ZodPipeline: ZodPipeline,\n    custom: custom,\n    Schema: ZodType,\n    ZodSchema: ZodType,\n    late: late,\n    get ZodFirstPartyTypeKind () { return ZodFirstPartyTypeKind; },\n    coerce: coerce,\n    any: anyType,\n    array: arrayType,\n    bigint: bigIntType,\n    boolean: booleanType,\n    date: dateType,\n    discriminatedUnion: discriminatedUnionType,\n    effect: effectsType,\n    'enum': enumType,\n    'function': functionType,\n    'instanceof': instanceOfType,\n    intersection: intersectionType,\n    lazy: lazyType,\n    literal: literalType,\n    map: mapType,\n    nan: nanType,\n    nativeEnum: nativeEnumType,\n    never: neverType,\n    'null': nullType,\n    nullable: nullableType,\n    number: numberType,\n    object: objectType,\n    oboolean: oboolean,\n    onumber: onumber,\n    optional: optionalType,\n    ostring: ostring,\n    pipeline: pipelineType,\n    preprocess: preprocessType,\n    promise: promiseType,\n    record: recordType,\n    set: setType,\n    strictObject: strictObjectType,\n    string: stringType,\n    symbol: symbolType,\n    transformer: effectsType,\n    tuple: tupleType,\n    'undefined': undefinedType,\n    union: unionType,\n    unknown: unknownType,\n    'void': voidType,\n    NEVER: NEVER,\n    ZodIssueCode: ZodIssueCode,\n    quotelessJson: quotelessJson,\n    ZodError: ZodError\n});\n\nexport { BRAND, DIRTY, EMPTY_PATH, INVALID, NEVER, OK, ParseStatus, ZodType as Schema, ZodAny, ZodArray, ZodBigInt, ZodBoolean, ZodBranded, ZodCatch, ZodDate, ZodDefault, ZodDiscriminatedUnion, ZodEffects, ZodEnum, ZodError, ZodFirstPartyTypeKind, ZodFunction, ZodIntersection, ZodIssueCode, ZodLazy, ZodLiteral, ZodMap, ZodNaN, ZodNativeEnum, ZodNever, ZodNull, ZodNullable, ZodNumber, ZodObject, ZodOptional, ZodParsedType, ZodPipeline, ZodPromise, ZodRecord, ZodType as ZodSchema, ZodSet, ZodString, ZodSymbol, ZodEffects as ZodTransformer, ZodTuple, ZodType, ZodUndefined, ZodUnion, ZodUnknown, ZodVoid, addIssueToContext, anyType as any, arrayType as array, bigIntType as bigint, booleanType as boolean, coerce, custom, dateType as date, z as default, errorMap as defaultErrorMap, discriminatedUnionType as discriminatedUnion, effectsType as effect, enumType as enum, functionType as function, getErrorMap, getParsedType, instanceOfType as instanceof, intersectionType as intersection, isAborted, isAsync, isDirty, isValid, late, lazyType as lazy, literalType as literal, makeIssue, mapType as map, nanType as nan, nativeEnumType as nativeEnum, neverType as never, nullType as null, nullableType as nullable, numberType as number, objectType as object, objectUtil, oboolean, onumber, optionalType as optional, ostring, pipelineType as pipeline, preprocessType as preprocess, promiseType as promise, quotelessJson, recordType as record, setType as set, setErrorMap, strictObjectType as strictObject, stringType as string, symbolType as symbol, effectsType as transformer, tupleType as tuple, undefinedType as undefined, unionType as union, unknownType as unknown, util, voidType as void, z };\n","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _s, _e;\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","import {z} from \"zod\"\n\nexport const ParamUsageSpec = z.string().regex(/\\$.+/)\n\nexport type ParamUsageSpec = z.infer<typeof ParamUsageSpec>\n\n\n","import {z} from \"zod\"\nimport {ParamUsageSpec} from \"@/parser/json/animation/ParamUsageSpec\"\n\nconst FilterSpec = z.object({\n  filter: z.string()\n})\n\nconst FilterExprSpec = z.object({\n  filterExpr: z.string()\n})\n\nconst SelectSpec = z.object({\n  select: z.string()\n})\n\nconst SelectAllSpec = z.object({\n  selectAll: z.string()\n})\n\nconst SortSpec = z.object({\n  sortBy: z.string(),\n  order: z.union([\n    z.literal('asc'),\n    z.literal('desc'),\n    z.array(z.union([z.number(), z.string()]))\n  ]).default('asc')\n})\n\nconst GroupSpec = z.object({\n  groupBy: z.string()\n})\n\nconst SliceSpec = z.object({\n  slice: z.union([\n    z.array(z.union([z.number(), ParamUsageSpec]))\n        .min(1)\n        .max(3),\n    z.string(),\n  ])\n})\n\nconst AtSpec = z.object({\n  at: z.union([z.number(), ParamUsageSpec])\n})\n\nexport const TransformSpec = z.union([\n  FilterSpec,\n  FilterExprSpec,\n  SelectSpec,\n  SelectAllSpec,\n  SortSpec,\n  GroupSpec,\n  SliceSpec,\n  AtSpec,\n])\n\nexport const TargetSpec = z.union([\n  z.string(),\n  TransformSpec,\n  z.array(TransformSpec)\n])\n\nexport type TransformSpec = z.infer<typeof TransformSpec>\nexport type TargetSpec = z.infer<typeof TargetSpec>\n\n\n","import {z} from \"zod\"\n\nexport const YoyoSpec = z.object({\n  repeat: z.number().min(0).optional(),\n  delay: z.number().min(0).optional()\n})\n\nexport type YoyoSpec = z.infer<typeof YoyoSpec>\n\n\n","import {z} from \"zod\"\nimport {ParamUsageSpec} from \"@/parser/json/animation/ParamUsageSpec\"\nimport {TargetSpec} from \"@/parser/json/animation/TargetSpec\"\nimport {YoyoSpec} from \"@/parser/json/animation/YoyoSpec\"\n\nexport const AniUnitBaseSpec = z.object({\n  // misc\n  id: z.union([z.number(), z.string()]).optional(),\n  // target\n  target: z.union([TargetSpec, ParamUsageSpec]).optional(),\n  // timing\n  duration: z.union([z.number().min(0), ParamUsageSpec]).optional(),\n  offset: z.union([z.number(), ParamUsageSpec]).optional(),\n  stagger: z.union([z.number().min(0), ParamUsageSpec]).optional(),\n  reverse: z.boolean().optional(),\n  yoyo: z.union([z.literal(true), YoyoSpec, ParamUsageSpec]).optional(),\n})\n\n\nexport type SyncSpec = z.infer<typeof AniUnitBaseSpec> & {\n  // we need a ? here. but sync is not optional\n  sync?: AniUnitSpec[]\n}\nexport const SyncSpec: z.ZodType<SyncSpec> = AniUnitBaseSpec.extend({\n  sync: z.lazy(() => z.array(AniUnitSpec))\n})\n\nexport type SyncSpecWithParam = z.infer<typeof AniUnitBaseSpec> & {\n  // we need a ? here. but sync is not optional\n  sync?: (AniUnitSpecWithParam | ParamUsageSpec)[]\n}\nexport const SyncSpecWithParam: z.ZodType<SyncSpecWithParam> = AniUnitBaseSpec.extend({\n  sync: z.lazy(() => z.array(z.union([AniUnitSpecWithParam, ParamUsageSpec])))\n})\n\n\nexport type ConcatSpec = z.infer<typeof AniUnitBaseSpec> & {\n  // we need a ? here. but concat is not optional\n  concat?: AniUnitSpec[]\n}\nexport const ConcatSpec: z.ZodType<ConcatSpec> = AniUnitBaseSpec.extend({\n  concat: z.lazy(() => AniUnitSpec.array())\n})\nexport type ConcatSpecWithParam = z.infer<typeof AniUnitBaseSpec> & {\n  // we need a ? here. but concat is not optional\n  concat?: (AniUnitSpecWithParam | ParamUsageSpec)[]\n}\nexport const ConcatSpecWithParam: z.ZodType<ConcatSpecWithParam> = AniUnitBaseSpec.extend({\n  concat: z.lazy(() => z.array(z.union([AniUnitSpecWithParam, ParamUsageSpec])))\n})\n\n\nexport const RefSpec = z.intersection(\n    z.object({\n      ref: z.union([z.string(), ParamUsageSpec]),\n    }),\n    z.record(z.string(), z.any()),\n    AniUnitBaseSpec,\n)\nexport type RefSpec = z.infer<typeof RefSpec>\n\n\nexport type ChildSpec = z.infer<typeof AniUnitBaseSpec> & {\n  child?: AniUnitSpec\n}\nexport const ChildSpec: z.ZodType<ChildSpec> = AniUnitBaseSpec.extend({\n  child: z.lazy(() => AniUnitSpec)\n})\nexport type ChildSpecWithParam = z.infer<typeof AniUnitBaseSpec> & {\n  child?: AniUnitSpecWithParam | ParamUsageSpec\n}\nexport const ChildSpecWithParam: z.ZodType<ChildSpecWithParam> = AniUnitBaseSpec.extend({\n  child: z.lazy(() => z.union([AniUnitSpecWithParam, ParamUsageSpec]))\n})\n\nexport type ForeachSpec = z.infer<typeof AniUnitBaseSpec> & {\n  foreach?: AniUnitSpec\n  groupBy?: string\n  start?: string\n}\nexport const ForeachSpec: z.ZodType<ForeachSpec> = AniUnitBaseSpec.extend({\n  foreach: z.lazy(() => AniUnitSpec),\n  groupBy: z.string().optional(),\n  start: z.string().optional(),\n})\nexport type ForeachSpecWithParam = z.infer<typeof AniUnitBaseSpec> & {\n  foreach?: AniUnitSpecWithParam | ParamUsageSpec\n  groupBy?: string | ParamUsageSpec\n  start?: 'with prev' | 'after prev' | ParamUsageSpec\n}\nexport const ForeachSpecWithParam: z.ZodType<ForeachSpecWithParam> = AniUnitBaseSpec.extend({\n  foreach: z.lazy(() => z.union([AniUnitSpecWithParam, ParamUsageSpec])),\n  groupBy: z.union([z.string(), ParamUsageSpec]).optional(),\n  start: z.union([z.enum(['with prev', 'after prev']), ParamUsageSpec]).optional(),\n})\n\n\nexport const AniUnitSpec = z.union([\n  SyncSpec,\n  ConcatSpec,\n  ForeachSpec,\n  ChildSpec,\n  RefSpec\n])\nexport type AniUnitSpec = z.infer<typeof AniUnitSpec>\n\nexport const AniUnitSpecWithParam = z.union([\n  SyncSpecWithParam,\n  ConcatSpecWithParam,\n  ForeachSpecWithParam,\n  ChildSpecWithParam,\n  RefSpec,\n])\nexport type AniUnitSpecWithParam = z.infer<typeof AniUnitSpecWithParam>\n","import {z} from \"zod\"\n\nexport const WildcardPattern = z.string().regex(/^([a-zA-Z_][a-zA-Z_0-9]*\\.)+\\*$/)\nexport const FullNamePattern = z.string().regex(/^([a-zA-Z_][a-zA-Z_0-9]*\\.)+[a-zA-Z_][a-zA-Z_0-9]*$/)\n\nexport const ImportSpec = z.union([\n  FullNamePattern,\n  WildcardPattern,\n  z.object({\n    class: FullNamePattern,\n    as: z.string().optional(),\n  }),\n])\n\nexport type ImportSpec = z.infer<typeof ImportSpec>\n\n\n","import {AniUnitSpec} from \"@/parser/json/animation/AniUnitSpec\"\nimport {TargetSpec, TransformSpec} from \"@/parser/json/animation/TargetSpec\"\nimport {YoyoSpec} from \"@/parser/json/animation/YoyoSpec\"\nimport {z} from \"zod\"\n\nexport const NumberParamSpec = z.union([\n  z.number(),\n  z.object({\n    private: z.boolean().default(false),\n    type: z.literal('number').default('number'),\n    value: z.number(),\n  }),\n  z.object({\n    private: z.boolean().default(false),\n    type: z.literal('number'),\n    value: z.number().optional(),\n  }),\n])\n\nexport const StringParamSpec = z.union([\n  z.string(),\n  z.object({\n    private: z.boolean().default(false),\n    type: z.literal('string').default('string'),\n    value: z.string(),\n  }),\n  z.object({\n    private: z.boolean().default(false),\n    type: z.literal('string'),\n    value: z.string().optional(),\n  })\n])\n\nexport const BoolParamSpec = z.union([\n  z.boolean(),\n  z.object({\n    private: z.boolean().default(false),\n    type: z.literal('bool').default('bool'),\n    value: z.boolean(),\n  }),\n  z.object({\n    private: z.boolean().default(false),\n    type: z.literal('bool'),\n    value: z.boolean().optional(),\n  })\n])\n\nexport const AniUnitArrayParamSpec = z.object({\n  private: z.boolean().default(false),\n  type: z.literal('aniUnitArray'),\n  value: z.array(AniUnitSpec).default([]),\n})\n\nexport const AniUnitParamSpec = z.object({\n  private: z.boolean().default(false),\n  type: z.literal('aniUnit'),\n  value: AniUnitSpec.optional(),\n})\n\nexport const TargetParamSpec = z.object({\n  private: z.boolean().default(false),\n  type: z.literal('target'),\n  value: TargetSpec.optional(),\n})\n\nexport const TransformParamSpec = z.object({\n  private: z.boolean().default(false),\n  type: z.literal('transform'),\n  value: TransformSpec.optional(),\n})\n\nexport const YoyoParamSpec = z.object({\n  private: z.boolean().default(false),\n  type: z.literal('yoyo'),\n  value: YoyoSpec.optional(),\n})\n\nexport const ParamSpec = z.union([\n  NumberParamSpec,\n  StringParamSpec,\n  BoolParamSpec,\n  AniUnitArrayParamSpec,\n  AniUnitParamSpec,\n  TargetParamSpec,\n  TransformParamSpec,\n  YoyoParamSpec,\n])\n\nexport type ParamSpec = z.infer<typeof ParamSpec>\n\n\n","import {AniUnitSpecWithParam} from \"@/parser/json/animation/AniUnitSpec\"\nimport {ImportSpec} from \"@/parser/json/animation/ImportSpec\"\nimport {ParamSpec} from \"@/parser/json/animation/ParamSpec\"\nimport {z} from \"zod\"\n\nexport const AniClassSpec = z.object({\n  name: z.string().default(\"Main\"),\n  package: z.string().default(\"\"),\n  import: z.array(ImportSpec).default([]),\n  targetType: z.string().default(\"Any\"),\n  params: z.record(z.string(), ParamSpec).default({}),\n  main: AniUnitSpecWithParam\n})\n\nexport type AniClassSpec = z.infer<typeof AniClassSpec>\nexport type AniClassSpecInput = z.input<typeof AniClassSpec>\n\n\n","export default function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct.js\";\nexport default function _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    _construct = Reflect.construct.bind();\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n  return _construct.apply(null, arguments);\n}","import getPrototypeOf from \"./getPrototypeOf.js\";\nimport setPrototypeOf from \"./setPrototypeOf.js\";\nimport isNativeFunction from \"./isNativeFunction.js\";\nimport construct from \"./construct.js\";\nexport default function _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n      _cache.set(Class, Wrapper);\n    }\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n  return _wrapNativeSuper(Class);\n}","export class BaseError extends Error {\n  protected constructor(message: string) {\n    super()\n    this.message = message\n  }\n}\n","import {BaseError} from \"@/core/utils/error/BaseError\"\n\nexport class UnresolvedError extends BaseError {\n  static buildByProto(protoName: string, field: string): UnresolvedError {\n    const message = `UnresolvedError: Visit field ${field} before analysis.\\n` +\n        `In proto ${protoName}.`\n    return new UnresolvedError(message)\n  }\n\n  static build(msg: string): UnresolvedError {\n    return new UnresolvedError('UnresolvedError: ' + msg)\n  }\n}\n","import {TargetSelection} from \"@/core/ast/target/TargetSelection\"\n\nexport type TransformType = 'filter' | 'select' | 'selectAll' | 'filterExpr' | 'sort' | 'slice' | 'at' | 'group'\n\nexport abstract class Transform {\n  abstract get type(): TransformType\n  abstract execute(selection: TargetSelection): TargetSelection\n  abstract clone(): Transform\n}\n","import {Transform, TransformType} from \"@/core/ast/target/Transform\"\nimport {TargetSelection} from \"@/core/ast/target/TargetSelection\"\n\n\nexport class FilterTransform extends Transform {\n  readonly selector: string\n\n  constructor(selector: string) {\n    super()\n    this.selector = selector\n  }\n\n  get type(): TransformType {\n    return \"filter\"\n  }\n\n  execute(selection: TargetSelection): TargetSelection {\n    return selection.filter(this.selector)\n  }\n\n  toString() {\n    return `filter(${this.selector})`\n  }\n\n  clone(): FilterTransform {\n    return new FilterTransform(this.selector)\n  }\n}\n","import {Transform, TransformType} from \"@/core/ast/target/Transform\"\nimport {TargetSelection} from \"@/core/ast/target/TargetSelection\"\nimport {isArray} from \"lodash\"\nimport {LoggerManager} from \"@/core/utils/Logger\"\nimport {TargetModel, VirtualElementType} from \"@/core/ast/target/TargetModel\"\n\nexport class SortTransform extends Transform {\n  private static readonly logger = LoggerManager.getLogger('SortTransform')\n\n  sortBy: string\n  order: (number | string)[] | 'desc' | 'asc'\n\n  constructor(sortBy: string, order: (number | string)[] | 'desc' | 'asc' = 'asc') {\n    super()\n    this.sortBy = sortBy\n    this.order = order\n  }\n\n  get type(): TransformType {\n    return 'sort'\n  }\n\n  execute(selection: TargetSelection): TargetSelection {\n    const sortBy = this.sortBy\n        .replaceAll('@id', '__el__.id')\n        .replaceAll('@class', 'Array.from(__el__.classList)')\n        .replaceAll('@index', '__idx__')\n        .replaceAll('@data', '(__el__.data ?? {})')\n        .replaceAll('@el', '__el__')\n        .replaceAll('@coll', '__collection__')\n    SortTransform.logger.debug(`Sort ${selection} with sortBy: ${sortBy}, order: ${this.order}.`)\n    const elements = selection.elements\n    const keyMap = new Map<VirtualElementType, number | string>()\n    for (let idx = 0; idx < elements.length; idx++) {\n      const group = elements[idx]\n      let value\n      try {\n        value = mapperEval(sortBy, group, idx, elements, selection.targetModel)\n      } catch (e) {\n        SortTransform.logger.error(`Error while evaluating sortBy: ${sortBy} on group ${group}.`, e)\n        throw e\n      }\n      keyMap.set(group, value)\n    }\n    if (this.order === 'asc') {\n      return selection.sort((a, b) => (keyMap.get(a) as number) - (keyMap.get(b) as number))\n    } else if (this.order === 'desc') {\n      return selection.sort((a, b) => (keyMap.get(b) as number) - (keyMap.get(a) as number))\n    } else if (isArray(this.order)) {\n      return selection.sort((a, b) => {\n        const keyA = keyMap.get(a)\n        const keyB = keyMap.get(b)\n        // todo type check\n        const idxA = this.order.indexOf(keyA as any)\n        const idxB = this.order.indexOf(keyB as any)\n        return idxA - idxB\n      })\n    }\n\n  }\n\n  toString() {\n    return `sort(${this.sortBy}, ${isArray(this.order) ? `[${this.order.join(', ')}]` : this.order})`\n  }\n\n  clone(): Transform {\n    return new SortTransform(this.sortBy, this.order)\n  }\n}\n\n/* eslint-disable @typescript-eslint/no-unused-vars */\nfunction mapperEval(__key__: string,\n                    __el__: VirtualElementType,\n                    __idx__: number,\n                    __collection__: VirtualElementType[],\n                    __model__: TargetModel<unknown>): number | string {\n  return eval(__key__)\n}\n/* eslint-enable @typescript-eslint/no-unused-vars */\n","import {Transform, TransformType} from \"@/core/ast/target/Transform\"\nimport {TargetSelection} from \"@/core/ast/target/TargetSelection\"\n\n/**\n * Select can only be used for tree-like virtual model\n */\nexport class SelectTransform extends Transform {\n  readonly selector: string\n\n  constructor(selector: string) {\n    super()\n    this.selector = selector\n  }\n\n  get type(): TransformType {\n    return \"select\"\n  }\n\n  execute(selection: TargetSelection): TargetSelection {\n    return selection.select(this.selector)\n  }\n\n  toString() {\n    return `select(${this.selector})`\n  }\n\n  clone(): SelectTransform {\n    return new SelectTransform(this.selector)\n  }\n}\n","import {Transform, TransformType} from \"@/core/ast/target/Transform\"\nimport {TargetSelection} from \"@/core/ast/target/TargetSelection\"\n\n/**\n * SelectAll can only be used for tree-like virtual model\n */\nexport class SelectAllTransform extends Transform {\n  readonly selector: string\n\n  constructor(selector: string) {\n    super()\n    this.selector = selector\n  }\n\n  get type(): TransformType {\n    return \"selectAll\"\n  }\n\n  execute(selection: TargetSelection): TargetSelection {\n    return selection.selectAll(this.selector)\n  }\n\n  toString() {\n    return `selectAll(${this.selector})`\n  }\n\n  clone(): SelectAllTransform {\n    return new SelectAllTransform(this.selector)\n  }\n}\n","import {Transform, TransformType} from \"@/core/ast/target/Transform\"\nimport {TargetSelection} from \"@/core/ast/target/TargetSelection\"\n\nexport class SliceTransform extends Transform {\n  readonly start: number\n  readonly end: number | null\n  readonly step: number | null\n\n  constructor(start: number, end: number | null = null, step: number | null = null) {\n    super()\n    this.start = start\n    this.end = end\n    this.step = step\n  }\n\n  get type(): TransformType {\n    return \"slice\"\n  }\n\n  execute(selection: TargetSelection): TargetSelection {\n    return selection.slice(this.start, this.end, this.step)\n  }\n\n  toString() {\n    return `slice(${this.start}, ${this.end}, ${this.step})`\n  }\n\n  clone(): SliceTransform {\n    return new SliceTransform(this.start, this.end, this.step)\n  }\n}\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","import {Transform, TransformType} from \"@/core/ast/target/Transform\"\nimport {PredFunc, TargetSelection} from \"@/core/ast/target/TargetSelection\"\nimport {isFunction, isString} from \"lodash\"\nimport {LoggerManager} from \"@/core/utils/Logger\"\nimport {TargetModel, VirtualElementType} from \"@/core/ast/target/TargetModel\"\n\nexport class FilterExprTransform extends Transform {\n  private static readonly logger = LoggerManager.getLogger('FilterExprTransform')\n\n  readonly predicate: string | PredFunc\n\n  constructor(predicate: string | PredFunc) {\n    super()\n    this.predicate = predicate\n  }\n\n  get type(): TransformType {\n    return 'filterExpr'\n  }\n\n  execute(selection: TargetSelection): TargetSelection {\n    if (isString(this.predicate)) {\n      const predicate = this.predicate\n          .replaceAll('@id', '__el__.id')\n          .replaceAll('@class', 'Array.from(__el__.classList)')\n          .replaceAll('@index', '__idx__')\n          .replaceAll('@data', '(__el__.data ?? {})')\n          .replaceAll('@el', '__el__')\n          .replaceAll('@coll', '__collection__')\n      const targetModel = selection.targetModel\n      FilterExprTransform.logger.debug(`Filtering ${selection} with predicate ${predicate}.`)\n      return selection.filter((vNode, idx, vNodes) => {\n        try {\n          return predicateEval(predicate, vNode, idx, vNodes, targetModel)\n        } catch (e) {\n          FilterExprTransform.logger.error(`Error while evaluating predicate expression ${predicate} on element ${vNode}.`, e)\n          throw e\n        }\n      })\n    } else if (isFunction(this.predicate)) {\n      return selection.filter(this.predicate)\n    } else {\n      throw new Error(`Predicate is neither a string nor a function, but got ${this.predicate}`)\n    }\n  }\n\n  toString() {\n    return `filterExpr(${this.predicate})`\n  }\n\n  clone(): Transform {\n    return new FilterExprTransform(this.predicate)\n  }\n}\n\n/* eslint-disable @typescript-eslint/no-unused-vars */\nfunction predicateEval(__predicate__: string,\n                       __el__: VirtualElementType,\n                       __idx__: number,\n                       __collection__: VirtualElementType[],\n                       __model__: TargetModel<unknown>): boolean {\n  console.log(__el__, __idx__, __el__.data, __predicate__, eval(__predicate__))\n  return eval(__predicate__)\n}\n/* eslint-enable @typescript-eslint/no-unused-vars */\n","import {UnresolvedError} from \"@/core/utils/error/UnresolvedError\"\nimport {Transform} from \"@/core/ast/target/Transform\"\nimport {TargetSelection} from \"@/core/ast/target/TargetSelection\"\nimport {FilterTransform} from \"@/core/ast/target/trans/FilterTransform\"\nimport {SortTransform} from \"@/core/ast/target/trans/SortTransform\"\nimport {SelectTransform} from \"@/core/ast/target/trans/SelectTransform\"\nimport {SelectAllTransform} from \"@/core/ast/target/trans/SelectAllTransform\"\nimport {SliceTransform} from \"@/core/ast/target/trans/SliceTransform\"\nimport {FilterExprTransform} from \"@/core/ast/target/trans/FilterExprTransform\"\n\nexport class Target {\n  transforms: Transform[] = []\n\n  private _selection: TargetSelection = null\n\n  constructor(transforms: Transform[] = []) {\n    this.transforms = transforms\n  }\n\n  concatAtFront(other: Target): void {\n    this.transforms.unshift(...other.transforms)\n  }\n\n  /**\n   * Clones and returns a new Target object. Resolved data won't be cloned.\n   */\n  clone(): Target {\n    return new Target(this.transforms.map(tran => tran.clone()))\n  }\n\n  get selection(): TargetSelection {\n    if (this._selection === undefined) {\n      throw UnresolvedError.build(`Visit field elements before resolving.\\n` +\n          `In object Target.`)\n    }\n    return this._selection\n  }\n\n  set selection(value: TargetSelection) {\n    this._selection = value\n  }\n\n  static build(transforms: Transform[] = []): Target {\n    return new Target(transforms)\n  }\n\n  select(selector: string): this {\n    this.transforms.push(new SelectTransform(selector))\n    return this\n  }\n\n  selectAll(selector: string): this {\n    this.transforms.push(new SelectAllTransform(selector))\n    return this\n  }\n\n  filter(selector: string): this {\n    this.transforms.push(new FilterTransform(selector))\n    return this\n  }\n\n  filterExpr(predicate: string): this {\n    this.transforms.push(new FilterExprTransform(predicate))\n    return this\n  }\n\n  sort(sortBy: string, order: (number | string)[] | 'desc' | 'asc' = 'asc'): this {\n    this.transforms.push(new SortTransform(sortBy, order))\n    return this\n  }\n\n  slice(start: number, end: number | null = null, step: number | null = null): this {\n    this.transforms.push(new SliceTransform(start, end, step))\n    return this\n  }\n}\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","var ListCache = require('./_ListCache');\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nmodule.exports = stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nmodule.exports = stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nmodule.exports = stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nmodule.exports = stackHas;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","var ListCache = require('./_ListCache'),\n    Map = require('./_Map'),\n    MapCache = require('./_MapCache');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nmodule.exports = stackSet;\n","var ListCache = require('./_ListCache'),\n    stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEach;\n","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nmodule.exports = baseAssignValue;\n","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignValue;\n","var assignValue = require('./_assignValue'),\n    baseAssignValue = require('./_baseAssignValue');\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nmodule.exports = copyObject;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n","var copyObject = require('./_copyObject'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nmodule.exports = baseAssign;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = nativeKeysIn;\n","var isObject = require('./isObject'),\n    isPrototype = require('./_isPrototype'),\n    nativeKeysIn = require('./_nativeKeysIn');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeysIn;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeysIn = require('./_baseKeysIn'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nmodule.exports = keysIn;\n","var copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nmodule.exports = baseAssignIn;\n","var root = require('./_root');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nmodule.exports = cloneBuffer;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = copyArray;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n","var arrayFilter = require('./_arrayFilter'),\n    stubArray = require('./stubArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nmodule.exports = getSymbols;\n","var copyObject = require('./_copyObject'),\n    getSymbols = require('./_getSymbols');\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nmodule.exports = copySymbols;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","var overArg = require('./_overArg');\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nmodule.exports = getPrototype;\n","var arrayPush = require('./_arrayPush'),\n    getPrototype = require('./_getPrototype'),\n    getSymbols = require('./_getSymbols'),\n    stubArray = require('./stubArray');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nmodule.exports = getSymbolsIn;\n","var copyObject = require('./_copyObject'),\n    getSymbolsIn = require('./_getSymbolsIn');\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nmodule.exports = copySymbolsIn;\n","var arrayPush = require('./_arrayPush'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nmodule.exports = baseGetAllKeys;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbols = require('./_getSymbols'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nmodule.exports = getAllKeys;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbolsIn = require('./_getSymbolsIn'),\n    keysIn = require('./keysIn');\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nmodule.exports = getAllKeysIn;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n","var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nmodule.exports = initCloneArray;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n","var Uint8Array = require('./_Uint8Array');\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nmodule.exports = cloneArrayBuffer;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nmodule.exports = cloneDataView;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nmodule.exports = cloneRegExp;\n","var Symbol = require('./_Symbol');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nmodule.exports = cloneSymbol;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nmodule.exports = cloneTypedArray;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer'),\n    cloneDataView = require('./_cloneDataView'),\n    cloneRegExp = require('./_cloneRegExp'),\n    cloneSymbol = require('./_cloneSymbol'),\n    cloneTypedArray = require('./_cloneTypedArray');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nmodule.exports = initCloneByTag;\n","var isObject = require('./isObject');\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nmodule.exports = baseCreate;\n","var baseCreate = require('./_baseCreate'),\n    getPrototype = require('./_getPrototype'),\n    isPrototype = require('./_isPrototype');\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nmodule.exports = initCloneObject;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nmodule.exports = baseIsMap;\n","var baseIsMap = require('./_baseIsMap'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nmodule.exports = isMap;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nmodule.exports = baseIsSet;\n","var baseIsSet = require('./_baseIsSet'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nmodule.exports = isSet;\n","var Stack = require('./_Stack'),\n    arrayEach = require('./_arrayEach'),\n    assignValue = require('./_assignValue'),\n    baseAssign = require('./_baseAssign'),\n    baseAssignIn = require('./_baseAssignIn'),\n    cloneBuffer = require('./_cloneBuffer'),\n    copyArray = require('./_copyArray'),\n    copySymbols = require('./_copySymbols'),\n    copySymbolsIn = require('./_copySymbolsIn'),\n    getAllKeys = require('./_getAllKeys'),\n    getAllKeysIn = require('./_getAllKeysIn'),\n    getTag = require('./_getTag'),\n    initCloneArray = require('./_initCloneArray'),\n    initCloneByTag = require('./_initCloneByTag'),\n    initCloneObject = require('./_initCloneObject'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isMap = require('./isMap'),\n    isObject = require('./isObject'),\n    isSet = require('./isSet'),\n    keys = require('./keys'),\n    keysIn = require('./keysIn');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nmodule.exports = baseClone;\n","var baseClone = require('./_baseClone');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nmodule.exports = cloneDeep;\n","import {cloneDeep} from 'lodash'\n\nexport type TimingProps = {\n  duration?: number\n  offset?: number\n  stagger?: number\n  yoyo?: {repeat: number, delay: number}\n  reverse?: boolean\n}\n\nexport class Timing {\n  duration: number | null\n  offset: number | null\n  stagger: number | null\n  yoyo: {repeat: number, delay: number} | null\n  reverse = false\n\n  constructor({duration, offset, stagger, yoyo, reverse}: TimingProps) {\n    this.duration = duration\n    this.offset = offset\n    this.stagger = stagger\n    this.yoyo = yoyo\n    this.reverse = reverse\n  }\n\n  rewriteBy(timing: Timing) {\n    if (timing.duration !== null) {\n      this.duration = timing.duration\n    }\n    if (timing.offset !== null) {\n      this.offset = timing.offset\n    }\n    if (timing.stagger !== null) {\n      this.stagger = timing.stagger\n    }\n    if (timing.yoyo !== null) {\n      this.yoyo = timing.yoyo\n    }\n    if (timing.reverse !== null) {\n      this.reverse = timing.reverse\n    }\n  }\n\n  static build({duration, offset, stagger, yoyo, reverse}: TimingProps = {}): Timing {\n    // set default value here\n    return new Timing({\n      duration: duration ?? null,\n      offset: offset ?? null,\n      stagger: stagger ?? null,\n      yoyo: yoyo ?? null,\n      reverse: reverse ?? false\n    })\n  }\n\n  clone(): Timing {\n    return new Timing({\n      duration: this.duration,\n      offset: this.offset,\n      stagger: this.stagger,\n      yoyo: this.yoyo ? cloneDeep(this.yoyo) : null,\n      reverse: this.reverse\n    })\n  }\n}\n","export enum PType {\n  AnimationTemplate,\n  LogicalAnimation,\n  TargetType,\n  Binder,\n}\n\nexport abstract class Proto<T extends Proto<T>> {\n  abstract get name(): string\n  abstract get type(): PType\n  abstract get packageName(): string   // full package name\n\n  get fullName(): string {\n    if (this.packageName === '') {\n      return this.name\n    } else {\n      return `${this.packageName}.${this.name}`\n    }\n  }\n\n  abstract clone(): T\n\n  toString(): string {\n    return `<${this.name}>`\n  }\n}\n\n","import {BaseError} from \"@/core/utils/error/BaseError\"\n\nexport class ResolveError extends BaseError {\n  static build(msg: string): ResolveError {\n    return new ResolveError('ResolveError: ' + msg)\n  }\n}\n","export const urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\n","import { randomFillSync } from 'crypto'\nimport { urlAlphabet } from './url-alphabet/index.js'\nexport { urlAlphabet }\nconst POOL_SIZE_MULTIPLIER = 128\nlet pool, poolOffset\nlet fillPool = bytes => {\n  if (!pool || pool.length < bytes) {\n    pool = Buffer.allocUnsafe(bytes * POOL_SIZE_MULTIPLIER)\n    randomFillSync(pool)\n    poolOffset = 0\n  } else if (poolOffset + bytes > pool.length) {\n    randomFillSync(pool)\n    poolOffset = 0\n  }\n  poolOffset += bytes\n}\nexport let random = bytes => {\n  fillPool((bytes -= 0))\n  return pool.subarray(poolOffset - bytes, poolOffset)\n}\nexport let customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << (31 - Math.clz32((alphabet.length - 1) | 1))) - 1\n  let step = Math.ceil((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let i = step\n      while (i--) {\n        id += alphabet[bytes[i] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nexport let customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size, random)\nexport let nanoid = (size = 21) => {\n  fillPool((size -= 0))\n  let id = ''\n  for (let i = poolOffset - size; i < poolOffset; i++) {\n    id += urlAlphabet[pool[i] & 63]\n  }\n  return id\n}\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar numberTag = '[object Number]';\n\n/**\n * Checks if `value` is classified as a `Number` primitive or object.\n *\n * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are\n * classified as numbers, use the `_.isFinite` method.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a number, else `false`.\n * @example\n *\n * _.isNumber(3);\n * // => true\n *\n * _.isNumber(Number.MIN_VALUE);\n * // => true\n *\n * _.isNumber(Infinity);\n * // => true\n *\n * _.isNumber('3');\n * // => false\n */\nfunction isNumber(value) {\n  return typeof value == 'number' ||\n    (isObjectLike(value) && baseGetTag(value) == numberTag);\n}\n\nmodule.exports = isNumber;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nmodule.exports = isKey;\n","var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nmodule.exports = memoize;\n","var memoize = require('./memoize');\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nmodule.exports = memoizeCapped;\n","var memoizeCapped = require('./_memoizeCapped');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nmodule.exports = stringToPath;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","var isArray = require('./isArray'),\n    isKey = require('./_isKey'),\n    stringToPath = require('./_stringToPath'),\n    toString = require('./toString');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nmodule.exports = castPath;\n","/**\n * Gets the last element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the last element of `array`.\n * @example\n *\n * _.last([1, 2, 3]);\n * // => 3\n */\nfunction last(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? array[length - 1] : undefined;\n}\n\nmodule.exports = last;\n","var isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toKey;\n","var castPath = require('./_castPath'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nmodule.exports = baseSlice;\n","var baseGet = require('./_baseGet'),\n    baseSlice = require('./_baseSlice');\n\n/**\n * Gets the parent value at `path` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} path The path to get the parent value of.\n * @returns {*} Returns the parent value.\n */\nfunction parent(object, path) {\n  return path.length < 2 ? object : baseGet(object, baseSlice(path, 0, -1));\n}\n\nmodule.exports = parent;\n","var castPath = require('./_castPath'),\n    last = require('./last'),\n    parent = require('./_parent'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.unset`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The property path to unset.\n * @returns {boolean} Returns `true` if the property is deleted, else `false`.\n */\nfunction baseUnset(object, path) {\n  path = castPath(path, object);\n  object = parent(object, path);\n  return object == null || delete object[toKey(last(path))];\n}\n\nmodule.exports = baseUnset;\n","var baseGetTag = require('./_baseGetTag'),\n    getPrototype = require('./_getPrototype'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to infer the `Object` constructor. */\nvar objectCtorString = funcToString.call(Object);\n\n/**\n * Checks if `value` is a plain object, that is, an object created by the\n * `Object` constructor or one with a `[[Prototype]]` of `null`.\n *\n * @static\n * @memberOf _\n * @since 0.8.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a plain object, else `false`.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n * }\n *\n * _.isPlainObject(new Foo);\n * // => false\n *\n * _.isPlainObject([1, 2, 3]);\n * // => false\n *\n * _.isPlainObject({ 'x': 0, 'y': 0 });\n * // => true\n *\n * _.isPlainObject(Object.create(null));\n * // => true\n */\nfunction isPlainObject(value) {\n  if (!isObjectLike(value) || baseGetTag(value) != objectTag) {\n    return false;\n  }\n  var proto = getPrototype(value);\n  if (proto === null) {\n    return true;\n  }\n  var Ctor = hasOwnProperty.call(proto, 'constructor') && proto.constructor;\n  return typeof Ctor == 'function' && Ctor instanceof Ctor &&\n    funcToString.call(Ctor) == objectCtorString;\n}\n\nmodule.exports = isPlainObject;\n","var isPlainObject = require('./isPlainObject');\n\n/**\n * Used by `_.omit` to customize its `_.cloneDeep` use to only clone plain\n * objects.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {string} key The key of the property to inspect.\n * @returns {*} Returns the uncloned value or `undefined` to defer cloning to `_.cloneDeep`.\n */\nfunction customOmitClone(value) {\n  return isPlainObject(value) ? undefined : value;\n}\n\nmodule.exports = customOmitClone;\n","var Symbol = require('./_Symbol'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray');\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nmodule.exports = isFlattenable;\n","var arrayPush = require('./_arrayPush'),\n    isFlattenable = require('./_isFlattenable');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n","var baseFlatten = require('./_baseFlatten');\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, 1) : [];\n}\n\nmodule.exports = flatten;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nmodule.exports = apply;\n","var apply = require('./_apply');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nmodule.exports = overRest;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","var constant = require('./constant'),\n    defineProperty = require('./_defineProperty'),\n    identity = require('./identity');\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nmodule.exports = baseSetToString;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nmodule.exports = shortOut;\n","var baseSetToString = require('./_baseSetToString'),\n    shortOut = require('./_shortOut');\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nmodule.exports = setToString;\n","var flatten = require('./flatten'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * A specialized version of `baseRest` which flattens the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @returns {Function} Returns the new function.\n */\nfunction flatRest(func) {\n  return setToString(overRest(func, undefined, flatten), func + '');\n}\n\nmodule.exports = flatRest;\n","var arrayMap = require('./_arrayMap'),\n    baseClone = require('./_baseClone'),\n    baseUnset = require('./_baseUnset'),\n    castPath = require('./_castPath'),\n    copyObject = require('./_copyObject'),\n    customOmitClone = require('./_customOmitClone'),\n    flatRest = require('./_flatRest'),\n    getAllKeysIn = require('./_getAllKeysIn');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * The opposite of `_.pick`; this method creates an object composed of the\n * own and inherited enumerable property paths of `object` that are not omitted.\n *\n * **Note:** This method is considerably slower than `_.pick`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to omit.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.omit(object, ['a', 'c']);\n * // => { 'b': '2' }\n */\nvar omit = flatRest(function(object, paths) {\n  var result = {};\n  if (object == null) {\n    return result;\n  }\n  var isDeep = false;\n  paths = arrayMap(paths, function(path) {\n    path = castPath(path, object);\n    isDeep || (isDeep = path.length > 1);\n    return path;\n  });\n  copyObject(object, getAllKeysIn(object), result);\n  if (isDeep) {\n    result = baseClone(result, CLONE_DEEP_FLAG | CLONE_FLAT_FLAG | CLONE_SYMBOLS_FLAG, customOmitClone);\n  }\n  var length = paths.length;\n  while (length--) {\n    baseUnset(result, paths[length]);\n  }\n  return result;\n});\n\nmodule.exports = omit;\n","import {Target} from \"@/core/ast/target/Target\"\nimport {Timing} from \"@/core/ast/animation/other/Timing\"\nimport {Proto, PType} from \"@/module/Proto\"\nimport {ResolveError} from \"@/core/utils/error/ResolveError\"\nimport {z} from \"zod\"\nimport {TreeLike} from \"@/core/utils/TreeUtils\"\nimport {Import} from \"@/core/ast/animation/other/Import\"\nimport {nanoid} from \"nanoid\"\nimport {isNumber, isObject, isString, omit} from \"lodash\"\nimport {ResolveContext} from \"@/core/exec/resolve/ResolveContext\"\nimport {RefAnimation} from \"@/core/ast/animation/logical/impl/RefAnimation\"\nimport {BaseTemplateType} from \"@/core/ast/template/BaseTemplate\"\n\n\nexport interface AniMetaSchema<PropType extends typeof AniPropSchema> {\n  name: string,\n  packageName: string,\n  imports: Import[],\n  targetType: string,\n  propSchema: PropType\n}\n\nexport const AniPropSchema = z.object({\n  id: z.string()\n      .or(z.number())\n      .default(() => nanoid(10)),\n  target: z.instanceof(Target)\n      .or(z.string())\n      .default(Target.build())\n      .transform(val => {\n        if (isString(val)) {\n          return Target.build().selectAll(val)\n        }\n        return val\n      }).default(Target.build())\n      .describe(\"The target of the animation\"),\n  timing: z.instanceof(Timing)\n      .or(z.number())\n      .default(Timing.build())\n      .transform(val => {\n        if (isNumber(val)) return Timing.build({duration: val})\n        return val\n      })\n      .describe(\"The timing of the animation\"),\n})\n\nexport type BaseAniPropSchema = typeof AniPropSchema\nexport type BaseLogicalAniType = LogicalAnimation<BaseAniPropSchema>\n\nexport abstract class LogicalAnimation<PropType extends BaseAniPropSchema>\n  extends Proto<LogicalAnimation<PropType>>\n  implements TreeLike {\n\n  private readonly _meta: AniMetaSchema<PropType>\n\n  _rawProps: z.input<PropType>\n  _props: z.infer<PropType> = null\n\n  _templateSrc: BaseTemplateType = null\n  _refSrc: RefAnimation<PropType> = null\n\n  // set when resolving timing\n  computedDuration: number = null\n  computedTotalDuration: number = null\n\n  constructor(meta: AniMetaSchema<PropType>, props: z.input<PropType>) {\n    super()\n\n    this._meta = meta\n\n    this._rawProps = props\n    this._props = this.parseProps(props)\n\n    this.init()\n  }\n\n  protected init(): void {\n    // do nothing\n  }\n\n  abstract visitChildren(): LogicalAnimation<BaseAniPropSchema>[]\n\n  get type(): PType {\n    return PType.LogicalAnimation\n  }\n\n  get name(): string {\n    return this._meta.name\n  }\n\n  get packageName(): string {\n    return this._meta.packageName\n  }\n\n  get imports(): Import[] {\n    return this._meta.imports\n  }\n\n  get targetType(): string {\n    return this._meta.targetType\n  }\n\n  get propSchema(): PropType {\n    return this._meta.propSchema\n  }\n\n  setSrc(refSrc: RefAnimation<PropType>, templateSrc: BaseTemplateType): void {\n    this._refSrc = refSrc\n    this._templateSrc = templateSrc\n  }\n\n  props(): z.infer<PropType> {\n    return this._props\n  }\n\n  prop<K extends keyof z.infer<PropType>>(key: K): z.infer<PropType>[K] {\n    return this._props[key]\n  }\n\n  get id(): string | number {\n    return this.prop('id')\n  }\n\n  get target(): Target {\n    return this.prop('target')\n  }\n\n  get timing(): Timing {\n    return this.prop('timing')\n  }\n\n  get refSrc(): RefAnimation<PropType> | null {\n    return this._refSrc\n  }\n\n  get initialRefSrc(): RefAnimation<BaseAniPropSchema> | null {\n    let result = this._refSrc as RefAnimation<BaseAniPropSchema>\n    if (result === null) {\n      return null\n    }\n    while (result.refSrc !== null) {\n      result = result.refSrc as RefAnimation<BaseAniPropSchema>\n    }\n    return result\n  }\n\n  get templateSrc(): BaseTemplateType {\n    return this._templateSrc\n  }\n\n  private parseProps(props: z.input<PropType>): z.infer<PropType> {\n    const result = this.propSchema.safeParse(props)\n    if (result.success !== true) {\n      throw ResolveError.build(result.error.message)\n    }\n    return result.data\n  }\n\n  /**\n   * Computes the duration of the animation according to children.\n   * It uses computedTotalDuration of children so children must be resolved first.\n   */\n  abstract computeDuration(resolveContext: ResolveContext<unknown, unknown>): number\n  abstract rescale(resolveContext: ResolveContext<unknown, unknown>, rate: number): void\n\n  computeTotalDuration(cxt: ResolveContext<unknown, unknown>): number {\n    let dur = this.computeDuration(cxt)\n    if (this.timing.yoyo) {\n      const {repeat, delay} = this.timing.yoyo\n      dur = dur * (repeat + 1) + delay * repeat\n    }\n    const stagger = this.timing.stagger ?? 0\n    const staggerCnt = Math.max(0, this.target.selection.size - 1)\n    return dur + staggerCnt * stagger\n  }\n\n  toString(){\n    return `${this.name}(${this.id})`\n  }\n\n  toOneLineString(): string {\n    return `${this.name}`\n        + `${this.refSrc === null ? '' : ` ref=${this.templateSrc.name}`}`\n        + ` target=${this.getTargetStr()}`\n        + ` timing=${this.getTimingStr()}`\n        + ` props=${this.getPropsStr()}`\n  }\n\n  getTargetStr(): string {\n    const transformsStr = this.target.transforms.toString()\n    const elementsStr = this.target.selection ? this.target.selection.toString() : '?'\n    return `[${transformsStr}]->[${elementsStr}]`\n  }\n\n  getTimingStr(): string {\n    const attrList: [key: string, value: string | boolean][] = []\n\n    attrList.push(['computedDur', this.computedDuration ? (this.computedDuration + 's') : '?'])\n    attrList.push(['computedTotDur', this.computedTotalDuration ? (this.computedTotalDuration + 's') : '?'])\n    if (this.timing.duration) {\n      attrList.push(['dur', this.timing.duration + 's'])\n    }\n    if (this.timing.offset) {\n      attrList.push(['offset', this.timing.offset + 's'])\n    }\n    if (this.timing.stagger) {\n      attrList.push(['stagger', this.timing.stagger + 's'])\n    }\n    if (this.timing.reverse) {\n      attrList.push(['reverse', this.timing.reverse])\n    }\n    if (this.timing.yoyo) {\n      const yoyo = this.timing.yoyo\n      attrList.push(['yoyo', `(delay=${yoyo.delay}s,repeat=${yoyo.repeat})`])\n    }\n    const attrStr = attrList.map(([k, v]) => `${k}=${v}`).join(', ')\n\n    return `[${attrStr}]`\n  }\n\n  getPropsStr(): string {\n    const otherProps = omit(this.props(), ['id', 'target', 'timing'])\n    const otherPropStr = Object.entries(otherProps)\n        .map(([k, v]) => `${k}=${isObject(v) ? JSON.stringify(v) : v}`)\n        .join(', ')\n    return `[${otherPropStr}]`\n  }\n}\n","export class Import {\n  pkg: string | null\n  clazz: string | null\n  as: string | null\n\n  private constructor(pkg?: string, clazz?: string, as?: string) {\n    this.pkg = pkg ?? null\n    this.clazz = clazz ?? null\n    this.as = as ?? null\n  }\n\n  isPackageImport(): boolean {\n    return this.pkg !== null\n  }\n\n  static clazz(clazz: string, as?: string) {\n    return new Import(null, clazz, as ?? clazz)\n  }\n\n  /**\n   * Creates a package import.\n   * @param pkg Package name (doesn't end with \".*\")\n   */\n  static pkg(pkg: string) {\n    return new Import(pkg)\n  }\n}\n","import {BaseError} from \"@/core/utils/error/BaseError\"\n\nexport class ParseError extends BaseError {\n  static build(msg: string): ParseError {\n    return new ParseError('ParseError: ' + msg)\n  }\n\n  static buildWithPath(path: string, msg: string): ParseError {\n    const message = `Failed to parse spec at path ${path}. ${msg}`\n    return ParseError.build(message)\n  }\n\n  static buildByChecker(path: string, errors: any[]): ParseError {\n    const str = JSON.stringify(errors)\n    const message = `ParseError: Failed to parse spec at path ${path}. Errors: \\n${str}`\n    console.error(message)\n    return new ParseError(message)\n  }\n}\n","import assert from \"assert\"\nimport {BaseAniPropSchema} from \"@/core/ast/animation/logical/LogicalAnimation\"\nimport {z} from \"zod\"\nimport {cloneDeep} from \"lodash\"\n\nexport class ParseContext {\n  private readonly _props: z.output<BaseAniPropSchema> & {[key: string]: any} = {}\n\n  processStack: (string | number)[] = []\n\n  constructor(props: z.output<BaseAniPropSchema> & {[key: string]: any} = {}) {\n    this._props = props\n  }\n\n  basicProp<K extends keyof z.output<BaseAniPropSchema>>(key: K): z.output<BaseAniPropSchema>[K] {\n    return this._props[key]\n  }\n\n  prop(keyWithDollar: string): any {\n    assert(keyWithDollar.startsWith('$'), `A parameter usage call must start with \"$\", got ${keyWithDollar}`)\n    const key = keyWithDollar.substring(1)\n    if (!(key in this._props)) {\n      throw new Error(`Cannot find parameter '${key}' when parsing ${this.getProcessPath()}`)\n    }\n    return cloneDeep(this._props[key])\n  }\n\n  withProcessPath<T, U>(fn: (params: T) => U,\n                        attribute: string,\n                        withIndex: number | undefined = undefined,\n                        params: T = undefined): U {\n    const pathItem = attribute + (typeof withIndex === \"number\" ? `[${withIndex}]` : '')\n    this.processStack.push(pathItem)\n    const ret = fn(params)\n    this.processStack.pop()\n    return ret\n  }\n\n  getProcessPath(): string {\n    return this.processStack.join('.')\n  }\n}\n","import {LogicalAnimation, AniPropSchema, BaseAniPropSchema} from \"./LogicalAnimation\"\nimport {ResolveContext} from \"@/core/exec/resolve/ResolveContext\"\n\nexport const LeafAniProps = AniPropSchema.extend({\n})\n\nexport abstract class LeafAnimation<PropType extends typeof LeafAniProps> extends LogicalAnimation<PropType> {\n  visitChildren(): LogicalAnimation<BaseAniPropSchema>[] {\n    return []\n  }\n\n  computeDuration(cxt: ResolveContext<unknown, unknown>) {\n    return this.timing.duration ?? cxt.config.defaultDuration\n  }\n\n  rescale(cxt: ResolveContext<unknown, unknown>, rate: number): void {\n    this.computedDuration *= rate\n    this.computedTotalDuration *= rate\n  }\n}\n\n","/**\n * Prototypes in this package are provided by Gaia.\n * They can be accessed without import (todo).\n */\nexport const GAIA_COMMON_PKG = 'gaia.common'\n","import {LeafAnimation, LeafAniProps} from \"@/core/ast/animation/logical/LeafAnimation\"\nimport {BaseAniPropSchema} from \"@/core/ast/animation/logical/LogicalAnimation\"\nimport {z} from \"zod\"\nimport {GAIA_COMMON_PKG} from \"@/module/CommonPackage\"\nimport {isString, omit} from \"lodash\"\nimport {Target} from \"@/core/ast/target/Target\"\nimport {Timing} from \"@/core/ast/animation/other/Timing\"\nimport assert from \"assert\"\n\n\nexport const RefAnimationProps = LeafAniProps.extend({\n  ref: z.string()\n})\n\nexport class RefAnimation<RefPropType extends BaseAniPropSchema> extends LeafAnimation<typeof RefAnimationProps> {\n  constructor(props: z.input<typeof RefAnimationProps> & z.input<RefPropType>) {\n    super({\n      name: \"Ref\",\n      packageName: GAIA_COMMON_PKG,\n      imports: [],\n      targetType: \"Any\",\n      propSchema: RefAnimationProps\n    }, props)\n  }\n\n  get ref(): string {\n    return this.prop(\"ref\")\n  }\n\n  refProps(): z.input<RefPropType> {\n    return omit(this._rawProps, [\"ref\"])\n  }\n\n  refProp<K extends keyof z.input<RefPropType>>(key: K): z.input<RefPropType>[K] {\n    return this.refProps()[key]\n  }\n\n  static create<RefPropType extends BaseAniPropSchema>(ref: string, props?: z.input<RefPropType>): RefAnimation<RefPropType>\n  static create<RefPropType extends BaseAniPropSchema>(props: z.input<typeof RefAnimationProps> & z.input<RefPropType>): RefAnimation<RefPropType>\n  static create<RefPropType extends BaseAniPropSchema>(refOrProps: string | (z.input<typeof RefAnimationProps> & z.input<RefPropType>), props?: z.input<RefPropType>): RefAnimation<RefPropType> {\n    if (isString(refOrProps)) {\n      return new RefAnimation<RefPropType>({ref: refOrProps, ...props})\n    } else {\n      return new RefAnimation<RefPropType>(refOrProps)\n    }\n  }\n\n  clone(): RefAnimation<RefPropType> {\n    return new RefAnimation<RefPropType>({\n      ref: this.ref,\n      id: this.id,\n      target: this.target.clone(),\n      timing: this.timing.clone(),\n    })\n  }\n}\n\n\nfunction createRef<PropType extends BaseAniPropSchema>(ref: string, props?: z.input<PropType>): RefAnimation<PropType> {\n  if (props == null) {\n    return new RefAnimation<PropType>({ref})\n  }\n  return new RefAnimation<PropType>({ref, ...props})\n}\n\n// don't use a base class as using this as return value will cause type error\nexport class RefBuilder<PropType extends BaseAniPropSchema>  {\n  protected _ref: string\n  protected readonly _props: z.input<PropType>\n\n  constructor() {\n    this._props = {\n      target: Target.build(),\n      timing: Timing.build(),\n    }\n    this._ref = null\n  }\n\n  id(id: string | number): this {\n    this._props.id = id\n    return this\n  }\n\n  target(target: Target | string): this {\n    if (isString(target)) {\n      this._props.target = Target.build().selectAll(target)\n    } else {\n      this._props.target = target\n    }\n    return this\n  }\n\n  timing(timing: Timing): this {\n    this._props.timing = timing\n    return this\n  }\n\n  prop<K extends keyof z.input<PropType>>(key: K, value: z.input<PropType>[K]): this {\n    this._props[key] = value\n    return this\n  }\n\n  props(props: z.input<PropType>): this {\n    Object.assign(this._props, props)\n    return this\n  }\n\n  select(selector: string): this {\n    assert(this._props.target instanceof Target)\n    this._props.target.select(selector)\n    return this\n  }\n\n  selectAll(selector: string): this {\n    assert(this._props.target instanceof Target)\n    this._props.target.selectAll(selector)\n    return this\n  }\n\n  filter(selector: string): this {\n    assert(this._props.target instanceof Target)\n    this._props.target.filter(selector)\n    return this\n  }\n\n  filterExpr(predicate: string): this {\n    assert(this._props.target instanceof Target)\n    this._props.target.filter(predicate)\n    return this\n  }\n\n  sort(sortBy: string, order: (number | string)[] | 'desc' | 'asc' = 'asc'): this {\n    assert(this._props.target instanceof Target)\n    this._props.target.sort(sortBy, order)\n    return this\n  }\n\n  slice(start: number, end: number | null = null, step: number | null = null): this {\n    assert(this._props.target instanceof Target)\n    this._props.target.slice(start, end, step)\n    return this\n  }\n\n\n  ref(ref: string): this {\n    this._ref = ref\n    return this\n  }\n\n  build(): RefAnimation<PropType> {\n    if (this._ref == null) {\n      throw new Error(`Ref is not set`)\n    }\n    return new RefAnimation<PropType>({\n      ref: this._ref,\n      ...this._props\n    })\n  }\n}\n\nexport const Ref = Object.assign(createRef,\n    {builder: <PropType extends BaseAniPropSchema>() => new RefBuilder<PropType>()})\n","import {BaseTemplateType} from \"@/core/ast/template/BaseTemplate\"\nimport {BaseLogicalAniType} from \"@/core/ast/animation/logical/LogicalAnimation\"\nimport {TargetType} from \"@/core/ast/target/TargetType\"\nimport {ParseContext} from \"@/parser/json/ParseContext\"\nimport {Import} from \"@/core/ast/animation/other/Import\"\nimport {Binder} from \"@/core/ast/target/Binder\"\n\nexport abstract class BaseSpecParser<SpecType> {\n  public abstract parseTemplate(spec: SpecType, cxt?: ParseContext): BaseTemplateType\n  public abstract parseAnimation(spec: SpecType, cxt?: ParseContext): BaseLogicalAniType\n  public abstract parseTargetType(spec: SpecType, cxt?: ParseContext): TargetType\n  public abstract parseImports(spec: SpecType, cxt?: ParseContext): Import[]\n  public abstract parseBinder(spec: SpecType, cxt?: ParseContext): Binder\n}\n","import {Proto, PType} from \"@/module/Proto\"\nimport {Import} from \"@/core/ast/animation/other/Import\"\n\nexport class TargetTypeComponent {\n  readonly ref: string\n  readonly classList: string[]\n  readonly required: boolean\n\n  constructor(ref: string, classList: string[], required: boolean) {\n    this.ref = ref\n    this.classList = classList\n    this.required = required\n  }\n\n  static build(type: string, classList: string[], required = false) {\n    return new TargetTypeComponent(type, classList, required)\n  }\n}\n\nexport class TargetType extends Proto<TargetType> {\n  _name: string\n  _packageName: string\n\n  readonly imports: Import[]\n  readonly classList: string[]\n  readonly components: TargetTypeComponent[]\n\n  constructor(name: string, packageName: string,\n              imports: Import[], classList: string[], components: TargetTypeComponent[]) {\n    super()\n    this._name = name\n    this._packageName = packageName\n    this.imports = imports\n    this.classList = classList\n    this.components = components\n  }\n\n  get name(): string {\n    return this._name\n  }\n\n  get packageName(): string {\n    return this._packageName\n  }\n\n  get type(): PType {\n    return PType.TargetType\n  }\n\n  isLeaf(): boolean {\n    return this.components.length === 0\n  }\n\n  clone(): TargetType {\n    throw new Error(\"Not implemented\")\n    // return new TargetType(this.name, this.packageName, this.imports, this.components)\n  }\n\n  static build(name: string, packageName: string,\n               {imports = [], classList = [], components = []}:\n                   {classList: string[], imports: Import[], components: TargetTypeComponent[]}) {\n    return new TargetType(name, packageName, imports, classList, components)\n  }\n}\n","import {Proto, PType} from \"@/module/Proto\"\nimport {\n  AniMetaSchema,\n  BaseAniPropSchema,\n  LogicalAnimation\n} from \"@/core/ast/animation/logical/LogicalAnimation\"\nimport {z} from \"zod\"\nimport {ResolveContext} from \"@/core/exec/resolve/ResolveContext\"\n\n\n// export const TempPropSchema = z.object({\n//   name: z.string()\n//       .default('Main')\n//       .describe(\"Name of animation class (default: Main)\"),\n//   packageName: z.string()\n//       .default('')\n//       .describe(\"Package name of animation class (default: '')\"),\n//   params: z.array(z.instanceof(z.ZodType<typeof AniPropSchema>))\n//       .default([])\n//       .describe(\"List of params used in animation body\"),\n//   targetType: z.string()\n//       .default('Any')\n//       .describe(\"Target type of animation class\"),\n//   animation: z.instanceof(LogicalAnimation)\n//       .or(z.function().returns(z.instanceof(LogicalAnimation)))\n// })\n\n// export type TemplateType = 'json' | 'native' | 'ast'\n\nexport type BaseTemplateType = BaseTemplate<BaseAniPropSchema, LogicalAnimation<BaseAniPropSchema>>\n\nexport abstract class BaseTemplate<PropType extends BaseAniPropSchema, LogicalAniType extends LogicalAnimation<BaseAniPropSchema>>\n  extends Proto<BaseTemplate<PropType, LogicalAniType>> {\n\n  private readonly _meta: AniMetaSchema<PropType>\n\n  protected constructor(meta: AniMetaSchema<PropType>) {\n    super()\n    this._meta = meta\n  }\n\n  get type(): PType {\n    return PType.AnimationTemplate\n  }\n\n  get meta(): AniMetaSchema<PropType> {\n    return this._meta\n  }\n\n  get name(): string {\n    return this._meta.name\n  }\n\n  get packageName(): string {\n    return this._meta.packageName\n  }\n\n  get targetType(): string {\n    return this._meta.targetType\n  }\n\n  get propSchema(): PropType {\n    return this._meta.propSchema\n  }\n\n  // abstract get templateType(): TemplateType\n  abstract create<ObjType, AniType>(cxt: ResolveContext<ObjType, AniType>, props: z.input<PropType>): LogicalAniType\n\n  clone(): BaseTemplate<PropType, LogicalAniType> {\n    throw new Error(\"Method not implemented.\")\n  }\n}\n","import {BaseTemplate} from \"@/core/ast/template/BaseTemplate\"\nimport {BaseAniPropSchema, LogicalAnimation} from \"@/core/ast/animation/logical/LogicalAnimation\"\nimport {z} from \"zod\"\nimport {ResolveContext} from \"@/core/exec/resolve/ResolveContext\"\n\nexport abstract class CompositeTemplate<PropType extends BaseAniPropSchema, LogicalAniType extends LogicalAnimation<BaseAniPropSchema>>\n  extends BaseTemplate<PropType, LogicalAniType> {\n\n  create<ObjType, AniType>(cxt: ResolveContext<ObjType, AniType>, props: z.input<PropType>): LogicalAniType {\n    const parsedProps = this.propSchema.parse(props)\n    return this.instantiate(cxt, parsedProps)\n  }\n\n  abstract instantiate<ObjType, AniType>(cxt: ResolveContext<ObjType, AniType>, props: z.output<PropType>): LogicalAniType\n}\n","import {\n  AniMetaSchema,\n  AniPropSchema,\n  BaseAniPropSchema,\n  LogicalAnimation\n} from \"@/core/ast/animation/logical/LogicalAnimation\"\nimport {z} from \"zod\"\nimport {ResolveContext} from \"@/core/exec/resolve/ResolveContext\"\nimport {CompositeTemplate} from \"@/core/ast/template/CompositeTemplate\"\nimport {AniUnitSpec} from \"@/parser/json/animation/AniUnitSpec\"\nimport {ParseContext} from \"@/parser/json/ParseContext\"\nimport {LoggerManager} from \"@/core/utils/Logger\"\n\nexport class JsonCompositeTemplate<PropType extends typeof AniPropSchema, LogicalAniType extends LogicalAnimation<BaseAniPropSchema>>\n  extends CompositeTemplate<PropType, LogicalAniType> {\n\n  private readonly spec: z.input<typeof AniUnitSpec>\n\n  constructor(meta: AniMetaSchema<PropType>, spec: z.input<typeof AniUnitSpec>) {\n    super(meta)\n    this.spec = spec\n  }\n\n  instantiate<ObjType, AniType>(cxt: ResolveContext<ObjType, AniType>, props: z.output<PropType>): LogicalAniType {\n    const parseContext = new ParseContext(props)\n    LoggerManager.getLogger('JsonCompositeTemplate').debug(`Instantiate ${this.fullName} with props ${JSON.stringify(props)}`)\n    const parser = cxt.compileExec.session.parser\n    const animation = parser.parseAnimation(this.spec, parseContext) as unknown as LogicalAniType\n    // merge outer target\n    animation.target.concatAtFront(props.target)\n    // merge timing\n    animation.timing.rewriteBy(props.timing)\n    return animation\n  }\n}\n","import {LogicalAnimation, AniPropSchema, BaseLogicalAniType} from \"./LogicalAnimation\"\nimport {z} from \"zod\"\nimport {ForeachAnimation} from \"@/core/ast/animation/logical/impl/ForeachAnimation\"\n\nexport const AryPropSchema = AniPropSchema.extend({\n  animations: z.instanceof(LogicalAnimation).array()\n      .describe('Child animations')\n})\n\nexport abstract class AryAnimation<PropType extends typeof AryPropSchema> extends LogicalAnimation<PropType> {\n  private _foreachSrc: ForeachAnimation = null\n\n  setForeachSrc(src: ForeachAnimation): void {\n    this._foreachSrc = src\n  }\n\n  get foreachSrc(): ForeachAnimation {\n    return this._foreachSrc\n  }\n\n  get children(): BaseLogicalAniType[] {\n    return this.prop(\"animations\")\n  }\n\n  setChildren(children: BaseLogicalAniType[]): void {\n    this._props.animations = children\n  }\n\n  visitChildren(): BaseLogicalAniType[] {\n    return this.prop(\"animations\")\n  }\n\n  get animations(): BaseLogicalAniType[] {\n    return this.prop(\"animations\")\n  }\n\n  abstract replace(oldAnimation: BaseLogicalAniType, animation: BaseLogicalAniType): AryAnimation<PropType>\n}\n\n","var identity = require('./identity'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nmodule.exports = baseRest;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n","var isArrayLike = require('./isArrayLike'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nmodule.exports = isArrayLikeObject;\n","var arrayFilter = require('./_arrayFilter'),\n    arrayMap = require('./_arrayMap'),\n    baseProperty = require('./_baseProperty'),\n    baseTimes = require('./_baseTimes'),\n    isArrayLikeObject = require('./isArrayLikeObject');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * This method is like `_.zip` except that it accepts an array of grouped\n * elements and creates an array regrouping the elements to their pre-zip\n * configuration.\n *\n * @static\n * @memberOf _\n * @since 1.2.0\n * @category Array\n * @param {Array} array The array of grouped elements to process.\n * @returns {Array} Returns the new array of regrouped elements.\n * @example\n *\n * var zipped = _.zip(['a', 'b'], [1, 2], [true, false]);\n * // => [['a', 1, true], ['b', 2, false]]\n *\n * _.unzip(zipped);\n * // => [['a', 'b'], [1, 2], [true, false]]\n */\nfunction unzip(array) {\n  if (!(array && array.length)) {\n    return [];\n  }\n  var length = 0;\n  array = arrayFilter(array, function(group) {\n    if (isArrayLikeObject(group)) {\n      length = nativeMax(group.length, length);\n      return true;\n    }\n  });\n  return baseTimes(length, function(index) {\n    return arrayMap(array, baseProperty(index));\n  });\n}\n\nmodule.exports = unzip;\n","var baseRest = require('./_baseRest'),\n    unzip = require('./unzip');\n\n/**\n * Creates an array of grouped elements, the first of which contains the\n * first elements of the given arrays, the second of which contains the\n * second elements of the given arrays, and so on.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {...Array} [arrays] The arrays to process.\n * @returns {Array} Returns the new array of grouped elements.\n * @example\n *\n * _.zip(['a', 'b'], [1, 2], [true, false]);\n * // => [['a', 1, true], ['b', 2, false]]\n */\nvar zip = baseRest(unzip);\n\nmodule.exports = zip;\n","import {GAIA_COMMON_PKG} from \"@/module/CommonPackage\"\nimport {AryAnimation, AryPropSchema} from \"@/core/ast/animation/logical/AryAnimation\"\nimport {ResolveContext} from \"@/core/exec/resolve/ResolveContext\"\nimport assert from \"assert\"\nimport {z} from \"zod\"\nimport {BaseLogicalAniType} from \"@/core/ast/animation/logical/LogicalAnimation\"\nimport {isString, omit, zip} from \"lodash\"\nimport {Target} from \"@/core/ast/target/Target\"\nimport {Timing} from \"@/core/ast/animation/other/Timing\"\n\nexport const SyncPropSchema = AryPropSchema.extend({\n})\n\nexport class SyncAnimation extends AryAnimation<typeof SyncPropSchema> {\n  private scaleRate = 1\n\n  constructor(props: z.input<typeof SyncPropSchema>) {\n    super({\n      name: \"Sync\",\n      packageName: GAIA_COMMON_PKG,\n      imports: [],\n      targetType: \"Any\",\n      propSchema: SyncPropSchema,\n    }, props)\n  }\n\n  get offsets(): number[] {\n    return this.prop(\"animations\").map(a => (a.timing.offset ?? 0) * this.scaleRate)\n  }\n\n  computeDuration(cxt: ResolveContext<unknown, unknown>): number {\n    let duration = 0\n    for (const [animation, offset] of zip(this.animations, this.offsets)) {\n      const endTime = animation.computedTotalDuration + offset\n      duration = Math.max(duration, endTime)\n    }\n    if (this.timing.yoyo != null) {\n      throw new Error(`Cannot set yoyo in ${this}. Please use yoyo in child animations.`)\n    }\n    return duration\n  }\n\n  rescale(cxt: ResolveContext<unknown, unknown>, rate: number): void {\n    this.scaleRate *= rate\n    this.computedDuration *= rate\n    this.computedTotalDuration *= rate\n    this.children.forEach(c => c.rescale(cxt, rate))\n  }\n\n  replace(oldAnimation: BaseLogicalAniType, animation: BaseLogicalAniType): SyncAnimation {\n    const index = this.animations.indexOf(oldAnimation)\n    assert(index != -1, \"Animation not found\")\n    this.animations[index] = animation\n    return this\n  }\n\n  getPropsStr(): string {\n    const otherProps = Object.assign(omit(this.props(), ['id', 'target', 'timing', 'animations']), {\n      animations: `Array(${this.animations.length})`,\n      scaleRate: this.scaleRate,\n    })\n    if (this.foreachSrc) {\n      Object.assign(otherProps, {\n        foreachStagger: this.foreachSrc?.timing.stagger,\n      })\n    }\n    const otherPropsStr = Object.entries(otherProps).map(([k, v]) => `${k}=${v}`).join(', ')\n    return `[${otherPropsStr}]`\n  }\n\n  clone(): SyncAnimation {\n    const cloned = new SyncAnimation({\n      id: this.id,\n      target: this.target.clone(),\n      timing: this.timing.clone(),\n      animations: this.animations.map(a => a.clone()),\n    })\n    cloned.setForeachSrc(this.foreachSrc)\n    return cloned\n  }\n}\n\n\nfunction createSync(animationsOrProps: BaseLogicalAniType[] | z.input<typeof SyncPropSchema>): SyncAnimation {\n  if (Array.isArray(animationsOrProps)) {\n    return new SyncAnimation({animations: animationsOrProps})\n  } else {\n    return new SyncAnimation(animationsOrProps)\n  }\n}\n\n// don't use a base class as using this as return value will cause type error\nexport class SyncBuilder {\n  protected readonly _props: z.input<typeof SyncPropSchema>\n\n  constructor() {\n    this._props = {\n      target: Target.build(),\n      timing: Timing.build(),\n      animations: [],\n    }\n  }\n\n  id(id: string | number): this {\n    this._props.id = id\n    return this\n  }\n\n  target(target: Target | string): this {\n    if (isString(target)) {\n      this._props.target = Target.build().selectAll(target)\n    } else {\n      this._props.target = target\n    }\n    return this\n  }\n\n  timing(timing: Timing): this {\n    this._props.timing = timing\n    return this\n  }\n\n  prop<K extends keyof z.input<typeof SyncPropSchema>>(key: K, value: z.input<typeof SyncPropSchema>[K]): this {\n    this._props[key] = value\n    return this\n  }\n\n  props(props: z.input<typeof SyncPropSchema>): this {\n    Object.assign(this._props, props)\n    return this\n  }\n\n  select(selector: string): this {\n    assert(this._props.target instanceof Target)\n    this._props.target.select(selector)\n    return this\n  }\n\n  selectAll(selector: string): this {\n    assert(this._props.target instanceof Target)\n    this._props.target.selectAll(selector)\n    return this\n  }\n\n  filter(selector: string): this {\n    assert(this._props.target instanceof Target)\n    this._props.target.filter(selector)\n    return this\n  }\n\n  filterExpr(predicate: string): this {\n    assert(this._props.target instanceof Target)\n    this._props.target.filter(predicate)\n    return this\n  }\n\n  sort(sortBy: string, order: (number | string)[] | 'desc' | 'asc' = 'asc'): this {\n    assert(this._props.target instanceof Target)\n    this._props.target.sort(sortBy, order)\n    return this\n  }\n\n  slice(start: number, end: number | null = null, step: number | null = null): this {\n    assert(this._props.target instanceof Target)\n    this._props.target.slice(start, end, step)\n    return this\n  }\n\n\n  animations(animations: BaseLogicalAniType[]): this {\n    this._props.animations = animations\n    return this\n  }\n\n  append(ani: BaseLogicalAniType): this {\n    this._props.animations.push(ani)\n    return this\n  }\n\n  build(): SyncAnimation {\n    return createSync(this._props)\n  }\n}\n\nexport type Sync = {\n  // to separate two overloads\n  (animations: BaseLogicalAniType[]): SyncAnimation\n  (props: z.input<typeof SyncPropSchema>): SyncAnimation\n  builder(): SyncBuilder\n}\n\nexport const Sync: Sync = Object.assign(createSync, { builder: () => new SyncBuilder() })\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]';\n\n/**\n * Checks if `value` is classified as a boolean primitive or object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a boolean, else `false`.\n * @example\n *\n * _.isBoolean(false);\n * // => true\n *\n * _.isBoolean(null);\n * // => false\n */\nfunction isBoolean(value) {\n  return value === true || value === false ||\n    (isObjectLike(value) && baseGetTag(value) == boolTag);\n}\n\nmodule.exports = isBoolean;\n","var assignValue = require('./_assignValue'),\n    castPath = require('./_castPath'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.set`.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {Array|string} path The path of the property to set.\n * @param {*} value The value to set.\n * @param {Function} [customizer] The function to customize path creation.\n * @returns {Object} Returns `object`.\n */\nfunction baseSet(object, path, value, customizer) {\n  if (!isObject(object)) {\n    return object;\n  }\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      lastIndex = length - 1,\n      nested = object;\n\n  while (nested != null && ++index < length) {\n    var key = toKey(path[index]),\n        newValue = value;\n\n    if (key === '__proto__' || key === 'constructor' || key === 'prototype') {\n      return object;\n    }\n\n    if (index != lastIndex) {\n      var objValue = nested[key];\n      newValue = customizer ? customizer(objValue, key, nested) : undefined;\n      if (newValue === undefined) {\n        newValue = isObject(objValue)\n          ? objValue\n          : (isIndex(path[index + 1]) ? [] : {});\n      }\n    }\n    assignValue(nested, key, newValue);\n    nested = nested[key];\n  }\n  return object;\n}\n\nmodule.exports = baseSet;\n","var baseGet = require('./_baseGet'),\n    baseSet = require('./_baseSet'),\n    castPath = require('./_castPath');\n\n/**\n * The base implementation of  `_.pickBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @param {Function} predicate The function invoked per property.\n * @returns {Object} Returns the new object.\n */\nfunction basePickBy(object, paths, predicate) {\n  var index = -1,\n      length = paths.length,\n      result = {};\n\n  while (++index < length) {\n    var path = paths[index],\n        value = baseGet(object, path);\n\n    if (predicate(value, path)) {\n      baseSet(result, castPath(path, object), value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = basePickBy;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nmodule.exports = baseHasIn;\n","var castPath = require('./_castPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isLength = require('./isLength'),\n    toKey = require('./_toKey');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nmodule.exports = hasPath;\n","var baseHasIn = require('./_baseHasIn'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nmodule.exports = hasIn;\n","var basePickBy = require('./_basePickBy'),\n    hasIn = require('./hasIn');\n\n/**\n * The base implementation of `_.pick` without support for individual\n * property identifiers.\n *\n * @private\n * @param {Object} object The source object.\n * @param {string[]} paths The property paths to pick.\n * @returns {Object} Returns the new object.\n */\nfunction basePick(object, paths) {\n  return basePickBy(object, paths, function(value, path) {\n    return hasIn(object, path);\n  });\n}\n\nmodule.exports = basePick;\n","var basePick = require('./_basePick'),\n    flatRest = require('./_flatRest');\n\n/**\n * Creates an object composed of the picked `object` properties.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The source object.\n * @param {...(string|string[])} [paths] The property paths to pick.\n * @returns {Object} Returns the new object.\n * @example\n *\n * var object = { 'a': 1, 'b': '2', 'c': 3 };\n *\n * _.pick(object, ['a', 'c']);\n * // => { 'a': 1, 'c': 3 }\n */\nvar pick = flatRest(function(object, paths) {\n  return object == null ? {} : basePick(object, paths);\n});\n\nmodule.exports = pick;\n","import {ImportSpec} from \"@/parser/json/animation/ImportSpec\"\nimport {z} from \"zod\"\n\nexport const TargetTypeComponentSpec = z.object({\n  ref: z.string(),\n  class: z.array(z.string()).default([]),\n  required: z.boolean().default(false),\n}).strict()\n\nexport const TargetTypeSpec = z.object({\n  type: z.string(),\n  package: z.string().default(\"\"),\n  import: z.array(ImportSpec).default([]),\n  class: z.array(z.string()).default([]),\n  components: z.array(z.union([z.string(), TargetTypeComponentSpec])).default([]),\n}).strict()\n\nexport type TargetTypeComponentSpec = z.infer<typeof TargetTypeComponentSpec>\nexport type TargetTypeSpec = z.infer<typeof TargetTypeSpec>\nexport type TargetTypeSpecInput = z.input<typeof TargetTypeSpec>\n\n\n","import {GAIA_COMMON_PKG} from \"@/module/CommonPackage\"\nimport {AryAnimation, AryPropSchema} from \"@/core/ast/animation/logical/AryAnimation\"\nimport {ResolveContext} from \"@/core/exec/resolve/ResolveContext\"\nimport assert from \"assert\"\nimport {z} from \"zod\"\nimport {BaseLogicalAniType} from \"@/core/ast/animation/logical/LogicalAnimation\"\nimport {isString, omit, zip} from \"lodash\"\nimport {Target} from \"@/core/ast/target/Target\"\nimport {Timing} from \"@/core/ast/animation/other/Timing\"\n\n\nexport const ConcatPropSchema = AryPropSchema.extend({\n})\n\nexport class ConcatAnimation extends AryAnimation<typeof ConcatPropSchema> {\n  private scaleRate = 1\n\n  constructor(props: z.input<typeof ConcatPropSchema>) {\n    super({\n      name: \"Concat\",\n      packageName: GAIA_COMMON_PKG,\n      imports: [],\n      targetType: \"Any\",\n      propSchema: ConcatPropSchema,\n    }, props)\n  }\n\n  get offsets(): number[] {\n    return this.prop(\"animations\").map(a => (a.timing.offset ?? 0) * this.scaleRate)\n  }\n\n  computeDuration(cxt: ResolveContext<unknown, unknown>): number {\n    let duration = 0\n    let lastEnd = 0\n    for (const [animation, offset] of zip(this.animations, this.offsets)) {\n      lastEnd = lastEnd + offset + animation.computedTotalDuration\n      duration = Math.max(duration, lastEnd)\n    }\n    if (this.timing.yoyo != null) {\n      throw new Error(`Cannot set yoyo in ${this}. Please use yoyo in child animations.`)\n    }\n    return duration\n  }\n\n  rescale(cxt: ResolveContext<unknown, unknown>, rate: number): void {\n    this.scaleRate *= rate\n    this.computedDuration *= rate\n    this.computedTotalDuration *= rate\n    this.children.forEach(c => c.rescale(cxt, rate))\n  }\n\n  replace(oldAnimation: BaseLogicalAniType, animation: BaseLogicalAniType): ConcatAnimation {\n    const index = this.animations.indexOf(oldAnimation)\n    assert(index != -1, \"Animation not found\")\n    this.animations[index] = animation\n    return this\n  }\n\n  getPropsStr(): string {\n    const otherProps = Object.assign(omit(this.props(), ['id', 'target', 'timing', 'animations']), {\n      animations: `Array(${this.animations.length})`,\n      scaleRate: this.scaleRate,\n    })\n    if (this.foreachSrc) {\n      Object.assign(otherProps, {\n        foreachStagger: this.foreachSrc?.timing.stagger,\n      })\n    }\n    const otherPropsStr = Object.entries(otherProps).map(([k, v]) => `${k}=${v}`).join(', ')\n    return `[${otherPropsStr}]`\n  }\n\n  clone(): ConcatAnimation {\n    const cloned = new ConcatAnimation({\n      id: this.id,\n      target: this.target.clone(),\n      timing: this.timing.clone(),\n      animations: this.animations.map(a => a.clone()),\n    })\n    cloned.setForeachSrc(this.foreachSrc)\n    return cloned\n  }\n}\n\n\nfunction createConcat(animationsOrProps: BaseLogicalAniType[] | z.input<typeof ConcatPropSchema>): ConcatAnimation {\n  if (Array.isArray(animationsOrProps)) {\n    return new ConcatAnimation({animations: animationsOrProps})\n  } else {\n    return new ConcatAnimation(animationsOrProps)\n  }\n}\n\n// don't use a base class as using this as return value will cause type error\nexport class ConcatBuilder {\n  protected readonly _props: z.input<typeof ConcatPropSchema>\n\n  constructor() {\n    this._props = {\n      target: Target.build(),\n      timing: Timing.build(),\n      animations: [],\n    }\n  }\n\n  id(id: string | number): this {\n    this._props.id = id\n    return this\n  }\n\n  target(target: Target | string): this {\n    if (isString(target)) {\n      this._props.target = Target.build().selectAll(target)\n    } else {\n      this._props.target = target\n    }\n    return this\n  }\n\n  timing(timing: Timing): this {\n    this._props.timing = timing\n    return this\n  }\n\n  prop<K extends keyof z.input<typeof ConcatPropSchema>>(key: K, value: z.input<typeof ConcatPropSchema>[K]): this {\n    this._props[key] = value\n    return this\n  }\n\n  props(props: z.input<typeof ConcatPropSchema>): this {\n    Object.assign(this._props, props)\n    return this\n  }\n\n  select(selector: string): this {\n    assert(this._props.target instanceof Target)\n    this._props.target.select(selector)\n    return this\n  }\n\n  selectAll(selector: string): this {\n    assert(this._props.target instanceof Target)\n    this._props.target.selectAll(selector)\n    return this\n  }\n\n  filter(selector: string): this {\n    assert(this._props.target instanceof Target)\n    this._props.target.filter(selector)\n    return this\n  }\n\n  filterExpr(predicate: string): this {\n    assert(this._props.target instanceof Target)\n    this._props.target.filter(predicate)\n    return this\n  }\n\n  sort(sortBy: string, order: (number | string)[] | 'desc' | 'asc' = 'asc'): this {\n    assert(this._props.target instanceof Target)\n    this._props.target.sort(sortBy, order)\n    return this\n  }\n\n  slice(start: number, end: number | null = null, step: number | null = null): this {\n    assert(this._props.target instanceof Target)\n    this._props.target.slice(start, end, step)\n    return this\n  }\n\n\n  animations(animations: BaseLogicalAniType[]): this {\n    this._props.animations = animations\n    return this\n  }\n\n  append(ani: BaseLogicalAniType): this {\n    this._props.animations.push(ani)\n    return this\n  }\n\n  build(): ConcatAnimation {\n    return createConcat(this._props)\n  }\n}\n\nexport type Concat = {\n  // to separate two overloads\n  (animations: BaseLogicalAniType[]): ConcatAnimation\n  (props: z.input<typeof ConcatPropSchema>): ConcatAnimation\n  builder(): ConcatBuilder\n}\n\nexport const Concat: Concat = Object.assign(createConcat, {builder: () => new ConcatBuilder()})\n","import assert from \"assert\"\n\nexport class Binder {\n  readonly from: string\n  readonly to: string\n  readonly rules: BinderRule[]\n\n  private constructor(from: string, to: string, rules: BinderRule[]) {\n    this.from = from\n    this.to = to\n    this.rules = rules\n  }\n\n  static build(from: string, to: string, rules: BinderRule[] = []) {\n    return new Binder(from, to, rules)\n  }\n}\n\nexport class BinderRule {\n  readonly type: 'single' | 'batch'\n\n  readonly from: string\n  readonly to: string\n\n  readonly id: string | null  // only for single\n  readonly classList: string[]\n  // data and dataList cannot be both non-null\n  readonly data: Record<string, any> | null\n  readonly dataList: Record<string, any>[] | null   // only for batch\n\n  private constructor(type: 'single' | 'batch',\n                      from: string, to: string,\n                      id: string, classList: string[],\n                      data: Record<string, any> | null, dataList: Record<string, any>[] | null) {\n    this.type = type\n\n    this.from = from\n    this.to = to\n\n    this.id = id\n    this.classList = classList\n    this.data = data\n    this.dataList = dataList\n  }\n\n  static buildSingleBind({from, to, id, classList, data}:\n                             { from: string, to: string, id?: string, classList?: string[], data?: Record<string, any> }) {\n    return new BinderRule('single', from, to, id ?? null, classList ?? [], data ?? null, null)\n  }\n\n  static buildBatchBind({from, to, classList, data, dataList}:\n                         { from: string, to: string, classList?: string[], data?: Record<string, any>, dataList?: Record<string, any>[] }) {\n    assert(data == null || dataList == null, `Batch builder rule cannot have both data and dataList.`)\n    return new BinderRule('batch', from, to, null, classList ?? [], data ?? null, dataList ?? null)\n  }\n}\n","import {z} from \"zod\"\n\nexport const BinderRuleSpec = z.object({\n  from: z.string(),\n  to: z.string(),\n  id: z.string()\n      .nonempty(\"Id cannot be empty if specified\")\n      .nullable()\n      .default(null),\n  classList: z.array(z.string())\n      .default([]),\n  // data and dataList cannot be both specified\n  data: z.record(z.string(), z.any())\n      .nullable()\n      .default(null),\n  dataList: z.array(z.record(z.string(), z.any()))\n      .nullable()\n      .default(null),\n}).strict()\n\nexport const BinderSpec = z.object({\n  from: z.string(),\n  to: z.string(),\n  rules: z.array(BinderRuleSpec).default([]),\n}).strict()\n\nexport type BinderSpec = z.infer<typeof BinderSpec>\nexport type BinderSpecInput = z.input<typeof BinderSpec>\n\n\n","import {Transform, TransformType} from \"@/core/ast/target/Transform\"\nimport {TargetSelection} from \"@/core/ast/target/TargetSelection\"\n\nexport class AtTransform extends Transform {\n  readonly index: number\n\n  constructor(index: number) {\n    super()\n    this.index = index\n  }\n\n  get type(): TransformType {\n    return \"at\"\n  }\n\n  execute(selection: TargetSelection): TargetSelection {\n    return selection.slice(this.index, this.index + 1)\n  }\n\n  toString() {\n    return `at(${this.index})`\n  }\n\n  clone(): AtTransform {\n    return new AtTransform(this.index)\n  }\n}\n","import {Transform, TransformType} from \"@/core/ast/target/Transform\"\nimport {TargetSelection} from \"@/core/ast/target/TargetSelection\"\nimport {LoggerManager} from \"@/core/utils/Logger\"\nimport {TargetModel, VirtualElementType} from \"@/core/ast/target/TargetModel\"\n\n/**\n * Group can only be used for tree-like virtual model\n */\nexport class GroupTransform extends Transform {\n  private static readonly logger = LoggerManager.getLogger('GroupTransform')\n\n  readonly groupBy: string\n\n  constructor(groupBy: string) {\n    super()\n    this.groupBy = groupBy\n  }\n\n  get type(): TransformType {\n    return \"group\"\n  }\n\n  execute(selection: TargetSelection): TargetSelection {\n    const groupBy = this.groupBy\n        .replaceAll('@id', '__el__.id')\n        .replaceAll('@class', 'Array.from(__el__.classList)')\n        .replaceAll('@index', '__idx__')\n        .replaceAll('@data', '(__el__.data ?? {})')\n        .replaceAll('@el', '__el__')\n        .replaceAll('@coll', '__collection__')\n    GroupTransform.logger.debug(`Group ${selection} with groupBy: ${groupBy}.`)\n    const groups = selection.elements\n    const keyMap = new Map<VirtualElementType, KeyType>()\n    for (let idx = 0; idx < groups.length; idx++) {\n      const group = groups[idx]\n      let value\n      try {\n        value = mapperEval(groupBy, group, idx, groups, selection.targetModel)\n      } catch (e) {\n        GroupTransform.logger.error(`Error while evaluating groupBy: ${groupBy} on group ${group}.`, e)\n        throw e\n      }\n      keyMap.set(group, value)\n    }\n    return selection.group(a => keyMap.get(a))\n  }\n\n  toString() {\n    return `group(${this.groupBy})`\n  }\n\n  clone(): GroupTransform {\n    return new GroupTransform(this.groupBy)\n  }\n}\n\n/* eslint-disable @typescript-eslint/no-unused-vars */\nfunction mapperEval(__groupBy__: string,\n                    __el__: VirtualElementType,\n                    __idx__: number,\n                    __collection__: VirtualElementType[],\n                    __model__: TargetModel<unknown>): KeyType {\n  return eval(__groupBy__)\n}\n/* eslint-enable @typescript-eslint/no-unused-vars */\n","import {LogicalAnimation, AniPropSchema, BaseAniPropSchema} from \"./LogicalAnimation\"\nimport {z} from \"zod\"\nimport {ResolveContext} from \"@/core/exec/resolve/ResolveContext\"\n\n\nexport const UnaryAnimationProps = AniPropSchema.extend({\n  animation: z.instanceof(LogicalAnimation)\n      .describe('Child animation')\n})\n\nexport abstract class UnaryAnimation<P extends typeof UnaryAnimationProps> extends LogicalAnimation<P> {\n  get child(): LogicalAnimation<BaseAniPropSchema> {\n    return this.prop('animation')\n  }\n\n  visitChildren(): LogicalAnimation<BaseAniPropSchema>[] {\n    return [this.child]\n  }\n\n  /**\n   * Computes the duration of the animation according to children.\n   * It uses computedDuration of children so children must be resolved first.\n   */\n  computeDuration(cxt: ResolveContext<unknown, unknown>): number {\n    return this.child.computedDuration\n  }\n\n  rescale(cxt: ResolveContext<unknown, unknown>, rate: number): void {\n    this.child.rescale(cxt, rate)\n  }\n\n  replace(animation: LogicalAnimation<BaseAniPropSchema>): UnaryAnimation<P> {\n    this._props.animation = animation\n    return this\n  }\n}\n\n","import {GAIA_COMMON_PKG} from \"@/module/CommonPackage\"\nimport {ResolveContext} from \"@/core/exec/resolve/ResolveContext\"\nimport {z} from \"zod\"\nimport {omit} from \"lodash\"\nimport {UnaryAnimation, UnaryAnimationProps} from \"@/core/ast/animation/logical/UnaryAnimation\"\n\nexport const ForeachPropSchema = UnaryAnimationProps.extend({\n  groupBy: z.string().default('@id'),\n  start: z.enum(['with prev', 'after prev']).default('with prev'),\n})\n\nexport class ForeachAnimation extends UnaryAnimation<typeof ForeachPropSchema> {\n  constructor(props: z.input<typeof ForeachPropSchema>) {\n    super({\n      name: \"Foreach\",\n      packageName: GAIA_COMMON_PKG,\n      imports: [],\n      targetType: \"Any\",\n      propSchema: ForeachPropSchema,\n    }, props)\n  }\n\n  computeDuration(cxt: ResolveContext<unknown, unknown>): number {\n    throw new Error(\"Can't get duration from foreach animation. It should be transformed to Sync or Concat animation.\")\n  }\n\n  rescale(cxt: ResolveContext<unknown, unknown>, rate: number): void {\n    throw new Error(\"Can't rescale foreach animation. It should be transformed to Sync or Concat animation.\")\n  }\n\n  getPropsStr(): string {\n    const otherProps = Object.assign(omit(this.props(), ['id', 'target', 'timing', 'animation']), {\n      animation: `Array(${this.child})`,\n    })\n    const otherPropsStr = Object.entries(otherProps).map(([k, v]) => `${k}=${v}`).join(', ')\n    return `[${otherPropsStr}]`\n  }\n\n  clone(): ForeachAnimation {\n    return new ForeachAnimation({\n      id: this.id,\n      target: this.target.clone(),\n      timing: this.timing.clone(),\n      animation: this.child.clone(),\n      groupBy: this.props().groupBy,\n      start: this.props().start,\n    })\n  }\n}\n\n\n// function createForeach(animationOrProps: BaseLogicalAniType | z.input<typeof ForeachPropSchema>): ForeachAnimation {\n//   if (animationOrProps instanceof BaseLogicalAniType) {\n//     return new ForeachAnimation({animation: animationOrProps})\n//   } else {\n//     return new ForeachAnimation(animationOrProps)\n//   }\n// }\n\n// // don't use a base class as using this as return value will cause type error\n// export class SyncBuilder {\n//   protected readonly _props: z.input<typeof SyncPropSchema>\n//\n//   constructor() {\n//     this._props = {\n//       target: Target.build(),\n//       timing: Timing.build(),\n//       animations: [],\n//     }\n//   }\n//\n//   id(id: string | number): this {\n//     this._props.id = id\n//     return this\n//   }\n//\n//   target(target: Target | string): this {\n//     if (isString(target)) {\n//       this._props.target = Target.build().selectAll(target)\n//     } else {\n//       this._props.target = target\n//     }\n//     return this\n//   }\n//\n//   timing(timing: Timing): this {\n//     this._props.timing = timing\n//     return this\n//   }\n//\n//   prop<K extends keyof z.input<typeof SyncPropSchema>>(key: K, value: z.input<typeof SyncPropSchema>[K]): this {\n//     this._props[key] = value\n//     return this\n//   }\n//\n//   props(props: z.input<typeof SyncPropSchema>): this {\n//     Object.assign(this._props, props)\n//     return this\n//   }\n//\n//   select(selector: string): this {\n//     assert(this._props.target instanceof Target)\n//     this._props.target.select(selector)\n//     return this\n//   }\n//\n//   selectAll(selector: string): this {\n//     assert(this._props.target instanceof Target)\n//     this._props.target.selectAll(selector)\n//     return this\n//   }\n//\n//   filter(selector: string): this {\n//     assert(this._props.target instanceof Target)\n//     this._props.target.filter(selector)\n//     return this\n//   }\n//\n//   filterExpr(predicate: string): this {\n//     assert(this._props.target instanceof Target)\n//     this._props.target.filter(predicate)\n//     return this\n//   }\n//\n//   sort(sortBy: string, order: (number | string)[] | 'desc' | 'asc' = 'asc'): this {\n//     assert(this._props.target instanceof Target)\n//     this._props.target.sort(sortBy, order)\n//     return this\n//   }\n//\n//   slice(start: number, end: number | null = null, step: number | null = null): this {\n//     assert(this._props.target instanceof Target)\n//     this._props.target.slice(start, end, step)\n//     return this\n//   }\n//\n//\n//   animations(animations: BaseLogicalAniType[]): this {\n//     this._props.animations = animations\n//     return this\n//   }\n//\n//   append(ani: BaseLogicalAniType): this {\n//     this._props.animations.push(ani)\n//     return this\n//   }\n//\n//   build(): SyncAnimation {\n//     return createSync(this._props)\n//   }\n// }\n//\n// export type Sync = {\n//   // to separate two overloads\n//   (animations: BaseLogicalAniType[]): SyncAnimation\n//   (props: z.input<typeof SyncPropSchema>): SyncAnimation\n//   builder(): SyncBuilder\n// }\n//\n// export const Sync: Sync = Object.assign(createSync, { builder: () => new SyncBuilder() })\n","import {AniClassSpec, AniClassSpecInput} from \"@/parser/json/animation/AniClassSpec\"\nimport {AniUnitSpec, AniUnitSpecWithParam} from \"@/parser/json/animation/AniUnitSpec\"\nimport {FullNamePattern, ImportSpec, WildcardPattern} from \"@/parser/json/animation/ImportSpec\"\nimport {AniPropSchema, BaseLogicalAniType} from \"@/core/ast/animation/logical/LogicalAnimation\"\nimport {Import} from \"@/core/ast/animation/other/Import\"\nimport {TargetSpec, TransformSpec} from \"@/parser/json/animation/TargetSpec\"\nimport {ParseError} from \"@/core/utils/error/ParseError\"\nimport {Timing, TimingProps} from \"@/core/ast/animation/other/Timing\"\nimport {ParseContext} from \"@/parser/json/ParseContext\"\nimport {Ref} from \"@/core/ast/animation/logical/impl/RefAnimation\"\nimport {Transform} from \"@/core/ast/target/Transform\"\nimport {SortTransform} from \"@/core/ast/target/trans/SortTransform\"\nimport {Target} from \"@/core/ast/target/Target\"\nimport {BaseSpecParser} from \"@/parser/BaseSpecParser\"\nimport {TargetType, TargetTypeComponent} from '@/core/ast/target/TargetType'\nimport {BaseTemplateType} from '@/core/ast/template/BaseTemplate'\nimport {z} from \"zod\"\nimport {JsonCompositeTemplate} from \"@/core/ast/template/JsonCompositeTemplate\"\nimport {Sync} from \"@/core/ast/animation/logical/impl/SyncAnimation\"\nimport {\n  AniUnitParamSpec,\n  BoolParamSpec,\n  NumberParamSpec,\n  ParamSpec,\n  StringParamSpec\n} from \"@/parser/json/animation/ParamSpec\"\nimport assert from \"assert\"\nimport {isArray, isBoolean, isNumber, isObject, isString, pick} from \"lodash\"\nimport {TargetTypeComponentSpec, TargetTypeSpec} from \"@/parser/json/target/TargetTypeSpec\"\nimport {Logger, LoggerManager} from \"@/core/utils/Logger\"\nimport {Concat, ConcatPropSchema} from \"@/core/ast/animation/logical/impl/ConcatAnimation\"\nimport {toTreeString} from \"@/core/utils/TreeUtils\"\nimport {Binder, BinderRule} from \"@/core/ast/target/Binder\"\nimport {BinderSpec} from \"@/parser/json/target/BinderSpec\"\nimport {SelectAllTransform} from \"@/core/ast/target/trans/SelectAllTransform\"\nimport {SelectTransform} from \"@/core/ast/target/trans/SelectTransform\"\nimport {SliceTransform} from \"@/core/ast/target/trans/SliceTransform\"\nimport {AtTransform} from \"@/core/ast/target/trans/AtTransform\"\nimport {FilterTransform} from \"@/core/ast/target/trans/FilterTransform\"\nimport {FilterExprTransform} from \"@/core/ast/target/trans/FilterExprTransform\"\nimport {GroupTransform} from \"@/core/ast/target/trans/GroupTransform\"\nimport {ParamUsageSpec} from \"@/parser/json/animation/ParamUsageSpec\"\nimport {ForeachAnimation, ForeachPropSchema} from \"@/core/ast/animation/logical/impl/ForeachAnimation\"\n\n\nexport class JsonSpecParser extends BaseSpecParser<object> {\n  private static readonly logger: Logger = LoggerManager.getLogger('JsonSpecParser')\n\n  constructor() {\n    super()\n  }\n\n  public parseTemplate(spec: AniClassSpecInput, cxt?: ParseContext): BaseTemplateType {\n    JsonSpecParser.logger.debug('Parse template\\n', JSON.stringify(spec, null, 2))\n\n    cxt = cxt ?? new ParseContext()\n\n    const result = AniClassSpec.safeParse(spec)\n    if (result.success === false) {\n      throw ParseError.buildWithPath(cxt.getProcessPath(), 'Parsing template. Error: ' + result.error.message)\n    }\n    const parsed = result.data\n\n    JsonSpecParser.logger.debug('Parsed template result\\n', JSON.stringify(parsed, null, 2))\n\n    const imports: Import[] = this.parseImports(parsed.import, cxt)\n\n    const targetType = parsed.targetType\n\n    const otherParamSchema = this.visitParams(cxt, parsed.params)\n    const propSchema = AniPropSchema.merge(otherParamSchema) as typeof AniPropSchema\n\n    return new JsonCompositeTemplate({\n      name: parsed.name,\n      packageName: parsed.package,\n\n      imports: imports,\n      targetType: targetType,\n      propSchema: propSchema,\n    }, parsed.main)\n  }\n\n  public parseAnimation(spec: z.input<typeof AniUnitSpecWithParam>, cxt?: ParseContext): BaseLogicalAniType {\n    JsonSpecParser.logger.debug('Parse animation\\n', JSON.stringify(spec, null, 2))\n    cxt = cxt ?? new ParseContext()\n    return cxt.withProcessPath(() => this.visitAniUnit(cxt, spec), 'main')\n  }\n\n  public parseTargetType(spec: z.input<typeof TargetTypeSpec>, cxt?: ParseContext): TargetType {\n    JsonSpecParser.logger.debug('Parse target type\\n', JSON.stringify(spec, null, 2))\n\n    cxt = cxt ?? new ParseContext()\n    const result = TargetTypeSpec.safeParse(spec)\n    if (result.success === false) {\n      throw ParseError.buildWithPath(cxt.getProcessPath(),\n          `Spec:\\n${JSON.stringify(spec, null, 2)}\\nError: ${result.error.message}`)\n    }\n    const parsed = result.data\n\n    JsonSpecParser.logger.debug('Parsed type result\\n', JSON.stringify(parsed, null, 2))\n\n    const imports: Import[] = this.parseImports(parsed.import, cxt)\n\n    const classList = parsed.class\n\n    const components: TargetTypeComponent[] = []\n    parsed.components.forEach((item, idx) => {\n      let result\n      if (isString(item)) {\n        result = TargetTypeComponent.build(item, [])\n      } else {\n        result = cxt.withProcessPath(() => this.visitTypeComponent(cxt, item),\n            'components', idx)\n      }\n      components.push(result)\n    })\n\n    return new TargetType(parsed.type, parsed.package, imports, classList, components)\n  }\n\n  public visitTypeComponent(cxt: ParseContext, spec: TargetTypeComponentSpec): TargetTypeComponent {\n    return TargetTypeComponent.build(spec.ref, spec.class, spec.required)\n  }\n\n  public parseImports(spec: z.input<typeof ImportSpec>[], cxt?: ParseContext): Import[] {\n    const imports: Import[] = []\n    for (let idx = 0; idx < spec.length; idx++) {\n      const item = spec[idx]\n      const importItem = cxt.withProcessPath(() => this.parseOneImportItem(item, cxt), 'import', idx)\n      imports.push(importItem)\n    }\n    return imports\n  }\n\n  private parseOneImportItem(item: z.input<typeof ImportSpec>, cxt: ParseContext): Import {\n    let result\n    if (isString(item)) {\n      item = item.trim()\n      if (WildcardPattern.safeParse(item).success) {\n        const pkg = item.substring(0, item.length - 2)    // remove '.*'\n        result = Import.pkg(pkg)\n      } else if (FullNamePattern.safeParse(item).success) {\n        result = Import.clazz(item)\n      } else {\n        throw ParseError.buildWithPath(cxt.getProcessPath(), `Invalid import spec: ${item}`)\n      }\n    } else {\n      result = Import.clazz(item.class, item.as)\n    }\n    return result\n  }\n\n  public visitParams(cxt: ParseContext, spec: { [key: string]: ParamSpec }): z.ZodObject<{ [key: string]: z.ZodType }> {\n    const propSchemaRaw: { [key: string]: z.ZodType } = {}\n    Object.entries(spec).forEach(([paramName, spec], idx) => {\n      propSchemaRaw[paramName] = cxt.withProcessPath(() => this.visitParam(cxt, spec),\n          'params', idx)\n    })\n    return z.object(propSchemaRaw)\n  }\n\n  public visitParam(cxt: ParseContext, spec: ParamSpec): z.ZodType {\n    let result\n\n    result = NumberParamSpec.safeParse(spec)\n    if (result.success === true) {\n      const parsed = result.data\n      // a single number\n      if (isNumber(parsed)) {\n        return z.number().default(parsed) as z.ZodType\n      }\n      assert(isObject(parsed) && parsed.type === 'number')\n      if (parsed.value != null) {\n        return z.number().default(parsed.value) as z.ZodType\n      } else {\n        return z.number() as z.ZodType\n      }\n    }\n\n    result = StringParamSpec.safeParse(spec)\n    if (result.success === true) {\n      const parsed = result.data\n      // a single string\n      if (isString(parsed)) {\n        return z.string().default(parsed) as z.ZodType\n      }\n      assert(isObject(parsed) && parsed.type === 'string')\n      if (parsed.value != null) {\n        return z.string().default(parsed.value) as z.ZodType\n      } else {\n        return z.string() as z.ZodType\n      }\n    }\n\n    result = BoolParamSpec.safeParse(spec)\n    if (result.success === true) {\n      const parsed = result.data\n      // a single boolean\n      if (isBoolean(parsed)) {\n        return z.boolean().default(parsed) as z.ZodType\n      }\n      assert(isObject(parsed) && parsed.type === 'bool')\n      if (parsed.value != null) {\n        return z.boolean().default(parsed.value) as z.ZodType\n      } else {\n        return z.boolean() as z.ZodType\n      }\n    }\n\n    result = AniUnitParamSpec.safeParse(spec)\n    if (result.success === true) {\n      const parsed = result.data\n      if (parsed.value != null) {\n        return AniUnitSpec.default(parsed.value) as z.ZodType\n      } else {\n        return AniUnitSpec as z.ZodType\n      }\n    }\n\n    throw ParseError.buildWithPath(cxt.getProcessPath(),\n        \"Failed to parse param definition spec. \\n\" + JSON.stringify(spec))\n  }\n\n  public visitAniUnit(cxt: ParseContext, spec: AniUnitSpecWithParam | ParamUsageSpec): BaseLogicalAniType {\n\n    if (isString(spec)) {\n      spec = this.tryParamReplace(cxt, spec) as AniUnitSpec\n    }\n\n    // process target\n\n    const rawTarget = spec.target\n    const target = cxt.withProcessPath(() => this.visitTarget(cxt, rawTarget), 'target')\n\n    // process timing\n    const rawTimingProps = pick(spec, ['duration', 'offset', 'stagger', 'yoyo', 'reverse'])\n    const timingProps: TimingProps = {}\n    if ('duration' in rawTimingProps) {\n      if (isString(rawTimingProps.duration)) {\n        const value = cxt.prop(rawTimingProps.duration)\n        assert(isNumber(value))\n        timingProps.duration = value\n      } else {\n        timingProps.duration = rawTimingProps.duration\n      }\n    }\n    if ('offset' in rawTimingProps) {\n      if (isString(rawTimingProps.offset)) {\n        const value = cxt.prop(rawTimingProps.offset)\n        assert(isNumber(value))\n        timingProps.offset = value\n      } else {\n        timingProps.offset = rawTimingProps.offset\n      }\n    }\n    if ('stagger' in rawTimingProps) {\n      if (isString(rawTimingProps.stagger)) {\n        const value = cxt.prop(rawTimingProps.stagger)\n        assert(isNumber(value))\n        timingProps.stagger = value\n      } else {\n        timingProps.stagger = rawTimingProps.stagger\n      }\n    }\n    if ('yoyo' in rawTimingProps) {\n      let value = rawTimingProps.yoyo\n      if (isString(value)) {\n        value = cxt.prop(value)\n      }\n      if (isBoolean(value)) {\n        timingProps.yoyo = { repeat: 1, delay: 0 }\n      } else {\n        assert(isObject(value), `Yoyo must be an object. Got ${value}. At ${JSON.stringify(spec)}`)\n        const yoyo = {...value}\n        if ('repeat' in yoyo && isString(yoyo.repeat)) {\n          const value = cxt.prop(yoyo.repeat)\n          assert(isNumber(value), `Yoyo repeat must be a number. Got ${value}. At ${JSON.stringify(spec)}`)\n          yoyo.repeat = value\n        }\n        if ('delay' in yoyo && isString(yoyo.delay)) {\n          const value = cxt.prop(yoyo.delay)\n          assert(isNumber(value), `Yoyo delay must be a number. Got ${value}. At ${JSON.stringify(spec)}`)\n          yoyo.delay = value\n        }\n        timingProps.yoyo = Object.assign({repeat: 1, delay: 0}, yoyo)\n      }\n    }\n    if ('reverse' in rawTimingProps) {\n      if (isString(rawTimingProps.reverse)) {\n        const value = cxt.prop(rawTimingProps.reverse)\n        assert(isBoolean(value))\n        timingProps.reverse = value\n      } else {\n        timingProps.reverse = rawTimingProps.reverse\n      }\n    }\n    const timing = Timing.build(timingProps)\n\n    let result\n    if (\"ref\" in spec) {\n      // a single ref animation\n      const ref = spec.ref\n      const props = Object.assign({}, spec, {\n        id: spec.id,\n        target,\n        timing,\n      })\n      // for each key in props\n      for (const key of Object.keys(props)) {\n        let value = props[key]\n        if (isString(value)) {\n          value = this.tryParamReplace(cxt, value)\n          props[key] = value\n        }\n      }\n      result = Ref(ref, props)\n\n    } else if (\"sync\" in spec) {\n      assert(isArray(spec.sync), `Sync must be an array. Got ${spec.sync}. At ${spec}`)\n      const animations = spec.sync.map((item, idx) => {\n        return cxt.withProcessPath(() => this.visitAniUnit(cxt, item),\n            'sync', idx)\n      })\n      result = Sync({\n        id: spec.id,\n        target,\n        timing,\n        animations,\n      })\n\n    } else if (\"concat\" in spec) {\n      assert(isArray(spec.concat), `Concat must be an array. Got ${spec.concat}. At ${spec}`)\n      const animations = spec.concat.map((item, idx) => {\n        return cxt.withProcessPath(() => this.visitAniUnit(cxt, item),\n            'concat', idx)\n      })\n      result = Concat({\n        id: spec.id,\n        target,\n        timing,\n        animations,\n      } as z.input<typeof ConcatPropSchema>)\n\n    } else if (\"child\" in spec) {\n      let child = spec.child\n      if (isString(child)) {\n        child = this.tryParamReplace(cxt, child)\n      }\n      const animation = cxt.withProcessPath(() => this.visitAniUnit(cxt, child), 'child')\n      result = Sync({\n        id: spec.id,\n        target,\n        timing,\n        animations: [animation],\n      })\n\n    } else if ('foreach' in spec) {\n      const props: z.input<typeof ForeachPropSchema> = {\n        id: spec.id,\n        target,\n        timing,\n      }\n      let foreach = spec.foreach\n      if (isString(foreach)) {\n        foreach = this.tryParamReplace(cxt, foreach)\n      }\n      props.animation = cxt.withProcessPath(() => this.visitAniUnit(cxt, foreach), 'foreach')\n      // groupBy\n      if ('groupBy' in spec) {\n        let groupBy = spec.groupBy\n        groupBy = this.tryParamReplace(cxt, groupBy)\n        props.groupBy = groupBy\n      }\n      // start\n      if ('start' in spec) {\n        let start = spec.start\n        start = this.tryParamReplace(cxt, start)\n        props.start = start\n      }\n      result = new ForeachAnimation(props)\n\n    } else {\n      throw ParseError.buildWithPath(cxt.getProcessPath(),\n          \"Unknown animation definition spec.\")\n    }\n\n    JsonSpecParser.logger.debug(`Parse result:\\n${toTreeString(result)}`)\n    return result\n  }\n\n  public visitTarget(cxt: ParseContext, spec: TargetSpec): Target {\n    const transforms: Transform[] = []\n    if (typeof spec === \"string\") {\n      // default transform is filter\n      const filter = this.tryParamReplace(cxt, spec)\n      assert(isString(filter), `Param value of filter must be a string. Got ${filter}. At ${spec}`)\n      const trans = new FilterTransform(filter)\n      transforms.push(trans)\n    } else if (spec instanceof Array) {\n      for (const item of spec) {\n        const trans = this.createTransform(cxt, item)\n        transforms.push(trans)\n      }\n    } else if (spec == null) {\n      // do nothing\n    } else if (typeof spec === 'object') {\n      const trans = this.createTransform(cxt, spec as TransformSpec)\n      transforms.push(trans)\n    } else {\n      throw ParseError.buildWithPath(cxt.getProcessPath(),\n          \"Unknown target transform spec.\")\n    }\n    return Target.build(transforms)\n  }\n\n  createTransform(cxt: ParseContext, tran: TransformSpec): Transform {\n    if ('filter' in tran) {\n      const filter = this.tryParamReplace(cxt, tran.filter)\n      assert(isString(filter), `Param value of filter must be a string. Got ${filter}. At ${JSON.stringify(tran)}`)\n      return new FilterTransform(filter)\n\n    } else if ('selectAll' in tran) {\n      const selectAll = this.tryParamReplace(cxt, tran.selectAll)\n      assert(isString(selectAll), `Param value of selectAll must be a string. Got ${selectAll}. At ${JSON.stringify(tran)}`)\n      return new SelectAllTransform(selectAll)\n\n    } else if ('select' in tran) {\n      const select = this.tryParamReplace(cxt, tran.select)\n      assert(isString(select), `Param value of select must be a string. Got ${select}. At ${JSON.stringify(tran)}`)\n      return new SelectTransform(select)\n\n    } else if ('filterExpr' in tran) {\n      const filterExpr = this.tryParamReplace(cxt, tran.filterExpr)\n      assert(isString(filterExpr), `Param value of filterExpr must be a string. Got ${filterExpr}. At ${JSON.stringify(tran)}`)\n      return new FilterExprTransform(filterExpr)\n\n    } else if ('sortBy' in tran) {\n      const sortBy = this.tryParamReplace(cxt, tran.sortBy)\n      assert(isString(sortBy), `Param value of sortBy must be a string. Got ${sortBy}. At ${JSON.stringify(tran)}`)\n      let order = tran.order\n      if (isString(order)) {\n        const resultOrder = this.tryParamReplace(cxt, order)\n        assert(resultOrder === 'asc' || resultOrder === 'desc',\n            'Only support \"asc\" or \"desc\" for order param.')\n        order = resultOrder\n      } else if (isArray(order)) {\n        // do nothing\n      } else {\n        order = 'asc'\n      }\n      return new SortTransform(sortBy, order)\n\n    } else if ('slice' in tran) {\n      let slice = tran.slice\n      if (isString(slice)) {\n        const value = cxt.prop(slice)\n        assert(isArray(value), `Slice param must be an array. Got ${value}. At ${slice}`)\n        slice = value\n      }\n      if (isArray(slice)) {\n        // each them might be number, string (need replace), or null\n        for (let i = 0; i < slice.length; i++) {\n          let item = slice[i]\n          if (isString(item)) {\n            item = this.tryParamReplace(cxt, item)\n            slice[i] = item\n          }\n        }\n      }\n      const [start, end, step] = slice\n      assert(isNumber(start), `Slice start must be a number. Got ${start}. At ${slice}`)\n      assert(end == null || isNumber(end), `Slice end must be a number or null. Got ${end}. At ${slice}`)\n      assert(step == null || isNumber(step), `Slice step must be a number or null. Got ${step}. At ${slice}`)\n      return new SliceTransform(start, end as (number | null), step as (number | null))\n\n    } else if ('at' in tran) {\n      let index = tran.at\n      if (isString(index)) {\n        const value = cxt.prop(index)\n        assert(isNumber(value))\n        index = value\n      }\n      assert(isNumber(index), `At index must be a number. Got ${index}. At ${tran}`)\n      return new AtTransform(index)\n\n    } else if ('groupBy' in tran) {\n      const groupBy = this.tryParamReplace(cxt, tran.groupBy)\n      assert(isString(groupBy), `Param value of groupBy must be a string. Got ${groupBy}. At ${JSON.stringify(tran)}`)\n      return new GroupTransform(groupBy)\n    }\n\n    throw ParseError.buildWithPath(cxt.getProcessPath(),\n        \"Unknown target transform spec.\\n\" + JSON.stringify(tran))\n  }\n\n  private tryParamReplace(cxt: ParseContext, str: string): any {\n    let result = str\n    if (str.startsWith('$')) {\n      result = cxt.prop(str)\n    } else if (str.includes('$')) {\n      // get all $xxx but not \\$xxx\n      const matches = str.match(/(?<!\\\\)\\$[a-zA-Z0-9_]+/g)\n      if (matches) {\n        for (const match of matches) {\n          const value = cxt.prop(match)\n          assert(isString(value) || isBoolean(value) || isNumber(value), `Param value of a string placeholder must be a string, boolean or number. Got ${value}. At ${str}`)\n          result = result.replace(match, String(value))\n        }\n      }\n    }\n    if (isString(result)) {\n      // change \\$ to $ and \\\\ to \\\n      result = result.replace(/\\\\\\$/g, '$').replace(/\\\\\\\\/g, '\\\\')\n    }\n    return result\n  }\n\n  public parseBinder(spec: BinderSpec, cxt?: ParseContext): Binder {\n    JsonSpecParser.logger.debug('Parse binder\\n', JSON.stringify(spec, null, 2))\n\n    cxt = cxt ?? new ParseContext()\n\n    const result = BinderSpec.safeParse(spec)\n    if (result.success === false) {\n      throw ParseError.buildWithPath(cxt.getProcessPath(), 'Paring binder. Error: ' + result.error.message)\n    }\n    const parsed = result.data\n\n    JsonSpecParser.logger.debug('Parsed binder result\\n', JSON.stringify(parsed, null, 2))\n\n    const rules = parsed.rules.map((rule, idx) => {\n      return cxt.withProcessPath(() => {\n        if (rule.id != null) {\n          // only this case we have a single binder\n          return BinderRule.buildSingleBind({\n            from: rule.from,\n            to: rule.to,\n            id: rule.id,\n            classList: rule.classList,\n            data: rule.data\n          })\n        }\n        return BinderRule.buildBatchBind({\n          from: rule.from,\n          to: rule.to,\n          classList: rule.classList,\n          data: rule.data,\n          dataList: rule.dataList\n        })\n      }, 'rules', idx)\n    })\n\n    return Binder.build(parsed.from, parsed.to, rules)\n  }\n}\n","import {BaseLogicalAniType} from \"@/core/ast/animation/logical/LogicalAnimation\"\nimport {BaseContext} from \"@/common/rule/BaseContext\"\n\nexport abstract class ResolveRule {\n  readonly ruleName: string\n\n  protected constructor(ruleName: string) {\n    this.ruleName = ruleName\n  }\n\n  abstract apply(cxt: BaseContext, input: BaseLogicalAniType): BaseLogicalAniType\n}\n","import {BaseAniPropSchema, LogicalAnimation} from \"@/core/ast/animation/logical/LogicalAnimation\"\nimport {UnaryAnimation} from \"@/core/ast/animation/logical/UnaryAnimation\"\nimport {AryAnimation} from \"@/core/ast/animation/logical/AryAnimation\"\nimport {LeafAnimation} from \"@/core/ast/animation/logical/LeafAnimation\"\nimport {ResolveError} from \"@/core/utils/error/ResolveError\"\n\nfunction preorderTraversal(animation: LogicalAnimation<BaseAniPropSchema>,\n                           func: ((node: LogicalAnimation<BaseAniPropSchema>) => boolean)) {\n  preorderTraversalHelper(animation, func)\n}\n\nfunction preorderTraversalHelper(node: LogicalAnimation<BaseAniPropSchema>,\n                                 func: ((node: LogicalAnimation<BaseAniPropSchema>) => boolean)): boolean {\n  const fastStop = func(node)\n  if (fastStop) {\n    return true\n  }\n  if (node instanceof UnaryAnimation) {\n    return preorderTraversalHelper(node.child, func)\n  } else if (node instanceof AryAnimation) {\n    for (const child of node.children) {\n      const childFastStop = preorderTraversalHelper(child, func)\n      if (childFastStop) {\n        return true\n      }\n    }\n    return false\n  } else if (node instanceof LeafAnimation) {\n    return false\n  }\n  throw ResolveError.build(\"Fail to call traversal function on an unknown animation.\")\n}\n\n\nfunction postorderTraversal(animation: LogicalAnimation<BaseAniPropSchema>,\n                            func: ((node: LogicalAnimation<BaseAniPropSchema>) => boolean)) {\n  postorderTraversalHelper(animation, func)\n}\n\nfunction postorderTraversalHelper(node: LogicalAnimation<BaseAniPropSchema>,\n                                  func: ((node: LogicalAnimation<BaseAniPropSchema>) => boolean)): boolean {\n  let fastStop = false\n\n  if (node instanceof UnaryAnimation) {\n    fastStop = postorderTraversalHelper(node.child, func)\n  } else if (node instanceof AryAnimation) {\n    for (const child of node.children) {\n      const childFastStop = postorderTraversalHelper(child, func)\n      if (childFastStop) {\n        fastStop = true\n        break\n      }\n    }\n  } else if (node instanceof LeafAnimation) {\n    // do nothing\n  } else {\n    throw ResolveError.build(\"Fail to call traversal function on an unknown animation.\")\n  }\n\n  if (fastStop) {\n    return true\n  }\n  return func(node)\n}\n\n\nfunction transformDown(animation: LogicalAnimation<BaseAniPropSchema>,\n                       func: ((node: LogicalAnimation<BaseAniPropSchema>) => LogicalAnimation<BaseAniPropSchema>)): LogicalAnimation<BaseAniPropSchema> {\n  return transformDownHelper(null, animation, func)\n}\n\nfunction transformDownHelper(parent: LogicalAnimation<BaseAniPropSchema>,\n                             node: LogicalAnimation<BaseAniPropSchema>,\n                             func: ((node: LogicalAnimation<BaseAniPropSchema>) => LogicalAnimation<BaseAniPropSchema>)): LogicalAnimation<BaseAniPropSchema> {\n  const newNode = func(node)\n\n  // transform down if it has children / child\n  if (newNode instanceof UnaryAnimation) {\n    const newChild = transformDownHelper(newNode, newNode.child, func)\n    if (newChild !== newNode.child) {\n      newNode.replace(newChild)\n    }\n  } else if (newNode instanceof AryAnimation) {\n    for (const child of newNode.children) {\n      const newChild = transformDownHelper(newNode, child, func)\n      if (newChild !== child) {\n        newNode.replace(child, newChild)\n      }\n    }\n  }\n\n  return newNode\n}\n\n\nexport const LogicalAnimationUtils = {\n  preorderTraversal,\n  postorderTraversal,\n  transformDown,\n}\n","import {BaseAniPropSchema, BaseLogicalAniType} from \"@/core/ast/animation/logical/LogicalAnimation\"\nimport {ResolveRule} from \"@/core/exec/resolve/ResolveRule\"\nimport {RefAnimation} from \"@/core/ast/animation/logical/impl/RefAnimation\"\nimport {ResolveContext} from \"../ResolveContext\"\nimport {LogicalAnimationUtils} from \"@/core/ast/animation/logical/utils/LogicalAnimationUtils\"\nimport {LoggerManager} from \"@/core/utils/Logger\"\nimport assert from \"assert\"\n\nexport class ResolveRef extends ResolveRule {\n  private static readonly logger = LoggerManager.getLogger(\"ResolveRef\")\n\n  constructor() {\n    super(\"ResolveRef\")\n  }\n\n  apply(cxt: ResolveContext<unknown, unknown>, input: BaseLogicalAniType): BaseLogicalAniType {\n    return LogicalAnimationUtils.transformDown(input, node => {\n      if (!(node instanceof RefAnimation)) return node\n\n      let cur = node\n      let result = null\n\n      // eslint-disable-next-line no-constant-condition\n      while(true) {\n        const template = cxt.templateLibrary.get(cur.ref)\n        if (template === undefined) {\n          throw new Error(`Template ${cur.ref} not found in the library.`)\n        }\n        ResolveRef.logger.debug(`Resolving ref ${cur.ref} to ${template.fullName}`)\n        const animation = template.create(cxt, cur.refProps())\n        animation.setSrc(cur as RefAnimation<BaseAniPropSchema>, template)\n        ResolveRef.logger.debug(`Instantiated animation ${animation.fullName} with props ${JSON.stringify(cur.refProps())}`)\n\n        if (!(animation instanceof RefAnimation)) {\n          result = animation\n          break\n        }\n\n        cur = animation as RefAnimation<BaseAniPropSchema>\n      }\n\n      assert(result !== null)\n      return result\n    })\n  }\n}\n","import {CompileExec} from \"@/session/CompileExec\"\nimport {TemplateLibrary} from \"@/core/library/TemplateLibrary\"\nimport {TargetModel} from \"@/core/ast/target/TargetModel\"\n\nexport class ResolveContext<ObjType, AniType> {\n  CHECK_PARAMETERS = true\n\n  config = {\n    defaultDuration: 1,\n  }\n\n  compileExec: CompileExec<ObjType, AniType>\n\n  constructor(compileExec: CompileExec<ObjType, AniType>) {\n    this.compileExec = compileExec\n  }\n\n  get templateLibrary(): TemplateLibrary {\n    return this.compileExec.templateLibrary\n  }\n\n  get targetModel(): TargetModel<ObjType> {\n    return this.compileExec.targetModel\n  }\n}\n","import {TargetModel, VirtualElementType} from \"@/core/ast/target/TargetModel\"\nimport {isFunction, isString} from \"lodash\"\nimport {LoggerManager} from \"@/core/utils/Logger\"\n\nexport type PredFunc = (vNode: VirtualElementType, idx: number, vNodes: VirtualElementType[]) => boolean\nexport type SortFunc = (vNode1: VirtualElementType, vNode2: VirtualElementType) => number\n\nexport type KeyType = string | number | boolean\nexport type MapFunc = (vNode: VirtualElementType, idx: number, vNodes: VirtualElementType[]) => KeyType\nexport type GroupCreator = (targetModel: TargetModel<unknown>, group: VirtualElementType[], key: KeyType) => VirtualElementType\n\nexport class TargetSelection {\n  private static readonly logger = LoggerManager.getLogger('TargetSelection')\n\n  public static readonly DEFAULT_GROUP_CREATOR: GroupCreator = (targetModel, groups, key) => {\n    const group = targetModel.createVirtualGroup('Any', '', [], {key})\n    for (const g of groups) {\n      const newEl = g.cloneNode(true) as VirtualElementType\n      Object.assign(newEl, {data: g.data})\n      group.append(newEl)\n    }\n    return group\n  }\n\n  readonly elements: VirtualElementType[] = null   // the collection of group/element\n  readonly targetModel: TargetModel<unknown>\n  readonly parent: TargetSelection\n\n  private _realElements: unknown[] = null\n\n  constructor(elements: VirtualElementType[],\n              targetModel: TargetModel<unknown>,\n              parent: TargetSelection = null) {\n    this.elements = elements\n    this.targetModel = targetModel\n    this.parent = parent\n  }\n\n  select(selector: string): TargetSelection {\n    for (const vElParent of this.elements) {\n      const child = vElParent.querySelector<VirtualElementType>(selector)\n      if (child != null) {\n        return new TargetSelection([child], this.targetModel, this)\n      }\n    }\n    return new TargetSelection([], this.targetModel, this)\n  }\n\n  selectAll(selector: string): TargetSelection {\n    const childVElGroups = this.elements\n        .map(g => Array.from(g.querySelectorAll<VirtualElementType>(selector)))\n        .flat()\n    return new TargetSelection(childVElGroups, this.targetModel, this)\n  }\n\n  filter(selector: string): TargetSelection\n  filter(predicate: PredFunc): TargetSelection\n  filter(selectorOrPredicate: string | PredFunc): TargetSelection {\n\n    TargetSelection.logger.trace(\"Filtering selection with \"\n        + (typeof selectorOrPredicate === 'function' ? '[native function]' : selectorOrPredicate)\n        + \".\\n Parent selection:\\n\"\n        + this.toString())\n\n    let childVNodes: VirtualElementType[] = null\n\n    if (isString(selectorOrPredicate)) {\n      // is selector\n      childVNodes = this.elements.filter(g => g.matches(selectorOrPredicate))\n    } else if (isFunction(selectorOrPredicate)) {\n      // is predicate function\n      childVNodes = this.elements.filter((g, idx) => selectorOrPredicate(g, idx, this.elements))\n    } else {\n      throw new Error(`predicate must be a string or a function, but got ${selectorOrPredicate}`)\n    }\n\n    const result = new TargetSelection(childVNodes, this.targetModel, this)\n    TargetSelection.logger.trace(`Filtering result: ${result.toString()}`)\n    return result\n  }\n\n  sort(comparator: SortFunc): TargetSelection {\n    const newGroups = this.elements.slice().sort(comparator)\n    return new TargetSelection(newGroups, this.targetModel, this)\n  }\n\n  slice(start: number, end: number | null = null, step: number | null = null): TargetSelection {\n    // a slice implementation like python\n    // check null\n    if (end == null) {\n      end = this.elements.length\n    }\n    if (step == null) {\n      step = 1\n    }\n    // check negative index\n    if (start < 0) {\n      start = this.elements.length + start\n    }\n    if (end < 0) {\n      end = this.elements.length + end\n    }\n    // check out of range\n    if (start < 0 || start >= this.elements.length) {\n      throw new Error(`Start index ${start} out of range. Collection size is ${this.elements.length}. At Selection(${this.toString()})`)\n    }\n    if (end < 0 || end > this.elements.length) {\n      throw new Error(`End index ${end} out of range. Collection size is ${this.elements.length}. At Selection(${this.toString()})`)\n    }\n    // check step\n    if (step === 0) {\n      throw new Error(`Step cannot be zero. At ${this}`)\n    }\n    // check step and start/end\n    if (step > 0) {\n      if (start > end) {\n        throw new Error(`Start index ${start} is larger than end index ${end}. At ${this}`)\n      }\n    } else {\n      if (start < end) {\n        throw new Error(`Start index ${start} is smaller than end index ${end}. At ${this}`)\n      }\n    }\n    // slice\n    const newGroups = []\n    for (let i = start; i < end; i += step) {\n      newGroups.push(this.elements[i])\n    }\n    return new TargetSelection(newGroups, this.targetModel, this)\n  }\n\n  group(mapper: MapFunc, creator: GroupCreator = TargetSelection.DEFAULT_GROUP_CREATOR): TargetSelection {\n    const groupMap = new Map<string | number | boolean, VirtualElementType[]>()\n    this.elements.forEach((group, idx) => {\n      const key = mapper(group, idx, this.elements)\n      if (!groupMap.has(key)) {\n        groupMap.set(key, [])\n      }\n      groupMap.get(key).push(group)\n    })\n    // console.log('>>>', this.elements, groupMap)\n    const newGroups = []\n    for (const [key, groupList] of groupMap) {\n      // create a new group element whose children are elements in groupList\n      const newGroup = creator(this.targetModel, groupList, key)\n      newGroups.push(newGroup)\n    }\n    return new TargetSelection(newGroups, this.targetModel, this)\n  }\n\n  get size(): number {\n    return this.elements.length\n  }\n\n  get realElements(): unknown[] {\n    if (this._realElements == null) {\n      this._realElements = this.elements.map(e => this.targetModel.getRealElementByVNode(e))\n    }\n    return this._realElements\n  }\n\n  toString(): string {\n    return this.elements.map(group => `${group.tagName}#${group.id}`).join(', ')\n  }\n}\n","import {BaseLogicalAniType, LogicalAnimation} from \"@/core/ast/animation/logical/LogicalAnimation\"\nimport {ResolveRule} from \"@/core/exec/resolve/ResolveRule\"\nimport {ResolveContext} from \"@/core/exec/resolve/ResolveContext\"\nimport {LogicalAnimationUtils} from \"@/core/ast/animation/logical/utils/LogicalAnimationUtils\"\nimport {UnaryAnimation} from \"@/core/ast/animation/logical/UnaryAnimation\"\nimport {AryAnimation} from \"@/core/ast/animation/logical/AryAnimation\"\nimport {LeafAnimation} from \"@/core/ast/animation/logical/LeafAnimation\"\nimport {LoggerManager} from \"@/core/utils/Logger\"\nimport assert from \"assert\"\nimport {GroupTransform} from \"@/core/ast/target/trans/GroupTransform\"\nimport {TargetSelection} from \"@/core/ast/target/TargetSelection\"\nimport {VirtualElementType} from \"@/core/ast/target/TargetModel\"\n\n/**\n * Resolves target and set target selection for all animations.\n *\n * Grouping operations (e.g., group) should be processed before it.\n */\nexport class ResolveTarget extends ResolveRule {\n  private static readonly logger = LoggerManager.getLogger(\"ResolveTarget\")\n\n  constructor() {\n    super(\"ResolveTarget\")\n  }\n\n  apply(cxt: ResolveContext<unknown, unknown>, input: LogicalAnimation<any>): LogicalAnimation<any> {\n    const model = cxt.targetModel\n\n    let sel = model.rootSelection\n    for (const trans of input.target.transforms) {\n      const newSel = trans.execute(sel)\n      ResolveTarget.logger.trace(`Converting [${sel}] to [${newSel}]`)\n      sel = newSel\n    }\n    input.target.selection = sel\n    ResolveTarget.logger.debug(`Execute ${input.target.transforms.length} transform(s), for ROOT -> ${input}, `\n        + `converting [${model.rootSelection}] to [${sel}]`)\n\n    LogicalAnimationUtils.preorderTraversal(input, (node: BaseLogicalAniType) => {\n      if (node instanceof UnaryAnimation) {\n        this.applyTransform(node as BaseLogicalAniType, node.child)\n      } else if (node instanceof AryAnimation) {\n        if (node.foreachSrc != null) {\n          this.applyTransformForeach(node as AryAnimation<any>)\n        } else {\n          for (const child of node.children) {\n            this.applyTransform(node as BaseLogicalAniType, child)\n          }\n        }\n      } else if (node instanceof LeafAnimation) {\n        // do nothing\n      }\n      return false\n    })\n\n    return input\n  }\n\n  applyTransform(parent: BaseLogicalAniType, child: BaseLogicalAniType) {\n    let sel = parent.target.selection\n    for (const trans of child.target.transforms) {\n      const newSel = trans.execute(sel)\n      ResolveTarget.logger.trace(`${trans} executed, converting [${sel}] to [${newSel}]`)\n      sel = newSel\n    }\n    ResolveTarget.logger.debug(`Execute ${child.target.transforms.length} transform(s) for ${parent} -> ${child}, `\n        + `converting [${parent.target.selection}] to [${sel}]`)\n    child.target.selection = sel\n  }\n\n  applyTransformForeach(parent: AryAnimation<any>) {\n    const {groupBy} = parent.foreachSrc.props()\n    const stagger = parent.foreachSrc.timing.stagger ?? 0\n\n    assert(parent.children.length === 1, `${parent} should have only one child from Foreach animation.`)\n    const resolved = parent.children[0]   // this animation's ref is resolved\n\n    // generate initial sel\n    const initialSel = parent.target.selection\n\n    // split it by groupBy\n    const groupTransform = new GroupTransform(groupBy)\n    const groupSel = groupTransform.execute(initialSel)\n\n    // generate animations\n    const selections = []\n    for (const groupEl of groupSel.elements) {\n      const elements = groupEl.querySelectorAll<VirtualElementType>(':scope > *')\n      // set sel as the parent instead of groupEl\n      const newSel = new TargetSelection(Array.from(elements), groupSel.targetModel, initialSel)\n      selections.push(newSel)\n    }\n    const animations = selections.map((sel, i) => {\n      const newResolved = resolved.clone()\n      newResolved.timing.offset = stagger * i\n      return newResolved\n    })\n\n    // replace\n    parent.setChildren(animations)\n\n    // apply transform\n    for (let i = 0; i < parent.children.length; i++) {\n      const child = parent.children[i]\n      let sel = selections[i]\n      for (const trans of child.target.transforms) {\n        const newSel = trans.execute(sel)\n        ResolveTarget.logger.trace(`${trans} executed, converting [${sel}] to [${newSel}]`)\n        sel = newSel\n      }\n      ResolveTarget.logger.debug(`Split group and execute ${child.target.transforms.length} transform(s) for ${parent} -> ${child}, `\n          + `converting [${selections[i]}] to [${sel}]`)\n      child.target.selection = sel\n    }\n\n    // console.log('resolve target', parent.target.selection, groupSel, selections, animations)\n  }\n}\n","import {BaseLogicalAniType} from \"@/core/ast/animation/logical/LogicalAnimation\"\nimport {ResolveRule} from \"@/core/exec/resolve/ResolveRule\"\nimport {ResolveContext} from \"@/core/exec/resolve/ResolveContext\"\nimport {LogicalAnimationUtils} from \"@/core/ast/animation/logical/utils/LogicalAnimationUtils\"\nimport assert from \"assert\"\nimport {LoggerManager} from \"@/core/utils/Logger\"\nimport {toTreeString} from \"@/core/utils/TreeUtils\"\n\n/**\n * Resolves time settings for all animations.\n */\nexport class ResolveTiming extends ResolveRule {\n  private static readonly logger = LoggerManager.getLogger(\"ResolveTiming\")\n\n  constructor() {\n    super(\"ResolveTiming\")\n  }\n\n  apply(cxt: ResolveContext<unknown, unknown>, input: BaseLogicalAniType): BaseLogicalAniType {\n    LogicalAnimationUtils.postorderTraversal(input, node => {\n      // todo: check sync and concat offset here\n\n      const duration = node.computeDuration(cxt)\n      assert(duration >= 0, `Original duration must be non-negative, `\n          + `but got ${duration} in ${node}:\\n${toTreeString(node)}`)\n      const totalDuration = node.computeTotalDuration(cxt)\n      node.computedDuration = duration\n      node.computedTotalDuration = totalDuration\n\n      const givenDuration = node.timing.duration\n      if (givenDuration != null && givenDuration != totalDuration && totalDuration !== 0) {\n        // need rescale\n        ResolveTiming.logger.debug(`Rescaling ${node} from ${totalDuration} to ${givenDuration}`)\n        node.rescale(cxt, givenDuration / totalDuration)\n      }\n\n      return false  // not to stop\n    })\n\n    // if (node.timing.duration == null && forceDuration == null) {\n    //   this.finalDuration = this.originalDuration\n    // } else if (forceDuration == null || this.timing.duration == null) {\n    //   // use given duration or forceDuration which is not nul.\n    //   const finalDuration = this.timing.duration ?? forceDuration\n    //   // rescale children\n    //   const rate = finalDuration / this.originalDuration\n    //\n    // } else {\n    //   // this.timing.duration != null && forceDuration != null\n    //   throw new Error(`Cannot set both duration and forceDuration (given by parent) in ${this}. Please use only one of them.`)\n    // }\n\n    return input\n  }\n}\n","import {BaseLogicalAniType} from \"@/core/ast/animation/logical/LogicalAnimation\"\nimport {ResolveRule} from \"@/core/exec/resolve/ResolveRule\"\nimport {ResolveContext} from \"../ResolveContext\"\nimport {LogicalAnimationUtils} from \"@/core/ast/animation/logical/utils/LogicalAnimationUtils\"\nimport {LoggerManager} from \"@/core/utils/Logger\"\nimport {ForeachAnimation} from \"@/core/ast/animation/logical/impl/ForeachAnimation\"\nimport {Sync} from \"@/core/ast/animation/logical/impl/SyncAnimation\"\nimport {Concat} from \"@/core/ast/animation/logical/impl/ConcatAnimation\"\n\n/**\n * Replace all ForeachAnimation to Sync or Concat.\n */\nexport class ResolveForeach extends ResolveRule {\n  private static readonly logger = LoggerManager.getLogger(\"ResolveForeach\")\n\n  constructor() {\n    super(\"ResolveForeach\")\n  }\n\n  apply(cxt: ResolveContext<unknown, unknown>, input: BaseLogicalAniType): BaseLogicalAniType {\n    return LogicalAnimationUtils.transformDown(input, node => {\n      if (!(node instanceof ForeachAnimation)) return node\n\n      const start = node.props().start\n\n      // don't copy stagger\n      const timing = node.timing.clone()\n      timing.stagger = null\n\n      let newNode\n      const props = {\n        id: node.id,\n        target: node.target.clone(),\n        timing: timing,\n        animations: [node.child.clone()],\n      }\n      if (start === 'with prev') {\n        newNode = Sync(props)\n      } else if (start === 'after prev') {\n        newNode = Concat(props)\n      }\n      newNode.setForeachSrc(node)\n      newNode.setSrc(node.refSrc, node.templateSrc)\n\n      ResolveForeach.logger.trace(`Transformed ${node} to ${newNode}`)\n\n      return newNode\n    })\n  }\n}\n","import {BaseLogicalAniType} from \"@/core/ast/animation/logical/LogicalAnimation\"\nimport {ResolveRule} from \"@/core/exec/resolve/ResolveRule\"\nimport {ResolveRef} from \"@/core/exec/resolve/rules/ResolveRef\"\nimport {ResolveContext} from \"@/core/exec/resolve/ResolveContext\"\nimport {Logger, LoggerManager} from \"@/core/utils/Logger\"\nimport {ResolveTarget} from \"@/core/exec/resolve/rules/ResolveTarget\"\nimport {CompileExec} from \"@/session/CompileExec\"\nimport {ResolveTiming} from \"@/core/exec/resolve/rules/ResolveTiming\"\nimport {toTreeString} from \"@/core/utils/TreeUtils\"\nimport {ResolveForeach} from \"@/core/exec/resolve/rules/ResolveForeach\"\n\nexport class Resolver<ObjType, AniType> {\n  private static readonly logger: Logger = LoggerManager.getLogger('Resolver')\n\n  readonly compileExec: CompileExec<ObjType, AniType>\n  readonly extraRules: ResolveRule[]\n\n  constructor(compileExec: CompileExec<ObjType, AniType>, extraRules: ResolveRule[] = []) {\n    this.compileExec = compileExec\n    this.extraRules = extraRules\n  }\n\n  getDefaultBatch(): ResolveRule[] {\n    return [\n      new ResolveRef(),\n      new ResolveForeach(),\n      new ResolveTarget(),\n      new ResolveTiming(),\n    ]\n  }\n\n  getBatch(): ResolveRule[] {\n    return this.getDefaultBatch().concat(this.extraRules)\n  }\n\n  execute(input: BaseLogicalAniType): BaseLogicalAniType {\n    Resolver.logger.info('Start resolve. Input logical animation:\\n' + toTreeString(input))\n\n    const resolveContext = new ResolveContext(this.compileExec)\n    let animation = input\n    for (const rule of this.getBatch()) {\n      animation = rule.apply(resolveContext, animation)\n      Resolver.logger.trace(`Applying rule ${rule.ruleName}:\\n${toTreeString(animation)}`)\n    }\n\n    Resolver.logger.info('End resolve. Final logical animation:\\n' + toTreeString(animation))\n    return animation\n  }\n}\n","import getPrototypeOf from \"./getPrototypeOf.js\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n  return object;\n}","import superPropBase from \"./superPropBase.js\";\nexport default function _get() {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get.bind();\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n      if (desc.get) {\n        return desc.get.call(arguments.length < 3 ? target : receiver);\n      }\n      return desc.value;\n    };\n  }\n  return _get.apply(this, arguments);\n}","import {CompileExec} from \"@/session/CompileExec\"\nimport {TargetModel} from \"@/core/ast/target/TargetModel\"\n\nexport class SynthesisContext<ObjType, AniType> {\n  readonly compileExec: CompileExec<ObjType, AniType>\n\n  constructor(compileExec: CompileExec<ObjType, AniType>) {\n    this.compileExec = compileExec\n  }\n\n  get targetModel(): TargetModel<ObjType> {\n    return this.compileExec.targetModel\n  }\n}\n","import {BaseLogicalAniType} from \"@/core/ast/animation/logical/LogicalAnimation\"\nimport {Logger, LoggerManager} from \"@/core/utils/Logger\"\nimport {CompileExec} from \"@/session/CompileExec\"\nimport {PhysicalAnimation} from \"@/core/ast/animation/physical/PhysicalAnimation\"\nimport {SynthesisRule} from \"@/core/exec/synthesis/SynthesisRule\"\nimport {toTreeString} from \"@/core/utils/TreeUtils\"\nimport {SynthesisContext} from \"@/core/exec/synthesis/SynthesisContext\"\n\n\nexport abstract class Synthesizer<ObjType, AniType> {\n  private static readonly logger: Logger = LoggerManager.getLogger('Synthesizer')\n\n  readonly compileExec: CompileExec<ObjType, AniType>\n  readonly extraRules: SynthesisRule<ObjType, BaseLogicalAniType, AniType>[]\n\n  protected constructor(compileExec: CompileExec<ObjType, AniType>,\n                        extraRules: SynthesisRule<ObjType, BaseLogicalAniType, AniType>[] = []) {\n    this.compileExec = compileExec\n    this.extraRules = extraRules\n  }\n\n  getDefaultRules(): SynthesisRule<ObjType, BaseLogicalAniType, AniType>[] {\n    return []\n  }\n\n  getRuleMap(): Map<string, SynthesisRule<ObjType, BaseLogicalAniType, AniType>> {\n    const rules = this.getDefaultRules().concat(this.extraRules)\n    const map = new Map()\n    for (const rule of rules) {\n      if (map.has(rule.targetName)) {\n        throw new Error(`Rule target name conflict: ${rule.targetName}`)\n      }\n      map.set(rule.targetName, rule)\n    }\n    return map\n  }\n\n  plan(input: BaseLogicalAniType): PhysicalAnimation<ObjType, BaseLogicalAniType, AniType> {\n    Synthesizer.logger.info('Start planning. Input logical animation:\\n' + toTreeString(input))\n    const ruleMap = this.getRuleMap()\n\n    const cxt = new SynthesisContext(this.compileExec)\n\n    const physicalAnimation = this.transformUp(input, (node) => {\n      const rule = ruleMap.get(node.fullName)\n      if (rule === undefined) {\n        throw new Error(`Failed to find implementation of animation class ${node.fullName}. Reason: No rule found.`)\n      }\n      const newNode = rule.apply(cxt, node)\n      Synthesizer.logger.debug(`Synthesized ${node.fullName} to ${newNode.constructor.name}`)\n      return newNode\n    })\n    Synthesizer.logger.info('End planning. Final physical animation:\\n' + toTreeString(physicalAnimation))\n\n    return physicalAnimation\n  }\n\n  generate(physical: PhysicalAnimation<ObjType, BaseLogicalAniType, AniType>): AniType {\n    const cxt = new SynthesisContext(this.compileExec)\n    return physical.generate(cxt)\n  }\n\n  transformUp(root: BaseLogicalAniType, func: ((node: BaseLogicalAniType) => PhysicalAnimation<ObjType, BaseLogicalAniType, AniType>)): PhysicalAnimation<ObjType, BaseLogicalAniType, AniType> {\n    return this.transformUpHelper(root, func)\n  }\n\n  transformUpHelper(node: BaseLogicalAniType, func: ((node: BaseLogicalAniType) => PhysicalAnimation<ObjType, BaseLogicalAniType, AniType>)): PhysicalAnimation<ObjType, BaseLogicalAniType, AniType> {\n    const physicalAnimation = func(node)\n    physicalAnimation.children = []\n    for (const child of node.visitChildren()) {\n      const newChild = this.transformUpHelper(child, func)\n      physicalAnimation.children.push(newChild)\n    }\n    return physicalAnimation\n  }\n}\n","import {BaseLogicalAniType} from \"@/core/ast/animation/logical/LogicalAnimation\"\nimport {PhysicalAnimation} from \"@/core/ast/animation/physical/PhysicalAnimation\"\nimport {SynthesisContext} from \"@/core/exec/synthesis/SynthesisContext\"\n\nexport abstract class SynthesisRule<ObjType, LogicalAniType extends BaseLogicalAniType, AniType> {\n  readonly ruleName: string\n  readonly targetName: string\n\n  protected constructor(ruleName: string, targetName: string) {\n    this.ruleName = ruleName\n    this.targetName = targetName\n  }\n\n  abstract apply(cxt: SynthesisContext<ObjType, AniType>, input: LogicalAniType): PhysicalAnimation<ObjType, LogicalAniType, AniType> | null\n}\n","import {SynthesisRule} from \"@/core/exec/synthesis/SynthesisRule\"\nimport {SynthesisContext} from \"@/core/exec/synthesis/SynthesisContext\"\nimport {PhysicalAnimation} from \"@/core/ast/animation/physical/PhysicalAnimation\"\nimport {BaseAniPropSchema, LogicalAnimation} from \"@/core/ast/animation/logical/LogicalAnimation\"\n\ninterface PhysicalAnimationConstructor<ObjType, LogicalAniType extends LogicalAnimation<BaseAniPropSchema>, AniType> {\n  new(logical: LogicalAniType): PhysicalAnimation<ObjType, LogicalAniType, AniType>\n}\n\n/**\n * Rule that mapping logical animation to physical animation\n */\nexport class MappingRule<ObjType, LogicalAniType extends LogicalAnimation<BaseAniPropSchema>, AniType>\n  extends SynthesisRule<ObjType, LogicalAniType, AniType> {\n\n  readonly physicalAnimationClass: PhysicalAnimationConstructor<ObjType, LogicalAniType, AniType>\n\n  constructor(targetName: string,\n              physicalAnimationClass: PhysicalAnimationConstructor<ObjType, LogicalAniType, AniType>) {\n    super(\"MappingRule\", targetName)\n    this.physicalAnimationClass = physicalAnimationClass\n  }\n\n  apply(cxt: SynthesisContext<ObjType, AniType>, input: LogicalAniType): PhysicalAnimation<ObjType, LogicalAniType, AniType> | null {\n    return new this.physicalAnimationClass(input)\n  }\n}\n","import {BaseLogicalAniType, LogicalAnimation} from \"@/core/ast/animation/logical/LogicalAnimation\"\nimport {SynthesisContext} from \"@/core/exec/synthesis/SynthesisContext\"\nimport {z} from \"zod\"\nimport {TreeLike} from \"@/core/utils/TreeUtils\"\n\nexport abstract class PhysicalAnimation<ObjType, LogicalAniType extends LogicalAnimation<any>, AniType> implements TreeLike {\n  private readonly _logical: LogicalAniType\n\n  children: PhysicalAnimation<ObjType, BaseLogicalAniType, AniType>[]\n\n  constructor(logical: LogicalAniType) {\n    this._logical = logical\n  }\n\n  get logical(): LogicalAniType {\n    return this._logical\n  }\n\n  get duration(): number {\n    return this._logical.computedDuration\n  }\n\n  get totalDuration(): number {\n    return this._logical.computedTotalDuration\n  }\n\n  get stagger(): number | null {\n    return this._logical.timing.stagger\n  }\n\n  get yoyo(): {repeat: number, delay: number} | null {\n    return this._logical.timing.yoyo\n  }\n\n  get reverse(): boolean {\n    return this._logical.timing.reverse\n  }\n\n  get elements(): ObjType[] {\n    return this._logical.target.selection.realElements as ObjType[]\n  }\n\n  props(): z.infer<LogicalAniType['propSchema']> {\n    return this._logical.props()\n  }\n\n  prop<K extends keyof z.infer<LogicalAniType['propSchema']>>(key: K): z.infer<LogicalAniType['propSchema']>[K] {\n    return this._logical.prop(key)\n  }\n\n  generate(cxt: SynthesisContext<ObjType, AniType>): AniType {\n    return this.doGenerate(cxt)\n  }\n\n  abstract doGenerate(cxt: SynthesisContext<ObjType, AniType>): AniType\n\n  toString(): string {\n    return `PhysicalAnimation ${this._logical.toString()}`\n  }\n\n  toOneLineString(): string {\n    return `PhysicalAnimation ${this._logical.toOneLineString()}`\n  }\n\n  visitChildren(): TreeLike[] {\n    return this.children\n  }\n}\n\n","import {BaseAniPropSchema, LogicalAnimation} from \"@/core/ast/animation/logical/LogicalAnimation\"\nimport {PhysicalAnimation} from \"@/core/ast/animation/physical/PhysicalAnimation\"\nimport {LeafAnimation} from \"@/core/ast/animation/logical/LeafAnimation\"\nimport {LoggerManager} from \"@/core/utils/Logger\"\n\nexport type GsapAnimation = gsap.core.Animation\n\nexport abstract class GsapPhysicalAnimation<ObjType, LogicalAniType extends LogicalAnimation<BaseAniPropSchema>>\n  extends PhysicalAnimation<ObjType, LogicalAniType, GsapAnimation> {\n\n  private readonly logger\n\n  constructor(logical: LogicalAniType) {\n    super(logical)\n    this.logger = LoggerManager.getLogger(\"GsapPhysicalAnimation\")\n  }\n\n  protected mergeDuration(vars: gsap.TweenVars | gsap.TimelineVars = {}): gsap.TweenVars | gsap.TimelineVars {\n    return this.mergeVars(vars, {duration: true, yoyo: false, reverse: false})\n  }\n\n  protected mergeYoyo(vars: gsap.TweenVars | gsap.TimelineVars = {}): gsap.TweenVars | gsap.TimelineVars {\n    return this.mergeVars(vars, {duration: false, yoyo: true, reverse: false})\n  }\n\n  /**\n   * Merge the timing settings with the given vars\n   *\n   * @param vars\n   * @param options\n   * @protected\n   */\n  protected mergeVars(vars: gsap.TweenVars | gsap.TimelineVars = {},\n                      options: {duration: boolean, yoyo: boolean, reverse: boolean} = {duration: true, yoyo: true, reverse: true}\n  ): gsap.TweenVars | gsap.TimelineVars {\n    const {duration, yoyo, reverse} = options\n\n    const _vars: gsap.TweenVars = { }\n\n    if (duration) {\n      _vars.duration = this.duration\n    }\n\n    // if (this.stagger != null) {\n    //   _vars.stagger = this.stagger\n    //   if (!(this.logical instanceof LeafAnimation)) {\n    //     this.logger.warn(`Stagger is not supported for non-leaf animation ${this.logical} in gsap implementation.`)\n    //   }\n    // }\n\n    if (yoyo && this.yoyo != null) {\n      _vars.yoyo = true\n      _vars.repeat = this.yoyo.repeat\n      _vars.repeatDelay = this.yoyo.delay\n      if (!(this.logical instanceof LeafAnimation)) {\n        this.logger.warn(`Yoyo is not supported for non-leaf animation ${this.logical} in gsap implementation.`)\n      }\n    }\n\n    if (reverse && this.reverse) {\n      _vars.runBackwards = true\n      this.logger.warn(`Reverse is not supported in gsap implementation.`)\n    }\n\n    return Object.assign(_vars, vars)\n  }\n}\n\n","import {gsap} from \"gsap\"\nimport {SynthesisContext} from \"@/core/exec/synthesis/SynthesisContext\"\nimport {GsapAnimation, GsapPhysicalAnimation} from \"@/preset/gsap/GsapPhysicalAnimation\"\nimport {SyncAnimation} from \"@/core/ast/animation/logical/impl/SyncAnimation\"\n\nexport class SyncImpl extends GsapPhysicalAnimation<any, SyncAnimation> {\n  doGenerate(cxt: SynthesisContext<any, GsapAnimation>): GsapAnimation {\n    const offsets = this.logical.offsets\n    const children = this.children\n\n    const tl = gsap.timeline()\n    children.forEach((child, i) => {\n      const subTl = child.generate(cxt)\n      if (subTl === null) {\n        return\n      }\n      tl.add(subTl, offsets[i])\n    })\n\n    Object.assign(tl.vars, this.mergeVars())\n\n    return tl\n  }\n}\n\n","import {gsap} from \"gsap\"\nimport {SynthesisContext} from \"@/core/exec/synthesis/SynthesisContext\"\nimport {GsapAnimation, GsapPhysicalAnimation} from \"@/preset/gsap/GsapPhysicalAnimation\"\nimport {SyncAnimation} from \"@/core/ast/animation/logical/impl/SyncAnimation\"\n\nexport class ConcatImpl extends GsapPhysicalAnimation<any, SyncAnimation> {\n  doGenerate(cxt: SynthesisContext<any, GsapAnimation>): GsapAnimation {\n    const offsets = this.logical.offsets\n    const children = this.children\n\n    const tl = gsap.timeline(this.mergeVars() as gsap.TimelineVars)\n    children.forEach((child, i) => {\n      const subTl = child.generate(cxt)\n      if (subTl === null) {\n        return\n      }\n      tl.add(subTl, '>' + offsets[i])\n    })\n\n    return tl\n  }\n}\n\n","import {gsap} from \"gsap\"\nimport {SynthesisContext} from \"@/core/exec/synthesis/SynthesisContext\"\nimport {GsapAnimation, GsapPhysicalAnimation} from \"@/preset/gsap/GsapPhysicalAnimation\"\nimport {EffectAnimation} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {CustomPropSchema} from \"@/preset/template/common/CustomTemplate\"\n\n\nexport class CustomImpl extends GsapPhysicalAnimation<SVGElement, EffectAnimation<typeof CustomPropSchema>> {\n  doGenerate(cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // target\n    const elements = this.elements\n    // timing\n    const stagger = this.stagger\n\n    const tl = gsap.timeline()\n    elements.forEach((el, i) => {\n      tl.add(this.createTw(el, cxt), i === 0 ? 0 : ('<' + stagger))\n    })\n    return tl\n  }\n\n  createTw(el: SVGElement, cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // effect\n    const {attr, from, to, ease} = this.props()\n\n    let type\n    if (from != null && to != null) {\n      type = 'fromTo'\n    } else if (from != null) {\n      type = 'from'\n    } else if (to != null) {\n      type = 'to'\n    } else {\n      throw new Error('CustomImpl: Attribute \"from\" or \"to\" must be specified at least one.')\n    }\n\n    let tw: GsapAnimation\n\n    const vars = this.mergeVars({ease})\n    switch (type) {\n      case 'fromTo':\n        tw = gsap.fromTo(el, {[attr]: from}, {...vars, [attr]: to})\n        break\n      case 'from':\n        tw = gsap.from(el, {...vars, [attr]: from})\n        break\n      case 'to':\n        tw = gsap.to(el, {...vars, [attr]: to})\n        break\n      default:\n        // never goes here as type is checked\n        throw new Error(`Unknown type: ${type}`)\n    }\n\n    return tw\n  }\n}\n\n","import {gsap} from \"gsap\"\nimport {SynthesisContext} from \"@/core/exec/synthesis/SynthesisContext\"\nimport {GsapAnimation, GsapPhysicalAnimation} from \"@/preset/gsap/GsapPhysicalAnimation\"\nimport {EffectAnimation} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {BaseSVGTargetModel} from \"@/core/ast/target/impl/svg/BaseSVGTargetModel\"\nimport {EmptyPropSchema} from \"@/preset/template/common/EmptyTemplate\"\n\n\nexport class EmptyImpl extends GsapPhysicalAnimation<SVGElement, EffectAnimation<typeof EmptyPropSchema>> {\n  doGenerate(cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // target\n    const elements = this.elements\n    // timing\n    const stagger = this.stagger\n\n    const tl = gsap.timeline()\n    elements.forEach((el, i) => {\n      tl.add(this.createTw(cxt), i === 0 ? 0 : ('<' + stagger))\n    })\n    return tl\n  }\n\n  createTw(cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    const model = cxt.targetModel as BaseSVGTargetModel\n    const dummyEl = model.getDummyEl()\n\n    const vars = this.mergeVars()\n    return gsap.fromTo(dummyEl, {opacity: 0}, {opacity: 1, ...vars})\n  }\n}\n\n","import {gsap} from \"gsap\"\nimport {SynthesisContext} from \"@/core/exec/synthesis/SynthesisContext\"\nimport {GsapAnimation, GsapPhysicalAnimation} from \"@/preset/gsap/GsapPhysicalAnimation\"\nimport {EffectAnimation} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {FadePropSchema} from \"@/preset/template/common/FadeTemplate\"\n\n\nexport class FadeImpl extends GsapPhysicalAnimation<SVGElement, EffectAnimation<typeof FadePropSchema>> {\n  doGenerate(cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // target\n    const elements = this.elements\n    // timing\n    const stagger = this.stagger\n\n    const tl = gsap.timeline()\n    elements.forEach((el, i) => {\n      tl.add(this.createTw(el, cxt), i === 0 ? 0 : ('<' + stagger))\n    })\n    return tl\n  }\n\n  createTw(el: SVGElement, cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // effect\n    const {type, ease} = this.props()\n\n    let tw: GsapAnimation\n\n    const vars = this.mergeVars({ease})\n    switch (type) {\n      case 'in':\n        tw = gsap.fromTo(el, {opacity: 0}, {...vars, opacity: 1})\n        break\n      case 'out':\n        tw = gsap.fromTo(el, {opacity: 1}, {...vars, opacity: 0})\n        break\n      default:\n        // never goes here as type is checked by zod\n        throw new Error(`Unknown type: ${type}`)\n    }\n\n    return tw\n  }\n}\n\n","export function getPosition(svg: SVGSVGElement, element: SVGGraphicsElement) {\n  const rootPoint = svg.createSVGPoint()\n  const ctm = element.getCTM()\n  const elPoint = rootPoint.matrixTransform(ctm)\n  return {x: elPoint.x, y: elPoint.y}\n}\n\nexport function getSvgBox(svg: SVGSVGElement, element: SVGGraphicsElement) {\n  const {x: posX, y: posY} = getPosition(svg, element)\n  const {x: boxX, y: boxY, width, height} = element.getBBox()\n\n  const x = posX + boxX\n  const y = posY + boxY\n\n  // we don't need to consider text-anchor because getBBox already considers it\n  // if (element.nodeName === 'text') {\n  //   switch (element.getAttribute(\"text-anchor\")) {\n  //     case \"start\":\n  //       // start at left bottom corner\n  //       y = y - height * 0.75\n  //       break\n  //     case \"end\":\n  //       // start at right bottom corner\n  //       x = x - width\n  //       y = y - height * 0.75\n  //       break\n  //     case \"middle\":\n  //       // start at middle bottom\n  //       x = x - width / 2\n  //       y = y - height * 0.75\n  //       break\n  //     default:\n  //       break\n  //   }\n  // }\n\n  return { x, y, width, height, }\n}\n\nexport function createOrGetG(svg: SVGSVGElement, el: SVGGraphicsElement, id: string, classList: string[] = []) {\n  if (svg.querySelector(`#${id}`)) {\n    const g = svg.querySelector(`#${id}`) as SVGGElement\n    classList.forEach(clazz => {\n      if (!g.classList.contains(clazz)) {\n        g.classList.add(clazz)\n      }\n    })\n    return g\n  }\n  return createG(el, id, classList)\n}\n\nexport function createG(el: SVGGraphicsElement, id: string, classList: string[] = []) {\n  // create <g> element out of the given element\n  const g = document.createElementNS('http://www.w3.org/2000/svg', 'g')\n  g.setAttribute('id', id)\n  g.setAttribute('class', classList.join(' '))\n  el.parentNode.insertBefore(g, el)\n  g.appendChild(el)\n  return g\n}\n\nexport function getRelativeBox(el: SVGGraphicsElement) {\n  const {height, width} = el.getBBox()\n  const strokeWidth = getStrokeWidth(el)\n  return {\n    height,\n    width,\n    strokeWidth,\n    totalHeight: height + strokeWidth * 2,\n    totalWidth: width + strokeWidth * 2,\n    left: -strokeWidth,\n    top: -strokeWidth,\n    right: width + strokeWidth,\n    bottom: height + strokeWidth,\n  }\n}\n\nfunction getStrokeWidth(el: SVGGraphicsElement): number {\n  let strokeWidth = parseInt(el.getAttribute('stroke-width') ?? '0')\n  // recursively get max stroke-width from children\n  if (el.children.length) {\n    Array.from(el.children).forEach((child) => {\n      const childStrokeWidth = getStrokeWidth(child as SVGGraphicsElement)\n      if (childStrokeWidth > strokeWidth) {\n        strokeWidth = childStrokeWidth\n      }\n    })\n  }\n  return strokeWidth\n}\n\n/* cite: https://greensock.com/forums/topic/17566-create-a-radial-wipe/?tab=comments#comment-79421 */\nexport function getArcPath(cx: number, cy: number, rx: number, ry: number, startAngle: number, sweepAngle: number) {\n  // 0 degrees, no path\n  if (!sweepAngle) return `M${cx} ${cy}`\n\n  // mod angles to 360 degrees\n  startAngle %= 360\n  sweepAngle %= 360\n\n  // If arc is 360 degrees, the sweep angle is 0 due to mod\n  const isClosed = sweepAngle === 0\n\n  // If closed, we'll need to use 2 arcs with an angle of 180 degrees\n  if (isClosed) {\n    sweepAngle = 180\n  }\n\n  // Make angle positive to simplify large arc flag\n  if (sweepAngle < 0) {\n    sweepAngle += 360\n  }\n\n  const largeArc = sweepAngle > 180 ? 1 : 0\n\n  // Convert degrees to radians\n  const a1 = (startAngle * Math.PI) / 180\n  const a2 = ((startAngle + sweepAngle) * Math.PI) / 180\n\n  // Calculate start and end coords for arc. Starts at 12 o'clock\n  const x1 = cx + rx * Math.sin(a1)\n  const y1 = cy - ry * Math.cos(a1)\n\n  const x2 = cx + rx * Math.sin(a2)\n  const y2 = cy - ry * Math.cos(a2)\n\n  /*\n  NOTE: To orient the starting point to 3 o'clock instead of 12 o'clock,\n  add 90 degrees to the start angle, or change the code above to this...\n\n  var x1 = cx + rx * Math.cos(a1);\n  var y1 = cy + ry * Math.sin(a1);\n\n  var x2 = cx + rx * Math.cos(a2);\n  var y2 = cy + ry * Math.sin(a2);\n  */\n\n  // Related demo using arc path\n  // https://codepen.io/osublake/pen/VbWKMj/\n  if (isClosed) {\n    return `\n      M ${x1} ${y1}\n      A ${rx} ${ry} 0 1 1 ${x2} ${y2}\n      A ${rx} ${ry} 0 1 1 ${x1} ${y1}z`\n  }\n\n  return `\n    M ${x1} ${y1}\n    A ${rx} ${ry} 0 ${largeArc} 1 ${x2} ${y2}\n    L ${cx} ${cy}z`\n}\n","import {gsap} from \"gsap\"\nimport {SynthesisContext} from \"@/core/exec/synthesis/SynthesisContext\"\nimport {GsapAnimation, GsapPhysicalAnimation} from \"@/preset/gsap/GsapPhysicalAnimation\"\nimport {EffectAnimation} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {WipePropSchema} from \"@/preset/template/common/WipeTemplate\"\nimport {getRelativeBox} from \"@/core/utils/SvgUtils\"\n\n\nexport class WipeImpl extends GsapPhysicalAnimation<SVGElement, EffectAnimation<typeof WipePropSchema>> {\n  doGenerate(cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    const tl = gsap.timeline()\n    const stagger: number = this.stagger\n    this.elements.forEach((el, i) => {\n      const tw = this.createTw(el)\n      const position = i === 0 ? 0 : ('<' + stagger)\n      tl.add(tw, position)\n    })\n\n    return tl\n  }\n\n  createTw(el: SVGElement): GsapAnimation {\n    const {type, from, ease} = this.props()\n\n    const {left, top, right, bottom, totalWidth, totalHeight} = getRelativeBox(el as SVGGraphicsElement)\n    const [[ltx, lty], [rtx, rty], [lbx, lby], [rbx, rby]] = this.getOffsetFactorMatrix(from)\n    const vars = this.mergeVars({ease})\n\n    let tw: GsapAnimation\n\n    const hiddenClipPath = `polygon(`\n        + `${ltx * totalWidth + left}px ${lty * totalHeight + top}px, `\n        + `${rtx * totalWidth + right}px ${rty * totalHeight + top}px, `\n        + `${rbx * totalWidth + right}px ${rby * totalHeight + bottom}px, `\n        + `${lbx * totalWidth + left}px ${lby * totalHeight + bottom}px)`\n    const shownClipPath = `polygon(${left}px ${top}px, ${right}px ${top}px, ${right}px ${bottom}px, ${left}px ${bottom}px)`\n\n    switch (type) {\n      case 'in':\n        tw = gsap.fromTo(el, { clipPath: hiddenClipPath }, { clipPath: shownClipPath, ...vars })\n        break\n      case 'out':\n        tw = gsap.fromTo(el, { clipPath: shownClipPath }, { clipPath: hiddenClipPath, ...vars })\n        break\n      default:\n        // never goes here as type is checked by zod\n        throw new Error(`Unknown type: ${type}`)\n    }\n\n    return tw\n  }\n\n\n  /**\n   * @param from top, bottom, left, right\n   * @return widthFactor, heightFactor for each point (-1, 0, 1)\n   */\n  getOffsetFactorMatrix(from: string): number[][] {\n    switch (from) {\n      case 'top':\n        return [\n          [0, 0], [0, 0],     // left top, right top\n          [0, -1], [0, -1],   // left bottom, right bottom\n        ]\n      case 'bottom':\n        return [\n          [0, 1], [0, 1],\n          [0, 0], [0, 0],\n        ]\n      case 'left':\n        return [\n          [0, 0], [-1, 0],\n          [0, 0], [-1, 0],\n        ]\n      case 'right':\n        return [\n          [1, 0], [0, 0],\n          [1, 0], [0, 0],\n        ]\n      default:\n        throw new Error(`Wrong value of from: ${from}. Must be 'top', 'bottom', 'left' or 'right'. At ${this}`)\n    }\n  }\n}\n\n","import {gsap} from \"gsap\"\nimport {SynthesisContext} from \"@/core/exec/synthesis/SynthesisContext\"\nimport {GsapAnimation, GsapPhysicalAnimation} from \"@/preset/gsap/GsapPhysicalAnimation\"\nimport {EffectAnimation} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {MovePropSchema} from \"@/preset/template/common/MoveTemplate\"\nimport {BaseSVGTargetModel} from \"@/core/ast/target/impl/svg/BaseSVGTargetModel\"\n\n\nexport class MoveImpl extends GsapPhysicalAnimation<SVGElement, EffectAnimation<typeof MovePropSchema>> {\n  doGenerate(cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // target\n    const elements = this.elements\n    // timing\n    const stagger = this.stagger\n\n    const tl = gsap.timeline()\n    elements.forEach((el, i) => {\n      tl.add(this.createTw(el, cxt), i === 0 ? 0 : ('<' + stagger))\n    })\n    return tl\n  }\n\n  createTw(el: SVGElement, cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // effect\n    const {from, to, ease} = this.props()\n\n    // save original box because it changes the position\n    const model = cxt.targetModel as BaseSVGTargetModel\n    model.saveOriginalBox(el as SVGGraphicsElement)\n\n    let tw: GsapAnimation\n\n    if (from != null && to != null) {\n      const fromVars = {...from}\n      const toVars = this.mergeYoyo(this.mergeDuration({...to, ease}))\n      tw = gsap.fromTo(el, fromVars, toVars)\n\n    } else if (from != null) {\n      const fromVars = this.mergeYoyo(this.mergeDuration({...from, ease}))\n      tw = gsap.from(el, fromVars)\n\n    } else if (to != null) {\n      const toVars = this.mergeYoyo(this.mergeDuration({...to, ease}))\n      tw = gsap.to(el, toVars)\n\n    } else {\n      throw new Error(`Either from or to must be specified for ${this}`)\n    }\n\n    return tw\n  }\n}\n\n","import {gsap} from \"gsap\"\nimport {SynthesisContext} from \"@/core/exec/synthesis/SynthesisContext\"\nimport {GsapAnimation, GsapPhysicalAnimation} from \"@/preset/gsap/GsapPhysicalAnimation\"\nimport {EffectAnimation} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {ZoomPropSchema} from \"@/preset/template/common/ZoomTemplate\"\n\n\nexport class ZoomImpl extends GsapPhysicalAnimation<SVGElement, EffectAnimation<typeof ZoomPropSchema>> {\n  doGenerate(cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // target\n    const elements = this.elements\n    // timing\n    const stagger = this.stagger\n\n    const tl = gsap.timeline()\n    elements.forEach((el, i) => {\n      tl.add(this.createTw(el, cxt), i === 0 ? 0 : ('<' + stagger))\n    })\n    return tl\n  }\n\n  createTw(el: SVGElement, cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // effect\n    const {type, ease} = this.props()\n\n    let tw\n\n    // stagger here won't take effect as this is a single element\n    const vars = this.mergeYoyo(this.mergeDuration({scale: 0, transformOrigin: 'center center', ease}))\n    switch (type) {\n      case 'in': tw = gsap.from(el, vars); break\n      case 'out': tw = gsap.to(el, vars); break\n      default: throw new Error(`Wrong value of type: ${type}. Must be 'in' or 'out'. At ${this}`)\n    }\n\n    return tw\n  }\n}\n\n","/*!\n * paths 3.12.2\n * https://greensock.com\n *\n * Copyright 2008-2023, GreenSock. All rights reserved.\n * Subject to the terms at https://greensock.com/standard-license or for\n * Club GreenSock members, the agreement issued with that membership.\n * @author: Jack Doyle, jack@greensock.com\n*/\n\n/* eslint-disable */\nvar _svgPathExp = /[achlmqstvz]|(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[0-9]/ig,\n    _numbersExp = /(?:(-)?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)[0-9]/ig,\n    _scientific = /[\\+\\-]?\\d*\\.?\\d+e[\\+\\-]?\\d+/ig,\n    _selectorExp = /(^[#\\.][a-z]|[a-y][a-z])/i,\n    _DEG2RAD = Math.PI / 180,\n    _RAD2DEG = 180 / Math.PI,\n    _sin = Math.sin,\n    _cos = Math.cos,\n    _abs = Math.abs,\n    _sqrt = Math.sqrt,\n    _atan2 = Math.atan2,\n    _largeNum = 1e8,\n    _isString = function _isString(value) {\n  return typeof value === \"string\";\n},\n    _isNumber = function _isNumber(value) {\n  return typeof value === \"number\";\n},\n    _isUndefined = function _isUndefined(value) {\n  return typeof value === \"undefined\";\n},\n    _temp = {},\n    _temp2 = {},\n    _roundingNum = 1e5,\n    _wrapProgress = function _wrapProgress(progress) {\n  return Math.round((progress + _largeNum) % 1 * _roundingNum) / _roundingNum || (progress < 0 ? 0 : 1);\n},\n    //if progress lands on 1, the % will make it 0 which is why we || 1, but not if it's negative because it makes more sense for motion to end at 0 in that case.\n_round = function _round(value) {\n  return Math.round(value * _roundingNum) / _roundingNum || 0;\n},\n    _roundPrecise = function _roundPrecise(value) {\n  return Math.round(value * 1e10) / 1e10 || 0;\n},\n    _splitSegment = function _splitSegment(rawPath, segIndex, i, t) {\n  var segment = rawPath[segIndex],\n      shift = t === 1 ? 6 : subdivideSegment(segment, i, t);\n\n  if (shift && shift + i + 2 < segment.length) {\n    rawPath.splice(segIndex, 0, segment.slice(0, i + shift + 2));\n    segment.splice(0, i + shift);\n    return 1;\n  }\n},\n    _getSampleIndex = function _getSampleIndex(samples, length, progress) {\n  // slightly slower way than doing this (when there's no lookup): segment.lookup[progress < 1 ? ~~(length / segment.minLength) : segment.lookup.length - 1] || 0;\n  var l = samples.length,\n      i = ~~(progress * l);\n\n  if (samples[i] > length) {\n    while (--i && samples[i] > length) {}\n\n    i < 0 && (i = 0);\n  } else {\n    while (samples[++i] < length && i < l) {}\n  }\n\n  return i < l ? i : l - 1;\n},\n    _reverseRawPath = function _reverseRawPath(rawPath, skipOuter) {\n  var i = rawPath.length;\n  skipOuter || rawPath.reverse();\n\n  while (i--) {\n    rawPath[i].reversed || reverseSegment(rawPath[i]);\n  }\n},\n    _copyMetaData = function _copyMetaData(source, copy) {\n  copy.totalLength = source.totalLength;\n\n  if (source.samples) {\n    //segment\n    copy.samples = source.samples.slice(0);\n    copy.lookup = source.lookup.slice(0);\n    copy.minLength = source.minLength;\n    copy.resolution = source.resolution;\n  } else if (source.totalPoints) {\n    //rawPath\n    copy.totalPoints = source.totalPoints;\n  }\n\n  return copy;\n},\n    //pushes a new segment into a rawPath, but if its starting values match the ending values of the last segment, it'll merge it into that same segment (to reduce the number of segments)\n_appendOrMerge = function _appendOrMerge(rawPath, segment) {\n  var index = rawPath.length,\n      prevSeg = rawPath[index - 1] || [],\n      l = prevSeg.length;\n\n  if (index && segment[0] === prevSeg[l - 2] && segment[1] === prevSeg[l - 1]) {\n    segment = prevSeg.concat(segment.slice(2));\n    index--;\n  }\n\n  rawPath[index] = segment;\n},\n    _bestDistance;\n/* TERMINOLOGY\n - RawPath - an array of arrays, one for each Segment. A single RawPath could have multiple \"M\" commands, defining Segments (paths aren't always connected).\n - Segment - an array containing a sequence of Cubic Bezier coordinates in alternating x, y, x, y format. Starting anchor, then control point 1, control point 2, and ending anchor, then the next control point 1, control point 2, anchor, etc. Uses less memory than an array with a bunch of {x, y} points.\n - Bezier - a single cubic Bezier with a starting anchor, two control points, and an ending anchor.\n - the variable \"t\" is typically the position along an individual Bezier path (time) and it's NOT linear, meaning it could accelerate/decelerate based on the control points whereas the \"p\" or \"progress\" value is linearly mapped to the whole path, so it shouldn't really accelerate/decelerate based on control points. So a progress of 0.2 would be almost exactly 20% along the path. \"t\" is ONLY in an individual Bezier piece.\n */\n//accepts basic selector text, a path instance, a RawPath instance, or a Segment and returns a RawPath (makes it easy to homogenize things). If an element or selector text is passed in, it'll also cache the value so that if it's queried again, it'll just take the path data from there instead of parsing it all over again (as long as the path data itself hasn't changed - it'll check).\n\n\nexport function getRawPath(value) {\n  value = _isString(value) && _selectorExp.test(value) ? document.querySelector(value) || value : value;\n  var e = value.getAttribute ? value : 0,\n      rawPath;\n\n  if (e && (value = value.getAttribute(\"d\"))) {\n    //implements caching\n    if (!e._gsPath) {\n      e._gsPath = {};\n    }\n\n    rawPath = e._gsPath[value];\n    return rawPath && !rawPath._dirty ? rawPath : e._gsPath[value] = stringToRawPath(value);\n  }\n\n  return !value ? console.warn(\"Expecting a <path> element or an SVG path data string\") : _isString(value) ? stringToRawPath(value) : _isNumber(value[0]) ? [value] : value;\n} //copies a RawPath WITHOUT the length meta data (for speed)\n\nexport function copyRawPath(rawPath) {\n  var a = [],\n      i = 0;\n\n  for (; i < rawPath.length; i++) {\n    a[i] = _copyMetaData(rawPath[i], rawPath[i].slice(0));\n  }\n\n  return _copyMetaData(rawPath, a);\n}\nexport function reverseSegment(segment) {\n  var i = 0,\n      y;\n  segment.reverse(); //this will invert the order y, x, y, x so we must flip it back.\n\n  for (; i < segment.length; i += 2) {\n    y = segment[i];\n    segment[i] = segment[i + 1];\n    segment[i + 1] = y;\n  }\n\n  segment.reversed = !segment.reversed;\n}\n\nvar _createPath = function _createPath(e, ignore) {\n  var path = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\"),\n      attr = [].slice.call(e.attributes),\n      i = attr.length,\n      name;\n  ignore = \",\" + ignore + \",\";\n\n  while (--i > -1) {\n    name = attr[i].nodeName.toLowerCase(); //in Microsoft Edge, if you don't set the attribute with a lowercase name, it doesn't render correctly! Super weird.\n\n    if (ignore.indexOf(\",\" + name + \",\") < 0) {\n      path.setAttributeNS(null, name, attr[i].nodeValue);\n    }\n  }\n\n  return path;\n},\n    _typeAttrs = {\n  rect: \"rx,ry,x,y,width,height\",\n  circle: \"r,cx,cy\",\n  ellipse: \"rx,ry,cx,cy\",\n  line: \"x1,x2,y1,y2\"\n},\n    _attrToObj = function _attrToObj(e, attrs) {\n  var props = attrs ? attrs.split(\",\") : [],\n      obj = {},\n      i = props.length;\n\n  while (--i > -1) {\n    obj[props[i]] = +e.getAttribute(props[i]) || 0;\n  }\n\n  return obj;\n}; //converts an SVG shape like <circle>, <rect>, <polygon>, <polyline>, <ellipse>, etc. to a <path>, swapping it in and copying the attributes to match.\n\n\nexport function convertToPath(element, swap) {\n  var type = element.tagName.toLowerCase(),\n      circ = 0.552284749831,\n      data,\n      x,\n      y,\n      r,\n      ry,\n      path,\n      rcirc,\n      rycirc,\n      points,\n      w,\n      h,\n      x2,\n      x3,\n      x4,\n      x5,\n      x6,\n      y2,\n      y3,\n      y4,\n      y5,\n      y6,\n      attr;\n\n  if (type === \"path\" || !element.getBBox) {\n    return element;\n  }\n\n  path = _createPath(element, \"x,y,width,height,cx,cy,rx,ry,r,x1,x2,y1,y2,points\");\n  attr = _attrToObj(element, _typeAttrs[type]);\n\n  if (type === \"rect\") {\n    r = attr.rx;\n    ry = attr.ry || r;\n    x = attr.x;\n    y = attr.y;\n    w = attr.width - r * 2;\n    h = attr.height - ry * 2;\n\n    if (r || ry) {\n      //if there are rounded corners, render cubic beziers\n      x2 = x + r * (1 - circ);\n      x3 = x + r;\n      x4 = x3 + w;\n      x5 = x4 + r * circ;\n      x6 = x4 + r;\n      y2 = y + ry * (1 - circ);\n      y3 = y + ry;\n      y4 = y3 + h;\n      y5 = y4 + ry * circ;\n      y6 = y4 + ry;\n      data = \"M\" + x6 + \",\" + y3 + \" V\" + y4 + \" C\" + [x6, y5, x5, y6, x4, y6, x4 - (x4 - x3) / 3, y6, x3 + (x4 - x3) / 3, y6, x3, y6, x2, y6, x, y5, x, y4, x, y4 - (y4 - y3) / 3, x, y3 + (y4 - y3) / 3, x, y3, x, y2, x2, y, x3, y, x3 + (x4 - x3) / 3, y, x4 - (x4 - x3) / 3, y, x4, y, x5, y, x6, y2, x6, y3].join(\",\") + \"z\";\n    } else {\n      data = \"M\" + (x + w) + \",\" + y + \" v\" + h + \" h\" + -w + \" v\" + -h + \" h\" + w + \"z\";\n    }\n  } else if (type === \"circle\" || type === \"ellipse\") {\n    if (type === \"circle\") {\n      r = ry = attr.r;\n      rycirc = r * circ;\n    } else {\n      r = attr.rx;\n      ry = attr.ry;\n      rycirc = ry * circ;\n    }\n\n    x = attr.cx;\n    y = attr.cy;\n    rcirc = r * circ;\n    data = \"M\" + (x + r) + \",\" + y + \" C\" + [x + r, y + rycirc, x + rcirc, y + ry, x, y + ry, x - rcirc, y + ry, x - r, y + rycirc, x - r, y, x - r, y - rycirc, x - rcirc, y - ry, x, y - ry, x + rcirc, y - ry, x + r, y - rycirc, x + r, y].join(\",\") + \"z\";\n  } else if (type === \"line\") {\n    data = \"M\" + attr.x1 + \",\" + attr.y1 + \" L\" + attr.x2 + \",\" + attr.y2; //previously, we just converted to \"Mx,y Lx,y\" but Safari has bugs that cause that not to render properly when using a stroke-dasharray that's not fully visible! Using a cubic bezier fixes that issue.\n  } else if (type === \"polyline\" || type === \"polygon\") {\n    points = (element.getAttribute(\"points\") + \"\").match(_numbersExp) || [];\n    x = points.shift();\n    y = points.shift();\n    data = \"M\" + x + \",\" + y + \" L\" + points.join(\",\");\n\n    if (type === \"polygon\") {\n      data += \",\" + x + \",\" + y + \"z\";\n    }\n  }\n\n  path.setAttribute(\"d\", rawPathToString(path._gsRawPath = stringToRawPath(data)));\n\n  if (swap && element.parentNode) {\n    element.parentNode.insertBefore(path, element);\n    element.parentNode.removeChild(element);\n  }\n\n  return path;\n} //returns the rotation (in degrees) at a particular progress on a rawPath (the slope of the tangent)\n\nexport function getRotationAtProgress(rawPath, progress) {\n  var d = getProgressData(rawPath, progress >= 1 ? 1 - 1e-9 : progress ? progress : 1e-9);\n  return getRotationAtBezierT(d.segment, d.i, d.t);\n}\n\nfunction getRotationAtBezierT(segment, i, t) {\n  var a = segment[i],\n      b = segment[i + 2],\n      c = segment[i + 4],\n      x;\n  a += (b - a) * t;\n  b += (c - b) * t;\n  a += (b - a) * t;\n  x = b + (c + (segment[i + 6] - c) * t - b) * t - a;\n  a = segment[i + 1];\n  b = segment[i + 3];\n  c = segment[i + 5];\n  a += (b - a) * t;\n  b += (c - b) * t;\n  a += (b - a) * t;\n  return _round(_atan2(b + (c + (segment[i + 7] - c) * t - b) * t - a, x) * _RAD2DEG);\n}\n\nexport function sliceRawPath(rawPath, start, end) {\n  end = _isUndefined(end) ? 1 : _roundPrecise(end) || 0; // we must round to avoid issues like 4.15 / 8 = 0.8300000000000001 instead of 0.83 or 2.8 / 5 = 0.5599999999999999 instead of 0.56 and if someone is doing a loop like start: 2.8 / 0.5, end: 2.8 / 0.5 + 1.\n\n  start = _roundPrecise(start) || 0;\n  var loops = Math.max(0, ~~(_abs(end - start) - 1e-8)),\n      path = copyRawPath(rawPath);\n\n  if (start > end) {\n    start = 1 - start;\n    end = 1 - end;\n\n    _reverseRawPath(path);\n\n    path.totalLength = 0;\n  }\n\n  if (start < 0 || end < 0) {\n    var offset = Math.abs(~~Math.min(start, end)) + 1;\n    start += offset;\n    end += offset;\n  }\n\n  path.totalLength || cacheRawPathMeasurements(path);\n  var wrap = end > 1,\n      s = getProgressData(path, start, _temp, true),\n      e = getProgressData(path, end, _temp2),\n      eSeg = e.segment,\n      sSeg = s.segment,\n      eSegIndex = e.segIndex,\n      sSegIndex = s.segIndex,\n      ei = e.i,\n      si = s.i,\n      sameSegment = sSegIndex === eSegIndex,\n      sameBezier = ei === si && sameSegment,\n      wrapsBehind,\n      sShift,\n      eShift,\n      i,\n      copy,\n      totalSegments,\n      l,\n      j;\n\n  if (wrap || loops) {\n    wrapsBehind = eSegIndex < sSegIndex || sameSegment && ei < si || sameBezier && e.t < s.t;\n\n    if (_splitSegment(path, sSegIndex, si, s.t)) {\n      sSegIndex++;\n\n      if (!wrapsBehind) {\n        eSegIndex++;\n\n        if (sameBezier) {\n          e.t = (e.t - s.t) / (1 - s.t);\n          ei = 0;\n        } else if (sameSegment) {\n          ei -= si;\n        }\n      }\n    }\n\n    if (Math.abs(1 - (end - start)) < 1e-5) {\n      eSegIndex = sSegIndex - 1;\n    } else if (!e.t && eSegIndex) {\n      eSegIndex--;\n    } else if (_splitSegment(path, eSegIndex, ei, e.t) && wrapsBehind) {\n      sSegIndex++;\n    }\n\n    if (s.t === 1) {\n      sSegIndex = (sSegIndex + 1) % path.length;\n    }\n\n    copy = [];\n    totalSegments = path.length;\n    l = 1 + totalSegments * loops;\n    j = sSegIndex;\n    l += (totalSegments - sSegIndex + eSegIndex) % totalSegments;\n\n    for (i = 0; i < l; i++) {\n      _appendOrMerge(copy, path[j++ % totalSegments]);\n    }\n\n    path = copy;\n  } else {\n    eShift = e.t === 1 ? 6 : subdivideSegment(eSeg, ei, e.t);\n\n    if (start !== end) {\n      sShift = subdivideSegment(sSeg, si, sameBezier ? s.t / e.t : s.t);\n      sameSegment && (eShift += sShift);\n      eSeg.splice(ei + eShift + 2);\n      (sShift || si) && sSeg.splice(0, si + sShift);\n      i = path.length;\n\n      while (i--) {\n        //chop off any extra segments\n        (i < sSegIndex || i > eSegIndex) && path.splice(i, 1);\n      }\n    } else {\n      eSeg.angle = getRotationAtBezierT(eSeg, ei + eShift, 0); //record the value before we chop because it'll be impossible to determine the angle after its length is 0!\n\n      ei += eShift;\n      s = eSeg[ei];\n      e = eSeg[ei + 1];\n      eSeg.length = eSeg.totalLength = 0;\n      eSeg.totalPoints = path.totalPoints = 8;\n      eSeg.push(s, e, s, e, s, e, s, e);\n    }\n  }\n\n  path.totalLength = 0;\n  return path;\n} //measures a Segment according to its resolution (so if segment.resolution is 6, for example, it'll take 6 samples equally across each Bezier) and create/populate a \"samples\" Array that has the length up to each of those sample points (always increasing from the start) as well as a \"lookup\" array that's broken up according to the smallest distance between 2 samples. This gives us a very fast way of looking up a progress position rather than looping through all the points/Beziers. You can optionally have it only measure a subset, starting at startIndex and going for a specific number of beziers (remember, there are 3 x/y pairs each, for a total of 6 elements for each Bezier). It will also populate a \"totalLength\" property, but that's not generally super accurate because by default it'll only take 6 samples per Bezier. But for performance reasons, it's perfectly adequate for measuring progress values along the path. If you need a more accurate totalLength, either increase the resolution or use the more advanced bezierToPoints() method which keeps adding points until they don't deviate by more than a certain precision value.\n\nfunction measureSegment(segment, startIndex, bezierQty) {\n  startIndex = startIndex || 0;\n\n  if (!segment.samples) {\n    segment.samples = [];\n    segment.lookup = [];\n  }\n\n  var resolution = ~~segment.resolution || 12,\n      inc = 1 / resolution,\n      endIndex = bezierQty ? startIndex + bezierQty * 6 + 1 : segment.length,\n      x1 = segment[startIndex],\n      y1 = segment[startIndex + 1],\n      samplesIndex = startIndex ? startIndex / 6 * resolution : 0,\n      samples = segment.samples,\n      lookup = segment.lookup,\n      min = (startIndex ? segment.minLength : _largeNum) || _largeNum,\n      prevLength = samples[samplesIndex + bezierQty * resolution - 1],\n      length = startIndex ? samples[samplesIndex - 1] : 0,\n      i,\n      j,\n      x4,\n      x3,\n      x2,\n      xd,\n      xd1,\n      y4,\n      y3,\n      y2,\n      yd,\n      yd1,\n      inv,\n      t,\n      lengthIndex,\n      l,\n      segLength;\n  samples.length = lookup.length = 0;\n\n  for (j = startIndex + 2; j < endIndex; j += 6) {\n    x4 = segment[j + 4] - x1;\n    x3 = segment[j + 2] - x1;\n    x2 = segment[j] - x1;\n    y4 = segment[j + 5] - y1;\n    y3 = segment[j + 3] - y1;\n    y2 = segment[j + 1] - y1;\n    xd = xd1 = yd = yd1 = 0;\n\n    if (_abs(x4) < .01 && _abs(y4) < .01 && _abs(x2) + _abs(y2) < .01) {\n      //dump points that are sufficiently close (basically right on top of each other, making a bezier super tiny or 0 length)\n      if (segment.length > 8) {\n        segment.splice(j, 6);\n        j -= 6;\n        endIndex -= 6;\n      }\n    } else {\n      for (i = 1; i <= resolution; i++) {\n        t = inc * i;\n        inv = 1 - t;\n        xd = xd1 - (xd1 = (t * t * x4 + 3 * inv * (t * x3 + inv * x2)) * t);\n        yd = yd1 - (yd1 = (t * t * y4 + 3 * inv * (t * y3 + inv * y2)) * t);\n        l = _sqrt(yd * yd + xd * xd);\n\n        if (l < min) {\n          min = l;\n        }\n\n        length += l;\n        samples[samplesIndex++] = length;\n      }\n    }\n\n    x1 += x4;\n    y1 += y4;\n  }\n\n  if (prevLength) {\n    prevLength -= length;\n\n    for (; samplesIndex < samples.length; samplesIndex++) {\n      samples[samplesIndex] += prevLength;\n    }\n  }\n\n  if (samples.length && min) {\n    segment.totalLength = segLength = samples[samples.length - 1] || 0;\n    segment.minLength = min;\n\n    if (segLength / min < 9999) {\n      // if the lookup would require too many values (memory problem), we skip this and instead we use a loop to lookup values directly in the samples Array\n      l = lengthIndex = 0;\n\n      for (i = 0; i < segLength; i += min) {\n        lookup[l++] = samples[lengthIndex] < i ? ++lengthIndex : lengthIndex;\n      }\n    }\n  } else {\n    segment.totalLength = samples[0] = 0;\n  }\n\n  return startIndex ? length - samples[startIndex / 2 - 1] : length;\n}\n\nexport function cacheRawPathMeasurements(rawPath, resolution) {\n  var pathLength, points, i;\n\n  for (i = pathLength = points = 0; i < rawPath.length; i++) {\n    rawPath[i].resolution = ~~resolution || 12; //steps per Bezier curve (anchor, 2 control points, to anchor)\n\n    points += rawPath[i].length;\n    pathLength += measureSegment(rawPath[i]);\n  }\n\n  rawPath.totalPoints = points;\n  rawPath.totalLength = pathLength;\n  return rawPath;\n} //divide segment[i] at position t (value between 0 and 1, progress along that particular cubic bezier segment that starts at segment[i]). Returns how many elements were spliced into the segment array (either 0 or 6)\n\nexport function subdivideSegment(segment, i, t) {\n  if (t <= 0 || t >= 1) {\n    return 0;\n  }\n\n  var ax = segment[i],\n      ay = segment[i + 1],\n      cp1x = segment[i + 2],\n      cp1y = segment[i + 3],\n      cp2x = segment[i + 4],\n      cp2y = segment[i + 5],\n      bx = segment[i + 6],\n      by = segment[i + 7],\n      x1a = ax + (cp1x - ax) * t,\n      x2 = cp1x + (cp2x - cp1x) * t,\n      y1a = ay + (cp1y - ay) * t,\n      y2 = cp1y + (cp2y - cp1y) * t,\n      x1 = x1a + (x2 - x1a) * t,\n      y1 = y1a + (y2 - y1a) * t,\n      x2a = cp2x + (bx - cp2x) * t,\n      y2a = cp2y + (by - cp2y) * t;\n  x2 += (x2a - x2) * t;\n  y2 += (y2a - y2) * t;\n  segment.splice(i + 2, 4, _round(x1a), //first control point\n  _round(y1a), _round(x1), //second control point\n  _round(y1), _round(x1 + (x2 - x1) * t), //new fabricated anchor on line\n  _round(y1 + (y2 - y1) * t), _round(x2), //third control point\n  _round(y2), _round(x2a), //fourth control point\n  _round(y2a));\n  segment.samples && segment.samples.splice(i / 6 * segment.resolution | 0, 0, 0, 0, 0, 0, 0, 0);\n  return 6;\n} // returns an object {path, segment, segIndex, i, t}\n\nfunction getProgressData(rawPath, progress, decoratee, pushToNextIfAtEnd) {\n  decoratee = decoratee || {};\n  rawPath.totalLength || cacheRawPathMeasurements(rawPath);\n\n  if (progress < 0 || progress > 1) {\n    progress = _wrapProgress(progress);\n  }\n\n  var segIndex = 0,\n      segment = rawPath[0],\n      samples,\n      resolution,\n      length,\n      min,\n      max,\n      i,\n      t;\n\n  if (!progress) {\n    t = i = segIndex = 0;\n    segment = rawPath[0];\n  } else if (progress === 1) {\n    t = 1;\n    segIndex = rawPath.length - 1;\n    segment = rawPath[segIndex];\n    i = segment.length - 8;\n  } else {\n    if (rawPath.length > 1) {\n      //speed optimization: most of the time, there's only one segment so skip the recursion.\n      length = rawPath.totalLength * progress;\n      max = i = 0;\n\n      while ((max += rawPath[i++].totalLength) < length) {\n        segIndex = i;\n      }\n\n      segment = rawPath[segIndex];\n      min = max - segment.totalLength;\n      progress = (length - min) / (max - min) || 0;\n    }\n\n    samples = segment.samples;\n    resolution = segment.resolution; //how many samples per cubic bezier chunk\n\n    length = segment.totalLength * progress;\n    i = segment.lookup.length ? segment.lookup[~~(length / segment.minLength)] || 0 : _getSampleIndex(samples, length, progress);\n    min = i ? samples[i - 1] : 0;\n    max = samples[i];\n\n    if (max < length) {\n      min = max;\n      max = samples[++i];\n    }\n\n    t = 1 / resolution * ((length - min) / (max - min) + i % resolution);\n    i = ~~(i / resolution) * 6;\n\n    if (pushToNextIfAtEnd && t === 1) {\n      if (i + 6 < segment.length) {\n        i += 6;\n        t = 0;\n      } else if (segIndex + 1 < rawPath.length) {\n        i = t = 0;\n        segment = rawPath[++segIndex];\n      }\n    }\n  }\n\n  decoratee.t = t;\n  decoratee.i = i;\n  decoratee.path = rawPath;\n  decoratee.segment = segment;\n  decoratee.segIndex = segIndex;\n  return decoratee;\n}\n\nexport function getPositionOnPath(rawPath, progress, includeAngle, point) {\n  var segment = rawPath[0],\n      result = point || {},\n      samples,\n      resolution,\n      length,\n      min,\n      max,\n      i,\n      t,\n      a,\n      inv;\n\n  if (progress < 0 || progress > 1) {\n    progress = _wrapProgress(progress);\n  }\n\n  segment.lookup || cacheRawPathMeasurements(rawPath);\n\n  if (rawPath.length > 1) {\n    //speed optimization: most of the time, there's only one segment so skip the recursion.\n    length = rawPath.totalLength * progress;\n    max = i = 0;\n\n    while ((max += rawPath[i++].totalLength) < length) {\n      segment = rawPath[i];\n    }\n\n    min = max - segment.totalLength;\n    progress = (length - min) / (max - min) || 0;\n  }\n\n  samples = segment.samples;\n  resolution = segment.resolution;\n  length = segment.totalLength * progress;\n  i = segment.lookup.length ? segment.lookup[progress < 1 ? ~~(length / segment.minLength) : segment.lookup.length - 1] || 0 : _getSampleIndex(samples, length, progress);\n  min = i ? samples[i - 1] : 0;\n  max = samples[i];\n\n  if (max < length) {\n    min = max;\n    max = samples[++i];\n  }\n\n  t = 1 / resolution * ((length - min) / (max - min) + i % resolution) || 0;\n  inv = 1 - t;\n  i = ~~(i / resolution) * 6;\n  a = segment[i];\n  result.x = _round((t * t * (segment[i + 6] - a) + 3 * inv * (t * (segment[i + 4] - a) + inv * (segment[i + 2] - a))) * t + a);\n  result.y = _round((t * t * (segment[i + 7] - (a = segment[i + 1])) + 3 * inv * (t * (segment[i + 5] - a) + inv * (segment[i + 3] - a))) * t + a);\n\n  if (includeAngle) {\n    result.angle = segment.totalLength ? getRotationAtBezierT(segment, i, t >= 1 ? 1 - 1e-9 : t ? t : 1e-9) : segment.angle || 0;\n  }\n\n  return result;\n} //applies a matrix transform to RawPath (or a segment in a RawPath) and returns whatever was passed in (it transforms the values in the array(s), not a copy).\n\nexport function transformRawPath(rawPath, a, b, c, d, tx, ty) {\n  var j = rawPath.length,\n      segment,\n      l,\n      i,\n      x,\n      y;\n\n  while (--j > -1) {\n    segment = rawPath[j];\n    l = segment.length;\n\n    for (i = 0; i < l; i += 2) {\n      x = segment[i];\n      y = segment[i + 1];\n      segment[i] = x * a + y * c + tx;\n      segment[i + 1] = x * b + y * d + ty;\n    }\n  }\n\n  rawPath._dirty = 1;\n  return rawPath;\n} // translates SVG arc data into a segment (cubic beziers). Angle is in degrees.\n\nfunction arcToSegment(lastX, lastY, rx, ry, angle, largeArcFlag, sweepFlag, x, y) {\n  if (lastX === x && lastY === y) {\n    return;\n  }\n\n  rx = _abs(rx);\n  ry = _abs(ry);\n\n  var angleRad = angle % 360 * _DEG2RAD,\n      cosAngle = _cos(angleRad),\n      sinAngle = _sin(angleRad),\n      PI = Math.PI,\n      TWOPI = PI * 2,\n      dx2 = (lastX - x) / 2,\n      dy2 = (lastY - y) / 2,\n      x1 = cosAngle * dx2 + sinAngle * dy2,\n      y1 = -sinAngle * dx2 + cosAngle * dy2,\n      x1_sq = x1 * x1,\n      y1_sq = y1 * y1,\n      radiiCheck = x1_sq / (rx * rx) + y1_sq / (ry * ry);\n\n  if (radiiCheck > 1) {\n    rx = _sqrt(radiiCheck) * rx;\n    ry = _sqrt(radiiCheck) * ry;\n  }\n\n  var rx_sq = rx * rx,\n      ry_sq = ry * ry,\n      sq = (rx_sq * ry_sq - rx_sq * y1_sq - ry_sq * x1_sq) / (rx_sq * y1_sq + ry_sq * x1_sq);\n\n  if (sq < 0) {\n    sq = 0;\n  }\n\n  var coef = (largeArcFlag === sweepFlag ? -1 : 1) * _sqrt(sq),\n      cx1 = coef * (rx * y1 / ry),\n      cy1 = coef * -(ry * x1 / rx),\n      sx2 = (lastX + x) / 2,\n      sy2 = (lastY + y) / 2,\n      cx = sx2 + (cosAngle * cx1 - sinAngle * cy1),\n      cy = sy2 + (sinAngle * cx1 + cosAngle * cy1),\n      ux = (x1 - cx1) / rx,\n      uy = (y1 - cy1) / ry,\n      vx = (-x1 - cx1) / rx,\n      vy = (-y1 - cy1) / ry,\n      temp = ux * ux + uy * uy,\n      angleStart = (uy < 0 ? -1 : 1) * Math.acos(ux / _sqrt(temp)),\n      angleExtent = (ux * vy - uy * vx < 0 ? -1 : 1) * Math.acos((ux * vx + uy * vy) / _sqrt(temp * (vx * vx + vy * vy)));\n\n  isNaN(angleExtent) && (angleExtent = PI); //rare edge case. Math.cos(-1) is NaN.\n\n  if (!sweepFlag && angleExtent > 0) {\n    angleExtent -= TWOPI;\n  } else if (sweepFlag && angleExtent < 0) {\n    angleExtent += TWOPI;\n  }\n\n  angleStart %= TWOPI;\n  angleExtent %= TWOPI;\n\n  var segments = Math.ceil(_abs(angleExtent) / (TWOPI / 4)),\n      rawPath = [],\n      angleIncrement = angleExtent / segments,\n      controlLength = 4 / 3 * _sin(angleIncrement / 2) / (1 + _cos(angleIncrement / 2)),\n      ma = cosAngle * rx,\n      mb = sinAngle * rx,\n      mc = sinAngle * -ry,\n      md = cosAngle * ry,\n      i;\n\n  for (i = 0; i < segments; i++) {\n    angle = angleStart + i * angleIncrement;\n    x1 = _cos(angle);\n    y1 = _sin(angle);\n    ux = _cos(angle += angleIncrement);\n    uy = _sin(angle);\n    rawPath.push(x1 - controlLength * y1, y1 + controlLength * x1, ux + controlLength * uy, uy - controlLength * ux, ux, uy);\n  } //now transform according to the actual size of the ellipse/arc (the beziers were noramlized, between 0 and 1 on a circle).\n\n\n  for (i = 0; i < rawPath.length; i += 2) {\n    x1 = rawPath[i];\n    y1 = rawPath[i + 1];\n    rawPath[i] = x1 * ma + y1 * mc + cx;\n    rawPath[i + 1] = x1 * mb + y1 * md + cy;\n  }\n\n  rawPath[i - 2] = x; //always set the end to exactly where it's supposed to be\n\n  rawPath[i - 1] = y;\n  return rawPath;\n} //Spits back a RawPath with absolute coordinates. Each segment starts with a \"moveTo\" command (x coordinate, then y) and then 2 control points (x, y, x, y), then anchor. The goal is to minimize memory and maximize speed.\n\n\nexport function stringToRawPath(d) {\n  var a = (d + \"\").replace(_scientific, function (m) {\n    var n = +m;\n    return n < 0.0001 && n > -0.0001 ? 0 : n;\n  }).match(_svgPathExp) || [],\n      //some authoring programs spit out very small numbers in scientific notation like \"1e-5\", so make sure we round that down to 0 first.\n  path = [],\n      relativeX = 0,\n      relativeY = 0,\n      twoThirds = 2 / 3,\n      elements = a.length,\n      points = 0,\n      errorMessage = \"ERROR: malformed path: \" + d,\n      i,\n      j,\n      x,\n      y,\n      command,\n      isRelative,\n      segment,\n      startX,\n      startY,\n      difX,\n      difY,\n      beziers,\n      prevCommand,\n      flag1,\n      flag2,\n      line = function line(sx, sy, ex, ey) {\n    difX = (ex - sx) / 3;\n    difY = (ey - sy) / 3;\n    segment.push(sx + difX, sy + difY, ex - difX, ey - difY, ex, ey);\n  };\n\n  if (!d || !isNaN(a[0]) || isNaN(a[1])) {\n    console.log(errorMessage);\n    return path;\n  }\n\n  for (i = 0; i < elements; i++) {\n    prevCommand = command;\n\n    if (isNaN(a[i])) {\n      command = a[i].toUpperCase();\n      isRelative = command !== a[i]; //lower case means relative\n    } else {\n      //commands like \"C\" can be strung together without any new command characters between.\n      i--;\n    }\n\n    x = +a[i + 1];\n    y = +a[i + 2];\n\n    if (isRelative) {\n      x += relativeX;\n      y += relativeY;\n    }\n\n    if (!i) {\n      startX = x;\n      startY = y;\n    } // \"M\" (move)\n\n\n    if (command === \"M\") {\n      if (segment) {\n        if (segment.length < 8) {\n          //if the path data was funky and just had a M with no actual drawing anywhere, skip it.\n          path.length -= 1;\n        } else {\n          points += segment.length;\n        }\n      }\n\n      relativeX = startX = x;\n      relativeY = startY = y;\n      segment = [x, y];\n      path.push(segment);\n      i += 2;\n      command = \"L\"; //an \"M\" with more than 2 values gets interpreted as \"lineTo\" commands (\"L\").\n      // \"C\" (cubic bezier)\n    } else if (command === \"C\") {\n      if (!segment) {\n        segment = [0, 0];\n      }\n\n      if (!isRelative) {\n        relativeX = relativeY = 0;\n      } //note: \"*1\" is just a fast/short way to cast the value as a Number. WAAAY faster in Chrome, slightly slower in Firefox.\n\n\n      segment.push(x, y, relativeX + a[i + 3] * 1, relativeY + a[i + 4] * 1, relativeX += a[i + 5] * 1, relativeY += a[i + 6] * 1);\n      i += 6; // \"S\" (continuation of cubic bezier)\n    } else if (command === \"S\") {\n      difX = relativeX;\n      difY = relativeY;\n\n      if (prevCommand === \"C\" || prevCommand === \"S\") {\n        difX += relativeX - segment[segment.length - 4];\n        difY += relativeY - segment[segment.length - 3];\n      }\n\n      if (!isRelative) {\n        relativeX = relativeY = 0;\n      }\n\n      segment.push(difX, difY, x, y, relativeX += a[i + 3] * 1, relativeY += a[i + 4] * 1);\n      i += 4; // \"Q\" (quadratic bezier)\n    } else if (command === \"Q\") {\n      difX = relativeX + (x - relativeX) * twoThirds;\n      difY = relativeY + (y - relativeY) * twoThirds;\n\n      if (!isRelative) {\n        relativeX = relativeY = 0;\n      }\n\n      relativeX += a[i + 3] * 1;\n      relativeY += a[i + 4] * 1;\n      segment.push(difX, difY, relativeX + (x - relativeX) * twoThirds, relativeY + (y - relativeY) * twoThirds, relativeX, relativeY);\n      i += 4; // \"T\" (continuation of quadratic bezier)\n    } else if (command === \"T\") {\n      difX = relativeX - segment[segment.length - 4];\n      difY = relativeY - segment[segment.length - 3];\n      segment.push(relativeX + difX, relativeY + difY, x + (relativeX + difX * 1.5 - x) * twoThirds, y + (relativeY + difY * 1.5 - y) * twoThirds, relativeX = x, relativeY = y);\n      i += 2; // \"H\" (horizontal line)\n    } else if (command === \"H\") {\n      line(relativeX, relativeY, relativeX = x, relativeY);\n      i += 1; // \"V\" (vertical line)\n    } else if (command === \"V\") {\n      //adjust values because the first (and only one) isn't x in this case, it's y.\n      line(relativeX, relativeY, relativeX, relativeY = x + (isRelative ? relativeY - relativeX : 0));\n      i += 1; // \"L\" (line) or \"Z\" (close)\n    } else if (command === \"L\" || command === \"Z\") {\n      if (command === \"Z\") {\n        x = startX;\n        y = startY;\n        segment.closed = true;\n      }\n\n      if (command === \"L\" || _abs(relativeX - x) > 0.5 || _abs(relativeY - y) > 0.5) {\n        line(relativeX, relativeY, x, y);\n\n        if (command === \"L\") {\n          i += 2;\n        }\n      }\n\n      relativeX = x;\n      relativeY = y; // \"A\" (arc)\n    } else if (command === \"A\") {\n      flag1 = a[i + 4];\n      flag2 = a[i + 5];\n      difX = a[i + 6];\n      difY = a[i + 7];\n      j = 7;\n\n      if (flag1.length > 1) {\n        // for cases when the flags are merged, like \"a8 8 0 018 8\" (the 0 and 1 flags are WITH the x value of 8, but it could also be \"a8 8 0 01-8 8\" so it may include x or not)\n        if (flag1.length < 3) {\n          difY = difX;\n          difX = flag2;\n          j--;\n        } else {\n          difY = flag2;\n          difX = flag1.substr(2);\n          j -= 2;\n        }\n\n        flag2 = flag1.charAt(1);\n        flag1 = flag1.charAt(0);\n      }\n\n      beziers = arcToSegment(relativeX, relativeY, +a[i + 1], +a[i + 2], +a[i + 3], +flag1, +flag2, (isRelative ? relativeX : 0) + difX * 1, (isRelative ? relativeY : 0) + difY * 1);\n      i += j;\n\n      if (beziers) {\n        for (j = 0; j < beziers.length; j++) {\n          segment.push(beziers[j]);\n        }\n      }\n\n      relativeX = segment[segment.length - 2];\n      relativeY = segment[segment.length - 1];\n    } else {\n      console.log(errorMessage);\n    }\n  }\n\n  i = segment.length;\n\n  if (i < 6) {\n    //in case there's odd SVG like a M0,0 command at the very end.\n    path.pop();\n    i = 0;\n  } else if (segment[0] === segment[i - 2] && segment[1] === segment[i - 1]) {\n    segment.closed = true;\n  }\n\n  path.totalPoints = points + i;\n  return path;\n} //populates the points array in alternating x/y values (like [x, y, x, y...] instead of individual point objects [{x, y}, {x, y}...] to conserve memory and stay in line with how we're handling segment arrays\n\nexport function bezierToPoints(x1, y1, x2, y2, x3, y3, x4, y4, threshold, points, index) {\n  var x12 = (x1 + x2) / 2,\n      y12 = (y1 + y2) / 2,\n      x23 = (x2 + x3) / 2,\n      y23 = (y2 + y3) / 2,\n      x34 = (x3 + x4) / 2,\n      y34 = (y3 + y4) / 2,\n      x123 = (x12 + x23) / 2,\n      y123 = (y12 + y23) / 2,\n      x234 = (x23 + x34) / 2,\n      y234 = (y23 + y34) / 2,\n      x1234 = (x123 + x234) / 2,\n      y1234 = (y123 + y234) / 2,\n      dx = x4 - x1,\n      dy = y4 - y1,\n      d2 = _abs((x2 - x4) * dy - (y2 - y4) * dx),\n      d3 = _abs((x3 - x4) * dy - (y3 - y4) * dx),\n      length;\n\n  if (!points) {\n    points = [x1, y1, x4, y4];\n    index = 2;\n  }\n\n  points.splice(index || points.length - 2, 0, x1234, y1234);\n\n  if ((d2 + d3) * (d2 + d3) > threshold * (dx * dx + dy * dy)) {\n    length = points.length;\n    bezierToPoints(x1, y1, x12, y12, x123, y123, x1234, y1234, threshold, points, index);\n    bezierToPoints(x1234, y1234, x234, y234, x34, y34, x4, y4, threshold, points, index + 2 + (points.length - length));\n  }\n\n  return points;\n}\n/*\nfunction getAngleBetweenPoints(x0, y0, x1, y1, x2, y2) { //angle between 3 points in radians\n\tvar dx1 = x1 - x0,\n\t\tdy1 = y1 - y0,\n\t\tdx2 = x2 - x1,\n\t\tdy2 = y2 - y1,\n\t\tdx3 = x2 - x0,\n\t\tdy3 = y2 - y0,\n\t\ta = dx1 * dx1 + dy1 * dy1,\n\t\tb = dx2 * dx2 + dy2 * dy2,\n\t\tc = dx3 * dx3 + dy3 * dy3;\n\treturn Math.acos( (a + b - c) / _sqrt(4 * a * b) );\n},\n*/\n//pointsToSegment() doesn't handle flat coordinates (where y is always 0) the way we need (the resulting control points are always right on top of the anchors), so this function basically makes the control points go directly up and down, varying in length based on the curviness (more curvy, further control points)\n\nexport function flatPointsToSegment(points, curviness) {\n  if (curviness === void 0) {\n    curviness = 1;\n  }\n\n  var x = points[0],\n      y = 0,\n      segment = [x, y],\n      i = 2;\n\n  for (; i < points.length; i += 2) {\n    segment.push(x, y, points[i], y = (points[i] - x) * curviness / 2, x = points[i], -y);\n  }\n\n  return segment;\n} //points is an array of x/y points, like [x, y, x, y, x, y]\n\nexport function pointsToSegment(points, curviness) {\n  //points = simplifyPoints(points, tolerance);\n  _abs(points[0] - points[2]) < 1e-4 && _abs(points[1] - points[3]) < 1e-4 && (points = points.slice(2)); // if the first two points are super close, dump the first one.\n\n  var l = points.length - 2,\n      x = +points[0],\n      y = +points[1],\n      nextX = +points[2],\n      nextY = +points[3],\n      segment = [x, y, x, y],\n      dx2 = nextX - x,\n      dy2 = nextY - y,\n      closed = Math.abs(points[l] - x) < 0.001 && Math.abs(points[l + 1] - y) < 0.001,\n      prevX,\n      prevY,\n      i,\n      dx1,\n      dy1,\n      r1,\n      r2,\n      r3,\n      tl,\n      mx1,\n      mx2,\n      mxm,\n      my1,\n      my2,\n      mym;\n\n  if (closed) {\n    // if the start and end points are basically on top of each other, close the segment by adding the 2nd point to the end, and the 2nd-to-last point to the beginning (we'll remove them at the end, but this allows the curvature to look perfect)\n    points.push(nextX, nextY);\n    nextX = x;\n    nextY = y;\n    x = points[l - 2];\n    y = points[l - 1];\n    points.unshift(x, y);\n    l += 4;\n  }\n\n  curviness = curviness || curviness === 0 ? +curviness : 1;\n\n  for (i = 2; i < l; i += 2) {\n    prevX = x;\n    prevY = y;\n    x = nextX;\n    y = nextY;\n    nextX = +points[i + 2];\n    nextY = +points[i + 3];\n\n    if (x === nextX && y === nextY) {\n      continue;\n    }\n\n    dx1 = dx2;\n    dy1 = dy2;\n    dx2 = nextX - x;\n    dy2 = nextY - y;\n    r1 = _sqrt(dx1 * dx1 + dy1 * dy1); // r1, r2, and r3 correlate x and y (and z in the future). Basically 2D or 3D hypotenuse\n\n    r2 = _sqrt(dx2 * dx2 + dy2 * dy2);\n    r3 = _sqrt(Math.pow(dx2 / r2 + dx1 / r1, 2) + Math.pow(dy2 / r2 + dy1 / r1, 2));\n    tl = (r1 + r2) * curviness * 0.25 / r3;\n    mx1 = x - (x - prevX) * (r1 ? tl / r1 : 0);\n    mx2 = x + (nextX - x) * (r2 ? tl / r2 : 0);\n    mxm = x - (mx1 + ((mx2 - mx1) * (r1 * 3 / (r1 + r2) + 0.5) / 4 || 0));\n    my1 = y - (y - prevY) * (r1 ? tl / r1 : 0);\n    my2 = y + (nextY - y) * (r2 ? tl / r2 : 0);\n    mym = y - (my1 + ((my2 - my1) * (r1 * 3 / (r1 + r2) + 0.5) / 4 || 0));\n\n    if (x !== prevX || y !== prevY) {\n      segment.push(_round(mx1 + mxm), // first control point\n      _round(my1 + mym), _round(x), // anchor\n      _round(y), _round(mx2 + mxm), // second control point\n      _round(my2 + mym));\n    }\n  }\n\n  x !== nextX || y !== nextY || segment.length < 4 ? segment.push(_round(nextX), _round(nextY), _round(nextX), _round(nextY)) : segment.length -= 2;\n\n  if (segment.length === 2) {\n    // only one point!\n    segment.push(x, y, x, y, x, y);\n  } else if (closed) {\n    segment.splice(0, 6);\n    segment.length = segment.length - 6;\n  }\n\n  return segment;\n} //returns the squared distance between an x/y coordinate and a segment between x1/y1 and x2/y2\n\nfunction pointToSegDist(x, y, x1, y1, x2, y2) {\n  var dx = x2 - x1,\n      dy = y2 - y1,\n      t;\n\n  if (dx || dy) {\n    t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n\n    if (t > 1) {\n      x1 = x2;\n      y1 = y2;\n    } else if (t > 0) {\n      x1 += dx * t;\n      y1 += dy * t;\n    }\n  }\n\n  return Math.pow(x - x1, 2) + Math.pow(y - y1, 2);\n}\n\nfunction simplifyStep(points, first, last, tolerance, simplified) {\n  var maxSqDist = tolerance,\n      firstX = points[first],\n      firstY = points[first + 1],\n      lastX = points[last],\n      lastY = points[last + 1],\n      index,\n      i,\n      d;\n\n  for (i = first + 2; i < last; i += 2) {\n    d = pointToSegDist(points[i], points[i + 1], firstX, firstY, lastX, lastY);\n\n    if (d > maxSqDist) {\n      index = i;\n      maxSqDist = d;\n    }\n  }\n\n  if (maxSqDist > tolerance) {\n    index - first > 2 && simplifyStep(points, first, index, tolerance, simplified);\n    simplified.push(points[index], points[index + 1]);\n    last - index > 2 && simplifyStep(points, index, last, tolerance, simplified);\n  }\n} //points is an array of x/y values like [x, y, x, y, x, y]\n\n\nexport function simplifyPoints(points, tolerance) {\n  var prevX = parseFloat(points[0]),\n      prevY = parseFloat(points[1]),\n      temp = [prevX, prevY],\n      l = points.length - 2,\n      i,\n      x,\n      y,\n      dx,\n      dy,\n      result,\n      last;\n  tolerance = Math.pow(tolerance || 1, 2);\n\n  for (i = 2; i < l; i += 2) {\n    x = parseFloat(points[i]);\n    y = parseFloat(points[i + 1]);\n    dx = prevX - x;\n    dy = prevY - y;\n\n    if (dx * dx + dy * dy > tolerance) {\n      temp.push(x, y);\n      prevX = x;\n      prevY = y;\n    }\n  }\n\n  temp.push(parseFloat(points[l]), parseFloat(points[l + 1]));\n  last = temp.length - 2;\n  result = [temp[0], temp[1]];\n  simplifyStep(temp, 0, last, tolerance, result);\n  result.push(temp[last], temp[last + 1]);\n  return result;\n}\n\nfunction getClosestProgressOnBezier(iterations, px, py, start, end, slices, x0, y0, x1, y1, x2, y2, x3, y3) {\n  var inc = (end - start) / slices,\n      best = 0,\n      t = start,\n      x,\n      y,\n      d,\n      dx,\n      dy,\n      inv;\n  _bestDistance = _largeNum;\n\n  while (t <= end) {\n    inv = 1 - t;\n    x = inv * inv * inv * x0 + 3 * inv * inv * t * x1 + 3 * inv * t * t * x2 + t * t * t * x3;\n    y = inv * inv * inv * y0 + 3 * inv * inv * t * y1 + 3 * inv * t * t * y2 + t * t * t * y3;\n    dx = x - px;\n    dy = y - py;\n    d = dx * dx + dy * dy;\n\n    if (d < _bestDistance) {\n      _bestDistance = d;\n      best = t;\n    }\n\n    t += inc;\n  }\n\n  return iterations > 1 ? getClosestProgressOnBezier(iterations - 1, px, py, Math.max(best - inc, 0), Math.min(best + inc, 1), slices, x0, y0, x1, y1, x2, y2, x3, y3) : best;\n}\n\nexport function getClosestData(rawPath, x, y, slices) {\n  //returns an object with the closest j, i, and t (j is the segment index, i is the index of the point in that segment, and t is the time/progress along that bezier)\n  var closest = {\n    j: 0,\n    i: 0,\n    t: 0\n  },\n      bestDistance = _largeNum,\n      i,\n      j,\n      t,\n      segment;\n\n  for (j = 0; j < rawPath.length; j++) {\n    segment = rawPath[j];\n\n    for (i = 0; i < segment.length; i += 6) {\n      t = getClosestProgressOnBezier(1, x, y, 0, 1, slices || 20, segment[i], segment[i + 1], segment[i + 2], segment[i + 3], segment[i + 4], segment[i + 5], segment[i + 6], segment[i + 7]);\n\n      if (bestDistance > _bestDistance) {\n        bestDistance = _bestDistance;\n        closest.j = j;\n        closest.i = i;\n        closest.t = t;\n      }\n    }\n  }\n\n  return closest;\n} //subdivide a Segment closest to a specific x,y coordinate\n\nexport function subdivideSegmentNear(x, y, segment, slices, iterations) {\n  var l = segment.length,\n      bestDistance = _largeNum,\n      bestT = 0,\n      bestSegmentIndex = 0,\n      t,\n      i;\n  slices = slices || 20;\n  iterations = iterations || 3;\n\n  for (i = 0; i < l; i += 6) {\n    t = getClosestProgressOnBezier(1, x, y, 0, 1, slices, segment[i], segment[i + 1], segment[i + 2], segment[i + 3], segment[i + 4], segment[i + 5], segment[i + 6], segment[i + 7]);\n\n    if (bestDistance > _bestDistance) {\n      bestDistance = _bestDistance;\n      bestT = t;\n      bestSegmentIndex = i;\n    }\n  }\n\n  t = getClosestProgressOnBezier(iterations, x, y, bestT - 0.05, bestT + 0.05, slices, segment[bestSegmentIndex], segment[bestSegmentIndex + 1], segment[bestSegmentIndex + 2], segment[bestSegmentIndex + 3], segment[bestSegmentIndex + 4], segment[bestSegmentIndex + 5], segment[bestSegmentIndex + 6], segment[bestSegmentIndex + 7]);\n  subdivideSegment(segment, bestSegmentIndex, t);\n  return bestSegmentIndex + 6;\n}\n/*\nTakes any of the following and converts it to an all Cubic Bezier SVG data string:\n- A <path> data string like \"M0,0 L2,4 v20,15 H100\"\n- A RawPath, like [[x, y, x, y, x, y, x, y][[x, y, x, y, x, y, x, y]]\n- A Segment, like [x, y, x, y, x, y, x, y]\n\nNote: all numbers are rounded down to the closest 0.001 to minimize memory, maximize speed, and avoid odd numbers like 1e-13\n*/\n\nexport function rawPathToString(rawPath) {\n  if (_isNumber(rawPath[0])) {\n    //in case a segment is passed in instead\n    rawPath = [rawPath];\n  }\n\n  var result = \"\",\n      l = rawPath.length,\n      sl,\n      s,\n      i,\n      segment;\n\n  for (s = 0; s < l; s++) {\n    segment = rawPath[s];\n    result += \"M\" + _round(segment[0]) + \",\" + _round(segment[1]) + \" C\";\n    sl = segment.length;\n\n    for (i = 2; i < sl; i++) {\n      result += _round(segment[i++]) + \",\" + _round(segment[i++]) + \" \" + _round(segment[i++]) + \",\" + _round(segment[i++]) + \" \" + _round(segment[i++]) + \",\" + _round(segment[i]) + \" \";\n    }\n\n    if (segment.closed) {\n      result += \"z\";\n    }\n  }\n\n  return result;\n}\n/*\n// takes a segment with coordinates [x, y, x, y, ...] and converts the control points into angles and lengths [x, y, angle, length, angle, length, x, y, angle, length, ...] so that it animates more cleanly and avoids odd breaks/kinks. For example, if you animate from 1 o'clock to 6 o'clock, it'd just go directly/linearly rather than around. So the length would be very short in the middle of the tween.\nexport function cpCoordsToAngles(segment, copy) {\n\tvar result = copy ? segment.slice(0) : segment,\n\t\tx, y, i;\n\tfor (i = 0; i < segment.length; i+=6) {\n\t\tx = segment[i+2] - segment[i];\n\t\ty = segment[i+3] - segment[i+1];\n\t\tresult[i+2] = Math.atan2(y, x);\n\t\tresult[i+3] = Math.sqrt(x * x + y * y);\n\t\tx = segment[i+6] - segment[i+4];\n\t\ty = segment[i+7] - segment[i+5];\n\t\tresult[i+4] = Math.atan2(y, x);\n\t\tresult[i+5] = Math.sqrt(x * x + y * y);\n\t}\n\treturn result;\n}\n\n// takes a segment that was converted with cpCoordsToAngles() to have angles and lengths instead of coordinates for the control points, and converts it BACK into coordinates.\nexport function cpAnglesToCoords(segment, copy) {\n\tvar result = copy ? segment.slice(0) : segment,\n\t\tlength = segment.length,\n\t\trnd = 1000,\n\t\tangle, l, i, j;\n\tfor (i = 0; i < length; i+=6) {\n\t\tangle = segment[i+2];\n\t\tl = segment[i+3]; //length\n\t\tresult[i+2] = (((segment[i] + Math.cos(angle) * l) * rnd) | 0) / rnd;\n\t\tresult[i+3] = (((segment[i+1] + Math.sin(angle) * l) * rnd) | 0) / rnd;\n\t\tangle = segment[i+4];\n\t\tl = segment[i+5]; //length\n\t\tresult[i+4] = (((segment[i+6] - Math.cos(angle) * l) * rnd) | 0) / rnd;\n\t\tresult[i+5] = (((segment[i+7] - Math.sin(angle) * l) * rnd) | 0) / rnd;\n\t}\n\treturn result;\n}\n\n//adds an \"isSmooth\" array to each segment and populates it with a boolean value indicating whether or not it's smooth (the control points have basically the same slope). For any smooth control points, it converts the coordinates into angle (x, in radians) and length (y) and puts them into the same index value in a smoothData array.\nexport function populateSmoothData(rawPath) {\n\tlet j = rawPath.length,\n\t\tsmooth, segment, x, y, x2, y2, i, l, a, a2, isSmooth, smoothData;\n\twhile (--j > -1) {\n\t\tsegment = rawPath[j];\n\t\tisSmooth = segment.isSmooth = segment.isSmooth || [0, 0, 0, 0];\n\t\tsmoothData = segment.smoothData = segment.smoothData || [0, 0, 0, 0];\n\t\tisSmooth.length = 4;\n\t\tl = segment.length - 2;\n\t\tfor (i = 6; i < l; i += 6) {\n\t\t\tx = segment[i] - segment[i - 2];\n\t\t\ty = segment[i + 1] - segment[i - 1];\n\t\t\tx2 = segment[i + 2] - segment[i];\n\t\t\ty2 = segment[i + 3] - segment[i + 1];\n\t\t\ta = _atan2(y, x);\n\t\t\ta2 = _atan2(y2, x2);\n\t\t\tsmooth = (Math.abs(a - a2) < 0.09);\n\t\t\tif (smooth) {\n\t\t\t\tsmoothData[i - 2] = a;\n\t\t\t\tsmoothData[i + 2] = a2;\n\t\t\t\tsmoothData[i - 1] = _sqrt(x * x + y * y);\n\t\t\t\tsmoothData[i + 3] = _sqrt(x2 * x2 + y2 * y2);\n\t\t\t}\n\t\t\tisSmooth.push(smooth, smooth, 0, 0, smooth, smooth);\n\t\t}\n\t\t//if the first and last points are identical, check to see if there's a smooth transition. We must handle this a bit differently due to their positions in the array.\n\t\tif (segment[l] === segment[0] && segment[l+1] === segment[1]) {\n\t\t\tx = segment[0] - segment[l-2];\n\t\t\ty = segment[1] - segment[l-1];\n\t\t\tx2 = segment[2] - segment[0];\n\t\t\ty2 = segment[3] - segment[1];\n\t\t\ta = _atan2(y, x);\n\t\t\ta2 = _atan2(y2, x2);\n\t\t\tif (Math.abs(a - a2) < 0.09) {\n\t\t\t\tsmoothData[l-2] = a;\n\t\t\t\tsmoothData[2] = a2;\n\t\t\t\tsmoothData[l-1] = _sqrt(x * x + y * y);\n\t\t\t\tsmoothData[3] = _sqrt(x2 * x2 + y2 * y2);\n\t\t\t\tisSmooth[l-2] = isSmooth[l-1] = true; //don't change indexes 2 and 3 because we'll trigger everything from the END, and this will optimize file size a bit.\n\t\t\t}\n\t\t}\n\t}\n\treturn rawPath;\n}\nexport function pointToScreen(svgElement, point) {\n\tif (arguments.length < 2) { //by default, take the first set of coordinates in the path as the point\n\t\tlet rawPath = getRawPath(svgElement);\n\t\tpoint = svgElement.ownerSVGElement.createSVGPoint();\n\t\tpoint.x = rawPath[0][0];\n\t\tpoint.y = rawPath[0][1];\n\t}\n\treturn point.matrixTransform(svgElement.getScreenCTM());\n}\n\n*/","/*!\n * CustomEase 3.12.2\n * https://greensock.com\n *\n * @license Copyright 2008-2023, GreenSock. All rights reserved.\n * Subject to the terms at https://greensock.com/standard-license or for\n * Club GreenSock members, the agreement issued with that membership.\n * @author: Jack Doyle, jack@greensock.com\n*/\n\n/* eslint-disable */\nimport { stringToRawPath, rawPathToString, transformRawPath } from \"./utils/paths.js\";\n\nvar gsap,\n    _coreInitted,\n    _getGSAP = function _getGSAP() {\n  return gsap || typeof window !== \"undefined\" && (gsap = window.gsap) && gsap.registerPlugin && gsap;\n},\n    _initCore = function _initCore() {\n  gsap = _getGSAP();\n\n  if (gsap) {\n    gsap.registerEase(\"_CE\", CustomEase.create);\n    _coreInitted = 1;\n  } else {\n    console.warn(\"Please gsap.registerPlugin(CustomEase)\");\n  }\n},\n    _bigNum = 1e20,\n    _round = function _round(value) {\n  return ~~(value * 1000 + (value < 0 ? -.5 : .5)) / 1000;\n},\n    _bonusValidated = 1,\n    //<name>CustomEase</name>\n_numExp = /[-+=\\.]*\\d+[\\.e\\-\\+]*\\d*[e\\-\\+]*\\d*/gi,\n    //finds any numbers, including ones that start with += or -=, negative numbers, and ones in scientific notation like 1e-8.\n_needsParsingExp = /[cLlsSaAhHvVtTqQ]/g,\n    _findMinimum = function _findMinimum(values) {\n  var l = values.length,\n      min = _bigNum,\n      i;\n\n  for (i = 1; i < l; i += 6) {\n    +values[i] < min && (min = +values[i]);\n  }\n\n  return min;\n},\n    //takes all the points and translates/scales them so that the x starts at 0 and ends at 1.\n_normalize = function _normalize(values, height, originY) {\n  if (!originY && originY !== 0) {\n    originY = Math.max(+values[values.length - 1], +values[1]);\n  }\n\n  var tx = +values[0] * -1,\n      ty = -originY,\n      l = values.length,\n      sx = 1 / (+values[l - 2] + tx),\n      sy = -height || (Math.abs(+values[l - 1] - +values[1]) < 0.01 * (+values[l - 2] - +values[0]) ? _findMinimum(values) + ty : +values[l - 1] + ty),\n      i;\n\n  if (sy) {\n    //typically y ends at 1 (so that the end values are reached)\n    sy = 1 / sy;\n  } else {\n    //in case the ease returns to its beginning value, scale everything proportionally\n    sy = -sx;\n  }\n\n  for (i = 0; i < l; i += 2) {\n    values[i] = (+values[i] + tx) * sx;\n    values[i + 1] = (+values[i + 1] + ty) * sy;\n  }\n},\n    //note that this function returns point objects like {x, y} rather than working with segments which are arrays with alternating x, y values as in the similar function in paths.js\n_bezierToPoints = function _bezierToPoints(x1, y1, x2, y2, x3, y3, x4, y4, threshold, points, index) {\n  var x12 = (x1 + x2) / 2,\n      y12 = (y1 + y2) / 2,\n      x23 = (x2 + x3) / 2,\n      y23 = (y2 + y3) / 2,\n      x34 = (x3 + x4) / 2,\n      y34 = (y3 + y4) / 2,\n      x123 = (x12 + x23) / 2,\n      y123 = (y12 + y23) / 2,\n      x234 = (x23 + x34) / 2,\n      y234 = (y23 + y34) / 2,\n      x1234 = (x123 + x234) / 2,\n      y1234 = (y123 + y234) / 2,\n      dx = x4 - x1,\n      dy = y4 - y1,\n      d2 = Math.abs((x2 - x4) * dy - (y2 - y4) * dx),\n      d3 = Math.abs((x3 - x4) * dy - (y3 - y4) * dx),\n      length;\n\n  if (!points) {\n    points = [{\n      x: x1,\n      y: y1\n    }, {\n      x: x4,\n      y: y4\n    }];\n    index = 1;\n  }\n\n  points.splice(index || points.length - 1, 0, {\n    x: x1234,\n    y: y1234\n  });\n\n  if ((d2 + d3) * (d2 + d3) > threshold * (dx * dx + dy * dy)) {\n    length = points.length;\n\n    _bezierToPoints(x1, y1, x12, y12, x123, y123, x1234, y1234, threshold, points, index);\n\n    _bezierToPoints(x1234, y1234, x234, y234, x34, y34, x4, y4, threshold, points, index + 1 + (points.length - length));\n  }\n\n  return points;\n};\n\nexport var CustomEase = /*#__PURE__*/function () {\n  function CustomEase(id, data, config) {\n    _coreInitted || _initCore();\n    this.id = id;\n    _bonusValidated && this.setData(data, config);\n  }\n\n  var _proto = CustomEase.prototype;\n\n  _proto.setData = function setData(data, config) {\n    config = config || {};\n    data = data || \"0,0,1,1\";\n    var values = data.match(_numExp),\n        closest = 1,\n        points = [],\n        lookup = [],\n        precision = config.precision || 1,\n        fast = precision <= 1,\n        l,\n        a1,\n        a2,\n        i,\n        inc,\n        j,\n        point,\n        prevPoint,\n        p;\n    this.data = data;\n\n    if (_needsParsingExp.test(data) || ~data.indexOf(\"M\") && data.indexOf(\"C\") < 0) {\n      values = stringToRawPath(data)[0];\n    }\n\n    l = values.length;\n\n    if (l === 4) {\n      values.unshift(0, 0);\n      values.push(1, 1);\n      l = 8;\n    } else if ((l - 2) % 6) {\n      throw \"Invalid CustomEase\";\n    }\n\n    if (+values[0] !== 0 || +values[l - 2] !== 1) {\n      _normalize(values, config.height, config.originY);\n    }\n\n    this.segment = values;\n\n    for (i = 2; i < l; i += 6) {\n      a1 = {\n        x: +values[i - 2],\n        y: +values[i - 1]\n      };\n      a2 = {\n        x: +values[i + 4],\n        y: +values[i + 5]\n      };\n      points.push(a1, a2);\n\n      _bezierToPoints(a1.x, a1.y, +values[i], +values[i + 1], +values[i + 2], +values[i + 3], a2.x, a2.y, 1 / (precision * 200000), points, points.length - 1);\n    }\n\n    l = points.length;\n\n    for (i = 0; i < l; i++) {\n      point = points[i];\n      prevPoint = points[i - 1] || point;\n\n      if ((point.x > prevPoint.x || prevPoint.y !== point.y && prevPoint.x === point.x || point === prevPoint) && point.x <= 1) {\n        //if a point goes BACKWARD in time or is a duplicate, just drop it. Also it shouldn't go past 1 on the x axis, as could happen in a string like \"M0,0 C0,0 0.12,0.68 0.18,0.788 0.195,0.845 0.308,1 0.32,1 0.403,1.005 0.398,1 0.5,1 0.602,1 0.816,1.005 0.9,1 0.91,1 0.948,0.69 0.962,0.615 1.003,0.376 1,0 1,0\".\n        prevPoint.cx = point.x - prevPoint.x; //change in x between this point and the next point (performance optimization)\n\n        prevPoint.cy = point.y - prevPoint.y;\n        prevPoint.n = point;\n        prevPoint.nx = point.x; //next point's x value (performance optimization, making lookups faster in getRatio()). Remember, the lookup will always land on a spot where it's either this point or the very next one (never beyond that)\n\n        if (fast && i > 1 && Math.abs(prevPoint.cy / prevPoint.cx - points[i - 2].cy / points[i - 2].cx) > 2) {\n          //if there's a sudden change in direction, prioritize accuracy over speed. Like a bounce ease - you don't want to risk the sampling chunks landing on each side of the bounce anchor and having it clipped off.\n          fast = 0;\n        }\n\n        if (prevPoint.cx < closest) {\n          if (!prevPoint.cx) {\n            prevPoint.cx = 0.001; //avoids math problems in getRatio() (dividing by zero)\n\n            if (i === l - 1) {\n              //in case the final segment goes vertical RIGHT at the end, make sure we end at the end.\n              prevPoint.x -= 0.001;\n              closest = Math.min(closest, 0.001);\n              fast = 0;\n            }\n          } else {\n            closest = prevPoint.cx;\n          }\n        }\n      } else {\n        points.splice(i--, 1);\n        l--;\n      }\n    }\n\n    l = 1 / closest + 1 | 0;\n    inc = 1 / l;\n    j = 0;\n    point = points[0];\n\n    if (fast) {\n      for (i = 0; i < l; i++) {\n        //for fastest lookups, we just sample along the path at equal x (time) distance. Uses more memory and is slightly less accurate for anchors that don't land on the sampling points, but for the vast majority of eases it's excellent (and fast).\n        p = i * inc;\n\n        if (point.nx < p) {\n          point = points[++j];\n        }\n\n        a1 = point.y + (p - point.x) / point.cx * point.cy;\n        lookup[i] = {\n          x: p,\n          cx: inc,\n          y: a1,\n          cy: 0,\n          nx: 9\n        };\n\n        if (i) {\n          lookup[i - 1].cy = a1 - lookup[i - 1].y;\n        }\n      }\n\n      lookup[l - 1].cy = points[points.length - 1].y - a1;\n    } else {\n      //this option is more accurate, ensuring that EVERY anchor is hit perfectly. Clipping across a bounce, for example, would never happen.\n      for (i = 0; i < l; i++) {\n        //build a lookup table based on the smallest distance so that we can instantly find the appropriate point (well, it'll either be that point or the very next one). We'll look up based on the linear progress. So it's it's 0.5 and the lookup table has 100 elements, it'd be like lookup[Math.floor(0.5 * 100)]\n        if (point.nx < i * inc) {\n          point = points[++j];\n        }\n\n        lookup[i] = point;\n      }\n\n      if (j < points.length - 1) {\n        lookup[i - 1] = points[points.length - 2];\n      }\n    } //this._calcEnd = (points[points.length-1].y !== 1 || points[0].y !== 0); //ensures that we don't run into floating point errors. As long as we're starting at 0 and ending at 1, tell GSAP to skip the final calculation and use 0/1 as the factor.\n\n\n    this.ease = function (p) {\n      var point = lookup[p * l | 0] || lookup[l - 1];\n\n      if (point.nx < p) {\n        point = point.n;\n      }\n\n      return point.y + (p - point.x) / point.cx * point.cy;\n    };\n\n    this.ease.custom = this;\n    this.id && gsap && gsap.registerEase(this.id, this.ease);\n    return this;\n  };\n\n  _proto.getSVGData = function getSVGData(config) {\n    return CustomEase.getSVGData(this, config);\n  };\n\n  CustomEase.create = function create(id, data, config) {\n    return new CustomEase(id, data, config).ease;\n  };\n\n  CustomEase.register = function register(core) {\n    gsap = core;\n\n    _initCore();\n  };\n\n  CustomEase.get = function get(id) {\n    return gsap.parseEase(id);\n  };\n\n  CustomEase.getSVGData = function getSVGData(ease, config) {\n    config = config || {};\n    var width = config.width || 100,\n        height = config.height || 100,\n        x = config.x || 0,\n        y = (config.y || 0) + height,\n        e = gsap.utils.toArray(config.path)[0],\n        a,\n        slope,\n        i,\n        inc,\n        tx,\n        ty,\n        precision,\n        threshold,\n        prevX,\n        prevY;\n\n    if (config.invert) {\n      height = -height;\n      y = 0;\n    }\n\n    if (typeof ease === \"string\") {\n      ease = gsap.parseEase(ease);\n    }\n\n    if (ease.custom) {\n      ease = ease.custom;\n    }\n\n    if (ease instanceof CustomEase) {\n      a = rawPathToString(transformRawPath([ease.segment], width, 0, 0, -height, x, y));\n    } else {\n      a = [x, y];\n      precision = Math.max(5, (config.precision || 1) * 200);\n      inc = 1 / precision;\n      precision += 2;\n      threshold = 5 / precision;\n      prevX = _round(x + inc * width);\n      prevY = _round(y + ease(inc) * -height);\n      slope = (prevY - y) / (prevX - x);\n\n      for (i = 2; i < precision; i++) {\n        tx = _round(x + i * inc * width);\n        ty = _round(y + ease(i * inc) * -height);\n\n        if (Math.abs((ty - prevY) / (tx - prevX) - slope) > threshold || i === precision - 1) {\n          //only add points when the slope changes beyond the threshold\n          a.push(prevX, prevY);\n          slope = (ty - prevY) / (tx - prevX);\n        }\n\n        prevX = tx;\n        prevY = ty;\n      }\n\n      a = \"M\" + a.join(\",\");\n    }\n\n    e && e.setAttribute(\"d\", a);\n    return a;\n  };\n\n  return CustomEase;\n}();\n_getGSAP() && gsap.registerPlugin(CustomEase);\nCustomEase.version = \"3.12.2\";\nexport { CustomEase as default };","import {gsap} from \"gsap\"\nimport {CustomEase} from \"gsap/CustomEase\"\nimport {SynthesisContext} from \"@/core/exec/synthesis/SynthesisContext\"\nimport {GsapAnimation, GsapPhysicalAnimation} from \"@/preset/gsap/GsapPhysicalAnimation\"\nimport {EffectAnimation} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport assert from \"assert\"\nimport {TypePropSchema} from \"@/preset/template/text/TypeTemplate\"\n\n\nexport class TypeImpl extends GsapPhysicalAnimation<SVGElement, EffectAnimation<typeof TypePropSchema>> {\n  private static SPLIT_MARK = '__g_split'\n\n  doGenerate(cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // target\n    const elements = this.elements\n    // timing\n    const stagger = this.stagger\n    // effect\n    const {effect} = this.props()\n\n    const tl = gsap.timeline()\n\n    elements.forEach((el, i) => {\n      assert(el instanceof SVGTextElement || el instanceof SVGTSpanElement,\n          `TypeImpl: Only support SVGTextElement or SVGTSpanElement, but got: ${el}`)\n\n      if (!el.hasAttribute(TypeImpl.SPLIT_MARK)) {\n        this.splitText(el)\n        el.setAttribute(TypeImpl.SPLIT_MARK, 'true')\n      }\n      const tspanList = Array.from(el.querySelectorAll('tspan'))\n          .filter(tspan => tspan.textContent.length === 1)\n          .filter(tspan => tspan.textContent !== ' ') as SVGTSpanElement[]\n\n      let tw\n      switch (effect) {\n        case 'fade': tw = this.generateFade(tspanList, cxt); break\n        case 'show': tw = this.generateShow(tspanList, cxt); break\n        default: throw new Error(`TypeImpl: unknown effect: ${effect}`)\n      }\n      tl.add(tw, i === 0 ? 0 : ('<' + stagger))\n    })\n\n    return tl\n  }\n\n  splitText(textEl: SVGTextElement) {\n    const text = textEl.textContent\n    assert(text, `TypeImpl: text is empty: ${text}`)\n\n    if (textEl.childElementCount > 0) {\n      // has tspan\n      const tspanList = textEl.querySelectorAll('tspan')\n      for (const tspan of tspanList) {\n        if (tspan.textContent.length > 1) {\n          // split it\n          const chars = tspan.textContent.split('')\n          tspan.textContent = ''\n          chars.forEach(char => {\n            const subTspan = document.createElementNS('http://www.w3.org/2000/svg', 'tspan')\n            subTspan.textContent = char\n            tspan.appendChild(subTspan)\n          })\n        }\n      }\n      return\n    }\n\n    // don't have children\n\n    textEl.textContent = ''\n    const chars = text.split('')\n\n    chars.forEach(char => {\n      const tspan = document.createElementNS('http://www.w3.org/2000/svg', 'tspan')\n      tspan.textContent = char\n      textEl.appendChild(tspan)\n    })\n  }\n\n  generateFade(tspanList: SVGTSpanElement[], cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // timing\n    const duration = this.duration\n    // effect\n    const {type, typeStagger, ease} = this.props()\n\n    let tw: GsapAnimation\n    const vars = this.mergeYoyo({ease, stagger: typeStagger})\n    switch (type) {\n      case 'in':\n        tw = gsap.fromTo(tspanList, {opacity: 0}, {opacity: 1, ...vars})\n        break\n      case 'out':\n        tw = gsap.fromTo(tspanList, {opacity: 1}, {opacity: 0, ...vars})\n        break\n      default:\n        // never goes here as type is checked by zod\n        throw new Error(`Unknown type. Expect in or out, but got: ${type}`)\n    }\n    // the duration is applied to the whole animation (after stagger)\n    tw.totalDuration(duration)\n\n    // console.log('>>>', tspanList, type, effect, typeStagger, ease, vars, tw)\n\n    return tw\n  }\n\n  generateShow(tspanList: SVGTSpanElement[], cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // timing\n    const duration = this.duration\n    // effect\n    const {type, typeStagger} = this.props()\n\n    const ease = CustomEase.create(\"custom\", \"M0,0 C0,0.24 0,1 0.012,1 0.076,1 0.78,1 1,1 \")\n\n    let tw: GsapAnimation\n    const vars = this.mergeYoyo({ease, stagger: typeStagger})\n    switch (type) {\n      case 'in':\n        tw = gsap.fromTo(tspanList, {opacity: 0}, {opacity: 1, ...vars})\n        break\n      case 'out':\n        tw = gsap.fromTo(tspanList, {opacity: 1}, {opacity: 0, ...vars})\n        break\n      default:\n        // never goes here as type is checked by zod\n        throw new Error(`Unknown type. Expect in or out, but got: ${type}`)\n    }\n    // the duration is applied to the whole animation (after stagger)\n    tw.totalDuration(duration)\n\n    // console.log('>>>', tspanList, type, effect, typeStagger, ease, vars, tw)\n\n    return tw\n  }\n}\n\n","import {gsap} from \"gsap\"\nimport {SynthesisContext} from \"@/core/exec/synthesis/SynthesisContext\"\nimport {GsapAnimation, GsapPhysicalAnimation} from \"@/preset/gsap/GsapPhysicalAnimation\"\nimport {EffectAnimation} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {CutPropSchema} from \"@/preset/template/common/CutTemplate\"\nimport {createOrGetG, getRelativeBox} from \"@/core/utils/SvgUtils\"\nimport {BaseSVGTargetModel} from \"@/core/ast/target/impl/svg/BaseSVGTargetModel\"\n\n/**\n * Cut animation = Wipe + Move\n *\n * E.g., CutIn from top = WipeIn from bottom + Move from top\n */\nexport class CutImpl extends GsapPhysicalAnimation<SVGElement, EffectAnimation<typeof CutPropSchema>> {\n  doGenerate(cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    const model = cxt.targetModel as BaseSVGTargetModel\n\n    const tl = gsap.timeline()\n    const stagger: number = this.stagger\n    this.elements.forEach((el, i) => {\n      const tw = this.createTw(el, model)\n      const position = i === 0 ? 0 : ('<' + stagger)\n      tl.add(tw, position)\n    })\n\n    return tl\n  }\n\n  createTw(el: SVGElement, model: BaseSVGTargetModel): GsapAnimation {\n    const {type, from, ease} = this.props()\n    const svg = model.getOrigin()\n\n    // save original box because it changes the position\n    model.saveOriginalBox(el as SVGGraphicsElement)\n\n    const {left, top, right, bottom, totalWidth, totalHeight} = getRelativeBox(el as SVGGraphicsElement)\n    const [[ltx, lty], [rtx, rty], [lbx, lby], [rbx, rby]] = this.getOffsetFactorMatrix(from)\n    const vars = this.mergeVars({ease})\n    const gClipPath = createOrGetG(svg, el as SVGGraphicsElement, `clip-path-${el.id}`, ['cut'])\n    const gTransform = createOrGetG(svg, el as SVGGraphicsElement, `transform-${el.id}`, ['cut'])\n\n    const tl = gsap.timeline()\n\n    const hiddenClipPath = `polygon(`\n        + `${ltx * totalWidth + left}px ${lty * totalHeight + top}px, `\n        + `${rtx * totalWidth + right}px ${rty * totalHeight + top}px, `\n        + `${rbx * totalWidth + right}px ${rby * totalHeight + bottom}px, `\n        + `${lbx * totalWidth + left}px ${lby * totalHeight + bottom}px)`\n    const shownClipPath = `polygon(${left}px ${top}px, ${right}px ${top}px, ${right}px ${bottom}px, ${left}px ${bottom}px)`\n\n    const moveVars = this.getMoveVars(from, totalWidth, totalHeight)\n\n    switch (type) {\n      case 'in':\n        tl.fromTo(gClipPath, { clipPath: hiddenClipPath }, { clipPath: shownClipPath, ...vars }, 0)\n        tl.fromTo(gTransform, { ...moveVars }, { x: 0, y: 0, ...vars }, 0)\n        break\n      case 'out':\n        tl.fromTo(gClipPath, { clipPath: shownClipPath }, { clipPath: hiddenClipPath, ...vars }, 0)\n        tl.fromTo(gTransform, { x: 0, y: 0 }, { ...moveVars, ...vars }, 0)\n        break\n      default:\n        // never goes here as type is checked by zod\n        throw new Error(`Unknown type: ${type}`)\n    }\n\n    return tl\n  }\n\n  getMoveVars(from: string, totalWidth: number, totalHeight: number): {x?: number, y?: number} {\n    switch (from) {\n      case 'top': return {x: 0, y: -totalHeight}\n      case 'bottom': return {x: 0, y: totalHeight}\n      case 'left': return {x: -totalWidth, y: 0}\n      case 'right': return {x: totalWidth, y: 0}\n      default:\n        throw new Error(`Wrong value of from: ${from}. Must be 'top', 'bottom', 'left' or 'right'. At ${this}`)\n    }\n  }\n\n\n\n  /**\n   * @param from top, bottom, left, right\n   * @return widthFactor, heightFactor for each point (-1, 0, 1)\n   */\n  getOffsetFactorMatrix(from: string): number[][] {\n    switch (from) {\n      case 'bottom':    // top for Wipe\n        return [\n          [0, 0], [0, 0],     // left top, right top\n          [0, -1], [0, -1],   // left bottom, right bottom\n        ]\n      case 'top':      // bottom for Wipe\n        return [\n          [0, 1], [0, 1],\n          [0, 0], [0, 0],\n        ]\n      case 'right':    // left for Wipe\n        return [\n          [0, 0], [-1, 0],\n          [0, 0], [-1, 0],\n        ]\n      case 'left':    // right for Wipe\n        return [\n          [1, 0], [0, 0],\n          [1, 0], [0, 0],\n        ]\n      default:\n        throw new Error(`Wrong value of from: ${from}. Must be 'top', 'bottom', 'left' or 'right'. At ${this}`)\n    }\n  }\n}\n\n","import {gsap} from \"gsap\"\nimport {SynthesisContext} from \"@/core/exec/synthesis/SynthesisContext\"\nimport {GsapAnimation, GsapPhysicalAnimation} from \"@/preset/gsap/GsapPhysicalAnimation\"\nimport {EffectAnimation} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {GrowPropSchema} from \"@/preset/template/common/GrowTemplate\"\n\n\nexport class GrowImpl extends GsapPhysicalAnimation<SVGElement, EffectAnimation<typeof GrowPropSchema>> {\n  doGenerate(cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // target\n    const elements = this.elements\n    // timing\n    const stagger = this.stagger\n\n    const tl = gsap.timeline()\n    elements.forEach((el, i) => {\n      tl.add(this.createTw(el, cxt), i === 0 ? 0 : ('<' + stagger))\n    })\n    return tl\n  }\n\n  createTw(el: SVGElement, cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // effect\n    const {type, from, ease} = this.props()\n\n    let tw: GsapAnimation\n\n    const vars = this.mergeVars({ease})\n    const {transformOrigin, attr} = this.getTransformParam(from)\n    switch (type) {\n      case 'in':\n        tw = gsap.fromTo(el, {[attr]: 0, transformOrigin}, {[attr]: 1, transformOrigin, ...vars, })\n        break\n      case 'out':\n        tw = gsap.fromTo(el, {[attr]: 1, transformOrigin}, {[attr]: 0, transformOrigin, ...vars})\n        break\n      default:\n        // never goes here as type is checked by zod\n        throw new Error(`Unknown type: ${type}`)\n    }\n\n    return tw\n  }\n\n  getTransformParam(from: string): {transformOrigin: string, attr: string} {\n    switch (from) {\n      case 'top':\n        return {transformOrigin: 'center top', attr: 'scaleY'}\n      case 'bottom':\n        return {transformOrigin: 'center bottom', attr: 'scaleY'}\n      case 'left':\n        return {transformOrigin: 'left center', attr: 'scaleX'}\n      case 'right':\n        return {transformOrigin: 'right center', attr: 'scaleX'}\n      default:\n        throw new Error(`Unknown from: ${from}`)\n    }\n  }\n}\n\n","import {gsap} from \"gsap\"\nimport {SynthesisContext} from \"@/core/exec/synthesis/SynthesisContext\"\nimport {GsapAnimation, GsapPhysicalAnimation} from \"@/preset/gsap/GsapPhysicalAnimation\"\nimport {EffectAnimation} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {ChangeColorPropSchema} from \"@/preset/template/common/ChangeColorTemplate\"\n\n\nexport class ChangeColorImpl extends GsapPhysicalAnimation<SVGElement, EffectAnimation<typeof ChangeColorPropSchema>> {\n  doGenerate(cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // target\n    const elements = this.elements\n    // timing\n    const stagger = this.stagger\n\n    const tl = gsap.timeline()\n    elements.forEach((el, i) => {\n      tl.add(this.createTw(el, cxt), i === 0 ? 0 : ('<' + stagger))\n    })\n    return tl\n  }\n\n  createTw(el: SVGElement, cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // effect\n    const {type, fill, ease} = this.props()\n\n    let tw\n\n    const vars = this.mergeVars({ease})\n    const finalVars = {\n      ...vars,\n      [this.isLineLike(el) ? 'stroke' : 'fill']: fill\n    }\n    switch (type) {\n      case 'to': tw = gsap.to(el, finalVars); break\n      case 'from': tw = gsap.from(el, finalVars); break\n      default:\n        // never goes here as type is checked by zod\n        throw new Error(`Unknown type: ${type}`)\n    }\n\n    return tw\n  }\n\n  isLineLike(el: SVGElement): boolean {\n    return el.tagName === 'line' || el.tagName === 'polyline' || el.tagName === 'polygon'\n  }\n}\n\n","import {gsap} from \"gsap\"\nimport {SynthesisContext} from \"@/core/exec/synthesis/SynthesisContext\"\nimport {GsapAnimation, GsapPhysicalAnimation} from \"@/preset/gsap/GsapPhysicalAnimation\"\nimport {EffectAnimation} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {DisplayPathPropSchema} from \"@/preset/template/path/DisplayPathTemplate\"\nimport assert from \"assert\"\n\n\nexport class DisplayPathImpl extends GsapPhysicalAnimation<SVGElement, EffectAnimation<typeof DisplayPathPropSchema>> {\n  doGenerate(cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // target\n    const elements = this.elements\n    // timing\n    const stagger = this.stagger\n\n    const tl = gsap.timeline()\n    elements.forEach((el, i) => {\n      tl.add(this.createTw(el, cxt), i === 0 ? 0 : ('<' + stagger))\n    })\n    tl.totalDuration(this.totalDuration)    // special to this animation\n    return tl\n  }\n\n  createTw(el: SVGElement, cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // effect\n    const {reverseDirection, aniTime, displayTime, ease} = this.props()\n\n    const vars = this.mergeVars({ease}, {duration: false, yoyo: false, reverse: false})\n\n    const tl = gsap.timeline()\n\n    assert(el instanceof SVGGeometryElement, `PathBlinkImpl: element is not SVGGeometryElement: ${el}`)\n    let len = 0\n    try {\n      len = el.getTotalLength()\n    } catch(e) {\n      throw new Error(`PathBlinkImpl: get total length failed: ${e}. Cause by: ${el}`)\n    }\n    const strokeWith = parseFloat(el.getAttribute('stroke-width') ?? '0')\n    const marge = strokeWith + 1\n    el.setAttribute('stroke-dasharray', `${len} ${len + marge * 2}`)\n\n    tl.fromTo(el, {strokeDashoffset: reverseDirection ? -(len + marge) : (len + marge)},\n        {...vars, duration: aniTime, strokeDashoffset: 0}, 0)\n    tl.to(el, {strokeDashoffset: reverseDirection ? (len + marge) : -(len + marge),\n      duration: aniTime,\n      delay: aniTime + displayTime}, 0)\n\n    if (this.reverse) {\n      tl.reverse()\n    }\n\n    return tl\n  }\n}\n\n","import {TargetType, TargetTypeComponent} from \"@/core/ast/target/TargetType\"\nimport {TreeLike} from \"@/core/utils/TreeUtils\"\n\nexport class TypeModelTreeNode implements TreeLike {\n  readonly nodeId: string\n  readonly targetType: TargetType\n  readonly parent: TypeModelTreeNode\n  readonly componentLink: TargetTypeComponent = null\n\n  children: TypeModelTreeNode[] = []\n\n  private _classList: string[] = null\n\n  constructor(nodeId: string,\n              targetType: TargetType,\n              parent: TypeModelTreeNode = null,\n              componentLink: TargetTypeComponent = null) {\n    this.nodeId = nodeId\n    this.targetType = targetType\n    this.parent = parent\n    this.componentLink = componentLink\n  }\n\n  visitChildren(): TreeLike[] {\n    return this.children\n  }\n\n  toOneLineString(): string {\n    return `${this.targetType.name} [(${this.nodeId}) class=[${this.classList.join(', ')}]`\n  }\n\n  isLeaf(): boolean {\n    return this.targetType.isLeaf()\n  }\n\n  /**\n   * Gets all class of this node. Class list include:\n   * - TargetType classList (given when defining TargetType, empty for most of the time)\n   * - TargetTypeComponent classList (given by its parent)\n   */\n  get classList(): string[] {\n    if (this._classList === null) {\n      this._classList = [this.targetType.name, ...this.targetType.classList]\n      if (this.componentLink != null) {\n        this._classList = this. _classList.concat(this.componentLink.classList)\n      }\n      this._classList.reverse()\n    }\n    return this._classList\n  }\n\n  get fullClassList(): string[] {\n    return this.classList.concat(this.parent?.fullClassList ?? [])\n  }\n}\n","export function getFormattedXmlString(element: Element): string {\n  return getFormattedXmlStringHelper(element, 0)\n}\n\nfunction getFormattedXmlStringHelper(element: Element, indent = 0): string {\n  const indentation = '  '.repeat(indent)\n  const attributes = Array.from(element.attributes)\n      .map(attr => `${attr.name}=\"${attr.value}\"`)\n      .join(' ')\n  const openTag = `<${element.tagName.toLowerCase()}${(attributes === '') ? '' : ' '}${attributes}>`\n  const closeTag = `</${element.tagName.toLowerCase()}>`\n\n  const innerContent = Array.from(element.childNodes)\n      .map(node => {\n        if (node instanceof Element) {\n          return getFormattedXmlStringHelper(node, indent + 1)\n        } else {\n          return `${'  '.repeat(indent + 1)}${node.textContent}`\n        }\n      })\n      .join('\\n')\n  if (innerContent === '') {\n    return `${indentation}${openTag}${closeTag}`\n  }\n  return `${indentation}${openTag}\\n${innerContent}\\n${indentation}${closeTag}`\n}\n\nexport function domElToStr(el: Element): string {\n  return `${el.tagName}#${el.id}`.trim()\n}\n","import {TargetSelection} from \"@/core/ast/target/TargetSelection\"\nimport {TargetType} from \"@/core/ast/target/TargetType\"\nimport {GaiaSession} from \"@/session/GaiaSession\"\nimport {TypeModelTreeNode} from \"@/core/ast/target/TypeModelTree\"\nimport assert from \"assert\"\nimport {Logger, LoggerManager} from \"@/core/utils/Logger\"\nimport {toTreeString} from \"@/core/utils/TreeUtils\"\nimport {Import} from \"@/core/ast/animation/other/Import\"\nimport {domElToStr, getFormattedXmlString} from \"@/core/utils/DomUtils\"\n\nexport type DataType = {[key: string]: any}\nexport type VirtualElementType = Element & { data: DataType }\n\nexport abstract class TargetModel<ObjType> {\n  protected static logger: Logger = LoggerManager.getLogger(\"TargetModel\")\n\n  session: GaiaSession = null\n\n  rootTargetType: TargetType = null\n\n  // root of the tree\n  typeModelTree: TypeModelTreeNode = null\n  // vGroup id -> type node\n  typeModelNodeMap: Map<string, TypeModelTreeNode> = null\n  typeModelDom: VirtualElementType = null\n\n  realElementIdSet: Set<string> = new Set()\n\n  virtualModel: VirtualElementType = null\n  rootSelection: TargetSelection = null\n\n  protected readonly origin: ObjType\n\n  protected constructor(origin: ObjType) {\n    this.origin = origin\n  }\n\n  getOrigin(): ObjType {\n    return this.origin\n  }\n\n  init(session: GaiaSession): void {\n    this.session = session\n\n    this.initRootType()\n    assert(this.rootTargetType != null, \"rootTargetType is not initialized by initRootType()\")\n    TargetModel.logger.debug(`Root type: ${this.rootTargetType.fullName}`)\n\n    this.processIdSet()\n    this.initTypeModelTree()\n    this.initTypeModelDom()\n    this.initVirtualModelBackbone()\n    this.completeVirtualModel()\n\n    TargetModel.logger.debug(`Virtual model created.\\n${getFormattedXmlString(this.virtualModel)}`)\n  }\n\n  abstract initRootType(): void\n  abstract processIdSet(): void\n  abstract completeVirtualModel(): void\n  abstract getRealElementById(id: string): ObjType\n  abstract getBox(id: string): {x: number, y: number, height: number, width: number}\n\n  private initTypeModelTree(): void {\n    // build targetModelTree & targetModelTreeMap using root target type\n    let nodeId = 0\n    const targetLibrary = this.session.typeLibrary\n    const nodeMap = new Map()\n    const samePackageImport = Import.pkg(this.rootTargetType.packageName)\n    const expandTreeNode = (cur: TypeModelTreeNode) => {\n      // TargetModel.logger.trace(`Expanding node ${cur.toOneLineString()}. `\n      //     + `Children: [${cur.targetType.components.map(c => c.ref).join(', ')}].`)\n      // process self\n      nodeMap.set(cur.nodeId, cur)\n\n      if (cur.targetType.components.length === 0) {\n        return\n      }\n      // process children\n      const caller = targetLibrary.createCaller()\n          .setImport(samePackageImport)\n          .setAllImport(cur.targetType.imports)\n      for (const component of cur.targetType.components) {\n        const typeResult = caller.safeGet(component.ref)\n        let componentType: TargetType\n        switch (typeResult.status) {\n          case \"ok\": componentType = typeResult.result; break\n          case \"not-found\": throw new Error(`Type ${component.ref} not found. In ${cur.targetType.fullName}.`)\n          case \"not-imported\": throw new Error(`Type ${component.ref} not imported. In ${cur.targetType.fullName}.`)\n        }\n        // TargetModel.logger.trace(`Child ${componentType.name}(${nodeId}) of ${cur.toOneLineString()} created.`)\n        const child = new TypeModelTreeNode(this.getTypeNodeId(nodeId), componentType, cur, component)\n        nodeId++\n        cur.children.push(child)\n        expandTreeNode(child)\n      }\n    }\n    this.typeModelTree = new TypeModelTreeNode(this.getTypeNodeId(nodeId), this.rootTargetType)\n    nodeId++\n    expandTreeNode(this.typeModelTree)\n    this.typeModelNodeMap = nodeMap\n\n    TargetModel.logger.trace(\"Type model tree created.\\n\", toTreeString(this.typeModelTree))\n  }\n\n  getTypeNodeId(nodeId: number): string {\n    return `g-${nodeId}`\n  }\n\n  createVirtualGroup(type: string, id: string, classList: string[], data: DataType = {}): VirtualElementType {\n    const vGroup = Object.assign(this.session.document.createElement('g'), {data})\n    vGroup.setAttribute('id', id)\n    vGroup.setAttribute('class', classList.join(' '))\n    // mount data to attributes\n    for (const [key, value] of Object.entries(data)) {\n      if (vGroup.hasAttribute(key)) {\n        console.warn(`Attribute ${key} already exists in ${vGroup}. Change it to data-${key}`)\n        vGroup.setAttribute(`data-${key}`, String(value))\n      } else {\n        vGroup.setAttribute(key, String(value))\n      }\n    }\n    return vGroup\n  }\n\n  initTypeModelDom(): void {\n    /* Build tree-like type model dom according to typeModelTree */\n\n    const processNode = (node: TypeModelTreeNode, parentVEl: VirtualElementType | null, classList: string[]) => {\n      const vGroup = this.createVirtualGroup(node.targetType.name, String(node.nodeId), node.classList)\n\n      if (parentVEl !== null) {\n        parentVEl.appendChild(vGroup)\n      } else {\n        // is root\n        vGroup.setAttribute('isRoot', 'true')\n      }\n\n      for (const child of node.children) {\n        const childClassList = child.classList.concat(classList)\n        processNode(child, vGroup, childClassList)\n      }\n\n      return vGroup\n    }\n    this.typeModelDom = processNode(this.typeModelTree, null, this.typeModelTree.classList)\n  }\n\n  initVirtualModelBackbone(): void {\n    this.virtualModel = this.createVirtualGroup(this.rootTargetType.fullName, '--g-root', [], {})\n    TargetModel.logger.trace(\"Virtual model backbone created.\\n\", getFormattedXmlString(this.virtualModel))\n  }\n\n  queryOneVGroup(selector: string): VirtualElementType {\n    const vGroupList = this.querySelectorAll(selector)\n    assert(vGroupList.length !== 0, `Virtual group element not found: \"${selector}\".`)\n    assert(vGroupList.length < 2, `Multiple virtual group elements found: \"${selector}\".`)\n    return vGroupList[0]\n  }\n\n  queryOneTypeNode(selector: string): TypeModelTreeNode {\n    const vGroup = this.queryOneVGroup(selector)\n    return this.vGroupToTypeNode(vGroup)\n  }\n\n  /**\n   * Selects one element in typeModelDom by selector.\n   * @param selector CSS selector\n   * @protected\n   */\n  protected querySelector(selector: string): VirtualElementType {\n    return this.typeModelDom.querySelector(selector)\n  }\n\n  protected querySelectorAll(selector: string): Array<VirtualElementType> {\n    return Array.from(this.typeModelDom.querySelectorAll(selector))\n  }\n\n  protected vGroupToTypeNode(vGroup: VirtualElementType): TypeModelTreeNode {\n    return this.typeModelNodeMap.get(vGroup.id)\n  }\n\n  getRealElementByVNode(vNode: VirtualElementType): ObjType {\n    const targetEl = this.getRealElementById(vNode.id)\n    if (targetEl == null) {\n      throw new Error(`Cannot get elements from virtual node ${domElToStr(vNode)}. `\n          + `Might built virtual model incorrectly.`)\n    }\n    return targetEl\n  }\n}\n","import {DataType, TargetModel, VirtualElementType} from \"@/core/ast/target/TargetModel\"\nimport assert from \"assert\"\nimport {getSvgBox} from \"@/core/utils/SvgUtils\"\n\n/**\n * Base Target model that uses SVG\n */\nexport abstract class BaseSVGTargetModel extends TargetModel<SVGElement> {\n  protected constructor(origin: SVGSVGElement) {\n    super(origin)\n  }\n\n  processIdSet() {\n    // set id for all elements\n    const elements = this.origin.querySelectorAll<SVGElement>('*')\n    elements.forEach(el => {\n      const id = el.getAttribute('id')\n      if (id != null && id != '') {\n        this.realElementIdSet.add(id)\n      }\n    })\n  }\n\n  getOrigin(): SVGSVGElement {\n    return this.origin as SVGSVGElement\n  }\n\n  getScene(): SVGElement {\n    return this.origin.querySelector('#__scene')\n  }\n\n  saveOriginalData(el: SVGGraphicsElement, name: string, value: any) {\n    const el2 = el as (SVGGraphicsElement & {_original: {[key: string]: any}})\n    if (el2._original == null) {\n      el2._original = {}\n    }\n    el2._original[name] = value\n  }\n\n  getOriginalData(el: SVGGraphicsElement, name: string) {\n    const el2 = el as (SVGGraphicsElement & {_original: {[key: string]: any}})\n    if (el2._original == null) {\n      return null\n    }\n    return el2._original[name]\n  }\n\n  saveOriginalBox(el: SVGGraphicsElement) {\n    const box = this.getElBox(el)\n    this.saveOriginalData(el, 'box', box)\n  }\n\n  getOriginalBox(el: SVGGraphicsElement) {\n    return this.getOriginalData(el, 'box')\n  }\n\n  getBox(id: string): { x: number; y: number; height: number; width: number } {\n    const el = this.getRealElementById(id)\n    assert(el instanceof SVGGraphicsElement, `Can only get box of SVGGraphicsElement, but got ${el.constructor.name}.`)\n    return getSvgBox(this.getOrigin(), el)\n  }\n\n  getElBox(el: SVGGraphicsElement) {\n    return getSvgBox(this.getOrigin(), el)\n  }\n\n  getCanvasSize(): { width: number; height: number } {\n    const svg = this.origin\n    const width = svg.getAttribute('width')\n    const height = svg.getAttribute('height')\n    if (width == null || height == null) {\n      throw new Error('width or height is null')\n    }\n    return {\n      width: parseFloat(width),\n      height: parseFloat(height),\n    }\n  }\n\n  getDefs(): SVGDefsElement {\n    if (this.origin.querySelector('defs') == null) {\n      this.origin.appendChild(document.createElementNS('http://www.w3.org/2000/svg', 'defs'))\n    }\n    return this.origin.querySelector('defs')\n  }\n\n  getDummyEl(): SVGElement {\n    if (this.origin.querySelector('#--dummy') != null) {\n      return this.origin.querySelector('#--dummy')\n    }\n    const dummyEl = document.createElementNS('http://www.w3.org/2000/svg', 'g')\n    dummyEl.setAttribute('id', '--dummy')\n    dummyEl.setAttribute('class', '--dummy')\n    this.origin.appendChild(dummyEl)\n    return dummyEl\n  }\n\n  createVirtualElement(el: SVGElement, id: string, classList: string[], data: DataType = {}): VirtualElementType {\n    const newEl = document.createElementNS('http://www.w3.org/2000/svg', el.tagName)\n    const vEl = Object.assign(newEl, {data})\n    vEl.setAttribute('id', id)\n    vEl.setAttribute('class', classList.join(' '))\n    // mount data to attributes\n    for (const [key, value] of Object.entries(data)) {\n      vEl.setAttribute(key, String(value))\n    }\n    return vEl\n  }\n}\n","import {gsap} from \"gsap\"\nimport {SynthesisContext} from \"@/core/exec/synthesis/SynthesisContext\"\nimport {GsapAnimation, GsapPhysicalAnimation} from \"@/preset/gsap/GsapPhysicalAnimation\"\nimport {EffectAnimation} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {CirclePropSchema} from \"@/preset/template/annotation/CircleTemplate\"\nimport {BaseSVGTargetModel} from \"@/core/ast/target/impl/svg/BaseSVGTargetModel\"\nimport assert from \"assert\"\n\n\nexport class CircleImpl extends GsapPhysicalAnimation<SVGElement, EffectAnimation<typeof CirclePropSchema>> {\n  doGenerate(cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    const model = cxt.targetModel\n    assert(model instanceof BaseSVGTargetModel, `CircleImpl: target model must be BaseSVGTargetModel, but got: ${model}`)\n    const svgModel = model as BaseSVGTargetModel\n\n    // target\n    const elements = this.elements\n    // timing\n    const stagger = this.stagger\n\n    const tl = gsap.timeline()\n    elements.forEach((el, i) => {\n      tl.add(this.createTw(el, svgModel), i === 0 ? 0 : ('<' + stagger))\n    })\n    return tl\n  }\n\n  createTw(el: SVGElement, model: BaseSVGTargetModel): GsapAnimation {\n    // effect\n    const {direction, aniTime, displayTime, stroke, strokeWidth, ease} = this.props()\n    const reverseDirection = direction === 'counterclockwise'\n\n    const vars = this.mergeVars({ease}, {duration: false, yoyo: false, reverse: true})\n    const circle =this.addCircle(el, model, stroke, strokeWidth)\n\n    const tl = gsap.timeline()\n\n    let len = 0\n    try {\n      len = circle.getTotalLength()\n    } catch(e) {\n      throw new Error(`CircleImpl: get total length failed: ${e}. Cause by: ${circle}`)\n    }\n    circle.setAttribute('stroke-dasharray', String(len))\n\n    tl.set(circle, {opacity: 1}, 0)\n    tl.fromTo(circle, {strokeDashoffset: reverseDirection ? -len : len},\n        {...vars, duration: aniTime, strokeDashoffset: 0}, 0)\n    tl.to(circle, {strokeDashoffset: reverseDirection ? len : -len, duration: aniTime}, displayTime)\n    tl.set(circle, {opacity: 0}, displayTime + aniTime)\n\n    return tl\n  }\n\n  addCircle(el: SVGElement, model: BaseSVGTargetModel, stroke: string, strokeWidth: number): SVGEllipseElement {\n    const originalBox = model.getOriginalBox(el as SVGGraphicsElement)\n    const {x, y, width, height} = originalBox ?? model.getElBox(el as SVGGraphicsElement)\n    const root = model.getOrigin()\n\n    const ellipse = document.createElementNS('http://www.w3.org/2000/svg', 'ellipse')\n    ellipse.setAttribute('transform', `translate(${x+width/2}, ${y+height/2})`)\n    ellipse.setAttribute('rx', `${width/2*1.2}`)\n    ellipse.setAttribute('ry', `${height/2*1.3}`)\n    ellipse.setAttribute('fill', 'none')\n    ellipse.setAttribute('stroke', stroke)\n    ellipse.setAttribute('stroke-width', String(strokeWidth))\n    // hide at first\n    ellipse.setAttribute('opacity', '0')\n\n    root.appendChild(ellipse)\n\n    return ellipse\n  }\n}\n\n","import {gsap} from \"gsap\"\nimport {SynthesisContext} from \"@/core/exec/synthesis/SynthesisContext\"\nimport {GsapAnimation, GsapPhysicalAnimation} from \"@/preset/gsap/GsapPhysicalAnimation\"\nimport {EffectAnimation} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {getArcPath, getRelativeBox} from \"@/core/utils/SvgUtils\"\nimport {WheelPropSchema} from \"@/preset/template/common/WheelTemplate\"\nimport {BaseSVGTargetModel} from \"@/core/ast/target/impl/svg/BaseSVGTargetModel\"\n\n\nexport class WheelImpl extends GsapPhysicalAnimation<SVGElement, EffectAnimation<typeof WheelPropSchema>> {\n  doGenerate(cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    const model = cxt.targetModel as BaseSVGTargetModel\n\n    const tl = gsap.timeline()\n    const stagger: number = this.stagger\n    this.elements.forEach((el, i) => {\n      const tw = this.createTw(el, model)\n      const position = i === 0 ? 0 : ('<' + stagger)\n      tl.add(tw, position)\n    })\n\n    return tl\n  }\n\n  createTw(el: SVGElement, model: BaseSVGTargetModel): GsapAnimation {\n    const {type, startAngle, sweepAngle, ease} = this.props()\n\n    const {totalWidth, totalHeight} = getRelativeBox(el as SVGGraphicsElement)\n    const {width, height}= model.getElBox(el as SVGGraphicsElement)\n\n    const arc = {\n      startAngle,\n      sweepAngle: 0,\n      cx: width / 2,\n      cy: height / 2,\n      rx: totalWidth,\n      ry: totalHeight,\n    }\n    const hiddenSweepAngle = startAngle\n    const shownSweepAngle = sweepAngle\n\n    const updatePath = function updatePath() {\n      const path = getArcPath(\n          arc.cx,\n          arc.cy,\n          arc.rx,\n          arc.ry,\n          arc.startAngle,\n          arc.sweepAngle\n      ).replaceAll('\\n', ' ')\n      el.setAttribute('clip-path', `path('${path}')`)\n    }\n\n    const vars = this.mergeVars({ease, onUpdate: updatePath})\n\n    let tw: GsapAnimation\n\n    switch (type) {\n      case 'in':\n        tw = gsap.fromTo(arc,\n            { sweepAngle: hiddenSweepAngle },\n            { sweepAngle: shownSweepAngle, ...vars })\n        break\n      case 'out':\n        tw = gsap.fromTo(el,\n            { sweepAngle: shownSweepAngle },\n            { sweepAngle: hiddenSweepAngle, ...vars })\n        break\n      default:\n        // never goes here as type is checked by zod\n        throw new Error(`Unknown type: ${type}`)\n    }\n\n    return tw\n  }\n}\n\n","import {gsap} from \"gsap\"\nimport {SynthesisContext} from \"@/core/exec/synthesis/SynthesisContext\"\nimport {GsapAnimation, GsapPhysicalAnimation} from \"@/preset/gsap/GsapPhysicalAnimation\"\nimport {EffectAnimation} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport assert from \"assert\"\nimport {PathDrawPropSchema} from \"@/preset/template/path/PathDrawTemplate\"\n\n\nexport class PathDrawImpl extends GsapPhysicalAnimation<SVGElement, EffectAnimation<typeof PathDrawPropSchema>> {\n  doGenerate(cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // target\n    const elements = this.elements\n    // timing\n    const stagger = this.stagger\n\n    const tl = gsap.timeline()\n    elements.forEach((el, i) => {\n      tl.add(this.createTw(el, cxt), i === 0 ? 0 : ('<' + stagger))\n    })\n    tl.totalDuration(this.totalDuration)    // special to this animation\n    return tl\n  }\n\n  createTw(el: SVGElement, cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // effect\n    const {reverseDirection, ease} = this.props()\n\n    const vars = this.mergeVars({ease})\n\n    assert(el instanceof SVGGeometryElement, `PathBlinkImpl: element is not SVGGeometryElement: ${el}`)\n    let len = 0\n    try {\n      len = el.getTotalLength()\n    } catch(e) {\n      throw new Error(`PathBlinkImpl: get total length failed: ${e}. Cause by: ${el}`)\n    }\n    const strokeWith = parseFloat(el.getAttribute('stroke-width') ?? '0')\n    const marge = strokeWith + 1\n    el.setAttribute('stroke-dasharray', `${len} ${len + marge * 2}`)\n\n    return gsap.fromTo(el, {strokeDashoffset: reverseDirection ? -(len + marge) : (len + marge)},\n        {...vars, strokeDashoffset: 0})\n  }\n}\n\n","import {gsap} from \"gsap\"\nimport {SynthesisContext} from \"@/core/exec/synthesis/SynthesisContext\"\nimport {GsapAnimation, GsapPhysicalAnimation} from \"@/preset/gsap/GsapPhysicalAnimation\"\nimport {EffectAnimation} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {getArcPath, getRelativeBox} from \"@/core/utils/SvgUtils\"\nimport {SectorWheelPropSchema} from \"@/preset/template/pie-chart/SectorWheelTemplate\"\nimport {BaseSVGTargetModel} from \"@/core/ast/target/impl/svg/BaseSVGTargetModel\"\n\n\nexport class SectorWheelImpl extends GsapPhysicalAnimation<SVGElement, EffectAnimation<typeof SectorWheelPropSchema>> {\n  private x: number\n  private y: number\n  private width: number\n  private height: number\n\n  doGenerate(cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    const model = cxt.targetModel as BaseSVGTargetModel\n\n    if (this.props().centerPos != '') {\n      this.computeSizeWithPos(model)\n    } else {\n      this.computeSizeWithTarget(model)\n    }\n\n    const tl = gsap.timeline()\n    const stagger: number = this.stagger\n    this.elements.forEach((el, i) => {\n      const tw = this.createTw(el, model)\n      const position = i === 0 ? 0 : ('<' + stagger)\n      tl.add(tw, position)\n    })\n\n    return tl\n  }\n\n  computeSizeWithTarget(model: BaseSVGTargetModel) {\n    let centerElements\n    if (this.props().centerTarget != '') {\n      const filter = this.props().centerTarget\n      const centerSel = model.rootSelection.filter(filter)\n      centerElements = centerSel.realElements\n    } else {\n      centerElements = this.elements\n    }\n\n    let x = Infinity, y = Infinity, width = 0, height = 0\n\n    centerElements.forEach(el => {\n      const box = model.getElBox(el as SVGGraphicsElement)\n      x = Math.min(x, box.x)\n      y = Math.min(y ,box.y)\n    })\n    centerElements.forEach(el => {\n      const box = model.getElBox(el as SVGGraphicsElement)\n      const {totalWidth, totalHeight} = getRelativeBox(el as SVGGraphicsElement)\n      width = Math.max(width, box.x + totalWidth - x)\n      height = Math.max(height, box.y + totalHeight - y)\n    })\n\n    console.log('computeSizeWithTarget', x, y, width, height, centerElements)\n\n    this.x = x\n    this.y = y\n    this.width = width\n    this.height = height\n  }\n\n  computeSizeWithPos(model: BaseSVGTargetModel) {\n    const svg = model.getOrigin()\n    // hardcode\n    // inner SVG\n    const innerSvg = svg.querySelector('svg')\n    const {width, height} = innerSvg.viewBox.baseVal\n    const {centerPos} = this.props()    // e.g., '50% 50%', or '100 100'\n    const [x, y] = centerPos.split(' ')\n        .map((v, i) => {\n          if (v.endsWith('%')) {\n            return parseFloat(v) / 100 * (i === 0 ? width : height)\n          } else {\n            return parseFloat(v)\n          }\n        })\n    console.log('computeSizeWithPos', x, y, width, height)\n    this.x = x\n    this.y = y\n    this.width = width\n    this.height = height\n  }\n\n  createTw(el: SVGElement, model: BaseSVGTargetModel): GsapAnimation {\n    const {type, startAngle, sweepAngle, ease} = this.props()\n\n    const {x, y} = model.getElBox(el as SVGGraphicsElement)\n    // const svg = model.getOrigin()\n    // const gClipPath = createOrGetG(svg, el as SVGGraphicsElement, `clip-path-${el.id}`, ['sector-wheel'])\n\n    const targetX = this.x + this.width / 2\n    const targetY = this.y + this.height / 2\n\n    const arc = {\n      startAngle,\n      sweepAngle: 0,\n      cx: targetX - x,\n      cy: targetY - y,\n      rx: this.width,\n      ry: this.height,\n    }\n    const hiddenSweepAngle = 0\n    const shownSweepAngle = sweepAngle\n\n    const updatePath = function updatePath() {\n      const path = getArcPath(\n          arc.cx,\n          arc.cy,\n          arc.rx,\n          arc.ry,\n          arc.startAngle,\n          arc.sweepAngle\n      ).replaceAll('\\n', ' ')\n      el.setAttribute('clip-path', `path('${path}')`)\n    }\n\n    const vars = this.mergeVars({ease, onUpdate: updatePath})\n\n    let tw: GsapAnimation\n\n    switch (type) {\n      case 'in':\n        tw = gsap.fromTo(arc,\n            { sweepAngle: hiddenSweepAngle },\n            { sweepAngle: shownSweepAngle, ...vars })\n        break\n      case 'out':\n        tw = gsap.fromTo(arc,\n            { sweepAngle: shownSweepAngle },\n            { sweepAngle: hiddenSweepAngle, ...vars })\n        break\n      default:\n        // never goes here as type is checked by zod\n        throw new Error(`Unknown type: ${type}`)\n    }\n\n    return tw\n  }\n}\n\n","import {gsap} from \"gsap\"\nimport {SynthesisContext} from \"@/core/exec/synthesis/SynthesisContext\"\nimport {GsapAnimation, GsapPhysicalAnimation} from \"@/preset/gsap/GsapPhysicalAnimation\"\nimport {EffectAnimation} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {FloatPropSchema} from \"@/preset/template/common/FloatTemplate\"\nimport {createOrGetG} from \"@/core/utils/SvgUtils\"\nimport {BaseSVGTargetModel} from \"@/core/ast/target/impl/svg/BaseSVGTargetModel\"\n\n\nexport class FloatImpl extends GsapPhysicalAnimation<SVGElement, EffectAnimation<typeof FloatPropSchema>> {\n  doGenerate(cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // target\n    const elements = this.elements\n    // timing\n    const stagger = this.stagger\n\n    const tl = gsap.timeline()\n    elements.forEach((el, i) => {\n      tl.add(this.createTw(el, cxt), i === 0 ? 0 : ('<' + stagger))\n    })\n    return tl\n  }\n\n  createTw(el: SVGElement, cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    const model = cxt.targetModel as BaseSVGTargetModel\n\n    // effect\n    const {type, from, distance, ease} = this.props()\n    const svg = model.getOrigin()\n\n    let tw: GsapAnimation\n\n    const vars = this.mergeVars({ease})\n    const {factor, attr} = this.getParam(from)\n    const gTransform = createOrGetG(svg, el as SVGGraphicsElement, `transform-${el.id}`, ['fly'])\n\n    switch (type) {\n      case 'in':\n        tw = gsap.fromTo(gTransform, {[attr]: `+=${distance * factor}px`, opacity: 0}, {[attr]: 0, opacity: 1, ...vars})\n        break\n      case 'out':\n        tw = gsap.fromTo(gTransform, {[attr]: 0, opacity: 1}, {[attr]: `+=${distance * factor}px`, opacity: 0, ...vars})\n        break\n      default:\n        // never goes here as type is checked by zod\n        throw new Error(`Unknown type: ${type}`)\n    }\n\n    return tw\n  }\n\n  getParam(from: string): {factor: number, attr: string} {\n    const attr = (from === 'left' || from === 'right') ? 'x' : 'y'\n    const factor = (from === 'right' || from === 'bottom') ? 1 : -1\n    return {factor, attr}\n  }\n}\n\n","import {gsap} from \"gsap\"\nimport {SynthesisContext} from \"@/core/exec/synthesis/SynthesisContext\"\nimport {GsapAnimation, GsapPhysicalAnimation} from \"@/preset/gsap/GsapPhysicalAnimation\"\nimport {EffectAnimation} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {FlyPropSchema} from \"@/preset/template/common/FlyTemplate\"\nimport {BaseSVGTargetModel} from \"@/core/ast/target/impl/svg/BaseSVGTargetModel\"\nimport {createOrGetG, getRelativeBox} from \"@/core/utils/SvgUtils\"\n\n\nexport class FlyImpl extends GsapPhysicalAnimation<SVGElement, EffectAnimation<typeof FlyPropSchema>> {\n  doGenerate(cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // target\n    const elements = this.elements\n    // timing\n    const stagger = this.stagger\n\n    const tl = gsap.timeline()\n    elements.forEach((el, i) => {\n      tl.add(this.createTw(el, cxt), i === 0 ? 0 : ('<' + stagger))\n    })\n    return tl\n  }\n\n  createTw(el: SVGElement, cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    const model = cxt.targetModel as BaseSVGTargetModel\n    const svg = model.getOrigin()\n\n    // effect\n    const {type, from, ease} = this.props()\n\n    const {width: svgWidth, height: svgHeight} = model.getCanvasSize()\n    const {x, y} = model.getElBox(el as SVGGraphicsElement)\n    const {totalWidth, totalHeight} = getRelativeBox(el as SVGGraphicsElement)\n    const merging = 10\n    const gTransform = createOrGetG(svg, el as SVGGraphicsElement, `transform-${el.id}`, ['cut'])\n\n    let distX, distY    // offset compared to the original position\n    switch (from) {\n      case 'top':\n        distX = 0\n        distY = -y - totalHeight - merging\n        break\n      case 'bottom':\n        distX = 0\n        distY = svgHeight - y + merging\n        break\n      case 'left':\n        distX = -x - totalWidth - merging\n        distY = 0\n        break\n      case 'right':\n        distX = svgWidth - x + merging\n        distY = 0\n        break\n      default:\n        throw new Error(`Unknown from: ${from}`)\n    }\n\n    let tw: GsapAnimation\n\n    const vars = this.mergeVars({ease})\n    let translateX, translateY\n\n    switch (type) {\n      case 'in':\n        translateX = '+=' + distX\n        translateY = '+=' + distY\n        tw = gsap.fromTo(gTransform, {translateX, translateY, ...vars},\n            {translateX: 0, translateY: 0, ...vars})\n        break\n      case 'out':\n        translateX = '-=' + distX\n        translateY = '-=' + distY\n        tw = gsap.fromTo(gTransform, {translateX: 0, translateY: 0, ...vars},\n            {translateX, translateY, ...vars})\n        break\n      default:\n        // never goes here as type is checked by zod\n        throw new Error(`Unknown type: ${type}`)\n    }\n\n    return tw\n  }\n}\n\n","import {gsap} from \"gsap\"\nimport {SynthesisContext} from \"@/core/exec/synthesis/SynthesisContext\"\nimport {GsapAnimation, GsapPhysicalAnimation} from \"@/preset/gsap/GsapPhysicalAnimation\"\nimport {EffectAnimation} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {HighlightPropSchema} from \"@/preset/template/common/HighlightTemplate\"\nimport {createOrGetG} from \"@/core/utils/SvgUtils\"\n\n\nexport class HighlightImpl extends GsapPhysicalAnimation<SVGElement, EffectAnimation<typeof HighlightPropSchema>> {\n  doGenerate(cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // target\n    // const elements = this.elements\n    // other target\n    const {contrastTarget} = this.props()\n    const contrastElements = this.logical.target.selection.parent\n        .filter(contrastTarget)\n        .realElements as SVGElement[]\n\n    // don't support stagger\n\n    const tl = gsap.timeline()\n    contrastElements.forEach((el, i) => {\n      tl.add(this.createTw(el, cxt), 0)\n    })\n    return tl\n  }\n\n  createTw(el: SVGElement, cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // effect\n    const {contrastOpacity, ease} = this.props()\n\n    const model = cxt.targetModel\n    const svg = model.getOrigin() as SVGSVGElement\n    const gOpacity = createOrGetG(svg, el as SVGGraphicsElement, `opacity-${el.id}`, ['highlight'])\n\n    const vars = this.mergeVars({ease})\n    return gsap.fromTo(gOpacity, {opacity: 1}, {...vars, opacity: contrastOpacity})\n  }\n}\n\n","import {gsap} from \"gsap\"\nimport {SynthesisContext} from \"@/core/exec/synthesis/SynthesisContext\"\nimport {GsapAnimation, GsapPhysicalAnimation} from \"@/preset/gsap/GsapPhysicalAnimation\"\nimport {EffectAnimation} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport assert from \"assert\"\nimport {DynamicNumberPropSchema} from \"@/preset/template/text/DynamicNumberTemplate\"\n\n\nexport class DynamicNumberImpl extends GsapPhysicalAnimation<SVGElement, EffectAnimation<typeof DynamicNumberPropSchema>> {\n  doGenerate(cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // target\n    const elements = this.elements\n    // timing\n    const stagger = this.stagger\n\n    const tl = gsap.timeline()\n\n    elements.forEach((el, i) => {\n      assert(el instanceof SVGTextElement, `DynamicNumberImpl: only support SVGTextElement, but got: ${el}`)\n      const tw = this.createTw(el, cxt)\n      tl.add(tw, i === 0 ? 0 : ('<' + stagger))\n    })\n\n    return tl\n  }\n\n  createTw(el: SVGTextElement, cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // timing\n    const duration = this.duration\n    // effect\n    const {numStart, numEnd, toFixed, ease} = this.props()\n\n    let formatter: string\n    const group = el.innerHTML.match(/([^\\d]*)(\\d+)(.*)/)\n    if (group) {\n      formatter = group[1] + '@num' + group[3]\n    } else {\n      formatter = '@num'\n    }\n\n    let computedStart = numStart, computedEnd = numStart\n    if (numStart == null || numEnd == null) {\n      const group = el.innerHTML.match(formatter.replace('@num', '([\\\\d.]+)'))\n      if (numStart == null) {\n        computedStart = parseFloat(group[1])\n      }\n      if (numEnd == null) {\n        computedEnd = parseFloat(group[1])\n      }\n    }\n\n    const tempNumObj = {tempNum: computedStart}\n    const onUpdate = () => {\n      const num = tempNumObj.tempNum.toFixed(toFixed)\n      el.innerHTML = formatter.replaceAll('@num', num)\n    }\n    onUpdate()    // call it firstly\n\n    return gsap.to(tempNumObj, {tempNum: computedEnd, ease, duration, onUpdate})\n  }\n}\n\n","import {gsap} from \"gsap\"\nimport {SynthesisContext} from \"@/core/exec/synthesis/SynthesisContext\"\nimport {GsapAnimation, GsapPhysicalAnimation} from \"@/preset/gsap/GsapPhysicalAnimation\"\nimport {EffectAnimation} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {SetPropSchema} from \"@/preset/template/common/SetTemplate\"\n\n\nexport class SetImpl extends GsapPhysicalAnimation<SVGElement, EffectAnimation<typeof SetPropSchema>> {\n  doGenerate(cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // target\n    const elements = this.elements\n    // timing\n    const stagger = this.stagger\n\n    const tl = gsap.timeline()\n    elements.forEach((el, i) => {\n      tl.add(this.createTw(el, cxt), i === 0 ? 0 : ('<' + stagger))\n    })\n    return tl\n  }\n\n  createTw(el: SVGElement, cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // effect\n    const {attr, value} = this.props()\n    return gsap.set(el, {[attr]: value})\n  }\n}\n\n","import {gsap} from \"gsap\"\nimport {SynthesisContext} from \"@/core/exec/synthesis/SynthesisContext\"\nimport {GsapAnimation, GsapPhysicalAnimation} from \"@/preset/gsap/GsapPhysicalAnimation\"\nimport {EffectAnimation} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport assert from \"assert\"\nimport {LineFlowPropSchema} from \"@/preset/template/path/LineFlowTemplate\"\n\n\nexport class LineFlowImpl extends GsapPhysicalAnimation<SVGElement, EffectAnimation<typeof LineFlowPropSchema>> {\n  doGenerate(cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // target\n    const elements = this.elements\n    // timing\n    const stagger = this.stagger\n\n    const tl = gsap.timeline()\n    elements.forEach((el, i) => {\n      tl.add(this.createTw(el, cxt), i === 0 ? 0 : ('<' + stagger))\n    })\n    return tl\n  }\n\n  createTw(el: SVGElement, cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // effect\n    const {reverseDirection, dash, times, ease} = this.props()\n\n    const vars = this.mergeVars({ease})\n\n    assert(el instanceof SVGGeometryElement, `LineFlowImpl: element is not SVGGeometryElement: ${el}`)\n    let len = 0\n    try {\n      len = el.getTotalLength()\n    } catch(e) {\n      throw new Error(`LineFlowImpl: get total length failed: ${e}. Cause by: ${el}`)\n    }\n    el.setAttribute('stroke-dasharray', dash)\n\n    return gsap.fromTo(el, {strokeDashoffset: reverseDirection ? -len * times : len * times},\n        {...vars, strokeDashoffset: 0})\n  }\n}\n\n","import {gsap} from \"gsap\"\nimport {SynthesisContext} from \"@/core/exec/synthesis/SynthesisContext\"\nimport {GsapAnimation, GsapPhysicalAnimation} from \"@/preset/gsap/GsapPhysicalAnimation\"\nimport {EffectAnimation} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {BaseSVGTargetModel} from \"@/core/ast/target/impl/svg/BaseSVGTargetModel\"\nimport {CameraPropSchema} from \"@/preset/template/camera/CameraTemplate\"\nimport {isString} from \"lodash\"\n\n\nexport class CameraImpl extends GsapPhysicalAnimation<SVGElement, EffectAnimation<typeof CameraPropSchema>> {\n  doGenerate(cxt: SynthesisContext<SVGElement, GsapAnimation>): GsapAnimation {\n    // effect\n    const {from, to, origin, reset, ease} = this.props()\n\n    // save original box because it changes the position\n    const model = cxt.targetModel as BaseSVGTargetModel\n    const svg = model.getOrigin()\n\n    if (reset) {\n      const toVars = this.mergeYoyo(this.mergeDuration({scale: 1, x: 0, y: 0, ease}))\n      return gsap.to(svg, toVars)\n    }\n\n    let transformOrigin = null\n    // if there is scale in from or to, set transform origin\n    if ((from != null && from.scale != null) || (to != null && to.scale != null)) {\n      transformOrigin = origin\n    }\n\n    let tw: GsapAnimation\n\n    if (from != null && to != null) {\n      const fromVars: {[key: string]: any} = {...this.refine(from)}\n      const toVars = this.mergeYoyo(this.mergeDuration({...this.refine(to), ease}))\n      if (transformOrigin != null) {\n        fromVars.transformOrigin = transformOrigin\n        toVars.transformOrigin = transformOrigin\n      }\n      tw = gsap.fromTo(svg, fromVars, toVars)\n\n    } else if (from != null) {\n      const fromVars = this.mergeYoyo(this.mergeDuration({...this.refine(from), ease}))\n      if (transformOrigin != null) {\n        fromVars.transformOrigin = transformOrigin\n      }\n      tw = gsap.from(svg, fromVars)\n\n    } else if (to != null) {\n      const toVars = this.mergeYoyo(this.mergeDuration({...this.refine(to), ease}))\n      if (transformOrigin != null) {\n        toVars.transformOrigin = transformOrigin\n      }\n      tw = gsap.to(svg, toVars)\n\n    } else {\n      throw new Error(`Either from or to must be specified for ${this}`)\n    }\n\n    return tw\n  }\n\n  refine(toOrFrom: {x?: string | number, y?: string | number}) {\n    if (isString(toOrFrom.x)) {\n      toOrFrom.x = this.reverseSign(toOrFrom.x)\n    }\n    if (isString(toOrFrom.y)) {\n      toOrFrom.y = this.reverseSign(toOrFrom.y)\n    }\n    return toOrFrom\n  }\n\n  reverseSign(str: string) {\n    return str.replace('+', '<temp>').replace('-', '+').replace('<temp>', '-')\n  }\n}\n\n","import {Synthesizer} from \"@/core/exec/synthesis/Synthesizer\"\nimport {CompileExec} from \"@/session/CompileExec\"\nimport {SynthesisRule} from \"@/core/exec/synthesis/SynthesisRule\"\nimport {MappingRule} from \"@/core/exec/synthesis/rules/MappingRule\"\nimport {GsapAnimation} from \"@/preset/gsap/GsapPhysicalAnimation\"\nimport {BaseLogicalAniType} from \"@/core/ast/animation/logical/LogicalAnimation\"\nimport {PhysicalAnimation} from \"@/core/ast/animation/physical/PhysicalAnimation\"\n// import {gsap} from \"gsap\"\n\n\nimport {SyncImpl} from \"@/preset/gsap/impl/common/SyncImpl\"\nimport {ConcatImpl} from \"@/preset/gsap/impl/common/ConcatImpl\"\nimport {CustomImpl} from \"@/preset/gsap/impl/svg/common/CustomImpl\"\nimport {EmptyImpl} from \"@/preset/gsap/impl/svg/common/EmptyImpl\"\nimport {FadeImpl} from \"@/preset/gsap/impl/svg/common/FadeImpl\"\nimport {WipeImpl} from \"@/preset/gsap/impl/svg/common/WipeImpl\"\nimport {MoveImpl} from \"@/preset/gsap/impl/svg/common/MoveImpl\"\nimport {ZoomImpl} from \"@/preset/gsap/impl/svg/common/ZoomImpl\"\nimport {TypeImpl} from \"@/preset/gsap/impl/svg/text/TypeImpl\"\nimport {CutImpl} from \"@/preset/gsap/impl/svg/common/CutImpl\"\nimport {GrowImpl} from \"@/preset/gsap/impl/svg/common/GrowImpl\"\nimport {ChangeColorImpl} from \"@/preset/gsap/impl/svg/common/ChangeColorImpl\"\n\nimport {DisplayPathImpl} from \"@/preset/gsap/impl/svg/path/DisplayPathImpl\"\n\nimport {CircleImpl} from \"@/preset/gsap/impl/svg/annotation/CircleImpl\"\nimport {WheelImpl} from \"@/preset/gsap/impl/svg/common/WheelImpl\"\nimport {PathDrawImpl} from \"@/preset/gsap/impl/svg/path/PathDrawImpl\"\nimport {SectorWheelImpl} from \"@/preset/gsap/impl/svg/common/SectorWheelImpl\"\nimport {FloatImpl} from \"@/preset/gsap/impl/svg/common/FloatImpl\"\nimport {FlyImpl} from \"@/preset/gsap/impl/svg/common/FlyImpl\"\nimport {HighlightImpl} from \"@/preset/gsap/impl/svg/common/HighlightImpl\"\nimport {DynamicNumberImpl} from \"@/preset/gsap/impl/svg/text/DynamicNumberImpl\"\nimport {SetImpl} from \"@/preset/gsap/impl/svg/common/SetImpl\"\nimport {LineFlowImpl} from \"@/preset/gsap/impl/svg/path/LineFlowImpl\"\nimport {CameraImpl} from \"@/preset/gsap/impl/svg/camera/CameraImpl\"\n\n\nexport class GsapSynthesizer extends Synthesizer<SVGElement, GsapAnimation> {\n  constructor(compileExec: CompileExec<SVGElement, GsapAnimation>,\n              extraRules: SynthesisRule<SVGElement, BaseLogicalAniType, GsapAnimation>[] = []) {\n    super(compileExec, extraRules)\n  }\n\n  getDefaultRules(): SynthesisRule<SVGElement, BaseLogicalAniType, GsapAnimation>[] {\n    return [\n      /* Common */\n      new MappingRule(\"gaia.common.Sync\", SyncImpl),\n      new MappingRule(\"gaia.common.Concat\", ConcatImpl),\n      new MappingRule(\"gaia.common.Custom\", CustomImpl),\n      new MappingRule(\"gaia.common.Empty\", EmptyImpl),\n      new MappingRule(\"gaia.common.Fade\", FadeImpl),\n      new MappingRule(\"gaia.common.Wipe\", WipeImpl),\n      new MappingRule(\"gaia.common.Move\", MoveImpl),\n      new MappingRule(\"gaia.common.Zoom\", ZoomImpl),\n      new MappingRule(\"gaia.common.Cut\", CutImpl),\n      new MappingRule(\"gaia.common.Grow\", GrowImpl),\n      new MappingRule(\"gaia.common.ChangeColor\", ChangeColorImpl),\n      new MappingRule(\"gaia.common.Wheel\", WheelImpl),\n      new MappingRule(\"gaia.common.Float\", FloatImpl),\n      new MappingRule(\"gaia.common.Fly\", FlyImpl),\n      new MappingRule(\"gaia.common.Highlight\", HighlightImpl),\n      new MappingRule(\"gaia.common.Set\", SetImpl),\n      new MappingRule(\"gaia.common.Camera\", CameraImpl),\n\n      /* Text */\n      new MappingRule(\"gaia.text.Type\", TypeImpl),\n      new MappingRule(\"gaia.text.DynamicNumber\", DynamicNumberImpl),\n\n      /* Path */\n      new MappingRule(\"gaia.path.DisplayPath\", DisplayPathImpl),\n      new MappingRule(\"gaia.path.PathDraw\", PathDrawImpl),\n      new MappingRule(\"gaia.path.LineFlow\", LineFlowImpl),\n\n      /* Pie */\n      new MappingRule(\"gaia.chart.SectorWheel\", SectorWheelImpl),\n\n      /* Annotation */\n      new MappingRule(\"gaia.annotation.Circle\", CircleImpl),\n    ]\n  }\n\n  generate(physical: PhysicalAnimation<SVGElement, BaseLogicalAniType, GsapAnimation>): GsapAnimation {\n    // gsap.defaults({immediateRender: false})\n    return super.generate(physical)\n  }\n}\n","import {TargetType} from \"@/core/ast/target/TargetType\"\nimport {Import} from \"@/core/ast/animation/other/Import\"\nimport {Logger, LoggerManager} from \"@/core/utils/Logger\"\nimport assert from \"assert\"\nimport {Library} from \"@/core/library/Library\"\n\nexport class TypeLibrary extends Library<TargetType> {\n  createCaller(): TypeLibraryCaller {\n    return new TypeLibraryCaller(this)\n  }\n}\n\nexport class TypeLibraryCaller {\n  private static readonly logger: Logger = LoggerManager.getLogger(\"TypeLibraryCaller\")\n\n  private _instance: TypeLibrary = null\n  private _aliasMap: Map<string, string> = new Map()\n  // full name -> type\n  private _importMap: Map<string, TargetType> = new Map()\n\n  constructor(typeLibrary: TypeLibrary) {\n    this._instance = typeLibrary\n  }\n\n  setImport(importItem: Import): TypeLibraryCaller {\n    if (importItem.isPackageImport()) {\n      const types = this._instance.getByPackage(importItem.pkg)\n      if (types == null) {\n        throw new Error(`Package ${importItem.pkg} not found.`)\n      }\n      // put into import map\n      for (const type of types) {\n        this._importMap.set(type.fullName, type)\n      }\n      TypeLibraryCaller.logger.trace(`Import package ${importItem.pkg} successfully. `\n          + `Imported types: ${types.map(t => t.fullName).join(\", \")}`)\n    } else {\n      // is class import\n      const type = this._instance.get(importItem.clazz)\n      if (type == null) {\n        throw new Error(`Type class ${importItem.clazz} not found.`)\n      }\n      // set alias\n      this._aliasMap.set(importItem.as, type.fullName)\n      // put into import map\n      this._importMap.set(type.fullName, type)\n      TypeLibraryCaller.logger.trace(`Import class ${importItem.clazz} as ${importItem.as} successfully.`)\n    }\n    return this\n  }\n\n  setAllImport(imports: Import[]): TypeLibraryCaller {\n    imports.forEach(importItem => this.setImport(importItem))\n    return this\n  }\n\n  get(name: string): TargetType {\n    const {result, status} = this.safeGet(name)\n    switch (status) {\n      case \"ok\":\n        return result\n      case \"not-found\":\n        throw new Error(`Type ${name} not found.`)\n      case \"not-imported\":\n        throw new Error(`Type ${name} not found. Maybe you forget to import it.`)\n    }\n  }\n\n  safeGet(name: string): { result: TargetType | undefined, status: \"ok\" | \"not-found\" | \"not-imported\" } {\n    if (this._aliasMap.has(name)) {\n      const alias = this._aliasMap.get(name)\n      const result = this._importMap.get(alias)\n      assert(result != null)\n      return {result: result, status: \"ok\"}\n    }\n    // name might be full name, name with prefix, or name without prefix\n    // so first try to get by proto manager to address it\n    const result = this._instance.get(name)\n    if (result == null) {\n      return {result: undefined, status: \"not-found\"}\n    }\n    if (this._importMap.get(result.fullName) == undefined) {\n      return {result: undefined, status: \"not-imported\"}\n    }\n    return {result: result, status: \"ok\"}\n  }\n}\n","import {TargetType} from \"@/core/ast/target/TargetType\"\nimport {GaiaSession} from \"@/session/GaiaSession\"\n\nimport Any from \"@/preset/target/common/Any.type.json5\"\nimport Circle from \"@/preset/target/common/Circle.type.json5\"\nimport Image from \"@/preset/target/common/Image.type.json5\"\nimport Line from \"@/preset/target/common/Line.type.json5\"\nimport Path from \"@/preset/target/common/Path.type.json5\"\nimport Rect from \"@/preset/target/common/Rect.type.json5\"\nimport Symbol from \"@/preset/target/common/Symbol.type.json5\"\nimport Text from \"@/preset/target/common/Text.type.json5\"\n\nimport Background from \"@/preset/target/chart/Background.type.json5\"\nimport Axis from \"@/preset/target/chart/Axis.type.json5\"\nimport Annotation from \"@/preset/target/chart/Annotation.type.json5\"\nimport Legend from \"@/preset/target/chart/Legend.type.json5\"\nimport Grid from \"@/preset/target/chart/Grid.type.json5\"\n\nimport BarChart from \"@/preset/target/chart/bar-chart/BarChart.type.json5\"\nimport BarMark from \"@/preset/target/chart/bar-chart/BarMark.type.json5\"\n\nimport PieChart from \"@/preset/target/chart/pie-chart/PieChart.type.json5\"\nimport PieMark from \"@/preset/target/chart/pie-chart/PieMark.type.json5\"\n\nimport LineChart from \"@/preset/target/chart/line-chart/LineChart.type.json5\"\nimport LineMark from \"@/preset/target/chart/line-chart/LineMark.type.json5\"\n\nimport Map from \"@/preset/target/chart/map/Map.type.json5\"\n\nimport TornadoChart from \"@/preset/target/chart/tornado/TornadoChart.type.json5\"\nimport TornadoMark from \"@/preset/target/chart/tornado/TornadoMark.type.json5\"\n\nimport IsotypeChart from \"@/preset/target/chart/isotype/IsotypeChart.type.json5\"\nimport IsotypeMark from \"@/preset/target/chart/isotype/IsotypeMark.type.json5\"\n\nimport ScatterPlot from \"@/preset/target/chart/scatter-plot/ScatterPlot.type.json5\"\nimport ScatterPlotMark from \"@/preset/target/chart/scatter-plot/ScatterPlotMark.type.json5\"\n\nimport MixedChart from \"@/preset/target/chart/mixed-chart/MixedChart.type.json5\"\n\nimport TlBackground from \"@/preset/target/timeline/TlBackground.type.json5\"\nimport LinearTimeline from \"@/preset/target/timeline/linear/LinearTimeline.type.json5\"\nimport LinearTimelineUnit from \"@/preset/target/timeline/linear/LinearTimelineUnit.type.json5\"\n\n\nexport function getPresetTypes(session: GaiaSession): TargetType[] {\n  const parser = session.parser\n  return [\n    /* Common */\n    parser.parseTargetType(Any),\n    parser.parseTargetType(Circle),\n    parser.parseTargetType(Image),\n    parser.parseTargetType(Line),\n    parser.parseTargetType(Path),\n    parser.parseTargetType(Rect),\n    parser.parseTargetType(Symbol),\n    parser.parseTargetType(Text),\n    parser.parseTargetType(Background),\n\n    /* Chart */\n    parser.parseTargetType(Axis),\n    parser.parseTargetType(Annotation),\n    parser.parseTargetType(Legend),\n    parser.parseTargetType(Grid),\n\n    /* Bar Chart */\n    parser.parseTargetType(BarChart),\n    parser.parseTargetType(BarMark),\n\n    /* Pie Chart */\n    parser.parseTargetType(PieChart),\n    parser.parseTargetType(PieMark),\n\n    /* Line Chart */\n    parser.parseTargetType(LineChart),\n    parser.parseTargetType(LineMark),\n\n    /* Map */\n    parser.parseTargetType(Map),\n\n    /* Tornado Chart */\n    parser.parseTargetType(TornadoChart),\n    parser.parseTargetType(TornadoMark),\n\n    /* Isotype */\n    parser.parseTargetType(IsotypeChart),\n    parser.parseTargetType(IsotypeMark),\n\n    /* Scatter Plot */\n    parser.parseTargetType(ScatterPlot),\n    parser.parseTargetType(ScatterPlotMark),\n\n    /* Mixed Chart */\n    parser.parseTargetType(MixedChart),\n\n    /* Linear Timeline */\n    parser.parseTargetType(TlBackground),\n    parser.parseTargetType(LinearTimeline),\n    parser.parseTargetType(LinearTimelineUnit),\n  ]\n}\n","import {z} from \"zod\"\nimport {LeafAnimation, LeafAniProps} from \"@/core/ast/animation/logical/LeafAnimation\"\nimport {cloneDeep, omit} from \"lodash\"\n\nexport const EffectPropSchema = LeafAniProps.extend({\n})\n\nexport class EffectAnimation<PropType extends typeof LeafAniProps> extends LeafAnimation<PropType> {\n  constructor(name: string, packageName: string, targetType: string, propSchema: PropType, props: z.input<PropType>) {\n    super({ name, packageName, imports: [], targetType, propSchema }, props)\n  }\n\n  clone(): EffectAnimation<PropType> {\n    return new EffectAnimation(this.name, this.packageName, this.targetType, this.propSchema, {\n      id: this.id,\n      target: this.target.clone(),\n      timing: this.timing.clone(),\n      ...cloneDeep(omit(this.props(), ['id', 'target', 'timing'])),\n    })\n  }\n}\n","import {BaseTemplate} from \"@/core/ast/template/BaseTemplate\"\nimport {z} from \"zod\"\nimport {EffectAnimation} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {LeafAniProps} from \"@/core/ast/animation/logical/LeafAnimation\"\nimport {AniMetaSchema} from \"@/core/ast/animation/logical/LogicalAnimation\"\nimport {ResolveContext} from \"@/core/exec/resolve/ResolveContext\"\n\nexport class EffectTemplate<PropType extends typeof LeafAniProps>\n  extends BaseTemplate<PropType, EffectAnimation<PropType>> {\n\n  protected constructor(meta: AniMetaSchema<PropType>) {\n    super(meta)\n  }\n\n  create(cxt: ResolveContext<unknown, unknown>, props: z.output<PropType>): EffectAnimation<PropType> {\n    const {name, packageName, targetType, propSchema} = this.meta\n    return new EffectAnimation(name, packageName, targetType, propSchema, props)\n  }\n}\n","import {z} from \"zod\"\nimport {EffectTemplate} from \"@/core/ast/template/EffectTemplate\"\nimport {EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\n\nexport const CustomPropSchema = EffectPropSchema.extend({\n  // type: z.enum(['from', 'to', 'fromTo', 'auto'])\n  //     .default('auto')\n  //     .describe('Type of animation: \"from\" | \"to\" | \"fromTo\" | \"auto\" (default: \"auto\", determined by \"from\" and \"to\")'),\n  attr: z.string()\n      .describe(\"Attribute to animate\"),\n  from: z.union([z.string(), z.number()])\n      .nullable()\n      .default(null)\n      .describe(\"Starting value of the animation\"),\n  to: z.union([z.string(), z.number()])\n      .nullable()\n      .default(null)\n      .describe(\"Ending value of the animation\"),\n  ease: z.string()\n      .default('power1.out')\n      .describe(\"Easing function of animation (default: power1.out)\"),\n})\n\nexport class CustomTemplate extends EffectTemplate<typeof CustomPropSchema> {\n  constructor() {\n    super({\n      name: \"Custom\",\n      packageName: \"gaia.common\",\n      imports: [],\n      targetType: \"Any\",\n      propSchema: CustomPropSchema,\n    })\n  }\n}\n","import {z} from \"zod\"\nimport {EffectTemplate} from \"@/core/ast/template/EffectTemplate\"\nimport {EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\n\nexport const FadePropSchema = EffectPropSchema.extend({\n  type: z.enum(['in', 'out'])\n      .default('in')\n      .describe(\"Fade type of animation (default: in)\"),\n  ease: z.string()\n      .default('power1.out')\n      .describe(\"Easing function of animation (default: power1.out)\"),\n})\n\nexport class FadeTemplate extends EffectTemplate<typeof FadePropSchema> {\n  constructor() {\n    super({\n      name: \"Fade\",\n      packageName: \"gaia.common\",\n      imports: [],\n      targetType: \"Any\",\n      propSchema: FadePropSchema,\n    })\n  }\n}\n","import {z} from \"zod\"\nimport {EffectTemplate} from \"@/core/ast/template/EffectTemplate\"\nimport {EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\n\nexport const WipePropSchema = EffectPropSchema.extend({\n  type: z.enum(['in', 'out'])\n      .default('in')\n      .describe(\"Wipe enter or wipe exit (default: enter)\"),\n  from: z.enum(['bottom', 'top', 'left', 'right'])\n      .default('bottom')\n      .describe(\"Wipe direction (default: bottom)\"),\n  ease: z.string()\n      .default('power1.out')\n      .describe(\"Easing function of animation (default: power1.out)\"),\n})\n\nexport class WipeTemplate extends EffectTemplate<typeof WipePropSchema> {\n  constructor() {\n    super({\n      name: \"Wipe\",\n      packageName: \"gaia.common\",\n      imports: [],\n      targetType: \"Any\",\n      propSchema: WipePropSchema,\n    })\n  }\n}\n","import {z} from \"zod\"\nimport {EffectTemplate} from \"@/core/ast/template/EffectTemplate\"\nimport {EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\n\nexport const MovePropSchema = EffectPropSchema.extend({\n  from: z.object({\n    x: z.number().or(z.string()).optional(),\n    y: z.number().or(z.string()).optional(),\n  }).optional()\n      .describe(\"Move from position (x, y). Example: {x: 100, y: 100} or {x: '-=10', y: '+=10px'}\"),\n  to: z.object({\n    x: z.number().or(z.string()).optional(),\n    y: z.number().or(z.string()).optional(),\n  }).optional()\n      .describe(\"Move to position (x, y). Example: {x: 100, y: 100} or {x: '-=10', y: '+=10px'}\"),\n  ease: z.string()\n      .default('power1.out')\n      .describe(\"Easing function of animation (default: power1.out)\"),\n})\n\nexport class MoveTemplate extends EffectTemplate<typeof MovePropSchema> {\n  constructor() {\n    super({\n      name: \"Move\",\n      packageName: \"gaia.common\",\n      imports: [],\n      targetType: \"Any\",\n      propSchema: MovePropSchema,\n    })\n  }\n}\n","import {z} from \"zod\"\nimport {EffectTemplate} from \"@/core/ast/template/EffectTemplate\"\nimport {EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\n\nexport const ZoomPropSchema = EffectPropSchema.extend({\n  type: z.enum(['in', 'out'])\n      .default('in')\n      .describe(\"Wipe enter or wipe exit (default: enter)\"),\n  ease: z.string()\n      .default('back.out')\n      .describe(\"Easing function of animation (default: back.out)\"),\n})\n\nexport class ZoomTemplate extends EffectTemplate<typeof ZoomPropSchema> {\n  constructor() {\n    super({\n      name: \"Zoom\",\n      packageName: \"gaia.common\",\n      imports: [],\n      targetType: \"Any\",\n      propSchema: ZoomPropSchema,\n    })\n  }\n}\n","import {z} from \"zod\"\nimport {EffectTemplate} from \"@/core/ast/template/EffectTemplate\"\nimport {EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\n\nexport const TypePropSchema = EffectPropSchema.extend({\n  type: z.enum(['in', 'out'])\n      .default('in')\n      .describe(\"Type of animation (in or out, default: in)\"),\n  effect: z.enum(['fade', 'show'])\n      .default('show')\n      .describe(\"Effect of animation (default: show)\"),\n  typeStagger: z.number()\n      .default(0.1)\n      .describe(\"Stagger of animation for each character (default: 0.1)\"),\n  ease: z.string()\n      .default('power1.out')\n      .describe(\"Easing function of animation (default: power1.out)\"),\n})\n\nexport class TypeTemplate extends EffectTemplate<typeof TypePropSchema> {\n  constructor() {\n    super({\n      name: \"Type\",\n      packageName: \"gaia.text\",\n      imports: [],\n      targetType: \"Text\",\n      propSchema: TypePropSchema,\n    })\n  }\n}\n","import {z} from \"zod\"\nimport {EffectTemplate} from \"@/core/ast/template/EffectTemplate\"\nimport {EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\n\nexport const CutPropSchema = EffectPropSchema.extend({\n  type: z.enum(['in', 'out'])\n      .default('in')\n      .describe(\"Wipe enter or wipe exit (default: enter)\"),\n  from: z.enum(['bottom', 'top', 'left', 'right'])\n      .default('bottom')\n      .describe(\"Wipe direction (default: bottom)\"),\n  ease: z.string()\n      .default('power1.out')\n      .describe(\"Easing function of animation (default: power1.out)\"),\n})\n\nexport class CutTemplate extends EffectTemplate<typeof CutPropSchema> {\n  constructor() {\n    super({\n      name: \"Cut\",\n      packageName: \"gaia.common\",\n      imports: [],\n      targetType: \"Any\",\n      propSchema: CutPropSchema,\n    })\n  }\n}\n","import {z} from \"zod\"\nimport {EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {CompositeTemplate} from \"@/core/ast/template/CompositeTemplate\"\nimport {CutPropSchema} from \"@/preset/template/common/CutTemplate\"\nimport {Ref, RefAnimation} from \"@/core/ast/animation/logical/impl/RefAnimation\"\nimport {ResolveContext} from \"@/core/exec/resolve/ResolveContext\"\n\nexport const CutInPropSchema = EffectPropSchema.extend({\n  from: z.enum(['bottom', 'top', 'left', 'right'])\n      .default('bottom')\n      .describe(\"Wipe direction (default: bottom)\"),\n  ease: z.string()\n      .default('power1.out')\n      .describe(\"Easing function of animation (default: power1.out)\"),\n})\n\nexport class CutInTemplate extends CompositeTemplate<typeof CutInPropSchema, RefAnimation<typeof CutPropSchema>> {\n  constructor() {\n    super({\n      name: \"CutIn\",\n      packageName: \"gaia.common\",\n      imports: [],\n      targetType: \"Any\",\n      propSchema: CutInPropSchema,\n    })\n  }\n\n  instantiate<ObjType, AniType>(cxt: ResolveContext<ObjType, AniType>,\n                                props: z.output<typeof CutInPropSchema>): RefAnimation<typeof CutPropSchema> {\n    const {id, target, timing, from, ease} = props\n    return Ref.builder<typeof CutPropSchema>()\n        .ref('Cut')\n        .props({id, target, timing, from, type: 'in', ease})\n        .build()\n  }\n}\n","import {z} from \"zod\"\nimport {EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {CompositeTemplate} from \"@/core/ast/template/CompositeTemplate\"\nimport {CutPropSchema} from \"@/preset/template/common/CutTemplate\"\nimport {Ref, RefAnimation} from \"@/core/ast/animation/logical/impl/RefAnimation\"\nimport {ResolveContext} from \"@/core/exec/resolve/ResolveContext\"\n\nexport const CutOutPropSchema = EffectPropSchema.extend({\n  from: z.enum(['bottom', 'top', 'left', 'right'])\n      .default('bottom')\n      .describe(\"Wipe direction (default: bottom)\"),\n  ease: z.string()\n      .default('power1.out')\n      .describe(\"Easing function of animation (default: power1.out)\"),\n})\n\nexport class CutOutTemplate extends CompositeTemplate<typeof CutOutPropSchema, RefAnimation<typeof CutPropSchema>> {\n  constructor() {\n    super({\n      name: \"CutOut\",\n      packageName: \"gaia.common\",\n      imports: [],\n      targetType: \"Any\",\n      propSchema: CutOutPropSchema,\n    })\n  }\n\n  instantiate<ObjType, AniType>(cxt: ResolveContext<ObjType, AniType>,\n                                props: z.output<typeof CutOutPropSchema>): RefAnimation<typeof CutPropSchema> {\n    const {id, target, timing, from, ease} = props\n    return Ref.builder<typeof CutPropSchema>()\n        .ref('Cut')\n        .props({id, target, timing, from, type: 'out', ease})\n        .build()\n  }\n}\n","import {z} from \"zod\"\nimport {EffectTemplate} from \"@/core/ast/template/EffectTemplate\"\nimport {EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\n\nexport const GrowPropSchema = EffectPropSchema.extend({\n  type: z.enum(['in', 'out'])\n      .default('in')\n      .describe(\"Type of animation: in, out (default: in)\"),\n  from: z.enum(['bottom', 'top', 'left', 'right'])\n      .default('bottom')\n      .describe(\"Animation direction (default: bottom)\"),\n  ease: z.string()\n      .default('power1.out')\n      .describe(\"Easing function of animation (default: power1.out)\"),\n})\n\nexport class GrowTemplate extends EffectTemplate<typeof GrowPropSchema> {\n  constructor() {\n    super({\n      name: \"Grow\",\n      packageName: \"gaia.common\",\n      imports: [],\n      targetType: \"Any\",\n      propSchema: GrowPropSchema,\n    })\n  }\n}\n","import {z} from \"zod\"\nimport {EffectTemplate} from \"@/core/ast/template/EffectTemplate\"\nimport {EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\n\nexport const ChangeColorPropSchema = EffectPropSchema.extend({\n  type: z.enum(['to', 'from'])\n      .default('to')\n      .describe(\"Type of animation: to, from (default: to)\"),\n  fill: z.string()\n      .default('#ff0000')\n      .describe(\"Color to fill (default: #ff0000)\"),\n  ease: z.string()\n      .default('power1.out')\n      .describe(\"Easing function of animation (default: power1.out)\"),\n})\n\nexport class ChangeColorTemplate extends EffectTemplate<typeof ChangeColorPropSchema> {\n  constructor() {\n    super({\n      name: \"ChangeColor\",\n      packageName: \"gaia.common\",\n      imports: [],\n      targetType: \"Any\",\n      propSchema: ChangeColorPropSchema,\n    })\n  }\n}\n","import {z} from \"zod\"\nimport {EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {CompositeTemplate} from \"@/core/ast/template/CompositeTemplate\"\nimport {ResolveContext} from \"@/core/exec/resolve/ResolveContext\"\nimport {MovePropSchema} from \"@/preset/template/common/MoveTemplate\"\nimport {Ref, RefAnimation} from \"@/core/ast/animation/logical/impl/RefAnimation\"\n\nexport const MoveFromPropSchema = EffectPropSchema.extend({\n  x: z.number().or(z.string()).optional(),\n  y: z.number().or(z.string()).optional(),\n  ease: z.string()\n      .default('power1.out')\n      .describe(\"Easing function of animation (default: power1.out)\"),\n})\n\nexport class MoveFromTemplate extends CompositeTemplate<typeof MoveFromPropSchema, RefAnimation<typeof MovePropSchema>> {\n  constructor() {\n    super({\n      name: \"MoveFrom\",\n      packageName: \"gaia.common\",\n      imports: [],\n      targetType: \"Any\",\n      propSchema: MoveFromPropSchema,\n    })\n  }\n\n  instantiate<ObjType, AniType>(cxt: ResolveContext<ObjType, AniType>,\n                                props: z.output<typeof MoveFromPropSchema>): RefAnimation<typeof MovePropSchema> {\n    const {id, target, timing, x, y, ease} = props\n    return Ref.builder<typeof MovePropSchema>()\n        .ref('Move')\n        .props({id, target, timing, from: {x, y}, ease})\n        .build()\n  }\n}\n","import {z} from \"zod\"\nimport {EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {CompositeTemplate} from \"@/core/ast/template/CompositeTemplate\"\nimport {ResolveContext} from \"@/core/exec/resolve/ResolveContext\"\nimport {MovePropSchema} from \"@/preset/template/common/MoveTemplate\"\nimport {Ref, RefAnimation} from \"@/core/ast/animation/logical/impl/RefAnimation\"\n\nexport const MoveToPropSchema = EffectPropSchema.extend({\n  x: z.number().or(z.string()).optional(),\n  y: z.number().or(z.string()).optional(),\n  ease: z.string()\n      .default('power1.out')\n      .describe(\"Easing function of animation (default: power1.out)\"),\n})\n\nexport class MoveToTemplate extends CompositeTemplate<typeof MoveToPropSchema, RefAnimation<typeof MovePropSchema>> {\n  constructor() {\n    super({\n      name: \"MoveTo\",\n      packageName: \"gaia.common\",\n      imports: [],\n      targetType: \"Any\",\n      propSchema: MoveToPropSchema,\n    })\n  }\n\n  instantiate<ObjType, AniType>(cxt: ResolveContext<ObjType, AniType>,\n                                props: z.output<typeof MoveToPropSchema>): RefAnimation<typeof MovePropSchema> {\n    const {id, target, timing, x, y, ease} = props\n    return Ref.builder<typeof MovePropSchema>()\n        .ref('Move')\n        .props({id, target, timing, to: {x, y}, ease})\n        .build()\n  }\n}\n","import {z} from \"zod\"\nimport {EffectTemplate} from \"@/core/ast/template/EffectTemplate\"\nimport {EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\n\n\nexport const WheelPropSchema = EffectPropSchema.extend({\n  type: z.enum(['in', 'out'])\n      .default('in')\n      .describe(\"Type of animation: \\\"in\\\" or \\\"out\\\" (default: \\\"in\\\")\"),\n  // direction: z.enum(['clockwise', 'counterclockwise'])\n  //     .default('clockwise')\n  //     .describe(\"Direction of the circle path: \\\"clockwise\\\" or \\\"counterclockwise\\\" (default: \\\"clockwise\\\")\"),\n  // center: z.string()\n  //     .default('50% 50%')\n  //     .describe(\"Center of the circle path (default: \\\"50% 50%\\\")\"),\n  startAngle: z.number()\n      .default(0)\n      .describe(\"Start angle (in degree) of the circle path (default: 0)\"),\n  sweepAngle: z.number()\n      .default(360)\n      .describe(\"Sweep angle (in degree) of the circle path (default: 360)\"),\n  ease: z.string()\n      .default('power1.out')\n      .describe(\"Easing function of animation (default: power1.out)\"),\n})\n\nexport class WheelTemplate extends EffectTemplate<typeof WheelPropSchema> {\n  constructor() {\n    super({\n      name: \"Wheel\",\n      packageName: \"gaia.common\",\n      imports: [],\n      targetType: \"Any\",\n      propSchema: WheelPropSchema,\n    })\n  }\n}\n","import {z} from \"zod\"\nimport {Sync, SyncAnimation} from \"@/core/ast/animation/logical/impl/SyncAnimation\"\nimport {AniPropSchema} from \"@/core/ast/animation/logical/LogicalAnimation\"\nimport {Ref} from \"@/core/ast/animation/logical/impl/RefAnimation\"\nimport {CompositeTemplate} from \"@/core/ast/template/CompositeTemplate\"\nimport {ResolveContext} from \"@/core/exec/resolve/ResolveContext\"\nimport {FadePropSchema} from \"@/preset/template/common/FadeTemplate\"\nimport {WipePropSchema} from \"@/preset/template/common/WipeTemplate\"\n\nexport const BarLabelEnterPropSchema = AniPropSchema.extend({\n  from: z.enum(['bottom', 'top', 'left', 'right'])\n      .default('bottom')\n      .describe(\"Wipe direction (default: bottom)\"),\n  ease: z.string()\n      .default('power1.out')\n      .describe(\"Easing function of animation (default: power1.out)\"),\n})\n\nexport class BarLabelEnterTemplate extends CompositeTemplate<typeof BarLabelEnterPropSchema, SyncAnimation> {\n  constructor() {\n    super({\n      name: \"BarLabelEnter\",\n      packageName: \"gaia.chart\",\n      imports: [],\n      targetType: \"gaia.chart.BarChart\",\n      propSchema: BarLabelEnterPropSchema,\n    })\n  }\n\n  instantiate(cxt: ResolveContext<unknown, unknown>,\n              props: z.output<typeof BarLabelEnterPropSchema>): SyncAnimation {\n    const {id, target, timing, from, ease} = props\n\n    // const labelFadeIn = Ref<typeof FadePropSchema>({\n    //   ref: 'Fade',\n    //   target: 'label',\n    //   type: 'in',\n    //   ease: ease,\n    // })\n\n    const labelFadeIn = Ref.builder<typeof FadePropSchema>()\n        .ref('Fade')\n        .selectAll(\".BarMark .Label\")\n        .props({type: 'in', ease})\n        .build()\n\n    const barWipe = Ref.builder<typeof WipePropSchema>()\n        .ref('Wipe')\n        .selectAll(\".BarMark .Bar\")\n        .props({from, ease})\n        .build()\n\n    return Sync.builder()\n        .props({id, target, timing})\n        .append(labelFadeIn)\n        .append(barWipe)\n        .build()\n  }\n}\n","import {z} from \"zod\"\nimport {EffectTemplate} from \"@/core/ast/template/EffectTemplate\"\nimport {EffectAnimation, EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {ResolveContext} from \"@/core/exec/resolve/ResolveContext\"\n\n\nexport const DisplayPathPropSchema = EffectPropSchema.extend({\n  reverseDirection: z.boolean()\n      .default(false)\n      .describe(\"Reverse animation direction (default: false)\"),\n  aniTime: z.number()\n      .default(1)\n      .describe(\"Animation time for the path (default: 1)\"),\n  displayTime: z.number()\n      .default(3)\n      .describe(\"Display time for the path (default: 3)\"),\n  ease: z.string()\n      .default('power1.out')\n      .describe(\"Easing function of animation (default: power1.out)\"),\n})\n\nexport class DisplayPathTemplate extends EffectTemplate<typeof DisplayPathPropSchema> {\n  constructor() {\n    super({\n      name: \"DisplayPath\",\n      packageName: \"gaia.path\",\n      imports: [],\n      targetType: \"Line\",\n      propSchema: DisplayPathPropSchema,\n    })\n  }\n\n  create(cxt: ResolveContext<unknown, unknown>, props: z.output<typeof DisplayPathPropSchema>): DisplayPathEffect {\n    const {name, packageName, targetType, propSchema} = this.meta\n    return new DisplayPathEffect(name, packageName, targetType, propSchema, props)\n  }\n}\n\nexport class DisplayPathEffect extends EffectAnimation<typeof DisplayPathPropSchema> {\n  computeDuration(cxt: ResolveContext<unknown, unknown>): number {\n    return this.timing.duration ?? this.getBlinkDuration()\n  }\n\n  getBlinkDuration(): number {\n    return this.prop('aniTime') * 2 + this.prop('displayTime')\n  }\n\n  clone(): DisplayPathEffect {\n    return new DisplayPathEffect(this.name, this.packageName, this.targetType, this.propSchema, {\n      id: this.id,\n      target: this.target.clone(),\n      timing: this.timing.clone(),\n      reverseDirection: this.prop('reverseDirection'),\n      aniTime: this.prop('aniTime'),\n      displayTime: this.prop('displayTime'),\n      ease: this.prop('ease'),\n    })\n  }\n}\n","import {z} from \"zod\"\nimport {EffectTemplate} from \"@/core/ast/template/EffectTemplate\"\nimport {EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\n\n\nexport const PathDrawPropSchema = EffectPropSchema.extend({\n  reverseDirection: z.boolean()\n      .default(false)\n      .describe(\"Reverse animation direction (default: false)\"),\n  ease: z.string()\n      .default('power1.out')\n      .describe(\"Easing function of animation (default: power1.out)\"),\n})\n\nexport class PathDrawTemplate extends EffectTemplate<typeof PathDrawPropSchema> {\n  constructor() {\n    super({\n      name: \"PathDraw\",\n      packageName: \"gaia.path\",\n      imports: [],\n      targetType: \"Line\",\n      propSchema: PathDrawPropSchema,\n    })\n  }\n}\n","import {z} from \"zod\"\nimport {EffectTemplate} from \"@/core/ast/template/EffectTemplate\"\nimport {EffectAnimation, EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {ResolveContext} from \"@/core/exec/resolve/ResolveContext\"\n\nexport const CirclePropSchema = EffectPropSchema.extend({\n  direction: z.enum(['clockwise', 'counterclockwise'])\n      .default('clockwise')\n      .describe(\"Direction of the circle path: \\\"clockwise\\\" or \\\"counterclockwise\\\" (default: \\\"clockwise\\\")\"),\n  aniTime: z.number()\n      .default(1)\n      .describe(\"Animation time for the circle path (default: 1)\"),\n  displayTime: z.number()\n      .default(3)\n      .describe(\"Display time for the circle path (default: 3)\"),\n  stroke: z.string()\n      .default('#ff6868')\n      .describe(\"Stroke color of the circle path (default: #ff6868)\"),\n  strokeWidth: z.number()\n      .default(3)\n      .describe(\"Stroke width of the circle path (default: 3)\"),\n  // dx: z.number()\n  //     .default(0)\n  //     .describe(\"X offset of the circle path (default: 0)\"),\n  // dy: z.number()\n  //     .default(0)\n  //     .describe(\"Y offset of the circle path (default: 0)\"),\n  // width: z.number().or(z.string())\n  //     .default('100%')\n  //     .describe('Width of the circle path, can be a pixel value (e.g., \"100px\"), a percentage value (e.g., 110%) (default: 100%)'),\n  // height: z.number().or(z.string())\n  //     .default('100%')\n  //     .describe('Height of the circle path, can be a pixel value (e.g., \"100px\"), a percentage value (e.g., 110%) (default: 100%)'),\n  ease: z.string()\n      .default('power1.out')\n      .describe(\"Easing function of animation (default: power1.out)\"),\n})\n\nexport class CircleTemplate extends EffectTemplate<typeof CirclePropSchema> {\n  constructor() {\n    super({\n      name: \"Circle\",\n      packageName: \"gaia.annotation\",\n      imports: [],\n      targetType: \"Any\",\n      propSchema: CirclePropSchema,\n    })\n  }\n\n  create(cxt: ResolveContext<unknown, unknown>, props: z.output<typeof CirclePropSchema>): CircleEffect {\n    const {name, packageName, targetType, propSchema} = this.meta\n    return new CircleEffect(name, packageName, targetType, propSchema, props)\n  }\n}\n\nexport class CircleEffect extends EffectAnimation<typeof CirclePropSchema> {\n  computeDuration(cxt: ResolveContext<unknown, unknown>): number {\n    return this.timing.duration ?? this.getBlinkDuration()\n  }\n\n  getBlinkDuration(): number {\n    return this.prop('aniTime') * 2 + this.prop('displayTime')\n  }\n\n  clone(): CircleEffect {\n    return new CircleEffect(this.name, this.packageName, this.targetType, this.propSchema, {\n      id: this.id,\n      target: this.target.clone(),\n      timing: this.timing.clone(),\n      direction: this.props().direction,\n      aniTime: this.props().aniTime,\n      displayTime: this.props().displayTime,\n      stroke: this.props().stroke,\n      strokeWidth: this.props().strokeWidth,\n    })\n  }\n}\n","import {z} from \"zod\"\nimport {EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {CompositeTemplate} from \"@/core/ast/template/CompositeTemplate\"\nimport {Ref, RefAnimation} from \"@/core/ast/animation/logical/impl/RefAnimation\"\nimport {ResolveContext} from \"@/core/exec/resolve/ResolveContext\"\nimport {WipePropSchema} from \"@/preset/template/common/WipeTemplate\"\n\nexport const WipeInPropSchema = EffectPropSchema.extend({\n  from: z.enum(['bottom', 'top', 'left', 'right'])\n      .default('bottom')\n      .describe(\"Wipe direction (default: bottom)\"),\n  ease: z.string()\n      .default('power1.out')\n      .describe(\"Easing function of animation (default: power1.out)\"),\n})\n\nexport class WipeInTemplate extends CompositeTemplate<typeof WipeInPropSchema, RefAnimation<typeof WipePropSchema>> {\n  constructor() {\n    super({\n      name: \"WipeIn\",\n      packageName: \"gaia.common\",\n      imports: [],\n      targetType: \"Any\",\n      propSchema: WipeInPropSchema,\n    })\n  }\n\n  instantiate<ObjType, AniType>(cxt: ResolveContext<ObjType, AniType>,\n                                props: z.output<typeof WipeInPropSchema>): RefAnimation<typeof WipePropSchema> {\n    const {id, target, timing, from, ease} = props\n    return Ref.builder<typeof WipePropSchema>()\n        .ref('Wipe')\n        .props({id, target, timing, from, type: 'in', ease})\n        .build()\n  }\n}\n","import {z} from \"zod\"\nimport {EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {CompositeTemplate} from \"@/core/ast/template/CompositeTemplate\"\nimport {Ref, RefAnimation} from \"@/core/ast/animation/logical/impl/RefAnimation\"\nimport {ResolveContext} from \"@/core/exec/resolve/ResolveContext\"\nimport {WipePropSchema} from \"@/preset/template/common/WipeTemplate\"\n\nexport const WipeOutPropSchema = EffectPropSchema.extend({\n  from: z.enum(['bottom', 'top', 'left', 'right'])\n      .default('bottom')\n      .describe(\"Wipe direction (default: bottom)\"),\n  ease: z.string()\n      .default('power1.out')\n      .describe(\"Easing function of animation (default: power1.out)\"),\n})\n\nexport class WipeOutTemplate extends CompositeTemplate<typeof WipeOutPropSchema, RefAnimation<typeof WipePropSchema>> {\n  constructor() {\n    super({\n      name: \"WipeOut\",\n      packageName: \"gaia.common\",\n      imports: [],\n      targetType: \"Any\",\n      propSchema: WipeOutPropSchema,\n    })\n  }\n\n  instantiate<ObjType, AniType>(cxt: ResolveContext<ObjType, AniType>,\n                                props: z.output<typeof WipeOutPropSchema>): RefAnimation<typeof WipePropSchema> {\n    const {id, target, timing, from, ease} = props\n    return Ref.builder<typeof WipePropSchema>()\n        .ref('Wipe')\n        .props({id, target, timing, from, type: 'out', ease})\n        .build()\n  }\n}\n","import {z} from \"zod\"\nimport {EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {CompositeTemplate} from \"@/core/ast/template/CompositeTemplate\"\nimport {Ref, RefAnimation} from \"@/core/ast/animation/logical/impl/RefAnimation\"\nimport {ResolveContext} from \"@/core/exec/resolve/ResolveContext\"\nimport {ZoomPropSchema} from \"@/preset/template/common/ZoomTemplate\"\n\nexport const ZoomInPropSchema = EffectPropSchema.extend({\n  ease: z.string()\n      .default('back.out')\n      .describe(\"Easing function of animation (default: back.out)\"),\n})\n\nexport class ZoomInTemplate extends CompositeTemplate<typeof ZoomInPropSchema, RefAnimation<typeof ZoomPropSchema>> {\n  constructor() {\n    super({\n      name: \"ZoomIn\",\n      packageName: \"gaia.common\",\n      imports: [],\n      targetType: \"Any\",\n      propSchema: ZoomInPropSchema,\n    })\n  }\n\n  instantiate<ObjType, AniType>(cxt: ResolveContext<ObjType, AniType>,\n                                props: z.output<typeof ZoomInPropSchema>): RefAnimation<typeof ZoomPropSchema> {\n    const {id, target, timing, ease} = props\n    return Ref.builder<typeof ZoomPropSchema>()\n        .ref('Zoom')\n        .props({id, target, timing, type: 'in', ease})\n        .build()\n  }\n}\n","import {z} from \"zod\"\nimport {EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {CompositeTemplate} from \"@/core/ast/template/CompositeTemplate\"\nimport {Ref, RefAnimation} from \"@/core/ast/animation/logical/impl/RefAnimation\"\nimport {ResolveContext} from \"@/core/exec/resolve/ResolveContext\"\nimport {ZoomPropSchema} from \"@/preset/template/common/ZoomTemplate\"\n\nexport const ZoomOutPropSchema = EffectPropSchema.extend({\n  ease: z.string()\n      .default('back.out')\n      .describe(\"Easing function of animation (default: back.out)\"),\n})\n\nexport class ZoomOutTemplate extends CompositeTemplate<typeof ZoomOutPropSchema, RefAnimation<typeof ZoomPropSchema>> {\n  constructor() {\n    super({\n      name: \"ZoomOut\",\n      packageName: \"gaia.common\",\n      imports: [],\n      targetType: \"Any\",\n      propSchema: ZoomOutPropSchema,\n    })\n  }\n\n  instantiate<ObjType, AniType>(cxt: ResolveContext<ObjType, AniType>,\n                                props: z.output<typeof ZoomOutPropSchema>): RefAnimation<typeof ZoomPropSchema> {\n    const {id, target, timing, ease} = props\n    return Ref.builder<typeof ZoomPropSchema>()\n        .ref('Wipe')\n        .props({id, target, timing, type: 'out', ease})\n        .build()\n  }\n}\n","import {EffectTemplate} from \"@/core/ast/template/EffectTemplate\"\nimport {EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\n\nexport const EmptyPropSchema = EffectPropSchema.extend({\n})\n\nexport class EmptyTemplate extends EffectTemplate<typeof EmptyPropSchema> {\n  constructor() {\n    super({\n      name: \"Empty\",\n      packageName: \"gaia.common\",\n      imports: [],\n      targetType: \"Any\",\n      propSchema: EmptyPropSchema,\n    })\n  }\n}\n","import {z} from \"zod\"\nimport {EffectTemplate} from \"@/core/ast/template/EffectTemplate\"\nimport {EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\n\nexport const SectorWheelPropSchema = EffectPropSchema.extend({\n  type: z.enum(['in', 'out'])\n      .default('in')\n      .describe(\"Type of animation (default: in)\"),\n  centerTarget: z.string()\n      .default('')\n      .describe(\"Filter transform for elements that used for center computing. Default: '', means using same elements in selected by target.\"),\n  centerPos: z.string()\n      .default('')\n      .describe(\"Center position of animation (default: ''. E.g., 50% 50%). If set, centerTarget will be ignored.\"),\n  startAngle: z.number()\n      .default(0)\n      .describe(\"Start angle of animation (default: 0)\"),\n  sweepAngle: z.number()\n      .default(360)\n      .describe(\"Sweep angle of animation (default: 360)\"),\n  ease: z.string()\n      .default('power1.out')\n      .describe(\"Easing function of animation (default: power1.out)\"),\n})\n\nexport class SectorWheelTemplate extends EffectTemplate<typeof SectorWheelPropSchema> {\n  constructor() {\n    super({\n      name: \"SectorWheel\",\n      packageName: \"gaia.chart\",\n      imports: [],\n      targetType: \"Any\",\n      propSchema: SectorWheelPropSchema,\n    })\n  }\n}\n","import {z} from \"zod\"\nimport {EffectTemplate} from \"@/core/ast/template/EffectTemplate\"\nimport {EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\n\nexport const FloatPropSchema = EffectPropSchema.extend({\n  type: z.enum(['in', 'out'])\n      .default('in')\n      .describe(\"Type of animation: in, out (default: in)\"),\n  from: z.enum(['bottom', 'top', 'left', 'right'])\n      .default('bottom')\n      .describe(\"Animation direction (default: bottom)\"),\n  distance: z.number()\n      .default(30)\n      .describe(\"Distance of animation (default: 30)\"),\n  ease: z.string()\n      .default('power1.out')\n      .describe(\"Easing function of animation (default: power1.out)\"),\n})\n\nexport class FloatTemplate extends EffectTemplate<typeof FloatPropSchema> {\n  constructor() {\n    super({\n      name: \"Float\",\n      packageName: \"gaia.common\",\n      imports: [],\n      targetType: \"Any\",\n      propSchema: FloatPropSchema,\n    })\n  }\n}\n","import {z} from \"zod\"\nimport {EffectTemplate} from \"@/core/ast/template/EffectTemplate\"\nimport {EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\n\nexport const FlyPropSchema = EffectPropSchema.extend({\n  type: z.enum(['in', 'out'])\n      .default('in')\n      .describe(\"Type of animation: in, out (default: in)\"),\n  from: z.enum(['bottom', 'top', 'left', 'right'])\n      .default('bottom')\n      .describe(\"Animation direction (default: bottom)\"),\n  ease: z.string()\n      .default('power1.out')\n      .describe(\"Easing function of animation (default: power1.out)\"),\n})\n\nexport class FlyTemplate extends EffectTemplate<typeof FlyPropSchema> {\n  constructor() {\n    super({\n      name: \"Fly\",\n      packageName: \"gaia.common\",\n      imports: [],\n      targetType: \"Any\",\n      propSchema: FlyPropSchema,\n    })\n  }\n}\n","import {z} from \"zod\"\nimport {EffectTemplate} from \"@/core/ast/template/EffectTemplate\"\nimport {EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\n\nexport const HighlightPropSchema = EffectPropSchema.extend({\n  contrastTarget: z.string()\n      .default('*')\n      .describe(\"Selector of contrast target (default: *, all other elements in the parent selection)\"),\n  contrastOpacity: z.number()\n      .default(0.3)\n      .describe(\"Opacity of contrast target (default: 0.3)\"),\n  ease: z.string()\n      .default('power1.out')\n      .describe(\"Easing function of animation (default: power1.out)\"),\n})\n\nexport class HighlightTemplate extends EffectTemplate<typeof HighlightPropSchema> {\n  constructor() {\n    super({\n      name: \"Highlight\",\n      packageName: \"gaia.common\",\n      imports: [],\n      targetType: \"Any\",\n      propSchema: HighlightPropSchema,\n    })\n  }\n}\n","import {z} from \"zod\"\nimport {EffectTemplate} from \"@/core/ast/template/EffectTemplate\"\nimport {EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\n\nexport const DynamicNumberPropSchema = EffectPropSchema.extend({\n  numStart: z.number()\n      .nullable()\n      .default(0)\n      .describe(\"Start number of animation (default: 0). If null, the start number will be the current number of the target.\"),\n  numEnd: z.number()\n      .nullable()\n      .default(null)\n      .describe(\"End number of animation (default: null). If null, the end number will be the current number of the target.\"),\n  toFixed: z.number()\n      .default(0)\n      .describe(\"Number of digits after the decimal point (default: 0)\"),\n  ease: z.string()\n      .default('power1.out')\n      .describe(\"Easing function of animation (default: power1.out)\"),\n})\n\nexport class DynamicNumberTemplate extends EffectTemplate<typeof DynamicNumberPropSchema> {\n  constructor() {\n    super({\n      name: \"DynamicNumber\",\n      packageName: \"gaia.text\",\n      imports: [],\n      targetType: \"Text\",\n      propSchema: DynamicNumberPropSchema,\n    })\n  }\n}\n","import {z} from \"zod\"\nimport {EffectTemplate} from \"@/core/ast/template/EffectTemplate\"\nimport {EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\n\nexport const SetPropSchema = EffectPropSchema.extend({\n  attr: z.string()\n      .describe(\"Attribute to set\"),\n  value: z.union([z.string(), z.number(), z.boolean()])\n      .describe(\"Value of the attribute\")\n})\n\nexport class SetTemplate extends EffectTemplate<typeof SetPropSchema> {\n  constructor() {\n    super({\n      name: \"Set\",\n      packageName: \"gaia.common\",\n      imports: [],\n      targetType: \"Any\",\n      propSchema: SetPropSchema,\n    })\n  }\n}\n","import {z} from \"zod\"\nimport {EffectTemplate} from \"@/core/ast/template/EffectTemplate\"\nimport {EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\n\n\nexport const LineFlowPropSchema = EffectPropSchema.extend({\n  reverseDirection: z.boolean()\n      .default(false)\n      .describe(\"Reverse animation direction (default: false)\"),\n  dash: z.string()\n      .default('80% 10%')\n      .describe(\"Dash pattern of the line (default: '15% 70% 15%')\"),\n  times: z.number()\n      .default(1)\n      .describe(\"Number of times to play the animation (default: 1)\"),\n  ease: z.string()\n      .default('linear')\n      .describe(\"Easing function of animation (default: linear)\"),\n})\n\nexport class LineFlowTemplate extends EffectTemplate<typeof LineFlowPropSchema> {\n  constructor() {\n    super({\n      name: \"LineFlow\",\n      packageName: \"gaia.path\",\n      imports: [],\n      targetType: \"Line\",\n      propSchema: LineFlowPropSchema,\n    })\n  }\n}\n","import {z} from \"zod\"\nimport {EffectTemplate} from \"@/core/ast/template/EffectTemplate\"\nimport {EffectAnimation, EffectPropSchema} from \"@/core/ast/animation/logical/impl/EffectAnimation\"\nimport {ResolveContext} from \"@/core/exec/resolve/ResolveContext\"\n\nexport const CameraPropSchema = EffectPropSchema.extend({\n  from: z.object({\n    scale: z.number().optional(),\n    x: z.number().or(z.string()).optional(),\n    y: z.number().or(z.string()).optional(),\n  }).optional()\n      .describe(\"Transform from position (scale, x, y). Example: {scale: 0.5, x: 100, y: 100}, {x: '-=10', y: '+=10px'}\"),\n  to: z.object({\n    scale: z.number().optional(),\n    x: z.number().or(z.string()).optional(),\n    y: z.number().or(z.string()).optional(),\n  }).optional()\n      .describe(\"Move to position (x, y). Example: {scale: 0.5, x: 100, y: 100}, {x: '-=10', y: '+=10px'}\"),\n  origin: z.string()\n      .default('50% 50%')\n      .describe(\"Origin of transformation (default: \\\"50% 50%\\\")\"),\n  reset: z.boolean()\n      .default(false)\n      .describe(\"Reset the camera position (default: false)\"),\n  ease: z.string()\n      .default('power1.out')\n      .describe(\"Easing function of animation (default: power1.out)\"),\n})\n\nexport class CameraTemplate extends EffectTemplate<typeof CameraPropSchema> {\n  constructor() {\n    super({\n      name: \"Camera\",\n      packageName: \"gaia.common\",\n      imports: [],\n      targetType: \"Any\",\n      propSchema: CameraPropSchema,\n    })\n  }\n\n  create(cxt: ResolveContext<unknown, unknown>, props: z.output<typeof CameraPropSchema>): CameraEffect {\n    const {name, packageName, targetType, propSchema} = this.meta\n    return new CameraEffect(name, packageName, targetType, propSchema, props)\n  }\n}\n\nexport class CameraEffect extends EffectAnimation<typeof CameraPropSchema> {\n  computeTotalDuration(cxt: ResolveContext<unknown, unknown>): number {\n    return this.computeDuration(cxt)\n  }\n\n  clone(): CameraEffect {\n    throw new Error(\"CameraEffect can't be cloned\")\n  }\n}\n","import {GaiaSession} from \"@/session/GaiaSession\"\nimport {BaseTemplateType} from \"@/core/ast/template/BaseTemplate\"\n\n\nimport {CustomTemplate} from \"@/preset/template/common/CustomTemplate\"\nimport {FadeTemplate} from \"@/preset/template/common/FadeTemplate\"\nimport {WipeTemplate} from \"@/preset/template/common/WipeTemplate\"\nimport {MoveTemplate} from \"@/preset/template/common/MoveTemplate\"\nimport {ZoomTemplate} from \"@/preset/template/common/ZoomTemplate\"\nimport {TypeTemplate} from \"@/preset/template/text/TypeTemplate\"\nimport {CutTemplate} from \"@/preset/template/common/CutTemplate\"\nimport {CutInTemplate} from \"@/preset/template/common/CutInTemplate\"\nimport {CutOutTemplate} from \"@/preset/template/common/CutOutTemplate\"\nimport {GrowTemplate} from \"@/preset/template/common/GrowTemplate\"\nimport {ChangeColorTemplate} from \"@/preset/template/common/ChangeColorTemplate\"\nimport {MoveFromTemplate} from \"@/preset/template/common/MoveFromTemplate\"\nimport {MoveToTemplate} from \"@/preset/template/common/MoveToTemplate\"\nimport {WheelTemplate} from \"@/preset/template/common/WheelTemplate\"\n\nimport {BarLabelEnterTemplate} from \"@/preset/template/bar-chart/BarLabelEnterTemplate\"\n\nimport {DisplayPathTemplate} from \"@/preset/template/path/DisplayPathTemplate\"\nimport {PathDrawTemplate} from \"@/preset/template/path/PathDrawTemplate\"\n\nimport {CircleTemplate} from \"@/preset/template/annotation/CircleTemplate\"\nimport {WipeInTemplate} from \"@/preset/template/common/WipeInTemplate\"\nimport {WipeOutTemplate} from \"@/preset/template/common/WipeOutTemplate\"\nimport {ZoomInTemplate} from \"@/preset/template/common/ZoomInTemplate\"\nimport {ZoomOutTemplate} from \"@/preset/template/common/ZoomOutTemplate\"\nimport {EmptyTemplate} from \"@/preset/template/common/EmptyTemplate\"\n\nimport {SectorWheelTemplate} from \"@/preset/template/pie-chart/SectorWheelTemplate\"\nimport {FloatTemplate} from \"@/preset/template/common/FloatTemplate\"\nimport {FlyTemplate} from \"@/preset/template/common/FlyTemplate\"\nimport {HighlightTemplate} from \"@/preset/template/common/HighlightTemplate\"\nimport {DynamicNumberTemplate} from \"@/preset/template/text/DynamicNumberTemplate\"\nimport {SetTemplate} from \"@/preset/template/common/SetTemplate\"\nimport {LineFlowTemplate} from \"@/preset/template/path/LineFlowTemplate\"\nimport {CameraTemplate} from \"@/preset/template/camera/CameraTemplate\"\n\n\nexport function getPresetTemplates(session: GaiaSession): BaseTemplateType[] {\n  return [\n    /* Common */\n    new CustomTemplate(),\n    new EmptyTemplate(),\n    new FadeTemplate(),\n    new WipeTemplate(),\n    new WipeInTemplate(),\n    new WipeOutTemplate(),\n    new MoveTemplate(),\n    new ZoomTemplate(),\n    new ZoomInTemplate(),\n    new ZoomOutTemplate(),\n    new CutTemplate(),\n    new CutInTemplate(),\n    new CutOutTemplate(),\n    new GrowTemplate(),\n    new ChangeColorTemplate(),\n    new MoveFromTemplate(),\n    new MoveToTemplate(),\n    new WheelTemplate(),\n    new FloatTemplate(),\n    new FlyTemplate(),\n    new HighlightTemplate(),\n    new SetTemplate(),\n    new CameraTemplate(),\n\n    /* Text */\n    new TypeTemplate(),\n    new DynamicNumberTemplate(),\n\n    /* Path */\n    new DisplayPathTemplate(),\n    new PathDrawTemplate(),\n    new LineFlowTemplate(),\n\n    /* Bar Chart */\n    new BarLabelEnterTemplate(),\n\n    /* Pie Chart */\n    new SectorWheelTemplate(),\n\n    /* Annotation */\n    new CircleTemplate(),\n  ]\n}\n","import {TargetModel, VirtualElementType} from \"@/core/ast/target/TargetModel\"\nimport {Binder} from \"@/core/ast/target/Binder\"\nimport assert from \"assert\"\nimport {BaseSVGTargetModel} from \"@/core/ast/target/impl/svg/BaseSVGTargetModel\"\nimport {TargetSelection} from \"@/core/ast/target/TargetSelection\"\n\n/**\n * Target model that uses SVG and binder as input.\n */\nexport class BSVGTargetModel extends BaseSVGTargetModel {\n  private binder: Binder\n\n  protected vNodeId2RealId: Map<string, string> = new Map()\n\n  constructor(origin: SVGSVGElement, binder: Binder) {\n    super(origin)\n    this.binder = binder\n    assert(binder.from == 'svg', 'Attribute \"from\" of BSVGTargetModel binder must be \"svg\".')\n  }\n\n  initRootType() {\n    this.rootTargetType = this.session.typeLibrary.get(this.binder.to)\n    if (this.rootTargetType == null) {\n      throw new Error(`Target type ${this.binder.to} not found when processing root target type of BSVGTargetModel.`)\n    }\n  }\n\n  completeVirtualModel() {\n    let idCnt = 0\n    const getNextId = () => {\n      idCnt++\n      let _id = `el-${idCnt}`\n      while (this.realElementIdSet.has(_id)) {\n        idCnt++\n        _id = `el-${idCnt}`\n      }\n      return _id\n    }\n\n    if (this.rootTargetType.name === 'Any') {\n      if (this.binder.rules.length > 0) {\n        TargetModel.logger.warn(`Root target type is \"Any\" but binder has rules. Rules will be ignored.`)\n      }\n      // add id in origin obj\n      if (this.origin.id == null || this.origin.id == '') {\n        this.origin.id = getNextId()\n      }\n      Array.from(this.origin.querySelectorAll('*')).forEach(el => {\n        if (el.id == null || el.id == '') {\n          el.id = getNextId()\n        }\n        this.vNodeId2RealId.set(el.id, el.id)\n      })\n\n      const vm = this.virtualModel\n      const vEl = this.origin.cloneNode(true) as VirtualElementType\n      vm.appendChild(vEl)\n\n      // create selection\n      this.rootSelection = new TargetSelection([vEl], this, null)\n      return\n    }\n\n    for (const rule of this.binder.rules) {\n      const elements = this.origin.querySelectorAll<SVGElement>(rule.from)\n      if (elements.length == 0) {\n        TargetModel.logger.warn(`Rule ${JSON.stringify(rule)} matched 0 elements. Skip.`)\n        continue\n      }\n\n      if (rule.type === 'single') {\n        assert(elements.length == 1,\n            `A single builder rule ${JSON.stringify(rule)} can only match 1 element, but got ${elements.length}.`)\n        assert(rule.dataList == null, `A single builder rule ${JSON.stringify(rule)} cannot have dataList.`)\n        const el = elements[0]\n\n        // process id\n        const isElIdValid = el.id != null && el.id != ''\n        const isRuleIdValid = rule.id != null && rule.id != ''\n\n        let finalId\n\n        if (isElIdValid && isRuleIdValid) {\n          // replace id with rule.id\n          finalId = rule.id\n        } else if (isElIdValid) {\n          // use el.id\n          finalId = el.id\n        } else if (isRuleIdValid) {\n          // use rule.id, but set it to el.id\n          el.id = rule.id\n          finalId = rule.id\n        } else {\n          // both are invalid, generate a new id\n          finalId = getNextId()\n          el.id = finalId\n        }\n        this.vNodeId2RealId.set(finalId, el.id)\n\n        // process classList\n\n        const typeNode = this.queryOneTypeNode(rule.to)\n        const classList = typeNode.fullClassList\n        rule.classList.forEach(clazz => {\n          if (!classList.includes(clazz)) {\n            classList.push(clazz)\n          }\n        })\n\n        const vEl = this.createVirtualElement(el, finalId, classList, rule.data ?? {})\n        this.virtualModel.appendChild(vEl)\n\n      } else if (rule.type === 'batch') {\n        assert(rule.data == null || rule.dataList == null,\n            `Batch builder rule ${JSON.stringify(rule)} cannot have both data and dataList.`)\n        if (rule.dataList != null) {\n          assert(elements.length == rule.dataList.length,\n              `Batch builder rule ${JSON.stringify(rule)} matched ${elements.length} elements, but got ${rule.dataList.length} data.`)\n        }\n\n        // process classList\n        const typeNode = this.queryOneTypeNode(rule.to)\n        const classList = typeNode.fullClassList\n        rule.classList.forEach(clazz => {\n          if (!classList.includes(clazz)) {\n            classList.push(clazz)\n          }\n        })\n\n        elements.forEach((el, idx) => {\n          // process id\n          let finalId\n          const isElIdValid = el.id != null && el.id != ''\n          if (!isElIdValid) {\n            finalId = getNextId()\n            el.id = finalId\n          } else {\n            finalId = el.id\n          }\n          this.vNodeId2RealId.set(finalId, el.id)\n\n          // process data\n          let data\n          if (rule.dataList != null) {\n            // each element has its own data\n            data = rule.dataList[idx]\n          } else if (rule.data != null) {\n            // all elements share the same data\n            data = rule.data\n          } else {\n            data = {}\n          }\n\n          const vEl = this.createVirtualElement(el, finalId, classList, data ?? {})\n          this.virtualModel.appendChild(vEl)\n        })\n\n      } else {\n        throw new Error(`Unknown rule type: ${rule.type}`)\n      }\n    }\n\n    const virtualElements = Array.from(this.virtualModel.children) as VirtualElementType[]\n    this.rootSelection = new TargetSelection(virtualElements, this, null)\n  }\n\n  getRealElementById(id: string): SVGElement {\n    const realId = this.vNodeId2RealId.get(id)\n    assert(realId != null, `Cannot find real id for virtual id ${id}.`)\n    return this.origin.querySelector(`#${realId}`)\n  }\n}\n","import JSON5 from \"json5\"\nimport {BaseSVGTargetModel} from \"@/core/ast/target/impl/svg/BaseSVGTargetModel\"\nimport {TargetSelection} from \"@/core/ast/target/TargetSelection\"\nimport {VirtualElementType} from \"@/core/ast/target/TargetModel\"\nimport assert from \"assert\"\n\nexport class SSVGTargetModel extends BaseSVGTargetModel {\n  static readonly TYPE_ATTR = 'g-type'    // selector applied on target model\n  static readonly CLASS_ATTR = 'g-class'    // extra class added to target model\n  static readonly DATA_ATTR = 'g-data'\n  static readonly TARGET_TYPE_ATTR = 'g-target-type'\n\n  protected vNodeId2RealId: Map<string, string> = new Map()\n\n  constructor(origin: SVGSVGElement) {\n    super(origin)\n  }\n\n  initRootType() {\n    const rootEl = this.origin.querySelector(`[${SSVGTargetModel.TARGET_TYPE_ATTR}]`)\n    let targetTypeName\n    if (rootEl == null || rootEl.getAttribute(SSVGTargetModel.TARGET_TYPE_ATTR) == '') {\n      targetTypeName = 'Any'\n    } else {\n      targetTypeName = rootEl.getAttribute(SSVGTargetModel.TARGET_TYPE_ATTR)\n    }\n    this.rootTargetType = this.session.typeLibrary.get(targetTypeName)\n    if (this.rootTargetType == null) {\n      throw new Error(`Target type ${targetTypeName} not found when processing SSVG root target type.`)\n    }\n  }\n\n  completeVirtualModel() {\n    let idCnt = 0\n    const getNextId = () => {\n      idCnt++\n      let _id = `el-${idCnt}`\n      while (this.realElementIdSet.has(_id)) {\n        idCnt++\n        _id = `el-${idCnt}`\n      }\n      return _id\n    }\n\n    if (this.rootTargetType.name === 'Any') {\n      // add id in origin obj\n      if (this.origin.id == null || this.origin.id == '') {\n        this.origin.id = getNextId()\n      }\n      Array.from(this.origin.querySelectorAll('*')).forEach(el => {\n        if (el.id == null || el.id == '') {\n          el.id = getNextId()\n        }\n        this.vNodeId2RealId.set(el.id, el.id)\n      })\n\n      const vm = this.virtualModel\n      const vEl = this.origin.cloneNode(true) as VirtualElementType\n      vm.appendChild(vEl)\n\n      // create selection\n      this.rootSelection = new TargetSelection([vEl], this, null)\n      return\n    }\n\n    const elements = this.origin.querySelectorAll<SVGElement>(`[${SSVGTargetModel.TYPE_ATTR}]`)\n    elements.forEach(el => {\n      const typeSelector = el.getAttribute(SSVGTargetModel.TYPE_ATTR)\n      const dataStr = el.getAttribute(SSVGTargetModel.DATA_ATTR)\n\n      // process id\n      let finalId\n      const isElIdValid = el.id != null && el.id != ''\n      if (isElIdValid) {\n        finalId = el.id\n      } else {\n        finalId = getNextId()\n        el.id = finalId\n      }\n      this.vNodeId2RealId.set(finalId, el.id)\n\n      // process classList\n      const typeNode = this.queryOneTypeNode(typeSelector)\n      const classList = typeNode.classList\n      if (el.hasAttribute(SSVGTargetModel.CLASS_ATTR)) {\n        const extraClassList = el.getAttribute(SSVGTargetModel.CLASS_ATTR).split(' ')\n        extraClassList.forEach(c => {\n          if (!classList.includes(c)) {\n            classList.push(c)\n          }\n        })\n      }\n\n      // parse data\n      let data = {}\n      if (dataStr != null && dataStr != '') {\n        data = JSON5.parse(dataStr)\n      }\n\n      const vEl = this.createVirtualElement(el, finalId, classList, data)\n      this.virtualModel.appendChild(vEl)\n    })\n\n    const virtualElements = Array.from(this.virtualModel.children) as VirtualElementType[]\n    this.rootSelection = new TargetSelection(virtualElements, this, null)\n  }\n\n  getRealElementById(id: string): SVGElement {\n    const realId = this.vNodeId2RealId.get(id)\n    assert(realId != null, `Cannot find real id for virtual id ${id}.`)\n    return this.origin.querySelector(`#${realId}`)\n  }\n}\n","import {CompileExec} from \"@/session/CompileExec\"\nimport {TemplateLibrary} from \"@/core/library/TemplateLibrary\"\nimport {Logger, LoggerManager, LogRecord} from \"@/core/utils/Logger\"\nimport {BaseSpecParser} from \"@/parser/BaseSpecParser\"\nimport {TargetModel} from \"@/core/ast/target/TargetModel\"\nimport {JsonSpecParser} from \"@/parser/json/JsonSpecParser\"\nimport {Resolver} from \"@/core/exec/resolve/Resolver\"\nimport {Synthesizer} from \"@/core/exec/synthesis/Synthesizer\"\nimport {GsapSynthesizer} from \"@/preset/gsap/GsapSynthesizer\"\nimport {BaseLogicalAniType} from \"@/core/ast/animation/logical/LogicalAnimation\"\nimport {TypeLibrary} from \"@/core/library/TypeLibrary\"\nimport {AniClassSpecInput} from \"@/parser/json/animation/AniClassSpec\"\nimport {getPresetTypes} from \"@/preset/target\"\nimport {getPresetTemplates} from \"@/preset/template\"\nimport {ResolveContext} from \"@/core/exec/resolve/ResolveContext\"\nimport {BinderSpecInput} from \"@/parser/json/target/BinderSpec\"\nimport {BSVGTargetModel} from \"@/core/ast/target/impl/svg/BSVGTargetModel\"\nimport {SSVGTargetModel} from \"@/core/ast/target/impl/svg/SSVGTargetModel\"\nimport {TargetTypeSpecInput} from \"@/parser/json/target/TargetTypeSpec\"\nimport {BaseTemplate, BaseTemplateType} from \"@/core/ast/template/BaseTemplate\"\nimport {TargetType} from \"@/core/ast/target/TargetType\"\nimport {cloneDeep} from \"lodash\"\n\n\nexport class GaiaSession {\n  private static readonly logger: Logger = LoggerManager.getLogger('GaiaSession')\n\n  parser: BaseSpecParser<unknown>\n  targetModelFactory: <ObjType>(session: GaiaSession, target: ObjType, ...targetArgs: unknown[]) => TargetModel<ObjType>\n  resolverFactory: <ObjType, AniType>(session: GaiaSession, compileExec: CompileExec<ObjType, AniType>) => Resolver<ObjType, AniType>\n  synthesizerFactory: <ObjType, AniType>(session: GaiaSession, compileExec: CompileExec<ObjType, AniType>) => Synthesizer<ObjType, AniType>\n\n  document: Document\n\n  templateLibrary: TemplateLibrary\n  typeLibrary: TypeLibrary\n\n  constructor() {\n    const parser = this.parser = new JsonSpecParser()\n\n    // SSVG factory\n    // this.targetModelFactory = ((target: SVGElement) => new SSVGTargetModel(target)) as (<ObjType> (target: ObjType) => TargetModel<ObjType>)\n    // SVG with binder factory\n    // this.targetModelFactory = ((target: SVGElement, binder: BinderSpecInput) => new SVGTargetModel(target, this.parser.parseBinder(binder))) as (<ObjType> (target: ObjType, ...targetArgs: unknown[]) => TargetModel<ObjType>)\n    // auto detect factory\n    this.targetModelFactory = function(session: GaiaSession, target: SVGElement, binder?: BinderSpecInput): TargetModel<SVGElement> {\n      // assert(target instanceof SVGSVGElement, `Target must be an SVGSVGElement. Got ${target.constructor.name}`)\n      if (binder === undefined) {\n        return new SSVGTargetModel(target as SVGSVGElement) as unknown as TargetModel<SVGElement>\n      } else {\n        return new BSVGTargetModel(target as SVGSVGElement, parser.parseBinder(binder)) as unknown as TargetModel<SVGElement>\n      }\n    } as <ObjType>(session: GaiaSession, target: ObjType, ...targetArgs: unknown[]) => TargetModel<ObjType>\n\n    this.resolverFactory = function(session: GaiaSession, compileExec) {\n      return new Resolver(compileExec)\n    }\n\n    this.synthesizerFactory = function(session: GaiaSession, compileExec: CompileExec<SVGElement, gsap.core.Animation>) {\n      return new GsapSynthesizer(compileExec)\n    } as <ObjType, AniType>(session: GaiaSession, compileExec: CompileExec<ObjType, AniType>) => Synthesizer<ObjType, AniType>\n\n    this.document = document\n  }\n\n  init() {\n    // create library with presets\n    GaiaSession.logger.debug(\"Creating preset template library\")\n    this.templateLibrary = new TemplateLibrary()\n    this.templateLibrary.register(getPresetTemplates(this))\n\n    GaiaSession.logger.debug(\"Creating preset type library\")\n    this.typeLibrary = new TypeLibrary()\n    this.typeLibrary.register(getPresetTypes(this))\n\n    GaiaSession.logger.info(`GaiaSession created. Preset: ${this.templateLibrary.size} templates, ${this.typeLibrary.size} types`)\n    GaiaSession.logger.trace(`Template library: ${this.templateLibrary.getAll().map(it => it.name).join(', ')}`)\n    GaiaSession.logger.trace(`Type library: ${this.typeLibrary.getAll().map(it => it.name).join(', ')}`)\n  }\n\n  get logs(): LogRecord[] {\n    return LoggerManager.records\n  }\n\n  registerOrUpdateTemplate(spec: AniClassSpecInput): void\n  registerOrUpdateTemplate(template: BaseTemplateType): void\n  registerOrUpdateTemplate(specOrTemplate: AniClassSpecInput | BaseTemplateType): void {\n    if (specOrTemplate == undefined) return\n    if (specOrTemplate instanceof BaseTemplate) {\n      this.templateLibrary.registerOrUpdate(specOrTemplate)\n    } else {\n      const spec = cloneDeep(specOrTemplate)\n      const template = this.parser.parseTemplate(spec)\n      this.templateLibrary.registerOrUpdate(template)\n    }\n  }\n\n  registerOrUpdateTemplates(specList: (AniClassSpecInput | BaseTemplateType)[]): void {\n    if (specList == undefined) return\n    for (const specOrTemplate of specList) {\n      this.registerOrUpdateTemplate(specOrTemplate)\n    }\n  }\n\n  unregisterTemplate(templateName: string): boolean {\n    const template = this.templateLibrary.get(templateName)\n    if (template == undefined) {\n      return false\n    }\n    return this.templateLibrary.unregister(template.fullName)\n  }\n\n  registerOrUpdateType(spec: TargetTypeSpecInput): void\n  registerOrUpdateType(type: TargetType): void\n  registerOrUpdateType(specOrType: TargetTypeSpecInput | TargetType): void {\n    if (specOrType == undefined) return\n    if (specOrType instanceof TargetType) {\n      this.typeLibrary.registerOrUpdate(specOrType)\n    } else {\n      const spec = cloneDeep(specOrType)\n      const type = this.parser.parseTargetType(spec)\n      this.typeLibrary.registerOrUpdate(type)\n    }\n  }\n\n  registerOrUpdateTypes(specList: (TargetTypeSpecInput | TargetType)[]): void {\n    if (specList == undefined) return\n    for (const specOrType of specList) {\n      // this.registerOrUpdateType(specOrType)  // this hints an error\n      if (specOrType instanceof TargetType) {\n        this.registerOrUpdateType(specOrType)\n      } else {\n        this.registerOrUpdateType(specOrType)\n      }\n    }\n  }\n\n  unregisterType(typeName: string): boolean {\n    const type = this.typeLibrary.get(typeName)\n    if (type == undefined) {\n      return false\n    }\n    return this.typeLibrary.unregister(type.fullName)\n  }\n\n  compileJson<ObjType, AniType>(spec: AniClassSpecInput, target: ObjType, ...targetArgs: unknown[]): AniType {\n    spec = cloneDeep(spec)\n    let unresolved\n    try {\n      const template = this.parser.parseTemplate(spec)\n      const compileExec = CompileExec.quickExec(this)\n      const cxt = new ResolveContext(compileExec)\n      unresolved = template.create(cxt, {})\n    } catch (e) {\n      GaiaSession.logger.error('Compile JSON failed. Caused by:\\n' + e)\n      throw e\n    }\n    return this.compile(unresolved, target, ...targetArgs)\n  }\n\n  compile<ObjType, AniType>(animation: BaseLogicalAniType, target: ObjType, ...targetArgs: unknown[]): AniType {\n    try {\n      const targetModel = this.targetModelFactory(this, target, ...targetArgs)\n      targetModel.init(this)\n      GaiaSession.logger.debug('Target model created')\n\n      const compileExec = CompileExec.fullyExec<ObjType, AniType>(this, animation, targetModel)\n      compileExec.setResolver(this.resolverFactory(this, compileExec))\n          .setSynthesizer(this.synthesizerFactory(this, compileExec))\n      GaiaSession.logger.debug('Compile exec created')\n\n      return compileExec.generated\n\n    } catch (e) {\n      GaiaSession.logger.error('Compile failed. Caused by:\\n' + e)\n      throw e\n    }\n  }\n\n  resolveJson<ObjType>(spec: AniClassSpecInput, target: ObjType, ...targetArgs: unknown[]): BaseLogicalAniType {\n    spec = cloneDeep(spec)\n    let unresolved\n    try {\n      const template = this.parser.parseTemplate(spec)\n      const compileExec = CompileExec.quickExec(this)\n      const cxt = new ResolveContext(compileExec)\n      unresolved = template.create(cxt, {})\n    } catch (e) {\n      GaiaSession.logger.error('Resolve JSON failed. Caused by:\\n' + e)\n      throw e\n    }\n    return this.resolve(unresolved, target, ...targetArgs)\n  }\n\n  resolve<ObjType>(unresolved: BaseLogicalAniType, target: ObjType, ...targetArgs: unknown[]): BaseLogicalAniType {\n    try {\n      const targetModel = this.targetModelFactory(this, target, ...targetArgs)\n      targetModel.init(this)\n\n      const compileExec = CompileExec.fullyExec<ObjType, unknown>(this, unresolved, targetModel)\n      compileExec.setResolver(this.resolverFactory(this, compileExec))\n\n      return compileExec.resolved\n    } catch (e) {\n      GaiaSession.logger.error('Resolve failed. Caused by:\\n' + e)\n      throw e\n    }\n  }\n\n  getTargetModel<ObjType>(target: ObjType, ...targetArgs: unknown[]) {\n    try {\n      const targetModel = this.targetModelFactory(this, target, ...targetArgs)\n      targetModel.init(this)\n      return targetModel\n    } catch (e) {\n      GaiaSession.logger.error('Get target model failed. Caused by:\\n' + e)\n      throw e\n    }\n  }\n\n  static builder(): GaiaSessionBuilder {\n    return new GaiaSessionBuilder()\n  }\n}\n\nexport class GaiaSessionBuilder {\n  private readonly _session: GaiaSession\n\n  constructor() {\n    this._session = new GaiaSession()\n  }\n\n  parser<SpecType>(parser: BaseSpecParser<SpecType>): GaiaSessionBuilder {\n    this._session.parser = parser\n    return this\n  }\n\n  targetModelFactory(factory: <ObjType>(session: GaiaSession, target: ObjType, ...targetArgs: unknown[]) => TargetModel<ObjType>): GaiaSessionBuilder {\n    this._session.targetModelFactory = factory\n    return this\n  }\n\n  resolverFactory(factory: <ObjType, AniType>(session: GaiaSession, compileExec: CompileExec<ObjType, AniType>) => Resolver<ObjType, AniType>): GaiaSessionBuilder {\n    this._session.resolverFactory = factory\n    return this\n  }\n\n  synthesizerFactory(factory: <ObjType, AniType>(session: GaiaSession, compileExec: CompileExec<ObjType, AniType>) => Synthesizer<ObjType, AniType>): GaiaSessionBuilder {\n    this._session.synthesizerFactory = factory\n    return this\n  }\n\n  templateLibrary(templateLibrary: TemplateLibrary): GaiaSessionBuilder {\n    this._session.templateLibrary = templateLibrary\n    return this\n  }\n\n  typeLibrary(typeLibrary: TypeLibrary): GaiaSessionBuilder {\n    this._session.typeLibrary = typeLibrary\n    return this\n  }\n\n  document(document: Document): GaiaSessionBuilder {\n    this._session.document = document\n    return this\n  }\n\n  build(): GaiaSession {\n    this._session.init()\n    return this._session\n  }\n}\n\nexport const DefaultSession = GaiaSession.builder().build()\n","import {BaseTemplate} from \"@/core/entities/spec/BaseTemplate\";\n\nexport class NativeTemplate extends BaseTemplate {\n  constructor() {\n    super();\n    this.type = 'native';\n  }\n}\n","import {NativeTemplate} from \"@/core/entities/spec/template/NativeTemplate\";\nimport {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\nimport {ParamDefinition} from \"@/core/entities/spec/parameter/ParamDefinition\";\nimport {NativeAnimation} from \"@/core/entities/spec/animation/NativeAnimation\";\nimport gsap from \"gsap\";\nimport * as d3 from 'd3';\nimport {computeUUID} from \"@/core/utils/uuid\";\nimport {CLIP_PATH_CLASS} from \"@/core/const/Element\";\n\nexport class SectorWheelTemplate extends NativeTemplate {\n  constructor() {\n    super();\n    this.templateName = 'sector-wheel';\n    this.parameters = [\n      new ParamDefinition('enterOrExit', ParamType.STRING, false, 'enter'),\n      new ParamDefinition('duration', ParamType.NUMBER, false, 1),\n      new ParamDefinition('ease', ParamType.STRING, false, 'power1.out'),\n      new ParamDefinition('stagger', ParamType.NUMBER, false, 0),\n      new ParamDefinition('valueMapper', ParamType.STRING, false, '@datum.value'),\n      new ParamDefinition('extraDegree', ParamType.NUMBER, false, 5),\n    ];\n  }\n\n  createAnimation() {\n    const animation = new SectorWheelAnimation();\n    // transfer template settings to this native animation instance\n    // as their parameters are the same\n    animation.updateSettings(this.getParamValues());\n    return animation;\n  }\n}\n\nclass SectorWheelAnimation extends NativeAnimation {\n  x\n  y\n  width\n  height\n\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {gsap.core.Timeline | gsap.core.Tween}\n   */\n  create(context) {\n    const glyphs = context.getGlyphs(this.target);\n    const defs = context.getDefsSel();\n    const tl = gsap.timeline()\n    const {stagger, valueMapper, extraDegree} = this.settings;\n\n    let x = Infinity, y = Infinity, width = 0, height = 0;\n    glyphs.forEach(glyph => {\n      const bbox = glyph.getBBox();\n      x = Math.min(x, bbox.x);\n      y = Math.min(y ,bbox.y);\n      width = Math.max(width, bbox.x + bbox.width - x);\n      height = Math.max(height, bbox.y + bbox.height - y);\n    });\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    console.log('sector', x, y, width, height);\n\n    const expr = valueMapper\n        .replaceAll('@classList', '__node__.classList')\n        .replaceAll('@id', '__node__.getAttribute(\"id\")')\n        .replaceAll('@index', '__index__')\n        .replaceAll('@datum', '(JSON.parse(__node__.getAttribute(\"ac-data\")) ?? {})')\n        .replaceAll('@el', '__node__');\n    console.log('sector mapper expr', expr)\n    // eslint-disable-next-line no-unused-vars\n    const values = glyphs.map((__node__, __index__) => {\n      // console.log(__node__, eval(expr));\n      return eval(expr);\n    });\n    const tot = values.reduce((sum, v) => sum + v, 0);\n    const sums = [0];\n    values.forEach((v, i) => sums.push(sums[i] + v));\n    const startDegrees = values.map((v, i) => sums[i] / tot * 360),\n          endDegrees = values.map((v, i) => (sums[i + 1]) / tot * 360);\n    console.log({values, startDegrees, endDegrees})\n\n    glyphs.forEach((glyph, i) => {\n      const clip = this.addClipPathToGlyph(defs, glyph);\n      const tw = this.createTwForClip(clip, glyph, startDegrees[i] - extraDegree, endDegrees[i] + extraDegree);\n      const position = i === 0 ? 0 : ('<' + stagger);\n      tl.add(tw, position);\n    });\n\n    return tl;\n  }\n\n  /**\n   * @param {d3.Selection} defs\n   * @param {SVGGraphicsElement} glyph\n   * @returns {SVGGraphicsElement} the clip path of glyph\n   */\n  addClipPathToGlyph(defs, glyph) {\n    if (!glyph.getAttribute('id')) {\n      glyph.setAttribute('id', computeUUID());\n    }\n    const clipId = 'clip-path-' + glyph.getAttribute('id');\n    let clip = defs.select(`#${clipId}`);\n    if (clip.empty()) {\n      clip = defs.append('clipPath')\n          .attr('id', clipId)\n          .classed(CLIP_PATH_CLASS, true);\n      glyph.setAttribute('clip-path', `url(#${clipId})`);\n    }\n    const wheelPathSel = clip.select('.sector-wheel');\n    if (!wheelPathSel.empty()) {\n      return wheelPathSel.node();\n    }\n\n    let strokeWidth = parseFloat(glyph.getAttribute('stroke-width') ?? '0');\n    d3.select(glyph).selectAll('*').each(function () {\n      const tempWidth = parseFloat(this.getAttribute('stroke-width') ?? '0');\n      strokeWidth = Math.max(tempWidth, strokeWidth);\n    });\n\n    const newClipPath = clip.append('path')\n        .attr('class', 'sector-wheel')\n        .attr('d', '')\n\n    return newClipPath.node();\n  }\n\n  /**\n   * Same as Grow effect, but applied on mark\n   * @param {SVGGraphicsElement} clip\n   * @param {SVGGraphicsElement} glyph\n   * @param startDegree\n   * @param endDegree\n   * @returns {gsap.core.Tween|null}\n   */\n  createTwForClip(clip, glyph, startDegree, endDegree) {\n    const {ease, duration} = this.settings;\n    const startAngle = startDegree, sweepAngle = endDegree - startDegree;\n\n    let arc, finalSweepAngle;\n    arc = {\n      startAngle: startAngle ?? 0,\n      sweepAngle: 0,\n      cx: this.x + this.width / 2,\n      cy: this.y + this.height / 2,\n      rx: Math.max(this.width, this.height),\n      ry: Math.max(this.width, this.height),\n    };\n    console.log(arc.cx, arc.cy, arc)\n    finalSweepAngle = sweepAngle;\n\n    const updatePath = function updatePath() {\n      const path = getArcPath(\n          arc.cx,\n          arc.cy,\n          arc.rx,\n          arc.ry,\n          arc.startAngle,\n          arc.sweepAngle\n      );\n      clip.setAttribute('d', path);\n    };\n\n    updatePath();\n\n    // set animation\n    return gsap.to(arc, {\n      sweepAngle: finalSweepAngle,\n      ease,\n      onUpdate: updatePath,\n      duration,\n    });\n  }\n}\n\n/* cite: https://greensock.com/forums/topic/17566-create-a-radial-wipe/?tab=comments#comment-79421 */\nfunction getArcPath(cx, cy, rx, ry, startAngle, sweepAngle) {\n  // 0 degrees, no path\n  if (!sweepAngle) return `M${cx} ${cy}`;\n\n  // mod angles to 360 degrees\n  startAngle %= 360;\n  sweepAngle %= 360;\n\n  // If arc is 360 degrees, the sweep angle is 0 due to mod\n  const isClosed = sweepAngle === 0;\n\n  // If closed, we'll need to use 2 arcs with an angle of 180 degrees\n  if (isClosed) {\n    sweepAngle = 180;\n  }\n\n  // Make angle positive to simplify large arc flag\n  if (sweepAngle < 0) {\n    sweepAngle += 360;\n  }\n\n  const largeArc = sweepAngle > 180 ? 1 : 0;\n\n  // Convert degrees to radians\n  const a1 = (startAngle * Math.PI) / 180;\n  const a2 = ((startAngle + sweepAngle) * Math.PI) / 180;\n\n  // Calculate start and end coords for arc. Starts at 12 o'clock\n  const x1 = cx + rx * Math.sin(a1);\n  const y1 = cy - ry * Math.cos(a1);\n\n  const x2 = cx + rx * Math.sin(a2);\n  const y2 = cy - ry * Math.cos(a2);\n\n  /*\n  NOTE: To orient the starting point to 3 o'clock instead of 12 o'clock,\n  add 90 degrees to the start angle, or change the code above to this...\n\n  var x1 = cx + rx * Math.cos(a1);\n  var y1 = cy + ry * Math.sin(a1);\n\n  var x2 = cx + rx * Math.cos(a2);\n  var y2 = cy + ry * Math.sin(a2);\n  */\n\n  // Related demo using arc path\n  // https://codepen.io/osublake/pen/VbWKMj/\n  if (isClosed) {\n    return `\n      M ${x1} ${y1}\n      A ${rx} ${ry} 0 1 1 ${x2} ${y2}\n      A ${rx} ${ry} 0 1 1 ${x1} ${y1}z`;\n  }\n\n  return `\n    M ${x1} ${y1}\n    A ${rx} ${ry} 0 ${largeArc} 1 ${x2} ${y2}\n    L ${cx} ${cy}z`;\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ExampleView.vue?vue&type=style&index=0&id=b356a9b2&prod&scoped=true&lang=css&\"","import JSON5 from 'json5';\n\n/**\n * @typedef Target\n * @type {NormalTarget | AnonymousTarget}\n */\n\nexport class Target {\n  /** @type {Object | Parameter | (Object | Parameter)[]} */\n  transform\n\n  static getDefaultTarget() {\n    return new NormalTarget();\n  }\n\n  static simplifyJSON(json) {\n    if (typeof json !== 'object') {\n      return json;\n    }\n    const result = {};\n    // convert to normal form\n    if ('selector' in json && json.selector !== '*' && json.selector.trim() !== '') {\n      result.selector = json.selector;\n    }\n    if ('transform' in json) {\n      let trans = json.transform;\n      if (typeof trans === 'string' && trans.trim() !== '') {\n        trans = JSON5.parse(trans);\n      }\n      if (typeof trans === 'object' && !Array.isArray(trans)) {\n        result.transform = trans;\n      }\n      if (Array.isArray(trans) && trans.length !== 0) {\n        for (let i = 0; i < trans.length; i++) {\n          if (typeof trans[i] === 'string') {\n            trans[i] = JSON5.parse(trans[i]);\n          }\n        }\n        result.transform = trans;\n      }\n    }\n    // simplify\n    if (Object.keys(result).length === 0) {\n      return undefined;   // use default\n    }\n    if (Object.keys(result).length === 1 && 'selector' in result) {\n      return result.selector;\n    }\n    return result;\n  }\n}\n\nexport class AnonymousTarget {\n  /** @type {string} */\n  originalSelector\n  /** @type {string | string[]} */\n  subTags\n}\n\nexport class NormalTarget extends Target {\n  /** @type {string} */\n  selector\n\n  constructor(selector='*', transform=[]) {\n    super();\n    this.selector = selector;\n    this.transform = transform;\n  }\n}\n\n/**\n * @type TargetDefinition\n * @type {TargetCreation | TargetRedefinition | TargetRemoval}\n */\n\nexport class TargetCreation {\n  /** @type {'new'} */\n  operation\n  /** @type {string} */\n  tagName\n  /** @type {string} */\n  selector\n  /** @type {string | Target[]} */\n  subTags\n}\n\nexport class TargetRedefinition {\n}\n\nexport class TargetRemoval {\n}\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DebugPanel.vue?vue&type=style&index=0&id=5e32d44a&prod&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HomepageView.vue?vue&type=style&index=0&id=151d5a1b&prod&scoped=true&lang=css&\"","// cite: https://blog.csdn.net/Dream_Weave/article/details/102616459\nfunction computeUUID() {\n  let s = [];\n  let hexDigits = \"0123456789abcdef\";\n  for (let i = 0; i < 36; i++) {\n    s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\n  }\n  s[14] = \"4\";  // bits 12-15 of the time_hi_and_version field to 0010\n  s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);  // bits 6-7 of the clock_seq_hi_and_reserved to 01\n  s[8] = s[13] = s[18] = s[23] = \"-\";\n\n  let uuid = s.join(\"\");\n  return uuid;\n}\n\nexport {\n  computeUUID\n}","// cite: https://blog.csdn.net/Dream_Weave/article/details/102616459\nfunction computeUUID() {\n  let s = [];\n  let hexDigits = \"0123456789abcdef\";\n  for (let i = 0; i < 36; i++) {\n    s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\n  }\n  s[14] = \"4\";  // bits 12-15 of the time_hi_and_version field to 0010\n  s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);  // bits 6-7 of the clock_seq_hi_and_reserved to 01\n  s[8] = s[13] = s[18] = s[23] = \"-\";\n\n  let uuid = s.join(\"\");\n  return uuid;\n}\n\nexport {\n  computeUUID\n}","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageFooter.vue?vue&type=style&index=0&id=bec64318&prod&scoped=true&lang=css&\"","import {BaseTransform} from \"@/core/entities/spec/BaseTransform\";\nimport * as d3 from 'd3';\n\nexport class SortTransform extends BaseTransform {\n  /** @type {string} */\n  type\n  /** @type {string} */\n  data\n  /** @type {string} */\n  attr\n  /** @type {string} */\n  expr\n  /** @type {string} */\n  order\n\n  // /** @type {Target} */\n  // target\n  // /** @type {import('@/core/entities/context/Context').Context} */\n  // context\n\n  constructor() {\n    super();\n    this.type = 'sort';\n    this.expr = '0';\n  }\n\n  /**\n   * @param {d3.Selection} selection\n   * @returns {d3.Selection}\n   */\n  execute(selection) {\n    const reverse = this.order === 'dec';\n    const nodes = selection.nodes();\n\n    let expr;\n    if (this.data) {\n      expr = `__node__.__data__.${this.data}`\n    } else if (this.attr) {\n      expr = `__node__.getAttribute(\"${this.attr}\")`;\n    } else if (this.expr) {\n      expr = this.expr\n          .replaceAll('@classList', '__node__.classList')\n          .replaceAll('@id', '__node__.getAttribute(\"id\")')\n          .replaceAll('@index', '__index__')\n          .replaceAll('@datum', '__node__.__data__')\n          .replaceAll('@el', '__node__');\n    } else {\n      expr = '0';\n    }\n    console.log('sort expr', expr);\n    const compareFunc = (node, index) => {\n      let __expr__ = expr, __order__ = this.order;\n      if (node.getAttribute('ac-data') !== '' && this.data) {\n        __expr__ = '(JSON.parse(__node__.getAttribute(\"ac-data\")) ?? {}).' + this.data;\n      }\n      // eslint-disable-next-line no-unused-vars\n      const func = function (__node__, __index__) {\n        if (Array.isArray(__order__)) {\n          return __order__.indexOf(eval(__expr__));\n        }\n        return eval(__expr__)\n      };\n      return func(node, index);\n    };\n\n    const indexMap = new Map();\n    nodes.forEach((n, i) => indexMap.set(n, i));\n    nodes.sort((n1, n2) => {\n      const num = compareFunc(n1, indexMap.get(n1)) - compareFunc(n2, indexMap.get(n1));\n      return reverse ? -num : num;\n    })\n    return d3.selectAll(nodes);\n  }\n\n}\n\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ContrlPanel.vue?vue&type=style&index=0&id=3e39b84e&prod&scoped=true&lang=css&\"","import {ParamType} from \"@/core/entities/spec/parameter/ParamType\";\n\nexport class ParamDefinition {\n  /** @type {string} */\n  paramName\n  /** @type {ParamType} */\n  paramType\n  /** @type {boolean} */\n  required\n  /** @type {*} */\n  defaultValue\n\n  /**\n   * @param {string} paramName\n   * @param {ParamType} paramType\n   * @param {boolean} required\n   * @param {*} defaultValue\n   */\n  constructor(\n      paramName='param',\n      paramType=ParamType.ANY,\n      required=true,\n      defaultValue=undefined,\n  ) {\n    this.paramName = paramName;\n    this.paramType = /** @type {ParamType} */ paramType.toLowerCase();\n    this.required = required;\n    this.defaultValue = defaultValue;\n  }\n\n  /**\n   * @param {*} value\n   * @returns {boolean}\n   */\n  isAcceptable(value) {\n    if (value === undefined && this.required) {\n      return false;\n    }\n    switch (this.paramType) {\n      case ParamType.NUMBER: return typeof value === \"number\";\n      case ParamType.STRING: return typeof value === \"string\";\n      case ParamType.OBJECT: return typeof value === 'object';\n      case ParamType.ARRAY: return Array.isArray(value);\n      case ParamType.ANY: return true;\n      case ParamType.BOOLEAN: return typeof value === 'boolean';\n      case ParamType.NUMBER_OR_ARRAY: return typeof value === 'number' || Array.isArray(value);\n      case ParamType.STRING_OR_ARRAY: return typeof value === 'string' || Array.isArray(value);\n    }\n    return false;\n  }\n}","export const CLASS_PREFIX = 'ani-chart-';\n\nexport const MASK_CLASS = 'ani-chart-mask';\nexport const ANNOTATION_CLASS = 'ani-chart-annotation';\nexport const CLIP_PATH_CLASS = 'ani-chart-clip-path';","/**\n * @enum {string}\n * @readonly\n */\nexport const ParamType = {\n  NUMBER: 'number',\n  STRING: 'string',\n  OBJECT: 'object',\n  ARRAY: 'array',\n  ANY: 'any',\n  BOOLEAN: 'boolean',\n  NUMBER_OR_ARRAY: 'number-or-array',\n  STRING_OR_ARRAY: 'string-or-array',\n}","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ProjSelectionPanel.vue?vue&type=style&index=0&id=62d2b04d&prod&scoped=true&lang=css&\"","export class BaseTransform {\n  /** @type {string} */\n  type\n\n  // /** @type {Target} */\n  // target\n  // /** @type {import('@/core/entities/context/Context').Context} */\n  // context\n\n  constructor() {\n    this.type = 'unknown';\n  }\n\n  /**\n   * @param {d3.Selection} selection\n   * @returns {d3.Selection}\n   */\n  // eslint-disable-next-line no-unused-vars\n  execute(selection) {\n    throw 'This transform object is abstract.'\n  }\n}\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./PageHeader.vue?vue&type=style&index=0&id=82648678&prod&scoped=true&lang=css&\"","import {Timing} from \"@/core/entities/spec/Timing\";\nimport {NormalTarget, Target} from \"@/core/entities/spec/Target\";\n\nexport class BaseAnimation {\n  /** @type {Target} */\n  target\n  /** @type {Timing} */\n  timing\n\n  /** @type {string} */\n  type\n  /** @type {Object<string, any>} */\n  settings\n\n  /**\n   * @param {Object<string, any>} settings\n   */\n  constructor(settings={}) {\n    this.target = Target.getDefaultTarget();\n    this.timing = new Timing();\n    this.type = 'unknown';\n    const defaultSettings = this.getDefaultSettings();\n    this.settings = Object.assign(defaultSettings, settings);\n  }\n\n  /**\n   * @param {Target | string} target\n   * @returns {BaseAnimation} this\n   */\n  setTarget(target) {\n    if (typeof target === 'string') {\n      this.target = new NormalTarget(target);\n    } else {\n      this.target = target;\n    }\n    return this;\n  }\n\n  /**\n   * @param {Object} target\n   * @returns {BaseAnimation} this\n   */\n  updateTarget(target) {\n    Object.assign(this.target, target);\n    return this;\n  }\n\n  /**\n   * @param {Timing} timing\n   * @returns {BaseAnimation} this\n   */\n  setTiming(timing) {\n    this.timing = timing;\n    return this;\n  }\n\n  /**\n   * @param {Timing | Object} timing\n   * @returns {BaseAnimation} this\n   */\n  updateTiming(timing) {\n    Object.keys(timing).forEach(key => {\n      if (timing[key] !== undefined) {\n        this.timing[key] = timing[key];\n      }\n    })\n    return this;\n  }\n\n  /**\n   * @returns {Object<string, any>}\n   */\n  getDefaultSettings() {\n    return {};\n  }\n\n  /**\n   * @param {Object<string, any>} settings\n   * @returns {BaseAnimation} this\n   */\n  updateSettings(settings) {\n    Object.assign(this.settings, settings);\n    return this;\n  }\n\n  /**\n   * @param {String} key\n   * @param {*} value\n   * @returns {BaseAnimation} this\n   */\n  set(key, value) {\n    this.settings[key] = value;\n    return this;\n  }\n\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {number}\n   */\n  // eslint-disable-next-line no-unused-vars\n  computeDuration(context) {\n    throw 'Animation is not implemented';\n  }\n\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {Set<HTMLElement>}\n   */\n  // eslint-disable-next-line no-unused-vars\n  computePossibleElements(context) {\n    throw 'Animation is not implemented';\n  }\n\n  /**\n   * @param {import('@/core/entities/context/Context').Context} context\n   * @returns {gsap.core.Timeline | gsap.core.Tween}\n   */\n  // eslint-disable-next-line no-unused-vars\n  create(context) {\n    throw 'Animation is not implemented';\n  }\n}\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TimelinePanel.vue?vue&type=style&index=0&id=c6ba2622&prod&scoped=true&lang=css&\""],"sourceRoot":""}